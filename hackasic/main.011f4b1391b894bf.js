"use strict";(self.webpackChunkhacka_sicredi=self.webpackChunkhacka_sicredi||[]).push([[179],{2011:(pt,Re,F)=>{F.d(Re,{Dh:()=>he,GT:()=>me,cc:()=>Ne,hO:()=>He,on:()=>K,pX:()=>ue,xv:()=>ve});var p=F(4650),$=F(127),k=F(5813);pt=F.hmd(pt);const se=["ngOnDestroy"],ue=(ge,Qe,Ze,Le={})=>new Proxy(ge,{get:(Pe,Ce)=>Ze.runOutsideAngular(()=>{var Ge;if(ge[Ce])return!(null===(Ge=Le?.spy)||void 0===Ge)&&Ge.get&&Le.spy.get(Ce,ge[Ce]),ge[Ce];if(se.indexOf(Ce)>-1)return()=>{};const ie=Qe.toPromise().then(le=>{const we=le&&le[Ce];return"function"==typeof we?we.bind(le):we&&we.then?we.then(Q=>Ze.run(()=>Q)):Ze.run(()=>we)});return new Proxy(()=>{},{get:(le,we)=>ie[we],apply:(le,we,Q)=>ie.then(ee=>{var fe;const ae=ee&&ee(...Q);return!(null===(fe=Le?.spy)||void 0===fe)&&fe.apply&&Le.spy.apply(Ce,Q,ae),ae})})})}),me=(ge,Qe)=>{Qe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Le=>{Object.defineProperty(ge.prototype,Le,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Le))})})};class pe{constructor(Qe){return Qe}}const he=new p.OlP("angularfire2.app.options"),ve=new p.OlP("angularfire2.app.name");function K(ge,Qe,Ze){const Pe="object"==typeof Ze&&Ze||{};Pe.name=Pe.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ge=$.Z.apps.filter(ie=>ie&&ie.name===Pe.name)[0]||Qe.runOutsideAngular(()=>$.Z.initializeApp(ge,Pe));try{JSON.stringify(ge)!==JSON.stringify(Ge.options)&&z("error",`${Ge.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ge)}const z=(ge,...Qe)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ge](...Qe)},J={provide:pe,useFactory:K,deps:[he,p.R0b,[new p.FiY,ve]]};let He=(()=>{class ge{constructor(Ze){$.Z.registerVersion("angularfire",k.q4.full,"core"),$.Z.registerVersion("angularfire",k.q4.full,"app-compat"),$.Z.registerVersion("angular",p.q4F.full,Ze.toString())}static initializeApp(Ze,Le){return{ngModule:ge,providers:[{provide:he,useValue:Ze},{provide:ve,useValue:Le}]}}}return ge.\u0275fac=function(Ze){return new(Ze||ge)(p.LFG(p.Lbi))},ge.\u0275mod=p.oAB({type:ge}),ge.\u0275inj=p.cJS({providers:[J]}),ge})();function Ne(ge,Qe,Ze,Le,Pe){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===ge)||[];if(Ce)return function be(ge,Qe){try{return ge.toString()===Qe.toString()}catch{return ge===Qe}}(Pe,Ge)||(Ee("error",`${Qe} was already initialized on the ${Ze} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Pe,was:Ge})),Ce;{const ie=Le();return globalThis.\u0275AngularfireInstanceCache.push([ge,ie,Pe]),ie}}const tt=!!pt.hot,Ee=(ge,...Qe)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ge](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Re,F)=>{F.d(Re,{q4:()=>st,iC:()=>gs,fc:()=>Jn,HU:()=>ks,vb:()=>ca,JM:()=>Ya});var p=F(4650),$=F(5867),k=F(5861),se=F(9681),ue=F(2090),me=F(4859),pe=F(1877),he=F(8766);const ve="@firebase/installations",K="0.5.16",J=`w:${K}`,He="FIS_v2",Qe=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(T){return T instanceof ue.ZR&&T.code.includes("request-failed")}function Le({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Pe(T){return{token:T.token,requestStatus:2,expiresIn:ee(T.expiresIn),creationTime:Date.now()}}function Ce(T,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,k.Z)(function*(T,D){const j=(yield D.json()).error;return Qe.create("request-failed",{requestName:T,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ie({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function le(T,{refreshToken:D}){const R=ie(T);return R.append("Authorization",function fe(T){return`${He} ${T}`}(D)),R}function we(T){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function ee(T){return Number(T.replace("s","000"))}function ae(T,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:R}){const j=Le(T),X=ie(T),oe=D.getImmediate({optional:!0});if(oe){const Dt=yield oe.getHeartbeatsHeader();Dt&&X.append("x-firebase-client",Dt)}const Ve={method:"POST",headers:X,body:JSON.stringify({fid:R,authVersion:He,appId:T.appId,sdkVersion:J})},lt=yield we(()=>fetch(j,Ve));if(lt.ok){const Dt=yield lt.json();return{fid:Dt.fid||R,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Pe(Dt.authToken)}}throw yield Ce("Create Installation",lt)})).apply(this,arguments)}function je(T){return new Promise(D=>{setTimeout(D,T)})}const sn=/^[cdef][\w-]{21}$/;function ze(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function dn(T){return function gt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return sn.test(R)?R:""}catch{return""}}function Cn(T){return`${T.appName}!${T.appId}`}const nn=new Map;function rn(T,D){const R=Cn(T);Ir(R,D),function Vi(T,D){const R=function On(){return!Br&&"BroadcastChannel"in self&&(Br=new BroadcastChannel("[Firebase] FID Change"),Br.onmessage=T=>{Ir(T.data.key,T.data.fid)}),Br}();R&&R.postMessage({key:T,fid:D}),function Bi(){0===nn.size&&Br&&(Br.close(),Br=null)}()}(R,D)}function Ir(T,D){const R=nn.get(T);if(R)for(const j of R)j(D)}let Br=null;const Bn="firebase-installations-store";let bi=null;function Hi(){return bi||(bi=(0,he.X3)("firebase-installations-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Bn)}})),bi}function Ye(T,D){return nr.apply(this,arguments)}function nr(){return(nr=(0,k.Z)(function*(T,D){const R=Cn(T),X=(yield Hi()).transaction(Bn,"readwrite"),oe=X.objectStore(Bn),Ae=yield oe.get(R);return yield oe.put(D,R),yield X.done,(!Ae||Ae.fid!==D.fid)&&rn(T,D.fid),D})).apply(this,arguments)}function Kn(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,k.Z)(function*(T){const D=Cn(T),j=(yield Hi()).transaction(Bn,"readwrite");yield j.objectStore(Bn).delete(D),yield j.done})).apply(this,arguments)}function gr(T,D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,k.Z)(function*(T,D){const R=Cn(T),X=(yield Hi()).transaction(Bn,"readwrite"),oe=X.objectStore(Bn),Ae=yield oe.get(R),Ve=D(Ae);return void 0===Ve?yield oe.delete(R):yield oe.put(Ve,R),yield X.done,Ve&&(!Ae||Ae.fid!==Ve.fid)&&rn(T,Ve.fid),Ve})).apply(this,arguments)}function In(T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(T){let D;const R=yield gr(T.appConfig,j=>{const X=_n(j),oe=mt(T,X);return D=oe.registrationPromise,oe.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function _n(T){return bt(T||{fid:ze(),registrationStatus:0})}function mt(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Qe.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},j=function _t(T,D){return xt.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:j}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Hr(T)}:{installationEntry:D}}function xt(){return(xt=(0,k.Z)(function*(T,D){try{const R=yield ae(T,D);return Ye(T.appConfig,R)}catch(R){throw Ze(R)&&409===R.customData.serverCode?yield Kn(T.appConfig):yield Ye(T.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Hr(T){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,k.Z)(function*(T){let D=yield Mr(T.appConfig);for(;1===D.registrationStatus;)yield je(100),D=yield Mr(T.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:j}=yield In(T);return j||R}return D})).apply(this,arguments)}function Mr(T){return gr(T,D=>{if(!D)throw Qe.create("installation-not-found");return bt(D)})}function bt(T){return function Nr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function kt(T,D){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:D},R){const j=Yt(T,R),X=le(T,R),oe=D.getImmediate({optional:!0});if(oe){const Dt=yield oe.getHeartbeatsHeader();Dt&&X.append("x-firebase-client",Dt)}const Ve={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:T.appId}})},lt=yield we(()=>fetch(j,Ve));if(lt.ok)return Pe(yield lt.json());throw yield Ce("Generate Auth Token",lt)})).apply(this,arguments)}function Yt(T,{fid:D}){return`${Le(T)}/${D}/authTokens:generate`}function dr(T){return An.apply(this,arguments)}function An(){return(An=(0,k.Z)(function*(T,D=!1){let R;const j=yield gr(T.appConfig,oe=>{if(!Xt(oe))throw Qe.create("not-registered");const Ae=oe.authToken;if(!D&&q(Ae))return oe;if(1===Ae.requestStatus)return R=Xe(T,D),oe;{if(!navigator.onLine)throw Qe.create("app-offline");const Ve=Y(oe);return R=It(T,Ve),Ve}});return R?yield R:j.authToken})).apply(this,arguments)}function Xe(T,D){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*(T,D){let R=yield et(T.appConfig);for(;1===R.authToken.requestStatus;)yield je(100),R=yield et(T.appConfig);const j=R.authToken;return 0===j.requestStatus?dr(T,D):j})).apply(this,arguments)}function et(T){return gr(T,D=>{if(!Xt(D))throw Qe.create("not-registered");return function H(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function It(T,D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,k.Z)(function*(T,D){try{const R=yield kt(T,D),j=Object.assign(Object.assign({},D),{authToken:R});return yield Ye(T.appConfig,j),R}catch(R){if(!Ze(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ye(T.appConfig,j)}else yield Kn(T.appConfig);throw R}})).apply(this,arguments)}function Xt(T){return void 0!==T&&2===T.registrationStatus}function q(T){return 2===T.requestStatus&&!function W(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+36e5}(T)}function Y(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}function B(){return(B=(0,k.Z)(function*(T){const D=T,{installationEntry:R,registrationPromise:j}=yield In(D);return j?j.catch(console.error):dr(D).catch(console.error),R.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,k.Z)(function*(T,D=!1){const R=T;return yield rt(R),(yield dr(R,D)).token})).apply(this,arguments)}function rt(T){return it.apply(this,arguments)}function it(){return(it=(0,k.Z)(function*(T){const{registrationPromise:D}=yield In(T);D&&(yield D)})).apply(this,arguments)}function Ys(T){return Qe.create("missing-app-config-values",{valueName:T})}const Po="installations",Qs=T=>{const D=T.getProvider("app").getImmediate(),R=function bn(T){if(!T||!T.options)throw Ys("App Configuration");if(!T.name)throw Ys("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!T.options[R])throw Ys(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Js=T=>{const D=T.getProvider("app").getImmediate(),R=(0,se._getProvider)(D,Po).getImmediate();return{getId:()=>function M(T){return B.apply(this,arguments)}(R),getToken:X=>function ne(T){return Oe.apply(this,arguments)}(R,X)}};(function hu(){(0,se._registerComponent)(new me.wA(Po,Qs,"PUBLIC")),(0,se._registerComponent)(new me.wA("installations-internal",Js,"PRIVATE"))})(),(0,se.registerVersion)(ve,K),(0,se.registerVersion)(ve,K,"esm2017");const is="@firebase/remote-config",Qn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class No{constructor(D,R,j,X){this.client=D,this.storage=R,this.storageCache=j,this.logger=X}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-R,X=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${X}.`),X}fetch(D){var R=this;return(0,k.Z)(function*(){const[j,X]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(X&&R.isCachedDataFresh(D.cacheMaxAgeMillis,j))return X;D.eTag=X&&X.eTag;const oe=yield R.client.fetch(D),Ae=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ae.push(R.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ae),oe})()}}function As(T=navigator){return T.languages&&T.languages[0]||T.language}class no{constructor(D,R,j,X,oe,Ae){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=j,this.projectId=X,this.apiKey=oe,this.appId=Ae}fetch(D){var R=this;return(0,k.Z)(function*(){var j,X,oe;const[Ae,Ve]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},yt={sdk_version:R.sdkVersion,app_instance_id:Ae,app_instance_id_token:Ve,app_id:R.appId,language_code:As()},zn={method:"POST",headers:Pt,body:JSON.stringify(yt)},_r=fetch(Dt,zn),ha=new Promise((fa,go)=>{D.signal.addEventListener(()=>{const ni=new Error("The operation was aborted.");ni.name="AbortError",go(ni)})});let Ls;try{yield Promise.race([_r,ha]),Ls=yield _r}catch(fa){let go="fetch-client-network";throw"AbortError"===(null===(j=fa)||void 0===j?void 0:j.name)&&(go="fetch-timeout"),Qn.create(go,{originalErrorMessage:null===(X=fa)||void 0===X?void 0:X.message})}let Lt=Ls.status;const xi=Ls.headers.get("ETag")||void 0;let ms,Ki;if(200===Ls.status){let fa;try{fa=yield Ls.json()}catch(go){throw Qn.create("fetch-client-parse",{originalErrorMessage:null===(oe=go)||void 0===oe?void 0:oe.message})}ms=fa.entries,Ki=fa.state}if("INSTANCE_STATE_UNSPECIFIED"===Ki?Lt=500:"NO_CHANGE"===Ki?Lt=304:("NO_TEMPLATE"===Ki||"EMPTY_CONFIG"===Ki)&&(ms={}),304!==Lt&&200!==Lt)throw Qn.create("fetch-status",{httpStatus:Lt});return{status:Lt,eTag:xi,config:ms}})()}}class os{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,k.Z)(function*(){const j=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:j}){var X=this;return(0,k.Z)(function*(){yield function di(T,D){return new Promise((R,j)=>{const X=Math.max(D-Date.now(),0),oe=setTimeout(R,X);T.addEventListener(()=>{clearTimeout(oe),j(Qn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const oe=yield X.client.fetch(D);return yield X.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Vp(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(oe))throw oe;const Ae={throttleEndTimeMillis:Date.now()+(0,ue.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(Ae),X.attemptFetch(D,Ae)}})()}}class jp{constructor(D,R,j,X,oe){this.app=D,this._client=R,this._storageCache=j,this._storage=X,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ra(T,D){var R;const j=T.target.error||void 0;return Qn.create(D,{originalErrorMessage:j&&(null===(R=j)||void 0===R?void 0:R.message)})}const ko="app_namespace_store";class Ac{constructor(D,R,j,X=function $p(){return new Promise((T,D)=>{var R;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{D(Ra(X,"storage-open"))},j.onsuccess=X=>{T(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(ko,{keyPath:"compositeKey"})}}catch(j){D(Qn.create("storage-open",{originalErrorMessage:null===(R=j)||void 0===R?void 0:R.message}))}})}()){this.appId=D,this.appName=R,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,k.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,oe)=>{var Ae;const lt=j.transaction([ko],"readonly").objectStore(ko),Dt=R.createCompositeKey(D);try{const Pt=lt.get(Dt);Pt.onerror=yt=>{oe(Ra(yt,"storage-get"))},Pt.onsuccess=yt=>{const zn=yt.target.result;X(zn?zn.value:void 0)}}catch(Pt){oe(Qn.create("storage-get",{originalErrorMessage:null===(Ae=Pt)||void 0===Ae?void 0:Ae.message}))}})})()}set(D,R){var j=this;return(0,k.Z)(function*(){const X=yield j.openDbPromise;return new Promise((oe,Ae)=>{var Ve;const Dt=X.transaction([ko],"readwrite").objectStore(ko),Pt=j.createCompositeKey(D);try{const yt=Dt.put({compositeKey:Pt,value:R});yt.onerror=zn=>{Ae(Ra(zn,"storage-set"))},yt.onsuccess=()=>{oe()}}catch(yt){Ae(Qn.create("storage-set",{originalErrorMessage:null===(Ve=yt)||void 0===Ve?void 0:Ve.message}))}})})()}delete(D){var R=this;return(0,k.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,oe)=>{var Ae;const lt=j.transaction([ko],"readwrite").objectStore(ko),Dt=R.createCompositeKey(D);try{const Pt=lt.delete(Dt);Pt.onerror=yt=>{oe(Ra(yt,"storage-delete"))},Pt.onsuccess=()=>{X()}}catch(Pt){oe(Qn.create("storage-delete",{originalErrorMessage:null===(Ae=Pt)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Oo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const R=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),X=D.storage.getActiveConfig(),oe=yield R;oe&&(D.lastFetchStatus=oe);const Ae=yield j;Ae&&(D.lastSuccessfulFetchTimestampMillis=Ae);const Ve=yield X;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function S_(){return fu.apply(this,arguments)}function fu(){return(fu=(0,k.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function xc(){(0,se._registerComponent)(new me.wA("remote-config",function T(D,{instanceIdentifier:R}){const j=D.getProvider("app").getImmediate(),X=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Qn.create("registration-window");if(!(0,ue.hl)())throw Qn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ae,appId:Ve}=j.options;if(!oe)throw Qn.create("registration-project-id");if(!Ae)throw Qn.create("registration-api-key");if(!Ve)throw Qn.create("registration-app-id");const lt=new Ac(Ve,j.name,R=R||"firebase"),Dt=new Oo(lt),Pt=new pe.Yd(is);Pt.logLevel=pe.in.ERROR;const yt=new no(X,se.SDK_VERSION,R,oe,Ae,Ve),zn=new os(yt,lt),_r=new No(zn,lt,Dt,Pt),ha=new jp(j,_r,Dt,lt,Pt);return function Ln(T){const D=(0,ue.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ha),ha},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(is,"0.3.15"),(0,se.registerVersion)(is,"0.3.15","esm2017")}();const Er="/firebase-messaging-sw.js",Fo="/firebase-cloud-messaging-push-scope",xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pu="google.c.a.c_id",cl="google.c.a.c_l",Mc="google.c.a.ts",Uo="google.c.a.e";var hi=(()=>{return(T=hi||(hi={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",hi;var T})();function as(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jr(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(R),X=new Uint8Array(j.length);for(let oe=0;oe<j.length;++oe)X[oe]=j.charCodeAt(oe);return X}const ro="fcm_token_details_db",Bo="fcm_token_object_Store";function Wp(T){return dl.apply(this,arguments)}function dl(){return dl=(0,k.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(ro))return null;let D=null;return(yield(0,he.X3)(ro,5,{upgrade:(j=(0,k.Z)(function*(X,oe,Ae,Ve){var lt;if(oe<2||!X.objectStoreNames.contains(Bo))return;const Dt=Ve.objectStore(Bo),Pt=yield Dt.index("fcmSenderId").get(T);if(yield Dt.clear(),Pt)if(2===oe){const yt=Pt;if(!yt.auth||!yt.p256dh||!yt.endpoint)return;D={token:yt.fcmToken,createTime:null!==(lt=yt.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:yt.auth,p256dh:yt.p256dh,endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:"string"==typeof yt.vapidKey?yt.vapidKey:as(yt.vapidKey)}}}else if(3===oe){const yt=Pt;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:as(yt.auth),p256dh:as(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:as(yt.vapidKey)}}}else if(4===oe){const yt=Pt;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:as(yt.auth),p256dh:as(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:as(yt.vapidKey)}}}}),function(oe,Ae,Ve,lt){return j.apply(this,arguments)})})).close(),yield(0,he.Lj)(ro),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Fn(D)?D:null;var j}),dl.apply(this,arguments)}function Fn(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Si="firebase-messaging-store";let Cr=null;function gu(){return Cr||(Cr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Si)}})),Cr}function jo(T){return $i.apply(this,arguments)}function $i(){return($i=(0,k.Z)(function*(T){const D=fi(T),j=yield(yield gu()).transaction(Si).objectStore(Si).get(D);if(j)return j;{const X=yield Wp(T.appConfig.senderId);if(X)return yield on(T,X),X}})).apply(this,arguments)}function on(T,D){return hl.apply(this,arguments)}function hl(){return(hl=(0,k.Z)(function*(T,D){const R=fi(T),X=(yield gu()).transaction(Si,"readwrite");return yield X.objectStore(Si).put(D,R),yield X.done,D})).apply(this,arguments)}function Rs(T){return fl.apply(this,arguments)}function fl(){return(fl=(0,k.Z)(function*(T){const D=fi(T),j=(yield gu()).transaction(Si,"readwrite");yield j.objectStore(Si).delete(D),yield j.done})).apply(this,arguments)}function fi({appConfig:T}){return T.appId}const jn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nt(T,D){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*(T,D){var R;const j=yield Oa(T),X=Me(D),oe={method:"POST",headers:j,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(io(T.appConfig),oe)).json()}catch(Ve){throw jn.create("token-subscribe-failed",{errorInfo:null===(R=Ve)||void 0===R?void 0:R.toString()})}if(Ae.error)throw jn.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw jn.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function Gp(T,D){return Na.apply(this,arguments)}function Na(){return(Na=(0,k.Z)(function*(T,D){var R;const j=yield Oa(T),X=Me(D.subscriptionOptions),oe={method:"PATCH",headers:j,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(`${io(T.appConfig)}/${D.token}`,oe)).json()}catch(Ve){throw jn.create("token-update-failed",{errorInfo:null===(R=Ve)||void 0===R?void 0:R.toString()})}if(Ae.error)throw jn.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw jn.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function kc(T,D){return ka.apply(this,arguments)}function ka(){return(ka=(0,k.Z)(function*(T,D){var R;const X={method:"DELETE",headers:yield Oa(T)};try{const Ae=yield(yield fetch(`${io(T.appConfig)}/${D}`,X)).json();if(Ae.error)throw jn.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(oe){throw jn.create("token-unsubscribe-failed",{errorInfo:null===(R=oe)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function io({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Oa(T){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,k.Z)(function*({appConfig:T,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Me({p256dh:T,auth:D,endpoint:R,vapidKey:j}){const X={web:{endpoint:R,auth:D,p256dh:T}};return j!==xs&&(X.web.applicationPubKey=j),X}const Kt=6048e5;function Ph(T){return $o.apply(this,arguments)}function $o(){return($o=(0,k.Z)(function*(T){const D=yield Mh(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:as(D.getKey("auth")),p256dh:as(D.getKey("p256dh"))},j=yield jo(T.firebaseDependencies);if(j){if(zp(j.subscriptionOptions,R))return Date.now()>=j.createTime+Kt?mu(T,{token:j.token,createTime:Date.now(),subscriptionOptions:R}):j.token;try{yield kc(T.firebaseDependencies,j.token)}catch(X){console.warn(X)}return _u(T.firebaseDependencies,R)}return _u(T.firebaseDependencies,R)})).apply(this,arguments)}function ir(T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,k.Z)(function*(T){const D=yield jo(T.firebaseDependencies);D&&(yield kc(T.firebaseDependencies,D.token),yield Rs(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function mu(T,D){return $r.apply(this,arguments)}function $r(){return($r=(0,k.Z)(function*(T,D){try{const R=yield Gp(T.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield on(T.firebaseDependencies,j),R}catch(R){throw yield ir(T),R}})).apply(this,arguments)}function _u(T,D){return Go.apply(this,arguments)}function Go(){return(Go=(0,k.Z)(function*(T,D){const j={token:yield Nt(T,D),createTime:Date.now(),subscriptionOptions:D};return yield on(T,j),j.token})).apply(this,arguments)}function Mh(T,D){return La.apply(this,arguments)}function La(){return(La=(0,k.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jr(D)})})).apply(this,arguments)}function zp(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}function so(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function sr(T,D){if(!D.notification)return;T.notification={};const R=D.notification.title;R&&(T.notification.title=R);const j=D.notification.body;j&&(T.notification.body=j);const X=D.notification.image;X&&(T.notification.image=X);const oe=D.notification.icon;oe&&(T.notification.icon=oe)}(D,T),function Wi(T,D){!D.data||(T.data=D.data)}(D,T),function Fa(T,D){var R,j,X,oe,Ae;if(!(D.fcmOptions||null!==(R=D.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const Ve=null!==(X=null===(j=D.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(oe=D.notification)||void 0===oe?void 0:oe.click_action;Ve&&(T.fcmOptions.link=Ve);const lt=null===(Ae=D.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;lt&&(T.fcmOptions.analyticsLabel=lt)}(D,T),D}function Ua(T){return"object"==typeof T&&!!T&&pu in T}function us(T,D){const R=[];for(let j=0;j<T.length;j++)R.push(T.charAt(j)),j<D.length&&R.push(D.charAt(j));return R.join("")}function pl(T){return jn.create("missing-app-config-values",{valueName:T})}us("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),us("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lc{constructor(D,R,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Oc(T){if(!T||!T.options)throw pl("App Configuration Object");if(!T.name)throw pl("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const j of D)if(!R[j])throw pl(j);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:X,installations:R,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Nh(T){return zo.apply(this,arguments)}function zo(){return(zo=(0,k.Z)(function*(T){var D;try{T.swRegistration=yield navigator.serviceWorker.register(Er,{scope:Fo}),T.swRegistration.update().catch(()=>{})}catch(R){throw jn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=R)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function gl(T,D){return Va.apply(this,arguments)}function Va(){return(Va=(0,k.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield Nh(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function ml(T,D){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,k.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=xs)})).apply(this,arguments)}function qo(){return(qo=(0,k.Z)(function*(T,D){if(!navigator)throw jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jn.create("permission-blocked");return yield ml(T,D?.vapidKey),yield gl(T,D?.serviceWorkerRegistration),Ph(T)})).apply(this,arguments)}function kh(T,D,R){return ja.apply(this,arguments)}function ja(){return(ja=(0,k.Z)(function*(T,D,R){const j=Oh(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:R[pu],message_name:R[cl],message_time:R[Mc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Oh(T){switch(T){case hi.NOTIFICATION_CLICKED:return"notification_open";case hi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ps(){return(Ps=(0,k.Z)(function*(T,D){const R=D.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===hi.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(so(R)):T.onMessageHandler.next(so(R)));const j=R.data;Ua(j)&&"1"===j[Uo]&&(yield kh(T,R.messageType,j))})).apply(this,arguments)}const Ms="@firebase/messaging",Rn=T=>{const D=new Lc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Uc(T,D){return Ps.apply(this,arguments)}(D,R)),D},ls=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:j=>function Fc(T,D){return qo.apply(this,arguments)}(D,j)}};function Bc(){return _l.apply(this,arguments)}function _l(){return(_l=(0,k.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pn(){(0,se._registerComponent)(new me.wA("messaging",Rn,"PUBLIC")),(0,se._registerComponent)(new me.wA("messaging-internal",ls,"PRIVATE")),(0,se.registerVersion)(Ms,"0.11.0"),(0,se.registerVersion)(Ms,"0.11.0","esm2017")}();const Yo="analytics",Hc="firebase_id",Il="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$c="https://www.googletagmanager.com/gtag/js",Hn=new pe.Yd("@firebase/analytics");function vu(T){return Promise.all(T.map(D=>D.catch(R=>R)))}function wu(T,D){const R=document.createElement("script");R.src=`${$c}?l=${T}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Fh(T,D,R,j,X,oe){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,k.Z)(function*(T,D,R,j,X,oe){const Ae=j[X];try{if(Ae)yield D[Ae];else{const lt=(yield vu(R)).find(Dt=>Dt.measurementId===X);lt&&(yield D[lt.appId])}}catch(Ve){Hn.error(Ve)}T("config",X,oe)})).apply(this,arguments)}function cs(T,D,R,j,X){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,k.Z)(function*(T,D,R,j,X){try{let oe=[];if(X&&X.send_to){let Ae=X.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ve=yield vu(R);for(const lt of Ae){const Dt=Ve.find(yt=>yt.measurementId===lt),Pt=Dt&&D[Dt.appId];if(!Pt){oe=[];break}oe.push(Pt)}}0===oe.length&&(oe=Object.values(D)),yield Promise.all(oe),T("event",j,X||{})}catch(oe){Hn.error(oe)}})).apply(this,arguments)}function Wc(T){const D=window.document.getElementsByTagName("script");for(const R of Object.values(D))if(R.src&&R.src.includes($c)&&R.src.includes(T))return R;return null}const or=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wa=new class Cl{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Qo(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Bh(T){return $n.apply(this,arguments)}function $n(){return($n=(0,k.Z)(function*(T){var D;const{appId:R,apiKey:j}=T,X={method:"GET",headers:Qo(j)},oe=Il.replace("{app-id}",R),Ae=yield fetch(oe,X);if(200!==Ae.status&&304!==Ae.status){let Ve="";try{const lt=yield Ae.json();null!==(D=lt.error)&&void 0!==D&&D.message&&(Ve=lt.error.message)}catch{}throw or.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ve})}return Ae.json()})).apply(this,arguments)}function Gc(T){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,k.Z)(function*(T,D=Wa,R){const{appId:j,apiKey:X,measurementId:oe}=T.options;if(!j)throw or.create("no-app-id");if(!X){if(oe)return{measurementId:oe,appId:j};throw or.create("no-api-key")}const Ae=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Ga;return setTimeout((0,k.Z)(function*(){Ve.abort()}),void 0!==R?R:6e4),zc({appId:j,apiKey:X,measurementId:oe},Ae,Ve,D)})).apply(this,arguments)}function zc(T,D,R){return ds.apply(this,arguments)}function ds(){return(ds=(0,k.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:R},j,X=Wa){var oe,Ae;const{appId:Ve,measurementId:lt}=T;try{yield Tl(j,D)}catch(Dt){if(lt)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${null===(oe=Dt)||void 0===oe?void 0:oe.message}]`),{appId:Ve,measurementId:lt};throw Dt}try{const Dt=yield Bh(T);return X.deleteThrottleMetadata(Ve),Dt}catch(Dt){const Pt=Dt;if(!Cu(Pt)){if(X.deleteThrottleMetadata(Ve),lt)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:Ve,measurementId:lt};throw Dt}const yt=503===Number(null===(Ae=Pt?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,ue.$s)(R,X.intervalMillis,30):(0,ue.$s)(R,X.intervalMillis),zn={throttleEndTimeMillis:Date.now()+yt,backoffCount:R+1};return X.setThrottleMetadata(Ve,zn),Hn.debug(`Calling attemptFetch again in ${yt} millis`),zc(T,zn,j,X)}})).apply(this,arguments)}function Tl(T,D){return new Promise((R,j)=>{const X=Math.max(D-Date.now(),0),oe=setTimeout(R,X);T.addEventListener(()=>{clearTimeout(oe),j(or.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Cu(T){if(!(T instanceof ue.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ga{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let oo,bu;function Jo(){return(Jo=(0,k.Z)(function*(T,D,R,j,X){if(X&&X.global)T("event",R,j);else{const oe=yield D;T("event",R,Object.assign(Object.assign({},j),{send_to:oe}))}})).apply(this,arguments)}function na(T){bu=T}function bl(T){oo=T}function ao(){return ra.apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(){var T;if(!(0,ue.hl)())return Hn.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(D){return Hn.warn(or.create("indexeddb-unavailable",{errorInfo:null===(T=D)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function ia(){return(ia=(0,k.Z)(function*(T,D,R,j,X,oe,Ae){var Ve;const lt=Gc(T);lt.then(_r=>{R[_r.measurementId]=_r.appId,T.options.measurementId&&_r.measurementId!==T.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${_r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_r=>Hn.error(_r)),D.push(lt);const Dt=ao().then(_r=>{if(_r)return j.getId()}),[Pt,yt]=yield Promise.all([lt,Dt]);Wc(oe)||wu(oe,Pt.measurementId),bu&&(X("consent","default",bu),na(void 0)),X("js",new Date);const zn=null!==(Ve=Ae?.config)&&void 0!==Ve?Ve:{};return zn.origin="firebase",zn.update=!0,null!=yt&&(zn[Hc]=yt),X("config",Pt.measurementId,zn),oo&&(X("set",oo),bl(void 0)),Pt.measurementId})).apply(this,arguments)}class Du{constructor(D){this.app=D}_delete(){return delete kr[this.app.options.appId],Promise.resolve()}}let kr={},sa=[];const uo={};let aa,zi,oa="dataLayer",Kc=!1;function $h(T,D,R){!function qp(){const T=[];if((0,ue.ru)()&&T.push("This is a browser extension environment."),(0,ue.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((j,X)=>`(${X+1}) ${j}`).join(" "),R=or.create("invalid-analytics-context",{errorInfo:D});Hn.warn(R.message)}}();const j=T.options.appId;if(!j)throw or.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw or.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=kr[j])throw or.create("already-exists",{id:j});if(!Kc){!function Iu(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(oa);const{wrappedGtag:oe,gtagCore:Ae}=function $a(T,D,R,j,X){let oe=function(...Ae){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(oe=window[X]),window[X]=function El(T,D,R,j){function oe(){return(oe=(0,k.Z)(function*(Ae,Ve,lt){try{"event"===Ae?yield cs(T,D,R,Ve,lt):"config"===Ae?yield Fh(T,D,R,j,Ve,lt):"consent"===Ae?T("consent","update",lt):T("set",Ve)}catch(Dt){Hn.error(Dt)}})).apply(this,arguments)}return function X(Ae,Ve,lt){return oe.apply(this,arguments)}}(oe,T,D,R),{gtagCore:oe,wrappedGtag:window[X]}}(kr,sa,uo,oa,"gtag");zi=oe,aa=Ae,Kc=!0}return kr[j]=function Hh(T,D,R,j,X,oe,Ae){return ia.apply(this,arguments)}(T,sa,uo,D,aa,oa,R),new Du(T)}function x_(){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,k.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const at="@firebase/analytics";!function Sn(){(0,se._registerComponent)(new me.wA(Yo,(D,{options:R})=>$h(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,se._registerComponent)(new me.wA("analytics-internal",function T(D){try{const R=D.getProvider(Yo).getImmediate();return{logEvent:(j,X,oe)=>function an(T,D,R,j){T=(0,ue.m9)(T),function za(T,D,R,j,X){return Jo.apply(this,arguments)}(zi,kr[T.app.options.appId],D,R,j).catch(X=>Hn.error(X))}(R,j,X,oe)}}catch(R){throw or.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,se.registerVersion)(at,"0.8.4"),(0,se.registerVersion)(at,"0.8.4","esm2017")}();var fs=F(4408),Tr=F(7565);const Zc=new class co extends Tr.v{}(class lo extends fs.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(D,R,j):(D.flush(this),0)}});var Gh=F(4986),ua=F(8505),Sl=F(5363),ho=F(9468);const st=new p.GfV("7.4.1"),Ka="__angularfire_symbol__analyticsIsSupportedValue",qi="__angularfire_symbol__analyticsIsSupported",Al="__angularfire_symbol__remoteConfigIsSupportedValue",Au="__angularfire_symbol__remoteConfigIsSupported",Wn="__angularfire_symbol__messagingIsSupportedValue",Za="__angularfire_symbol__messagingIsSupported";function Ya(T,D,R){if(D){if(1===D.length)return D[0];const oe=D.filter(Ae=>Ae.app===R);if(1===oe.length)return oe[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[qi]||(globalThis[qi]=x_().then(T=>globalThis[Ka]=T).catch(()=>globalThis[Ka]=!1)),globalThis[Za]||(globalThis[Za]=Bc().then(T=>globalThis[Wn]=T).catch(()=>globalThis[Wn]=!1)),globalThis[Au]||(globalThis[Au]=S_().then(T=>globalThis[Al]=T).catch(()=>globalThis[Al]=!1));const ca=(T,D)=>{const R=D?[D]:(0,$.C6)(),j=[];return R.forEach(X=>{X.container.getProvider(T).instances.forEach(Ae=>{j.includes(Ae)||j.push(Ae)})}),j};function gi(){}class fo{constructor(D,R=Zc){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,j){const X=this.zone;return this.delegate.schedule(function(Ae){X.runGuarded(()=>{D.apply(this,[Ae])})},R,j)}}class xl{constructor(D){this.zone=D,this.task=null}call(D,R){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gi,{},gi,gi)),R.pipe((0,ua.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ks=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new fo(Zone.current)),this.insideAngular=R.run(()=>new fo(Zone.current,Gh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(p.LFG(p.R0b))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ti(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Jn(T){return T.pipe((0,Sl.Q)(ti().outsideAngular))}function gs(T){return ti(),function Gn(T){return function(R){return(R=R.lift(new xl(T.ngZone))).pipe((0,ho.R)(T.outsideAngular),(0,Sl.Q)(T.insideAngular))}}(ti())(T)}},8247:(pt,Re,F)=>{F.d(Re,{$:()=>io,A:()=>z,B:()=>Ne,G:()=>Js,H:()=>Yr,J:()=>os,L:()=>q,M:()=>fu,N:()=>Pc,P:()=>Gh,Q:()=>pu,R:()=>R_,T:()=>cl,U:()=>xs,V:()=>hi,W:()=>as,X:()=>Wp,Y:()=>Pa,Z:()=>Nt,_:()=>Gp,a:()=>Ns,a0:()=>Ph,a1:()=>ir,a2:()=>mu,a3:()=>_u,a4:()=>Mh,a5:()=>zp,a6:()=>sr,a7:()=>Wi,a8:()=>Ua,a9:()=>us,aA:()=>W,aB:()=>lt,aC:()=>Jn,aD:()=>Os,aE:()=>vt,aI:()=>Qo,aL:()=>Uo,aa:()=>Nh,ab:()=>gl,ac:()=>ml,af:()=>kh,ag:()=>Oh,ah:()=>Uc,ak:()=>Si,al:()=>yl,an:()=>$c,ao:()=>Eu,ap:()=>we,aq:()=>Ue,ar:()=>rt,as:()=>Ze,at:()=>Ru,au:()=>xi,av:()=>Rt,aw:()=>Le,ax:()=>ie,ay:()=>_r,az:()=>ee,b:()=>or,c:()=>Wn,d:()=>zh,e:()=>xu,f:()=>Gn,g:()=>j,h:()=>T,i:()=>ra,j:()=>Ae,k:()=>Jh,l:()=>ei,m:()=>Fs,o:()=>he,r:()=>fs,s:()=>hs,u:()=>Zc});var p=F(5861),$=F(2090),k=F(9681),se=F(1877),ue=F(655),me=F(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},be=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ge=new se.Yd("@firebase/auth");function Qe(w,...g){ge.logLevel<=se.in.ERROR&&ge.error(`Auth (${k.SDK_VERSION}): ${w}`,...g)}function Ze(w,...g){throw Ge(w,...g)}function Le(w,...g){return Ge(w,...g)}function Pe(w,g,_){const E=Object.assign(Object.assign({},be()),{[g]:_});return new $.LL("auth","Firebase",E).create(g,{appName:w.name})}function Ce(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ze(w,"argument-error"),Pe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(w,...g){if("string"!=typeof w){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return tt.create(w,...g)}function ie(w,g,..._){if(!w)throw Ge(g,..._)}function le(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Qe(g),new Error(g)}function we(w,g){w||le(g)}const Q=new Map;function ee(w){we(w instanceof Function,"Expected a class definition");let g=Q.get(w);return g?(we(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Q.set(w,g),g)}function Be(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===gt()||"https:"===gt()}function gt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class ze{constructor(g,_){this.shortDelay=g,this.longDelay=_,we(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function sn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(w,g){we(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Cn{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new ze(3e4,6e4);function qt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Vt(w,g,_,E){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(w,g,_,E,x={}){return Vi(w,x,(0,p.Z)(function*(){let O={},te={};E&&("GET"===g?te=E:O={body:JSON.stringify(E)});const xe=(0,$.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),Cn.fetch()(ji(w,w.config.apiHost,_,xe),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Vi(w,g,_){return Br.apply(this,arguments)}function Br(){return(Br=(0,p.Z)(function*(w,g,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},nn),g);try{const x=new jr(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const te=yield O.json();if("needConfirmation"in te)throw Bn(w,"account-exists-with-different-credential",te);if(O.ok&&!("errorMessage"in te))return te;{const xe=O.ok?te.errorMessage:te.error.message,[nt,Et]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Bn(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===nt)throw Bn(w,"email-already-in-use",te);if("USER_DISABLED"===nt)throw Bn(w,"user-disabled",te);const Zt=E[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw Pe(w,Zt,Et);Ze(w,Zt)}}catch(x){if(x instanceof $.ZR)throw x;Ze(w,"network-request-failed")}})).apply(this,arguments)}function On(w,g,_,E){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,p.Z)(function*(w,g,_,E,x={}){const O=yield Vt(w,g,_,E,x);return"mfaPendingCredential"in O&&Ze(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function ji(w,g,_,E){const x=`${g}${_}?${E}`;return w.config.emulator?dn(w.config,x):`${w.config.apiScheme}://${x}`}class jr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Le(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(w,g,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const x=Le(w,g,E);return x.customData._tokenResponse=_,x}function Hi(){return(Hi=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ye(w,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Kn(w,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function gr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Tn(){return(Tn=(0,p.Z)(function*(w,g=!1){const _=(0,$.m9)(w),E=yield _.getIdToken(g),x=mt(E);ie(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,te=O?.sign_in_provider;return{claims:x,token:E,authTime:gr(_n(x.auth_time)),issuedAtTime:gr(_n(x.iat)),expirationTime:gr(_n(x.exp)),signInProvider:te||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function _n(w){return 1e3*Number(w)}function mt(w){var g;const[_,E,x]=w.split(".");if(void 0===_||void 0===E||void 0===x)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,$.tV)(E);return O?JSON.parse(O):(Qe("Failed to decode base64 JWT payload"),null)}catch(O){return Qe("Caught error parsing JWT payload as JSON",null===(g=O)||void 0===g?void 0:g.toString()),null}}function xt(w,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,p.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof $.ZR&&Zn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Zn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Mr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,p.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,p.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class bt{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nr(w){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(w){var g;const _=w.auth,E=yield w.getIdToken(),x=yield xt(w,Kn(_,{idToken:E}));ie(x?.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const te=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?An(O.providerUserInfo):[],xe=dr(w.providerData,te),Zt=!!w.isAnonymous&&!(w.email&&O.passwordHash||xe?.length),pn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:xe,metadata:new bt(O.createdAt,O.lastLoginAt),isAnonymous:Zt};Object.assign(w,pn)})).apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(w){const g=(0,$.m9)(w);yield Nr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function dr(w,g){return[...w.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function An(w){return w.map(g=>{var{providerId:_}=g,E=(0,ue._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function De(){return(De=(0,p.Z)(function*(w,g){const _=yield Vi(w,{},(0,p.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,te=ji(w,x,"/v1/token",`key=${O}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",Cn.fetch()(te,{method:"POST",headers:xe,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ie(g.idToken,"internal-error"),ie(typeof g.idToken<"u","internal-error"),ie(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function _t(w){const g=mt(w);return ie(g,"internal-error"),ie(typeof g.exp<"u","internal-error"),ie(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,p.Z)(function*(){return ie(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,p.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:te}=yield function Xe(w,g){return De.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(x,O,Number(te))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:x,expirationTime:O}=_,te=new et;return E&&(ie("string"==typeof E,"internal-error",{appName:g}),te.refreshToken=E),x&&(ie("string"==typeof x,"internal-error",{appName:g}),te.accessToken=x),O&&(ie("number"==typeof O,"internal-error",{appName:g}),te.expirationTime=O),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return le("not implemented")}}function It(w,g){ie("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Ct{constructor(g){var{uid:_,auth:E,stsTokenManager:x}=g,O=(0,ue._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new bt(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,p.Z)(function*(){const E=yield xt(_,_.stsTokenManager.getToken(_.auth,g));return ie(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function In(w){return Tn.apply(this,arguments)}(this,g)}reload(){return function Zr(w){return Yt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ct(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,p.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield Nr(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,p.Z)(function*(){const _=yield g.getIdToken();return yield xt(g,function bi(w,g){return Hi.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,x,O,te,xe,nt,Et,Zt;const pn=null!==(E=_.displayName)&&void 0!==E?E:void 0,Wr=null!==(x=_.email)&&void 0!==x?x:void 0,Zi=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,nd=null!==(te=_.photoURL)&&void 0!==te?te:void 0,rd=null!==(xe=_.tenantId)&&void 0!==xe?xe:void 0,id=null!==(nt=_._redirectEventId)&&void 0!==nt?nt:void 0,Ja=null!==(Et=_.createdAt)&&void 0!==Et?Et:void 0,Xp=null!==(Zt=_.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:rf,emailVerified:sd,isAnonymous:Nl,providerData:kl,stsTokenManager:pa}=_;ie(rf&&pa,g,"internal-error");const O_=et.fromJSON(this.name,pa);ie("string"==typeof rf,g,"internal-error"),It(pn,g.name),It(Wr,g.name),ie("boolean"==typeof sd,g,"internal-error"),ie("boolean"==typeof Nl,g,"internal-error"),It(Zi,g.name),It(nd,g.name),It(rd,g.name),It(id,g.name),It(Ja,g.name),It(Xp,g.name);const Un=new Ct({uid:rf,auth:g,email:Wr,emailVerified:sd,displayName:pn,isAnonymous:Nl,photoURL:nd,phoneNumber:Zi,tenantId:rd,stsTokenManager:O_,createdAt:Ja,lastLoginAt:Xp});return kl&&Array.isArray(kl)&&(Un.providerData=kl.map(eg=>Object.assign({},eg))),id&&(Un._redirectEventId=id),Un}static _fromIdTokenResponse(g,_,E=!1){return(0,p.Z)(function*(){const x=new et;x.updateFromServerResponse(_);const O=new Ct({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield Nr(O),O})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(_,E){var x=this;return(0,p.Z)(function*(){x.storage[_]=E})()}_get(_){var E=this;return(0,p.Z)(function*(){const x=E.storage[_];return void 0===x?null:x})()}_remove(_){var E=this;return(0,p.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function W(w,g,_){return`firebase:${w}:${g}:${_}`}class Y{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:x,name:O}=this.auth;this.fullUserKey=W(this.userKey,x.apiKey,O),this.fullPersistenceKey=W("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,p.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Ct._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,p.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,p.Z)(function*(){if(!_.length)return new Y(ee(q),g,E);const x=(yield Promise.all(_.map(function(){var Et=(0,p.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let O=x[0]||ee(q);const te=W(E,g.config.apiKey,g.name);let xe=null;for(const Et of _)try{const Zt=yield Et._get(te);if(Zt){const pn=Ct._fromJSON(g,Zt);Et!==O&&(xe=pn),O=Et;break}}catch{}const nt=x.filter(Et=>Et._shouldAllowMigration);return O._shouldAllowMigration&&nt.length?(O=nt[0],xe&&(yield O._set(te,xe.toJSON())),yield Promise.all(_.map(function(){var Et=(0,p.Z)(function*(Zt){if(Zt!==O)try{yield Zt._remove(te)}catch{}});return function(Zt){return Et.apply(this,arguments)}}())),new Y(O,g,E)):new Y(O,g,E)})()}}function H(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Oe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(M(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(it(g))return"Blackberry";if(Se(g))return"Webos";if(B(g))return"Safari";if((g.includes("chrome/")||ne(g))&&!g.includes("edge/"))return"Chrome";if(rt(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function M(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ne(w=(0,$.z$)()){return/crios\//i.test(w)}function Oe(w=(0,$.z$)()){return/iemobile/i.test(w)}function rt(w=(0,$.z$)()){return/android/i.test(w)}function it(w=(0,$.z$)()){return/blackberry/i.test(w)}function Se(w=(0,$.z$)()){return/webos/i.test(w)}function Ue(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Rt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function fn(w=(0,$.z$)()){return Ue(w)||rt(w)||Se(w)||it(w)||/windows phone/i.test(w)||Oe(w)}function bn(w,g=[]){let _;switch(w){case"Browser":_=H((0,$.z$)());break;case"Worker":_=`${H((0,$.z$)())}-${w}`;break;default:_=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${E}`}class Ys{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const E=O=>new Promise((te,xe)=>{try{te(g(O))}catch(nt){xe(nt)}});E.onAbort=_,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,p.Z)(function*(){var E;if(_.auth.currentUser===g)return;const x=[];try{for(const O of _.queue)yield O(g),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const te of x)try{te()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class Po{constructor(g,_,E){this.app=g,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new Ys(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=ee(_)),this._initializationPromise=this.queue((0,p.Z)(function*(){var x,O;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,g),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,p.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,p.Z)(function*(){var E;const x=yield _.assertedPersistence.getCurrentUser();let O=x,te=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const xe=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,nt=O?._redirectEventId,Et=yield _.tryRedirectSignIn(g);(!xe||xe===nt)&&Et?.user&&(O=Et.user,te=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(O)}catch(xe){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(xe))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,p.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,p.Z)(function*(){var E;try{yield Nr(g)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function jt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,p.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,p.Z)(function*(){const E=g?(0,$.m9)(g):null;return E&&ie(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g,_=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return g&&ie(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,p.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,p.Z)(function*(){yield _.assertedPersistence.setPersistence(ee(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,p.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,p.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&ee(g)||_._popupRedirectResolver;ie(E,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ee(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,p.Z)(function*(){var E,x;return _._isInitialized&&(yield _.queue((0,p.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,p.Z)(function*(){if(g===_.currentUser)return _.queue((0,p.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(te,this,"internal-error"),te.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,E,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,p.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,p.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function vt(w){return(0,$.m9)(w)}class Qs{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Js(w,g,_){const E=vt(w);ie(E._canInitEmulator,E,"emulator-config-failed"),ie(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=hu(g),{host:te,port:xe}=function is(w){const g=hu(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const O=x[1];return{host:O,port:Yn(E.substr(O.length+1))}}{const[O,te]=E.split(":");return{host:O,port:Yn(te)}}}(g);E.config.emulator={url:`${O}//${te}${null===xe?"":`:${xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:te,port:xe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Xs(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function hu(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Yn(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Yr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return le("not implemented")}_getIdTokenResponse(g){return le("not implemented")}_linkToIdToken(g,_){return le("not implemented")}_getReauthenticationResolver(g){return le("not implemented")}}function li(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:resetPassword",qt(w,g))})).apply(this,arguments)}function al(w,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ah(w,g){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",qt(w,g))})).apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithPassword",qt(w,g))})).apply(this,arguments)}function Ss(w,g){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:sendOobCode",qt(w,g))})).apply(this,arguments)}function ss(w,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,p.Z)(function*(w,g){return Ss(w,g)})).apply(this,arguments)}function xh(w,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(w,g){return Ss(w,g)})).apply(this,arguments)}function ci(w,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,p.Z)(function*(w,g){return Ss(w,g)})).apply(this,arguments)}function ul(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(w,g){return Ss(w,g)})).apply(this,arguments)}function ll(){return(ll=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,g))})).apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,g))})).apply(this,arguments)}class As extends Yr{constructor(g,_,E,x=null){super("password",E),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new As(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new As(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return function Aa(w,g){return eo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Qr(w,g){return ll.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ze(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return al(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Up(w,g){return No.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:Ze(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function no(w,g){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithIdp",qt(w,g))})).apply(this,arguments)}class os extends Yr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new os(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ze("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=_,O=(0,ue._T)(_,["providerId","signInMethod"]);if(!E||!x)return null;const te=new os(E,x);return te.idToken=O.idToken||void 0,te.accessToken=O.accessToken||void 0,te.secret=O.secret,te.nonce=O.nonce,te.pendingToken=O.pendingToken||null,te}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,no(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Bp(w,g){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:sendVerificationCode",qt(w,g))})).apply(this,arguments)}function Ra(){return(Ra=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,g))})).apply(this,arguments)}function Sc(){return(Sc=(0,p.Z)(function*(w,g){const _=yield On(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,g));if(_.temporaryProof)throw Bn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Hp={USER_NOT_FOUND:"user-not-found"};function Ac(){return(Ac=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Hp)})).apply(this,arguments)}class Oo extends Yr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Oo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Oo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function jp(w,g){return Ra.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function ko(w,g){return Sc.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function $p(w,g){return Ac.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:O}=g;return E||_||x||O?new Oo({verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:O}):null}}class Lo{constructor(g){var _,E,x,O,te,xe;const nt=(0,$.zd)((0,$.pd)(g)),Et=null!==(_=nt.apiKey)&&void 0!==_?_:null,Zt=null!==(E=nt.oobCode)&&void 0!==E?E:null,pn=function xc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);ie(Et&&Zt&&pn,"argument-error"),this.apiKey=Et,this.operation=pn,this.code=Zt,this.continueUrl=null!==(O=nt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(te=nt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(xe=nt.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const _=function Rc(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||g||w}(g);try{return new Lo(_)}catch{return null}}}let fu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return As._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const x=Lo.parseLink(E);return ie(x,"argument-error"),As._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Er{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Fo extends Er{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class xs extends Fo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),os._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ie(g.idToken||g.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return xs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return xs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:O,nonce:te,providerId:xe}=g;if(!E&&!x&&!_&&!O||!xe)return null;try{return new xs(xe)._credential({idToken:_,accessToken:E,nonce:te,pendingToken:O})}catch{return null}}}let Pc=(()=>{class w extends Fo{constructor(){super("facebook.com")}static credential(_){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),pu=(()=>{class w extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:x}=_;if(!E&&!x)return null;try{return w.credential(E,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),cl=(()=>{class w extends Fo{constructor(){super("github.com")}static credential(_){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Uo extends Yr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,no(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:O}=_;return E&&x&&O&&E===x?new Uo(E,O):null}static _create(g,_){return new Uo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hi extends Er{constructor(g){ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return hi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return hi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Uo.fromJSON(g);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return Uo._create(E,_)}catch{return null}}}let as=(()=>{class w extends Fo{constructor(){super("twitter.com")}static credential(_,E){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=_;if(!E||!x)return null;try{return w.credential(E,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Jr(w,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signUp",qt(w,g))})).apply(this,arguments)}class Di{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,x=!1){return(0,p.Z)(function*(){const O=yield Ct._fromIdTokenResponse(g,E,x),te=Bo(E);return new Di({user:O,providerId:te,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,p.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=Bo(E);return new Di({user:g,providerId:x,_tokenResponse:E,operationType:_})})()}}function Bo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Wp(w){return dl.apply(this,arguments)}function dl(){return(dl=(0,p.Z)(function*(w){var g;const _=vt(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Di({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Jr(_,{returnSecureToken:!0}),x=yield Di._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Fn extends $.ZR{constructor(g,_,E,x){var O;super(_.code,_.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Fn.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,x){return new Fn(g,_,E,x)}}function Nc(w,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Fn._fromErrorAndOperation(w,O,g,E):O})}function Rh(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Si(w,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w);yield $i(!0,_,g);const{providerUserInfo:E}=yield Ye(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=Rh(E||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function gu(w,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(w,g,_=!1){const E=yield xt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Di._forOperation(w,"link",E)})).apply(this,arguments)}function $i(w,g,_){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(w,g,_){yield Nr(g);const x=!1===w?"provider-already-linked":"no-such-provider";ie(Rh(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function hl(w,g){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(w,g,_=!1){var E;const{auth:x}=w,O="reauthenticate";try{const te=yield xt(w,Nc(x,O,g,w),_);ie(te.idToken,x,"internal-error");const xe=mt(te.idToken);ie(xe,x,"internal-error");const{sub:nt}=xe;return ie(w.uid===nt,x,"user-mismatch"),Di._forOperation(w,O,te)}catch(te){throw"auth/user-not-found"===(null===(E=te)||void 0===E?void 0:E.code)&&Ze(x,"user-mismatch"),te}})).apply(this,arguments)}function fl(w,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,p.Z)(function*(w,g,_=!1){const E="signIn",x=yield Nc(w,E,g),O=yield Di._fromIdTokenResponse(w,E,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Pa(w,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,p.Z)(function*(w,g){return fl(vt(w),g)})).apply(this,arguments)}function Nt(w,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w);return yield $i(!1,_,g.providerId),gu(_,g)})).apply(this,arguments)}function Gp(w,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(w,g){return hl((0,$.m9)(w),g)})).apply(this,arguments)}function kc(w,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithCustomToken",qt(w,g))})).apply(this,arguments)}function io(w,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(w,g){const _=vt(w),E=yield kc(_,{token:g,returnSecureToken:!0}),x=yield Di._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ho{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Me._fromServerResponse(g,_):Ze(g,"internal-error")}}class Me extends Ho{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Me(_)}}function Kt(w,g,_){var E;ie((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Ph(w,g,_){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&Kt(E,x,_),yield xh(E,x)})).apply(this,arguments)}function ir(w,g,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(w,g,_){yield li((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function mu(w,g){return $r.apply(this,arguments)}function $r(){return($r=(0,p.Z)(function*(w,g){yield Ah((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function _u(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w),E=yield li(_,{oobCode:g}),x=E.requestType;switch(ie(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(E.mfaInfo,_,"internal-error");default:ie(E.email,_,"internal-error")}let O=null;return E.mfaInfo&&(O=Ho._fromServerResponse(vt(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Mh(w,g){return La.apply(this,arguments)}function La(){return(La=(0,p.Z)(function*(w,g){const{data:_}=yield _u((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function zp(w,g,_){return so.apply(this,arguments)}function so(){return(so=(0,p.Z)(function*(w,g,_){const E=vt(w),x=yield Jr(E,{returnSecureToken:!0,email:g,password:_}),O=yield Di._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function sr(w,g,_){return Pa((0,$.m9)(w),fu.credential(g,_))}function Wi(w,g,_){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};ie(_.handleCodeInApp,E,"argument-error"),_&&Kt(E,x,_),yield ci(E,x)})).apply(this,arguments)}function Ua(w,g){return"EMAIL_SIGNIN"===Lo.parseLink(g)?.operation}function us(w,g,_){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x=fu.credentialWithLink(g,_||Be());return ie(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Pa(E,x)})).apply(this,arguments)}function pl(w,g){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:createAuthUri",qt(w,g))})).apply(this,arguments)}function Nh(w,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(w,g){const E={identifier:g,continueUri:je()?Be():"http://localhost"},{signinMethods:x}=yield pl((0,$.m9)(w),E);return x||[]})).apply(this,arguments)}function gl(w,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Kt(_.auth,x,g);const{email:O}=yield ss(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function ml(w,g,_){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Kt(E.auth,O,_);const{email:te}=yield ul(E.auth,O);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function Fc(w,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function kh(w,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,$.m9)(w),O={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield xt(E,Fc(E.auth,O));E.displayName=te.displayName||null,E.photoURL=te.photoUrl||null;const xe=E.providerData.find(({providerId:nt})=>"password"===nt);xe&&(xe.displayName=E.displayName,xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(te)})).apply(this,arguments)}function Oh(w,g){return Ps((0,$.m9)(w),g,null)}function Uc(w,g){return Ps((0,$.m9)(w),null,g)}function Ps(w,g,_){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(w,g,_){const{auth:E}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const te=yield xt(w,al(E,O));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Rn{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class ls extends Rn{constructor(g,_,E,x){super(g,_,E),this.username=x}}class Pn extends Rn{constructor(g,_){super(g,"facebook.com",_)}}class Bc extends ls{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class _l extends Rn{constructor(g,_){super(g,"google.com",_)}}class Lh extends ls{constructor(g,_,E){super(g,"twitter.com",_,E)}}function yl(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Vc(w){var g,_;if(!w)return null;const{providerId:E}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const te=null===(_=null===(g=mt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new Rn(O,"anonymous"!==te&&"custom"!==te?te:null)}if(!E)return null;switch(E){case"facebook.com":return new Pn(O,x);case"github.com":return new Bc(O,x);case"google.com":return new _l(O,x);case"twitter.com":return new Lh(O,x,w.screenName||null);case"custom":case"anonymous":return new Rn(O,null);default:return new Rn(O,E,x)}}(_)}class pi{constructor(g,_,E){this.type=g,this.credential=_,this.auth=E}static _fromIdtoken(g,_){return new pi("enroll",g,_)}static _fromMfaPendingCredential(g){return new pi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return pi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return pi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Il{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=vt(g),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(xe=>Ho._fromServerResponse(E,xe));ie(x.mfaPendingCredential,E,"internal-error");const te=pi._fromMfaPendingCredential(x.mfaPendingCredential);return new Il(te,O,function(){var xe=(0,p.Z)(function*(nt){const Et=yield nt._process(E,te);delete x.mfaInfo,delete x.mfaPendingCredential;const Zt=Object.assign(Object.assign({},x),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(_.operationType){case"signIn":const pn=yield Di._fromIdTokenResponse(E,_.operationType,Zt);return yield E._updateCurrentUser(pn.user),pn;case"reauthenticate":return ie(_.user,E,"internal-error"),Di._forOperation(_.user,_.operationType,Zt);default:Ze(E,"internal-error")}});return function(nt){return xe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,p.Z)(function*(){return _.signInResolver(g)})()}}function $c(w,g){var _;const E=(0,$.m9)(w),x=g;return ie(g.customData.operationType,E,"argument-error"),ie(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Il._fromError(E,x)}function Hn(w,g){return Vt(w,"POST","/v2/accounts/mfaEnrollment:start",qt(w,g))}class Iu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Ho._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Iu(g)}getSession(){var g=this;return(0,p.Z)(function*(){return pi._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var E=this;return(0,p.Z)(function*(){const x=g,O=yield E.getSession(),te=yield xt(E.user,x._process(E.user.auth,O,_));return yield E.user._updateTokensIfNecessary(te),E.user.reload()})()}unenroll(g){var _=this;return(0,p.Z)(function*(){var E;const x="string"==typeof g?g:g.uid,O=yield _.user.getIdToken(),te=yield xt(_.user,function wu(w,g){return Vt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(w,g))}(_.user.auth,{idToken:O,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:xe})=>xe!==x),yield _.user._updateTokensIfNecessary(te);try{yield _.user.reload()}catch(xe){if("auth/user-token-expired"!==(null===(E=xe)||void 0===E?void 0:E.code))throw xe}})()}}const Fh=new WeakMap;function Eu(w){const g=(0,$.m9)(w);return Fh.has(g)||Fh.set(g,Iu._fromUser(g)),Fh.get(g)}const cs="__sak";class Ha{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(cs,"1"),this.storage.removeItem(cs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const or=(()=>{class w extends Ha{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function El(){const w=(0,$.z$)();return B(w)||Ue(w)}()&&function rs(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),O=this.localCache[E];x!==O&&_(E,O,x)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((xe,nt,Et)=>{this.notifyListeners(xe,Et)});const x=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(_.newValue!==xe)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!E)return}const O=()=>{const xe=this.storage.getItem(x);!E&&this.localCache[x]===xe||this.notifyListeners(x,xe)},te=this.storage.getItem(x);!function Ot(){return(0,$.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var x=()=>super._set,O=this;return(0,p.Z)(function*(){yield x().call(O,_,E),O.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,x=this;return(0,p.Z)(function*(){const O=yield E().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var E=()=>super._remove,x=this;return(0,p.Z)(function*(){yield E().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),Ns=(()=>{class w extends Ha{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let Wa=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(O=>O.isListeningto(_));if(E)return E;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,p.Z)(function*(){const x=_,{eventId:O,eventType:te,data:xe}=x.data,nt=E.handlersMap[te];if(!nt?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:te});const Et=Array.from(nt).map(function(){var pn=(0,p.Z)(function*(Wr){return Wr(x.origin,xe)});return function(Wr){return pn.apply(this,arguments)}}()),Zt=yield function Cl(w){return Promise.all(w.map(function(){var g=(0,p.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(Et);x.ports[0].postMessage({status:"done",eventId:O,eventType:te,response:Zt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Qo(w="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return w+_}class Bh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var x=this;return(0,p.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let te,xe;return new Promise((nt,Et)=>{const Zt=Qo("",20);O.port1.start();const pn=setTimeout(()=>{Et(new Error("unsupported_event"))},E);xe={messageChannel:O,onMessage(Wr){const Zi=Wr;if(Zi.data.eventId===Zt)switch(Zi.data.status){case"ack":clearTimeout(pn),te=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),nt(Zi.data.response);break;default:clearTimeout(pn),clearTimeout(te),Et(new Error("invalid_response"))}}},x.handlers.add(xe),O.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:g,eventId:Zt,data:_},[O.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function $n(){return window}function Xr(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function ds(){return(ds=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ga="firebaseLocalStorageDb",za="firebaseLocalStorage",Jo="fbase_key";class Xo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ea(w,g){return w.transaction([za],g?"readwrite":"readonly").objectStore(za)}function Tu(){const w=indexedDB.open(Ga,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(za,{keyPath:Jo})}catch(x){_(x)}}),w.addEventListener("success",(0,p.Z)(function*(){const E=w.result;E.objectStoreNames.contains(za)?g(E):(E.close(),yield function qc(){const w=indexedDB.deleteDatabase(Ga);return new Xo(w).toPromise()}(),g(yield Tu()))}))})}function qa(w,g,_){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,p.Z)(function*(w,g,_){const E=ea(w,!0).put({[Jo]:g,value:_});return new Xo(E).toPromise()})).apply(this,arguments)}function ta(){return(ta=(0,p.Z)(function*(w,g){const _=ea(w,!1).get(g),E=yield new Xo(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function bu(w,g){const _=ea(w,!0).delete(g);return new Xo(_).toPromise()}const ra=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,p.Z)(function*(){return _.db||(_.db=yield Tu()),_.db})()}_withRetries(_){var E=this;return(0,p.Z)(function*(){let x=0;for(;;)try{const O=yield E._openDb();return yield _(O)}catch(O){if(x++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,p.Z)(function*(){return Xr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,p.Z)(function*(){_.receiver=Wa._getInstance(function Cu(){return Xr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,p.Z)(function*(){var E,x;if(_.activeServiceWorker=yield function zc(){return ds.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Bh(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Tl(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Tu();return yield qa(_,cs,"1"),yield bu(_,cs),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var x=this;return(0,p.Z)(function*(){return x._withPendingWrite((0,p.Z)(function*(){return yield x._withRetries(O=>qa(O,_,E)),x.localCache[_]=E,x.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,p.Z)(function*(){const x=yield E._withRetries(O=>function jh(w,g){return ta.apply(this,arguments)}(O,_));return E.localCache[_]=x,x})()}_remove(_){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(x=>bu(x,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,p.Z)(function*(){const E=yield _._withRetries(te=>{const xe=ea(te,!1).getAll();return new Xo(xe).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:te,value:xe}of E)O.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(xe)&&(_.notifyListeners(te,xe),x.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!O.has(te)&&(_.notifyListeners(te,null),x.push(te));return x})()}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Hh(w,g){return Vt(w,"POST","/v2/accounts/mfaSignIn:start",qt(w,g))}function kr(){return(kr=(0,p.Z)(function*(w){return(yield Vt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function uo(w){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=x=>{const O=Le("internal-error");O.customData=x,_(O)},E.type="text/javascript",E.charset="UTF-8",function sa(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function oa(w){return`__${w}${Math.floor(1e6*Math.random())}`}const zi=1e12;class Kc{constructor(g){this.auth=g,this.counter=zi,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new Dn(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||zi;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||zi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,p.Z)(function*(){var E;return null===(E=_._widgets.get(g||zi))||void 0===E||E.execute(),""})()}}class Dn{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ie(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qp(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $h=oa("rcb"),WI=new ze(3e4,6e4);class x_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=$n().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return ie(function Wh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($n().grecaptcha):new Promise((E,x)=>{const O=$n().setTimeout(()=>{x(Le(g,"network-request-failed"))},WI.get());$n()[$h]=()=>{$n().clearTimeout(O),delete $n()[$h];const xe=$n().grecaptcha;if(!xe)return void x(Le(g,"internal-error"));const nt=xe.render;xe.render=(Et,Zt)=>{const pn=nt(Et,Zt);return this.counter++,pn},this.hostLanguage=_,E(xe)},uo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:$h,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=$n().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class GI{load(g){return(0,p.Z)(function*(){return new Kc(g)})()}clearedOneInstance(){}}const Su="recaptcha",zI={theme:"light",type:"image"};class R_{constructor(g,_=Object.assign({},zI),E){this.parameters=_,this.type=Su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(E),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ie(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GI:new x_,this.validateStartingState()}verify(){var g=this;return(0,p.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(O=>{const te=xe=>{!xe||(g.tokenChangeListeners.delete(te),O(xe))};g.tokenChangeListeners.add(te),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=$n()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,p.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,p.Z)(function*(){ie(je()&&!Xr(),g.auth,"internal-error"),yield function mr(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Du(w){return kr.apply(this,arguments)}(g.auth);ie(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class an{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Oo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function hs(w,g,_){return at.apply(this,arguments)}function at(){return(at=(0,p.Z)(function*(w,g,_){const E=vt(w),x=yield Tr(E,g,(0,$.m9)(_));return new an(x,O=>Pa(E,O))})).apply(this,arguments)}function ei(w,g,_){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);yield $i(!1,E,"phone");const x=yield Tr(E.auth,g,(0,$.m9)(_));return new an(x,O=>Nt(E,O))})).apply(this,arguments)}function fs(w,g,_){return lo.apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x=yield Tr(E.auth,g,(0,$.m9)(_));return new an(x,O=>Gp(E,O))})).apply(this,arguments)}function Tr(w,g,_){return co.apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(w,g,_){var E;const x=yield _.verify();try{let O;if(ie("string"==typeof x,w,"argument-error"),ie(_.type===Su,w,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const te=O.session;if("phoneNumber"in O)return ie("enroll"===te.type,w,"internal-error"),(yield Hn(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ie("signin"===te.type,w,"internal-error");const xe=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return ie(xe,w,"missing-multi-factor-info"),(yield Hh(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Bp(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return te}}finally{_._reset()}})).apply(this,arguments)}function Zc(w,g){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,p.Z)(function*(w,g){yield gu((0,$.m9)(w),g)})).apply(this,arguments)}let Gh=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=vt(_)}verifyPhoneNumber(_,E){return Tr(this.auth,_,(0,$.m9)(E))}static credential(_,E){return Oo._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:x}=_;return E&&x?Oo._fromTokenResponse(E,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ua(w,g){return g?ee(g):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Sl extends Yr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return no(g,this._buildIdpRequest())}_linkToIdToken(g,_){return no(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return no(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ho(w){return fl(w.auth,new Sl(w),w.bypassAuthState)}function st(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),hl(_,new Sl(w),w.bypassAuthState)}function Ka(w){return qi.apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),gu(_,new Sl(w),w.bypassAuthState)})).apply(this,arguments)}class Al{constructor(g,_,E,x,O=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,p.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(E,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:O,tenantId:te,error:xe,type:nt}=g;if(xe)return void _.reject(xe);const Et={auth:_.auth,requestUri:E,sessionId:x,tenantId:te||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(nt)(Et))}catch(Zt){_.reject(Zt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ho;case"linkViaPopup":case"linkViaRedirect":return Ka;case"reauthViaPopup":case"reauthViaRedirect":return st;default:Ze(this.auth,"internal-error")}}resolve(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Au=new ze(2e3,1e4);function Wn(w,g,_){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(w,g,_){const E=vt(w);Ce(w,g,Er);const x=ua(E,_);return new Ya(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function xu(w,g,_){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ua(E.auth,_);return new Ya(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function zh(w,g,_){return la.apply(this,arguments)}function la(){return(la=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ua(E.auth,_);return new Ya(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let Ya=(()=>{class w extends Al{constructor(_,E,x,O,te){super(_,E,O,te),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,p.Z)(function*(){const E=yield _.execute();return ie(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,p.Z)(function*(){we(1===_.filter.length,"Popup operations only handle one event");const E=Qo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Au.get())};_()}}return w.currentPopupAction=null,w})();const gi=new Map;class fo extends Al{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,p.Z)(function*(){let E=gi.get(_.auth._key());if(!E){try{const O=(yield function xl(w,g){return ks.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(O)}catch(x){E=()=>Promise.reject(x)}gi.set(_.auth._key(),E)}return _.bypassAuthState||gi.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ks(){return(ks=(0,p.Z)(function*(w,g){const _=gs(g),E=po(w);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(_));return yield E._remove(_),x})).apply(this,arguments)}function ti(w,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,p.Z)(function*(w,g){return po(w)._set(gs(g),"true")})).apply(this,arguments)}function Os(){gi.clear()}function Jn(w,g){gi.set(w._key(),g)}function po(w){return ee(w._redirectPersistence)}function gs(w){return W("pendingRedirect",w.config.apiKey,w.name)}function Gn(w,g,_){return function xn(w,g,_){return da.apply(this,arguments)}(w,g,_)}function da(){return(da=(0,p.Z)(function*(w,g,_){const E=vt(w);Ce(w,g,Er);const x=ua(E,_);return yield ti(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function T(w,g,_){return function D(w,g,_){return R.apply(this,arguments)}(w,g,_)}function R(){return(R=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ua(E.auth,_);yield ti(x,E.auth);const O=yield Pt(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function j(w,g,_){return function X(w,g,_){return oe.apply(this,arguments)}(w,g,_)}function oe(){return(oe=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ua(E.auth,_);yield $i(!1,E,g.providerId),yield ti(x,E.auth);const O=yield Pt(E);return x._openRedirect(E.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Ae(w,g){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(w,g){return yield vt(w)._initializationPromise,lt(w,g,!1)})).apply(this,arguments)}function lt(w,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(w,g,_=!1){const E=vt(w),x=ua(E,g),te=yield new fo(E,x,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield E._persistUserIfCurrent(te.user),yield E._setRedirectUser(null,g)),te})).apply(this,arguments)}function Pt(w){return yt.apply(this,arguments)}function yt(){return(yt=(0,p.Z)(function*(w){const g=Qo(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class _r{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Lt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ls(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!Ls(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ha(g))}saveEventToCache(g){this.cachedEventUids.add(ha(g)),this.lastProcessedEventTime=Date.now()}}function ha(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Ls({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function xi(w){return ms.apply(this,arguments)}function ms(){return(ms=(0,p.Z)(function*(w,g={}){return Vt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Ki=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fa=/^https?/;function ni(){return(ni=(0,p.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield xi(w);for(const _ of g)try{if(P_(_))return}catch{}Ze(w,"unauthorized-domain")})).apply(this,arguments)}function P_(w){const g=Be(),{protocol:_,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===E}if(!fa.test(_))return!1;if(Ki.test(w))return E===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const Kp=new ze(3e4,6e4);function qh(){const w=$n().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let qn=null;function mo(w){return qn=qn||function qI(w){return new Promise((g,_)=>{var E,x,O;function te(){qh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{qh(),_(Le(w,"network-request-failed"))},timeout:Kp.get()})}if(null!==(x=null===(E=$n().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(O=$n().gapi)||void 0===O||!O.load){const xe=oa("iframefcb");return $n()[xe]=()=>{gapi.load?te():_(Le(w,"network-request-failed"))},uo(`https://apis.google.com/js/api.js?onload=${xe}`).catch(nt=>_(nt))}te()}}).catch(g=>{throw qn=null,g})}(w),qn}const Kh=new ze(5e3,15e3),Zh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yh(w){const g=w.config;ie(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?dn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:k.SDK_VERSION},x=M_.get(w.config.apiHost);x&&(E.eid=x);const O=w._getFrameworks();return O.length&&(E.fw=O.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function Jc(){return Jc=(0,p.Z)(function*(w){const g=yield mo(w),_=$n().gapi;return ie(_,w,"internal-error"),g.open({where:document.body,url:Yh(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zh,dontclear:!0},E=>new Promise(function(){var x=(0,p.Z)(function*(O,te){yield E.restyle({setHideOnLeave:!1});const xe=Le(w,"network-request-failed"),nt=$n().setTimeout(()=>{te(xe)},Kh.get());function Et(){$n().clearTimeout(nt),O(E)}E.ping(Et).then(Et,()=>{te(xe)})});return function(O,te){return x.apply(this,arguments)}}()))}),Jc.apply(this,arguments)}const Rl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pl{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ru(w,g,_,E,x,O){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:k.SDK_VERSION,eventId:x};if(g instanceof Er){g.setDefaultLanguage(w.languageCode),te.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,Et]of Object.entries(O||{}))te[nt]=Et}if(g instanceof Fo){const nt=g.getScopes().filter(Et=>""!==Et);nt.length>0&&(te.scopes=nt.join(","))}w.tenantId&&(te.tid=w.tenantId);const xe=te;for(const nt of Object.keys(xe))void 0===xe[nt]&&delete xe[nt];return`${function Jp({config:w}){return w.emulator?dn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(xe).slice(1)}`}const Pu="webStorageSupport",Jh=class Ml{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ns,this._completeRedirectFn=lt,this._overrideRedirectResult=Jn}_openPopup(g,_,E,x){var O=this;return(0,p.Z)(function*(){var te;we(null===(te=O.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const xe=Ru(g,_,E,Be(),x);return function ed(w,g,_,E=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),te=Math.max((window.screen.availWidth-E)/2,0).toString();let xe="";const nt=Object.assign(Object.assign({},Rl),{width:E.toString(),height:x.toString(),top:O,left:te}),Et=(0,$.z$)().toLowerCase();_&&(xe=ne(Et)?"_blank":_),M(Et)&&(g=g||"http://localhost",nt.scrollbars="yes");const Zt=Object.entries(nt).reduce((Wr,[Zi,nd])=>`${Wr}${Zi}=${nd},`,"");if(function hn(w=(0,$.z$)()){var g;return Ue(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Et)&&"_self"!==xe)return function yo(w,g){const _=document.createElement("a");_.href=w,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",xe),new Pl(null);const pn=window.open(g||"",xe,Zt);ie(pn,w,"popup-blocked");try{pn.focus()}catch{}return new Pl(pn)}(g,xe,Qo())})()}_openRedirect(g,_,E,x){var O=this;return(0,p.Z)(function*(){return yield O._originValidation(g),function Gc(w){$n().location.href=w}(Ru(g,_,E,Be(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(we(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,p.Z)(function*(){const E=yield function Yp(w){return Jc.apply(this,arguments)}(g),x=new _r(g);return E.register("authEvent",O=>(ie(O?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Pu,{type:Pu},x=>{var O;const te=null===(O=x?.[0])||void 0===O?void 0:O[Pu];void 0!==te&&_(!!te),Ze(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function go(w){return ni.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return fn()||B()||Ue()}};class Xh extends class td{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return le("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Xh(g)}_finalizeEnroll(g,_,E){return function vu(w,g){return Vt(w,"POST","/v2/accounts/mfaEnrollment:finalize",qt(w,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function ia(w,g){return Vt(w,"POST","/v2/accounts/mfaSignIn:finalize",qt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fs=(()=>{class w{constructor(){}static assertion(_){return Xh._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var vo="@firebase/auth",ef="0.20.11";class N_{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,p.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function YI(w){(0,k._registerComponent)(new me.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:O,authDomain:te}=E.options;return((xe,nt)=>{ie(O&&!O.includes(":"),"invalid-api-key",{appName:xe.name}),ie(!te?.includes(":"),"argument-error",{appName:xe.name});const Et={apiKey:O,authDomain:te,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(w)},Zt=new Po(xe,nt,Et);return function ae(w,g){const _=g?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ee);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,g?.popupRedirectResolver)}(Zt,_),Zt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new me.wA("auth-internal",g=>{const _=vt(g.getProvider("auth").getImmediate());return new N_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(vo,ef,function ZI(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(vo,ef,"esm2017")}("Browser")},2090:(pt,Re,F)=>{F.d(Re,{$s:()=>et,BH:()=>jt,DV:()=>Bn,Dv:()=>Hr,G6:()=>Ce,GJ:()=>ji,L:()=>he,LL:()=>nn,Pz:()=>sn,Sg:()=>ze,UG:()=>be,UI:()=>Hi,US:()=>me,Wj:()=>bt,Wl:()=>Ir,Yr:()=>Pe,ZB:()=>z,ZR:()=>Cn,aH:()=>gt,b$:()=>ge,cI:()=>Vt,dS:()=>kt,eu:()=>ie,g5:()=>k,gK:()=>Zn,gQ:()=>In,h$:()=>pe,hl:()=>Ge,hu:()=>$,jU:()=>tt,lb:()=>Nr,m9:()=>Xt,ne:()=>Tn,p$:()=>K,pd:()=>Zs,r3:()=>jr,ru:()=>Ee,tV:()=>ve,uI:()=>Ne,ug:()=>Zr,vZ:()=>Ye,w1:()=>Ze,w9:()=>Bi,xO:()=>wn,xb:()=>bi,z$:()=>He,zI:()=>le,zd:()=>gr});const $=function(q,W){if(!q)throw k(W)},k=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},se=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):55296==(64512&M)&&H+1<q.length&&56320==(64512&q.charCodeAt(H+1))?(M=65536+((1023&M)<<10)+(1023&q.charCodeAt(++H)),W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let M=0;M<q.length;M+=3){const B=q[M],ne=M+1<q.length,Oe=ne?q[M+1]:0,rt=M+2<q.length,it=rt?q[M+2]:0;let Rt=(15&Oe)<<2|it>>6,hn=63&it;rt||(hn=64,ne||(Rt=64)),H.push(Y[B>>2],Y[(3&B)<<4|Oe>>4],Y[Rt],Y[hn])}return H.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(se(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let Y=0,H=0;for(;Y<q.length;){const M=q[Y++];if(M<128)W[H++]=String.fromCharCode(M);else if(M>191&&M<224){const B=q[Y++];W[H++]=String.fromCharCode((31&M)<<6|63&B)}else if(M>239&&M<365){const rt=((7&M)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;W[H++]=String.fromCharCode(55296+(rt>>10)),W[H++]=String.fromCharCode(56320+(1023&rt))}else{const B=q[Y++],ne=q[Y++];W[H++]=String.fromCharCode((15&M)<<12|(63&B)<<6|63&ne)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const Y=W?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let M=0;M<q.length;){const B=Y[q.charAt(M++)],Oe=M<q.length?Y[q.charAt(M)]:0;++M;const it=M<q.length?Y[q.charAt(M)]:64;++M;const Ue=M<q.length?Y[q.charAt(M)]:64;if(++M,null==B||null==Oe||null==it||null==Ue)throw Error();H.push(B<<2|Oe>>4),64!==it&&(H.push(Oe<<4&240|it>>2),64!==Ue&&H.push(it<<6&192|Ue))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},pe=function(q){const W=se(q);return me.encodeByteArray(W,!0)},he=function(q){return pe(q).replace(/\./g,"")},ve=function(q){try{return me.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function K(q){return z(void 0,q)}function z(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const Y in W)!W.hasOwnProperty(Y)||!J(Y)||(q[Y]=z(q[Y],W[Y]));return q}function J(q){return"__proto__"!==q}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function Ee(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const q=He();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Pe(){return!1}function Ce(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function ie(){return new Promise((q,W)=>{try{let Y=!0;const H="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(H);M.onsuccess=()=>{M.result.close(),Y||self.indexedDB.deleteDatabase(H),q(!0)},M.onupgradeneeded=()=>{Y=!1},M.onerror=()=>{var B;W((null===(B=M.error)||void 0===B?void 0:B.message)||"")}}catch(Y){W(Y)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ae=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&ve(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},gt=()=>{var q;return null===(q=ae())||void 0===q?void 0:q.config},sn=q=>{var W;return null===(W=ae())||void 0===W?void 0:W[`_${q}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Y)=>{this.resolve=W,this.reject=Y})}wrapCallback(W){return(Y,H)=>{Y?this.reject(Y):this.resolve(H),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Y):W(Y,H))}}}function ze(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=W||"demo-project",M=q.iat||0,B=q.sub||q.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ne=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:M,exp:M+3600,auth_time:M,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},q);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ne)),""].join(".")}class Cn extends Error{constructor(W,Y,H){super(Y),this.code=W,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nn.prototype.create)}}class nn{constructor(W,Y,H){this.service=W,this.serviceName=Y,this.errors=H}create(W,...Y){const H=Y[0]||{},M=`${this.service}/${W}`,B=this.errors[W],ne=B?function rn(q,W){return q.replace(qt,(Y,H)=>{const M=W[H];return null!=M?String(M):`<${H}?>`})}(B,H):"Error";return new Cn(M,`${this.serviceName}: ${ne} (${M}).`,H)}}const qt=/\{\$([^}]+)}/g;function Vt(q){return JSON.parse(q)}function Ir(q){return JSON.stringify(q)}const Vi=function(q){let W={},Y={},H={},M="";try{const B=q.split(".");W=Vt(ve(B[0])||""),Y=Vt(ve(B[1])||""),M=B[2],H=Y.d||{},delete Y.d}catch{}return{header:W,claims:Y,data:H,signature:M}},Bi=function(q){const Y=Vi(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},ji=function(q){const W=Vi(q).claims;return"object"==typeof W&&!0===W.admin};function jr(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function Bn(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function bi(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function Hi(q,W,Y){const H={};for(const M in q)Object.prototype.hasOwnProperty.call(q,M)&&(H[M]=W.call(Y,q[M],M,q));return H}function Ye(q,W){if(q===W)return!0;const Y=Object.keys(q),H=Object.keys(W);for(const M of Y){if(!H.includes(M))return!1;const B=q[M],ne=W[M];if(nr(B)&&nr(ne)){if(!Ye(B,ne))return!1}else if(B!==ne)return!1}for(const M of H)if(!Y.includes(M))return!1;return!0}function nr(q){return null!==q&&"object"==typeof q}function wn(q){const W=[];for(const[Y,H]of Object.entries(q))Array.isArray(H)?H.forEach(M=>{W.push(encodeURIComponent(Y)+"="+encodeURIComponent(M))}):W.push(encodeURIComponent(Y)+"="+encodeURIComponent(H));return W.length?"&"+W.join("&"):""}function gr(q){const W={};return q.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[M,B]=H.split("=");W[decodeURIComponent(M)]=decodeURIComponent(B)}}),W}function Zs(q){const W=q.indexOf("?");if(!W)return"";const Y=q.indexOf("#",W);return q.substring(W,Y>0?Y:void 0)}class In{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Y){Y||(Y=0);const H=this.W_;if("string"==typeof W)for(let Ue=0;Ue<16;Ue++)H[Ue]=W.charCodeAt(Y)<<24|W.charCodeAt(Y+1)<<16|W.charCodeAt(Y+2)<<8|W.charCodeAt(Y+3),Y+=4;else for(let Ue=0;Ue<16;Ue++)H[Ue]=W[Y]<<24|W[Y+1]<<16|W[Y+2]<<8|W[Y+3],Y+=4;for(let Ue=16;Ue<80;Ue++){const Rt=H[Ue-3]^H[Ue-8]^H[Ue-14]^H[Ue-16];H[Ue]=4294967295&(Rt<<1|Rt>>>31)}let it,Se,M=this.chain_[0],B=this.chain_[1],ne=this.chain_[2],Oe=this.chain_[3],rt=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(it=Oe^B&(ne^Oe),Se=1518500249):(it=B^ne^Oe,Se=1859775393):Ue<60?(it=B&ne|Oe&(B|ne),Se=2400959708):(it=B^ne^Oe,Se=3395469782);const Rt=(M<<5|M>>>27)+it+rt+Se+H[Ue]&4294967295;rt=Oe,Oe=ne,ne=4294967295&(B<<30|B>>>2),B=M,M=Rt}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+ne&4294967295,this.chain_[3]=this.chain_[3]+Oe&4294967295,this.chain_[4]=this.chain_[4]+rt&4294967295}update(W,Y){if(null==W)return;void 0===Y&&(Y=W.length);const H=Y-this.blockSize;let M=0;const B=this.buf_;let ne=this.inbuf_;for(;M<Y;){if(0===ne)for(;M<=H;)this.compress_(W,M),M+=this.blockSize;if("string"==typeof W){for(;M<Y;)if(B[ne]=W.charCodeAt(M),++ne,++M,ne===this.blockSize){this.compress_(B),ne=0;break}}else for(;M<Y;)if(B[ne]=W[M],++ne,++M,ne===this.blockSize){this.compress_(B),ne=0;break}}this.inbuf_=ne,this.total_+=Y}digest(){const W=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&Y,Y/=256;this.compress_(this.buf_);let H=0;for(let M=0;M<5;M++)for(let B=24;B>=0;B-=8)W[H]=this.chain_[M]>>B&255,++H;return W}}function Tn(q,W){const Y=new _n(q,W);return Y.subscribe.bind(Y)}class _n{constructor(W,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{W(this)}).catch(H=>{this.error(H)})}next(W){this.forEachObserver(Y=>{Y.next(W)})}error(W){this.forEachObserver(Y=>{Y.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Y,H){let M;if(void 0===W&&void 0===Y&&void 0===H)throw new Error("Missing Observer.");M=function _t(q,W){if("object"!=typeof q||null===q)return!1;for(const Y of W)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Y,complete:H},void 0===M.next&&(M.next=xt),void 0===M.error&&(M.error=xt),void 0===M.complete&&(M.complete=xt);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),B}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,W)}sendOne(W,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Y(this.observers[W])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xt(){}const Hr=function(q,W,Y,H){let M;if(H<W?M="at least "+W:H>Y&&(M=0===Y?"none":"no more than "+Y),M)throw new Error(q+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+M+".")};function Zn(q,W){return`${q} failed: ${W} argument `}function bt(q,W,Y,H){if((!H||Y)&&"function"!=typeof Y)throw new Error(Zn(q,W)+"must be a valid function.")}function Nr(q,W,Y,H){if((!H||Y)&&("object"!=typeof Y||null===Y))throw new Error(Zn(q,W)+"must be a valid context object.")}const kt=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);if(M>=55296&&M<=56319){const B=M-55296;H++,$(H<q.length,"Surrogate pair missing trail surrogate."),M=65536+(B<<10)+(q.charCodeAt(H)-56320)}M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):M<65536?(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},Zr=function(q){let W=0;for(let Y=0;Y<q.length;Y++){const H=q.charCodeAt(Y);H<128?W++:H<2048?W+=2:H>=55296&&H<=56319?(W+=4,Y++):W+=3}return W};function et(q,W=1e3,Y=2){const H=W*Math.pow(Y,q),M=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+M)}function Xt(q){return q&&q._delegate?q._delegate:q}},3453:(pt,Re,F)=>{var p=F(4650);let $=null;function k(){return $}const pe=new p.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ve(){return(0,p.LFG)(z)}()},providedIn:"platform"}),n})();const K=new p.OlP("Location Initialized");let z=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function He(){return new z((0,p.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Qe)},providedIn:"root"}),n})();const ge=new p.OlP("appBaseHref");let Qe=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(ge,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ze=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(ge,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Ne,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(p.LFG(Ee))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Pe(){return new Le((0,p.LFG)(Ee))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}let ln=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class eo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ss=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new eo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,l),to(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{to(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function to(n,e){n.context.$implicit=e.item}let Ln=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class xh{constructor(){this.$implicit=null,this.ngIf=null}}function rr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let No=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),l=-1===i.indexOf("-")?void 0:p.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.aQg),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),As=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:a,ngTemplateOutletInjector:l}=this;this._viewRef=r.createEmbeddedView(i,a,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[p.TTD]}),n})(),Vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Bo(n){return"server"===n}let Nc=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Rh((0,p.LFG)(pe),window)}),n})();class Rh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Cr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ps extends class Uc extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){$||($=n)}(new Ps)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vc(){return Ms=Ms||document.querySelector("base"),Ms?Ms.getAttribute("href"):null}();return null==t?null:function ls(n){Rn=Rn||document.createElement("a"),Rn.setAttribute("href",n);const e=Rn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function al(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Rn,Ms=null;const Pn=new p.OlP("TRANSITION_ID"),_l=[{provide:p.ip1,useFactory:function Bc(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Pn,pe,p.zs3],multi:!0}];let yl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const vl=new p.OlP("EventManagerPlugins");let wl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(vl),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class yu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ko=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Zo=(()=>{class n extends Ko{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(jc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jc))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function jc(n){k().remove(n)}const Yo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hc=/%COMP%/g;function wu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?wu(n,i,t):(i=i.replace(Hc,n),t.push(i))}return t}function Iu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Eu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new cs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Wc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new Uh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=wu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wl),p.LFG(Zo),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class cs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Yo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){($a(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($a(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Yo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Yo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Iu(r)):this.eventManager.addEventListener(e,t,Iu(r))}}function $a(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Wc extends cs{constructor(e,t,r,i){super(e),this.component=r;const a=wu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Hn(n){return"_ngcontent-%COMP%".replace(Hc,n)}(i+"-"+r.id),this.hostAttr=function vu(n){return"_nghost-%COMP%".replace(Hc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Uh extends cs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=wu(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let or=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Vh=["alt","control","meta","shift"],Ns={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wa=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),Vh.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=Ns[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Vh.forEach(l=>{l!==i&&(0,Cl[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ga=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function zc(){Ps.makeCurrent()},multi:!0},{provide:pe,useFactory:function Tl(){return(0,p.RDi)(document),document},deps:[]}]),oo=new p.OlP(""),za=[{provide:p.rWj,useClass:class Lh{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Jo=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function ds(){return new p.qLn},deps:[]},{provide:vl,useClass:or,multi:!0,deps:[pe,p.R0b,p.Lbi]},{provide:vl,useClass:Wa,multi:!0,deps:[pe]},{provide:Eu,useClass:Eu,deps:[wl,Zo,p.AFp]},{provide:p.FYo,useExisting:Eu},{provide:Ko,useExisting:Zo},{provide:Zo,useClass:Zo,deps:[pe]},{provide:wl,useClass:wl,deps:[vl,p.R0b]},{provide:class jo{},useClass:yl,deps:[]},[]];let Xo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Pn,useExisting:p.AFp},_l]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oo,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...Jo,...za],imports:[Vo,p.hGG]}),n})(),Gi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function qa(){return new Gi((0,p.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var an=F(8996),hs=F(7669);function at(...n){const e=(0,hs.yG)(n);return(0,an.D)(n,e)}var ei=F(7579);class Sn extends ei.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const lo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Tr=F(9751);const{isArray:co}=Array,{getPrototypeOf:Zc,prototype:Yc,keys:Gh}=Object;var ho=F(4671),st=F(4004);const{isArray:Ka}=Array;var Wn=F(5403),Za=F(9672);function xu(...n){const e=(0,hs.yG)(n),t=(0,hs.jO)(n),{args:r,keys:i}=function ua(n){if(1===n.length){const e=n[0];if(co(e))return{args:e,keys:null};if(function Sl(n){return n&&"object"==typeof n&&Zc(n)===Yc}(e)){const t=Gh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,an.D)([],e);const a=new Tr.y(function Qc(n,e,t=ho.y){return r=>{zh(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let m=0;m<i;m++)zh(e,()=>{const v=(0,an.D)(n[m],e);let b=!1;v.subscribe((0,Wn.x)(r,S=>{a[m]=S,b||(b=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function Au(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):ho.y));return t?a.pipe(function Al(n){return(0,st.U)(e=>function qi(n,e){return Ka(e)?n(...e):n(e)}(n,e))}(t)):a}function zh(n,e,t){n?(0,Za.f)(t,n,e):e()}var la=F(8189);function ca(...n){return function Ya(){return(0,la.J)(1)}()((0,an.D)(n,(0,hs.yG)(n)))}var gi=F(8421);function fo(n){return new Tr.y(e=>{(0,gi.Xf)(n()).subscribe(e)})}var xl=F(9635),ks=F(576);function ti(n,e){const t=(0,ks.m)(n)?n:()=>n,r=i=>i.error(t());return new Tr.y(e?i=>e.schedule(r,0,i):r)}var ps=F(515),Os=F(727),Jn=F(4482);function po(){return(0,Jn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class gs extends Tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Os.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Os.w0.EMPTY)}return e}refCount(){return po()(this)}}function Gn(n,e){return(0,Jn.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,Wn.x)(r,m=>{i?.unsubscribe();let v=0;const b=a++;(0,gi.Xf)(n(m,b)).subscribe(i=(0,Wn.x)(r,S=>r.next(e?e(m,S,b,v++):S),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function xn(n){return n<=0?()=>ps.E:(0,Jn.e)((e,t)=>{let r=0;e.subscribe((0,Wn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function da(...n){const e=(0,hs.yG)(n);return(0,Jn.e)((t,r)=>{(e?ca(n,t,e):ca(n,t)).subscribe(r)})}function T(n,e){return(0,Jn.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var D=F(5577);function R(n){return(0,Jn.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function j(n=X){return(0,Jn.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function X(){return new lo}function oe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?T((i,a)=>n(i,a,r)):ho.y,xn(1),t?R(e):j(()=>new lo))}function Ae(n,e){return(0,ks.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Ve=F(8505);function lt(n){return(0,Jn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,l=>{a=(0,gi.Xf)(n(l,lt(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Dt(n,e,t,r,i){return(a,l)=>{let d=t,m=e,v=0;a.subscribe((0,Wn.x)(l,b=>{const S=v++;m=d?n(m,b,S):(d=!0,b),r&&l.next(m)},i&&(()=>{d&&l.next(m),l.complete()})))}}function Pt(n,e){return(0,Jn.e)(Dt(n,e,arguments.length>=2,!0))}function yt(n){return n<=0?()=>ps.E:(0,Jn.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?T((i,a)=>n(i,a,r)):ho.y,yt(1),t?R(e):j(()=>new lo))}function Ls(n){return(0,Jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",xi=Symbol("RouteTitle");class ms{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ki(n){return new ms(n)}function fa(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ni(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!P_(n[i],e[i]))return!1;return!0}function P_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Kp(n){return Array.prototype.concat.apply([],n)}function qh(n){return n.length>0?n[n.length-1]:null}function qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function mo(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,an.D)(Promise.resolve(n)):at(n)}const KI={exact:function Yp(n,e,t){if(!yo(n.segments,e.segments)||!_o(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Yp(n.children[r],e.children[r],t))return!1;return!0},subset:Rl},Zh={exact:function Yh(n,e){return ni(n,e)},subset:function Jc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>P_(n[t],e[t]))},ignored:()=>!0};function M_(n,e,t){return KI[t.paths](n.root,e.root,t.matrixParams)&&Zh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Rl(n,e,t){return Xc(n,e,e.segments,t)}function Xc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!yo(i,t)||e.hasChildren()||!_o(i,t,r))}if(n.segments.length===t.length){if(!yo(n.segments,t)||!_o(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Rl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(yo(n.segments,i)&&_o(n.segments,i,r)&&n.children[Lt])&&Xc(n.children[Lt],e,a,r)}}function _o(n,e,t){return e.every((r,i)=>Zh[t](n[i].parameters,r.parameters))}class Qa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ki(this.queryParams)),this._queryParamMap}toString(){return Jp.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,qn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pu(this)}}class Pl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ki(this.parameters)),this._parameterMap}toString(){return N_(this)}}function yo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new Ru},providedIn:"root"}),n})();class Ru{parse(e){const t=new g(e);return new Qa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ml(e.root,!0)}`,r=function YI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${td(t)}=${td(i)}`).join("&"):`${td(t)}=${td(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Xh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Jp=new Ru;function Pu(n){return n.segments.map(e=>N_(e)).join("/")}function Ml(n,e){if(!n.hasChildren())return Pu(n);if(e){const t=n.children[Lt]?Ml(n.children[Lt],!1):"",r=[];return qn(n.children,(i,a)=>{a!==Lt&&r.push(`${a}:${Ml(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Qp(n,e){let t=[];return qn(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),qn(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[Ml(n.children[Lt],!1)]:[`${i}:${Ml(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Pu(n)}/${t[0]}`:`${Pu(n)}/(${t.join("//")})`}}function Jh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function td(n){return Jh(n).replace(/%3B/gi,";")}function Fs(n){return Jh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vo(n){return decodeURIComponent(n)}function ef(n){return vo(n.replace(/\+/g,"%20"))}function N_(n){return`${Fs(n.path)}${function ZI(n){return Object.keys(n).map(e=>`;${Fs(e)}=${Fs(n[e])}`).join("")}(n.parameters)}`}const QI=/^[^\/()?;=#]+/;function tf(n){const e=n.match(QI);return e?e[0]:""}const nf=/^[^=?&#]+/,JI=/^[^&#]+/;class g{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Qt(e,t)),r}parseSegment(){const e=tf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new Pl(vo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tf(this.remaining);i&&(r=i,this.capture(r))}e[vo(t)]=vo(r)}parseQueryParam(e){const t=function k_(n){const e=n.match(nf);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function w(n){const e=n.match(JI);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ef(t),a=ef(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Lt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Lt]:new Qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function _(n){return n.segments.length>0?new Qt([],{[Lt]:n}):n}function E(n){const e={};for(const r of Object.keys(n.children)){const a=E(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function x(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function O(n){return n instanceof Qa}function Zt(n,e,t,r,i){if(0===t.length)return Zi(e.root,e.root,e.root,r,i);const a=function id(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return qn(a.outlets,(m,v)=>{d[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,m)=>{0==m&&"."===d||(0==m&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new rd(t,e,r)}(t);return a.toRoot()?Zi(e.root,e.root,new Qt([],{}),r,i):function l(m){const v=function rf(n,e,t,r){if(n.isAbsolute)return new Ja(e.root,!0,0);if(-1===r)return new Ja(t,t===e.root,0);return function sd(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new Ja(r,!1,i-a)}(t,r+(pn(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),b=v.processChildren?pa(v.segmentGroup,v.index,a.commands):kl(v.segmentGroup,v.index,a.commands);return Zi(e.root,v.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function pn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wr(n){return"object"==typeof n&&null!=n&&n.outlets}function Zi(n,e,t,r,i){let l,a={};r&&qn(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),l=n===e?t:nd(n,e,t);const d=_(E(l));return new Qa(d,a,i)}function nd(n,e,t){const r={};return qn(n.children,(i,a)=>{r[a]=i===e?t:nd(i,e,t)}),new Qt(n.segments,r)}class rd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pn(r[0]))throw new p.vHH(4003,!1);const i=r.find(Wr);if(i&&i!==qh(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ja{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kl(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return pa(n,e,t);const r=function O_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(Wr(d))break;const m=`${d}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!tg(m,v,l))return a;r+=2}else{if(!tg(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Qt(n.segments.slice(0,r.pathIndex),{});return a.children[Lt]=new Qt(n.segments.slice(r.pathIndex),n.children),pa(a,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?Un(n,e,t):r.match?pa(n,0,i):Un(n,e,t)}function pa(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function Nl(n){return Wr(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return qn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=kl(n.children[l],e,a))}),qn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Qt(n.segments,i)}}function Un(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Wr(a)){const m=eg(a.outlets);return new Qt(r,m)}if(0===i&&pn(t[0])){r.push(new Pl(n.segments[e].path,XI(t[0]))),i++;continue}const l=Wr(a)?a.outlets[Lt]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&pn(d)?(r.push(new Pl(l,XI(d))),i+=2):(r.push(new Pl(l,{})),i++)}return new Qt(r,{})}function eg(n){const e={};return qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Un(new Qt([],{}),0,t))}),e}function XI(n){const e={};return qn(n,(t,r)=>e[r]=`${t}`),e}function tg(n,e,t){return n==t.path&&ni(e,t.parameters)}class ga{constructor(e,t){this.id=e,this.url=t}}class L_ extends ga{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ol extends ga{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ng extends ga{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class e0 extends ga{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _D extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _M extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yM extends ga{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sf extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F_ extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class n0{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class r0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class a0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=af(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=af(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ig(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ig(e,this._root).map(t=>t.value)}}function af(n,e){if(n===e.value)return e;for(const t of e.children){const r=af(n,t);if(r)return r}return null}function ig(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ig(n,t);if(r.length)return r.unshift(e),r}return[]}class ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Us(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class u0 extends a0{constructor(e,t){super(e),this.snapshot=t,uf(this,e)}toString(){return this.snapshot.toString()}}function sg(n,e){const t=function og(n,e){const l=new _a([],{},{},"",{},Lt,e,null,n.root,-1,{});return new U_("",new ma(l,[]))}(n,e),r=new Sn([new Pl("",{})]),i=new Sn({}),a=new Sn({}),l=new Sn({}),d=new Sn(""),m=new Mu(r,i,l,d,a,Lt,e,t.root);return m.snapshot=t.root,new u0(new ma(m,[]),t)}class Mu{constructor(e,t,r,i,a,l,d,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,st.U)(v=>v[xi]))??at(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>Ki(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>Ki(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ag(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function ug(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _a{constructor(e,t,r,i,a,l,d,m,v,b,S,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.[xi],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=b,this._correctedLastPathIndex=P??b,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ki(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ki(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class U_ extends a0{constructor(e,t){super(t),this.url=e,uf(this,t)}toString(){return l0(this._root)}}function uf(n,e){e.value._routerState=n,e.children.forEach(t=>uf(n,t))}function l0(n){const e=n.children.length>0?` { ${n.children.map(l0).join(", ")} } `:"";return`${n.value}${e}`}function V_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ni(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ni(e.params,t.params)||n.params.next(t.params),function go(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ni(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ni(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function lg(n,e){const t=ni(n.params,e.params)&&function ed(n,e){return yo(n,e)&&n.every((t,r)=>ni(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||lg(n.parent,e.parent))}function lf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function vD(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lf(n,r,i);return lf(n,r)})}(n,e,t);return new ma(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>lf(n,d)),l}}const r=function wD(n){return new Mu(new Sn(n.url),new Sn(n.params),new Sn(n.queryParams),new Sn(n.fragment),new Sn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>lf(n,a));return new ma(r,i)}}const B_="ngNavigationCancelingError";function cg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=O(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=c0(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function c0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[B_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function j_(n){return d0(n)&&O(n.url)}function d0(n){return n&&n[B_]}class h0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new dg,this.attachRef=null}}let dg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new h0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hg=!1;let Ll=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=i||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,hg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,hg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,hg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,hg);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,m=new ID(t,d,i.injector);if(r&&function ad(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(dg),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class ID{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mu?this.route:e===dg?this.childContexts:this.parent.get(e,t)}}let Fl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[Ll],encapsulation:2}),n})();function f0(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function W_(n){const e=n.children&&n.children.map(W_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=Fl),t}function Vs(n){return n.outlet||Lt}function fg(n,e){const t=n.filter(r=>Vs(r)===e);return t.push(...n.filter(r=>Vs(r)!==e)),t}function pg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class G_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),V_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Us(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),qn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Us(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Us(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Us(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new o0(a.value.snapshot))}),e.children.length&&this.forwardEvent(new yD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(V_(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),V_(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=pg(i.snapshot),m=d?.get(p._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class CD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class z_{constructor(e,t){this.component=e,this.route=t}}function CM(n,e,t){const r=n._root;return df(r,e?e._root:null,t,[r.value])}function cf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function df(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Us(e);return n.children.forEach(l=>{(function m0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function q_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yo(n.url,e.url)||!ni(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lg(n,e)||!ni(n.queryParams,e.queryParams);default:return!lg(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new CD(r)):(a.data=l.data,a._resolvedData=l._resolvedData),df(n,e,a.component?d?d.children:null:t,r,i),m&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new z_(d.outlet.component,l))}else l&&ud(e,d,i),i.canActivateChecks.push(new CD(r)),df(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),qn(a,(l,d)=>ud(l,t.getContext(d),i)),i}function ud(n,e,t){const r=Us(n),i=n.value;qn(r,(a,l)=>{ud(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new z_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ld(n){return"function"==typeof n}function gg(n){return n instanceof lo||"EmptyError"===n?.name}const mg=Symbol("INITIAL_VALUE");function cd(){return Gn(n=>xu(n.map(e=>e.pipe(xn(1),da(mg)))).pipe((0,st.U)(e=>{for(const t of e)if(!0!==t){if(t===mg)return mg;if(!1===t||t instanceof Qa)return t}return!0}),T(e=>e!==mg),xn(1)))}function mi(n){return(0,xl.z)((0,Ve.b)(e=>{if(O(e))throw cg(0,e)}),(0,st.U)(e=>!0===e))}const _g={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yg(n,e,t,r,i){const a=Gr(n,e,t);return a.matched?function Q_(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?at(i.map(l=>{const d=cf(l,n);return mo(function bD(n){return n&&ld(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(cd(),mi()):at(!0)}(r=f0(e,r),e,t).pipe((0,st.U)(l=>!0===l?a:{..._g})):at(a)}function Gr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{..._g}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||fa)(t,n,e);if(!i)return{..._g};const a={};qn(i.posParams,(d,m)=>{a[m]=d.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Nu(n,e,t,r,i="corrected"){if(t.length>0&&function OD(n,e,t){return t.some(r=>vg(n,e,r)&&Vs(r)!==Lt)}(n,t,r)){const l=new Qt(e,function kD(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Vs(a)!==Lt){const l=new Qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Vs(a)]=l}return i}(n,e,r,new Qt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function w0(n,e,t){return t.some(r=>vg(n,e,r))}(n,t,r)){const l=new Qt(n.segments,function v0(n,e,t,r,i,a){const l={};for(const d of r)if(vg(n,t,d)&&!i[Vs(d)]){const m=new Qt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Vs(d)]=m}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Qt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function vg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function J_(n,e,t,r){return!!(Vs(n)===r||r!==Lt&&vg(e,t,n))&&("**"===n.path||Gr(e,n,t).matched)}function I0(n,e,t){return 0===e.length&&!n.children[t]}const ff=!1;class wg{constructor(e){this.segmentGroup=e||null}}class E0{constructor(e){this.urlTree=e}}function pf(n){return ti(new wg(n))}function C0(n){return ti(new E0(n))}class FD{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Nu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,st.U)(a=>this.createUrlTree(E(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(lt(a=>{if(a instanceof E0)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof wg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,st.U)(i=>this.createUrlTree(E(i),e.queryParams,e.fragment))).pipe(lt(i=>{throw i instanceof wg?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,ff)}createUrlTree(e,t,r){const i=_(e);return new Qa(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(a=>new Qt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,an.D)(i).pipe(Ae(a=>{const l=r.children[a],d=fg(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,st.U)(m=>({segment:m,outlet:a})))}),Pt((a,l)=>(a[l.outlet]=l.segment,a),{}),zn())}expandSegment(e,t,r,i,a,l){return(0,an.D)(r).pipe(Ae(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(lt(v=>{if(v instanceof wg)return at(null);throw v}))),oe(d=>!!d),lt((d,m)=>{if(gg(d))return I0(t,i,a)?at(new Qt([],{})):pf(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return J_(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):pf(t):pf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?C0(a):this.lineralizeSegments(r,a).pipe((0,D.z)(l=>{const d=new Qt(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:m,remainingSegments:v,positionalParamSegments:b}=Gr(t,i,a);if(!d)return pf(t);const S=this.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?C0(S):this.lineralizeSegments(i,S).pipe((0,D.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=f0(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,st.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Qt(i,{})))):at(new Qt(i,{}))):yg(t,r,i,e).pipe(Gn(({matched:l,consumedSegments:d,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,D.z)(b=>{const S=b.injector??e,P=b.routes,{segmentGroup:V,slicedSegments:G}=Nu(t,d,m,P),ce=new Qt(V.segments,V.children);if(0===G.length&&ce.hasChildren())return this.expandChildren(S,P,ce).pipe((0,st.U)(ut=>new Qt(d,ut)));if(0===P.length&&0===G.length)return at(new Qt(d,{}));const ye=Vs(r)===a;return this.expandSegment(S,ce,P,G,ye?Lt:a,!0).pipe((0,st.U)(dt=>new Qt(d.concat(dt.segments),dt.children)))})):pf(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function ND(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?at(!0):at(i.map(l=>{const d=cf(l,n);return mo(function K_(n){return n&&ld(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(cd(),mi())}(e,t,r).pipe((0,D.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ve.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function dd(n){return ti(c0(ff,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Lt])return ti(new p.vHH(4e3,ff));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Qa(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return qn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return qn(t.children,(d,m)=>{l[m]=this.createSegmentGroup(e,d,r,i)}),new Qt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,ff);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class DM{}class ya{constructor(e,t,r,i,a,l,d,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=m}recognize(){const e=Nu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,st.U)(t=>{if(null===t)return null;const r=new _a([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ma(r,t),a=new U_(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=ag(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,an.D)(Object.keys(r.children)).pipe(Ae(i=>{const a=r.children[i],l=fg(t,i);return this.processSegmentGroup(e,l,a,i)}),Pt((i,a)=>i&&a?(i.push(...a),i):null),function _r(n,e=!1){return(0,Jn.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),R(null),zn(),(0,st.U)(i=>{if(null===i)return null;const a=ny(i);return function ey(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,an.D)(t).pipe(Ae(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),oe(l=>!!l),lt(l=>{if(gg(l))return I0(r,i,a)?at([]):at(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!J_(t,r,i,a))return at(null);let l;if("**"===t.path){const d=i.length>0?qh(i).parameters:{},m=b0(r)+i.length;l=at({snapshot:new _a(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ig(t),Vs(t),t.component??t._loadedComponent??null,t,hd(r),m,Eg(t),m),consumedSegments:[],remainingSegments:[]})}else l=yg(r,t,i,e).pipe((0,st.U)(({matched:d,consumedSegments:m,remainingSegments:v,parameters:b})=>{if(!d)return null;const S=b0(r)+m.length;return{snapshot:new _a(m,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ig(t),Vs(t),t.component??t._loadedComponent??null,t,hd(r),S,Eg(t),S),consumedSegments:m,remainingSegments:v}}));return l.pipe(Gn(d=>{if(null===d)return at(null);const{snapshot:m,consumedSegments:v,remainingSegments:b}=d;e=t._injector??e;const S=t._loadedInjector??e,P=function ty(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:G}=Nu(r,v,b,P.filter(ye=>void 0===ye.redirectTo),this.relativeLinkResolution);if(0===G.length&&V.hasChildren())return this.processChildren(S,P,V).pipe((0,st.U)(ye=>null===ye?null:[new ma(m,ye)]));if(0===P.length&&0===G.length)return at([new ma(m,[])]);const ce=Vs(t)===a;return this.processSegment(S,P,V,G,ce?Lt:a).pipe((0,st.U)(ye=>null===ye?null:[new ma(m,ye)]))}))}}function VD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ny(n){const e=[],t=new Set;for(const r of n){if(!VD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ny(r.children);e.push(new ma(r.value,i))}return e.filter(r=>!t.has(r))}function hd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function b0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ig(n){return n.data||{}}function Eg(n){return n.resolve||{}}function Cg(n){return"string"==typeof n.title||null===n.title}function iy(n){return Gn(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,st.U)(()=>e)):at(e)})}let x0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[xi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(R0)},providedIn:"root"}),n})(),R0=(()=>{class n extends x0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Gi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class HD{}class P0 extends class $D{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const gf=new p.OlP("",{providedIn:"root",factory:()=>({})}),oy=new p.OlP("ROUTES");let ay=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=mo(t.loadComponent()).pipe((0,Ve.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Ls(()=>{this.componentLoaders.delete(t)})),i=new gs(r,()=>new ei.x).pipe(po());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,st.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,b=!1;Array.isArray(d)?v=d:(m=d.create(t).injector,v=Kp(m.get(oy,[],p.XFs.Self|p.XFs.Optional)));return{routes:v.map(W_),injector:m}}),Ls(()=>{this.childrenLoaders.delete(r)})),l=new gs(a,()=>new ei.x).pipe(po());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return mo(t()).pipe((0,D.z)(r=>r instanceof p.YKP||Array.isArray(r)?at(r):(0,an.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class M0{}class N0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function k0(n){throw n}function O0(n,e,t){return e.parse("/")}const WD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function L0(){const n=(0,p.f3M)(Qh),e=(0,p.f3M)(dg),t=(0,p.f3M)(Le),r=(0,p.f3M)(p.zs3),i=(0,p.f3M)(p.Sil),a=(0,p.f3M)(oy,{optional:!0})??[],l=(0,p.f3M)(gf,{optional:!0})??{},d=(0,p.f3M)(R0),m=(0,p.f3M)(x0,{optional:!0}),v=(0,p.f3M)(M0,{optional:!0}),b=(0,p.f3M)(HD,{optional:!0}),S=new br(null,n,e,t,r,i,Kp(a));return v&&(S.urlHandlingStrategy=v),b&&(S.routeReuseStrategy=b),S.titleStrategy=m??d,function bg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let br=(()=>{class n{constructor(t,r,i,a,l,d,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ei.x,this.errorHandler=k0,this.malformedUriErrorHandler=O0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new N0,this.routeReuseStrategy=new P0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(ay),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new n0(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new t0(P)),this.ngModule=l.get(p.h0i),this.console=l.get(p.c2e);const S=l.get(p.R0b);this.isNgZoneEnabled=S instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function Zp(){return new Qa(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sg(this.currentUrlTree,this.rootComponentType),this.transitions=new Sn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(T(i=>0!==i.id),(0,st.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Gn(i=>{let a=!1,l=!1;return at(i).pipe((0,Ve.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Gn(d=>{const m=this.browserUrlTree.toString(),v=!this.navigated||d.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return uy(d.source)&&(this.browserUrlTree=d.extractedUrl),at(d).pipe(Gn(S=>{const P=this.transitions.getValue();return r.next(new L_(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?ps.E:Promise.resolve(S)}),function UD(n,e,t,r){return Gn(i=>function Xa(n,e,t,r,i){return new FD(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,st.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ve.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function S0(n,e,t,r,i,a){return(0,D.z)(l=>function SM(n,e,t,r,i,a,l="emptyOnly",d="legacy"){return new ya(n,e,t,r,i,l,d,a).recognize().pipe(Gn(m=>null===m?function T0(n){return new Tr.y(e=>e.error(n))}(new DM):at(m)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,st.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ve.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new _D(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:G,restoredState:ce,extras:ye}=d,ot=new L_(P,this.serializeUrl(V),G,ce);r.next(ot);const dt=sg(V,this.rootComponentType).snapshot;return at(i={...d,targetSnapshot:dt,urlAfterRedirects:V,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),ps.E}),(0,Ve.b)(d=>{const m=new _M(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(m)}),(0,st.U)(d=>i={...d,guards:CM(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function SD(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?at({...t,guardsResult:!0}):function AD(n,e,t,r){return(0,an.D)(n).pipe((0,D.z)(i=>function MD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(d=>{const m=pg(e)??i,v=cf(d,m);return mo(function hf(n){return n&&ld(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(oe())})).pipe(cd()):at(!0)}(i.component,i.route,t,e,r)),oe(i=>!0!==i,!0))}(l,r,i,n).pipe((0,D.z)(d=>d&&function _0(n){return"boolean"==typeof n}(d)?function Y_(n,e,t,r){return(0,an.D)(e).pipe(Ae(i=>ca(function RD(n,e){return null!==n&&e&&e(new r0(n)),at(!0)}(i.route.parent,r),function xD(n,e){return null!==n&&e&&e(new s0(n)),at(!0)}(i.route,r),function y0(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function TM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>fo(()=>at(l.guards.map(m=>{const v=pg(l.node)??t,b=cf(m,v);return mo(function Z_(n){return n&&ld(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(oe())})).pipe(cd())));return at(a).pipe(cd())}(n,i.path,t),function PD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>fo(()=>{const l=pg(e)??t,d=cf(a,l);return mo(function TD(n){return n&&ld(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(oe())}));return at(i).pipe(cd())}(n,i.route,t))),oe(i=>!0!==i,!0))}(r,a,n,e):at(d)),(0,st.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ve.b)(d=>{if(i.guardsResult=d.guardsResult,O(d.guardsResult))throw cg(0,d.guardsResult);const m=new yM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(m)}),T(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),iy(d=>{if(d.guards.canActivateChecks.length)return at(d).pipe((0,Ve.b)(m=>{const v=new sf(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Gn(m=>{let v=!1;return at(m).pipe(function AM(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,an.D)(i).pipe(Ae(l=>function fd(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Cg(i)&&(a[xi]=i.title),function ry(n,e,t,r){const i=function A0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return at({});const a={};return(0,an.D)(i).pipe((0,D.z)(l=>function jD(n,e,t,r){const i=pg(e)??r,a=cf(n,i);return mo(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(oe(),(0,Ve.b)(d=>{a[l]=d}))),yt(1),function ha(n){return(0,st.U)(()=>n)}(a),lt(l=>gg(l)?ps.E:ti(l)))}(a,n,e,r).pipe((0,st.U)(l=>(n._resolvedData=l,n.data=ag(n,t).resolve,i&&Cg(i)&&(n.data[xi]=i.title),null)))}(l.route,r,n,e)),(0,Ve.b)(()=>a++),yt(1),(0,D.z)(l=>a===i.length?at(t):ps.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ve.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Ve.b)(m=>{const v=new F_(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),iy(d=>{const m=v=>{const b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Ve.b)(S=>{v.component=S}),(0,st.U)(()=>{})));for(const S of v.children)b.push(...m(S));return b};return xu(m(d.targetSnapshot.root)).pipe(R(),xn(1))}),iy(()=>this.afterPreactivation()),(0,st.U)(d=>{const m=function od(n,e,t){const r=lf(n,e._root,t?t._root:void 0);return new u0(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:m}}),(0,Ve.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new G_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ve.b)({next(){a=!0},complete(){a=!0}}),Ls(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),lt(d=>{if(l=!0,d0(d)){j_(d)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new ng(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(m),j_(d)){const v=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uy(i.source)};this.scheduleNavigation(v,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new e0(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(d))}catch(v){i.reject(v)}}return ps.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(W_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:m}=r,v=i||this.routerState.root,b=m?this.currentUrlTree.fragment:l;let S=null;switch(d){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Zt(v,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=O(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function F0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...WD}:!1===r?{...RM}:r,O(t))return M_(this.currentUrlTree,t,i);const a=this.parseUrl(t);return M_(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ol(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let d,m,v;l?(d=l.resolve,m=l.reject,v=l.promise):v=new Promise((P,V)=>{d=P,m=V});const b=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:b,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new ng(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return L0()},providedIn:"root"}),n})();function uy(n){return"imperative"!==n}let pd=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ei.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(br),p.Y36(Mu),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})();class ly{}let cy=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(T(t=>t instanceof Ol),Ae(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,d=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,an.D)(i).pipe((0,la.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const a=i.pipe((0,D.z)(l=>null===l?at(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,an.D)([a,l]).pipe((0,la.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(br),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(ly),p.LFG(ay))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ul=new p.OlP("");let V0=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof L_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ol&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new rg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Vl(n,e){return{\u0275kind:n,\u0275providers:e}}function _f(n){return[{provide:oy,multi:!0,useValue:n}]}function qD(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(br),i=n.get(dy);1===n.get(hy)&&r.initialNavigation(),n.get(Bs,null,p.XFs.Optional)?.setUpPreloading(),n.get(Ul,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const dy=new p.OlP("",{factory:()=>new ei.x}),hy=new p.OlP("",{providedIn:"root",factory:()=>1});const Bs=new p.OlP("");function YD(n){return Vl(0,[{provide:Bs,useExisting:cy},{provide:ly,useExisting:n}])}const H0=new p.OlP("ROUTER_FORROOT_GUARD"),JD=[Le,{provide:Qh,useClass:Ru},{provide:br,useFactory:L0},dg,{provide:Mu,useFactory:function B0(n){return n.routerState.root},deps:[br]},ay];function $0(){return new p.PXZ("Router",br)}let W0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JD,[],_f(t),{provide:H0,useFactory:G0,deps:[[br,new p.FiY,new p.tp0]]},{provide:gf,useValue:r||{}},r?.useHash?{provide:Ee,useClass:Ze}:{provide:Ee,useClass:Qe},{provide:Ul,useFactory:()=>{const n=(0,p.f3M)(br),e=(0,p.f3M)(Nc),t=(0,p.f3M)(gf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new V0(n,e,t)}},r?.preloadingStrategy?YD(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:$0},r?.initialNavigation?z0(r):[],[{provide:fy,useFactory:qD},{provide:p.tb,multi:!0,useExisting:fy}]]}}static forChild(t){return{ngModule:n,providers:[_f(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(H0,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Fl]}),n})();function G0(n){return"guarded"}function z0(n){return["disabled"===n.initialNavigation?Vl(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(br);return()=>{e.setUpLocationChangeListener()}}},{provide:hy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Vl(2,[{provide:hy,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(br),d=e.get(dy);(function i(a){e.get(br).events.pipe(T(d=>d instanceof Ol||d instanceof ng||d instanceof e0),(0,st.U)(d=>d instanceof Ol||d instanceof ng&&(0===d.code||1===d.code)&&null),T(d=>null!==d),xn(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||d.closed?at(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const fy=new p.OlP("");let q0={warnLogin:{severity:"warn",summary:"Warn",detail:"Efetue o Login"}};var nS=F(8247),L=F(2090),Ri=F(9681),wo=F(1877),wa=F(4859),Rg=F(6451),yf=F(5363),Bl=F(6063);class rS extends ei.x{constructor(e=1/0,t=1/0,r=Bl.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)d=m;d&&r.splice(0,d+1)}}}var Pg=F(3099);function Mg(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Pg.B)({connector:()=>new rS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function K0(n,e){return(0,ks.m)(e)?Gn(()=>n,e):Gn(()=>n)}var Z0=F(9468),yn=F(5813),zr=F(2011);F(5867);var Ie=F(5861);const wf=new Map,uS={activated:!1,tokenObservers:[]},my={initialized:!1,enabled:!1};function ri(n){return wf.get(n)||Object.assign({},uS)}function eu(){return my}class yy{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function tu(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function cS(n){if(!ri(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function _d(n,e){return yd.apply(this,arguments)}function yd(){return(yd=(0,Ie.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const d={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,d)}catch(V){throw _i.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==m.status)throw _i.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(V){throw _i.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const b=v.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(b[1]),P=Date.now();return{token:v.token,expireTimeMillis:P+S,issuedAtTimeMillis:P}})).apply(this,arguments)}function Cy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const If="firebase-app-check-store";let Lg=null;function Ty(){return Lg||(Lg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(_i.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(If,{keyPath:"compositeKey"})}}catch(r){e(_i.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Lg)}function Dy(){return(Dy=(0,Ie.Z)(function*(n,e){const r=(yield Ty()).transaction(If,"readwrite"),a=r.objectStore(If).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;d(_i.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Ug=new wo.Yd("@firebase/app-check");function rE(n,e){return(0,L.hl)()?function hS(n,e){return function by(n,e){return Dy.apply(this,arguments)}(function fS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ug.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pS(){return eu().enabled}function gS(){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,Ie.Z)(function*(){const n=eu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mS={error:"UNKNOWN_ERROR"};function sE(n){return L.US.encodeString(JSON.stringify(n),!1)}function vd(n){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,Ie.Z)(function*(n,e=!1){const t=n.app;cS(t);const r=ri(t);let a,i=r.token;if(i&&!wd(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(wd(m)?i=m:yield rE(t,void 0))}if(!e&&i&&wd(i))return{token:i.token};let d,l=!1;if(pS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_d(Cy(t,yield gS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield rE(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield ri(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Ug.warn(m.message):Ug.error(m),a=m}return i?a?d=wd(i)?{token:i.token,internalError:a}:xy(a):(d={token:i.token},r.token=i,yield rE(t,i)):d=xy(a),l&&aE(t,d),d})).apply(this,arguments)}function Ay(n,e){const t=ri(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nu(n){const{app:e}=n,t=ri(e);let r=t.tokenRefresher;r||(r=function oE(n){const{app:e}=n;return new yy((0,Ie.Z)(function*(){let r;if(r=ri(e).token?yield vd(n,!0):yield vd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function aE(n,e){const t=ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function wd(n){return n.expireTimeMillis-Date.now()>0}function xy(n){return{token:sE(mS),error:n}}class _S{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ri(this.app);for(const t of e)Ay(this.app,t.next);return Promise.resolve()}}const Fy="app-check-internal";!function IS(){(0,Ri._registerComponent)(new wa.wA("app-check",n=>function yS(n,e){return new _S(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Fy).initialize()})),(0,Ri._registerComponent)(new wa.wA(Fy,n=>function Bg(n){return{getToken:e=>vd(n,e),addTokenListener:e=>function Ef(n,e,t,r){const{app:i}=n,a=ri(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&wd(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),nu(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>nu(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ay(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ri.registerVersion)("@firebase/app-check","0.5.17")}();class Cd{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var zg=F(127);const By=new p.OlP("angularfire2.auth.use-emulator"),jy=new p.OlP("angularfire2.auth.settings"),Td=new p.OlP("angularfire2.auth.tenant-id"),Tf=new p.OlP("angularfire2.auth.langugage-code"),bd=new p.OlP("angularfire2.auth.use-device-language"),gE=new p.OlP("angularfire.auth.persistence"),bf=(n,e,t,r,i,a,l,d)=>(0,zr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,b]of Object.entries(l))m.settings[v]=b;return d&&m.setPersistence(d),m},[t,r,i,a,l,d]);let qg=(()=>{class n{constructor(t,r,i,a,l,d,m,v,b,S,P,V){const G=new ei.x,ce=at(void 0).pipe((0,yf.Q)(l.outsideAngular),Gn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,st.U)(()=>(0,zr.on)(t,a,r)),(0,st.U)(ye=>bf(ye,a,d,v,b,S,m,P)),Mg({bufferSize:1,refCount:!1}));if(Bo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ce.pipe(oe()).subscribe();const ot=ce.pipe(Gn(ft=>ft.getRedirectResult().then(At=>At,()=>null)),yn.iC,Mg({bufferSize:1,refCount:!1})),dt=ce.pipe(Gn(ft=>new Tr.y(At=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(Bt=>At.next(Bt),Bt=>At.error(Bt),()=>At.complete()))})))),ut=ce.pipe(Gn(ft=>new Tr.y(At=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(Bt=>At.next(Bt),Bt=>At.error(Bt),()=>At.complete()))}))));this.authState=ot.pipe(K0(dt),(0,Z0.R)(l.outsideAngular),(0,yf.Q)(l.insideAngular)),this.user=ot.pipe(K0(ut),(0,Z0.R)(l.outsideAngular),(0,yf.Q)(l.insideAngular)),this.idToken=this.user.pipe(Gn(ft=>ft?(0,an.D)(ft.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Gn(ft=>ft?(0,an.D)(ft.getIdTokenResult()):at(null))),this.credential=(0,Rg.T)(ot,G,this.authState.pipe(T(ft=>!ft))).pipe((0,st.U)(ft=>ft?.user?ft:null),(0,Z0.R)(l.outsideAngular),(0,yf.Q)(l.insideAngular))}return(0,zr.pX)(this,ce,a,{spy:{apply:(ye,ot,dt)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&dt.then(ut=>G.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(zr.Dh),p.LFG(zr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(By,8),p.LFG(jy,8),p.LFG(Td,8),p.LFG(Tf,8),p.LFG(bd,8),p.LFG(gE,8),p.LFG(Cd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mE=(()=>{class n{constructor(){zg.Z.registerVersion("angularfire",yn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[qg]}),n})(),Dd=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r}googleLogin(){return this.afAuth.signInWithPopup(new nS.Q).then(t=>{localStorage[n.tokenKey]=t.credential.accessToken,localStorage[n.userUidKey]=t?.user?.uid,this.router.navigate([""])}).catch(t=>{this.router.navigate(["/login"])})}logout(){return localStorage.removeItem(n.tokenKey),localStorage.removeItem(n.userUidKey),this.afAuth.signOut()}}return n.tokenKey="userToken",n.userUidKey="userUid",n.\u0275fac=function(t){return new(t||n)(p.LFG(qg),p.LFG(br))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iu(n,e){return{type:7,name:n,definitions:e,options:{}}}function Df(n,e=null){return{type:4,styles:e,timings:n}}function yE(n){return{type:6,styles:n,offset:null}}function wE(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}const $y=["*"];let yi=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),MS=(()=>{class n{constructor(){this.messageSource=new ei.x,this.clearSource=new ei.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(t){t&&this.messageSource.next(t)}addAll(t){t&&t.length&&this.messageSource.next(t)}clear(t){this.clearSource.next(t||null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Yg=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[yi.STARTS_WITH,yi.CONTAINS,yi.NOT_CONTAINS,yi.ENDS_WITH,yi.EQUALS,yi.NOT_EQUALS],numeric:[yi.EQUALS,yi.NOT_EQUALS,yi.LESS_THAN,yi.LESS_THAN_OR_EQUAL_TO,yi.GREATER_THAN,yi.GREATER_THAN_OR_EQUAL_TO],date:[yi.DATE_IS,yi.DATE_IS_NOT,yi.DATE_BEFORE,yi.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new ei.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:$y,decls:1,vars:0,template:function(t,r){1&t&&(p.F$t(),p.Hsn(0))},encapsulation:2}),n})(),pN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:$y,decls:1,vars:0,template:function(t,r){1&t&&(p.F$t(),p.Hsn(0))},encapsulation:2}),n})(),ku=(()=>{class n{constructor(t){this.template=t}getType(){return this.name}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),NS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Vo]}),n})(),Yi=(()=>{class n{static addClass(t,r){t&&r&&(t.classList?t.classList.add(r):t.className+=" "+r)}static addMultipleClasses(t,r){if(t&&r)if(t.classList){let i=r.trim().split(" ");for(let a=0;a<i.length;a++)t.classList.add(i[a])}else{let i=r.split(" ");for(let a=0;a<i.length;a++)t.className+=" "+i[a]}}static removeClass(t,r){t&&r&&(t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,r){return!(!t||!r)&&(t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return t?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,i=0;for(var a=0;a<r.length;a++){if(r[a]==t)return i;1==r[a].nodeType&&i++}return-1}static indexWithinGroup(t,r){let i=t.parentNode?t.parentNode.childNodes:[],a=0;for(var l=0;l<i.length;l++){if(i[l]==t)return a;i[l].attributes&&i[l].attributes[r]&&1==i[l].nodeType&&a++}return-1}static appendOverlay(t,r,i="self"){"self"!==i&&t&&r&&this.appendChild(t,r)}static alignOverlay(t,r,i="self",a=!0){t&&r&&(a&&(t.style.minWidth||(t.style.minWidth=n.getOuterWidth(r)+"px")),"self"===i?this.relativePosition(t,r):this.absolutePosition(t,r))}static relativePosition(t,r){const i=ce=>{if(ce)return"relative"===getComputedStyle(ce).getPropertyValue("position")?ce:i(ce.parentElement)},a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),l=r.offsetHeight,d=r.getBoundingClientRect(),m=this.getWindowScrollTop(),v=this.getWindowScrollLeft(),b=this.getViewport(),P=i(t)?.getBoundingClientRect()||{top:-1*m,left:-1*v};let V,G;d.top+l+a.height>b.height?(V=d.top-P.top-a.height,t.style.transformOrigin="bottom",d.top+V<0&&(V=-1*d.top)):(V=l+d.top-P.top,t.style.transformOrigin="top"),G=a.width>b.width?-1*(d.left-P.left):d.left-P.left+a.width>b.width?-1*(d.left-P.left+a.width-b.width):d.left-P.left,t.style.top=V+"px",t.style.left=G+"px"}static absolutePosition(t,r){const i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),a=i.height,l=i.width,d=r.offsetHeight,m=r.offsetWidth,v=r.getBoundingClientRect(),b=this.getWindowScrollTop(),S=this.getWindowScrollLeft(),P=this.getViewport();let V,G;v.top+d+a>P.height?(V=v.top+b-a,t.style.transformOrigin="bottom",V<0&&(V=b)):(V=d+v.top+b,t.style.transformOrigin="top"),G=v.left+l>P.width?Math.max(0,v.left+S+m-l):v.left+S,t.style.top=V+"px",t.style.left=G+"px"}static getParents(t,r=[]){return null===t.parentNode?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let i=this.getParents(t);const a=/(auto|scroll)/,l=d=>{let m=window.getComputedStyle(d,null);return a.test(m.getPropertyValue("overflow"))||a.test(m.getPropertyValue("overflowX"))||a.test(m.getPropertyValue("overflowY"))};for(let d of i){let m=1===d.nodeType&&d.dataset.scrollselectors;if(m){let v=m.split(",");for(let b of v){let S=this.findSingle(d,b);S&&l(S)&&r.push(S)}}9!==d.nodeType&&l(d)&&r.push(d)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let i=getComputedStyle(t).getPropertyValue("borderTopWidth"),a=i?parseFloat(i):0,l=getComputedStyle(t).getPropertyValue("paddingTop"),d=l?parseFloat(l):0,m=t.getBoundingClientRect(),b=r.getBoundingClientRect().top+document.body.scrollTop-(m.top+document.body.scrollTop)-a-d,S=t.scrollTop,P=t.clientHeight,V=this.getOuterHeight(r);b<0?t.scrollTop=S+b:b+V>P&&(t.scrollTop=S+b-P+V)}static fadeIn(t,r){t.style.opacity=0;let i=+new Date,a=0,l=function(){a=+t.style.opacity.replace(",",".")+((new Date).getTime()-i)/r,t.style.opacity=a,i=+new Date,+a<1&&(window.requestAnimationFrame&&requestAnimationFrame(l)||setTimeout(l,16))};l()}static fadeOut(t,r){var i=1,d=50/r;let m=setInterval(()=>{(i-=d)<=0&&(i=0,clearInterval(m)),t.style.opacity=i},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(l){return-1!==[].indexOf.call(document.querySelectorAll(l),this)}).call(t,r)}static getOuterWidth(t,r){let i=t.offsetWidth;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginLeft)+parseFloat(a.marginRight)}return i}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(t,r){let i=t.offsetHeight;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginTop)+parseFloat(a.marginBottom)}return i}static getHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let t=window,r=document,i=r.documentElement,a=r.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||a.clientWidth,height:t.innerHeight||i.clientHeight||a.clientHeight}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let i=t.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot append "+r+" to "+t;r.el.nativeElement.appendChild(t)}}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot remove "+t+" from "+r;r.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,i){t[r].apply(t,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,r){t&&document.activeElement!==t&&t.focus(r)}static getFocusableElements(t){let r=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),i=[];for(let a of r)"none"!=getComputedStyle(a).display&&"hidden"!=getComputedStyle(a).visibility&&i.push(a);return i}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,r){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:const i=typeof t;if("string"===i)return document.querySelector(t);if("object"===i&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const l=(d=t)&&d.constructor&&d.call&&d.apply?t():t;return l&&9===l.nodeType||this.isExist(l)?l:null}var d}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})(),Sd=(()=>{class n{constructor(t,r,i){this.el=t,this.zone=r,this.config=i}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let r=this.getInk();if(!r||"none"===getComputedStyle(r,null).display)return;if(Yi.removeClass(r,"p-ink-active"),!Yi.getHeight(r)&&!Yi.getWidth(r)){let d=Math.max(Yi.getOuterWidth(this.el.nativeElement),Yi.getOuterHeight(this.el.nativeElement));r.style.height=d+"px",r.style.width=d+"px"}let i=Yi.getOffset(this.el.nativeElement),a=t.pageX-i.left+document.body.scrollTop-Yi.getWidth(r)/2,l=t.pageY-i.top+document.body.scrollLeft-Yi.getHeight(r)/2;r.style.top=l+"px",r.style.left=a+"px",Yi.addClass(r,"p-ink-active"),this.timeout=setTimeout(()=>{let d=this.getInk();d&&Yi.removeClass(d,"p-ink-active")},401)}getInk(){for(let t=0;t<this.el.nativeElement.children.length;t++)if(-1!==this.el.nativeElement.children[t].className.indexOf("p-ink"))return this.el.nativeElement.children[t];return null}resetInk(){let t=this.getInk();t&&Yi.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),Yi.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),Yi.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(Yg,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),ii=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Vo]}),n})();function Hl(n,e){if(1&n&&p._UZ(0,"span",11),2&n){const t=p.oxw(2).$implicit;p.Q6J("innerHTML",t.summary,p.oJD)}}function Qg(n,e){if(1&n&&p._UZ(0,"span",12),2&n){const t=p.oxw(2).$implicit;p.Q6J("innerHTML",t.detail,p.oJD)}}function js(n,e){if(1&n&&(p.ynx(0),p.YNc(1,Hl,1,1,"span",9),p.YNc(2,Qg,1,1,"span",10),p.BQk()),2&n){const t=p.oxw().$implicit;p.xp6(1),p.Q6J("ngIf",t.summary),p.xp6(1),p.Q6J("ngIf",t.detail)}}function Wy(n,e){if(1&n&&(p.TgZ(0,"span",15),p._uU(1),p.qZA()),2&n){const t=p.oxw(2).$implicit;p.xp6(1),p.Oqu(t.summary)}}function Ad(n,e){if(1&n&&(p.TgZ(0,"span",16),p._uU(1),p.qZA()),2&n){const t=p.oxw(2).$implicit;p.xp6(1),p.Oqu(t.detail)}}function xd(n,e){if(1&n&&(p.YNc(0,Wy,2,1,"span",13),p.YNc(1,Ad,2,1,"span",14)),2&n){const t=p.oxw().$implicit;p.Q6J("ngIf",t.summary),p.xp6(1),p.Q6J("ngIf",t.detail)}}function Rd(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",17),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().index,a=p.oxw(2);return p.KtG(a.removeMessage(i))}),p._UZ(1,"i",18),p.qZA()}}const Pd=function(n,e){return{showTransitionParams:n,hideTransitionParams:e}},Md=function(n){return{value:"visible",params:n}},Nd=function(n,e,t,r){return{"pi-info-circle":n,"pi-check":e,"pi-exclamation-triangle":t,"pi-times-circle":r}};function kd(n,e){if(1&n&&(p.TgZ(0,"div",4)(1,"div",5),p._UZ(2,"span",6),p.YNc(3,js,3,2,"ng-container",1),p.YNc(4,xd,2,2,"ng-template",null,7,p.W1O),p.YNc(6,Rd,2,0,"button",8),p.qZA()()),2&n){const t=e.$implicit,r=p.MAs(5),i=p.oxw(2);p.Tol("p-message p-message-"+t.severity),p.Q6J("@messageAnimation",p.VKq(12,Md,p.WLB(9,Pd,i.showTransitionOptions,i.hideTransitionOptions))),p.xp6(2),p.Tol("p-message-icon pi"+(t.icon?" "+t.icon:"")),p.Q6J("ngClass",p.l5B(14,Nd,"info"===t.severity,"success"===t.severity,"warn"===t.severity,"error"===t.severity)),p.xp6(1),p.Q6J("ngIf",!i.escape)("ngIfElse",r),p.xp6(3),p.Q6J("ngIf",i.closable)}}function Od(n,e){if(1&n&&(p.ynx(0),p.YNc(1,kd,7,19,"div",3),p.BQk()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngForOf",t.value)}}function Ld(n,e){1&n&&p.GkF(0)}function CE(n,e){if(1&n&&(p.TgZ(0,"div",19)(1,"div",5),p.YNc(2,Ld,1,0,"ng-container",20),p.qZA()()),2&n){const t=p.oxw();p.Q6J("ngClass","p-message p-message-"+t.severity),p.xp6(2),p.Q6J("ngTemplateOutlet",t.contentTemplate)}}let TE=(()=>{class n{constructor(t,r,i){this.messageService=t,this.el=r,this.cd=i,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new p.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(t=>{if(t){if(t instanceof Array){let r=t.filter(i=>this.key===i.key);this.value=this.value?[...this.value,...r]:[...r]}else this.key===t.key&&(this.value=this.value?[...this.value,t]:[t]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(t=>{t?this.key===t&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let t=this.el.nativeElement.parentElement;return!(!t||!t.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(t){this.value=this.value.filter((r,i)=>i!==t),this.valueChange.emit(this.value)}get icon(){const t=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(t){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(MS,8),p.Y36(p.SBq),p.Y36(p.sBO))},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-messages"]],contentQueries:function(t,r,i){if(1&t&&p.Suo(i,ku,4),2&t){let a;p.iGM(a=p.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(t,r){if(1&t&&(p.TgZ(0,"div",0),p.YNc(1,Od,2,1,"ng-container",1),p.YNc(2,CE,3,2,"ng-template",null,2,p.W1O),p.qZA()),2&t){const i=p.MAs(3);p.Tol(r.styleClass),p.Q6J("ngStyle",r.style),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate)("ngIfElse",i)}},dependencies:[ln,Ss,Ln,As,No,Sd],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[iu("messageAnimation",[wE(":enter",[yE({opacity:0,transform:"translateY(-25%)"}),Df("{{showTransitionParams}}")]),wE(":leave",[Df("{{hideTransitionParams}}",yE({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),n})(),bE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Vo,ii]}),n})();function DE(n,e){1&n&&p.GkF(0)}const SE=function(n,e,t,r){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":e,"p-button-icon-top":t,"p-button-icon-bottom":r}};function AE(n,e){if(1&n&&p._UZ(0,"span",4),2&n){const t=p.oxw();p.Tol(t.loading?"p-button-loading-icon "+t.loadingIcon:t.icon),p.Q6J("ngClass",p.l5B(4,SE,"left"===t.iconPos&&t.label,"right"===t.iconPos&&t.label,"top"===t.iconPos&&t.label,"bottom"===t.iconPos&&t.label)),p.uIk("aria-hidden",!0)}}function xE(n,e){if(1&n&&(p.TgZ(0,"span",5),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.uIk("aria-hidden",t.icon&&!t.label),p.xp6(1),p.Oqu(t.label)}}function RE(n,e){if(1&n&&(p.TgZ(0,"span",4),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.Tol(t.badgeClass),p.Q6J("ngClass",t.badgeStyleClass()),p.xp6(1),p.Oqu(t.badge)}}const PE=function(n,e,t,r,i){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":e,"p-disabled":t,"p-button-loading":r,"p-button-loading-label-only":i}},kS=["*"];let Gy=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new p.vpe,this.onFocus=new p.vpe,this.onBlur=new p.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(t,r,i){if(1&t&&p.Suo(i,ku,4),2&t){let a;p.iGM(a=p.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:kS,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(t,r){1&t&&(p.F$t(),p.TgZ(0,"button",0),p.NdJ("click",function(a){return r.onClick.emit(a)})("focus",function(a){return r.onFocus.emit(a)})("blur",function(a){return r.onBlur.emit(a)}),p.Hsn(1),p.YNc(2,DE,1,0,"ng-container",1),p.YNc(3,AE,1,9,"span",2),p.YNc(4,xE,2,2,"span",3),p.YNc(5,RE,2,4,"span",2),p.qZA()),2&t&&(p.Tol(r.styleClass),p.Q6J("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",p.qbA(11,PE,r.icon&&!r.label,("top"===r.iconPos||"bottom"===r.iconPos)&&r.label,r.disabled||r.loading,r.loading,r.loading&&!r.icon&&r.label)),p.uIk("type",r.type)("aria-label",r.ariaLabel),p.xp6(2),p.Q6J("ngTemplateOutlet",r.contentTemplate),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate&&(r.icon||r.loading)),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate&&r.label),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate&&r.badge))},dependencies:[ln,Ln,As,No,Sd],encapsulation:2,changeDetection:0}),n})(),OS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Vo,ii]}),n})();function ME(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"span")(1,"p-messages",8),p.NdJ("valueChange",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.msgsWarn=i)}),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(1),p.Q6J("value",t.msgsWarn)}}let zy=(()=>{class n{constructor(t,r){this.route=t,this.loginSerice=r,this.error=!1,this.msgs=[],this.msgsWarn=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{1==t.error?(this.error=!0,this.msgsWarn=[q0.warnLogin]):this.error=!1})}loginGoogle(){this.loginSerice.googleLogin().then()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Mu),p.Y36(Dd))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","align-items-center"],[1,"padding-login","grid","justify-content-center"],[1,"login-box","login","col-6","justify-content-center"],["src","assets/OrelhaSeca.png",1,"login-logo"],[1,"text-center"],[4,"ngIf"],[3,"value","valueChange"],[1,"login-button"],["type","button","label","Google",1,"",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),p._UZ(5,"img",5),p.TgZ(6,"div",6),p.YNc(7,ME,2,1,"span",7),p.TgZ(8,"p-messages",8),p.NdJ("valueChange",function(a){return r.msgs=a}),p.qZA()(),p.TgZ(9,"div",9)(10,"p-button",10),p.NdJ("click",function(){return r.loginGoogle()}),p.qZA()()()()()()()),2&t&&(p.xp6(7),p.Q6J("ngIf",r.error),p.xp6(1),p.Q6J("value",r.msgs))},dependencies:[Ln,TE,Gy],styles:[".login-box[_ngcontent-%COMP%]{width:100%;height:100%;max-width:500px;text-align:center}.login[_ngcontent-%COMP%]{background:rgb(255,255,255);justify-content:center;align-items:center;border-left-color:#010c29;border-right-color:#010c29;border-bottom-color:#010c29;border-top-color:#010c29;border-style:solid;border-radius:5px;border-width:2px}.login-logo[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:20px;width:90%;max-width:400px}.padding-login[_ngcontent-%COMP%]{padding-top:100px;align-items:center;align-content:center;align-self:center}.text-center[_ngcontent-%COMP%]{text-align:center}.login-button[_ngcontent-%COMP%]{text-align:center;padding-top:1em;padding-bottom:2em}.login-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em}.menu-container[_ngcontent-%COMP%]{background-color:#fff;max-width:1900px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:1810px;padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;min-height:100%}"]}),n})();const LS=["*"];let Ou=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-template"]],ngContentSelectors:LS,decls:8,vars:0,consts:[[1,"navbar"],["icon","pi pi-home","routerLink","/home",1,"menu-item"],["icon","pi pi-search","routerLink","/search",1,"menu-item"],["icon","pi pi-plus","routerLink","/novo",1,"menu-item"],["icon","pi pi-bell","routerLink","/notific",1,"menu-item"],["icon","pi pi-user","routerLink","/config",1,"menu-item"],[1,"content"]],template:function(t,r){1&t&&(p.F$t(),p.TgZ(0,"div",0),p._UZ(1,"p-button",1)(2,"p-button",2)(3,"p-button",3)(4,"p-button",4)(5,"p-button",5),p.qZA(),p.TgZ(6,"div",6),p.Hsn(7),p.qZA())},dependencies:[pd,Gy],styles:[".navbar[_ngcontent-%COMP%]{overflow:hidden;background-color:#333;position:fixed;bottom:0;width:100%;text-align:center;padding-top:.5em;padding-bottom:.5em;justify-content:space-evenly;display:flex;z-index:999}.content[_ngcontent-%COMP%]{margin-bottom:30px}.menu-item[_ngcontent-%COMP%]{padding-left:.2em;padding-right:.2em}"]}),n})();function Jg(n,e){1&n&&p.GkF(0)}function qy(n,e){if(1&n&&(p.TgZ(0,"div",8),p.Hsn(1,1),p.YNc(2,Jg,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(2),p.Q6J("ngTemplateOutlet",t.headerTemplate)}}function FS(n,e){1&n&&p.GkF(0)}function Xg(n,e){if(1&n&&(p.TgZ(0,"div",9),p._uU(1),p.YNc(2,FS,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.hij(" ",t.header," "),p.xp6(1),p.Q6J("ngTemplateOutlet",t.titleTemplate)}}function em(n,e){1&n&&p.GkF(0)}function Ky(n,e){if(1&n&&(p.TgZ(0,"div",10),p._uU(1),p.YNc(2,em,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.hij(" ",t.subheader," "),p.xp6(1),p.Q6J("ngTemplateOutlet",t.subtitleTemplate)}}function kE(n,e){1&n&&p.GkF(0)}function Zy(n,e){1&n&&p.GkF(0)}function OE(n,e){if(1&n&&(p.TgZ(0,"div",11),p.Hsn(1,2),p.YNc(2,Zy,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(2),p.Q6J("ngTemplateOutlet",t.footerTemplate)}}const LE=["*",[["p-header"]],[["p-footer"]]],Yy=["*","p-header","p-footer"];let FE=(()=>{class n{constructor(t){this.el=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"title":this.titleTemplate=t.template;break;case"subtitle":this.subtitleTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq))},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-card"]],contentQueries:function(t,r,i){if(1&t&&(p.Suo(i,jl,5),p.Suo(i,pN,5),p.Suo(i,ku,4)),2&t){let a;p.iGM(a=p.CRH())&&(r.headerFacet=a.first),p.iGM(a=p.CRH())&&(r.footerFacet=a.first),p.iGM(a=p.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:Yy,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(t,r){1&t&&(p.F$t(LE),p.TgZ(0,"div",0),p.YNc(1,qy,3,1,"div",1),p.TgZ(2,"div",2),p.YNc(3,Xg,3,2,"div",3),p.YNc(4,Ky,3,2,"div",4),p.TgZ(5,"div",5),p.Hsn(6),p.YNc(7,kE,1,0,"ng-container",6),p.qZA(),p.YNc(8,OE,3,1,"div",7),p.qZA()()),2&t&&(p.Tol(r.styleClass),p.Q6J("ngClass","p-card p-component")("ngStyle",r.style),p.xp6(1),p.Q6J("ngIf",r.headerFacet||r.headerTemplate),p.xp6(2),p.Q6J("ngIf",r.header||r.titleTemplate),p.xp6(1),p.Q6J("ngIf",r.subheader||r.subtitleTemplate),p.xp6(3),p.Q6J("ngTemplateOutlet",r.contentTemplate),p.xp6(1),p.Q6J("ngIf",r.footerFacet||r.footerTemplate))},dependencies:[ln,Ln,As,No],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),US=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Vo,NS]}),n})();function UE(n,e){1&n&&(p.TgZ(0,"div",5)(1,"div"),p._UZ(2,"img",6),p.qZA(),p.TgZ(3,"div",7),p._uU(4," Caesar Zama Altran "),p.qZA()())}let VE=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-feed-card"]],decls:6,vars:0,consts:[["pTemplate","header"],["src","assets/video01.mp4","controls","",2,"max-width","100%"],[1,"pi","pi-heart","post-actions",2,"font-size","1.5rem","padding-left",".8em"],[1,"pi","pi-share-alt","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[1,"pi","pi-comments","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[1,"flex","content-card-header","align-content-center"],["src","assets/cza-profile.png",1,"profile-img"],[1,"align-content-center",2,"padding-top",".28em","font-weight","bold"]],template:function(t,r){1&t&&(p.TgZ(0,"p-card"),p.YNc(1,UE,5,0,"ng-template",0),p._UZ(2,"video",1)(3,"i",2)(4,"i",3)(5,"i",4),p.qZA())},dependencies:[FE,ku],styles:[".content-card-header[_ngcontent-%COMP%]{padding-top:.5em;padding-left:.5em;padding-bottom:.2em}.post-actions[_ngcontent-%COMP%]{padding:.2em}"]}),n})(),BE=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"app-template"),p._UZ(1,"app-feed-card")(2,"app-feed-card")(3,"app-feed-card")(4,"app-feed-card")(5,"app-feed-card"),p.qZA())},dependencies:[Ou,VE]}),n})(),Fd=(()=>{class n{constructor(t){this.router=t}canActivate(t,r){return localStorage,console.log(localStorage[Dd.tokenKey]),null==localStorage[Dd.tokenKey]?(this.router.navigate(["/login"]),!1):"null"!=localStorage[Dd.tokenKey]||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(br))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qy=[{path:"login",component:zy},{path:"home",component:BE,canActivate:[Fd]},{path:"search",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-search-view"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"search-view works!"),p.qZA()())},dependencies:[Ou]}),n})(),canActivate:[Fd]},{path:"novo",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-new-content-view"]],decls:4,vars:0,consts:[["type","file","accept","video/*","capture",""]],template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"new-content-view works!"),p.qZA(),p._UZ(3,"input",0),p.qZA())},dependencies:[Ou]}),n})(),canActivate:[Fd]},{path:"notific",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-notification-view"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"notification-view works!"),p.qZA()())},dependencies:[Ou]}),n})(),canActivate:[Fd]},{path:"config",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-config-view"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"config-view works!"),p.qZA()())},dependencies:[Ou]}),n})(),canActivate:[Fd]},{path:"",redirectTo:"/home",pathMatch:"full"}];let jE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[W0.forRoot(Qy,{useHash:!0}),W0]}),n})(),HE=(()=>{class n{constructor(){this.title="hacka-sicredi"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[Ll]}),n})();const Jy_firebaseConfig={apiKey:"AIzaSyBNnuRVZ0vTs6I6iR_0gMMYWRoeD4HDl4k",authDomain:"hackasic.firebaseapp.com",projectId:"hackasic",storageBucket:"hackasic.appspot.com",messagingSenderId:"807324039482",appId:"1:807324039482:web:cf01e5d1b2a95f48e73803",measurementId:"G-DY0F90L8QH"};var tm=F(4986);function Xy(n,e=ho.y){return n=n??$E,(0,Jn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Wn.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function $E(n,e){return n===e}var WE=F(5032);F(5881);var ev=F(3942);const tv="@firebase/database",zE="0.13.10";let yr="";function nv(n){yr=n}class HS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $S{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const rv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new HS(e)}}catch{}return new $S},$l=rv("localStorage"),nm=rv("sessionStorage"),Wl=new wo.Yd("@firebase/database"),Gl=function(){let n=1;return function(){return n++}}(),qE=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Sf=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Sf.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let Lu=null,KE=!0;const iv=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Wl.logLevel=wo.in.VERBOSE,Lu=Wl.log.bind(Wl),e&&nm.set("logging_enabled",!0)):"function"==typeof n?Lu=n:(Lu=null,nm.remove("logging_enabled"))},si=function(...n){if(!0===KE&&(KE=!1,null===Lu&&!0===nm.get("logging_enabled")&&iv(!0)),Lu){const e=Sf.apply(null,n);Lu(e)}},Ud=function(n){return function(...e){si(n,...e)}},rm=function(...n){const e="FIREBASE INTERNAL ERROR: "+Sf(...n);Wl.error(e)},Or=function(...n){const e=`FIREBASE FATAL ERROR: ${Sf(...n)}`;throw Wl.error(e),new Error(e)},vi=function(...n){const e="FIREBASE WARNING: "+Sf(...n);Wl.warn(e)},ys=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Lr="[MIN_NAME]",Co="[MAX_NAME]",Fu=function(n,e){if(n===e)return 0;if(n===Lr||e===Co)return-1;if(e===Lr||n===Co)return 1;{const t=im(n),r=im(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},WS=function(n,e){return n===e?0:n<e?-1:1},Af=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},sv=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=sv(n[e[r]]);return t+="}",t},YE=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Dr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Vd=function(n){(0,L.hu)(!ys(n),"Invalid JSON number");const r=1023;let i,a,l,d,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let S="";for(m=0;m<64;m+=8){let P=parseInt(b.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},JE=new RegExp("^-?(0*)\\d{1,10}$"),ov=-2147483648,Bd=2147483647,im=function(n){if(JE.test(n)){const e=Number(n);if(e>=ov&&e<=Bd)return e}return null},zl=function(n){try{n()}catch(e){setTimeout(()=>{throw vi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ql=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class sm{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class eC{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(si("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vi(e)}}let jd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const dv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rC="websocket",iC="long_polling";class fv{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$l.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$l.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function sC(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===rC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==iC)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function qS(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Dr(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class KS{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const pv={},gv={};function mv(n){const e=n.toString();return pv[e]||(pv[e]=new KS),pv[e]}class YS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&zl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Uu{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ud(e),this.stats_=mv(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),sC(t,iC,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new YS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vu((...a)=>{const[l,d,m,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&dv.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uu.forceAllow_=!0}static forceDisallow(){Uu.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Uu.forceAllow_&&(Uu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=YE(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Vu{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Gl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Vu.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){si("frame writing exception"),d.stack&&si(d.stack),si(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||si("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{si("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Cv=null;typeof MozWebSocket<"u"?Cv=MozWebSocket:typeof WebSocket<"u"&&(Cv=WebSocket);let Zl=(()=>{class n{constructor(t,r,i,a,l,d,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ud(this.connId),this.stats_=mv(r),this.connURL=n.connectionURL_(r,d,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&dv.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),sC(t,rC,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$l.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${yr}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new Cv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Cv&&!n.forceDisallow_}static previouslyFailed(){return $l.isInMemoryStorage||!0===$l.get("previous_websocket_failure")}markConnectionHealthy(){$l.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=YE(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Tv=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Uu,Zl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Zl&&Zl.isAvailable();let i=r&&!Zl.previouslyFailed();if(t.webSocketOnly&&(r||vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Zl];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Av{constructor(e,t,r,i,a,l,d,m,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ud("c:"+this.id+":"),this.transportManager_=new Tv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ql(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Af("t",e),r=Af("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Af("t",e),r=Af("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Af("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?rm("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ql(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ql(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class xv{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Rv{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Pf extends Rv{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Pf}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class En{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function un(){return new En("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Bu(n){return n.pieces_.length-n.pieceNum_}function Mn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new En(n.pieces_,e)}function Hd(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function $d(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Pv(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new En(e,0)}function Xn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof En)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new En(t,0)}function $t(n){return n.pieceNum_>=n.pieces_.length}function Fr(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return Fr(Mn(n),Mn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function oA(n,e){const t=$d(n,0),r=$d(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Fu(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Mv(n,e){if(Bu(n)!==Bu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Hs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Bu(n)>Bu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class mC{constructor(e,t){this.errorPrefix_=t,this.parts_=$d(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);vC(this)}}function vC(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ju(n))}function ju(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Nv extends Rv{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Nv}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Mf=1e3;let Hu,Ql=(()=>{class n extends xv{constructor(t,r,i,a,l,d,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Ud("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nv.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Pf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const m=d.d;"ok"===d.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,b=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):rm("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Mf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let m=!1,v=null;const b=function(){v?v.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(V){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,G]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?si("getToken() completed but was canceled"):(si("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=G&&G.token,v=new Av(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{vi(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&vi(V),b())}}})()}interrupt(t){si("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){si("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>sv(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new En(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){si("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){si("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+yr.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Pf.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class tn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tn(e,t)}}class kf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tn(Lr,e),i=new tn(Lr,t);return 0!==this.compare(r,i)}minPost(){return tn.MIN}}class IC extends kf{static get __EMPTY_NODE(){return Hu}static set __EMPTY_NODE(e){Hu=e}compare(e,t){return Fu(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tn.MIN}maxPost(){return new tn(Co,Hu)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new tn(e,Hu)}toString(){return".key"}}const Ea=new IC;class am{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Jl,To=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Pi.EMPTY_NODE,this.right=l??Pi.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Pi.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Pi{constructor(e,t=Pi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Pi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,To.BLACK,null,null))}remove(e){return new Pi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,To.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new am(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new am(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new am(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new am(this.root_,null,this.comparator_,!0,e)}}function lA(n,e){return Fu(n.name,e.name)}function kv(n,e){return Fu(n,e)}Pi.EMPTY_NODE=new class uA{copy(e,t,r,i,a){return this}insert(e,t,r){return new To(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ov=function(n){return"number"==typeof n?"number:"+Vd(n):"string:"+n},EC=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===Jl||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===Jl||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Lv,Fv,CC,Wd=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),EC(this.priorityNode_)}static set __childrenNodeConstructor(t){Lv=t}static get __childrenNodeConstructor(){return Lv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $t(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===Bu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ov(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Vd(this.value_):this.value_,this.lazyHash_=qE(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Nn=new class TC extends kf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Fu(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tn.MIN}maxPost(){return new tn(Co,new Wd("[PRIORITY-POST]",CC))}makePost(e,t){const r=Fv(e);return new tn(t,new Wd("[PRIORITY-POST]",r))}toString(){return".priority"}},hA=Math.log(2);class fA{constructor(e){this.count=parseInt(Math.log(e+1)/hA,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const um=function(n,e,t,r){n.sort(e);const i=function(m,v){const b=v-m;let S,P;if(0===b)return null;if(1===b)return S=n[m],P=t?t(S):S,new To(P,S.node,To.BLACK,null,null);{const V=parseInt(b/2,10)+m,G=i(m,V),ce=i(V+1,v);return S=n[V],P=t?t(S):S,new To(P,S.node,To.BLACK,G,ce)}},d=function(m){let v=null,b=null,S=n.length;const P=function(G,ce){const ye=S-G,ot=S;S-=G;const dt=i(ye+1,ot),ut=n[ye],ft=t?t(ut):ut;V(new To(ft,ut.node,ce,null,dt))},V=function(G){v?(v.left=G,v=G):(b=G,v=G)};for(let G=0;G<m.count;++G){const ce=m.nextBitIsOne(),ye=Math.pow(2,m.count-(G+1));ce?P(ye,To.BLACK):(P(ye,To.BLACK),P(ye,To.RED))}return b}(new fA(n.length));return new Pi(r||e,d)};let Of;const Gd={};class Ca{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(Gd&&Nn,"ChildrenNode.ts has not been loaded"),Of=Of||new Ca({".priority":Gd},{".priority":Nn}),Of}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Pi?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Ea,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(tn.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?um(r,e.getCompare()):Gd;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const b=Object.assign({},this.indexes_);return b[m]=d,new Ca(b,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const l=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(l,"Missing index implementation for "+a),i===Gd){if(l.isDefinedOn(e.node)){const d=[],m=t.getIterator(tn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&d.push(v),v=m.getNext();return d.push(e),um(d,l.getCompare())}return Gd}{const d=t.get(e.name);let m=i;return d&&(m=m.remove(new tn(e.name,d))),m.insert(e,e.node)}});return new Ca(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===Gd)return i;{const a=t.get(e.name);return a?i.remove(new tn(e.name,a)):i}});return new Ca(r,this.indexSet_)}}let Lf,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EC(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Lf||(Lf=new n(new Pi(kv),null,Ca.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Lf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Lf:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(Mn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new tn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?Lf:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,L.hu)(".priority"!==en(t)||1===Bu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Mn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Nn,(d,m)=>{r[d]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const m in r)d[m]=r[m];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ov(this.getPriority().val())+":"),this.forEachChild(Nn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":qE(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new tn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new tn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new tn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,tn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,tn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ff?-1:0}withIndex(t){if(t===Ea||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ea||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Nn),a=r.getIterator(Nn);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ea?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ff=new class pA extends Wt{constructor(){super(new Pi(kv),Wt.EMPTY_NODE,Ca.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function ur(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Wd(n,ur(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return Dr(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=ur(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(ur(e))}{const t=[];let r=!1;if(Dr(n,(l,d)=>{if("."!==l.substring(0,1)){const m=ur(d);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new tn(l,m)))}}),0===t.length)return Wt.EMPTY_NODE;const a=um(t,lA,l=>l.name,kv);if(r){const l=um(t,Nn.getCompare());return new Wt(a,ur(e),new Ca({".priority":l},{".priority":Nn}))}return new Wt(a,ur(e),Ca.Default)}}Object.defineProperties(tn,{MIN:{value:new tn(Lr,Wt.EMPTY_NODE)},MAX:{value:new tn(Co,Ff)}}),IC.__EMPTY_NODE=Wt.EMPTY_NODE,Wd.__childrenNodeConstructor=Wt,function cA(n){Jl=n}(Ff),function dA(n){CC=n}(Ff),function Uv(n){Fv=n}(ur);class Vv extends kf{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!$t(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Fu(e.name,t.name):a}makePost(e,t){const r=ur(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new tn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,Ff);return new tn(Co,e)}toString(){return $d(this.indexPath_,0).join("/")}}const lm=new class mA extends kf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Fu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tn.MIN}maxPost(){return tn.MAX}makePost(e,t){const r=ur(e);return new tn(t,r)}toString(){return".value"}},Xl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_A=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Xl.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Xl.charAt(e[i]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),DC=function(n){if(n===""+Bd)return"-";const e=im(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Co;const a=Xl.charAt(Xl.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},SC=function(n){if(n===""+ov)return Lr;const e=im(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Bd:(delete t[t.length-1],t.join("")):(t[t.length-1]=Xl.charAt(Xl.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function cm(n){return{type:"value",snapshotNode:n}}function $u(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function zd(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ec(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Hv{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(zd(t,d)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange($u(t,r)):l.trackChildChange(ec(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Nn,(i,a)=>{t.hasChild(i)||r.trackChildChange(zd(i,a))}),t.isLeafNode()||t.forEachChild(Nn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(ec(i,a,l))}else r.trackChildChange($u(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class tc{constructor(e){this.indexedFilter_=new Hv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tc.getStartPost_(e),this.endPost_=tc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new tn(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(Nn,(l,d)=>{a.matches(new tn(l,d))||(i=i.updateImmediateChild(l,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class vA{constructor(e){this.rangedFilter_=new tc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new tn(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let a,l,d,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();d=(P,V)=>S(V,P)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let v=0,b=!1;for(;m.hasNext();){const S=m.getNext();!b&&d(a,S)<=0&&(b=!0),b&&v<this.limit_&&d(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,V)=>S(V,P)}else l=this.index_.getCompare();const d=e;(0,L.hu)(d.numChildren()===this.limit_,"");const m=new tn(t,r),v=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(d.hasChild(t)){const S=d.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||d.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:l(P,m);if(b&&!r.isEmpty()&&V>=0)return a?.trackChildChange(ec(t,r,S)),d.updateImmediateChild(t,r);{a?.trackChildChange(zd(t,S));const ce=d.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange($u(P.name,P.node)),ce.updateImmediateChild(P.name,P.node)):ce}}return r.isEmpty()?e:b&&l(v,m)>=0?(null!=a&&(a.trackChildChange(zd(v.name,v.node)),a.trackChildChange($u(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(v.name,Wt.EMPTY_NODE)):e}}class dm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Co}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nn}copy(){const e=new dm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xC(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Uf(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Kd(n,e){const t=n.copy();return t.index_=e,t}function PC(n){const e={};if(n.isDefault())return e;let t;return n.index_===Nn?t="$priority":n.index_===lm?t="$value":n.index_===Ea?t="$key":((0,L.hu)(n.index_ instanceof Vv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function $v(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Nn&&(e.i=n.index_.toString()),e}class Zd extends xv{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ud("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Zd.getListenId_(e,r),d={};this.listens_[l]=d;const m=PC(e._queryParams);this.restRequest_(a+".json",m,(v,b)=>{let S=b;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,l)===d){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=Zd.getListenId_(e,t);delete this.listens_[r]}get(e){const t=PC(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let m=null;if(d.status>=200&&d.status<300){try{m=(0,L.cI)(d.responseText)}catch{vi("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,m)}else 401!==d.status&&404!==d.status&&vi("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class MC{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Vf(){return{value:null,children:new Map}}function nc(n,e,t){if($t(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,Vf()),nc(n.children.get(r),e=Mn(e),t)}}function hm(n,e){if($t(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Nn,(r,i)=>{nc(n,new En(r),i)}),hm(n,e)}}if(n.children.size>0){const t=en(e);return e=Mn(e),n.children.has(t)&&hm(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Wv(n,e,t){null!==n.value?t(e,n.value):function EA(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Wv(i,new En(e.toString()+"/"+r),t)})}class CA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Dr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class OC{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new CA(e);const r=1e4+2e4*Math.random();ql(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Dr(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),ql(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $s=(()=>{return(n=$s||($s={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",$s;var n})();function FC(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class fm{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=$s.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($t(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new En(e));return new fm(un(),t,this.revert)}}return(0,L.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new fm(Mn(this.path),this.affectedTree,this.revert)}}class Bf{constructor(e,t){this.source=e,this.path=t,this.type=$s.LISTEN_COMPLETE}operationForChild(e){return $t(this.path)?new Bf(this.source,un()):new Bf(this.source,Mn(this.path))}}class rc{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=$s.OVERWRITE}operationForChild(e){return $t(this.path)?new rc(this.source,un(),this.snap.getImmediateChild(e)):new rc(this.source,Mn(this.path),this.snap)}}class ic{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=$s.MERGE}operationForChild(e){if($t(this.path)){const t=this.children.subtree(new En(e));return t.isEmpty()?null:t.value?new rc(this.source,un(),t.value):new ic(this.source,un(),t)}return(0,L.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ic(this.source,Mn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ou{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($t(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class TA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Yd(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,m)=>function DA(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new tn(e.childName,e.snapshotNode),i=new tn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,m)),l.forEach(d=>{const m=function bA(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(v=>{v.respondsTo(d.type)&&e.push(v.createEvent(m,n.query_))})})}function pm(n,e){return{eventCache:n,serverCache:e}}function jf(n,e,t,r){return pm(new ou(e,t,r),n.serverCache)}function Qd(n,e,t,r){return pm(n.eventCache,new ou(e,t,r))}function Hf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let gm;class kn{constructor(e,t=(()=>(gm||(gm=new Pi(WS)),gm))()){this.value=e,this.children=t}static fromObject(e){let t=new kn(null);return Dr(e,(r,i)=>{t=t.set(new En(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:un(),value:this.value};if($t(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Mn(e),t);return null!=a?{path:Xn(new En(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($t(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(Mn(e)):new kn(null)}}set(e,t){if($t(e))return new kn(t,this.children);{const r=en(e),a=(this.children.get(r)||new kn(null)).set(Mn(e),t),l=this.children.insert(r,a);return new kn(this.value,l)}}remove(e){if($t(e))return this.children.isEmpty()?new kn(null):new kn(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(Mn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new kn(null):new kn(this.value,a)}return this}}get(e){if($t(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(Mn(e)):null}}setTree(e,t){if($t(e))return t;{const r=en(e),a=(this.children.get(r)||new kn(null)).setTree(Mn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new kn(this.value,l)}}fold(e){return this.fold_(un(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Xn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,un(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if($t(e))return null;{const a=en(e),l=this.children.get(a);return l?l.findOnPath_(Mn(e),Xn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,un(),t)}foreachOnPath_(e,t,r){if($t(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_(Mn(e),Xn(t,i),r):new kn(null)}}foreach(e){this.foreach_(un(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Xn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class bo{constructor(e){this.writeTree_=e}static empty(){return new bo(new kn(null))}}function $f(n,e,t){if($t(e))return new bo(new kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Fr(i,e);return a=a.updateChild(l,t),new bo(n.writeTree_.set(i,a))}{const i=new kn(t),a=n.writeTree_.setTree(e,i);return new bo(a)}}}function BC(n,e,t){let r=n;return Dr(t,(i,a)=>{r=$f(r,Xn(e,i),a)}),r}function jC(n,e){if($t(e))return bo.empty();{const t=n.writeTree_.setTree(e,new kn(null));return new bo(t)}}function zv(n,e){return null!=sc(n,e)}function sc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Fr(t.path,e)):null}function HC(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nn,(r,i)=>{e.push(new tn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new tn(r,i.value))}),e}function Gu(n,e){if($t(e))return n;{const t=sc(n,e);return new bo(null!=t?new kn(t):n.writeTree_.subtree(e))}}function oc(n){return n.writeTree_.isEmpty()}function Jd(n,e){return mm(un(),n.writeTree_,e)}function mm(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=mm(Xn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Xn(n,".priority"),r)),t}}function vs(n,e){return ZC(e,n)}function xA(n,e){if(n.snap)return Hs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Hs(Xn(n.path,t),e))return!0;return!1}function _m(n){return n.visible}function Gf(n,e,t){let r=bo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)Hs(t,l)?(d=Fr(t,l),r=$f(r,d,a.snap)):Hs(l,t)&&(d=Fr(l,t),r=$f(r,un(),a.snap.getChild(d)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Hs(t,l))d=Fr(t,l),r=BC(r,d,a.children);else if(Hs(l,t))if(d=Fr(l,t),$t(d))r=BC(r,un(),a.children);else{const m=(0,L.DV)(a.children,en(d));if(m){const v=m.getChild(Mn(d));r=$f(r,un(),v)}}}}}return r}function $C(n,e,t,r,i){if(r||i){const a=Gu(n.visibleWrites,e);return!i&&oc(a)?t:i||null!=t||zv(a,un())?Jd(Gf(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Hs(v.path,e)||Hs(e,v.path))},e),t||Wt.EMPTY_NODE):null}{const a=sc(n.visibleWrites,e);if(null!=a)return a;{const l=Gu(n.visibleWrites,e);return oc(l)?t:null!=t||zv(l,un())?Jd(l,t||Wt.EMPTY_NODE):null}}}function ym(n,e,t,r){return $C(n.writeTree,n.treePath,e,t,r)}function qC(n,e){return function PA(n,e,t){let r=Wt.EMPTY_NODE;const i=sc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Nn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Gu(n.visibleWrites,e);return t.forEachChild(Nn,(l,d)=>{const m=Jd(Gu(a,new En(l)),d);r=r.updateImmediateChild(l,m)}),HC(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return HC(Gu(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function vm(n,e,t,r){return function WC(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Xn(e,t);if(zv(n.visibleWrites,a))return null;{const l=Gu(n.visibleWrites,a);return oc(l)?i.getChild(t):Jd(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Xd(n,e){return function Kv(n,e){return sc(n.visibleWrites,e)}(n.writeTree,Xn(n.treePath,e))}function zf(n,e,t){return function GC(n,e,t,r){const i=Xn(e,t),a=sc(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Jd(Gu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function wm(n,e){return ZC(Xn(n.treePath,e),n.writeTree)}function ZC(n,e){return{treePath:n,writeTree:e}}class NA{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,ec(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,zd(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,$u(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ec(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const YC=new class kA{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Im{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ou(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zf(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wu(this.viewCache_),a=function KC(n,e,t,r,i,a){return function zC(n,e,t,r,i,a,l){let d;const m=Gu(n.visibleWrites,e),v=sc(m,un());if(null!=v)d=v;else{if(null==t)return[];d=Jd(m,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const b=[],S=l.getCompare(),P=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let V=P.getNext();for(;V&&b.length<i;)0!==S(V,r)&&b.push(V),V=P.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Yv(n,e,t,r,i,a){const l=e.eventCache;if(null!=Xd(r,t))return e;{let d,m;if($t(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Wu(e),S=qC(r,v instanceof Wt?v:Wt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=ym(r,Wu(e));d=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=en(t);if(".priority"===v){(0,L.hu)(1===Bu(t),"Can't have a priority with additional path components");const b=l.getNode();m=e.serverCache.getNode();const S=vm(r,t,b,m);d=null!=S?n.filter.updatePriority(b,S):l.getNode()}else{const b=Mn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const P=vm(r,t,l.getNode(),m);S=null!=P?l.getNode().getImmediateChild(v).updateChild(b,P):l.getNode().getImmediateChild(v)}else S=zf(r,v,e.serverCache);d=null!=S?n.filter.updateChild(l.getNode(),v,S,b,i,a):l.getNode()}}return jf(e,d,l.isFullyInitialized()||$t(t),n.filter.filtersNodes())}}function Em(n,e,t,r,i,a,l,d){const m=e.serverCache;let v;const b=l?n.filter:n.filter.getIndexedFilter();if($t(t))v=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);v=b.updateFullNode(m.getNode(),V,null)}else{const V=en(t);if(!m.isCompleteForPath(t)&&Bu(t)>1)return e;const G=Mn(t),ye=m.getNode().getImmediateChild(V).updateChild(G,r);v=".priority"===V?b.updatePriority(m.getNode(),ye):b.updateChild(m.getNode(),V,ye,G,YC,null)}const S=Qd(e,v,m.isFullyInitialized()||$t(t),b.filtersNodes());return Yv(n,S,t,i,new Im(i,S,a),d)}function Cm(n,e,t,r,i,a,l){const d=e.eventCache;let m,v;const b=new Im(i,e,a);if($t(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=jf(e,v,!0,n.filter.filtersNodes());else{const S=en(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=jf(e,v,d.isFullyInitialized(),d.isFiltered());else{const P=Mn(t),V=d.getNode().getImmediateChild(S);let G;if($t(P))G=r;else{const ce=b.getCompleteChild(S);G=null!=ce?".priority"===Hd(P)&&ce.getChild(Pv(P)).isEmpty()?ce:ce.updateChild(P,r):Wt.EMPTY_NODE}m=V.equals(G)?e:jf(e,n.filter.updateChild(d.getNode(),S,G,P,b,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Qv(n,e){return n.eventCache.isCompleteForChild(e)}function Jv(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Tm(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=$t(t)?r:new kn(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(b.hasChild(S)){const G=Jv(0,e.serverCache.getNode().getImmediateChild(S),P);m=Em(n,m,new En(S),G,i,a,l,d)}}),v.children.inorderTraversal((S,P)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!b.hasChild(S)&&!V){const ce=Jv(0,e.serverCache.getNode().getImmediateChild(S),P);m=Em(n,m,new En(S),ce,i,a,l,d)}}),m}class UA{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Hv(r.getIndex()),a=function qd(n){return n.loadsAllData()?new Hv(n.getIndex()):n.hasLimit()?new vA(n):new tc(n)}(r);this.processor_=function Zv(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,m=i.updateFullNode(Wt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Wt.EMPTY_NODE,d.getNode(),null),b=new ou(m,l.isFullyInitialized(),i.filtersNodes()),S=new ou(v,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=pm(S,b),this.eventGenerator_=new TA(this.query_)}get query(){return this.query_}}function XC(n,e){const t=Wu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$t(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function Xv(n){return 0===n.eventRegistrations_.length}function eT(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function bm(n,e,t,r){e.type===$s.MERGE&&null!==e.source.queryId&&((0,L.hu)(Wu(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(Hf(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function OA(n,e,t,r,i){const a=new NA;let l,d;if(t.type===$s.OVERWRITE){const v=t;v.source.fromUser?l=Cm(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered()&&!$t(v.path),l=Em(n,e,v.path,v.snap,r,i,d,a))}else if(t.type===$s.MERGE){const v=t;v.source.fromUser?l=function LA(n,e,t,r,i,a,l){let d=e;return r.foreach((m,v)=>{const b=Xn(t,m);Qv(e,en(b))&&(d=Cm(n,d,b,v,i,a,l))}),r.foreach((m,v)=>{const b=Xn(t,m);Qv(e,en(b))||(d=Cm(n,d,b,v,i,a,l))}),d}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered(),l=Tm(n,e,v.path,v.children,r,i,d,a))}else if(t.type===$s.ACK_USER_WRITE){const v=t;l=v.revert?function FA(n,e,t,r,i,a){let l;if(null!=Xd(r,t))return e;{const d=new Im(r,e,i),m=e.eventCache.getNode();let v;if($t(t)||".priority"===en(t)){let b;if(e.serverCache.isFullyInitialized())b=ym(r,Wu(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),b=qC(r,S)}v=n.filter.updateFullNode(m,b,a)}else{const b=en(t);let S=zf(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=m.getImmediateChild(b)),v=null!=S?n.filter.updateChild(m,b,S,Mn(t),d,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,Wt.EMPTY_NODE,Mn(t),d,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ym(r,Wu(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Xd(r,un()),jf(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Mi(n,e,t,r,i,a,l){if(null!=Xd(i,t))return e;const d=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if($t(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Em(n,e,t,m.getNode().getChild(t),i,a,d,l);if($t(t)){let v=new kn(null);return m.getNode().forEachChild(Ea,(b,S)=>{v=v.set(new En(b),S)}),Tm(n,e,t,v,i,a,d,l)}return e}{let v=new kn(null);return r.foreach((b,S)=>{const P=Xn(t,b);m.isCompleteForPath(P)&&(v=v.set(b,m.getNode().getChild(P)))}),Tm(n,e,t,v,i,a,d,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==$s.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);l=function eh(n,e,t,r,i){const a=e.serverCache;return Yv(n,Qd(e,a.getNode(),a.isFullyInitialized()||$t(t),a.isFiltered()),t,r,YC,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function JC(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Hf(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(cm(Hf(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function QC(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,ew(n,a.changes,a.viewCache.eventCache.getNode(),null)}function ew(n,e,t,r){return function UC(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function yA(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Yd(n,i,"child_removed",e,r,t),Yd(n,i,"child_added",e,r,t),Yd(n,i,"child_moved",a,r,t),Yd(n,i,"child_changed",e,r,t),Yd(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Dm,th;class tT{constructor(){this.views=new Map}}function Sm(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),bm(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(bm(l,e,t,r));return a}}function Kf(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=ym(t,i?r:null),m=!1;d?m=!0:r instanceof Wt?(d=qC(t,r),m=!1):(d=Wt.EMPTY_NODE,m=!1);const v=pm(new ou(d,m,!1),new ou(r,i,!1));return new UA(e,v)}return l}function rw(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zu(n,e){let t=null;for(const r of n.views.values())t=t||XC(r,e);return t}function iw(n,e){return e._queryParams.loadsAllData()?Zf(n):n.views.get(e._queryIdentifier)}function ac(n,e){return null!=iw(n,e)}function qu(n){return null!=Zf(n)}function Zf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let RN=1;class rT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kn(null),this.pendingWriteTree_=function MA(){return{visibleWrites:bo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sw(n,e,t,r,i){return function SA(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=$f(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?uc(n,new rc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function au(n,e,t=!1){const r=function Wf(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function AA(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&xA(d,r.path)?i=!1:Hs(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function RA(n){n.visibleWrites=Gf(n.allWrites,_m,un()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=jC(n.visibleWrites,r.path):Dr(r.children,m=>{n.visibleWrites=jC(n.visibleWrites,Xn(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new kn(null);return null!=r.snap?a=a.set(un(),!0):Dr(r.children,l=>{a=a.set(new En(l),!0)}),uc(n,new fm(r.path,a,t))}return[]}function nh(n,e,t){return uc(n,new rc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Am(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&("default"===e._queryIdentifier||ac(l,e))){const m=function AN(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=qu(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(eT(v,t,r)),Xv(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(eT(m,t,r)),Xv(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return d&&!qu(n)&&a.push(new(function tw(){return(0,L.hu)(Dm,"Reference.ts has not been loaded"),Dm}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function nT(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(d=m.events,!i){const b=-1!==v.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,V)=>qu(V));if(b&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const V=function PN(n){return n.fold((e,t,r)=>{if(t&&qu(t))return[Zf(t)];{let i=[];return t&&(i=rw(t)),Dr(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let G=0;G<V.length;++G){const ce=V[G],ye=ce.query,ot=cT(n,ce);n.listenProvider_.startListening(Rm(ye),xm(n,ye),ot.hashFn,ot.onComplete)}}}!S&&v.length>0&&!r&&(b?n.listenProvider_.stopListening(Rm(e),null):v.forEach(P=>{const V=n.queryToTagMap.get(Qf(P));n.listenProvider_.stopListening(Rm(P),V)}))}!function MN(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Qf(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return d}function oT(n,e,t,r){const i=dT(n,r);if(null!=i){const a=hT(i),l=a.path,d=a.queryId,m=Fr(l,e);return fT(n,l,new rc(FC(d),m,t))}return[]}function ow(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,V)=>{const G=Fr(P,i);a=a||zu(V,G),l=l||qu(V)});let m,d=n.syncPointTree_.get(i);d?(l=l||qu(d),a=a||zu(d,un())):(d=new tT,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?m=!0:(m=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,G)=>{const ce=zu(G,un());ce&&(a=a.updateImmediateChild(V,ce))}));const v=ac(d,e);if(!v&&!e._queryParams.loadsAllData()){const P=Qf(e);(0,L.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const V=function NN(){return RN++}();n.queryToTagMap.set(P,V),n.tagToQueryMap.set(V,P)}let S=function nw(n,e,t,r,i,a){const l=Kf(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function qf(n,e){n.eventRegistrations_.push(e)}(l,t),function VA(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Nn,(a,l)=>{r.push($u(a,l))}),t.isFullyInitialized()&&r.push(cm(t.getNode())),ew(n,r,t.getNode(),e)}(l,t)}(d,e,t,vs(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const P=iw(d,e);S=S.concat(function kN(n,e,t){const r=e._path,i=xm(n,e),a=cT(n,t),l=n.listenProvider_.startListening(Rm(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!qu(d.value),"If we're adding a query, it shouldn't be shadowed");else{const m=d.fold((v,b,S)=>{if(!$t(v)&&b&&qu(b))return[Zf(b).query];{let P=[];return b&&(P=P.concat(rw(b).map(V=>V.query))),Dr(S,(V,G)=>{P=P.concat(G)}),P}});for(let v=0;v<m.length;++v){const b=m[v];n.listenProvider_.stopListening(Rm(b),xm(n,b))}}return l}(n,e,P))}return S}function Yf(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const v=zu(d,Fr(l,e));if(v)return v});return $C(i,e,a,t,!0)}function uc(n,e){return aw(e,n.syncPointTree_,null,vs(n.pendingWriteTree_,un()))}function aw(n,e,t,r){if($t(n.path))return lT(n,e,t,r);{const i=e.get(un());null==t&&null!=i&&(t=zu(i,un()));let a=[];const l=en(n.path),d=n.operationForChild(l),m=e.children.get(l);if(m&&d){const v=t?t.getImmediateChild(l):null,b=wm(r,l);a=a.concat(aw(d,m,v,b))}return i&&(a=a.concat(Sm(i,n,r,t))),a}}function lT(n,e,t,r){const i=e.get(un());null==t&&null!=i&&(t=zu(i,un()));let a=[];return e.children.inorderTraversal((l,d)=>{const m=t?t.getImmediateChild(l):null,v=wm(r,l),b=n.operationForChild(l);b&&(a=a.concat(lT(b,d,m,v)))}),i&&(a=a.concat(Sm(i,n,r,t))),a}function cT(n,e){const t=e.query,r=xm(n,t);return{hashFn:()=>(function DN(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function sT(n,e,t){const r=dT(n,t);if(r){const i=hT(r),a=i.path,l=i.queryId,d=Fr(a,e);return fT(n,a,new Bf(FC(l),d))}return[]}(n,t._path,r):function iT(n,e){return uc(n,new Bf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function zS(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Am(n,t,null,a)}}}}function xm(n,e){const t=Qf(e);return n.queryToTagMap.get(t)}function Qf(n){return n._path.toString()+"$"+n._queryIdentifier}function dT(n,e){return n.tagToQueryMap.get(e)}function hT(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new En(n.substr(0,e))}}function fT(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),Sm(r,t,vs(n.pendingWriteTree_,e),null)}function Rm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function jA(){return(0,L.hu)(th,"Reference.ts has not been loaded"),th}())(n._repo,n._path):n}class rh{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new rh(t)}node(){return this.node_}}class pT{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Xn(this.path_,e);return new pT(this.syncTree_,t)}node(){return Yf(this.syncTree_,this.path_)}}const Jf=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?mT(n[".sv"],e,t):"object"==typeof n[".sv"]?_T(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},mT=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},_T=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},WA=function(n,e,t,r){return Pm(e,new pT(t,n),r)},Xf=function(n,e,t){return Pm(n,new rh(e),t)};function Pm(n,e,t){const r=n.getPriority().val(),i=Jf(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=Jf(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new Wd(d,ur(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Wd(i))),l.forEachChild(Nn,(d,m)=>{const v=Pm(m,e.getImmediateChild(d),t);v!==m&&(a=a.updateImmediateChild(d,v))}),a}}class uw{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ep(n,e){let t=e instanceof En?e:new En(e),r=n,i=en(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new uw(i,r,a),t=Mn(t),i=en(t)}return r}function ih(n){return n.node.value}function yT(n,e){n.node.value=e,IT(n)}function vT(n){return n.node.childCount>0}function lc(n,e){Dr(n.node.children,(t,r)=>{e(new uw(t,n,r))})}function wT(n,e,t,r){t&&!r&&e(n),lc(n,i=>{wT(i,e,!0,r)}),t&&r&&e(n)}function Mm(n){return new En(null===n.parent?n.name:Mm(n.parent)+"/"+n.name)}function IT(n){null!==n.parent&&function zA(n,e,t){const r=function GA(n){return void 0===ih(n)&&!vT(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,IT(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,IT(n))}(n.parent,n.name,n)}const qA=/[\[\].#$\/\u0000-\u001F\u007F]/,KA=/[\[\].#$\u0000-\u001F\u007F]/,ET=10485760,Nm=function(n){return"string"==typeof n&&0!==n.length&&!qA.test(n)},lw=function(n){return"string"==typeof n&&0!==n.length&&!KA.test(n)},km=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ys(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Sr=function(n,e,t,r){r&&void 0===e||tp((0,L.gK)(n,"value"),e,t)},tp=function(n,e,t){const r=t instanceof En?new mC(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ju(r));if("function"==typeof e)throw new Error(n+"contains a function "+ju(r)+" with contents = "+e.toString());if(ys(e))throw new Error(n+"contains "+e.toString()+" "+ju(r));if("string"==typeof e&&e.length>ET/3&&(0,L.ug)(e)>ET)throw new Error(n+"contains a string greater than "+ET+" utf8 bytes "+ju(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Dr(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Nm(l)))throw new Error(n+" contains an invalid key ("+l+") "+ju(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function _C(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),vC(n)})(r,l),tp(n,d,r),function yC(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+ju(r)+" in addition to actual children.")}},TT=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Dr(e,(l,d)=>{const m=new En(l);if(tp(i,d,Xn(t,m)),".priority"===Hd(m)&&!km(d))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=$d(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!Nm(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(oA);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Hs(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Qi=function(n,e,t){if(!t||void 0!==e){if(ys(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!km(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},np=function(n,e,t,r){if(!(r&&void 0===t||Nm(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cc=function(n,e,t,r){if(!(r&&void 0===t||lw(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ws=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},Om=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Nm(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lw(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rp(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Mv(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function DT(n,e,t){rp(n,t),dw(n,r=>Mv(r,e))}function Ji(n,e,t){rp(n,t),dw(n,r=>Hs(r,e)||Hs(e,r))}function dw(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(YA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function YA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Lu&&si("event: "+t.toString()),zl(r)}}}const hw="repo_interrupt";class fw{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vf(),this.transactionQueueTree_=new uw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pw(n){const t=n.infoData_.getNode(new En(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dc(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:pw(n)})}function Ta(n,e,t,r,i){n.dataUpdateCount++;const a=new En(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,L.UI)(t,v=>ur(v));l=function aT(n,e,t,r){const i=dT(n,r);if(i){const a=hT(i),l=a.path,d=a.queryId,m=Fr(l,e),v=kn.fromObject(t);return fT(n,l,new ic(FC(d),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=ur(t);l=oT(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,L.UI)(t,v=>ur(v));l=function $A(n,e,t){const r=kn.fromObject(t);return uc(n,new ic({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=ur(t);l=nh(n.serverSyncTree_,a,m)}let d=a;l.length>0&&(d=fc(n,a)),Ji(n.eventQueue_,d,l)}function ST(n,e){gw(n,"connected",e),!1===e&&function FN(n){hc(n,"onDisconnectEvents");const e=dc(n),t=Vf();Wv(n.onDisconnect_,un(),(i,a)=>{const l=WA(i,a,n.serverSyncTree_,e);nc(t,i,l)});let r=[];Wv(t,un(),(i,a)=>{r=r.concat(nh(n.serverSyncTree_,i,a));const l=Vm(n,i);fc(n,l)}),n.onDisconnect_=Vf(),Ji(n.eventQueue_,un(),r)}(n)}function gw(n,e,t){const r=new En("/.info/"+e),i=ur(t);n.infoData_.updateSnapshot(r,i);const a=nh(n.infoSyncTree_,r,i);Ji(n.eventQueue_,r,a)}function Lm(n){return n.nextWriteId_++}function mw(n,e,t,r,i){hc(n,"set",{path:e.toString(),value:t,priority:r});const a=dc(n),l=ur(t,r),d=Yf(n.serverSyncTree_,e),m=Xf(l,d,a),v=Lm(n),b=sw(n.serverSyncTree_,e,m,v,!0);rp(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(P,V)=>{const G="ok"===P;G||vi("set at "+e+" failed: "+P);const ce=au(n.serverSyncTree_,v,!G);Ji(n.eventQueue_,e,ce),uu(0,i,P,V)});const S=Vm(n,e);fc(n,S),Ji(n.eventQueue_,S,[])}function xT(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&hm(n.onDisconnect_,e),uu(0,t,r,i)})}function RT(n,e,t,r){const i=ur(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&nc(n.onDisconnect_,e,i),uu(0,r,a,l)})}function Fm(n,e,t){let r;r=".info"===en(e._path)?Am(n.infoSyncTree_,e,t):Am(n.serverSyncTree_,e,t),DT(n.eventQueue_,e._path,r)}function yw(n){n.persistentConnection_&&n.persistentConnection_.interrupt(hw)}function hc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),si(t,...e)}function uu(n,e,t,r){e&&zl(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function sh(n,e,t){return Yf(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function ip(n,e=n.transactionQueueTree_){if(e||vw(n,e),ih(e)){const t=OT(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function XA(n,e,t){const r=t.map(v=>v.currentWriteId),i=sh(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,L.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=Fr(e,b.path);a=a.updateChild(S,b.currentOutputSnapshotRaw)}const d=a.val(!0),m=e;n.server_.put(m.toString(),d,v=>{hc(n,"transaction put response",{path:m.toString(),status:v});let b=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,b=b.concat(au(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();vw(n,ep(n.transactionQueueTree_,e)),ip(n,n.transactionQueueTree_),Ji(n.eventQueue_,e,b);for(let P=0;P<S.length;P++)zl(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{vi("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}fc(n,e)}},l)}(n,Mm(e),t)}else vT(e)&&lc(e,t=>{ip(n,t)})}function fc(n,e){const t=kT(n,e),r=Mm(t);return function NT(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const m=e[d],v=Fr(t,m.path);let S,b=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,S=m.abortReason,i=i.concat(au(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)b=!0,S="maxretry",i=i.concat(au(n.serverSyncTree_,m.currentWriteId,!0));else{const P=sh(n,m.path,l);m.currentInputSnapshot=P;const V=e[d].update(P.val());if(void 0!==V){tp("transaction failed: Data returned ",V,m.path);let G=ur(V);"object"==typeof V&&null!=V&&(0,L.r3)(V,".priority")||(G=G.updatePriority(P.getPriority()));const ye=m.currentWriteId,ot=dc(n),dt=Xf(G,P,ot);m.currentOutputSnapshotRaw=G,m.currentOutputSnapshotResolved=dt,m.currentWriteId=Lm(n),l.splice(l.indexOf(ye),1),i=i.concat(sw(n.serverSyncTree_,m.path,dt,m.currentWriteId,m.applyLocally)),i=i.concat(au(n.serverSyncTree_,ye,!0))}else b=!0,S="nodata",i=i.concat(au(n.serverSyncTree_,m.currentWriteId,!0))}Ji(n.eventQueue_,t,i),i=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===S?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(S),!1,null)))}vw(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)zl(r[d]);ip(n,n.transactionQueueTree_)}(n,OT(n,t),r),r}function kT(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===ih(r);)r=ep(r,t),t=en(e=Mn(e));return r}function OT(n,e){const t=[];return ex(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ex(n,e,t){const r=ih(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lc(e,i=>{ex(n,i,t)})}function vw(n,e){const t=ih(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,yT(e,t.length>0?t:void 0)}lc(e,r=>{vw(n,r)})}function Vm(n,e){const t=Mm(kT(n,e)),r=ep(n.transactionQueueTree_,e);return function ON(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ww(n,i)}),ww(n,r),wT(r,i=>{ww(n,i)}),t}function ww(n,e){const t=ih(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,L.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,L.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(au(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?yT(e,void 0):t.length=a+1,Ji(n.eventQueue_,Mm(e),i);for(let l=0;l<r.length;l++)zl(r[l])}}const LT=function(n,e){const t=VN(n),r=t.namespace;return"firebase.com"===t.domain&&Or(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Or("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fv(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new En(t.pathString)}},VN=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(d=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function tx(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const P=function nx(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===d||"wss"===d,m=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class rx{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class ix{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class FT{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class UT{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return xT(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ws("OnDisconnect.remove",this._path);const e=new L.BH;return RT(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ws("OnDisconnect.set",this._path),Sr("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return RT(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ws("OnDisconnect.setWithPriority",this._path),Sr("OnDisconnect.setWithPriority",e,this._path,!1),Qi("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function PT(n,e,t,r,i){const a=ur(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,d)=>{"ok"===l&&nc(n.onDisconnect_,e,a),uu(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ws("OnDisconnect.update",this._path),TT("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function UN(n,e,t,r){if((0,L.xb)(t))return si("onDisconnect().update() called with empty data.  Don't do anything."),void uu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Dr(t,(l,d)=>{const m=ur(d);nc(n.onDisconnect_,Xn(e,l),m)}),uu(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class oi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return $t(this._path)?null:Hd(this._path)}get ref(){return new qr(this._repo,this._path)}get _queryIdentifier(){const e=$v(this._queryParams),t=sv(e);return"{}"===t?"default":t}get _queryObject(){return $v(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof oi))return!1;const t=this._repo===e._repo,r=Mv(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function gC(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Bm(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Zu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ea){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Lr)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Co)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Nn){if(null!=e&&!km(e)||null!=t&&!km(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof Vv||n.getIndex()===lm,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sp(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qr extends oi{constructor(e,t){super(e,t,new dm,!1)}get parent(){const e=Pv(this._path);return null===e?null:new qr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Yu{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new En(e),r=pc(this.ref,e);return new Yu(this._node.getChild(t),r,Nn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Yu(i,pc(this.ref,r),Nn)))}hasChild(e){const t=new En(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jm(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?pc(n._root,e):n._root}function Hm(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=LT(e,n._repo.repoInfo_.nodeAdmin);Om("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Or("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),jm(n,t.path.toString())}function pc(n,e){return null===en((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),cc("child","path",t,!1)):cc("child","path",e,!1),new qr(n._repo,Xn(n._path,e));var t}function BT(n,e){n=(0,L.m9)(n),Ws("set",n._path),Sr("set",e,n._path,!1);const t=new L.BH;return mw(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function HN(n,e){TT("update",e,n._path,!1);const t=new L.BH;return function AT(n,e,t,r){hc(n,"update",{path:e.toString(),value:t});let i=!0;const a=dc(n),l={};if(Dr(t,(d,m)=>{i=!1,l[d]=WA(Xn(e,d),ur(m),n.serverSyncTree_,a)}),i)si("update() called with empty data.  Don't do anything."),uu(0,r,"ok",void 0);else{const d=Lm(n),m=function HA(n,e,t,r){!function qv(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=BC(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=kn.fromObject(t);return uc(n,new ic({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);rp(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,b)=>{const S="ok"===v;S||vi("update at "+e+" failed: "+v);const P=au(n.serverSyncTree_,d,!S),V=P.length>0?fc(n,e):e;Ji(n.eventQueue_,V,P),uu(0,r,v,b)}),Dr(t,v=>{const b=Vm(n,Xn(e,v));fc(n,b)}),Ji(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function jT(n){n=(0,L.m9)(n);const e=new FT(()=>{}),t=new op(e);return function JA(n,e,t){const r=function uT(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,b)=>{const S=Fr(v,t);r=r||zu(b,S)});let i=n.syncPointTree_.get(t);i?r=r||zu(i,un()):(i=new tT,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new ou(r,!0,!1):null;return function SN(n){return Hf(n.viewCache_)}(Kf(i,e,vs(n.pendingWriteTree_,e._path),a?l.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=ur(i).withIndex(e._queryParams.getIndex());let l;if(ow(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=nh(n.serverSyncTree_,e._path,a);else{const d=xm(n.serverSyncTree_,e);l=oT(n.serverSyncTree_,e._path,a,d)}return Ji(n.eventQueue_,e._path,l),Am(n.serverSyncTree_,e,t,null,!0),a},i=>(hc(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Yu(r,new qr(n._repo,n._path),n._queryParams.getIndex()))}class op{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new rx("value",this,new Yu(e.snapshotNode,new qr(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ix(this,e,t):null}matches(e){return e instanceof op&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wm{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ix(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=pc(new qr(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new rx(e.type,this,new Yu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Wm&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ap(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(b,S)=>{Fm(n._repo,n,d),m(b,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new FT(t,a||void 0),d="value"===e?new op(l):new Wm(e,l);return function _w(n,e,t){let r;r=".info"===en(e._path)?ow(n.infoSyncTree_,e,t):ow(n.serverSyncTree_,e,t),DT(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>Fm(n._repo,n,d)}function Ew(n,e,t,r){return ap(n,"value",e,t,r)}function Cw(n,e,t,r){return ap(n,"child_added",e,t,r)}function Tw(n,e,t,r){return ap(n,"child_changed",e,t,r)}function bw(n,e,t,r){return ap(n,"child_moved",e,t,r)}function HT(n,e,t,r){return ap(n,"child_removed",e,t,r)}function $T(n,e,t){let r=null;const i=t?new FT(t):null;"value"===e?r=new op(i):e&&(r=new Wm(e,i)),Fm(n._repo,n,r)}class Gs{}class Gm extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sr("endAt",this._value,e._path,!0);const t=Uf(e._queryParams,this._value,this._key);if(sp(t),Zu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oi(e._repo,e._path,t,e._orderByCalled)}}class WT extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sr("endBefore",this._value,e._path,!1);const t=function IA(n,e,t){let r,i;return n.index_===Ea?("string"==typeof e&&(e=SC(e)),i=Uf(n,e,t)):(r=null==t?Lr:SC(t),i=Uf(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(sp(t),Zu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oi(e._repo,e._path,t,e._orderByCalled)}}class GT extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sr("startAt",this._value,e._path,!0);const t=xC(e._queryParams,this._value,this._key);if(sp(t),Zu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new oi(e._repo,e._path,t,e._orderByCalled)}}class WN extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Sr("startAfter",this._value,e._path,!1);const t=function RC(n,e,t){let r;if(n.index_===Ea)"string"==typeof e&&(e=DC(e)),r=xC(n,e,t);else{let i;i=null==t?Co:DC(t),r=xC(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(sp(t),Zu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new oi(e._repo,e._path,t,e._orderByCalled)}}class ox extends Gs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new oi(e._repo,e._path,function AC(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class ux extends Gs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new oi(e._repo,e._path,function wA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class qN extends Gs{constructor(e){super(),this._path=e}_apply(e){Bm(e,"orderByChild");const t=new En(this._path);if($t(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Vv(t),i=Kd(e._queryParams,r);return Zu(i),new oi(e._repo,e._path,i,!0)}}class ZN extends Gs{_apply(e){Bm(e,"orderByKey");const t=Kd(e._queryParams,Ea);return Zu(t),new oi(e._repo,e._path,t,!0)}}class lx extends Gs{_apply(e){Bm(e,"orderByPriority");const t=Kd(e._queryParams,Nn);return Zu(t),new oi(e._repo,e._path,t,!0)}}class JN extends Gs{_apply(e){Bm(e,"orderByValue");const t=Kd(e._queryParams,lm);return Zu(t),new oi(e._repo,e._path,t,!0)}}class ek extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Sr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gm(this._value,this._key)._apply(new GT(this._value,this._key)._apply(e))}}function ba(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function BA(n){(0,L.hu)(!Dm,"__referenceConstructor has already been defined"),Dm=n})(qr),function xN(n){(0,L.hu)(!th,"__referenceConstructor has already been defined"),th=n}(qr);const o={};function h(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Or("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),si("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=LT(a,i),d=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${d.namespace}`,l=LT(a,i),d=l.repoInfo):m=!l.repoInfo.secure;const b=i&&m?new jd(jd.OWNER):new eC(n.name,n.options,e);Om("Invalid Firebase Database URL",l),$t(l.path)||Or("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function y(n,e,t,r){let i=o[e.name];i||(i={},o[e.name]=i);let a=i[n.toURLString()];return a&&Or("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new fw(n,false,t,r),i[n.toURLString()]=a,a}(d,n,b,new sm(n.name,t));return new C(S,n)}class C{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ku(n,e,t){if(n.stats_=mv(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Zd(n.repoInfo_,(r,i,a,l)=>{Ta(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ST(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ql(n.repoInfo_,e,(r,i,a,l)=>{Ta(n,r,i,a,l)},r=>{ST(n,r)},r=>{!function LN(n,e){Dr(e,(t,r)=>{gw(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function ZS(n,e){const t=n.toString();return gv[t]||(gv[t]=e()),gv[t]}(n.repoInfo_,()=>new OC(n.stats_,n.server_)),n.infoData_=new MC,n.infoSyncTree_=new rT({startListening:(r,i,a,l)=>{let d=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(d=nh(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),gw(n,"connected",!1),n.serverSyncTree_=new rT({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,m)=>{const v=l(d,m);Ji(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qr(this._repo,un())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function f(n,e){const t=o[e];(!t||t[n.key]!==n)&&Or(`Database ${e}(${n.repoInfo_}) has already been deleted.`),yw(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Or("Cannot call "+e+" on a deleted database.")}}function A(){Tv.IS_TRANSPORT_INITIALIZED&&vi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function N(){A(),Uu.forceDisallow()}function U(){A(),Zl.forceDisallow(),Uu.forceAllow()}function qe(n,e){iv(n,e)}const Tt={".sv":"timestamp"};class vn{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ql.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ql.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ct(n){nv(Ri.SDK_VERSION),(0,Ri._registerComponent)(new wa.wA("database",(e,{instanceIdentifier:t})=>h(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ri.registerVersion)(tv,zE,n),(0,Ri.registerVersion)(tv,zE,"esm2017")}();const xw=new wo.Yd("@firebase/database-compat"),zm=function(n){xw.warn("FIREBASE WARNING: "+n)};class Mw{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,zm("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Nw{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ah{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),cc("DataSnapshot.child","path",e,!1),new ah(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),cc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ah(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Do(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ni{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const l=Ni.getCancelAndContextArgs_("Query.on",r,i),d=(v,b)=>{t.call(l.context,new ah(this.database,v),b)};d.userCallback=t,d.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Ew(this._delegate,d,m),t;case"child_added":return Cw(this._delegate,d,m),t;case"child_removed":return HT(this._delegate,d,m),t;case"child_changed":return Tw(this._delegate,d,m),t;case"child_moved":return bw(this._delegate,d,m),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,$T(this._delegate,e,i)}else $T(this._delegate,e)}get(){return jT(this._delegate).then(e=>new ah(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=Ni.getCancelAndContextArgs_("Query.once",r,i),l=new L.BH,d=(v,b)=>{const S=new ah(this.database,v);t&&t.call(a.context,S,b),l.resolve(S)};d.userCallback=t,d.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":Ew(this._delegate,d,m,{onlyOnce:!0});break;case"child_added":Cw(this._delegate,d,m,{onlyOnce:!0});break;case"child_removed":HT(this._delegate,d,m,{onlyOnce:!0});break;case"child_changed":Tw(this._delegate,d,m,{onlyOnce:!0});break;case"child_moved":bw(this._delegate,d,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Ni(this.database,ba(this._delegate,function ax(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ox(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Ni(this.database,ba(this._delegate,function zN(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ux(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Ni(this.database,ba(this._delegate,function KN(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cc("orderByChild","path",n,!1),new qN(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Ni(this.database,ba(this._delegate,function YN(){return new ZN}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Ni(this.database,ba(this._delegate,function QN(){return new lx}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Ni(this.database,ba(this._delegate,function XN(){return new JN}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Ni(this.database,ba(this._delegate,function sx(n=null,e){return np("startAt","key",e,!0),new GT(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Ni(this.database,ba(this._delegate,function GN(n,e){return np("startAfter","key",e,!0),new WN(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Ni(this.database,ba(this._delegate,function $N(n,e){return np("endAt","key",e,!0),new Gm(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Ni(this.database,ba(this._delegate,function Dw(n,e){return np("endBefore","key",e,!0),new WT(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Ni(this.database,ba(this._delegate,function tk(n,e){return np("equalTo","key",e,!0),new ek(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ni))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Do(this.database,new qr(this._delegate._repo,this._delegate._path))}}class Do extends Ni{constructor(e,t){super(e,new oi(t._repo,t._path,new dm,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Do(this.database,pc(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Do(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Do(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=BT(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,zm("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ws("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=HN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function jN(n,e,t){if(Ws("setWithPriority",n._path),Sr("setWithPriority",e,n._path,!1),Qi("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return mw(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function $m(n){return Ws("remove",n._path),BT(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function er(n,e,t){var r;if(n=(0,L.m9)(n),Ws("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,d=Ew(n,()=>{});return function Um(n,e,t,r,i,a){hc(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Gl(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=sh(n,e,void 0);l.currentInputSnapshot=d;const m=l.update(d.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{tp("transaction failed: Data returned ",m,l.path),l.status=0;const v=ep(n.transactionQueueTree_,e),b=ih(v)||[];let S;b.push(l),yT(v,b),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(S=(0,L.DV)(m,".priority"),(0,L.hu)(km(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Yf(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const P=dc(n),V=ur(m,S),G=Xf(V,d,P);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=G,l.currentWriteId=Lm(n);const ce=sw(n.serverSyncTree_,e,G,l.currentWriteId,l.applyLocally);Ji(n.eventQueue_,e,ce),ip(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,b)=>{let S=null;m?a.reject(m):(S=new Yu(b,new qr(n._repo,n._path),Nn),a.resolve(new vn(v,S)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Nw(a.committed,new ah(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function BN(n,e){n=(0,L.m9)(n),Ws("setPriority",n._path),Qi("setPriority",e,!1);const t=new L.BH;return mw(n._repo,Xn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function Iw(n,e){n=(0,L.m9)(n),Ws("push",n._path),Sr("push",e,n._path,!0);const t=pw(n._repo),r=_A(t),i=pc(n,r),a=pc(n,r);let l;return l=null!=e?BT(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Do(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Do(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ws("Reference.onDisconnect",this._delegate._path),new Mw(new UT(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class kw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:N,forceLongPolling:U}}useEmulator(e,t,r={}){!function re(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Or("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Or('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new jd(jd.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new jd(l)}!function c(n,e,t,r){n.repoInfo_=new fv(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Do){const t=Hm(this._delegate,e.toString());return new Do(this,t)}{const t=jm(this._delegate,e);return new Do(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=Hm(this._delegate,e);return new Do(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function Te(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),yw(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function We(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function MT(n){n.persistentConnection_&&n.persistentConnection_.resume(hw)}(n._repo)}(this._delegate)}}kw.ServerValue={TIMESTAMP:function ke(){return Tt}(),increment:n=>function Mt(n){return{".sv":{increment:n}}}(n)};var jU=Object.freeze({__proto__:null,initStandalone:function BU({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){nv(t);const l=new wa.zt("auth-internal",new wa.H0("database-standalone"));return l.setComponent(new wa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new kw(h(n,l,void 0,e,a),n),namespace:i}}});const HU=kw.ServerValue;function nk(n){return null==n}function rk(n){return"function"==typeof n.set}function ik(n,e){return rk(e)?e:n.ref(e)}function sk(n,e){if(function WU(n){return"string"==typeof n}(n))return e.stringCase();if(rk(n))return e.firebaseCase();if(function GU(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Ow(n,e,t="on",r=tm.z){return new Tr.y(i=>{let a=null;return a=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,st.U)(i=>{const{snapshot:a,prevKey:l}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:l,key:d}}),(0,Pg.B)())}function ok(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function KU(n,e){const{payload:t,prevKey:r,key:i}=e,a=ok(n,i),l=function qU(n,e){if(nk(e))return 0;{const t=ok(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:d,key:m.key};return d=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function ak(n){return(nk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function uk(n,e,t){return function zU(n,e,t){return Ow(n,"value","once",t).pipe(Gn(r=>{const i=[at(r)];return e.forEach(a=>i.push(Ow(n,a,"on",t))),(0,Rg.T)(...i).pipe(Pt(KU,[]))}),Xy())}(n,e=ak(e),t)}function lk(n,e,t){const r=(e=ak(e)).map(i=>Ow(n,i,"on",t));return(0,Rg.T)(...r)}function ck(n,e){return function(r,i){return sk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function JU(n){return function(t){return t?sk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function dk(n,e){return function(){return Ow(n,"value","on",e)}}!function $U(n){n.INTERNAL.registerComponent(new wa.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new kw(i,r)},"PUBLIC").setServiceProps({Reference:Do,Query:Ni,Database:kw,DataSnapshot:ah,enableLogging:qe,INTERNAL:jU,ServerValue:HU}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(ev.Z);const tV=new p.OlP("angularfire2.realtimeDatabaseURL"),nV=new p.OlP("angularfire2.database.use-emulator");let rV=(()=>{class n{constructor(t,r,i,a,l,d,m,v,b,S,P,V,G,ce,ye){this.schedulers=d;const ot=m,dt=(0,zr.on)(t,l,r);v&&bf(dt,l,b,P,V,G,S,ce),this.database=(0,zr.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const ut=l.runOutsideAngular(()=>dt.database(i||void 0));return ot&&ut.useEmulator(...ot),ut},[ot])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ik(this.database,t));let a=i;return r&&(a=r(i)),function XU(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:ck(r,"update"),set:ck(r,"set"),push:i=>r.push(i),remove:JU(r),snapshotChanges:i=>uk(n,i,t).pipe(yn.iC),stateChanges:i=>lk(n,i,t).pipe(yn.iC),auditTrail:i=>function ZU(n,e,t){return function QU(n,e,t){return function YU(n,e){return Ow(n,"value","on",e).pipe((0,st.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function GE(...n){const e=(0,hs.jO)(n);return(0,Jn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),d=!1;for(let m=0;m<i;m++)(0,gi.Xf)(n[m]).subscribe((0,Wn.x)(r,v=>{a[m]=v,!d&&!l[m]&&(l[m]=!0,(d=l.every(ho.y))&&(l=null))},WE.Z));t.subscribe((0,Wn.x)(r,m=>{if(d){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,st.U)(([i,a])=>{const l=i.lastKeyToLoad,d=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:d}}),function yN(n){return(0,Jn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Wn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,st.U)(i=>i.actions))}(n,lk(n,e).pipe(Pt((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(yn.iC),valueChanges:(i,a)=>uk(n,i,t).pipe((0,st.U)(d=>d.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),yn.iC)}}(a,this)}object(t){return function eV(n,e){return{query:n,snapshotChanges:()=>dk(n,e.schedulers.outsideAngular)().pipe(yn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>dk(n,e.schedulers.outsideAngular)().pipe(yn.iC,(0,st.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ik(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(zr.Dh),p.LFG(zr.xv,8),p.LFG(tV,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(nV,8),p.LFG(qg,8),p.LFG(By,8),p.LFG(jy,8),p.LFG(Td,8),p.LFG(Tf,8),p.LFG(bd,8),p.LFG(gE,8),p.LFG(Cd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iV=(()=>{class n{constructor(){zg.Z.registerVersion("angularfire",yn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[rV]}),n})();const hk="firebasestorage.googleapis.com",fk="storageBucket";class vr extends L.ZR{constructor(e,t,r=0){super(cx(e),`Firebase Storage: ${t} (${cx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function cx(n){return"storage/"+n}function dx(){return new vr("unknown","An unknown error occurred, please check the error payload for server response.")}function pk(){return new vr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function gk(){return new vr("canceled","User canceled the upload/download.")}function mk(){return new vr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qm(n){return new vr("invalid-argument",n)}function _k(){return new vr("app-deleted","The Firebase app was deleted.")}function yk(n){return new vr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lw(n,e){return new vr("invalid-format","String does not match format '"+n+"': "+e)}function Fw(n){throw new vr("internal-error","Internal error: "+n)}class Xi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Xi.makeFromUrl(e,t)}catch{return new Xi(e,"")}if(""===r.path)return r;throw function gV(n){return new vr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ft){ft.path_=decodeURIComponent(ft.path)}const S=t.replace(/[.]/g,"\\."),ut=[{regex:d,indices:{bucket:1,path:3},postModify:function a(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===hk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ft=0;ft<ut.length;ft++){const At=ut[ft],Bt=At.regex.exec(e);if(Bt){let du=Bt[At.indices.path];du||(du=""),r=new Xi(Bt[At.indices.bucket],du),At.postModify(r);break}}if(null==r)throw function pV(n){return new vr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class wV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qT(n){return"string"==typeof n||n instanceof String}function vk(n){return hx()&&n instanceof Blob}function hx(){return typeof Blob<"u"&&!(0,L.UG)()}function fx(n,e,t,r){if(r<e)throw qm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw qm(`Invalid value for '${n}'. Expected ${t} or less.`)}function gc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function wk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var uh=(()=>{return(n=uh||(uh={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",uh;var n})();function Ik(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class DV{constructor(e,t,r,i,a,l,d,m,v,b,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());!function CV(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==d){const m=dx();m.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,m):m)}else l(i.canceled?this.appDelete_?_k():gk():pk())};this.canceled_?t(0,new KT(!1,null,!0)):this.backoffId_=function IV(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function m(){return 2===d}let v=!1;function b(...ye){v||(v=!0,e.apply(null,ye))}function S(ye){i=setTimeout(()=>{i=null,n(V,m())},ye)}function P(){a&&clearTimeout(a)}function V(ye,...ot){if(v)return void P();if(ye)return P(),void b.call(null,ye,...ot);if(m()||l)return P(),void b.call(null,ye,...ot);let ut;r<64&&(r*=2),1===d?(d=2,ut=0):ut=1e3*(r+Math.random()),S(ut)}let G=!1;function ce(ye){G||(G=!0,P(),!v&&(null!==i?(ye||(d=2),clearTimeout(i),S(0)):ye||(d=1)))}return S(0),a=setTimeout(()=>{l=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new KT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===uh.NO_ERROR,m=a.getStatus();if((!d||Ik(m,this.additionalRetryCodes_))&&this.retry){const b=a.getErrorCode()===uh.ABORT;return void r(!1,new KT(!1,null,b))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new KT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function EV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class KT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function NV(...n){const e=function MV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(hx())return new Blob(n);throw new vr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const So={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class px{constructor(e,t){this.data=e,this.contentType=t||null}}function gx(n,e){switch(n){case So.RAW:return new px(Ek(e));case So.BASE64:case So.BASE64URL:return new px(Ck(n,e));case So.DATA_URL:return new px(function FV(n){const e=new Tk(n);return e.base64?Ck(So.BASE64,e.rest):function LV(n){let e;try{e=decodeURIComponent(n)}catch{throw Lw(So.DATA_URL,"Malformed data URL.")}return Ek(e)}(e.rest)}(e),function UV(n){return new Tk(n).contentType}(e))}throw dx()}function Ek(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ck(n,e){switch(n){case So.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Lw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case So.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Lw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function OV(n){if(typeof atob>"u")throw function vV(n){return new vr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Lw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Tk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Lw(So.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function VV(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Qu{constructor(e,t){let r=0,i="";vk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(vk(this.data_)){const i=function kV(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Qu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Qu(r,!0)}}static getBlob(...e){if(hx()){const t=e.map(r=>r instanceof Qu?r.data_:r);return new Qu(NV.apply(null,t))}{const t=e.map(l=>qT(l)?gx(So.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new Qu(i,!0)}}uploadData(){return this.data_}}function mx(n){let e;try{e=JSON.parse(n)}catch{return null}return function bV(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function bk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function HV(n,e){return e}class ws{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||HV}}let ZT=null;function Uw(){if(ZT)return ZT;const n=[];n.push(new ws("bucket")),n.push(new ws("generation")),n.push(new ws("metageneration")),n.push(new ws("name","fullPath",!0));const t=new ws("name");t.xform=function e(a,l){return function $V(n){return!qT(n)||n.length<2?n:bk(n)}(l)},n.push(t);const i=new ws("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new ws("timeCreated")),n.push(new ws("updated")),n.push(new ws("md5Hash",null,!0)),n.push(new ws("cacheControl",null,!0)),n.push(new ws("contentDisposition",null,!0)),n.push(new ws("contentEncoding",null,!0)),n.push(new ws("contentLanguage",null,!0)),n.push(new ws("contentType",null,!0)),n.push(new ws("metadata","customMetadata",!0)),ZT=n,ZT}function Dk(n,e,t){const r=mx(e);return null===r?null:function GV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function WV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Xi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function _x(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Sk="prefixes";class Ju{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xu(n){if(!n)throw dx()}function YT(n,e){return function t(r,i){const a=Dk(n,i,e);return Xu(null!==a),a}}function Km(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function hV(){return new vr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function dV(){return new vr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function cV(n){return new vr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function fV(n){return new vr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Vw(n){const e=Km(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function lV(n){return new vr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function xk(n,e,t){const i=gc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Ju(i,"GET",YT(n,t),l);return d.errorHandler=Vw(e),d}function QV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=gc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,b=new Ju(d,"GET",function ZV(n,e){return function t(r,i){const a=function KV(n,e,t){const r=mx(t);return null===r?null:function qV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Sk])for(const i of t[Sk]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Xi(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Xi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Xu(null!==a),a}}(n,e.bucket),v);return b.urlParams=a,b.errorHandler=Km(e),b}function Pk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function tB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class QT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function yx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Xu(!1)}return Xu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const sB={STATE_CHANGED:"state_changed"},Is={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vx(n){switch(n){case"running":case"pausing":case"canceling":return Is.RUNNING;case"paused":return Is.PAUSED;case"success":return Is.SUCCESS;case"canceled":return Is.CANCELED;default:return Is.ERROR}}class oB{constructor(e,t,r){if(function TV(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Zm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class uB extends class aB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Fw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function lu(){return new uB}class Ok{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Uw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(Ik(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=pk()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function nB(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Pk(e,r,i),d={name:l.fullPath},m=gc(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=_x(l,t),G=new Ju(m,"POST",function V(ce){let ye;yx(ce);try{ye=ce.getResponseHeader("X-Goog-Upload-URL")}catch{Xu(!1)}return Xu(qT(ye)),ye},n.maxUploadRetryTime);return G.urlParams=d,G.headers=b,G.body=S,G.errorHandler=Km(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,lu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function rB(n,e,t,r){const m=new Ju(t,"POST",function a(v){const b=yx(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xu(!1)}S||Xu(!1);const P=Number(S);return Xu(!isNaN(P)),new QT(P,r.size(),"final"===b)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Km(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,lu,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new QT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function iB(n,e,t,r,i,a,l,d){const m=new QT(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function _V(){return new vr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let b=v;i>0&&(b=Math.min(b,i));const S=m.current;let V="";V=0===b?"finalize":v===b?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${m.current}`},ce=r.slice(S,S+b);if(null===ce)throw mk();const ut=new Ju(t,"POST",function ye(ft,At){const Bt=yx(ft,["active","final"]),wr=m.current+b,du=r.size();let mM;return mM="final"===Bt?YT(e,a)(ft,At):null,new QT(wr,du,"final"===Bt,mM)},e.maxUploadRetryTime);return ut.headers=G,ut.body=ce.uploadData(),ut.progressCallback=d||null,ut.errorHandler=Km(n),ut}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const d=this._ref.storage._makeRequest(l,lu,i,a,!1);this._request=d,d.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=xk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,lu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Mk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function d(){let ut="";for(let ft=0;ft<2;ft++)ut+=Math.random().toString().slice(2);return ut}();l["Content-Type"]="multipart/related; boundary="+m;const v=Pk(e,r,i),b=_x(v,t),V=Qu.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===V)throw mk();const G={name:v.fullPath},ce=gc(a,n.host,n._protocol),ot=n.maxUploadRetryTime,dt=new Ju(ce,"POST",YT(n,t),ot);return dt.urlParams=G,dt.headers=l,dt.body=V.uploadData(),dt.errorHandler=Km(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,lu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=vx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new oB(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(vx(this._state)){case Is.SUCCESS:Zm(this._resolve.bind(null,this.snapshot))();break;case Is.CANCELED:case Is.ERROR:Zm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vx(this._state)){case Is.RUNNING:case Is.PAUSED:e.next&&Zm(e.next.bind(e,this.snapshot))();break;case Is.SUCCESS:e.complete&&Zm(e.complete.bind(e))();break;default:e.error&&Zm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class up{constructor(e,t){this._service=e,this._location=t instanceof Xi?t:Xi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new up(e,t)}get root(){const e=new Xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bk(this._location.path)}get storage(){return this._service}get parent(){const e=function BV(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Xi(this._location.bucket,e);return new up(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw yk(e)}}function Fk(n,e,t){return wx.apply(this,arguments)}function wx(){return(wx=(0,Ie.Z)(function*(n,e,t){const i=yield Uk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Fk(n,e,i.nextPageToken))})).apply(this,arguments)}function Uk(n,e){null!=e&&"number"==typeof e.maxResults&&fx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=QV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,lu)}function wB(n){n._throwIfRoot("getDownloadURL");const e=function JV(n,e,t){const i=gc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Ju(i,"GET",function YV(n,e){return function t(r,i){const a=Dk(n,i,e);return Xu(null!==a),function zV(n,e,t,r){const i=mx(e);if(null===i||!qT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return gc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+wk({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=Vw(e),d}(n.storage,n._location,Uw());return n.storage.makeRequestWithTokens(e,lu).then(t=>{if(null===t)throw function yV(){return new vr("no-download-url","The given file does not have any download URLs.")}();return t})}function Vk(n,e){const t=function jV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Xi(n._location.bucket,t);return new up(n.storage,r)}function Bk(n,e){if(n instanceof Ix){const t=n;if(null==t._bucket)throw function mV(){return new vr("no-default-bucket","No default bucket found. Did you set the '"+fk+"' property when initializing the app?")}();const r=new up(t,t._bucket);return null!=e?Bk(r,e):r}return void 0!==e?Vk(n,e):n}function TB(n,e){if(e&&function EB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Ix)return function CB(n,e){return new up(n,e)}(n,e);throw qm("To use ref(service, url), the first argument must be a Storage instance.")}return Bk(n,e)}function jk(n,e){const t=e?.[fk];return null==t?null:Xi.makeFromBucketSpec(t,n)}class Ix{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=hk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Xi.makeFromBucketSpec(i,this._host):jk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Xi.makeFromBucketSpec(this._url,e):jk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ie.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ie.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new up(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new wV(_k());{const l=function PV(n,e,t,r,i,a,l=!0){const d=wk(n.urlParams),m=n.url+d,v=Object.assign({},n.headers);return function xV(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function SV(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function AV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function RV(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new DV(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ie.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Hk="@firebase/storage";function Gk(n,e){return TB(n=(0,L.m9)(n),e)}function kB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ix(t,r,i,e,Ri.SDK_VERSION)}!function OB(){(0,Ri._registerComponent)(new wa.wA("storage",kB,"PUBLIC").setMultipleInstances(!0)),(0,Ri.registerVersion)(Hk,"0.9.14",""),(0,Ri.registerVersion)(Hk,"0.9.14","esm2017")}();class JT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class qk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new JT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new JT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new JT(l,this,this._ref)):{next:t.next?l=>t.next(new JT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Kk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new mc(e,this._service))}get items(){return this._delegate.items.map(e=>new mc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class mc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function NB(n,e){return Vk(n,e)}(this._delegate,e);return new mc(t,this.storage)}get root(){return new mc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new mc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new qk(function DB(n,e,t){return function gB(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ok(n,new Qu(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=So.RAW,r){this._throwIfRoot("putString");const i=gx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new qk(new Ok(this._delegate,new Qu(i.data,!0),a),this)}listAll(){return function RB(n){return function _B(n){const e={prefixes:[],items:[]};return Fk(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new Kk(e,this.storage))}list(e){return function xB(n,e){return Uk(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Kk(t,this.storage))}getMetadata(){return function SB(n){return function yB(n){n._throwIfRoot("getMetadata");const e=xk(n.storage,n._location,Uw());return n.storage.makeRequestWithTokens(e,lu)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function AB(n,e){return function vB(n,e){n._throwIfRoot("updateMetadata");const t=function XV(n,e,t,r){const a=gc(e.fullServerUrl(),n.host,n._protocol),d=_x(t,r),v=n.maxOperationRetryTime,b=new Ju(a,"PATCH",YT(n,r),v);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=Vw(e),b}(n.storage,n._location,e,Uw());return n.storage.makeRequestWithTokens(t,lu)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function PB(n){return wB(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function MB(n){return function IB(n){n._throwIfRoot("deleteObject");const e=function eB(n,e){const r=gc(e.fullServerUrl(),n.host,n._protocol),d=new Ju(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Vw(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,lu)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw yk(e)}}class Zk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Yk(e))throw qm("ref() expected a child path but got a URL, use refFromURL instead.");return new mc(Gk(this._delegate,e),this)}refFromURL(e){if(!Yk(e))throw qm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xi.makeFromUrl(e,this._delegate.host)}catch{throw qm("refFromUrl() expected a valid full URL but got an invalid one.")}return new mc(Gk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function zk(n,e,t,r={}){!function bB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Yk(n){return/^[A-Za-z]+:\/\//.test(n)}function VB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Zk(t,r)}function Qk(n){const e=function jB(n){return new Tr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function sV(n,e=tm.z){return(0,Jn.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,b=e.now();if(b<v)return i=this.schedule(void 0,v-b),void r.add(i);d()}t.subscribe((0,Wn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,st.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function XT(n){return{getDownloadURL:()=>at(void 0).pipe(yn.fc,Gn(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>at(void 0).pipe(yn.fc,Gn(()=>n.getMetadata()),yn.iC),delete:()=>(0,an.D)(n.delete()),child:e=>XT(n.child(e)),updateMetadata:e=>(0,an.D)(n.updateMetadata(e)),put:(e,t)=>Qk(n.put(e,t)),putString:(e,t,r)=>Qk(n.putString(e,t,r)),list:e=>(0,an.D)(n.list(e)),listAll:()=>(0,an.D)(n.listAll())}}!function BB(n){const e={TaskState:Is,TaskEvent:sB,StringFormat:So,Storage:Zk,Reference:mc};n.INTERNAL.registerComponent(new wa.wA("storage-compat",VB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(ev.Z);const HB=new p.OlP("angularfire2.storageBucket"),$B=new p.OlP("angularfire2.storage.maxUploadRetryTime"),WB=new p.OlP("angularfire2.storage.maxOperationRetryTime"),GB=new p.OlP("angularfire2.storage.use-emulator");let zB=(()=>{class n{constructor(t,r,i,a,l,d,m,v,b,S){const P=(0,zr.on)(t,l,r);this.storage=(0,zr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=l.runOutsideAngular(()=>P.storage(i||void 0)),G=b;return G&&V.useEmulator(...G),m&&V.setMaxUploadRetryTime(m),v&&V.setMaxOperationRetryTime(v),V},[m,v])}ref(t){return XT(this.storage.ref(t))}refFromURL(t){return XT(this.storage.refFromURL(t))}upload(t,r,i){return XT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(zr.Dh),p.LFG(zr.xv,8),p.LFG(HB,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG($B,8),p.LFG(WB,8),p.LFG(GB,8),p.LFG(Cd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),KB=(()=>{class n{constructor(){zg.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[zB],imports:[qB]}),n})();function Ex(){return(0,Jn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var wt,ZB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_c={},Cx=Cx||{},Gt=ZB||self;function eb(){}function tb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Bw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Tx="closure_uid_"+(1e9*Math.random()>>>0),QB=0;function JB(n,e,t){return n.call.apply(n.bind,arguments)}function XB(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function es(n,e,t){return(es=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?JB:XB).apply(null,arguments)}function nb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ki(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function lh(){this.s=this.s,this.o=this.o}lh.prototype.s=!1,lh.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function YB(n){Object.prototype.hasOwnProperty.call(n,Tx)&&n[Tx]||(n[Tx]=++QB)}(this)},lh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function bx(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Xk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tb(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function ts(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ts.prototype.h=function(){this.defaultPrevented=!0};var t2=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",eb,e),Gt.removeEventListener("test",eb,e)}catch{}return n}();function rb(n){return/^[\s\xa0]*$/.test(n)}var eO=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Dx(n,e){return n<e?-1:n>e?1:0}function ib(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function el(n){return-1!=ib().indexOf(n)}function Sx(n){return Sx[" "](n),n}Sx[" "]=eb;var sb,n,r2=el("Opera"),Ym=el("Trident")||el("MSIE"),tO=el("Edge"),Ax=tO||Ym,nO=el("Gecko")&&!(-1!=ib().toLowerCase().indexOf("webkit")&&!el("Edge"))&&!(el("Trident")||el("MSIE"))&&!el("Edge"),i2=-1!=ib().toLowerCase().indexOf("webkit")&&!el("Edge");function rO(){var n=Gt.document;return n?n.documentMode:void 0}e:{var xx="",Rx=(n=ib(),nO?/rv:([^\);]+)(\)|;)/.exec(n):tO?/Edge\/([\d\.]+)/.exec(n):Ym?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):i2?/WebKit\/(\S+)/.exec(n):r2?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Rx&&(xx=Rx?Rx[1]:""),Ym){var Px=rO();if(null!=Px&&Px>parseFloat(xx)){sb=String(Px);break e}}sb=xx}var s2={};var a2=Gt.document&&Ym&&(rO()||parseInt(sb,10))||void 0;function jw(n,e){if(ts.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(nO){e:{try{Sx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:u2[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jw.X.h.call(this)}}ki(jw,ts);var u2={2:"touch",3:"pen",4:"mouse"};jw.prototype.h=function(){jw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hw="closure_listenable_"+(1e6*Math.random()|0),l2=0;function c2(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++l2,this.ba=this.ea=!1}function ob(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Nx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sO(n){const e={};for(const t in n)e[t]=n[t];return e}const oO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aO(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<oO.length;a++)t=oO[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ab(n){this.src=n,this.g={},this.h=0}function kx(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Jk(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(ob(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ox(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}ab.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ox(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new c2(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Lx="closure_lm_"+(1e6*Math.random()|0),Fx={};function uO(n,e,t,r,i){if(r&&r.once)return cO(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)uO(n,e[a],t,r,i);return null}return t=jx(t),n&&n[Hw]?n.N(e,t,Bw(r)?!!r.capture:!!r,i):lO(n,e,t,!1,r,i)}function lO(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Bw(i)?!!i.capture:!!i,d=Vx(n);if(d||(n[Lx]=d=new ab(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function d2(){const e=h2;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)t2||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(hO(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cO(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)cO(n,e[a],t,r,i);return null}return t=jx(t),n&&n[Hw]?n.O(e,t,Bw(r)?!!r.capture:!!r,i):lO(n,e,t,!0,r,i)}function dO(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)dO(n,e[a],t,r,i);else r=Bw(r)?!!r.capture:!!r,t=jx(t),n&&n[Hw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ox(a=n.g[e],t,r,i))&&(ob(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Vx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ox(e,t,r,i)),(t=-1<n?e[n]:null)&&Ux(t))}function Ux(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Hw])kx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hO(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Vx(e))?(kx(t,n),0==t.h&&(t.src=null,e[Lx]=null)):ob(n)}}}function hO(n){return n in Fx?Fx[n]:Fx[n]="on"+n}function h2(n,e){if(n.ba)n=!0;else{e=new jw(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Ux(n),n=t.call(r,e)}return n}function Vx(n){return(n=n[Lx])instanceof ab?n:null}var Bx="__closure_events_fn_"+(1e9*Math.random()>>>0);function jx(n){return"function"==typeof n?n:(n[Bx]||(n[Bx]=function(e){return n.handleEvent(e)}),n[Bx])}function wi(){lh.call(this),this.i=new ab(this),this.P=this,this.I=null}function Oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ts(e,n);else if(e instanceof ts)e.target=e.target||n;else{var i=e;aO(e=new ts(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=ub(l,r,!0,e)&&i}if(i=ub(l=e.g=n,r,!0,e)&&i,i=ub(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ub(l=e.g=t[a],r,!1,e)&&i}function ub(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var d=l.listener,m=l.ha||l.src;l.ea&&kx(n.i,l),i=!1!==d.call(m,r)&&i}}return i&&!r.defaultPrevented}ki(wi,lh),wi.prototype[Hw]=!0,wi.prototype.removeEventListener=function(n,e,t,r){dO(this,n,e,t,r)},wi.prototype.M=function(){if(wi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ob(t[r]);delete n.g[e],n.h--}}this.I=null},wi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},wi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Hx=Gt.JSON.stringify;function f2(){var n=gO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $x,fO=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new g2,n=>n.reset());class g2{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function m2(n){Gt.setTimeout(()=>{throw n},0)}function pO(n,e){$x||function _2(){var n=Gt.Promise.resolve(void 0);$x=function(){n.then(y2)}}(),Wx||($x(),Wx=!0),gO.add(n,e)}var Wx=!1,gO=new class p2{constructor(){this.h=this.g=null}add(e,t){const r=fO.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function y2(){for(var n;n=f2();){try{n.h.call(n.g)}catch(t){m2(t)}var e=fO;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wx=!1}function lb(n,e){wi.call(this),this.h=n||1,this.g=e||Gt,this.j=es(this.lb,this),this.l=Date.now()}function Gx(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function zx(n,e,t){if("function"==typeof n)t&&(n=es(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=es(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function mO(n){n.g=zx(()=>{n.g=null,n.i&&(n.i=!1,mO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ki(lb,wi),(wt=lb.prototype).ca=!1,wt.R=null,wt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Oi(this,"tick"),this.ca&&(Gx(this),this.start()))}},wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){lb.X.M.call(this),Gx(this),delete this.g};class v2 extends lh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mO(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $w(n){lh.call(this),this.h=n,this.g={}}ki($w,lh);var _O=[];function yO(n,e,t,r){Array.isArray(t)||(t&&(_O[0]=t.toString()),t=_O);for(var i=0;i<t.length;i++){var a=uO(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function vO(n){Nx(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ux(e)},n),n.g={}}function cb(){this.g=!0}function Qm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function C2(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Hx(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$w.prototype.M=function(){$w.X.M.call(this),vO(this)},$w.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cb.prototype.Aa=function(){this.g=!1},cb.prototype.info=function(){};var lp={},wO=null;function db(){return wO=wO||new wi}function IO(n){ts.call(this,lp.Pa,n)}function Ww(n){const e=db();Oi(e,new IO(e))}function EO(n,e){ts.call(this,lp.STAT_EVENT,n),this.stat=e}function Es(n){const e=db();Oi(e,new EO(e,n))}function CO(n,e){ts.call(this,lp.Qa,n),this.size=e}function Gw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}lp.Pa="serverreachability",ki(IO,ts),lp.STAT_EVENT="statevent",ki(EO,ts),lp.Qa="timingevent",ki(CO,ts);var hb={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},TO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function qx(){}function DO(){}qx.prototype.h=null;var Yx,zw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Kx(){ts.call(this,"d")}function Zx(){ts.call(this,"c")}function fb(){}function qw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new $w(this),this.O=T2,this.T=new lb(n=Ax?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new SO}function SO(){this.i=null,this.g="",this.h=!1}ki(Kx,ts),ki(Zx,ts),ki(fb,qx),fb.prototype.g=function(){return new XMLHttpRequest},fb.prototype.i=function(){return{}},Yx=new fb;var T2=45e3,Qx={},pb={};function Jx(n,e,t){n.K=1,n.v=yb(yc(e)),n.s=t,n.P=!0,AO(n,null)}function AO(n,e){n.F=Date.now(),Kw(n),n.A=yc(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),UO(t.i,"t",r),n.C=0,t=n.l.H,n.h=new SO,n.g=l1(n.l,t?e:null,!n.s),0<n.N&&(n.L=new v2(es(n.La,n,n.g),n.N)),yO(n.S,n.g,"readystatechange",n.ib),e=n.H?sO(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ww(),function w2(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),m=0;m<d.length;m++){var v=d[m].split("=");if(1<v.length){var b=v[0];v=v[1];var S=b.split("_");l=2<=S.length&&"type"==S[1]?l+(b+"=")+v+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function xO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function RO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=b2(n,t),i==pb){4==e&&(n.o=4,Es(14),r=!1),Qm(n.j,n.m,null,"[Incomplete Response]");break}if(i==Qx){n.o=4,Es(15),Qm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Qm(n.j,n.m,i,null),Xx(n,i)}xO(n)&&i!=pb&&i!=Qx&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Es(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),aR(e),e.K=!0,Es(11))):(Qm(n.j,n.m,t,"[Invalid Chunked Response]"),cp(n),Zw(n))}function b2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?pb:(t=Number(e.substring(t,r)),isNaN(t)?Qx:(r+=1)+t>e.length?pb:(e=e.substr(r,t),n.C=r+t,e))}function Kw(n){n.V=Date.now()+n.O,PO(n,n.O)}function PO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gw(es(n.gb,n),e)}function gb(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Zw(n){0==n.l.G||n.I||s1(n.l,n)}function cp(n){gb(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Gx(n.T),vO(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Xx(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||eR(t.h,n)))if(!n.J&&eR(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Tb(t),Eb(t)}oR(t),Es(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Gw(es(t.cb,t),6e3));if(1>=jO(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else hp(t,11)}else if((n.J||t.g==n)&&Tb(t),!rb(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const b=v[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const G=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(tR(a,a.h),a.h=null))}if(r.D){const ce=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,hr(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=u1(r,r.H?r.ka:null,r.V),l.J){HO(r.h,l);var d=l,m=r.J;m&&d.setTimeout(m),d.B&&(gb(d),Kw(d)),r.g=l}else n1(r);0<t.i.length&&Cb(t)}else"stop"!=v[0]&&"close"!=v[0]||hp(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?hp(t,7):sR(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}Ww()}catch{}}function MO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tb(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function S2(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(tb(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function D2(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(tb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(wt=qw.prototype).setTimeout=function(n){this.O=n},wt.ib=function(n){n=n.target;const e=this.L;e&&3==vc(n)?e.l():this.La(n)},wt.La=function(n){try{if(n==this.g)e:{const b=vc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||Ax||this.g&&(this.h.h||this.g.fa()||YO(this.g)))){this.I||4!=b||7==e||Ww(),gb(this);var t=this.g.aa();this.Y=t;t:if(xO(this)){var r=YO(this.g);n="";var i=r.length,a=4==vc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){cp(this),Zw(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function I2(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,m=this.g;if((d=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rb(d)){var v=d;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Es(12),cp(this),Zw(this);break e}Qm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xx(this,t)}this.P?(RO(this,b,l),Ax&&this.i&&3==b&&(yO(this.S,this.T,"tick",this.hb),this.T.start())):(Qm(this.j,this.m,l,null),Xx(this,l)),4==b&&cp(this),this.i&&!this.I&&(4==b?s1(this.l,this):(this.i=!1,Kw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Es(12)):(this.o=0,Es(13)),cp(this),Zw(this)}}}catch{}},wt.hb=function(){if(this.g){var n=vc(this.g),e=this.g.fa();this.C<e.length&&(gb(this),RO(this,n,e),this.i&&4!=n&&Kw(this))}},wt.cancel=function(){this.I=!0,cp(this)},wt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function E2(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ww(),Es(17)),cp(this),this.o=2,Zw(this)):PO(this,this.V-n)};var NO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof dp){this.h=void 0!==e?e:n.h,mb(this,n.j),this.s=n.s,this.g=n.g,_b(this,n.m),this.l=n.l,e=n.i;var t=new Jw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),kO(this,t),this.o=n.o}else n&&(t=String(n).match(NO))?(this.h=!!e,mb(this,t[1]||"",!0),this.s=Yw(t[2]||""),this.g=Yw(t[3]||"",!0),_b(this,t[4]),this.l=Yw(t[5]||"",!0),kO(this,t[6]||"",!0),this.o=Yw(t[7]||"")):(this.h=!!e,this.i=new Jw(null,this.h))}function yc(n){return new dp(n)}function mb(n,e,t){n.j=t?Yw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function _b(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function kO(n,e,t){e instanceof Jw?(n.i=e,function k2(n,e){e&&!n.j&&(ch(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(LO(this,r),UO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Qw(e,M2)),n.i=new Jw(e,n.h))}function hr(n,e,t){n.i.set(e,t)}function yb(n){return hr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,x2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function x2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}dp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qw(e,OO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qw(e,OO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qw(t,"/"==t.charAt(0)?P2:R2,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qw(t,N2)),n.join("")};var OO=/[#\/\?@]/g,R2=/[#\?:]/g,P2=/[#\?]/g,M2=/[#\?@]/g,N2=/#/g;function Jw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ch(n){n.g||(n.g=new Map,n.h=0,n.i&&function A2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function LO(n,e){ch(n),e=Jm(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function FO(n,e){return ch(n),e=Jm(n,e),n.g.has(e)}function UO(n,e,t){LO(n,e),0<t.length&&(n.i=null,n.g.set(Jm(n,e),bx(t)),n.h+=t.length)}function Jm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function VO(n){this.l=n||L2,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=Jw.prototype).add=function(n,e){ch(this),this.i=null,n=Jm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},wt.forEach=function(n,e){ch(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},wt.oa=function(){ch(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},wt.W=function(n){ch(this);let e=[];if("string"==typeof n)FO(this,n)&&(e=e.concat(this.g.get(Jm(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},wt.set=function(n,e){return ch(this),this.i=null,FO(this,n=Jm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},wt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var L2=10;function BO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jO(n){return n.h?1:n.g?n.g.size:0}function eR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function tR(n,e){n.g?n.g.add(e):n.h=e}function HO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $O(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return bx(n.i)}function nR(){}function F2(){this.g=new nR}function U2(n,e,t){const r=t||"";try{MO(n,function(i,a){let l=i;Bw(i)&&(l=Hx(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vb(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Xw(n){this.l=n.ac||null,this.j=n.jb||!1}function wb(n,e){wi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=rR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}VO.prototype.cancel=function(){if(this.i=$O(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},nR.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},nR.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},ki(Xw,qx),Xw.prototype.g=function(){return new wb(this.l,this.j)},Xw.prototype.i=function(n){return function(){return n}}({}),ki(wb,wi);var rR=0;function WO(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function eI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,tI(n)}function tI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=wb.prototype).open=function(n,e){if(this.readyState!=rR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,tI(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eI(this)),this.readyState=rR},wt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,tI(this)),this.g&&(this.readyState=3,tI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WO(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},wt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?eI(this):tI(this),3==this.readyState&&WO(this)}},wt.Va=function(n){this.g&&(this.response=this.responseText=n,eI(this))},wt.Ua=function(n){this.g&&(this.response=n,eI(this))},wt.ga=function(){this.g&&eI(this)},wt.setRequestHeader=function(n,e){this.v.append(n,e)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(wb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var B2=Gt.JSON.parse;function Ar(n){wi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GO,this.K=this.L=!1}ki(Ar,wi);var GO="",j2=/^https?$/i,H2=["POST","PUT"];function zO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qO(n),Ib(n)}function qO(n){n.D||(n.D=!0,Oi(n,"complete"),Oi(n,"error"))}function KO(n){if(n.h&&typeof Cx<"u"&&(!n.C[1]||4!=vc(n)||2!=n.aa()))if(n.v&&4==vc(n))zx(n.Ha,0,n);else if(Oi(n,"readystatechange"),4==vc(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(NO)[1]||null;if(!i&&Gt.self&&Gt.self.location){var a=Gt.self.location.protocol;i=a.substr(0,a.length-1)}r=!j2.test(i?i.toLowerCase():"")}t=r}if(t)Oi(n,"complete"),Oi(n,"success");else{n.m=6;try{var l=2<vc(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",qO(n)}}finally{Ib(n)}}}function Ib(n,e){if(n.g){ZO(n);const t=n.g,r=n.C[0]?eb:null;n.g=null,n.C=null,e||Oi(n,"ready");try{t.onreadystatechange=r}catch{}}}function ZO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function vc(n){return n.g?n.g.readyState:0}function YO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case GO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function QO(n){let e="";return Nx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function iR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=QO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):hr(n,e,t))}function nI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function JO(n){this.Ca=0,this.i=[],this.j=new cb,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=nI("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=nI("baseRetryDelayMs",5e3,n),this.bb=nI("retryDelaySeedMs",1e4,n),this.$a=nI("forwardChannelMaxRetries",2,n),this.ta=nI("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new VO(n&&n.concurrentRequestLimit),this.Fa=new F2,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function sR(n){if(XO(n),3==n.G){var e=n.U++,t=yc(n.F);hr(t,"SID",n.I),hr(t,"RID",e),hr(t,"TYPE","terminate"),rI(n,t),(e=new qw(n,n.j,e,void 0)).K=2,e.v=yb(yc(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=l1(e.l,null),e.g.da(e.v)),e.F=Date.now(),Kw(e)}a1(n)}function Eb(n){n.g&&(aR(n),n.g.cancel(),n.g=null)}function XO(n){Eb(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),Tb(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function Cb(n){BO(n.h)||n.m||(n.m=!0,pO(n.Ja,n),n.C=0)}function e1(n,e){var t;t=e?e.m:n.U++;const r=yc(n.F);hr(r,"SID",n.I),hr(r,"RID",t),hr(r,"AID",n.T),rI(n,r),n.o&&n.s&&iR(r,n.o,n.s),t=new qw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=t1(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),tR(n.h,t),Jx(t,r,e)}function rI(n,e){n.ia&&Nx(n.ia,function(t,r){hr(e,r,t)}),n.l&&MO({},function(t,r){hr(e,r,t)})}function t1(n,e,t){t=Math.min(n.i.length,t);var r=n.l?es(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let m=0;m<t;m++){let v=i[m].h;const b=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),d=!1;else try{U2(b,l,"req"+v+"_")}catch{r&&r(b)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function n1(n){n.g||n.u||(n.Z=1,pO(n.Ia,n),n.A=0)}function oR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Gw(es(n.Ia,n),o1(n,n.A)),n.A++,0))}function aR(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function r1(n){n.g=new qw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=yc(n.sa);hr(e,"RID","rpc"),hr(e,"SID",n.I),hr(e,"CI",n.L?"0":"1"),hr(e,"AID",n.T),hr(e,"TYPE","xmlhttp"),rI(n,e),n.o&&n.s&&iR(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=yb(yc(e)),t.s=null,t.P=!0,AO(t,n)}function Tb(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function s1(n,e){var t=null;if(n.g==e){Tb(n),aR(n),n.g=null;var r=2}else{if(!eR(n.h,e))return;t=e.D,HO(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Oi(r=db(),new CO(r,t)),Cb(n)}else n1(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function W2(n,e){return!(jO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Gw(es(n.Ja,n,e),o1(n,n.C)),n.C++,0)))}(n,e)||2==r&&oR(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:hp(n,5);break;case 4:hp(n,10);break;case 3:hp(n,6);break;default:hp(n,2)}}function o1(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function hp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=es(n.kb,n);t||(t=new dp("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||mb(t,"https"),yb(t)),function V2(n,e){const t=new cb;if(Gt.Image){const r=new Image;r.onload=nb(vb,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nb(vb,t,r,"TestLoadImage: error",!1,e),r.onabort=nb(vb,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nb(vb,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Es(2);n.G=0,n.l&&n.l.va(e),a1(n),XO(n)}function a1(n){if(n.G=0,n.la=[],n.l){const e=$O(n.h);(0!=e.length||0!=n.i.length)&&(Xk(n.la,e),Xk(n.la,n.i),n.h.i.length=0,bx(n.i),n.i.length=0),n.l.ua()}}function u1(n,e,t){var r=t instanceof dp?yc(t):new dp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),_b(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new dp(null,void 0);r&&mb(a,r),e&&(a.g=e),i&&_b(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&hr(r,t,e),hr(r,"VER",n.ma),rI(n,r),r}function l1(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&n.Da&&!n.ra?new Xw({jb:!0}):n.ra)).Ka(n.H),e}function c1(){}function bb(){if(Ym&&!(10<=Number(a2)))throw Error("Environmental error: no available transport.")}function Ao(n,e){wi.call(this),this.g=new JO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!rb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Xm(this)}function d1(n){Kx.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function h1(){Zx.call(this),this.status=1}function Xm(n){this.g=n}(wt=Ar.prototype).Ka=function(n){this.L=n},wt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Yx.g(),this.C=function bO(n){return n.h||(n.h=n.i())}(this.u?this.u:Yx),this.g.onreadystatechange=es(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void zO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=Jk(H2,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZO(this),0<this.B&&((this.K=function $2(n){return Ym&&function o2(){return function n2(n){var e=s2;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=eO(String(sb)).split("."),t=eO("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Dx(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Dx(0==i[2].length,0==a[2].length)||Dx(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=es(this.qa,this)):this.A=zx(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){zO(this,a)}},wt.qa=function(){typeof Cx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oi(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Oi(this,"complete"),Oi(this,"abort"),Ib(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ib(this,!0)),Ar.X.M.call(this)},wt.Ha=function(){this.s||(this.F||this.v||this.l?KO(this):this.fb())},wt.fb=function(){KO(this)},wt.aa=function(){try{return 2<vc(this)?this.g.status:-1}catch{return-1}},wt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},wt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),B2(e)}},wt.Ea=function(){return this.m},wt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=JO.prototype).ma=8,wt.G=1,wt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new qw(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=sO(a),aO(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=t1(this,i,e),hr(t=yc(this.F),"RID",n),hr(t,"CVER",22),this.D&&hr(t,"X-HTTP-Session-Id",this.D),rI(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(QO(a)))+"&"+e:this.o&&iR(t,this.o,a)),tR(this.h,i),this.Ya&&hr(t,"TYPE","init"),this.O?(hr(t,"$req",e),hr(t,"SID","null"),i.Z=!0,Jx(i,t,null)):Jx(i,t,e),this.G=2}}else 3==this.G&&(n?e1(this,n):0==this.i.length||BO(this.h)||e1(this))},wt.Ia=function(){if(this.u=null,r1(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Gw(es(this.eb,this),n)}},wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Es(10),Eb(this),r1(this))},wt.cb=function(){null!=this.v&&(this.v=null,Eb(this),oR(this),Es(19))},wt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Es(2)):(this.j.info("Failed to ping google.com"),Es(1))},(wt=c1.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Ra=function(){},bb.prototype.g=function(n,e){return new Ao(n,e)},ki(Ao,wi),Ao.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Es(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=u1(n,null,n.V),Cb(n)},Ao.prototype.close=function(){sR(this.g)},Ao.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Hx(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Cb(e)},Ao.prototype.M=function(){this.g.l=null,delete this.j,sR(this.g),delete this.g,Ao.X.M.call(this)},ki(d1,Kx),ki(h1,Zx),ki(Xm,c1),Xm.prototype.xa=function(){Oi(this.g,"a")},Xm.prototype.wa=function(n){Oi(this.g,new d1(n))},Xm.prototype.va=function(n){Oi(this.g,new h1)},Xm.prototype.ua=function(){Oi(this.g,"b")},bb.prototype.createWebChannel=bb.prototype.g,Ao.prototype.send=Ao.prototype.u,Ao.prototype.open=Ao.prototype.m,Ao.prototype.close=Ao.prototype.close,hb.NO_ERROR=0,hb.TIMEOUT=8,hb.HTTP_ERROR=6,TO.COMPLETE="complete",DO.EventType=zw,zw.OPEN="a",zw.CLOSE="b",zw.ERROR="c",zw.MESSAGE="d",wi.prototype.listen=wi.prototype.N,Ar.prototype.listenOnce=Ar.prototype.O,Ar.prototype.getLastError=Ar.prototype.Oa,Ar.prototype.getLastErrorCode=Ar.prototype.Ea,Ar.prototype.getStatus=Ar.prototype.aa,Ar.prototype.getResponseJson=Ar.prototype.Sa,Ar.prototype.getResponseText=Ar.prototype.fa,Ar.prototype.send=Ar.prototype.da,Ar.prototype.setWithCredentials=Ar.prototype.Ka;var G2=_c.createWebChannelTransport=function(){return new bb},z2=_c.getStatEventTarget=function(){return db()},uR=_c.ErrorCode=hb,q2=_c.EventType=TO,K2=_c.Event=lp,f1=_c.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Z2=_c.FetchXmlHttpFactory=Xw,Db=_c.WebChannel=DO,Y2=_c.XhrIo=Ar;const p1="@firebase/firestore";class Ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");let e_="9.14.0";const dh=new wo.Yd("@firebase/firestore");function lR(){return dh.logLevel}function $e(n,...e){if(dh.logLevel<=wo.in.DEBUG){const t=e.map(cR);dh.debug(`Firestore (${e_}): ${n}`,...t)}}function Ur(n,...e){if(dh.logLevel<=wo.in.ERROR){const t=e.map(cR);dh.error(`Firestore (${e_}): ${n}`,...t)}}function fp(n,...e){if(dh.logLevel<=wo.in.WARN){const t=e.map(cR);dh.warn(`Firestore (${e_}): ${n}`,...t)}}function cR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${e_}) INTERNAL ASSERTION FAILED: `+n;throw Ur(e),new Error(e)}function Ft(n,e){n||ht()}function Je(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class g1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ii.UNAUTHENTICATED))}shutdown(){}}class ej{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tj{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ai,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const v=l;e.enqueueRetryable((0,Ie.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ai)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new g1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new Ii(e)}}class nj{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ft(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rj{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new nj(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ij{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.A=t.token,new m1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function sj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class _1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function t_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function y1(n){return n+"\0"}class fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new fr(0,0))}static max(){return new Ut(new fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class iI{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===iI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gn extends iI{construct(e,t,r){return new gn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new gn(t)}static emptyPath(){return new gn([])}}const oj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends iI{construct(e,t,r){return new xr(e,t,r)}static isValidIdentifier(e){return oj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Fe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Fe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Fe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(t)}static emptyPath(){return new xr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(gn.fromString(e))}static fromName(e){return new Ke(gn.fromString(e).popFirst(5))}static empty(){return new Ke(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new gn(e.slice()))}}class Sb{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function dR(n){return n.fields.find(e=>2===e.kind)}function pp(n){return n.fields.filter(e=>2!==e.kind)}Sb.UNKNOWN_ID=-1;class Ab{constructor(e,t){this.fieldPath=e,this.kind=t}}class sI{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sI(0,xo.min())}}function v1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ut.fromTimestamp(1e9===r?new fr(t+1,0):new fr(t,r));return new xo(i,Ke.empty(),e)}function w1(n){return new xo(n.readTime,n.key,-1)}class xo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xo(Ut.min(),Ke.empty(),-1)}static max(){return new xo(Ut.max(),Ke.empty(),-1)}}function hR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const I1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function hh(n){return fR.apply(this,arguments)}function fR(){return fR=(0,Ie.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==I1)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),fR.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(b=>{l[v]=b,++d,d===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class xb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ai,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new oI(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=pR(r.target.error);this.P.reject(new oI(e,i))}}static open(e,t,r,i){try{return new xb(t,e.transaction(i,r))}catch(a){throw new oI(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cj(t)}}class cu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===cu.D((0,L.z$)())&&Ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),gp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(cu.N())return!0;const e=(0,L.z$)(),t=cu.D(e),r=0<t&&t<10,i=cu.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ie.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new oI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Fe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Fe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new oI(e,d))},a.onupgradeneeded=l=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ie.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.F(e);const m=xb.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(b=>(m.V(),b)).catch(b=>(m.abort(b),de.reject(b))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,b="FirebaseError"!==v.name&&d<3;if($e("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class lj{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return gp(this.U.delete())}}class oI extends Fe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fh(n){return"IndexedDbTransactionError"===n.name}class cj{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gp(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),gp(this.store.add(e))}get(e){return gp(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),gp(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),gp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const l=pR(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const m=new lj(d),v=t(d.primaryKey,d.value,m);if(v instanceof de){const b=v.catch(S=>(m.done(),de.reject(S)));r.push(b)}m.isDone?i():null===m.G?d.continue():d.continue(m.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gp(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=pR(r.target.error);t(i)}})}let C1=!1;function pR(n){const e=cu.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C1||(C1=!0,setTimeout(()=>{throw r},0)),r}}return n}class dj{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){fh(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield hh(r)}yield t.nt(6e4)}))}}class hj{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return $e("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=w1(a);hR(l,r)>0&&(r=l)}),new xo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function T1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function b1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}zs.at=-1;class Rr{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new Rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rb(this.root,e,this.comparator,!0)}}class Rb{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Li{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Li.RED,this.left=i??Li.EMPTY,this.right=a??Li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Li(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Li.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1,Li.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Li(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new D1(this.data.getIterator())}getIteratorFrom(e){return new D1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class D1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function n_(n){return n.hasNext()?n.getNext():void 0}class Ro{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new Ro([])}unionWith(e){let t=new Vn(xr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ro(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return t_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ui(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const pj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ph(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=pj.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(n.seconds),nanos:Pr(n.nanos)}}function Pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _p(n){return"string"==typeof n?ui.fromBase64String(n):ui.fromUint8Array(n)}function gR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function S1(n){const e=n.mapValue.fields.__previous_value__;return gR(e)?S1(e):e}function aI(n){const e=ph(n.mapValue.fields.__local_write_time__.timestampValue);return new fr(e.seconds,e.nanos)}class gj{constructor(e,t,r,i,a,l,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=m}}class gh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gh&&e.projectId===this.projectId&&e.database===this.database}}function uI(n){return null==n}function lI(n){return 0===n&&1/n==-1/0}function A1(n){return"number"==typeof n&&Number.isInteger(n)&&!lI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const mh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pb={nullValue:"NULL_VALUE"};function yp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gR(n)?4:M1(n)?9007199254740991:10:ht()}function tl(n,e){if(n===e)return!0;const t=yp(n);if(t!==yp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return aI(n).isEqual(aI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ph(r.timestampValue),l=ph(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,_p(n.bytesValue).isEqual(_p(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pr(r.geoPointValue.latitude)===Pr(i.geoPointValue.latitude)&&Pr(r.geoPointValue.longitude)===Pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pr(r.integerValue)===Pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Pr(r.doubleValue),l=Pr(i.doubleValue);return a===l?lI(a)===lI(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return t_(n.arrayValue.values||[],e.arrayValue.values||[],tl);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(T1(a)!==T1(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!tl(a[d],l[d])))return!1;return!0}(n,e);default:return ht()}var i}function cI(n,e){return void 0!==(n.values||[]).find(t=>tl(t,e))}function _h(n,e){if(n===e)return 0;const t=yp(n),r=yp(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Pr(i.integerValue||i.doubleValue),d=Pr(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return x1(n.timestampValue,e.timestampValue);case 4:return x1(aI(n),aI(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=_p(i),d=_p(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let m=0;m<l.length&&m<d.length;m++){const v=zt(l[m],d[m]);if(0!==v)return v}return zt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=zt(Pr(i.latitude),Pr(a.latitude));return 0!==l?l:zt(Pr(i.longitude),Pr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let m=0;m<l.length&&m<d.length;++m){const v=_h(l[m],d[m]);if(v)return v}return zt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===mh.mapValue&&a===mh.mapValue)return 0;if(i===mh.mapValue)return 1;if(a===mh.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),m=a.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let b=0;b<d.length&&b<v.length;++b){const S=zt(d[b],v[b]);if(0!==S)return S;const P=_h(l[d[b]],m[v[b]]);if(0!==P)return P}return zt(d.length,v.length)}(n.mapValue,e.mapValue);default:throw ht()}}function x1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=ph(n),r=ph(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function r_(n){return mR(n)}function mR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ph(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_p(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=mR(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${mR(r.fields[d])}`;return a+"}"}(n.mapValue):ht();var e}function vp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _R(n){return!!n&&"integerValue"in n}function dI(n){return!!n&&"arrayValue"in n}function R1(n){return!!n&&"nullValue"in n}function P1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mb(n){return!!n&&"mapValue"in n}function hI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function M1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function mj(n){return"nullValue"in n?Pb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vp(gh.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function _j(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vp(gh.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?mh:ht()}function N1(n,e){const t=_h(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function k1(n,e){const t=_h(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fi{constructor(e){this.value=e}static empty(){return new Fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hI(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=hI(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Mb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Fi(hI(this.value))}}function O1(n){const e=[];return mp(n.fields,(t,r)=>{const i=new xr([t]);if(Mb(r)){const a=O1(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ro(e)}class tr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new tr(e,0,Ut.min(),Ut.min(),Fi.empty(),0)}static newFoundDocument(e,t,r){return new tr(e,1,t,Ut.min(),r,0)}static newNoDocument(e,t){return new tr(e,2,t,Ut.min(),Fi.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,Ut.min(),Fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yj{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ht=null}}function L1(n,e=null,t=[],r=[],i=null,a=null,l=null){return new yj(n,e,t,r,i,a,l)}function wp(n){const e=Je(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+r_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),uI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>r_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>r_(r)).join(",")),e.ht=t}return e.ht}function fI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Sj(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!tl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!j1(n.startAt,e.startAt)&&j1(n.endAt,e.endAt)}function Nb(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function kb(n,e){return n.filters.filter(t=>t instanceof Ui&&t.field.isEqual(e))}function F1(n,e,t){let r=Pb,i=!0;for(const a of kb(n,e)){let l=Pb,d=!0;switch(a.op){case"<":case"<=":l=mj(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=Pb}N1({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];N1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function U1(n,e,t){let r=mh,i=!0;for(const a of kb(n,e)){let l=mh,d=!0;switch(a.op){case">=":case">":l=_j(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=mh}k1({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];k1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Ui extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new wj(e,t,r):"array-contains"===t?new Cj(e,r):"in"===t?new Tj(e,r):"not-in"===t?new bj(e,r):"array-contains-any"===t?new Dj(e,r):new Ui(e,t,r)}static lt(e,t,r){return"in"===t?new Ij(e,r):new Ej(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(_h(t,this.value)):null!==t&&yp(this.value)===yp(t)&&this.ft(_h(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wj extends Ui{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class Ij extends Ui{constructor(e,t){super(e,"in",t),this.keys=V1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ej extends Ui{constructor(e,t){super(e,"not-in",t),this.keys=V1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function V1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class Cj extends Ui{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dI(t)&&cI(t.arrayValue,this.value)}}class Tj extends Ui{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cI(this.value.arrayValue,t)}}class bj extends Ui{constructor(e,t){super(e,"not-in",t)}matches(e){if(cI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cI(this.value.arrayValue,t)}}class Dj extends Ui{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cI(this.value.arrayValue,r))}}class yh{constructor(e,t){this.position=e,this.inclusive=t}}class i_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Sj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function B1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):_h(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function j1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tl(n.position[t],e.position[t]))return!1;return!0}class wc{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=m,this._t=null,this.wt=null}}function H1(n,e,t,r,i,a,l,d){return new wc(n,e,t,r,i,a,l,d)}function s_(n){return new wc(n)}function $1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function yR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vR(n){for(const e of n.filters)if(e.dt())return e.field;return null}function wR(n){return null!==n.collectionGroup}function o_(n){const e=Je(n);if(null===e._t){e._t=[];const t=vR(e),r=yR(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new i_(t)),e._t.push(new i_(xr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new i_(xr.keyField(),a))}}}return e._t}function Cs(n){const e=Je(n);if(!e.wt)if("F"===e.limitType)e.wt=L1(e.path,e.collectionGroup,o_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of o_(e))t.push(new i_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new yh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new yh(e.startAt.position,e.startAt.inclusive):null;e.wt=L1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ob(n,e,t){return new wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pI(n,e){return fI(Cs(n),Cs(e))&&n.limitType===e.limitType}function W1(n){return`${wp(Cs(n))}|lt:${n.limitType}`}function IR(n){return`Query(target=${function vj(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${r_(r.value)}`;var r}).join(", ")}]`),uI(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>r_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>r_(t)).join(",")),`Target(${e})`}(Cs(n))}; limitType=${n.limitType})`}function ER(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=B1(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,o_(t),r)||t.endAt&&!function(i,a,l){const d=B1(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,o_(t),r)));var t,r}function G1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function z1(n){return(e,t)=>{let r=!1;for(const i of o_(n)){const a=Aj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Aj(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),m=l.data.field(i);return null!==d&&null!==m?_h(d,m):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function q1(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lI(e)?"-0":e}}function K1(n){return{integerValue:""+n}}function Z1(n,e){return A1(e)?K1(e):q1(n,e)}class Lb{constructor(){this._=void 0}}function xj(n,e,t){return n instanceof a_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Ip?Q1(n,e):n instanceof Ep?J1(n,e):function(r,i){const a=Y1(r,i),l=X1(a)+X1(r.yt);return _R(a)&&_R(r.yt)?K1(l):q1(r.It,l)}(n,e)}function Rj(n,e,t){return n instanceof Ip?Q1(n,e):n instanceof Ep?J1(n,e):t}function Y1(n,e){return n instanceof u_?_R(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class a_ extends Lb{}class Ip extends Lb{constructor(e){super(),this.elements=e}}function Q1(n,e){const t=eL(e);for(const r of n.elements)t.some(i=>tl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ep extends Lb{constructor(e){super(),this.elements=e}}function J1(n,e){let t=eL(e);for(const r of n.elements)t=t.filter(i=>!tl(i,r));return{arrayValue:{values:t}}}class u_ extends Lb{constructor(e,t){super(),this.It=e,this.yt=t}}function X1(n){return Pr(n.integerValue||n.doubleValue)}function eL(n){return dI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class gI{constructor(e,t){this.field=e,this.transform=t}}class Mj{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ub{}function tL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new c_(n.key,pr.none()):new l_(n.key,n.data,pr.none());{const t=n.data,r=Fi.empty();let i=new Vn(xr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Ic(n.key,r,new Ro(i.toArray()),pr.none())}}function Nj(n,e,t){n instanceof l_?function(r,i,a){const l=r.value.clone(),d=iL(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ic?function(r,i,a){if(!Fb(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=iL(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(rL(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function mI(n,e,t,r){return n instanceof l_?function(i,a,l,d){if(!Fb(i.precondition,a))return l;const m=i.value.clone(),v=sL(i.fieldTransforms,d,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ic?function(i,a,l,d){if(!Fb(i.precondition,a))return l;const m=sL(i.fieldTransforms,d,a),v=a.data;return v.setAll(rL(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,Fb(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function kj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Y1(r.transform,i||null);null!=a&&(null===t&&(t=Fi.empty()),t.set(r.field,a))}return t||null}function nL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&t_(t,r,(i,a)=>function Pj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ip&&r instanceof Ip||t instanceof Ep&&r instanceof Ep?t_(t.elements,r.elements,tl):t instanceof u_&&r instanceof u_?tl(t.yt,r.yt):t instanceof a_&&r instanceof a_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class l_ extends Ub{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ic extends Ub{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function rL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function iL(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,Rj(l,d,t[i]))}return r}function sL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,xj(a,l,e))}return r}class c_ extends Ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CR extends Ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Oj{constructor(e){this.count=e}}var Kr,mn;function oL(n){switch(n){default:return ht();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function aL(n){if(void 0===n)return Ur("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Kr.OK:return _e.OK;case Kr.CANCELLED:return _e.CANCELLED;case Kr.UNKNOWN:return _e.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return _e.INTERNAL;case Kr.UNAVAILABLE:return _e.UNAVAILABLE;case Kr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Kr.NOT_FOUND:return _e.NOT_FOUND;case Kr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Kr.ABORTED:return _e.ABORTED;case Kr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Kr.DATA_LOSS:return _e.DATA_LOSS;default:return ht()}}(mn=Kr||(Kr={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class vh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return b1(this.inner)}size(){return this.innerSize}}const Lj=new Rr(Ke.comparator);function qs(){return Lj}const uL=new Rr(Ke.comparator);function _I(...n){let e=uL;for(const t of n)e=e.insert(t.key,t);return e}function lL(n){let e=uL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nl(){return yI()}function cL(){return yI()}function yI(){return new vh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Fj=new Rr(Ke.comparator),Uj=new Vn(Ke.comparator);function Jt(...n){let e=Uj;for(const t of n)e=e.add(t);return e}const Vj=new Vn(zt);function Vb(){return Vj}class vI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vI(Ut.min(),i,Vb(),qs(),Jt())}}class wI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wI(r,t,Jt(),Jt(),Jt())}}class Bb{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class dL{constructor(e,t){this.targetId=e,this.At=t}}class hL{constructor(e,t,r=ui.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class fL{constructor(){this.Rt=0,this.bt=gL(),this.Pt=ui.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Jt(),t=Jt(),r=Jt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new wI(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=gL()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Bj{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=qs(),this.qt=pL(),this.Kt=new Vn(zt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(Nb(a))if(0===r){const l=new Ke(a.path);this.jt(t,l,tr.newNoDocument(l,Ut.min()))}else Ft(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&Nb(d.target)){const m=new Ke(d.target.path);null!==this.Ut.get(m)||this.ee(l,m)||this.jt(l,m,tr.newNoDocument(m,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Jt();this.qt.forEach((a,l)=>{let d=!0;l.forEachWhile(m=>{const v=this.Xt(m);return!v||2===v.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new vI(e,t,this.Kt,this.Ut,r);return this.Ut=qs(),this.qt=pL(),this.Kt=new Vn(zt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new fL,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Vn(zt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new fL),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function pL(){return new Rr(Ke.comparator)}function gL(){return new Rr(Ke.comparator)}const jj={asc:"ASCENDING",desc:"DESCENDING"},Hj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class $j{constructor(e,t){this.databaseId=e,this.gt=t}}function II(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mL(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Wj(n,e){return II(n,e.toTimestamp())}function Ei(n){return Ft(!!n),Ut.fromTimestamp(function(e){const t=ph(e);return new fr(t.seconds,t.nanos)}(n))}function TR(n,e){return(t=n,new gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function _L(n){const e=gn.fromString(n);return Ft(bL(e)),e}function EI(n,e){return TR(n.databaseId,e.path)}function rl(n,e){const t=_L(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(vL(t))}function bR(n,e){return TR(n.databaseId,e)}function yL(n){const e=_L(n);return 4===e.length?gn.emptyPath():vL(e)}function CI(n){return new gn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vL(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function wL(n,e,t){return{name:EI(n,e),fields:t.value.mapValue.fields}}function IL(n,e,t){const r=rl(n,e.name),i=Ei(e.updateTime),a=new Fi({mapValue:{fields:e.fields}}),l=tr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function TI(n,e){let t;if(e instanceof l_)t={update:wL(n,e.key,e.value)};else if(e instanceof c_)t={delete:EI(n,e.key)};else if(e instanceof Ic)t={update:wL(n,e.key,e.data),updateMask:Xj(e.fieldMask)};else{if(!(e instanceof CR))return ht();t={verify:EI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof a_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ip)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ep)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof u_)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Wj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function DR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?pr.updateTime(Ei(i.updateTime)):void 0!==i.exists?pr.exists(i.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(Ft("REQUEST_TIME"===l.setToServerValue),d=new a_):"appendMissingElements"in l?d=new Ip(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Ep(l.removeAllFromArray.values||[]):"increment"in l?d=new u_(a,l.increment):ht();const m=xr.fromServerFormat(l.fieldPath);return new gI(m,d)}(n,i)):[];var i;if(e.update){const i=rl(n,e.update.name),a=new Fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ro((e.updateMask.fieldPaths||[]).map(v=>xr.fromServerFormat(v)));return new Ic(i,a,l,t,r)}return new l_(i,a,t,r)}if(e.delete){const i=rl(n,e.delete);return new c_(i,t)}if(e.verify){const i=rl(n,e.verify);return new CR(i,t)}return ht()}function EL(n,e){return{documents:[bR(n,e.path)]}}function SR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(b=>function(S){if("=="===S.op){if(P1(S.value))return{unaryFilter:{field:d_(S.field),op:"IS_NAN"}};if(R1(S.value))return{unaryFilter:{field:d_(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(P1(S.value))return{unaryFilter:{field:d_(S.field),op:"IS_NOT_NAN"}};if(R1(S.value))return{unaryFilter:{field:d_(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:d_(S.field),op:Yj(S.op),value:S.value}}}(b));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:d_((b=v).field),direction:Zj(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.gt||uI(v)?v:{value:v});var v,d,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function CL(n){let e=yL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=TL(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new i_(h_((S=b).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let d=null;t.limit&&(d=function(b){let S;return S="object"==typeof b?b.value:b,uI(S)?null:S}(t.limit));let m=null;var b;t.startAt&&(m=new yh((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new yh(b.values||[],!b.before)}(t.endAt)),H1(e,i,l,a,d,"F",m,v)}function TL(n){return n?void 0!==n.unaryFilter?[Jj(n)]:void 0!==n.fieldFilter?[Qj(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>TL(e)).reduce((e,t)=>e.concat(t)):ht():[]}function Zj(n){return jj[n]}function Yj(n){return Hj[n]}function d_(n){return{fieldPath:n.canonicalString()}}function h_(n){return xr.fromServerFormat(n.fieldPath)}function Qj(n){return Ui.create(h_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function Jj(n){switch(n.unaryFilter.op){case"IS_NAN":const e=h_(n.unaryFilter.field);return Ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=h_(n.unaryFilter.field);return Ui.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=h_(n.unaryFilter.field);return Ui.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=h_(n.unaryFilter.field);return Ui.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function Xj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DL(e)),e=eH(n.get(t),e);return DL(e)}function eH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function DL(n){return n+"\x01\x01"}function il(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),gn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ht(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let m;0===i.length?m=d:(i+=d,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ht()}a=l+2}return new gn(r)}const SL=["userId","batchId"];function jb(n,e){return[n,Ts(e)]}function AL(n,e,t){return[n,Ts(e),t]}const tH={},nH=["prefixPath","collectionGroup","readTime","documentId"],rH=["prefixPath","collectionGroup","documentId"],iH=["collectionGroup","readTime","prefixPath","documentId"],sH=["canonicalId","targetId"],oH=["targetId","path"],aH=["path","targetId"],uH=["collectionId","parent"],lH=["indexId","uid"],cH=["uid","sequenceNumber"],dH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hH=["indexId","uid","orderedDocumentKey"],fH=["userId","collectionPath","documentId"],pH=["userId","collectionPath","largestBatchId"],gH=["userId","collectionGroup","largestBatchId"],xL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mH=[...xL,"documentOverlays"],RL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PL=RL,_H=[...PL,"indexConfiguration","indexState","indexEntries"];class AR extends E1{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ci(n,e){const t=Je(n);return cu.M(t.ie,e)}class xR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Nj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=mI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=mI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cL();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const m=tL(l,d);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&t_(this.mutations,e.mutations,(t,r)=>nL(t,r))&&t_(this.baseMutations,e.baseMutations,(t,r)=>nL(t,r))}}class RR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=Fj;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new RR(e,t,r,i)}}class PR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wh{constructor(e,t,r,i,a=Ut.min(),l=Ut.min(),d=ui.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new wh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new wh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new wh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ML{constructor(e){this.re=e}}function NL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:EI(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:II(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cp(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Cp(e.version)}}var i,a;return r}function Hb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tp(n){const e=new fr(n.seconds,n.nanoseconds);return Ut.fromTimestamp(e)}function bp(n,e){const t=(e.baseMutations||[]).map(a=>DR(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>DR(n.re,a)),i=fr.fromMillis(e.localWriteTimeMs);return new xR(e.batchId,i,t,r)}function bI(n){const e=Tp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tp(n.lastLimboFreeSnapshotVersion):Ut.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=Cs(s_(yL(i.documents[0])))):r=Cs(CL(n.query)),new wh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ui.fromBase64String(n.resumeToken))}function kL(n,e){const t=Cp(e.snapshotVersion),r=Cp(e.lastLimboFreeSnapshotVersion);let i;i=Nb(e.target)?EL(n.re,e.target):SR(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function MR(n){const e=CL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ob(e,e.limit,"L"):e}function NR(n,e){return new PR(e.largestBatchId,DR(n.re,e.overlayMutation))}function OL(n,e){const t=e.path.lastSegment();return[n,Ts(e.path.popLast()),t]}function LL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Cp(r.readTime),documentKey:Ts(r.documentKey.path),largestBatchId:r.largestBatchId}}class vH{getBundleMetadata(e,t){return FL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Tp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return FL(e).put({bundleId:(r=t).id,createTime:Cp(Ei(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return UL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:MR(i.bundledQuery),readTime:Tp(i.readTime)};var i})}saveNamedQuery(e,t){return UL(e).put({name:(r=t).name,readTime:Cp(Ei(r.readTime)),bundledQuery:r.bundledQuery});var r}}function FL(n){return Ci(n,"bundles")}function UL(n){return Ci(n,"namedQueries")}class $b{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new $b(e,t.uid||"")}getOverlay(e,t){return DI(e).get(OL(this.userId,t)).next(r=>r?NR(this.It,r):null)}getOverlays(e,t){const r=nl();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new PR(t,l);i.push(this.ue(e,d))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ts(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(DI(e).Y("collectionPathOverlayIndex",d))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=nl(),a=Ts(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return DI(e).W("collectionPathOverlayIndex",l).next(d=>{for(const m of d){const v=NR(this.It,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=nl();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return DI(e).Z({index:"collectionGroupOverlayIndex",range:d},(m,v,b)=>{const S=NR(this.It,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):b.done()}).next(()=>a)}ue(e,t){return DI(e).put(function(r,i,a){const[l,d,m]=OL(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:TI(r.re,a.mutation)}}(this.It,this.userId,t))}}function DI(n){return Ci(n,"documentOverlays")}class Dp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Pr(e.integerValue));else if("doubleValue"in e){const r=Pr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),lI(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(_p(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?M1(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ht()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function wH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function VL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=wH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Dp.Te=new Dp;class IH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=VL(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=VL(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EH{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class CH{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class SI{constructor(){this.Be=new IH,this.Le=new EH(this.Be),this.Ue=new CH(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Sp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Sp(this.indexId,this.documentKey,this.arrayValue,r)}}function Ap(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=BL(n.arrayValue,e.arrayValue),0!==t?t:(t=BL(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function BL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class TH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=dR(e);if(void 0!==t&&!this.ze(t))return!1;const r=pp(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class bH{constructor(){this.Ye=new kR}addToCollectionParentIndex(e,t){return this.Ye.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(xo.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class kR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vn(gn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(gn.comparator)).toArray()}}const Wb=new Uint8Array(0);class DH{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new kR,this.Ze=new vh(r=>wp(r),(r,i)=>fI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Ts(i)};return jL(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[y1(t),""],!1,!0);return jL(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(il(l.parent))}return r})}addFieldIndex(e,t){const r=Gb(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=xI(e);return a.next(d=>{l.put(LL(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Gb(e),i=xI(e),a=AI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=AI(e);let i=!0;const a=new Map;return de.forEach(this.tn(t),l=>this.en(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=Jt();const d=[];return de.forEach(a,(m,v)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${wp(t)}`);const S=function(ut,ft){const At=dR(ft);if(void 0===At)return null;for(const Bt of kb(ut,At.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(v,m),P=function(ut,ft){const At=new Map;for(const Bt of pp(ft))for(const wr of kb(ut,Bt.fieldPath))switch(wr.op){case"==":case"in":At.set(Bt.fieldPath.canonicalString(),wr.value);break;case"not-in":case"!=":return At.set(Bt.fieldPath.canonicalString(),wr.value),Array.from(At.values())}return null}(v,m),V=function(ut,ft){const At=[];let Bt=!0;for(const wr of pp(ft)){const du=0===wr.kind?F1(ut,wr.fieldPath,ut.startAt):U1(ut,wr.fieldPath,ut.startAt);At.push(du.value),Bt&&(Bt=du.inclusive)}return new yh(At,Bt)}(v,m),G=function(ut,ft){const At=[];let Bt=!0;for(const wr of pp(ft)){const du=0===wr.kind?U1(ut,wr.fieldPath,ut.endAt):F1(ut,wr.fieldPath,ut.endAt);At.push(du.value),Bt&&(Bt=du.inclusive)}return new yh(At,Bt)}(v,m),ce=this.nn(m,v,V),ye=this.nn(m,v,G),ot=this.sn(m,v,P),dt=this.rn(m.indexId,S,ce,V.inclusive,ye,G.inclusive,ot);return de.forEach(dt,ut=>r.J(ut,t.limit).next(ft=>{ft.forEach(At=>{const Bt=Ke.fromSegments(At.documentKey);l.has(Bt)||(l=l.add(Bt),d.push(Bt))})}))}).next(()=>d)}return de.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,d){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),b=[];for(let S=0;S<m;++S){const P=t?this.on(t[S/v]):Wb,V=this.un(e,P,r[S%v],i),G=this.cn(e,P,a[S%v],l),ce=d.map(ye=>this.un(e,P,ye,!0));b.push(...this.createRange(V,G,ce))}return b}un(e,t,r,i){const a=new Sp(e,Ke.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Sp(e,Ke.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new TH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;return de.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let d=new Vn(xr.comparator),m=!1;for(const v of l.filters){const b=v;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?m=!0:d=d.add(b.field))}for(const v of l.orderBy)v.field.isKeyField()||(d=d.add(v.field));return d.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new SI;for(const i of pp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Dp.Te.ce(a,l)}return r.$e()}on(e){const t=new SI;return Dp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new SI;return Dp.Te.ce(vp(this.databaseId,t),r.qe(function(i){const a=pp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new SI);let a=0;for(const l of pp(e)){const d=r[a++];for(const m of i)if(this.ln(t,l.fieldPath)&&dI(d))i=this.fn(i,l,d);else{const v=m.qe(l.kind);Dp.Te.ce(d,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const m=new SI;m.seed(d.$e()),Dp.Te.ce(l,m.qe(t.kind)),a.push(m)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Ui&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Gb(e),i=xI(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return de.forEach(a,d=>i.get([d.indexId,this.uid]).next(m=>{l.push(function(v,b){const S=b?new sI(b.sequenceNumber,new xo(Tp(b.readTime),new Ke(il(b.documentKey)),b.largestBatchId)):sI.empty(),P=v.fields.map(([V,G])=>new Ab(xr.fromServerFormat(V),G));return new Sb(v.indexId,v.collectionGroup,P,S)}(d,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Gb(e),a=xI(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>de.forEach(d,m=>a.put(LL(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,m=>this.wn(e,i,m).next(v=>{const b=this.mn(a,m);return v.isEqual(b)?de.resolve():this.gn(e,a,m,v,b)}))))})}yn(e,t,r,i){return AI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return AI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=AI(e);let a=new Vn(Ap);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,d)=>{a=a.add(new Sp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}mn(e,t){let r=new Vn(Ap);const i=this.an(t,e);if(null==i)return r;const a=dR(t);if(null!=a){const l=e.data.field(a.fieldPath);if(dI(l))for(const d of l.arrayValue.values||[])r=r.add(new Sp(t.indexId,e.key,this.on(d),i))}else r=r.add(new Sp(t.indexId,e.key,Wb,i));return r}gn(e,t,r,i,a){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,m,v,b,S){const P=d.getIterator(),V=m.getIterator();let G=n_(P),ce=n_(V);for(;G||ce;){let ye=!1,ot=!1;if(G&&ce){const dt=v(G,ce);dt<0?ot=!0:dt>0&&(ye=!0)}else null!=G?ot=!0:ye=!0;ye?(b(ce),ce=n_(V)):ot?(S(G),G=n_(P)):(G=n_(P),ce=n_(V))}}(i,a,Ap,d=>{l.push(this.yn(e,t,r,d))},d=>{l.push(this.pn(e,t,r,d))}),de.waitFor(l)}_n(e){let t=1;return xI(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>Ap(l,d)).filter((l,d,m)=>!d||0!==Ap(l,m[d-1]));const i=[];i.push(e);for(const l of r){const d=Ap(l,e),m=Ap(l,t);if(0===d)i[0]=e.Ke();else if(d>0&&m<0)i.push(l),i.push(l.Ke());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Wb,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Wb,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HL)}getMinOffset(e,t){return de.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ht())).next(HL)}}function jL(n){return Ci(n,"collectionParents")}function AI(n){return Ci(n,"indexEntries")}function Gb(n){return Ci(n,"indexConfiguration")}function xI(n){return Ci(n,"indexState")}function HL(n){Ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;hR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xo(e.readTime,e.documentKey,t)}const $L={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ks{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ks(e,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function WL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:l},(b,S,P)=>(d++,P.delete()));a.push(m.next(()=>{Ft(1===d)}));const v=[];for(const b of t.mutations){const S=AL(e,b.key.path,t.batchId);a.push(i.delete(S)),v.push(b.key)}return de.waitFor(a).next(()=>v)}function zb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Ks.DEFAULT_COLLECTION_PERCENTILE=10,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ks.DEFAULT=new Ks(41943040,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ks.DISABLED=new Ks(-1,0,0);class qb{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new qb(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ih(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=f_(e),l=Ih(e);return l.add({}).next(d=>{Ft("number"==typeof d);const m=new xR(d,t,r,i),v=function(P,V,G){const ce=G.baseMutations.map(ot=>TI(P.re,ot)),ye=G.mutations.map(ot=>TI(P.re,ot));return{userId:V,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ce,mutations:ye}}(this.It,this.userId,m),b=[];let S=new Vn((P,V)=>zt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=AL(this.userId,P.key.path,d);S=S.add(P.key.path.popLast()),b.push(l.put(v)),b.push(a.put(V,tH))}return S.forEach(P=>{b.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[d]=m.keys()}),de.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return Ih(e).get(t).next(r=>r?(Ft(r.userId===this.userId),bp(this.It,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ih(e).Z({index:"userMutationsIndex",range:i},(l,d,m)=>{d.userId===this.userId&&(Ft(d.batchId>=r),a=bp(this.It,d)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ih(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ih(e).W("userMutationsIndex",t).next(r=>r.map(i=>bp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return f_(e).Z({range:i},(l,d,m)=>{const[v,b,S]=l,P=il(b);if(v===this.userId&&t.path.isEqual(P))return Ih(e).get(S).next(V=>{if(!V)throw ht();Ft(V.userId===this.userId),a.push(bp(this.It,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(zt);const i=[];return t.forEach(a=>{const l=jb(this.userId,a.path),d=IDBKeyRange.lowerBound(l),m=f_(e).Z({range:d},(v,b,S)=>{const[P,V,G]=v,ce=il(V);P===this.userId&&a.path.isEqual(ce)?r=r.add(G):S.done()});i.push(m)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=jb(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Vn(zt);return f_(e).Z({range:l},(m,v,b)=>{const[S,P,V]=m,G=il(P);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(d=d.add(V)):b.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ih(e).get(a).next(l=>{if(null===l)throw ht();Ft(l.userId===this.userId),r.push(bp(this.It,l))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return WL(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return f_(e).Z({range:r},(a,l,d)=>{if(a[0]===this.userId){const m=il(a[1]);i.push(m)}else d.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return GL(e,this.userId,t)}Rn(e){return zL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GL(n,e,t){const r=jb(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return f_(n).Z({range:a,X:!0},(d,m,v)=>{const[b,S,P]=d;b===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Ih(n){return Ci(n,"mutations")}function f_(n){return Ci(n,"documentMutations")}function zL(n){return Ci(n,"mutationQueues")}class xp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new xp(0)}static vn(){return new xp(-1)}}class SH{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new xp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ut.fromTimestamp(new fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>p_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return p_(e).Z((l,d)=>{const m=bI(d);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return p_(e).Z((r,i)=>{const a=bI(i);t(a)})}Vn(e){return qL(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}Sn(e,t){return qL(e).put("targetGlobalKey",t)}Dn(e,t){return p_(e).put(kL(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return p_(e).Z({range:i,index:"queryTargetsIndex"},(l,d,m)=>{const v=bI(d);fI(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Eh(e);return t.forEach(l=>{const d=Ts(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=Eh(e);return de.forEach(t,a=>{const l=Ts(a.path);return de.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Eh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Eh(e);let a=Jt();return i.Z({range:r,X:!0},(l,d,m)=>{const v=il(l[1]),b=new Ke(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Ts(t.path),i=IDBKeyRange.bound([r],[y1(r)],!1,!0);let a=0;return Eh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}se(e,t){return p_(e).get(t).next(r=>r?bI(r):null)}}function p_(n){return Ci(n,"targets")}function qL(n){return Ci(n,"targetGlobal")}function Eh(n){return Ci(n,"targetDocuments")}function KL([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class AH{constructor(e){this.xn=e,this.buffer=new Vn(KL),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fh(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield hh(r)}yield t.Fn(3e5)}))}}class RH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(zs.at);const r=new AH(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve($L)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$L):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,d,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,d=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),lR()<=wo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(m-d)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class PH{constructor(e,t){this.db=e,this.garbageCollector=new RH(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Kb(e,r)}removeReference(e,t,r){return Kb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Kb(e,t)}Gn(e,t){return function(r,i){let a=!1;return zL(r).tt(l=>GL(r,l,i).next(d=>(d&&(a=!0),de.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,d)=>{if(d<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ut.min()),Eh(e).delete([0,Ts(l.path)])))});i.push(m)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Kb(e,t)}Kn(e,t){const r=Eh(e);let i,a=zs.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:m,sequenceNumber:v})=>{0===l?(a!==zs.at&&t(new Ke(il(i)),a),a=v,i=m):a=zs.at}).next(()=>{a!==zs.at&&t(new Ke(il(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kb(n,e){return Eh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ts(e.path),sequenceNumber:r}));var r}class ZL{constructor(){this.changes=new vh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MH{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rp(e).put(r)}removeEntry(e,t,r){return Rp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Hb(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return Rp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(RI(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return Rp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(RI(t))},(i,a)=>{r={document:this.jn(t,a),size:zb(a)}}).next(()=>r)}getEntries(e,t){let r=qs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=qs(),i=new Rr(Ke.comparator);return this.zn(e,t,(a,l)=>{const d=this.jn(a,l);r=r.insert(a,d),i=i.insert(a,zb(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Vn(XL);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(RI(i.first()),RI(i.last())),l=i.getIterator();let d=l.getNext();return Rp(e).Z({index:"documentKeyIndex",range:a},(m,v,b)=>{const S=Ke.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&XL(d,S)<0;)r(d,null),d=l.getNext();d&&d.isEqual(S)&&(r(d,v),d=l.hasNext()?l.getNext():null),d?b.j(RI(d)):b.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Hb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rp(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=qs();for(const m of l){const v=this.jn(Ke.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);d=d.insert(v.key,v)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=qs();const l=JL(t,r),d=JL(t,xo.max());return Rp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(m,v,b)=>{const S=this.jn(Ke.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new NH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QL(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Qn(e,t){return QL(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function yH(n,e){let t;if(e.document)t=IL(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Tp(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=Ke.fromSegments(e.unknownDocument.path),i=Tp(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new fr(r[0],r[1]);return Ut.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ut.min()))return r}return tr.newInvalidDocument(e)}}function YL(n){return new MH(n)}class NH extends ZL{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new vh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Vn((a,l)=>zt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const m=NL(this.Yn.It,l);i=i.add(a.path.popLast()),r+=zb(m)-d.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=d.size,this.trackRemovals){const m=NL(this.Yn.It,l.convertToNoDocument(Ut.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function QL(n){return Ci(n,"remoteDocumentGlobal")}function Rp(n){return Ci(n,"remoteDocumentsV14")}function RI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JL(n,e){const t=e.documentKey.path.toArray();return[n,Hb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=zt(t[a],r[a]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class kH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&mI(r.mutation,i,Ro.empty(),fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=nl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=_I();return a.forEach((d,m)=>{l=l.insert(d,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=nl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let a=qs();const l=yI(),d=yI();return t.forEach((m,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof Ic)?a=a.insert(v.key,v):void 0!==b&&(l.set(v.key,b.mutation.getFieldMask()),mI(b.mutation,v,b.mutation.getFieldMask(),fr.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,b)=>l.set(v,b)),t.forEach((v,b)=>{var S;return d.set(v,new kH(b,null!==(S=l.get(v))&&void 0!==S?S:null))}),d))}recalculateAndSaveOverlays(e,t){const r=yI();let i=new Rr((l,d)=>l-d),a=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let b=r.get(m)||Ro.empty();b=d.applyToLocalView(v,b),r.set(m,b);const S=(i.get(d.batchId)||Jt()).add(m);i=i.insert(d.batchId,S)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),v=m.key,b=m.value,S=cL();b.forEach(P=>{if(!a.has(P)){const V=tL(t.get(P),r.get(P));null!==V&&S.set(P,V),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return de.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(nl());let d=-1,m=a;return l.next(v=>de.forEach(v,(b,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(b)?de.resolve():this.getBaseDocument(e,b,S).next(P=>{m=m.insert(b,P)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Jt())).next(b=>({batchId:d,changes:lL(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=_I();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=_I();return this.indexManager.getCollectionParents(e,i).next(l=>de.forEach(l,d=>{const m=(v=t,b=d.child(i),new wc(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((b,S)=>{a=a.insert(b,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,tr.newInvalidDocument(v)))});let l=_I();return i.forEach((d,m)=>{const v=a.get(d);void 0!==v&&mI(v.mutation,m,Ro.empty(),fr.now()),ER(t,m)&&(l=l.insert(d,m))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(tr.newInvalidDocument(t))}}class OH{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ei(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:MR(r.bundledQuery),readTime:Ei(r.readTime)}),de.resolve();var r}}class LH{constructor(){this.overlays=new Rr(Ke.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nl();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=nl(),a=t.length+1,l=new Ke(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const m=d.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Rr((v,b)=>v-b);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=nl(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const d=nl(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,b)=>d.set(v,b)),!(d.size()>=i)););return de.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new PR(t,r));let a=this.es.get(t);void 0===a&&(a=Jt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class OR{constructor(){this.ns=new Vn(Ti.ss),this.rs=new Vn(Ti.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ti(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new gn([])),r=new Ti(t,e),i=new Ti(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new gn([])),r=new Ti(t,e),i=new Ti(t,e+1);let a=Jt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ti(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||zt(e._s,t._s)}static os(e,t){return zt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class FH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Vn(Ti.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new xR(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new Ti(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);a.push(d)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(zt);return t.forEach(i=>{const a=new Ti(i,0),l=new Ti(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],d=>{r=r.add(d._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const l=new Ti(new Ke(a),0);let d=new Vn(zt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(d=d.add(m._s)),!0)},l),de.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const a=new Ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ti(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UH{constructor(e){this.Es=e,this.docs=new Rr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=qs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=qs();const a=new Ke(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:m}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||hR(w1(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VH(this)}getSize(e){return de.resolve(this.size)}}class VH extends ZL{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class BH{constructor(e){this.persistence=e,this.Rs=new vh(t=>wp(t),fI),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.bs=0,this.Ps=new OR,this.targetCount=0,this.vs=xp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new xp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class tF{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new zs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new BH(this),this.indexManager=new bH,this.remoteDocumentCache=new UH(r=>this.referenceDelegate.xs(r)),this.It=new ML(t),this.Ns=new OH(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new FH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new jH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class jH extends E1{constructor(e){super(),this.currentSequenceNumber=e}}class Zb{constructor(e){this.persistence=e,this.Fs=new OR,this.$s=null}static Bs(e){return new Zb(e)}get Ls(){if(this.$s)return this.$s;throw ht()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Ke.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Ut.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class HH{constructor(e){this.It=e}$(e,t,r,i){const a=new xb("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SL,{unique:!0}),d.createObjectStore("documentMutations"),nF(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),nF(e)),l=l.next(()=>function(d){const m=d.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,m){return m.store("mutations").W().next(v=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SL,{unique:!0});const b=m.store("mutations"),S=v.map(P=>b.put(P));return de.waitFor(S)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const m=d.createObjectStore("documentOverlays",{keyPath:fH});m.createIndex("collectionPathOverlayIndex",pH,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",gH,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const m=d.createObjectStore("remoteDocumentsV14",{keyPath:nH});m.createIndex("documentKeyIndex",rH),m.createIndex("collectionGroupIndex",iH)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:lH}).createIndex("sequenceNumberIndex",cH,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:dH}).createIndex("documentKeyIndex",hH,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=zb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>de.forEach(d,m=>{Ft(m.userId===a.userId);const v=bp(this.It,m);return WL(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,d)=>{const m=new gn(l),v=[0,Ts(m)];a.push(t.get(v).next(b=>b?de.resolve():t.put({targetId:0,path:Ts(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:uH});const r=t.store("collectionParents"),i=new kR,a=l=>{if(i.add(l)){const d=l.lastSegment(),m=l.popLast();return r.put({collectionId:d,parent:Ts(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const m=new gn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,m],v)=>{const b=il(d);return a(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=bI(i),l=kL(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const d=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Ke(gn.fromString(v.document.name).popFirst(5)):v.noDocument?Ke.fromSegments(v.noDocument.path):v.unknownDocument?Ke.fromSegments(v.unknownDocument.path):ht()).path.toArray();var v;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(b))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=YL(this.It),a=new tF(Zb.Bs,this.It.re);return r.W().next(l=>{const d=new Map;return l.forEach(m=>{var v;let b=null!==(v=d.get(m.userId))&&void 0!==v?v:Jt();bp(this.It,m).keys().forEach(S=>b=b.add(S)),d.set(m.userId,b)}),de.forEach(d,(m,v)=>{const b=new Ii(v),S=$b.oe(this.It,b),P=a.getIndexManager(b),V=qb.oe(b,this.It,P,a.referenceDelegate);return new eF(i,V,S,P).recalculateAndSaveOverlaysForDocumentKeys(new AR(t,zs.at),m).next()})})}}function nF(n){n.createObjectStore("targetDocuments",{keyPath:oH}).createIndex("documentTargetsIndex",aH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sH,{unique:!0}),n.createObjectStore("targetGlobal")}const LR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class FR{constructor(e,t,r,i,a,l,d,m,v,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=d,this.Js=v,this.Ys=b,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!FR.C())throw new Fe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PH(this,i),this.ii=t+"main",this.It=new ML(m),this.ri=new cu(this.ii,this.Xs,new HH(this.It)),this.Cs=new SH(this.referenceDelegate,this.It),this.remoteDocumentCache=YL(this.It),this.Ns=new vH,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&Ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,LR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new zs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fh(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return PI(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return Yb(e).delete(this.clientId)}yi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ci(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),d=a.filter(m=>-1===l.indexOf(m));return de.forEach(d,m=>i.delete(m.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):PI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,LR);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yb(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new AR(t,zs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Yb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return qb.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new DH(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return $b.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?_H:14===l?PL:13===l?RL:12===l?mH:11===l?xL:void ht();var l;let d;return this.ri.runTransaction(e,i,a,m=>(d=new AR(m,this.Ss?this.Ss.next():zs.at),"readwrite-primary"===t?this.fi(d).next(v=>!!v||this.di(d)).next(v=>{if(!v)throw Ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(_e.FAILED_PRECONDITION,I1);return r(d)}).next(v=>this.wi(d).next(()=>v)):this.Vi(d).next(()=>r(d)))).then(m=>(d.raiseOnCommittedEvent(),m))}Vi(e){return PI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(_e.FAILED_PRECONDITION,LR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return PI(e).put("owner",t)}static C(){return cu.C()}_i(e){const t=PI(e);return t.get("owner").next(r=>this.mi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ur("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function PI(n){return Ci(n,"owner")}function Yb(n){return Ci(n,"clientMetadata")}function UR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class VR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Jt(),i=Jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new VR(e,t.fromCache,r,i)}}class rF{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if($1(t))return de.resolve(null);let r=Cs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ob(t,null,"F"),r=Cs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Jt(...a);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,d);return this.$i(t,v,l,m.readTime)?this.ki(e,Ob(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return $1(t)||i.isEqual(Ut.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(lR()<=wo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),IR(t)),this.Bi(e,l,t,v1(i,-1)))})}Fi(e,t){let r=new Vn(z1(e));return t.forEach((i,a)=>{ER(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return lR()<=wo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",IR(t)),this.Ni.getDocumentsMatchingQuery(e,t,xo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class $H{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Rr(zt),this.qi=new vh(a=>wp(a),fI),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eF(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function iF(n,e,t,r){return new $H(n,e,t,r)}function sF(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,Ie.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let m=Jt();for(const v of i){l.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of a){d.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:d}))})})}),BR.apply(this,arguments)}function WH(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,m,v){const b=m.batch,S=b.keys();let P=de.resolve();return S.forEach(V=>{P=P.next(()=>v.getEntry(d,V)).next(G=>{const ce=m.docVersions.get(V);Ft(null!==ce),G.version.compareTo(ce)<0&&(b.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(d,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=Jt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(d=d.add(l.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oF(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function GH(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((b,S)=>{const P=i.get(S);if(!P)return;d.push(t.Cs.removeMatchingKeys(a,b.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,b.addedDocuments,S)));let V=P.withSequenceNumber(a.currentSequenceNumber);var G,ce,ye;e.targetMismatches.has(S)?V=V.withResumeToken(ui.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(S,V),ce=V,ye=b,(0===(G=P).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,V))});let m=qs(),v=Jt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),d.push(aF(a,l,e.documentUpdates).next(b=>{m=b.Wi,v=b.zi})),!r.isEqual(Ut.min())){const b=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(b)}return de.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ui=i,a))}function aF(n,e,t){let r=Jt(),i=Jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=qs();return t.forEach((d,m)=>{const v=a.get(d);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(d)),m.isNoDocument()&&m.version.isEqual(Ut.min())?(e.removeEntry(d,m.readTime),l=l.insert(d,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(d,m)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function zH(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g_(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new wh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function m_(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,Ie.Z)(function*(n,e,t){const r=Je(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!fh(l))throw l;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),jR.apply(this,arguments)}function Qb(n,e,t){const r=Je(n);let i=Ut.min(),a=Jt();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,m,v){const b=Je(d),S=b.qi.get(v);return void 0!==S?de.resolve(b.Ui.get(S)):b.Cs.getTargetData(m,v)}(r,l,Cs(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Ut.min(),t?a:Jt())).next(d=>(cF(r,G1(e),d),{documents:d,Hi:a})))}function uF(n,e){const t=Je(n),r=Je(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function lF(n,e){const t=Je(n),r=t.Ki.get(e)||Ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,v1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(cF(t,e,i),i))}function cF(n,e,t){let r=n.Ki.get(e)||Ut.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function HR(){return HR=(0,Ie.Z)(function*(n,e,t,r){const i=Je(n);let a=Jt(),l=qs();for(const v of t){const b=e.Ji(v.metadata.name);v.document&&(a=a.add(b));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(b,S)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield g_(i,(v=r,Cs(s_(gn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>aF(v,d,l).next(b=>(d.apply(v),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.Wi,b.zi)).next(()=>b.Wi)))}),HR.apply(this,arguments)}function KH(n,e){return $R.apply(this,arguments)}function $R(){return $R=(0,Ie.Z)(function*(n,e,t=Jt()){const r=yield g_(n,Cs(MR(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ei(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const d=r.withResumeToken(ui.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(a,d).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),$R.apply(this,arguments)}function dF(n,e){return`firestore_clients_${n}_${e}`}function hF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function WR(n,e){return`firestore_targets_${n}_${e}`}class Jb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new Jb(e,t,i.state,a):(Ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class MI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new MI(e,r.state,i):(Ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Vb();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=A1(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Xb(e,a):(Ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GR(t.clientId,t.onlineState):(Ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zR{constructor(){this.activeTargetIds=Vb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qR{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Rr(zt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=dF(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new zR),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(dF(e.persistenceKey,i));if(a){const l=Xb.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(WR(this.persistenceKey,e));if(r){const i=MI.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(WR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=zs.at;if(null!=a)try{const d=JSON.parse(a);Ft("number"==typeof d),l=d}catch(d){Ur("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==zs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Jb(this.currentUser,e,t,r),a=hF(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=hF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=WR(this.persistenceKey,e),a=new MI(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Xb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Jb.Zi(new Ii(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return MI.Zi(i,t)}yr(e){return GR.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],d=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||d.push(m)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Vb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class fF{constructor(){this.Lr=new zR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new zR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ZH{qr(e){}shutdown(){}}class pF{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const YH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class JH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);$e("RestConnection","Sending: ",l,r);const d={};return this.lo(d,i,a),this.fo(e,l,d,r).then(m=>($e("RestConnection","Received: ",m),m),m=>{throw fp("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+e_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${YH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const d=new Y2;d.setWithCredentials(!0),d.listenOnce(q2.COMPLETE,()=>{var v;try{switch(d.getLastErrorCode()){case uR.NO_ERROR:const b=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),a(b);break;case uR.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),l(new Fe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case uR.HTTP_ERROR:const S=d.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',S,"response text:",d.getResponseText()),S>0){let P=d.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=null===(v=P)||void 0===v?void 0:v.error;if(V&&V.status&&V.message){const G=function(ce){const ye=ce.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(ye)>=0?ye:_e.UNKNOWN}(V.status);l(new Fe(G,V.message))}else l(new Fe(_e.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Fe(_e.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);d.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=G2(),l=z2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new Z2({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=i.join("");$e("Connection","Creating WebChannel: "+m,d);const v=a.createWebChannel(m,d);let b=!1,S=!1;const P=new QH({Hr:G=>{S?$e("Connection","Not sending because WebChannel is closed:",G):(b||($e("Connection","Opening WebChannel transport."),v.open(),b=!0),$e("Connection","WebChannel sending:",G),v.send(G))},Jr:()=>v.close()}),V=(G,ce,ye)=>{G.listen(ce,ot=>{try{ye(ot)}catch(dt){setTimeout(()=>{throw dt},0)}})};return V(v,Db.EventType.OPEN,()=>{S||$e("Connection","WebChannel transport opened.")}),V(v,Db.EventType.CLOSE,()=>{S||(S=!0,$e("Connection","WebChannel transport closed"),P.io())}),V(v,Db.EventType.ERROR,G=>{S||(S=!0,fp("Connection","WebChannel transport errored:",G),P.io(new Fe(_e.UNAVAILABLE,"The operation could not be completed")))}),V(v,Db.EventType.MESSAGE,G=>{var ce;if(!S){const ye=G.data[0];Ft(!!ye);const ot=ye,dt=ot.error||(null===(ce=ot[0])||void 0===ce?void 0:ce.error);if(dt){$e("Connection","WebChannel received error:",dt);const ut=dt.status;let ft=function(Bt){const wr=Kr[Bt];if(void 0!==wr)return aL(wr)}(ut),At=dt.message;void 0===ft&&(ft=_e.INTERNAL,At="Unknown error status: "+ut+" with message "+dt.message),S=!0,P.io(new Fe(ft,At)),v.close()}else $e("Connection","WebChannel received:",ye),P.ro(ye)}}),V(l,K2.STAT_EVENT,G=>{G.stat===f1.PROXY?$e("Connection","Detected buffering proxy"):G.stat===f1.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function gF(){return typeof window<"u"?window:null}function eD(){return typeof document<"u"?document:null}function NI(n){return new $j(n,!0)}class KR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class mF{constructor(e,t,r,i,a,l,d,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new KR(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ie.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XH extends mF{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function zj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ht(),i=e.targetChange.targetIds||[],a=function(m,v){return m.gt?(Ft(void 0===v||"string"==typeof v),ui.fromBase64String(v||"")):(Ft(void 0===v||v instanceof Uint8Array),ui.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(m){const v=void 0===m.code?_e.UNKNOWN:aL(m.code);return new Fe(v,m.message||"")}(l);t=new hL(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=rl(n,r.document.name),a=Ei(r.document.updateTime),l=new Fi({mapValue:{fields:r.document.fields}}),d=tr.newFoundDocument(i,a,l);t=new Bb(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=rl(n,r.document),a=r.readTime?Ei(r.readTime):Ut.min(),l=tr.newNoDocument(i,a);t=new Bb([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=rl(n,r.document);t=new Bb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,a=new Oj(r.count||0);t=new dL(r.targetId,a)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ut.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ut.min():a.readTime?Ei(a.readTime):Ut.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=CI(this.It),t.addTarget=function(i,a){let l;const d=a.target;return l=Nb(d)?{documents:EL(i,d)}:{query:SR(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=mL(i,a.resumeToken):a.snapshotVersion.compareTo(Ut.min())>0&&(l.readTime=II(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Kj(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=CI(this.It),t.removeTarget=e,this.Bo(t)}}class e$ extends mF{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function qj(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let a=Ei(r.updateTime?r.updateTime:i);return a.isEqual(Ut.min())&&(a=Ei(i)),new Mj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.Zo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=CI(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>TI(this.It,r))};this.Bo(t)}}class t$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(_e.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(_e.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class r${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ur(t),this.ou=!1):$e("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class i${constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget((0,Ie.Z)(function*(){var m;Ec(l)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ie.Z)(function*(v){const b=Je(v);b._u.add(4),yield __(b),b.gu.set("Unknown"),b._u.delete(4),yield kI(b)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new r$(r,i)}}function kI(n){return YR.apply(this,arguments)}function YR(){return YR=(0,Ie.Z)(function*(n){if(Ec(n))for(const e of n.wu)yield e(!0)}),YR.apply(this,arguments)}function __(n){return QR.apply(this,arguments)}function QR(){return QR=(0,Ie.Z)(function*(n){for(const e of n.wu)yield e(!1)}),QR.apply(this,arguments)}function tD(n,e){const t=Je(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),eP(t)?XR(t):v_(t).ko()&&JR(t,e))}function OI(n,e){const t=Je(n),r=v_(t);t.du.delete(e),r.ko()&&_F(t,e),0===t.du.size&&(r.ko()?r.Fo():Ec(t)&&t.gu.set("Unknown"))}function JR(n,e){n.yu.Mt(e.targetId),v_(n).zo(e)}function _F(n,e){n.yu.Mt(e),v_(n).Ho(e)}function XR(n){n.yu=new Bj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),v_(n).start(),n.gu.uu()}function eP(n){return Ec(n)&&!v_(n).No()&&n.du.size>0}function Ec(n){return 0===Je(n)._u.size}function yF(n){n.yu=void 0}function s$(n){return tP.apply(this,arguments)}function tP(){return tP=(0,Ie.Z)(function*(n){n.du.forEach((e,t)=>{JR(n,e)})}),tP.apply(this,arguments)}function o$(n,e){return nP.apply(this,arguments)}function nP(){return nP=(0,Ie.Z)(function*(n,e){yF(n),eP(n)?(n.gu.hu(e),XR(n)):n.gu.set("Unknown")}),nP.apply(this,arguments)}function a$(n,e,t){return rP.apply(this,arguments)}function rP(){return rP=(0,Ie.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof hL&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nD(n,r)}else if(e instanceof Bb?n.yu.Gt(e):e instanceof dL?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ut.min()))try{const r=yield oF(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const m=i.du.get(d);if(!m)return;i.du.set(d,m.withResumeToken(ui.EMPTY_BYTE_STRING,m.snapshotVersion)),_F(i,d);const v=new wh(m.target,d,1,m.sequenceNumber);JR(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield nD(n,r)}var r}),rP.apply(this,arguments)}function nD(n,e,t){return iP.apply(this,arguments)}function iP(){return iP=(0,Ie.Z)(function*(n,e,t){if(!fh(e))throw e;n._u.add(1),yield __(n),n.gu.set("Offline"),t||(t=()=>oF(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield kI(n)}))}),iP.apply(this,arguments)}function vF(n,e){return e().catch(t=>nD(n,t,e))}function y_(n){return sP.apply(this,arguments)}function sP(){return sP=(0,Ie.Z)(function*(n){const e=Je(n),t=Ch(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;u$(e);)try{const i=yield zH(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,l$(e,i)}catch(i){yield nD(e,i)}wF(e)&&IF(e)}),sP.apply(this,arguments)}function u$(n){return Ec(n)&&n.fu.length<10}function l$(n,e){n.fu.push(e);const t=Ch(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function wF(n){return Ec(n)&&!Ch(n).No()&&n.fu.length>0}function IF(n){Ch(n).start()}function c$(n){return oP.apply(this,arguments)}function oP(){return oP=(0,Ie.Z)(function*(n){Ch(n).eu()}),oP.apply(this,arguments)}function d$(n){return aP.apply(this,arguments)}function aP(){return aP=(0,Ie.Z)(function*(n){const e=Ch(n);for(const t of n.fu)e.Xo(t.mutations)}),aP.apply(this,arguments)}function h$(n,e,t){return uP.apply(this,arguments)}function uP(){return uP=(0,Ie.Z)(function*(n,e,t){const r=n.fu.shift(),i=RR.from(r,e,t);yield vF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield y_(n)}),uP.apply(this,arguments)}function f$(n,e){return lP.apply(this,arguments)}function lP(){return lP=(0,Ie.Z)(function*(n,e){var t;e&&Ch(n).Yo&&(yield(t=(0,Ie.Z)(function*(r,i){if(oL(a=i.code)&&a!==_e.ABORTED){const l=r.fu.shift();Ch(r).Mo(),yield vF(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield y_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),wF(n)&&IF(n)}),lP.apply(this,arguments)}function EF(n,e){return cP.apply(this,arguments)}function cP(){return cP=(0,Ie.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=Ec(t);t._u.add(3),yield __(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield kI(t)}),cP.apply(this,arguments)}function dP(n,e){return hP.apply(this,arguments)}function hP(){return hP=(0,Ie.Z)(function*(n,e){const t=Je(n);e?(t._u.delete(2),yield kI(t)):e||(t._u.add(2),yield __(t),t.gu.set("Unknown"))}),hP.apply(this,arguments)}function v_(n){return n.pu||(n.pu=function(e,t,r){const i=Je(e);return i.su(),new XH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:s$.bind(null,n),Zr:o$.bind(null,n),Wo:a$.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.pu.Mo(),eP(n)?XR(n):n.gu.set("Unknown")):(yield n.pu.stop(),yF(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ch(n){return n.Iu||(n.Iu=function(e,t,r){const i=Je(e);return i.su(),new e$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:c$.bind(null,n),Zr:f$.bind(null,n),tu:d$.bind(null,n),Zo:h$.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Mo(),yield y_(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class fP{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new fP(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w_(n,e){if(Ur("AsyncQueue",`${e}: ${n}`),fh(n))return new Fe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class I_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=_I(),this.sortedSet=new Rr(this.comparator)}static emptySet(e){return new I_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof I_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new I_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CF{constructor(){this.Tu=new Rr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class E_{constructor(e,t,r,i,a,l,d,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new E_(e,t,I_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class p${constructor(){this.Au=void 0,this.listeners=[]}}class g${constructor(){this.queries=new vh(e=>W1(e),pI),this.onlineState="Unknown",this.Ru=new Set}}function pP(n,e){return gP.apply(this,arguments)}function gP(){return gP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new p$),i)try{a.Au=yield t.onListen(r)}catch(l){const d=w_(l,`Initialization of query '${IR(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&yP(t)}),gP.apply(this,arguments)}function mP(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,Ie.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),_P.apply(this,arguments)}function m$(n,e){const t=Je(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&yP(t)}function _$(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function yP(n){n.Ru.forEach(e=>{e.next()})}class vP{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new E_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=E_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class y${constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class TF{constructor(e){this.It=e}Ji(e){return rl(this.It,e)}Yi(e){return e.metadata.exists?IL(this.It,e.document,!1):tr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ei(e)}}class v${constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bF(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=gn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new TF(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Jt()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function qH(n,e,t,r){return HR.apply(this,arguments)}(e.localStore,new TF(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield KH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function bF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class DF{constructor(e){this.key=e}}class SF{constructor(e){this.key=e}}class AF{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jt(),this.mutatedKeys=Jt(),this.Gu=z1(e),this.Qu=new I_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new CF,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const P=i.get(b),V=ER(this.query,S)?S:null,G=!!P&&this.mutatedKeys.has(P.key),ce=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ye=!1;P&&V?P.data.isEqual(V.data)?G!==ce&&(r.track({type:3,doc:V}),ye=!0):this.Hu(P,V)||(r.track({type:2,doc:V}),ye=!0,(m&&this.Gu(V,m)>0||v&&this.Gu(V,v)<0)&&(d=!0)):!P&&V?(r.track({type:0,doc:V}),ye=!0):P&&!V&&(r.track({type:1,doc:P}),ye=!0,(m||v)&&(d=!0)),ye&&(V?(l=l.add(V),a=ce?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Qu:l,zu:r,$i:d,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,b)=>function(S,P){const V=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return V(S)-V(P)}(v.type,b.type)||this.Gu(v.doc,b.doc)),this.Ju(r);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,m=d!==this.qu;return this.qu=d,0!==a.length||m?{snapshot:new E_(this.query,e.Qu,i,a,e.mutatedKeys,0===d,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new CF,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new SF(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new DF(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return E_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class w${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class I${constructor(e){this.key=e,this.nc=!1}}class E${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new vh(d=>W1(d),pI),this.rc=new Map,this.oc=new Set,this.uc=new Rr(Ke.comparator),this.cc=new Map,this.ac=new OR,this.hc={},this.lc=new Map,this.fc=xp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function C$(n,e){return wP.apply(this,arguments)}function wP(){return wP=(0,Ie.Z)(function*(n,e){const t=$P(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield g_(t.localStore,Cs(e));t.isPrimaryClient&&tD(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield IP(t,e,r,"current"===d,l.resumeToken)}return i}),wP.apply(this,arguments)}function IP(n,e,t,r,i){return EP.apply(this,arguments)}function EP(){return EP=(0,Ie.Z)(function*(n,e,t,r,i){n._c=(S,P,V)=>{return(G=(0,Ie.Z)(function*(ce,ye,ot,dt){let ut=ye.view.Wu(ot);ut.$i&&(ut=yield Qb(ce.localStore,ye.query,!1).then(({documents:Bt})=>ye.view.Wu(Bt,ut)));const ft=dt&&dt.targetChanges.get(ye.targetId),At=ye.view.applyChanges(ut,ce.isPrimaryClient,ft);return MP(ce,ye.targetId,At.Xu),At.snapshot}),function(ce,ye,ot,dt){return G.apply(this,arguments)})(n,S,P,V);var G};const a=yield Qb(n.localStore,e,!0),l=new AF(e,a.Hi),d=l.Wu(a.documents),m=wI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(d,n.isPrimaryClient,m);MP(n,t,v.Xu);const b=new w$(e,t,l);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),EP.apply(this,arguments)}function T$(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!pI(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield m_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),OI(t.remoteStore,r.targetId),C_(t,r.targetId)}).catch(hh))):(C_(t,r.targetId),yield m_(t.localStore,r.targetId,!0))}),CP.apply(this,arguments)}function TP(){return TP=(0,Ie.Z)(function*(n,e,t){const r=WP(n);try{const i=yield function(a,l){const d=Je(a),m=fr.now(),v=l.reduce((P,V)=>P.add(V.key),Jt());let b,S;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=qs(),G=Jt();return d.Gi.getEntries(P,v).next(ce=>{V=ce,V.forEach((ye,ot)=>{ot.isValidDocument()||(G=G.add(ye))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,V)).next(ce=>{b=ce;const ye=[];for(const ot of l){const dt=kj(ot,b.get(ot.key).overlayedDocument);null!=dt&&ye.push(new Ic(ot.key,dt,O1(dt.value.mapValue),pr.exists(!0)))}return d.mutationQueue.addMutationBatch(P,m,ye,l)}).next(ce=>{S=ce;const ye=ce.applyToLocalDocumentSet(b,G);return d.documentOverlayCache.saveOverlays(P,ce.batchId,ye)})}).then(()=>({batchId:S.batchId,changes:lL(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let m=a.hc[a.currentUser.toKey()];m||(m=new Rr(zt)),m=m.insert(l,d),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Cc(r,i.changes),yield y_(r.remoteStore)}catch(i){const a=w_(i,"Failed to persist write");t.reject(a)}}),TP.apply(this,arguments)}function xF(n,e){return bP.apply(this,arguments)}function bP(){return bP=(0,Ie.Z)(function*(n,e){const t=Je(n);try{const r=yield GH(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Ft(l.nc):i.removedDocuments.size>0&&(Ft(l.nc),l.nc=!1))}),yield Cc(t,r,e)}catch(r){yield hh(r)}}),bP.apply(this,arguments)}function RF(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=Je(a);d.onlineState=l;let m=!1;d.queries.forEach((v,b)=>{for(const S of b.listeners)S.bu(l)&&(m=!0)}),m&&yP(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function D$(n,e,t){return DP.apply(this,arguments)}function DP(){return DP=(0,Ie.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Rr(Ke.comparator);l=l.insert(a,tr.newNoDocument(a,Ut.min()));const d=Jt().add(a),m=new vI(Ut.min(),new Map,new Vn(zt),l,d);yield xF(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),NP(r)}else yield m_(r.localStore,e,!1).then(()=>C_(r,e,t)).catch(hh)}),DP.apply(this,arguments)}function S$(n,e){return SP.apply(this,arguments)}function SP(){return SP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield WH(t.localStore,e);PP(t,r,null),RP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Cc(t,i)}catch(i){yield hh(i)}}),SP.apply(this,arguments)}function A$(n,e,t){return AP.apply(this,arguments)}function AP(){return AP=(0,Ie.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(a,l){const d=Je(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,l).next(b=>(Ft(null!==b),v=b.keys(),d.mutationQueue.removeMutationBatch(m,b))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(r.localStore,e);PP(r,e,t),RP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Cc(r,i)}catch(i){yield hh(i)}}),AP.apply(this,arguments)}function xP(){return xP=(0,Ie.Z)(function*(n,e){const t=Je(n);Ec(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Je(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=w_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),xP.apply(this,arguments)}function RP(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function PP(n,e,t){const r=Je(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function C_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||PF(n,r)})}function PF(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(OI(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),NP(n))}function MP(n,e,t){for(const r of t)r instanceof DF?(n.ac.addReference(r.key,e),R$(n,r)):r instanceof SF?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||PF(n,r.key)):ht()}function R$(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oc.add(r),NP(n))}function NP(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ke(gn.fromString(e)),r=n.fc.next();n.cc.set(r,new I$(t)),n.uc=n.uc.insert(t,r),tD(n.remoteStore,new wh(Cs(s_(t.path)),r,2,zs.at))}}function Cc(n,e,t){return kP.apply(this,arguments)}function kP(){return kP=(0,Ie.Z)(function*(n,e,t){const r=Je(n),i=[],a=[],l=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,m)=>{l.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=VR.Ci(m.targetId,v);a.push(b)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(d=(0,Ie.Z)(function*(m,v){const b=Je(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(v,P=>de.forEach(P.Si,V=>b.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>de.forEach(P.Di,V=>b.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!fh(S))throw S;$e("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const V=b.Ui.get(P),ce=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);b.Ui=b.Ui.insert(P,ce)}}}),function(m,v){return d.apply(this,arguments)})(r.localStore,a))}),kP.apply(this,arguments)}function P$(n,e){return OP.apply(this,arguments)}function OP(){return OP=(0,Ie.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield sF(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new Fe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Cc(t,r.ji)}var i}),OP.apply(this,arguments)}function M$(n,e){const t=Je(n),r=t.cc.get(e);if(r&&r.nc)return Jt().add(r.key);{let i=Jt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const d=t.ic.get(l);i=i.unionWith(d.view.ju)}return i}}function N$(n,e){return LP.apply(this,arguments)}function LP(){return LP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=yield Qb(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&MP(t,e.targetId,i.Xu),i}),LP.apply(this,arguments)}function k$(n,e){return FP.apply(this,arguments)}function FP(){return FP=(0,Ie.Z)(function*(n,e){const t=Je(n);return lF(t.localStore,e).then(r=>Cc(t,r))}),FP.apply(this,arguments)}function O$(n,e,t,r){return UP.apply(this,arguments)}function UP(){return UP=(0,Ie.Z)(function*(n,e,t,r){const i=Je(n),a=yield function(l,d){const m=Je(l),v=Je(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Tn(b,d).next(S=>S?m.localDocuments.getDocuments(b,S):de.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield y_(i.remoteStore):"acknowledged"===t||"rejected"===t?(PP(i,e,r||null),RP(i,e),d=e,Je(Je(i.localStore).mutationQueue).An(d)):ht(),yield Cc(i,a)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),UP.apply(this,arguments)}function VP(){return VP=(0,Ie.Z)(function*(n,e){const t=Je(n);if($P(t),WP(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield MF(t,r.toArray());t.dc=!0,yield dP(t.remoteStore,!0);for(const a of i)tD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(C_(t,l),m_(t.localStore,l,!0))),OI(t.remoteStore,l)}),yield i,yield MF(t,r),function(a){const l=Je(a);l.cc.forEach((d,m)=>{OI(l.remoteStore,m)}),l.ac.fs(),l.cc=new Map,l.uc=new Rr(Ke.comparator)}(t),t.dc=!1,yield dP(t.remoteStore,!1)}}),VP.apply(this,arguments)}function MF(n,e,t){return BP.apply(this,arguments)}function BP(){return BP=(0,Ie.Z)(function*(n,e,t){const r=Je(n),i=[],a=[];for(const l of e){let d;const m=r.rc.get(l);if(m&&0!==m.length){d=yield g_(r.localStore,Cs(m[0]));for(const v of m){const b=r.ic.get(v),S=yield N$(r,b);S.snapshot&&a.push(S.snapshot)}}else{const v=yield uF(r.localStore,l);d=yield g_(r.localStore,v),yield IP(r,NF(v),l,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(a),i}),BP.apply(this,arguments)}function NF(n){return H1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function F$(n){const e=Je(n);return Je(Je(e.localStore).persistence).vi()}function U$(n,e,t,r){return jP.apply(this,arguments)}function jP(){return jP=(0,Ie.Z)(function*(n,e,t,r){const i=Je(n);if(i.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield lF(i.localStore,G1(a[0])),d=vI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ui.EMPTY_BYTE_STRING);yield Cc(i,l,d);break}case"rejected":yield m_(i.localStore,e,!0),C_(i,e,r);break;default:ht()}}),jP.apply(this,arguments)}function V$(n,e,t){return HP.apply(this,arguments)}function HP(){return HP=(0,Ie.Z)(function*(n,e,t){const r=$P(n);if(r.dc){for(const i of e){if(r.rc.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const a=yield uF(r.localStore,i),l=yield g_(r.localStore,a);yield IP(r,NF(a),l.targetId,!1,l.resumeToken),tD(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield m_(r.localStore,i,!1).then(()=>{OI(r.remoteStore,i),C_(r,i)}).catch(hh))}}),HP.apply(this,arguments)}function $P(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D$.bind(null,e),e.sc.Wo=m$.bind(null,e.eventManager),e.sc.wc=_$.bind(null,e.eventManager),e}function WP(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A$.bind(null,e),e}class kF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.It=NI(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return iF(this.persistence,new rF,e.initialUser,this.It)}yc(e){return new tF(Zb.Bs,this.It)}gc(e){return new fF}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OF extends kF{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield WP(r.Ac.syncEngine),yield y_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return iF(this.persistence,new rF,e.initialUser,this.It)}Tc(e,t){return new xH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new hj(t,this.persistence);return new dj(e.asyncQueue,r)}yc(e){const t=UR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ks.withCacheSize(this.cacheSizeBytes):Ks.DEFAULT;return new FR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gF(),eD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new fF}}class j$ extends OF{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof qR&&(r.sharedClientState.syncEngine={Fr:O$.bind(null,i),$r:U$.bind(null,i),Br:V$.bind(null,i),vi:F$.bind(null,i),Mr:k$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ie.Z)(function*(l){yield function L$(n,e){return VP.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=gF();if(!qR.C(t))throw new Fe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=UR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class GP{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>RF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=P$.bind(null,r.syncEngine),yield dP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new g$}createDatastore(e){const t=NI(e.databaseInfo.databaseId),r=new JH(e.databaseInfo);return new t$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>RF(this.syncEngine,d,0),l=pF.C()?new pF:new ZH,new i$(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,m,v){const b=new E$(r,i,a,l,d,m);return v&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Je(t);$e("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield __(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zP(n,e,t){if(!t)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LF(n,e,t,r){if(!0===e&&!0===r)throw new Fe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FF(n){if(!Ke.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UF(n){if(Ke.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rD(n);throw new Fe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VF(n,e){if(e<=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const BF=new Map;class jF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class LI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new X2;switch(t.type){case"gapi":return new rj(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=BF.get(e);t&&($e("ComponentProvider","Removing Datastore"),BF.delete(e),t.terminate())}(this),Promise.resolve()}}class lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class sl extends ns{constructor(e,t,r){super(e,t,s_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new Ke(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function $F(n,e,...t){if(n=(0,L.m9)(n),zP("collection","path",e),n instanceof LI){const r=gn.fromString(e,...t);return UF(r),new sl(n,null,r)}{if(!(n instanceof lr||n instanceof sl))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return UF(r),new sl(n.firestore,null,r)}}function iD(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=_1.R()),zP("doc","path",e),n instanceof LI){const r=gn.fromString(e,...t);return FF(r),new lr(n,null,new Ke(r))}{if(!(n instanceof lr||n instanceof sl))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return FF(r),new lr(n.firestore,n instanceof sl?n.converter:null,new Ke(r))}}function WF(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof lr||n instanceof sl)&&(e instanceof lr||e instanceof sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function qP(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&pI(n._query,e._query)&&n.converter===e.converter}function GF(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class sD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $${constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ai,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new y$(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ie.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class z${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ie.Z)(function*(a,l){const d=Je(a),m=CI(d.It)+"/documents",v={documents:l.map(V=>EI(d.It,V))},b=yield d._o("BatchGetDocuments",m,v,l.length),S=new Map;b.forEach(V=>{const G=function Gj(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=rl(t,r.found.name),a=Ei(r.found.updateTime),l=new Fi({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=rl(t,r.missing),a=Ei(r.readTime);return tr.newNoDocument(i,a)}(n,e):ht()}(d.It,V);S.set(G.key.toString(),G)});const P=[];return l.forEach(V=>{const G=S.get(V.toString());Ft(!!G),P.push(G)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new c_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new CR(a,e.precondition(a)))}),yield(r=(0,Ie.Z)(function*(i,a){const l=Je(i),d=CI(l.It)+"/documents",m={writes:a.map(v=>TI(l.It,v))};yield l.ao("Commit",d,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ut.min())?pr.exists(!1):pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ut.min()))throw new Fe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class q${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new KR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ie.Z)(function*(){const t=new z$(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!uI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!oL(t)}return!1}}class K${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ii.UNAUTHENTICATED,this.clientId=_1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ie.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>($e("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=w_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function zF(n,e){return KP.apply(this,arguments)}function KP(){return KP=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ie.Z)(function*(a){r.isEqual(a)||(yield sF(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),KP.apply(this,arguments)}function qF(n,e){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield YP(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>EF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>EF(e.remoteStore,a)),n.onlineComponents=e}),ZP.apply(this,arguments)}function YP(n){return QP.apply(this,arguments)}function QP(){return QP=(0,Ie.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield zF(n,new kF)),n.offlineComponents}),QP.apply(this,arguments)}function oD(n){return JP.apply(this,arguments)}function JP(){return JP=(0,Ie.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield qF(n,new GP)),n.onlineComponents}),JP.apply(this,arguments)}function KF(n){return YP(n).then(e=>e.persistence)}function aD(n){return YP(n).then(e=>e.localStore)}function XP(n){return oD(n).then(e=>e.remoteStore)}function eM(n){return oD(n).then(e=>e.syncEngine)}function T_(n){return tM.apply(this,arguments)}function tM(){return tM=(0,Ie.Z)(function*(n){const e=yield oD(n),t=e.eventManager;return t.onListen=C$.bind(null,e.syncEngine),t.onUnlisten=T$.bind(null,e.syncEngine),t}),tM.apply(this,arguments)}function YF(n,e,t={}){const r=new ai;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,d,m){const v=new sD({next:S=>{a.enqueueAndForget(()=>mP(i,b));const P=S.docs.has(l);!P&&S.fromCache?m.reject(new Fe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&d&&"server"===d.source?m.reject(new Fe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new vP(s_(l.path),v,{includeMetadataChanges:!0,Nu:!0});return pP(i,b)}(yield T_(n),n.asyncQueue,e,t,r)})),r.promise}function QF(n,e,t={}){const r=new ai;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,d,m){const v=new sD({next:S=>{a.enqueueAndForget(()=>mP(i,b)),S.fromCache&&"server"===d.source?m.reject(new Fe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new vP(l,v,{includeMetadataChanges:!0,Nu:!0});return pP(i,b)}(yield T_(n),n.asyncQueue,e,t,r)})),r.promise}class nW{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new KR(this,"async_queue_retry"),this.Wc=()=>{const t=eD();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=eD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=eD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new ai;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!fh(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Ur("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=fP.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function nM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class rW{constructor(){this._progressObserver={},this._taskCompletionResolver=new ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cr extends LI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JF(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||JF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function JF(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gj(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new K$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XF(n,e,t){const r=new ai;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield zF(n,t),yield qF(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===_e.FAILED_PRECONDITION||l.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;fp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function eU(n){if(n._initialized||n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(ui.fromBase64String(e))}catch(t){throw new Fe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ol(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pp{constructor(e){this._methodName=e}}class uD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const fW=/^__.*__$/;class pW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ic(e,this.data,this.fieldMask,t,this.fieldTransforms):new l_(e,this.data,t,this.fieldTransforms)}}class tU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ic(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class lD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new lD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return hD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(nU(this.sa)&&fW.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class gW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||NI(e)}da(e,t,r,i=!1){return new lD({sa:e,methodName:t,fa:r,path:xr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=NI(n._databaseId);return new gW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cD(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);oM("Data must be an object, but it was:",l,r);const d=sU(r,l);let m,v;if(a.merge)m=new Ro(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const S of a.mergeFields){const P=aM(e,S,t);if(!l.contains(P))throw new Fe(_e.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);aU(b,P)||b.push(P)}m=new Ro(b),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new pW(new Fi(d),m,v)}class FI extends Pp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof FI}}function rU(n,e,t){return new lD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class rM extends Pp{_toFieldTransform(e){return new gI(e.path,new a_)}isEqual(e){return e instanceof rM}}class mW extends Pp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rU(this,e,!0),r=this._a.map(a=>Np(a,t)),i=new Ip(r);return new gI(e.path,i)}isEqual(e){return this===e}}class _W extends Pp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rU(this,e,!0),r=this._a.map(a=>Np(a,t)),i=new Ep(r);return new gI(e.path,i)}isEqual(e){return this===e}}class yW extends Pp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new u_(e.It,Z1(e.It,this.wa));return new gI(e.path,t)}isEqual(e){return this===e}}function iM(n,e,t,r){const i=n.da(1,e,t);oM("Data must be an object, but it was:",i,r);const a=[],l=Fi.empty();mp(r,(m,v)=>{const b=dD(e,m,t);v=(0,L.m9)(v);const S=i.ca(b);if(v instanceof FI)a.push(b);else{const P=Np(v,S);null!=P&&(a.push(b),l.set(b,P))}});const d=new Ro(a);return new tU(l,d,i.fieldTransforms)}function sM(n,e,t,r,i,a){const l=n.da(1,e,t),d=[aM(e,r,t)],m=[i];if(a.length%2!=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)d.push(aM(e,a[P])),m.push(a[P+1]);const v=[],b=Fi.empty();for(let P=d.length-1;P>=0;--P)if(!aU(v,d[P])){const V=d[P];let G=m[P];G=(0,L.m9)(G);const ce=l.ca(V);if(G instanceof FI)v.push(V);else{const ye=Np(G,ce);null!=ye&&(v.push(V),b.set(V,ye))}}const S=new Ro(v);return new tU(b,S,l.fieldTransforms)}function iU(n,e,t,r=!1){return Np(t,n.da(r?4:3,e))}function Np(n,e){if(oU(n=(0,L.m9)(n)))return oM("Unsupported field value:",e,n),sU(n,e);if(n instanceof Pp)return function(t,r){if(!nU(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=Np(l,r.aa(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Z1(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=fr.fromDate(t);return{timestampValue:II(r.It,i)}}if(t instanceof fr){const i=new fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:II(r.It,i)}}if(t instanceof uD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ol)return{bytesValue:mL(r.It,t._byteString)};if(t instanceof lr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:TR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${rD(t)}`)}(n,e)}function sU(n,e){const t={};return b1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mp(n,(r,i)=>{const a=Np(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function oU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fr||n instanceof uD||n instanceof ol||n instanceof lr||n instanceof Pp)}function oM(n,e,t){if(!oU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function aM(n,e,t){if((e=(0,L.m9)(e))instanceof Tc)return e._internalPath;if("string"==typeof e)return dD(n,e);throw hD("Field path arguments must be of type string or ",n,!1,void 0,t)}const vW=new RegExp("[~\\*/\\[\\]]");function dD(n,e,t){if(e.search(vW)>=0)throw hD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tc(...e.split("."))._internalPath}catch{throw hD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Fe(_e.INVALID_ARGUMENT,d+n+m)}function aU(n,e){return n.some(t=>t.isEqual(e))}class UI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wW extends UI{data(){return super.data()}}function fD(n,e){return"string"==typeof e?dD(n,e):e instanceof Tc?e._internalPath:e._delegate._internalPath}function uU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VI{}function Th(n,...e){for(const t of e)n=t._apply(n);return n}class IW extends VI{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Mp(e.firestore),r=function(i,a,l,d,m,v,b){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){pU(b,v);const V=[];for(const G of b)V.push(fU(d,i,G));S={arrayValue:{values:V}}}else S=fU(d,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||pU(b,v),S=iU(l,"where",b,"in"===v||"not-in"===v);const P=Ui.create(m,v,S);return function(V,G){if(G.dt()){const ye=vR(V);if(null!==ye&&!ye.isEqual(G.field))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${G.field.toString()}'`);const ot=yR(V);null!==ot&&gU(0,G.field,ot)}const ce=function(ye,ot){for(const dt of ye.filters)if(ot.indexOf(dt.op)>=0)return dt.op;return null}(V,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ce)throw new Fe(_e.INVALID_ARGUMENT,ce===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ns(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new wc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class CW extends VI{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new i_(i,a);return function(d,m){if(null===yR(d)){const v=vR(d);null!==v&&gU(0,v,m.field)}}(r,l),l}(e._query,this.ma,this.pa);return new ns(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new wc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lU extends VI{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ns(e.firestore,e.converter,Ob(e._query,this.Ia,this.Ta))}}class cU extends VI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=hU(e,this.type,this.Ea,this.Aa);return new ns(e.firestore,e.converter,(i=t,new wc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class dU extends VI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=hU(e,this.type,this.Ea,this.Aa);return new ns(e.firestore,e.converter,(i=t,new wc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function hU(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof UI)return function(i,a,l,d,m){if(!d)throw new Fe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const b of o_(i))if(b.field.isKeyField())v.push(vp(a,d.key));else{const S=d.data.field(b.field);if(gR(S))throw new Fe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=b.field.canonicalString();throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new yh(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Mp(n.firestore);return function(a,l,d,m,v,b){const S=a.explicitOrderBy;if(v.length>S.length)throw new Fe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<v.length;V++){const G=v[V];if(S[V].field.isKeyField()){if("string"!=typeof G)throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof G}`);if(!wR(a)&&-1!==G.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${G}' contains a slash.`);const ce=a.path.child(gn.fromString(G));if(!Ke.isDocumentKey(ce))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const ye=new Ke(ce);P.push(vp(l,ye))}else{const ce=iU(d,m,G);P.push(ce)}}return new yh(P,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function fU(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wR(e)&&-1!==t.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gn.fromString(t));if(!Ke.isDocumentKey(r))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vp(n,new Ke(r))}if(t instanceof lr)return vp(n,t._key);throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rD(t)}.`)}function pU(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gU(n,e,t){if(!t.isEqual(e))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class uM{convertValue(e,t="none"){switch(yp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_p(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return mp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new uD(Pr(e.latitude),Pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=S1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(aI(e));default:return null}}convertTimestamp(e){const t=ph(e);return new fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gn.fromString(e);Ft(bL(r));const i=new gh(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||Ur(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function pD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PW extends uM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}class kp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bc extends UI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new BI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class BI extends bc{data(e={}){return super.data(e)}}class bh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new BI(this._firestore,this._userDataWriter,r.key,r,new kp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new BI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new BI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:MW(l.type),doc:d,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function mU(n,e){return n instanceof bc&&e instanceof bc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bh&&e instanceof bh&&n._firestore===e._firestore&&qP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dh extends uM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}function _U(n,e,t){n=cn(n,lr);const r=cn(n.firestore,cr),i=pD(n.converter,e,t);return b_(r,[cD(Mp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,pr.none())])}function yU(n,e,t,...r){n=cn(n,lr);const i=cn(n.firestore,cr),a=Mp(i);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof Tc?sM(a,"updateDoc",n._key,e,t,r):iM(a,"updateDoc",n._key,e),b_(i,[l.toMutation(n._key,pr.exists(!0))])}function vU(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||nM(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(nM(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,b;if(n instanceof lr)v=cn(n.firestore,cr),b=s_(n._key.path),m={next:S=>{e[l]&&e[l](lM(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=cn(n,ns);v=cn(S.firestore,cr),b=S._query;const P=new Dh(v);m={next:V=>{e[l]&&e[l](new bh(v,P,S,V))},error:e[l+1],complete:e[l+2]},uU(n._query)}return function(S,P,V,G){const ce=new sD(G),ye=new vP(P,ce,V);return S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return pP(yield T_(S),ye)})),()=>{ce.bc(),S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return mP(yield T_(S),ye)}))}}(Vr(v),b,d,m)}function b_(n,e){return function(t,r){const i=new ai;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function b$(n,e,t){return TP.apply(this,arguments)}(yield eM(t),r,i)})),i.promise}(Vr(n),e)}function lM(n,e,t){const r=t.docs.get(e._key),i=new Dh(n);return new bc(n,i,e._key,r,new kp(t.hasPendingWrites,t.fromCache),e.converter)}const HW={maxAttempts:5};class wU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mp(e)}set(e,t,r){this._verifyNotCommitted();const i=Sh(e,this._firestore),a=pD(i.converter,t,r),l=cD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,pr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Sh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Tc?sM(this._dataReader,"WriteBatch.update",a._key,t,r,i):iM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sh(e,this._firestore);return this._mutations=this._mutations.concat(new c_(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Fe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $W extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mp(e)}get(e){const t=Sh(e,this._firestore),r=new PW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new UI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new UI(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Sh(e,this._firestore),a=pD(i.converter,t,r),l=cD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Sh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Tc?sM(this._dataReader,"Transaction.update",a._key,t,r,i):iM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Sh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sh(e,this._firestore),r=new Dh(this._firestore);return super.get(e).then(i=>new bc(this._firestore,r,t._key,i._document,new kp(!1,!1),t.converter))}}function cM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EU(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function CU(){if(!function fj(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){e_=Ri.SDK_VERSION,(0,Ri._registerComponent)(new wa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new cr(new tj(t.getProvider("auth-internal")),new ij(t.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gh(d.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Ri.registerVersion)(p1,"3.7.3",n),(0,Ri.registerVersion)(p1,"3.7.3","esm2017")}();class jI{constructor(e){this._delegate=e}static fromBase64String(e){return CU(),new jI(ol.fromBase64String(e))}static fromUint8Array(e){return EU(),new jI(ol.fromUint8Array(e))}toBase64(){return CU(),this._delegate.toBase64()}toUint8Array(){return EU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dM(n){return function JW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class XW{enableIndexedDbPersistence(e,t){return function sW(n,e){eU(n=cn(n,cr));const t=Vr(n),r=n._freezeSettings(),i=new GP;return XF(t,i,new OF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function oW(n){eU(n=cn(n,cr));const e=Vr(n),t=n._freezeSettings(),r=new GP;return XF(e,r,new j$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function aW(n){if(n._initialized&&!n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ai;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!cu.C())return Promise.resolve();const i=r+"main";yield cu.delete(i)}),function(r){return t.apply(this,arguments)})(UR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HF(n,e,t,r={}){var i;const a=(n=cn(n,LI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&fp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=Ii.MOCK_USER;else{l=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Fe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ii(m)}n._authCredentials=new ej(new g1(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function lW(n){return function Z$(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield KF(n),t=yield XP(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i._u.delete(0),kI(i)}(t)}))}(Vr(n=cn(n,cr)))}(this._delegate)}disableNetwork(){return function cW(n){return function Y$(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield KF(n),t=yield XP(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(i){const a=Je(i);a._u.add(0),yield __(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vr(n=cn(n,cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function uW(n){return function(e){const t=new ai;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function x$(n,e){return xP.apply(this,arguments)}(yield eM(e),t)})),t.promise}(Vr(n=cn(n,cr)))}(this._delegate)}onSnapshotsInSync(e){return function jW(n,e){return function X$(n,e){const t=new sD(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield T_(n),i=t,Je(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield T_(n),i=t,void Je(r).Ru.delete(i);var r,i}))}}(Vr(n=cn(n,cr)),nM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new D_(this,$F(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Da(this,iD(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function H$(n,e){if(n=cn(n,LI),zP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new wc(gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WW(n,e,t){n=cn(n,cr);const r=Object.assign(Object.assign({},HW),t);return function(i){if(i.maxAttempts<1)throw new Fe(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new ai;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const m=yield function ZF(n){return oD(n).then(e=>e.datastore)}(i);new q$(i.asyncQueue,m,l,a,d).run()})),d.promise}(Vr(n),i=>e(new $W(n,i)),r)}(this._delegate,t=>e(new bU(this,t)))}batch(){return Vr(this._delegate),new DU(new wU(this._delegate,e=>b_(this._delegate,e)))}loadBundle(e){return function dW(n,e){const t=Vr(n=cn(n,cr)),r=new rW;return function eW(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return GF(m,v);if(m instanceof ArrayBuffer)return GF(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new $$(m,l);var m}(t,NI(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function B$(n,e,t){const r=Je(n);var i;(i=(0,Ie.Z)(function*(a,l,d){try{const m=yield l.getMetadata();if(yield function(P,V){const G=Je(P),ce=Ei(V.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",ye=>G.Ns.getBundleMetadata(ye,V.id)).then(ye=>!!ye&&ye.createTime.compareTo(ce)>=0)}(a.localStore,m))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=m).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress(bF(m));const v=new v$(m,a.localStore,l.It);let b=yield l.mc();for(;b;){const P=yield v.Fu(b);P&&d._updateProgress(P),b=yield l.mc()}const S=yield v.complete();return yield Cc(a,S.Lu,void 0),yield function(P,V){const G=Je(P);return G.persistence.runTransaction("Save bundle","readwrite",ce=>G.Ns.saveBundleMetadata(ce,V))}(a.localStore,m),d._completeWith(S.progress),Promise.resolve(S.Bu)}catch(m){return fp("SyncEngine",`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}var P}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield eM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function hW(n,e){return function tW(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield aD(n),e)}))}(Vr(n=cn(n,cr)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ds(this,t):null)}}class gD extends uM{constructor(e){super(),this.firestore=e}convertBytes(e){return new jI(new ol(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Da.forKey(t,this.firestore,null)}}class bU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}get(e){const t=Lp(e);return this._delegate.get(t).then(r=>new HI(this._firestore,new bc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Lp(e);return r?(cM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}}class DU{constructor(e){this._delegate=e}set(e,t,r){const i=Lp(e);return r?(cM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Op{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new BI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $I(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Op.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Op(e,new gD(e),t),i.set(t,a)),a}}Op.INSTANCES=new WeakMap;class Da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Da(t,new lr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Da(t,new lr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new D_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new D_(this.firestore,$F(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof lr&&WF(this._delegate,e)}set(e,t){t=cM("DocumentReference.set",t);try{return t?_U(this._delegate,e,t):_U(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?yU(this._delegate,e):yU(this._delegate,e,t,...r)}catch(i){throw bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function VW(n){return b_(cn(n.firestore,cr),[new c_(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=SU(e),r=AU(e,i=>new HI(this.firestore,new bc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function kW(n){n=cn(n,lr);const e=cn(n.firestore,cr),t=Vr(e),r=new Dh(e);return function Q$(n,e){const t=new ai;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const d=yield function(m,v){const b=Je(m);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,v))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Fe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=w_(d,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new bc(e,r,n._key,i,new kp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function OW(n){n=cn(n,lr);const e=cn(n.firestore,cr);return YF(Vr(e),n._key,{source:"server"}).then(t=>lM(e,n,t))}(this._delegate):function NW(n){n=cn(n,lr);const e=cn(n.firestore,cr);return YF(Vr(e),n._key).then(t=>lM(e,n,t))}(this._delegate),t.then(r=>new HI(this.firestore,new bc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Da(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function SU(n){for(const e of n)if("object"==typeof e&&!dM(e))return e;return{}}function AU(n,e){var t,r;let i;return i=dM(n[0])?n[0]:dM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class HI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mU(this._delegate,e._delegate)}}class $I extends HI{data(e){const t=this._delegate.data(e);return function J2(n,e){n||ht()}(void 0!==t),t}}class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}where(e,t,r){try{return new Ds(this.firestore,Th(this._delegate,function EW(n,e,t){const r=e,i=fD("where",n);return new IW(i,r,t)}(e,t,r)))}catch(i){throw bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ds(this.firestore,Th(this._delegate,function TW(n,e="asc"){const t=e,r=fD("orderBy",n);return new CW(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,Th(this._delegate,function bW(n){return VF("limit",n),new lU("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,Th(this._delegate,function DW(n){return VF("limitToLast",n),new lU("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,Th(this._delegate,function SW(...n){return new cU("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,Th(this._delegate,function AW(...n){return new cU("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,Th(this._delegate,function xW(...n){return new dU("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,Th(this._delegate,function RW(...n){return new dU("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return qP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function FW(n){n=cn(n,ns);const e=cn(n.firestore,cr),t=Vr(e),r=new Dh(e);return function J$(n,e){const t=new ai;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const d=yield Qb(i,a,!0),m=new AF(a,d.Hi),v=m.Wu(d.documents),b=m.applyChanges(v,!1);l.resolve(b.snapshot)}catch(d){const m=w_(d,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bh(e,r,n,i))}(this._delegate):"server"===e?.source?function UW(n){n=cn(n,ns);const e=cn(n.firestore,cr),t=Vr(e),r=new Dh(e);return QF(t,n._query,{source:"server"}).then(i=>new bh(e,r,n,i))}(this._delegate):function LW(n){n=cn(n,ns);const e=cn(n.firestore,cr),t=Vr(e),r=new Dh(e);return uU(n._query),QF(t,n._query).then(i=>new bh(e,r,n,i))}(this._delegate),t.then(r=>new hM(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SU(e),r=AU(e,i=>new hM(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vU(this._delegate,t,r)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}class tG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $I(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $I(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $I(this._firestore,r))})}isEqual(e){return mU(this._delegate,e._delegate)}}class D_ extends Ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Da(this.firestore,e):null}doc(e){try{return new Da(this.firestore,void 0===e?iD(this._delegate):iD(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function BW(n,e){const t=cn(n.firestore,cr),r=iD(n),i=pD(n.converter,e);return b_(t,[cD(Mp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Da(this.firestore,t))}isEqual(e){return WF(this._delegate,e._delegate)}withConverter(e){return new D_(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function Lp(n){return cn(n,lr)}class fM{constructor(...e){this._delegate=new Tc(...e)}static documentId(){return new fM(xr.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Tc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function zW(){return new rM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fp(e)}static delete(){const e=function GW(){return new FI("deleteField")}();return e._methodName="FieldValue.delete",new Fp(e)}static arrayUnion(...e){const t=function qW(...n){return new mW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fp(t)}static arrayRemove(...e){const t=function KW(...n){return new _W("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fp(t)}static increment(e){const t=function ZW(n){return new yW("increment",n)}(e);return t._methodName="FieldValue.increment",new Fp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nG={Firestore:TU,GeoPoint:uD,Timestamp:fr,Blob:jI,Transaction:bU,WriteBatch:DU,DocumentReference:Da,DocumentSnapshot:HI,Query:Ds,QueryDocumentSnapshot:$I,QuerySnapshot:hM,CollectionReference:D_,FieldPath:fM,FieldValue:Fp,setLogLevel:function eG(n){!function Q2(n){dh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xU(n,e){return function sG(n,e=tm.z){return new Tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function pM(n,e){return xU(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function mD(n,e){return pM(n,e).pipe(da(void 0),Ex(),(0,st.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const m=i.find(b=>b.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function RU(n,e,t){return mD(n,t).pipe(Pt((r,i)=>function aG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function uG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return gM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return gM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Xy(),(0,st.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function gM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function PU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function iG(n){(function rG(n,e){n.INTERNAL.registerComponent(new wa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nG)))})(n,(e,t)=>new TU(e,t,new XW)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(ev.Z);class MU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=mD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(da(void 0),Ex(),T(([r,i])=>i.length>0||!r),(0,st.U)(([r,i])=>i),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PU(e);return RU(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return pM(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new NU(this.ref.doc(e),this.afs)}}class NU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=LU(r,t);return new MU(i,a,this.afs)}snapshotChanges(){return function oG(n,e){return xU(n,e).pipe(da(void 0),Ex(),(0,st.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(yn.iC)}}class lG{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?mD(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),T(t=>t.length>0),yn.iC):mD(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PU(e);return RU(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return pM(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),yn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(yn.iC)}}const kU=new p.OlP("angularfire2.enableFirestorePersistence"),OU=new p.OlP("angularfire2.firestore.persistenceSettings"),cG=new p.OlP("angularfire2.firestore.settings"),dG=new p.OlP("angularfire2.firestore.use-emulator");function LU(n,e=(t=>t)){return{query:e(n),ref:n}}let hG=(()=>{class n{constructor(t,r,i,a,l,d,m,v,b,S,P,V,G,ce,ye,ot,dt){this.schedulers=m;const ut=(0,zr.on)(t,d,r),ft=b;S&&bf(ut,d,P,G,ce,ye,V,ot),[this.firestore,this.persistenceEnabled$]=(0,zr.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const At=d.runOutsideAngular(()=>ut.firestore());if(a&&At.settings(a),ft&&At.useEmulator(...ft),i&&!Bo(l)){const Bt=()=>{try{return(0,an.D)(At.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(wr){return typeof console<"u"&&console.warn(wr),at(!1)}};return[At,d.runOutsideAngular(Bt)]}return[At,at(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=LU(i,r),d=this.schedulers.ngZone.run(()=>a);return new MU(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new lG(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(zr.Dh),p.LFG(zr.xv,8),p.LFG(kU,8),p.LFG(cG,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(OU,8),p.LFG(dG,8),p.LFG(qg,8),p.LFG(By,8),p.LFG(jy,8),p.LFG(Td,8),p.LFG(Tf,8),p.LFG(bd,8),p.LFG(gE,8),p.LFG(Cd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fG=(()=>{class n{constructor(){zg.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kU,useValue:!0},{provide:OU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[hG]}),n})(),pG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Vo]}),n})(),gG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[HE]}),n.\u0275inj=p.cJS({imports:[Xo,jE,zr.hO.initializeApp(Jy_firebaseConfig),mE,fG,KB,iV,bE,OS,US,pG]}),n})();(0,p.G48)(),Ga().bootstrapModule(gG).catch(n=>console.error(n))},5867:(pt,Re,F)=>{F.d(Re,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=F(9681);(0,p.registerVersion)("firebase","9.14.0","app")},127:(pt,Re,F)=>{F.d(Re,{Z:()=>p.Z});var p=F(3942);p.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(pt,Re,F)=>{F.r(Re);var p=F(5861),$=F(3942),k=F(8247),se=F(2090),pe=(F(9681),F(1877),F(4859));function he(){return window}function z(){return(z=(0,p.Z)(function*(H,M,B){var ne;const{BuildInfo:Oe}=he();(0,k.ap)(M.sessionId,"AuthEvent did not contain a session ID");const rt=yield ge(M.sessionId),it={};return(0,k.aq)()?it.ibi=Oe.packageName:(0,k.ar)()?it.apn=Oe.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),Oe.displayName&&(it.appDisplayName=Oe.displayName),it.sessionId=rt,(0,k.at)(H,B,M.type,void 0,null!==(ne=M.eventId)&&void 0!==ne?ne:void 0,it)})).apply(this,arguments)}function He(){return(He=(0,p.Z)(function*(H){const{BuildInfo:M}=he(),B={};(0,k.aq)()?B.iosBundleId=M.packageName:(0,k.ar)()?B.androidPackageName=M.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),yield(0,k.au)(H,B)})).apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(H,M,B){const{cordova:ne}=he();let Oe=()=>{};try{yield new Promise((rt,it)=>{let Se=null;function Ue(){var Ot;rt();const fn=null===(Ot=ne.plugins.browsertab)||void 0===Ot?void 0:Ot.close;"function"==typeof fn&&fn(),"function"==typeof B?.close&&B.close()}function Rt(){Se||(Se=window.setTimeout(()=>{it((0,k.aw)(H,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Rt()}M.addPassiveListener(Ue),document.addEventListener("resume",Rt,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",hn,!1),Oe=()=>{M.removePassiveListener(Ue),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",hn,!1),Se&&window.clearTimeout(Se)}})}finally{Oe()}})).apply(this,arguments)}function ge(H){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(H){const M=Ze(H),B=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(B)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(H){if((0,k.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(H);const M=new ArrayBuffer(H.length),B=new Uint8Array(M);for(let ne=0;ne<H.length;ne++)B[ne]=H.charCodeAt(ne);return B}class Pe extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(M)),super.onEvent(M)}initialized(){var M=this;return(0,p.Z)(function*(){yield M.initPromise})()}}function ie(H){return le.apply(this,arguments)}function le(){return(le=(0,p.Z)(function*(H){const M=yield ee()._get(fe(H));return M&&(yield ee()._remove(fe(H))),M})).apply(this,arguments)}function Q(){const H=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const ne=Math.floor(Math.random()*M.length);H.push(M.charAt(ne))}return H.join("")}function ee(){return(0,k.az)(k.b)}function fe(H){return(0,k.aA)("authEvent",H.config.apiKey,H.name)}function je(H){if(!H?.includes("?"))return{};const[M,...B]=H.split("?");return(0,se.zd)(B.join("?"))}function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function qt(){var H;return(null===(H=self?.location)||void 0===H?void 0:H.protocol)||null}function Ir(H=(0,se.z$)()){return!("file:"!==qt()&&"ionic:"!==qt()&&"capacitor:"!==qt()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function ji(){try{const H=self.localStorage,M=k.aI();if(H)return H.setItem(M,"1"),H.removeItem(M),!function Bi(H=(0,se.z$)()){return function Br(){return(0,se.w1)()&&11===document?.documentMode}()||function On(H=(0,se.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,se.hl)()}catch{return jr()&&(0,se.hl)()}return!1}function jr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Vt(){return"http:"===qt()||"https:"===qt()}()||(0,se.ru)()||Ir())&&!function Vi(){return(0,se.b$)()||(0,se.UG)()}()&&ji()&&!jr()}function bi(){return Ir()&&typeof document<"u"}function Ye(){return(Ye=(0,p.Z)(function*(){return!!bi()&&new Promise(H=>{const M=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),H(!0)})})})).apply(this,arguments)}const Kn={LOCAL:"local",NONE:"none",SESSION:"session"},wn=k.ax,gr="persistence";function In(H){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*(H){yield H._initializationPromise;const M=mt(),B=k.aA(gr,H.config.apiKey,H.name);M&&M.setItem(B,H._getPersistence())})).apply(this,arguments)}function mt(){var H;try{return(null===(H=function nr(){return typeof window<"u"?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch{return null}}const _t=k.ax;class xt{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(class sn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,p.Z)(function*(){const ne=M._key();let Oe=B.eventManagers.get(ne);return Oe||(Oe=new Pe(M),B.eventManagers.set(ne,Oe),B.attachCallbackListeners(M,Oe)),Oe})()}_openPopup(M){(0,k.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,B,ne,Oe){var rt=this;return(0,p.Z)(function*(){!function Ee(H){var M,B,ne,Oe,rt,it,Se,Ue,Rt,hn;const Ot=he();(0,k.ax)("function"==typeof(null===(M=Ot?.universalLinks)||void 0===M?void 0:M.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(B=Ot?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(rt=null===(Oe=null===(ne=Ot?.cordova)||void 0===ne?void 0:ne.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===rt?void 0:rt.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Ue=null===(Se=null===(it=Ot?.cordova)||void 0===it?void 0:it.plugins)||void 0===Se?void 0:Se.browsertab)||void 0===Ue?void 0:Ue.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(hn=null===(Rt=Ot?.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===hn?void 0:hn.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const it=yield rt._initialize(M);yield it.initialized(),it.resetRedirect(),(0,k.aD)(),yield rt._originValidation(M);const Se=function Ce(H,M,B=null){return{type:M,eventId:B,urlResponse:null,sessionId:Q(),postBody:null,tenantId:H.tenantId,error:(0,k.aw)(H,"no-auth-event")}}(M,ne,Oe);yield function Ge(H,M){return ee()._set(fe(H),M)}(M,Se);const Ue=yield function K(H,M,B){return z.apply(this,arguments)}(M,Se,B),Rt=yield function Ne(H){const{cordova:M}=he();return new Promise(B=>{M.plugins.browsertab.isAvailable(ne=>{let Oe=null;ne?M.plugins.browsertab.openUrl(H):Oe=M.InAppBrowser.open(H,(0,k.av)()?"_blank":"_system","location=yes"),B(Oe)})})}(Ue);return function be(H,M,B){return tt.apply(this,arguments)}(M,it,Rt)})()}_isIframeWebStorageSupported(M,B){throw new Error("Method not implemented.")}_originValidation(M){const B=M._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function J(H){return He.apply(this,arguments)}(M)),this.originValidationPromises[B]}attachCallbackListeners(M,B){const{universalLinks:ne,handleOpenURL:Oe,BuildInfo:rt}=he(),it=setTimeout((0,p.Z)(function*(){yield ie(M),B.onEvent(ze())}),500),Se=function(){var hn=(0,p.Z)(function*(Ot){clearTimeout(it);const fn=yield ie(M);let rs=null;fn&&Ot?.url&&(rs=function we(H,M){var B,ne;const Oe=function Be(H){const M=je(H),B=M.link?decodeURIComponent(M.link):void 0,ne=je(B).link,Oe=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return je(Oe).link||Oe||ne||B||H}(M);if(Oe.includes("/__/auth/callback")){const rt=je(Oe),it=rt.firebaseError?function ae(H){try{return JSON.parse(H)}catch{return null}}(decodeURIComponent(rt.firebaseError)):null,Se=null===(ne=null===(B=it?.code)||void 0===B?void 0:B.split("auth/"))||void 0===ne?void 0:ne[1],Ue=Se?(0,k.aw)(Se):null;return Ue?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Oe,postBody:null}}return null}(fn,Ot.url)),B.onEvent(rs||ze())});return function(fn){return hn.apply(this,arguments)}}();typeof ne<"u"&&"function"==typeof ne.subscribe&&ne.subscribe(null,Se);const Ue=Oe,Rt=`${rt.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var hn=(0,p.Z)(function*(Ot){if(Ot.toLowerCase().startsWith(Rt)&&Se({url:Ot}),"function"==typeof Ue)try{Ue(Ot)}catch(fn){console.error(fn)}});return function(Ot){return hn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,p.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,B,ne,Oe){var rt=this;return(0,p.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openPopup(M,B,ne,Oe)})()}_openRedirect(M,B,ne,Oe){var rt=this;return(0,p.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openRedirect(M,B,ne,Oe)})()}_isIframeWebStorageSupported(M,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,B)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return bi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _t(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,p.Z)(function*(){if(M.underlyingResolver)return;const B=yield function Hi(){return Ye.apply(this,arguments)}();M.underlyingResolver=B?M.cordovaResolver:M.browserResolver})()}}function Hr(H){return H.unwrap()}function Mr(H){return Nr(H)}function Nr(H){const{_tokenResponse:M}=H instanceof se.ZR?H.customData:H;if(!M)return null;if(!(H instanceof se.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return k.P.credentialFromResult(H);const B=M.providerId;if(!B||B===k.o.PASSWORD)return null;let ne;switch(B){case k.o.GOOGLE:ne=k.Q;break;case k.o.FACEBOOK:ne=k.N;break;case k.o.GITHUB:ne=k.T;break;case k.o.TWITTER:ne=k.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:rt,oauthTokenSecret:it,pendingToken:Se,nonce:Ue}=M;return rt||it||Oe||Se?Se?B.startsWith("saml.")?k.aL._create(B,Se):k.J._fromParams({providerId:B,signInMethod:B,pendingToken:Se,idToken:Oe,accessToken:rt}):new k.U(B).credential({idToken:Oe,accessToken:rt,rawNonce:Ue}):null}return H instanceof se.ZR?ne.credentialFromError(H):ne.credentialFromResult(H)}function kt(H,M){return M.catch(B=>{throw B instanceof se.ZR&&function bt(H,M){var B,ne;const Oe=null===(B=M.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ne=M)||void 0===ne?void 0:ne.code))M.resolver=new dr(H,k.an(H,M));else if(Oe){const rt=Nr(M),it=M;rt&&(it.credential=rt,it.tenantId=Oe.tenantId||void 0,it.email=Oe.email||void 0,it.phoneNumber=Oe.phoneNumber||void 0)}}(H,B),B}).then(B=>{const Oe=B.user;return{operationType:B.operationType,credential:Mr(B),additionalUserInfo:k.al(B),user:An.getOrCreate(Oe)}})}function Zr(H,M){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(H,M){const B=yield M;return{verificationId:B.verificationId,confirm:ne=>kt(H,B.confirm(ne))}})).apply(this,arguments)}class dr{constructor(M,B){this.resolver=B,this.auth=function Zn(H){return H.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return kt(Hr(this.auth),this.resolver.resolveSignIn(M))}}class An{constructor(M){this._delegate=M,this.multiFactor=k.ao(M)}static getOrCreate(M){return An.USER_MAP.has(M)||An.USER_MAP.set(M,new An(M)),An.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var B=this;return(0,p.Z)(function*(){return kt(B.auth,k.Z(B._delegate,M))})()}linkWithPhoneNumber(M,B){var ne=this;return(0,p.Z)(function*(){return Zr(ne.auth,k.l(ne._delegate,M,B))})()}linkWithPopup(M){var B=this;return(0,p.Z)(function*(){return kt(B.auth,k.d(B._delegate,M,xt))})()}linkWithRedirect(M){var B=this;return(0,p.Z)(function*(){return yield In(k.aE(B.auth)),k.g(B._delegate,M,xt)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var B=this;return(0,p.Z)(function*(){return kt(B.auth,k._(B._delegate,M))})()}reauthenticateWithPhoneNumber(M,B){return Zr(this.auth,k.r(this._delegate,M,B))}reauthenticateWithPopup(M){return kt(this.auth,k.e(this._delegate,M,xt))}reauthenticateWithRedirect(M){var B=this;return(0,p.Z)(function*(){return yield In(k.aE(B.auth)),k.h(B._delegate,M,xt)})()}sendEmailVerification(M){return k.ab(this._delegate,M)}unlink(M){var B=this;return(0,p.Z)(function*(){return yield k.ak(B._delegate,M),B})()}updateEmail(M){return k.ag(this._delegate,M)}updatePassword(M){return k.ah(this._delegate,M)}updatePhoneNumber(M){return k.u(this._delegate,M)}updateProfile(M){return k.af(this._delegate,M)}verifyBeforeUpdateEmail(M,B){return k.ac(this._delegate,M,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}An.USER_MAP=new WeakMap;const Xe=k.ax;let De=(()=>{class H{constructor(B,ne){if(this.app=B,ne.isInitialized())return this._delegate=ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=B.options;Xe(Oe,"invalid-api-key",{appName:B.name}),Xe(Oe,"invalid-api-key",{appName:B.name});const rt=typeof window<"u"?xt:void 0;this._delegate=ne.initialize({options:{persistence:It(Oe,B.name),popupRedirectResolver:rt}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?An.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,ne){k.G(this._delegate,B,ne)}applyActionCode(B){return k.a2(this._delegate,B)}checkActionCode(B){return k.a3(this._delegate,B)}confirmPasswordReset(B,ne){return k.a1(this._delegate,B,ne)}createUserWithEmailAndPassword(B,ne){var Oe=this;return(0,p.Z)(function*(){return kt(Oe._delegate,k.a5(Oe._delegate,B,ne))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return k.aa(this._delegate,B)}isSignInWithEmailLink(B){return k.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,p.Z)(function*(){Xe(Bn(),B._delegate,"operation-not-supported-in-this-environment");const ne=yield k.j(B._delegate,xt);return ne?kt(B._delegate,Promise.resolve(ne)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function dn(H,M){(0,k.aE)(H)._logFramework(M)}(this._delegate,B)}onAuthStateChanged(B,ne,Oe){const{next:rt,error:it,complete:Se}=et(B,ne,Oe);return this._delegate.onAuthStateChanged(rt,it,Se)}onIdTokenChanged(B,ne,Oe){const{next:rt,error:it,complete:Se}=et(B,ne,Oe);return this._delegate.onIdTokenChanged(rt,it,Se)}sendSignInLinkToEmail(B,ne){return k.a7(this._delegate,B,ne)}sendPasswordResetEmail(B,ne){return k.a0(this._delegate,B,ne||void 0)}setPersistence(B){var ne=this;return(0,p.Z)(function*(){let Oe;switch(function Zs(H,M){wn(Object.values(Kn).includes(M),H,"invalid-persistence-type"),(0,se.b$)()?wn(M!==Kn.SESSION,H,"unsupported-persistence-type"):(0,se.UG)()?wn(M===Kn.NONE,H,"unsupported-persistence-type"):jr()?wn(M===Kn.NONE||M===Kn.LOCAL&&(0,se.hl)(),H,"unsupported-persistence-type"):wn(M===Kn.NONE||ji(),H,"unsupported-persistence-type")}(ne._delegate,B),B){case Kn.SESSION:Oe=k.a;break;case Kn.LOCAL:Oe=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case Kn.NONE:Oe=k.L;break;default:return k.as("argument-error",{appName:ne._delegate.name})}return ne._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return kt(this._delegate,k.X(this._delegate))}signInWithCredential(B){return kt(this._delegate,k.Y(this._delegate,B))}signInWithCustomToken(B){return kt(this._delegate,k.$(this._delegate,B))}signInWithEmailAndPassword(B,ne){return kt(this._delegate,k.a6(this._delegate,B,ne))}signInWithEmailLink(B,ne){return kt(this._delegate,k.a9(this._delegate,B,ne))}signInWithPhoneNumber(B,ne){return Zr(this._delegate,k.s(this._delegate,B,ne))}signInWithPopup(B){var ne=this;return(0,p.Z)(function*(){return Xe(Bn(),ne._delegate,"operation-not-supported-in-this-environment"),kt(ne._delegate,k.c(ne._delegate,B,xt))})()}signInWithRedirect(B){var ne=this;return(0,p.Z)(function*(){return Xe(Bn(),ne._delegate,"operation-not-supported-in-this-environment"),yield In(ne._delegate),k.f(ne._delegate,B,xt)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return k.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=Kn,H})();function et(H,M,B){let ne=H;"function"!=typeof H&&({next:ne,error:M,complete:B}=H);const Oe=ne;return{next:it=>Oe(it&&An.getOrCreate(it)),error:M,complete:B}}function It(H,M){const B=function _n(H,M){const B=mt();if(!B)return[];const ne=k.aA(gr,H,M);switch(B.getItem(ne)){case Kn.NONE:return[k.L];case Kn.LOCAL:return[k.i,k.a];case Kn.SESSION:return[k.a];default:return[]}}(H,M);if(typeof self<"u"&&!B.includes(k.i)&&B.push(k.i),typeof window<"u")for(const ne of[k.b,k.a])B.includes(ne)||B.push(ne);return B.includes(k.L)||B.push(k.L),B}class Ct{constructor(){this.providerId="phone",this._delegate=new k.P(Hr($.Z.auth()))}static credential(M,B){return k.P.credential(M,B)}verifyPhoneNumber(M,B){return this._delegate.verifyPhoneNumber(M,B)}unwrap(){return this._delegate}}Ct.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Ct.PROVIDER_ID=k.P.PROVIDER_ID;const Xt=k.ax;class q{constructor(M,B,ne=$.Z.app()){var Oe;Xt(null===(Oe=ne.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:ne.name}),this._delegate=new k.R(M,B,ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(H){H.INTERNAL.registerComponent(new pe.wA("auth-compat",M=>{const B=M.getProvider("app-compat").getImmediate(),ne=M.getProvider("auth");return new De(B,ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Ct,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:q,TwitterAuthProvider:k.W,Auth:De,AuthCredential:k.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(pt,Re,F)=>{F.d(Re,{y:()=>he});var p=F(930),$=F(727),k=F(8822),se=F(9635),ue=F(2416),me=F(576),pe=F(2806);let he=(()=>{class J{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const be=new J;return be.source=this,be.operator=Ne,be}subscribe(Ne,be,tt){const Ee=function z(J){return J&&J instanceof p.Lv||function K(J){return J&&(0,me.m)(J.next)&&(0,me.m)(J.error)&&(0,me.m)(J.complete)}(J)&&(0,$.Nn)(J)}(Ne)?Ne:new p.Hp(Ne,be,tt);return(0,pe.x)(()=>{const{operator:ge,source:Qe}=this;Ee.add(ge?ge.call(Ee,Qe):Qe?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(be){Ne.error(be)}}forEach(Ne,be){return new(be=ve(be))((tt,Ee)=>{const ge=new p.Hp({next:Qe=>{try{Ne(Qe)}catch(Ze){Ee(Ze),ge.unsubscribe()}},error:Ee,complete:tt});this.subscribe(ge)})}_subscribe(Ne){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Ne)}[k.L](){return this}pipe(...Ne){return(0,se.U)(Ne)(this)}toPromise(Ne){return new(Ne=ve(Ne))((be,tt)=>{let Ee;this.subscribe(ge=>Ee=ge,ge=>tt(ge),()=>be(Ee))})}}return J.create=He=>new J(He),J})();function ve(J){var He;return null!==(He=J??ue.v.Promise)&&void 0!==He?He:Promise}},7579:(pt,Re,F)=>{F.d(Re,{x:()=>pe});var p=F(9751),$=F(727);const se=(0,F(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=F(8737),me=F(2806);let pe=(()=>{class ve extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new he(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new se}next(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:He,observers:Ne}=this;return J||He?$.Lc:(this.currentObservers=null,Ne.push(z),new $.w0(()=>{this.currentObservers=null,(0,ue.P)(Ne,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:He,isStopped:Ne}=this;J?z.error(He):Ne&&z.complete()}asObservable(){const z=new p.y;return z.source=this,z}}return ve.create=(K,z)=>new he(K,z),ve})();class he extends pe{constructor(K,z){super(),this.destination=K,this.source=z}next(K){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,K)}error(K){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,K)}complete(){var K,z;null===(z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===z||z.call(K)}_subscribe(K){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(K))&&void 0!==J?J:$.Lc}}},930:(pt,Re,F)=>{F.d(Re,{Hp:()=>tt,Lv:()=>J});var p=F(576),$=F(727),k=F(2416),se=F(7849),ue=F(5032);const me=ve("C",void 0,void 0);function ve(Le,Pe,Ce){return{kind:Le,value:Pe,error:Ce}}var K=F(3410),z=F(2806);class J extends $.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,$.Nn)(Pe)&&Pe.add(this)):this.destination=Ze}static create(Pe,Ce,Ge){return new tt(Pe,Ce,Ge)}next(Pe){this.isStopped?Qe(function he(Le){return ve("N",Le,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Qe(function pe(Le){return ve("E",void 0,Le)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Qe(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ne(Le,Pe){return He.call(Le,Pe)}class be{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Pe)}catch(Ge){Ee(Ge)}}error(Pe){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Pe)}catch(Ge){Ee(Ge)}else Ee(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Ce){Ee(Ce)}}}class tt extends J{constructor(Pe,Ce,Ge){let ie;if(super(),(0,p.m)(Pe)||!Pe)ie={next:Pe??void 0,error:Ce??void 0,complete:Ge??void 0};else{let le;this&&k.v.useDeprecatedNextContext?(le=Object.create(Pe),le.unsubscribe=()=>this.unsubscribe(),ie={next:Pe.next&&Ne(Pe.next,le),error:Pe.error&&Ne(Pe.error,le),complete:Pe.complete&&Ne(Pe.complete,le)}):ie=Pe}this.destination=new be(ie)}}function Ee(Le){k.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Le):(0,se.h)(Le)}function Qe(Le,Pe){const{onStoppedNotification:Ce}=k.v;Ce&&K.z.setTimeout(()=>Ce(Le,Pe))}const Ze={closed:!0,next:ue.Z,error:function ge(Le){throw Le},complete:ue.Z}},727:(pt,Re,F)=>{F.d(Re,{Lc:()=>me,w0:()=>ue,Nn:()=>pe});var p=F(576);const k=(0,F(3888).d)(ve=>function(z){ve(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,He)=>`${He+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var se=F(8737);class ue{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ne of z)Ne.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Ne){K=Ne instanceof k?Ne.errors:[Ne]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ne of He)try{he(Ne)}catch(be){K=K??[],be instanceof k?K=[...K,...be.errors]:K.push(be)}}if(K)throw new k(K)}}add(K){var z;if(K&&K!==this)if(this.closed)he(K);else{if(K instanceof ue){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(K)}}_hasParent(K){const{_parentage:z}=this;return z===K||Array.isArray(z)&&z.includes(K)}_addParent(K){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(K),z):z?[z,K]:K}_removeParent(K){const{_parentage:z}=this;z===K?this._parentage=null:Array.isArray(z)&&(0,se.P)(z,K)}remove(K){const{_finalizers:z}=this;z&&(0,se.P)(z,K),K instanceof ue&&K._removeParent(this)}}ue.EMPTY=(()=>{const ve=new ue;return ve.closed=!0,ve})();const me=ue.EMPTY;function pe(ve){return ve instanceof ue||ve&&"closed"in ve&&(0,p.m)(ve.remove)&&(0,p.m)(ve.add)&&(0,p.m)(ve.unsubscribe)}function he(ve){(0,p.m)(ve)?ve():ve.unsubscribe()}},2416:(pt,Re,F)=>{F.d(Re,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Re,F)=>{F.d(Re,{E:()=>$});const $=new(F(9751).y)(ue=>ue.complete())},8996:(pt,Re,F)=>{F.d(Re,{D:()=>Pe});var p=F(8421),$=F(5363),k=F(9468),me=F(9751),he=F(2202),ve=F(576),K=F(9672);function J(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new me.y(ie=>{(0,K.f)(ie,Ge,()=>{const le=Ce[Symbol.asyncIterator]();(0,K.f)(ie,Ge,()=>{le.next().then(we=>{we.done?ie.complete():ie.next(we.value)})},0,!0)})})}var He=F(3670),Ne=F(8239),be=F(1144),tt=F(6495),Ee=F(2206),ge=F(4532),Qe=F(3260);function Pe(Ce,Ge){return Ge?function Le(Ce,Ge){if(null!=Ce){if((0,He.c)(Ce))return function se(Ce,Ge){return(0,p.Xf)(Ce).pipe((0,k.R)(Ge),(0,$.Q)(Ge))}(Ce,Ge);if((0,be.z)(Ce))return function pe(Ce,Ge){return new me.y(ie=>{let le=0;return Ge.schedule(function(){le===Ce.length?ie.complete():(ie.next(Ce[le++]),ie.closed||this.schedule())})})}(Ce,Ge);if((0,Ne.t)(Ce))return function ue(Ce,Ge){return(0,p.Xf)(Ce).pipe((0,k.R)(Ge),(0,$.Q)(Ge))}(Ce,Ge);if((0,Ee.D)(Ce))return J(Ce,Ge);if((0,tt.T)(Ce))return function z(Ce,Ge){return new me.y(ie=>{let le;return(0,K.f)(ie,Ge,()=>{le=Ce[he.h](),(0,K.f)(ie,Ge,()=>{let we,Q;try{({value:we,done:Q}=le.next())}catch(ee){return void ie.error(ee)}Q?ie.complete():ie.next(we)},0,!0)}),()=>(0,ve.m)(le?.return)&&le.return()})}(Ce,Ge);if((0,Qe.L)(Ce))return function Ze(Ce,Ge){return J((0,Qe.Q)(Ce),Ge)}(Ce,Ge)}throw(0,ge.z)(Ce)}(Ce,Ge):(0,p.Xf)(Ce)}},8421:(pt,Re,F)=>{F.d(Re,{Xf:()=>He});var p=F(655),$=F(1144),k=F(8239),se=F(9751),ue=F(3670),me=F(2206),pe=F(4532),he=F(6495),ve=F(3260),K=F(576),z=F(7849),J=F(8822);function He(Le){if(Le instanceof se.y)return Le;if(null!=Le){if((0,ue.c)(Le))return function Ne(Le){return new se.y(Pe=>{const Ce=Le[J.L]();if((0,K.m)(Ce.subscribe))return Ce.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,$.z)(Le))return function be(Le){return new se.y(Pe=>{for(let Ce=0;Ce<Le.length&&!Pe.closed;Ce++)Pe.next(Le[Ce]);Pe.complete()})}(Le);if((0,k.t)(Le))return function tt(Le){return new se.y(Pe=>{Le.then(Ce=>{Pe.closed||(Pe.next(Ce),Pe.complete())},Ce=>Pe.error(Ce)).then(null,z.h)})}(Le);if((0,me.D)(Le))return ge(Le);if((0,he.T)(Le))return function Ee(Le){return new se.y(Pe=>{for(const Ce of Le)if(Pe.next(Ce),Pe.closed)return;Pe.complete()})}(Le);if((0,ve.L)(Le))return function Qe(Le){return ge((0,ve.Q)(Le))}(Le)}throw(0,pe.z)(Le)}function ge(Le){return new se.y(Pe=>{(function Ze(Le,Pe){var Ce,Ge,ie,le;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,p.KL)(Le);!(Ge=yield Ce.next()).done;)if(Pe.next(Ge.value),Pe.closed)return}catch(we){ie={error:we}}finally{try{Ge&&!Ge.done&&(le=Ce.return)&&(yield le.call(Ce))}finally{if(ie)throw ie.error}}Pe.complete()})})(Le,Pe).catch(Ce=>Pe.error(Ce))})}},6451:(pt,Re,F)=>{F.d(Re,{T:()=>me});var p=F(8189),$=F(8421),k=F(515),se=F(7669),ue=F(8996);function me(...pe){const he=(0,se.yG)(pe),ve=(0,se._6)(pe,1/0),K=pe;return K.length?1===K.length?(0,$.Xf)(K[0]):(0,p.J)(ve)((0,ue.D)(K,he)):k.E}},5403:(pt,Re,F)=>{F.d(Re,{x:()=>$});var p=F(930);function $(se,ue,me,pe,he){return new k(se,ue,me,pe,he)}class k extends p.Lv{constructor(ue,me,pe,he,ve,K){super(ue),this.onFinalize=ve,this.shouldUnsubscribe=K,this._next=me?function(z){try{me(z)}catch(J){ue.error(J)}}:super._next,this._error=he?function(z){try{he(z)}catch(J){ue.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(z){ue.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(pt,Re,F)=>{F.d(Re,{U:()=>k});var p=F(4482),$=F(5403);function k(se,ue){return(0,p.e)((me,pe)=>{let he=0;me.subscribe((0,$.x)(pe,ve=>{pe.next(se.call(ue,ve,he++))}))})}},8189:(pt,Re,F)=>{F.d(Re,{J:()=>k});var p=F(5577),$=F(4671);function k(se=1/0){return(0,p.z)($.y,se)}},5577:(pt,Re,F)=>{F.d(Re,{z:()=>he});var p=F(4004),$=F(8421),k=F(4482),se=F(9672),ue=F(5403),pe=F(576);function he(ve,K,z=1/0){return(0,pe.m)(K)?he((J,He)=>(0,p.U)((Ne,be)=>K(J,Ne,He,be))((0,$.Xf)(ve(J,He))),z):("number"==typeof K&&(z=K),(0,k.e)((J,He)=>function me(ve,K,z,J,He,Ne,be,tt){const Ee=[];let ge=0,Qe=0,Ze=!1;const Le=()=>{Ze&&!Ee.length&&!ge&&K.complete()},Pe=Ge=>ge<J?Ce(Ge):Ee.push(Ge),Ce=Ge=>{Ne&&K.next(Ge),ge++;let ie=!1;(0,$.Xf)(z(Ge,Qe++)).subscribe((0,ue.x)(K,le=>{He?.(le),Ne?Pe(le):K.next(le)},()=>{ie=!0},void 0,()=>{if(ie)try{for(ge--;Ee.length&&ge<J;){const le=Ee.shift();be?(0,se.f)(K,be,()=>Ce(le)):Ce(le)}Le()}catch(le){K.error(le)}}))};return ve.subscribe((0,ue.x)(K,Pe,()=>{Ze=!0,Le()})),()=>{tt?.()}}(J,He,ve,z)))}},5363:(pt,Re,F)=>{F.d(Re,{Q:()=>se});var p=F(9672),$=F(4482),k=F(5403);function se(ue,me=0){return(0,$.e)((pe,he)=>{pe.subscribe((0,k.x)(he,ve=>(0,p.f)(he,ue,()=>he.next(ve),me),()=>(0,p.f)(he,ue,()=>he.complete(),me),ve=>(0,p.f)(he,ue,()=>he.error(ve),me)))})}},3099:(pt,Re,F)=>{F.d(Re,{B:()=>ue});var p=F(8421),$=F(7579),k=F(930),se=F(4482);function ue(pe={}){const{connector:he=(()=>new $.x),resetOnError:ve=!0,resetOnComplete:K=!0,resetOnRefCountZero:z=!0}=pe;return J=>{let He,Ne,be,tt=0,Ee=!1,ge=!1;const Qe=()=>{Ne?.unsubscribe(),Ne=void 0},Ze=()=>{Qe(),He=be=void 0,Ee=ge=!1},Le=()=>{const Pe=He;Ze(),Pe?.unsubscribe()};return(0,se.e)((Pe,Ce)=>{tt++,!ge&&!Ee&&Qe();const Ge=be=be??he();Ce.add(()=>{tt--,0===tt&&!ge&&!Ee&&(Ne=me(Le,z))}),Ge.subscribe(Ce),!He&&tt>0&&(He=new k.Hp({next:ie=>Ge.next(ie),error:ie=>{ge=!0,Qe(),Ne=me(Ze,ve,ie),Ge.error(ie)},complete:()=>{Ee=!0,Qe(),Ne=me(Ze,K),Ge.complete()}}),(0,p.Xf)(Pe).subscribe(He))})(J)}}function me(pe,he,...ve){if(!0===he)return void pe();if(!1===he)return;const K=new k.Hp({next:()=>{K.unsubscribe(),pe()}});return he(...ve).subscribe(K)}},9468:(pt,Re,F)=>{F.d(Re,{R:()=>$});var p=F(4482);function $(k,se=0){return(0,p.e)((ue,me)=>{me.add(k.schedule(()=>ue.subscribe(me),se))})}},8505:(pt,Re,F)=>{F.d(Re,{b:()=>ue});var p=F(576),$=F(4482),k=F(5403),se=F(4671);function ue(me,pe,he){const ve=(0,p.m)(me)||pe||he?{next:me,error:pe,complete:he}:me;return ve?(0,$.e)((K,z)=>{var J;null===(J=ve.subscribe)||void 0===J||J.call(ve);let He=!0;K.subscribe((0,k.x)(z,Ne=>{var be;null===(be=ve.next)||void 0===be||be.call(ve,Ne),z.next(Ne)},()=>{var Ne;He=!1,null===(Ne=ve.complete)||void 0===Ne||Ne.call(ve),z.complete()},Ne=>{var be;He=!1,null===(be=ve.error)||void 0===be||be.call(ve,Ne),z.error(Ne)},()=>{var Ne,be;He&&(null===(Ne=ve.unsubscribe)||void 0===Ne||Ne.call(ve)),null===(be=ve.finalize)||void 0===be||be.call(ve)}))}):se.y}},4408:(pt,Re,F)=>{F.d(Re,{o:()=>ue});var p=F(727);class $ extends p.w0{constructor(pe,he){super()}schedule(pe,he=0){return this}}const k={setInterval(me,pe,...he){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(me,pe,...he):setInterval(me,pe,...he)},clearInterval(me){const{delegate:pe}=k;return(pe?.clearInterval||clearInterval)(me)},delegate:void 0};var se=F(8737);class ue extends ${constructor(pe,he){super(pe,he),this.scheduler=pe,this.work=he,this.pending=!1}schedule(pe,he=0){var ve;if(this.closed)return this;this.state=pe;const K=this.id,z=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(z,K,he)),this.pending=!0,this.delay=he,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(z,this.id,he),this}requestAsyncId(pe,he,ve=0){return k.setInterval(pe.flush.bind(pe,this),ve)}recycleAsyncId(pe,he,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return he;null!=he&&k.clearInterval(he)}execute(pe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(pe,he);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,he){let K,ve=!1;try{this.work(pe)}catch(z){ve=!0,K=z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:pe,scheduler:he}=this,{actions:ve}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ve,this),null!=pe&&(this.id=this.recycleAsyncId(he,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Re,F)=>{F.d(Re,{v:()=>k});var p=F(6063);class ${constructor(ue,me=$.now){this.schedulerActionCtor=ue,this.now=me}schedule(ue,me=0,pe){return new this.schedulerActionCtor(this,ue).schedule(pe,me)}}$.now=p.l.now;class k extends ${constructor(ue,me=$.now){super(ue,me),this.actions=[],this._active=!1}flush(ue){const{actions:me}=this;if(this._active)return void me.push(ue);let pe;this._active=!0;do{if(pe=ue.execute(ue.state,ue.delay))break}while(ue=me.shift());if(this._active=!1,pe){for(;ue=me.shift();)ue.unsubscribe();throw pe}}}},4986:(pt,Re,F)=>{F.d(Re,{z:()=>k});var p=F(4408);const k=new(F(7565).v)(p.o)},6063:(pt,Re,F)=>{F.d(Re,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(pt,Re,F)=>{F.d(Re,{z:()=>p});const p={setTimeout($,k,...se){const{delegate:ue}=p;return ue?.setTimeout?ue.setTimeout($,k,...se):setTimeout($,k,...se)},clearTimeout($){const{delegate:k}=p;return(k?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(pt,Re,F)=>{F.d(Re,{h:()=>$});const $=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Re,F)=>{F.d(Re,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Re,F)=>{F.d(Re,{_6:()=>me,jO:()=>se,yG:()=>ue});var p=F(576);function k(pe){return pe[pe.length-1]}function se(pe){return(0,p.m)(k(pe))?pe.pop():void 0}function ue(pe){return function $(pe){return pe&&(0,p.m)(pe.schedule)}(k(pe))?pe.pop():void 0}function me(pe,he){return"number"==typeof k(pe)?pe.pop():he}},8737:(pt,Re,F)=>{function p($,k){if($){const se=$.indexOf(k);0<=se&&$.splice(se,1)}}F.d(Re,{P:()=>p})},3888:(pt,Re,F)=>{function p($){const se=$(ue=>{Error.call(ue),ue.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Re,{d:()=>p})},2806:(pt,Re,F)=>{F.d(Re,{O:()=>se,x:()=>k});var p=F(2416);let $=null;function k(ue){if(p.v.useDeprecatedSynchronousErrorHandling){const me=!$;if(me&&($={errorThrown:!1,error:null}),ue(),me){const{errorThrown:pe,error:he}=$;if($=null,pe)throw he}}else ue()}function se(ue){p.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ue)}},9672:(pt,Re,F)=>{function p($,k,se,ue=0,me=!1){const pe=k.schedule(function(){se(),me?$.add(this.schedule(null,ue)):this.unsubscribe()},ue);if($.add(pe),!me)return pe}F.d(Re,{f:()=>p})},4671:(pt,Re,F)=>{function p($){return $}F.d(Re,{y:()=>p})},1144:(pt,Re,F)=>{F.d(Re,{z:()=>p});const p=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(pt,Re,F)=>{F.d(Re,{D:()=>$});var p=F(576);function $(k){return Symbol.asyncIterator&&(0,p.m)(k?.[Symbol.asyncIterator])}},576:(pt,Re,F)=>{function p($){return"function"==typeof $}F.d(Re,{m:()=>p})},3670:(pt,Re,F)=>{F.d(Re,{c:()=>k});var p=F(8822),$=F(576);function k(se){return(0,$.m)(se[p.L])}},6495:(pt,Re,F)=>{F.d(Re,{T:()=>k});var p=F(2202),$=F(576);function k(se){return(0,$.m)(se?.[p.h])}},8239:(pt,Re,F)=>{F.d(Re,{t:()=>$});var p=F(576);function $(k){return(0,p.m)(k?.then)}},3260:(pt,Re,F)=>{F.d(Re,{L:()=>se,Q:()=>k});var p=F(655),$=F(576);function k(ue){return(0,p.FC)(this,arguments,function*(){const pe=ue.getReader();try{for(;;){const{value:he,done:ve}=yield(0,p.qq)(pe.read());if(ve)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(he)}}finally{pe.releaseLock()}})}function se(ue){return(0,$.m)(ue?.getReader)}},4482:(pt,Re,F)=>{F.d(Re,{A:()=>$,e:()=>k});var p=F(576);function $(se){return(0,p.m)(se?.lift)}function k(se){return ue=>{if($(ue))return ue.lift(function(me){try{return se(me,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Re,F)=>{function p(){}F.d(Re,{Z:()=>p})},9635:(pt,Re,F)=>{F.d(Re,{U:()=>k,z:()=>$});var p=F(4671);function $(...se){return k(se)}function k(se){return 0===se.length?p.y:1===se.length?se[0]:function(me){return se.reduce((pe,he)=>he(pe),me)}}},7849:(pt,Re,F)=>{F.d(Re,{h:()=>k});var p=F(2416),$=F(3410);function k(se){$.z.setTimeout(()=>{const{onUnhandledError:ue}=p.v;if(!ue)throw se;ue(se)})}},4532:(pt,Re,F)=>{function p($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Re,{z:()=>p})},655:(pt,Re,F)=>{function se(Q,ee){var fe={};for(var ae in Q)Object.prototype.hasOwnProperty.call(Q,ae)&&ee.indexOf(ae)<0&&(fe[ae]=Q[ae]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(Q);Be<ae.length;Be++)ee.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(Q,ae[Be])&&(fe[ae[Be]]=Q[ae[Be]])}return fe}function he(Q,ee,fe,ae){return new(fe||(fe=Promise))(function(je,gt){function sn(dn){try{ze(ae.next(dn))}catch(Cn){gt(Cn)}}function jt(dn){try{ze(ae.throw(dn))}catch(Cn){gt(Cn)}}function ze(dn){dn.done?je(dn.value):function Be(je){return je instanceof fe?je:new fe(function(gt){gt(je)})}(dn.value).then(sn,jt)}ze((ae=ae.apply(Q,ee||[])).next())})}function Ee(Q){return this instanceof Ee?(this.v=Q,this):new Ee(Q)}function ge(Q,ee,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=fe.apply(Q,ee||[]),je=[];return Be={},gt("next"),gt("throw"),gt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function gt(nn){ae[nn]&&(Be[nn]=function(rn){return new Promise(function(qt,Vt){je.push([nn,rn,qt,Vt])>1||sn(nn,rn)})})}function sn(nn,rn){try{!function jt(nn){nn.value instanceof Ee?Promise.resolve(nn.value.v).then(ze,dn):Cn(je[0][2],nn)}(ae[nn](rn))}catch(qt){Cn(je[0][3],qt)}}function ze(nn){sn("next",nn)}function dn(nn){sn("throw",nn)}function Cn(nn,rn){nn(rn),je.shift(),je.length&&sn(je[0][0],je[0][1])}}function Ze(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function J(Q){var ee="function"==typeof Symbol&&Symbol.iterator,fe=ee&&Q[ee],ae=0;if(fe)return fe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ae>=Q.length&&(Q=void 0),{value:Q&&Q[ae++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),fe={},ae("next"),ae("throw"),ae("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ae(je){fe[je]=Q[je]&&function(gt){return new Promise(function(sn,jt){!function Be(je,gt,sn,jt){Promise.resolve(jt).then(function(ze){je({value:ze,done:sn})},gt)}(sn,jt,(gt=Q[je](gt)).done,gt.value)})}}}F.d(Re,{FC:()=>ge,KL:()=>Ze,_T:()=>se,mG:()=>he,qq:()=>Ee})},4650:(pt,Re,F)=>{F.d(Re,{$8M:()=>Du,$Z:()=>Ng,AFp:()=>mT,AaK:()=>he,BQk:()=>em,CHM:()=>Ph,CRH:()=>Yv,CZH:()=>Jf,CqO:()=>LE,D6c:()=>ux,EJc:()=>wT,EpF:()=>kE,F$t:()=>VS,F4k:()=>OE,FYo:()=>ED,FiY:()=>Ve,G48:()=>OT,GfV:()=>p0,GkF:()=>Ky,Hsn:()=>BS,JOm:()=>ya,KtG:()=>$o,LFG:()=>xn,LSH:()=>tg,Lbi:()=>uw,Lck:()=>wA,MAs:()=>ME,MMx:()=>Kd,NdJ:()=>Yy,OlP:()=>Dn,Oqu:()=>ql,PXZ:()=>Lm,Q6J:()=>NE,QGY:()=>Zy,QP$:()=>Oe,Qsj:()=>wM,R0b:()=>Qi,RDi:()=>Yp,Rgc:()=>Wf,SBq:()=>Fl,Sil:()=>qA,Suo:()=>JC,TTD:()=>xs,TgZ:()=>Ou,Tol:()=>ZE,VKq:()=>ic,W1O:()=>Tm,WLB:()=>ou,X6Q:()=>kT,XFs:()=>Ye,Xpm:()=>De,Xts:()=>F_,Y36:()=>eu,YKP:()=>AC,YNc:()=>Gy,Yjl:()=>H,Yz7:()=>rn,Z0I:()=>Vi,ZZ4:()=>Gm,_UZ:()=>qy,_Vd:()=>Ll,_c5:()=>ox,_uU:()=>XE,aQg:()=>Dw,c2e:()=>vT,cJS:()=>Vt,cg1:()=>Ev,dDg:()=>YA,dqk:()=>xt,eFA:()=>xT,eoX:()=>hw,f3M:()=>T,g9A:()=>Pm,h0i:()=>qd,hGG:()=>ax,hij:()=>sm,iGM:()=>QC,ifc:()=>_t,ip1:()=>gT,jDz:()=>$v,kL8:()=>Zl,l5B:()=>UC,lG2:()=>Y,lqb:()=>_a,lri:()=>Ji,oAB:()=>Xt,oJD:()=>eg,oxw:()=>Fd,q4F:()=>g0,qLn:()=>hf,qZA:()=>Jg,qbA:()=>Yd,rWj:()=>dw,sBO:()=>ww,sIi:()=>ku,s_b:()=>Gf,soG:()=>lc,tb:()=>ep,tp0:()=>Dt,uIk:()=>Wy,vHH:()=>be,vpe:()=>vs,wAp:()=>St,xp6:()=>G0,ynx:()=>Xg,z2F:()=>Um,zSh:()=>sg,zs3:()=>Bl});var p=F(7579),$=F(727),k=F(9751),se=F(6451),ue=F(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=me({__forward_ref__:me});function z(s){return s.__forward_ref__=z,s.toString=function(){return he(this())},s}function J(s){return function He(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===z}(s)?s():s}class be extends Error{constructor(o,u){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function Pe(s,o){throw new be(-201,!1)}function jt(s,o){null==s&&function ze(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Vt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ir(s){return Br(s,jr)||Br(s,bi)}function Vi(s){return null!==Ir(s)}function Br(s,o){return s.hasOwnProperty(o)?s[o]:null}function ji(s){return s&&(s.hasOwnProperty(Bn)||s.hasOwnProperty(Hi))?s[Bn]:null}const jr=me({\u0275prov:me}),Bn=me({\u0275inj:me}),bi=me({ngInjectableDef:me}),Hi=me({ngInjectorDef:me});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let nr;function wn(s){const o=nr;return nr=s,o}function gr(s,o,u){const c=Ir(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ye.Optional?null:void 0!==o?o:void Pe(he(s))}function In(s){return{toString:s}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),_t=(()=>{return(s=_t||(_t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",_t;var s})();const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mr={},bt=[],Nr=me({\u0275cmp:me}),kt=me({\u0275dir:me}),Zr=me({\u0275pipe:me}),Yt=me({\u0275mod:me}),dr=me({\u0275fac:me}),An=me({__NG_ELEMENT_ID__:me});let Xe=0;function De(s){return In(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||_t.Emulated,id:"c"+Xe++,styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,y=s.features;return h.inputs=W(s.inputs,c),h.outputs=W(s.outputs),y&&y.forEach(I=>I(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(It).filter(Ct):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(ne).filter(Ct):null,h})}function It(s){return M(s)||B(s)}function Ct(s){return null!==s}function Xt(s){return In(()=>({type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function W(s,o){if(null==s)return Mr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),u[h]=c,o&&(o[h]=f)}return u}const Y=De;function H(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function M(s){return s[Nr]||null}function B(s){return s[kt]||null}function ne(s){return s[Zr]||null}function Oe(s){const o=M(s)||B(s)||ne(s);return null!==o&&o.standalone}function rt(s,o){const u=s[Yt]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function rr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ci(s){return Array.isArray(s)&&!0===s[1]}function Mo(s){return 0!=(8&s.flags)}function ul(s){return 2==(2&s.flags)}function xa(s){return 1==(1&s.flags)}function Qr(s){return null!==s.template}function ll(s){return 0!=(256&s[2])}function Er(s,o){return s.hasOwnProperty(dr)?s[dr]:null}class Fo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function xs(){return Pc}function Pc(s){return s.type.prototype.ngOnChanges&&(s.setInput=cl),pu}function pu(){const s=Uo(this),o=s?.current;if(o){const u=s.previous;if(u===Mr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function cl(s,o,u,c){const h=Uo(s)||function Vo(s,o){return s[Mc]=o}(s,{previous:Mr,current:null}),f=h.current||(h.current={}),y=h.previous,I=this.declaredInputs[u],C=y[I];f[I]=new Fo(C&&C.currentValue,o,y===Mr),s[c]=o}xs.ngInherit=!0;const Mc="__ngSimpleChanges__";function Uo(s){return s[Mc]||null}function Fn(s){for(;Array.isArray(s);)s=s[0];return s}function Si(s,o){return Fn(o[s])}function Cr(s,o){return Fn(o[s.index])}function jo(s,o){return s.data[o]}function on(s,o){const u=o[s];return rr(u)?u:u[0]}function Rs(s){return 64==(64&s[2])}function fi(s,o){return null==o?null:s[o]}function Pa(s){s[18]=0}function jn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Nt={lFrame:ja(null),bindingsEnabled:!0};function io(){return Nt.bindingsEnabled}function Me(){return Nt.lFrame.lView}function Kt(){return Nt.lFrame.tView}function Ph(s){return Nt.lFrame.contextLView=s,s[8]}function $o(s){return Nt.lFrame.contextLView=null,s}function ir(){let s=Wo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Wo(){return Nt.lFrame.currentTNode}function $r(s,o){const u=Nt.lFrame;u.currentTNode=s,u.isParent=o}function _u(){return Nt.lFrame.isParent}function Go(){Nt.lFrame.isParent=!1}function sr(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ua(){return Nt.lFrame.bindingIndex++}function Lc(s,o){const u=Nt.lFrame;u.bindingIndex=u.bindingRootIndex=s,zo(o)}function zo(s){Nt.lFrame.currentDirectiveIndex=s}function Va(){return Nt.lFrame.currentQueryIndex}function ml(s){Nt.lFrame.currentQueryIndex=s}function Ba(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Fc(s,o,u){if(u&Ye.SkipSelf){let h=o,f=s;for(;!(h=h.parent,null!==h||u&Ye.Host||(h=Ba(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,s=f}const c=Nt.lFrame=kh();return c.currentTNode=o,c.lView=s,!0}function qo(s){const o=kh(),u=s[1];Nt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function kh(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?ja(s):o}function ja(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Oh(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Uc=Oh;function Ps(){const s=Oh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Rn(){return Nt.lFrame.selectedIndex}function ls(s){Nt.lFrame.selectedIndex=s}function Pn(){const s=Nt.lFrame;return jo(s.tView,s.selectedIndex)}function yu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function Ko(s,o,u){Yo(s,o,3,u)}function Zo(s,o,u,c){(3&s[2])===u&&Yo(s,o,u,c)}function jc(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Yo(s,o,u,c){const f=c??-1,y=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<f||-1==f)&&(Hc(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Hc(s,o,u,c){const h=u[c]<0,f=u[c+1],I=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class pi{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function cs(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const f=u[c++],y=u[c++],I=u[c++];s.setAttribute(o,y,I,f)}else{const f=h,y=u[++c];El(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),c++}}return c}function Ha(s){return 3===s||4===s||6===s}function El(s){return 64===s.charCodeAt(0)}function $a(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Wc(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Wc(s,o,u,c,h){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const I=s[f++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=f-1;break}}}for(;f<s.length;){const I=s[f];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==h&&(s[f+1]=h));if(c===s[f+1])return void(s[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==h&&s.splice(f++,0,h)}function Uh(s){return-1!==s}function or(s){return 32767&s}function Ns(s,o){let u=function Vh(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Cl=!0;function Wa(s){const o=Cl;return Cl=s,o}let Gc=0;const Xr={};function ds(s,o){const u=Cu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Tl(c.data,s),Tl(o,null),Tl(c.blueprint,null));const h=Ga(s,o),f=s.injectorIndex;if(Uh(h)){const y=or(h),I=Ns(h,o),C=I[1].data;for(let A=0;A<8;A++)o[f+A]=I[y+A]|C[y+A]}return o[f+8]=h,f}function Tl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Cu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ga(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=ia(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function oo(s,o,u){!function zc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(An)&&(c=u[An]),null==c&&(c=u[An]=Gc++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Jo(s,o,u){if(u&Ye.Optional||void 0!==s)return s;Pe()}function Xo(s,o,u,c){if(u&Ye.Optional&&void 0===c&&(c=null),0==(u&(Ye.Self|Ye.Host))){const h=s[9],f=wn(void 0);try{return h?h.get(o,c,u&Ye.Optional):gr(o,c,u&Ye.Optional)}finally{wn(f)}}return Jo(c,0,u)}function ea(s,o,u,c=Ye.Default,h){if(null!==s){if(1024&o[2]){const y=function Hh(s,o,u,c,h){let f=s,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=qc(f,y,u,c|Ye.Self,Xr);if(I!==Xr)return I;let C=f.parent;if(!C){const A=y[21];if(A){const N=A.get(u,Xr,c);if(N!==Xr)return N}C=ia(y),y=y[15]}f=C}return h}(s,o,u,c,Xr);if(y!==Xr)return y}const f=qc(s,o,u,c,Xr);if(f!==Xr)return f}return Xo(o,u,c,h)}function qc(s,o,u,c,h){const f=function jh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(An)?s[An]:void 0;return"number"==typeof o?o>=0?255&o:bl:o}(u);if("function"==typeof f){if(!Fc(o,s,c))return c&Ye.Host?Jo(h,0,c):Xo(o,u,c,h);try{const y=f(c);if(null!=y||c&Ye.Optional)return y;Pe()}finally{Uc()}}else if("number"==typeof f){let y=null,I=Cu(s,o),C=-1,A=c&Ye.Host?o[16][6]:null;for((-1===I||c&Ye.SkipSelf)&&(C=-1===I?Ga(s,o):o[I+8],-1!==C&&bu(c,!1)?(y=o[1],I=or(C),o=Ns(C,o)):I=-1);-1!==I;){const N=o[1];if(ta(f,I,N.data)){const U=Tu(I,o,u,y,c,A);if(U!==Xr)return U}C=o[I+8],-1!==C&&bu(c,o[1].data[I+8]===A)&&ta(f,I,o)?(y=N,I=or(C),o=Ns(C,o)):I=-1}}return h}function Tu(s,o,u,c,h,f){const y=o[1],I=y.data[s+8],N=qa(I,y,u,null==c?ul(I)&&Cl:c!=y&&0!=(3&I.type),h&Ye.Host&&f===I);return null!==N?Gi(o,y,N,I):Xr}function qa(s,o,u,c,h){const f=s.providerIndexes,y=o.data,I=1048575&f,C=s.directiveStart,N=f>>20,Z=h?I+N:s.directiveEnd;for(let re=c?I:I+N;re<Z;re++){const Te=y[re];if(re<C&&u===Te||re>=C&&Te.type===u)return re}if(h){const re=y[C];if(re&&Qr(re)&&re.type===u)return C}return null}function Gi(s,o,u,c){let h=s[u];const f=o.data;if(function Il(s){return s instanceof pi}(h)){const y=h;y.resolving&&function Qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new be(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(f[u]));const I=Wa(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?wn(y.injectImpl):null;Fc(s,c,Ye.Default);try{h=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function wl(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=Pc(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==C&&wn(C),Wa(I),y.resolving=!1,Uc()}}return h}function ta(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function bu(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class na{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return ea(this._tNode,this._lView,o,c,u)}}function bl(){return new na(ir(),Me())}function ia(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Du(s){return function za(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const f=u[h];if(Ha(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(f===o)return u[h+1];h+=2}}}return null}(ir(),s)}const sa="__parameters__";function aa(s,o,u){return In(()=>{const c=function Dl(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return I.annotation=y,I;function I(C,A,N){const U=C.hasOwnProperty(sa)?C[sa]:Object.defineProperty(C,sa,{value:[]})[sa];for(;U.length<=N;)U.push(null);return(U[N]=U[N]||[]).push(y),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Dn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=rn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Sn(c,o)):o!==s&&o.push(c)}return o}function fs(s,o){s.forEach(u=>Array.isArray(u)?fs(u,o):o(u))}function lo(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Tr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function co(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function st(s,o,u){let c=qi(s,o);return c>=0?s[1|c]=u:(c=~c,function Gh(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Ka(s,o){const u=qi(s,o);if(u>=0)return s[1|u]}function qi(s,o){return function Au(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const f=c+(h-c>>1),y=s[f<<u];if(o===y)return f<<u;y>o?h=f:c=f+1}return~(h<<u)}(s,o,1)}const fo={},xl="__NG_DI_FLAG__",ks="ngTempTokenPath",ps=/\n/gm,Jn="__source";let po;function gs(s){const o=po;return po=s,o}function Gn(s,o=Ye.Default){if(void 0===po)throw new be(-203,!1);return null===po?gr(s,void 0,o):po.get(s,o&Ye.Optional?null:void 0,o)}function xn(s,o=Ye.Default){return(function Kn(){return nr}()||Gn)(J(s),o)}function T(s,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),xn(s,o)}function D(s){const o=[];for(let u=0;u<s.length;u++){const c=J(s[u]);if(Array.isArray(c)){if(0===c.length)throw new be(900,!1);let h,f=Ye.Default;for(let y=0;y<c.length;y++){const I=c[y],C=j(I);"number"==typeof C?-1===C?h=I.token:f|=C:h=I}o.push(xn(h,f))}else o.push(xn(c))}return o}function R(s,o){return s[xl]=o,s.prototype[xl]=o,s}function j(s){return s[xl]}const Ve=R(aa("Optional"),8),Dt=R(aa("SkipSelf"),4);let Yh,Rl,ed;function Yp(s){Yh=s}function _o(s){return function Xc(){if(void 0===Rl&&(Rl=null,xt.trustedTypes))try{Rl=xt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Rl}()?.createHTML(s)||s}function Qp(s){return function yo(){if(void 0===ed&&(ed=null,xt.trustedTypes))try{ed=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ed}()?.createHTML(s)||s}class Jp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Fs(s){return s instanceof Jp?s.changingThisBreaksApplicationSecurity:s}function vo(s,o){const u=function ef(s){return s instanceof Jp&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}class k_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(_o(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class JI{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=_o(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=_o(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const y=u.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function _(s){return(s=String(s)).match(g)?s:"unsafe:"+s}function E(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function x(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const O=E("area,br,col,hr,img,wbr"),te=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xe=E("rp,rt"),pn=x(O,x(te,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),x(xe,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),x(xe,te)),Wr=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rd=x(Wr,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),id=E("script,style,template");class Ja{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!pn.hasOwnProperty(u))return this.sanitizedSomething=!0,!id.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const f=c.item(h),y=f.name,I=y.toLowerCase();if(!rd.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let C=f.value;Wr[I]&&(C=_(C)),this.buf.push(" ",y,'="',sd(C),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();pn.hasOwnProperty(u)&&!O.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(sd(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const Xp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rf=/([^\#-~ |!])/g;function sd(s){return s.replace(/&/g,"&amp;").replace(Xp,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(rf,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nl;function pa(s){return"content"in s&&function O_(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Un=(()=>((Un=Un||{})[Un.NONE=0]="NONE",Un[Un.HTML=1]="HTML",Un[Un.STYLE=2]="STYLE",Un[Un.SCRIPT=3]="SCRIPT",Un[Un.URL=4]="URL",Un[Un.RESOURCE_URL=5]="RESOURCE_URL",Un))();function eg(s){const o=sf();return o?Qp(o.sanitize(Un.HTML,s)||""):vo(s,"HTML")?Qp(Fs(s)):function kl(s,o){let u=null;try{Nl=Nl||function nf(s){const o=new JI(s);return function w(){try{return!!(new window.DOMParser).parseFromString(_o(""),"text/html")}catch{return!1}}()?new k_(o):o}(s);let c=o?String(o):"";u=Nl.getInertBodyElement(c);let h=5,f=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=f,f=u.innerHTML,u=Nl.getInertBodyElement(c)}while(c!==f);return _o((new Ja).sanitizeChildren(pa(u)||u))}finally{if(u){const c=pa(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(function Jc(){return void 0!==Yh?Yh:typeof document<"u"?document:void 0}(),Ee(s))}function tg(s){const o=sf();return o?o.sanitize(Un.URL,s)||"":vo(s,"URL")?Fs(s):_(Ee(s))}function sf(){const s=Me();return s&&s[12]}const F_=new Dn("ENVIRONMENT_INITIALIZER"),t0=new Dn("INJECTOR",-1),n0=new Dn("INJECTOR_DEF_TYPES");class r0{get(o,u=fo){if(u===fo){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}function yD(...s){return{\u0275providers:s0(0,s)}}function s0(s,...o){const u=[],c=new Set;let h;return fs(o,f=>{const y=f;rg(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&o0(h,u),u}function o0(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];fs(h,f=>{o.push(f)})}}function rg(s,o,u,c){if(!(s=J(s)))return!1;let h=null,f=ji(s);const y=!f&&M(s);if(f||y){if(y&&!y.standalone)return!1;h=s}else{const C=s.ngModule;if(f=ji(C),!f)return!1;h=C}const I=c.has(h);if(y){if(I)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)rg(A,o,u,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let A;c.add(h);try{fs(f.imports,N=>{rg(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&o0(A,o)}if(!I){const A=Er(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:bt},{provide:n0,useValue:h,multi:!0},{provide:F_,useValue:()=>xn(h),multi:!0})}const C=f.providers;null==C||I||fs(C,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const a0=me({provide:String,useValue:me});function af(s){return null!==s&&"object"==typeof s&&a0 in s}function Us(s){return"function"==typeof s}const sg=new Dn("Set Injector scope."),og={},Mu={};let ag;function ug(){return void 0===ag&&(ag=new r0),ag}class _a{}class U_ extends _a{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cg(o,y=>this.processProvider(y)),this.records.set(t0,od(void 0,this)),h.has("environment")&&this.records.set(_a,od(void 0,this));const f=this.records.get(sg);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(n0.multi,bt,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=gs(this),c=wn(void 0);try{return o()}finally{gs(u),wn(c)}}get(o,u=fo,c=Ye.Default){this.assertNotDestroyed();const h=gs(this),f=wn(void 0);try{if(!(c&Ye.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function wD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Dn}(o)&&Ir(o);I=C&&this.injectableDefInScope(C)?od(uf(o),og):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Ye.Self?ug():this.parent).get(o,u=c&Ye.Optional&&u===fo?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[ks]=y[ks]||[]).unshift(he(o)),h)throw y;return function X(s,o,u,c){const h=s[ks];throw o[Jn]&&h.unshift(o[Jn]),s.message=function oe(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];f.push(y+":"+("string"==typeof I?JSON.stringify(I):he(I)))}h=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(ps,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[ks]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{wn(f),gs(h)}}resolveInjectorInitializers(){const o=gs(this),u=wn(void 0);try{const c=this.get(F_.multi,bt,Ye.Self);for(const h of c)h()}finally{gs(o),wn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(o){let u=Us(o=J(o))?o:J(o&&o.provide);const c=function V_(s){return af(s)?od(void 0,s.useValue):od(function lg(s,o,u){let c;if(Us(s)){const h=J(s);return Er(h)||uf(h)}if(af(s))c=()=>J(s.useValue);else if(function ma(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...D(s.deps||[]));else if(function ig(s){return!(!s||!s.useExisting)}(s))c=()=>xn(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function lf(s){return!!s.deps}(s))return Er(h)||uf(h);c=()=>new h(...D(s.deps))}return c}(s),og)}(o);if(Us(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=od(void 0,og,!0),h.factory=()=>D(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===og&&(u.value=Mu,u.value=u.factory()),"object"==typeof u.value&&u.value&&function vD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=J(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function uf(s){const o=Ir(s),u=null!==o?o.factory:Er(s);if(null!==u)return u;if(s instanceof Dn)throw new be(204,!1);if(s instanceof Function)return function l0(s){const o=s.length;if(o>0)throw co(o,"?"),new be(204,!1);const u=function On(s){const o=s&&(s[jr]||s[bi]);if(o){const u=function Bi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new be(204,!1)}function od(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function B_(s){return!!s.\u0275providers}function cg(s,o){for(const u of s)Array.isArray(u)?cg(u,o):B_(u)?cg(u.\u0275providers,o):o(u)}class j_{}class hg{resolveComponentFactory(o){throw function d0(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ll=(()=>{class s{}return s.NULL=new hg,s})();function ID(){return ad(ir(),Me())}function ad(s,o){return new Fl(Cr(s,o))}let Fl=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=ID,s})();function f0(s){return s instanceof Fl?s.nativeElement:s}class ED{}let wM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function IM(){const s=Me(),u=on(ir().index,s);return(rr(u)?u:s)[11]}(),s})(),H_=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class p0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const g0=new p0("14.2.10"),$_={};function Z_(s){return s.ngOriginalError}class hf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Z_(o);for(;u&&Z_(u);)u=Z_(u);return u||null}}const Y_=new Map;let xD=0;const yg="__ngContext__";function Gr(s,o){rr(o)?(s[yg]=o[20],function PD(s){Y_.set(s[20],s)}(o)):s[yg]=o}function Xa(s){return s instanceof Function?s():s}var ya=(()=>((ya=ya||{})[ya.Important=1]="Important",ya[ya.DashCase=2]="DashCase",ya))();function ty(s,o){return undefined(s,o)}function hd(s){const o=s[3];return ci(o)?o[3]:o}function Ig(s){return S0(s[13])}function Eg(s){return S0(s[4])}function S0(s){for(;null!==s&&!ci(s);)s=s[4];return s}function fd(s,o,u,c,h){if(null!=c){let f,y=!1;ci(c)?f=c:rr(c)&&(y=!0,c=c[0]);const I=Fn(c);0===s&&null!==u?null==h?k0(o,u,I):va(o,u,I,h||null,!0):1===s&&null!==u?va(o,u,I,h||null,!0):2===s?function GD(s,o,u){const c=bg(s,o);c&&function WD(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,y):3===s&&o.destroyNode(I),null!=f&&function PM(s,o,u,c,h){const f=u[7];f!==Fn(u)&&fd(o,s,c,f,h);for(let I=10;I<u.length;I++){const C=u[I];Ul(C[1],C,s,o,c,f)}}(o,s,f,u,h)}}function Cg(s,o,u){return s.createElement(o,u)}function P0(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,jn(h,-1)),u.splice(c,1)}function sy(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&P0(h,c),o>0&&(s[u-1][4]=c[4]);const f=Tr(s,10+o);!function iy(s,o){Ul(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function gf(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Ul(s,o,u,3,null,null),function xM(s){let o=s[13];if(!o)return Tg(s[1],s);for(;o;){let u=null;if(rr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)rr(o)&&Tg(o[1],o),o=o[3];null===o&&(o=s),rr(o)&&Tg(o[1],o),u=o&&o[4]}o=u}}(o)}}function Tg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function ay(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof pi)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const I=h[f[y]],C=f[y+1];try{C.call(I)}finally{}}else try{f.call(h)}finally{}}}}(s,o),function oy(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],I="function"==typeof y?y(o):Fn(o[y]),C=c[h=u[f+2]],A=u[f+3];"boolean"==typeof A?I.removeEventListener(u[f],C,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),f+=2}else{const y=c[h=u[f+1]];u[f].call(y)}if(null!==c){for(let f=h+1;f<c.length;f++)(0,c[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&ci(o[3])){u!==o[3]&&P0(u,o);const c=o[19];null!==c&&c.detachView(s)}!function MD(s){Y_.delete(s[20])}(o)}}function M0(s,o,u){return function N0(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===_t.None||h===_t.Emulated)return null}return Cr(c,u)}(s,o.parent,u)}function va(s,o,u,c,h){s.insertBefore(o,u,c,h)}function k0(s,o,u){s.appendChild(o,u)}function O0(s,o,u,c,h){null!==c?va(s,o,u,c,h):k0(s,o,u)}function bg(s,o){return s.parentNode(o)}function br(s,o,u){return uy(s,o,u)}let uy=function F0(s,o,u){return 40&s.type?Cr(s,u):null};function Sg(s,o,u,c){const h=M0(s,c,o),f=o[11],I=br(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)O0(f,h,u[C],I,!1);else O0(f,h,u,I,!1)}function Ag(s,o){if(null!==o){const u=o.type;if(3&u)return Cr(o,s);if(4&u)return U0(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Ag(s,c);{const h=s[o.index];return ci(h)?U0(-1,h):Fn(h)}}if(32&u)return ty(o,s)()||Fn(s[o.index]);{const c=ly(s,o);return null!==c?Array.isArray(c)?c[0]:Ag(hd(s[16]),c):Ag(s,o.next)}}return null}function ly(s,o){return null!==o?s[16][6].projection[o.projection]:null}function U0(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Ag(c,h)}return o[7]}function cy(s,o,u,c,h,f,y){for(;null!=u;){const I=c[u.index],C=u.type;if(y&&0===o&&(I&&Gr(Fn(I),c),u.flags|=4),64!=(64&u.flags))if(8&C)cy(s,o,u.child,c,h,f,!1),fd(o,s,h,I,f);else if(32&C){const A=ty(u,c);let N;for(;N=A();)fd(o,s,h,N,f);fd(o,s,h,I,f)}else 16&C?mf(s,o,c,u,h,f):fd(o,s,h,I,f);u=y?u.projectionNext:u.next}}function Ul(s,o,u,c,h,f){cy(u,c,s.firstChild,o,h,f,!1)}function mf(s,o,u,c,h,f){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)fd(o,s,h,C[A],f);else cy(s,o,C,y[3],h,f,!0)}function Vl(s,o,u){s.setAttribute(o,"style",u)}function _f(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function zD(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||s.charCodeAt(h+f)<=32)return h}u=h+1}}const dy="ng-template";function hy(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==zD(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function j0(s){return 4===s.type&&s.value!==dy}function KD(s,o,u){return o===(4!==s.type||u?s.value:dy)}function ZD(s,o,u){let c=4;const h=s.attrs||[],f=function MM(s){for(let o=0;o<s.length;o++)if(Ha(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!KD(s,C,u)||""===C&&1===o.length){if(Bs(c))return!1;y=!0}}else{const A=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!hy(s.attrs,A,u)){if(Bs(c))return!1;y=!0}continue}const U=YD(8&c?"class":C,h,j0(s),u);if(-1===U){if(Bs(c))return!1;y=!0;continue}if(""!==A){let Z;Z=U>f?"":h[U+1].toLowerCase();const re=8&c?Z:null;if(re&&-1!==zD(re,A,0)||2&c&&A!==Z){if(Bs(c))return!1;y=!0}}}}else{if(!y&&!Bs(c)&&!Bs(C))return!1;if(y&&Bs(C))continue;y=!1,c=C|1&c}}return Bs(c)||y}function Bs(s){return 0==(1&s)}function YD(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let f=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function H0(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function QD(s,o,u=!1){for(let c=0;c<o.length;c++)if(ZD(s,o[c],u))return!0;return!1}function JD(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function $0(s,o){return s?":not("+o.trim()+")":o}function W0(s){let o=s[0],u=1,c=2,h="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const I=s[++u];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Bs(y)&&(o+=$0(f,h),h=""),c=y,f=f||!Bs(c);u++}return""!==h&&(o+=$0(f,h)),o}const Ht={};function G0(s){z0(Kt(),Me(),Rn()+s,!1)}function z0(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Ko(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Zo(o,f,0,u)}ls(u)}function Rg(s,o=null,u=null,c){const h=yf(s,o,u,c);return h.resolveInjectorInitializers(),h}function yf(s,o=null,u=null,c,h=new Set){const f=[u||bt,yD(s)];return c=c||("object"==typeof s?void 0:he(s)),new U_(f,o||ug(),c||null,h)}let Bl=(()=>{class s{static create(u,c){if(Array.isArray(u))return Rg({name:""},c,u,"");{const h=u.name??"";return Rg({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=fo,s.NULL=new r0,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>xn(t0)}),s.__NG_ELEMENT_ID__=-1,s})();function eu(s,o=Ye.Default){const u=Me();return null===u?xn(s,o):ea(ir(),u,J(s),o)}function Ng(){throw new Error("invalid")}function kg(s,o){return s<<17|o<<2}function Io(s){return s>>17&32767}function yy(s){return 2|s}function tu(s){return(131068&s)>>2}function vy(s,o){return-131069&s|o<<2}function md(s){return 1|s}function xy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];ml(h),y.contentQueries(2,o[f],f)}}}function Bg(s,o,u,c,h,f,y,I,C,A,N){const U=o.blueprint.slice();return U[0]=h,U[2]=76|c,(null!==N||s&&1024&s[2])&&(U[2]|=1024),Pa(U),U[3]=U[15]=s,U[8]=u,U[10]=y||s&&s[10],U[11]=I||s&&s[11],U[12]=C||s&&s[12]||null,U[9]=A||s&&s[9]||null,U[6]=f,U[20]=function RD(){return xD++}(),U[21]=N,U[16]=2==o.type?s[16]:U,U}function Id(s,o,u,c,h){let f=s.data[o];if(null===f)f=function Ry(s,o,u,c,h){const f=Wo(),y=_u(),C=s.data[o]=function cE(s,o,u,c,h,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,u,c,h),function Oc(){return Nt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=h;const y=function mu(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return $r(f,!0),f}function Ed(s,o,u,c){if(0===u)return-1;const h=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Py(s,o,u){qo(o);try{const c=s.viewQuery;null!==c&&bf(1,c,u);const h=s.template;null!==h&&uE(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xy(s,o),s.staticViewQueries&&bf(2,s.viewQuery,u);const f=s.components;null!==f&&function yS(s,o){for(let u=0;u<o.length;u++)By(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ps()}}function jg(s,o,u,c){const h=o[2];if(128!=(128&h)){qo(o);try{Pa(o),function Fa(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&uE(s,o,u,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&Ko(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Zo(o,A,0,null),jc(o,0)}if(function nN(s){for(let o=Ig(s);null!==o;o=Eg(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],f=h[3];0==(512&h[2])&&jn(f,1),h[2]|=512}}}(o),function tN(s){for(let o=Ig(s);null!==o;o=Eg(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Rs(c)&&jg(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&xy(s,o),y){const A=s.contentCheckHooks;null!==A&&Ko(o,A)}else{const A=s.contentHooks;null!==A&&Zo(o,A,1),jc(o,1)}!function wd(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)ls(~h);else{const f=h,y=u[++c],I=u[++c];Lc(y,f),I(2,o[f])}}}finally{ls(-1)}}(s,o);const I=s.components;null!==I&&function _S(s,o){for(let u=0;u<o.length;u++)zg(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&bf(2,C,c),y){const A=s.viewCheckHooks;null!==A&&Ko(o,A)}else{const A=s.viewHooks;null!==A&&Zo(o,A,2),jc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,jn(o[3],-1))}finally{Ps()}}}function uE(s,o,u,c,h){const f=Rn(),y=2&c;try{ls(-1),y&&o.length>22&&z0(s,o,22,!1),u(c,h)}finally{ls(f)}}function Cf(s,o,u){if(Mo(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}function Hg(s,o,u){!io()||(function hE(s,o,u,c){const h=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||ds(u,o),Gr(c,o);const y=u.initialInputs;for(let I=h;I<f;I++){const C=s.data[I],A=Qr(C);A&&TS(o,u,C);const N=Gi(o,s,I,u);Gr(N,o),null!==y&&bS(0,I-h,N,C,0,y),A&&(on(u.index,o)[8]=N)}}(s,o,u,Cr(u,o)),128==(128&u.flags)&&function Uy(s,o,u){const c=u.directiveStart,h=u.directiveEnd,f=u.index,y=function Nh(){return Nt.lFrame.currentDirectiveIndex}();try{ls(f);for(let I=c;I<h;I++){const C=s.data[I],A=o[I];zo(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Cd(C,A)}}finally{ls(-1),zo(y)}}(s,o,u))}function $g(s,o,u=Cr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],I=-1===y?u(o,s):s[y];s[h++]=I}}}function Wg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=My(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function My(s,o,u,c,h,f,y,I,C,A){const N=22+c,U=N+h,Z=function vS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ht);return u}(N,U),re="function"==typeof A?A():A;return Z[1]={type:s,blueprint:Z,template:u,queries:null,viewQuery:I,declTNode:o,data:Z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:re,incompleteFirstPass:!1}}function Ny(s,o,u,c){const h=mE(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&Dd(s).push(c,h.length-1))}function ky(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Oy(s,o){const c=o.directiveEnd,h=s.data,f=o.attrs,y=[];let I=null,C=null;for(let A=o.directiveStart;A<c;A++){const N=h[A],U=N.inputs,Z=null===f||j0(o)?null:eN(U,f);y.push(Z),I=ky(U,A,I),C=ky(N.outputs,A,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=I,o.outputs=C}function wS(s,o){const u=on(o,s);16&u[2]||(u[2]|=32)}function Ly(s,o,u,c){let h=!1;if(io()){const f=function JM(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];QD(u,y.selectors,!1)&&(h||(h=[]),oo(ds(u,o),s,y.type),Qr(y)?(Gg(s,u),h.unshift(y)):h.push(y))}return h}(s,o,u),y=null===c?null:{"":-1};if(null!==f){h=!0,CS(u,s.data.length,f.length);for(let N=0;N<f.length;N++){const U=f[N];U.providersResolver&&U.providersResolver(U)}let I=!1,C=!1,A=Ed(s,o,f.length,null);for(let N=0;N<f.length;N++){const U=f[N];u.mergedAttrs=$a(u.mergedAttrs,U.hostAttrs),fE(s,u,o,A,U),ES(A,U,y),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const Z=U.type.prototype;!I&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!C&&(Z.ngOnChanges||Z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}Oy(s,u)}y&&function XM(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const f=u[o[h+1]];if(null==f)throw new be(-301,!1);c.push(o[h],f)}}}(u,c,y)}return u.mergedAttrs=$a(u.mergedAttrs,u.attrs),h}function Fy(s,o,u,c,h,f){const y=f.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const C=~o.index;(function IS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=C&&I.push(C),I.push(c,h,y)}}function Cd(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Gg(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ES(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Qr(o)&&(u[""]=s)}}function CS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function fE(s,o,u,c,h){s.data[c]=h;const f=h.factory||(h.factory=Er(h.type)),y=new pi(f,Qr(h),eu);s.blueprint[c]=y,u[c]=y,Fy(s,o,0,c,Ed(s,u,h.hostVars,Ht),h)}function TS(s,o,u){const c=Cr(o,s),h=Wg(u),f=s[10],y=Td(s,Bg(s,h,null,u.onPush?32:16,c,o,f,f.createRenderer(c,u),null,null,null));s[o.index]=y}function ru(s,o,u,c,h,f){const y=Cr(s,o);!function pE(s,o,u,c,h,f,y){if(null==f)s.removeAttribute(o,h,u);else{const I=null==y?Ee(f):y(f,c||"",h);s.setAttribute(o,h,I,u)}}(o[11],y,f,s.value,u,c,h)}function bS(s,o,u,c,h,f){const y=f[o];if(null!==y){const I=c.setInput;for(let C=0;C<y.length;){const A=y[C++],N=y[C++],U=y[C++];null!==I?c.setInput(u,U,A,N):u[N]=U}}}function eN(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function DS(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function zg(s,o){const u=on(o,s);if(Rs(u)){const c=u[1];48&u[2]?jg(c,u,c.template,u[8]):u[5]>0&&Vy(u)}}function Vy(s){for(let c=Ig(s);null!==c;c=Eg(c))for(let h=10;h<c.length;h++){const f=c[h];if(Rs(f))if(512&f[2]){const y=f[1];jg(y,f,y.template,f[8])}else f[5]>0&&Vy(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=on(u[c],s);Rs(h)&&h[5]>0&&Vy(h)}}function By(s,o){const u=on(o,s),c=u[1];(function jy(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Py(c,u,u[8])}function Td(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Tf(s){for(;s;){s[2]|=32;const o=hd(s);if(ll(s)&&!o)return s;s=o}return null}function bd(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{jg(s,o,s.template,u)}catch(y){throw c&&AS(o,y),y}finally{h.end&&h.end()}}function bf(s,o,u){ml(0),o(s,u)}function mE(s){return s[7]||(s[7]=[])}function Dd(s){return s.cleanup||(s.cleanup=[])}function AS(s,o){const u=s[9],c=u?u.get(hf,null):null;c&&c.handleError(o)}function _E(s,o,u,c,h){for(let f=0;f<u.length;){const y=u[f++],I=u[f++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,h,c,I):C[I]=h}}function Df(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?f=I:1==f?h=ve(h,I):2==f&&(c=ve(c,I+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Hy(s,o,u,c,h=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(Fn(f)),ci(f))for(let I=10;I<f.length;I++){const C=f[I],A=C[1].firstChild;null!==A&&Hy(C[1],C,A,c)}const y=u.type;if(8&y)Hy(s,o,u.child,c);else if(32&y){const I=ty(u,o);let C;for(;C=I();)c.push(C)}else if(16&y){const I=ly(o,u);if(Array.isArray(I))c.push(...I);else{const C=hd(o[16]);Hy(C[1],C,I,c,!0)}}u=h?u.projectionNext:u.next}return c}class Kg{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Hy(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ci(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(sy(o,c),Tr(u,c))}this._attachedToViewContainer=!1}gf(this._lView[1],this._lView)}onDestroy(o){Ny(this._lView[1],this._lView,null,o)}markForCheck(){Tf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){bd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function R0(s,o){Ul(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=o}}class yE extends Kg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;bd(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class vE extends Ll{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=M(o);return new Zg(u,this.ngModule)}}function xS(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class rN{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,$_,c);return h!==$_||u===$_?h:this.parentInjector.get(o,u,c)}}class Zg extends j_{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function XD(s){return s.map(W0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return xS(this.componentDef.inputs)}get outputs(){return xS(this.componentDef.outputs)}create(o,u,c,h){let f=(h=h||this.ngModule)instanceof _a?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new rN(o,f):o,I=y.get(ED,null);if(null===I)throw new be(407,!1);const C=y.get(H_,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",U=c?function lE(s,o,u){return s.selectRootElement(o,u===_t.ShadowDom)}(A,c,this.componentDef.encapsulation):Cg(A,N,function wE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),Z=this.componentDef.onPush?288:272,re=My(0,null,null,1,0,null,null,null,null,null),Te=Bg(null,re,null,Z,null,null,I,A,C,y,null);let We,qe;qo(Te);try{const ct=function oN(s,o,u,c,h,f){const y=u[1];u[22]=s;const C=Id(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Df(C,A,!0),null!==s&&(cs(h,s,A),null!==C.classes&&_f(h,s,C.classes),null!==C.styles&&Vl(h,s,C.styles)));const N=c.createRenderer(s,o),U=Bg(u,Wg(o),null,o.onPush?32:16,u[22],C,c,N,f||null,null,null);return y.firstCreatePass&&(oo(ds(C,u),y,o.type),Gg(y,C),CS(C,u.length,1)),Td(u,U),u[22]=U}(U,this.componentDef,Te,I,A);if(U)if(c)cs(A,U,["ng-version",g0.full]);else{const{attrs:Tt,classes:ke}=function eS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===h?""!==f&&o.push(f,s[++c]):8===h&&u.push(f);else{if(!Bs(h))break;h=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Tt&&cs(A,U,Tt),ke&&ke.length>0&&_f(A,U,ke.join(" "))}if(qe=jo(re,22),void 0!==u){const Tt=qe.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const Mt=u[ke];Tt.push(null!=Mt?Array.from(Mt):null)}}We=function aN(s,o,u,c){const h=u[1],f=function QM(s,o,u){const c=ir();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),fE(s,c,o,Ed(s,o,1,null),u),Oy(s,c));const h=Gi(o,s,c.directiveStart,c);Gr(h,o);const f=Cr(c,o);return f&&Gr(f,o),h}(h,u,o);if(s[8]=u[8]=f,null!==c)for(const I of c)I(f,o);if(o.contentQueries){const I=ir();o.contentQueries(1,f,I.directiveStart)}const y=ir();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ls(y.index),Fy(u[1],y,0,y.directiveStart,y.directiveEnd,o),Cd(o,f)),f}(ct,this.componentDef,Te,[uN]),Py(re,Te,null)}finally{Ps()}return new sN(this.componentType,We,ad(qe,Te),Te,qe)}}class sN extends class c0{}{constructor(o,u,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new yE(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const f=this._rootLView;_E(f[1],f,h,o,u),wS(f,this._tNode.index)}}get injector(){return new na(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function uN(){const s=ir();yu(Me()[1],s)}let Yg=null;function jl(){if(!Yg){const s=xt.Symbol;if(s&&s.iterator)Yg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Yg=c)}}}return Yg}function ku(s){return!!EE(s)&&(Array.isArray(s)||!(s instanceof Map)&&jl()in s)}function EE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function su(s,o,u){return s[o]=u}function ii(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Hl(s,o,u,c){const h=ii(s,o,u);return ii(s,o+1,c)||h}function js(s,o,u,c,h,f){const y=Hl(s,o,u,c);return Hl(s,o+2,h,f)||y}function Wy(s,o,u,c){const h=Me();return ii(h,Ua(),o)&&(Kt(),ru(Pn(),h,s,o,u,c)),Wy}function Gy(s,o,u,c,h,f,y,I){const C=Me(),A=Kt(),N=s+22,U=A.firstCreatePass?function mN(s,o,u,c,h,f,y,I,C){const A=o.consts,N=Id(o,s,4,y||null,fi(A,I));Ly(o,u,N,fi(A,C)),yu(o,N);const U=N.tViews=My(2,N,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),U.queries=o.queries.embeddedTView(N)),N}(N,A,C,o,u,c,h,f,y):A.data[N];$r(U,!1);const Z=C[11].createComment("");Sg(A,C,Z,U),Gr(Z,C),Td(C,C[N]=DS(Z,C,Z,U)),xa(U)&&Hg(A,C,U),null!=y&&$g(C,U,I)}function ME(s){return function $i(s,o){return s[o]}(function La(){return Nt.lFrame.contextLView}(),22+s)}function NE(s,o,u){const c=Me();return ii(c,Ua(),o)&&function _s(s,o,u,c,h,f,y,I){const C=Cr(o,u);let N,A=o.inputs;!I&&null!=A&&(N=A[c])?(_E(s,u,N,c,h),ul(o)&&wS(u,o.index)):3&o.type&&(c=function ZM(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}(Kt(),Pn(),c,s,o,c[11],u,!1),NE}function zy(s,o,u,c,h){const y=h?"class":"style";_E(s,u,o.inputs[y],y,c)}function Ou(s,o,u,c){const h=Me(),f=Kt(),y=22+s,I=h[11],C=h[y]=Cg(I,o,function vl(){return Nt.lFrame.currentNamespace}()),A=f.firstCreatePass?function LS(s,o,u,c,h,f,y){const I=o.consts,A=Id(o,s,2,h,fi(I,f));return Ly(o,u,A,fi(I,y)),null!==A.attrs&&Df(A,A.attrs,!1),null!==A.mergedAttrs&&Df(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,h,0,o,u,c):f.data[y];$r(A,!0);const N=A.mergedAttrs;null!==N&&cs(I,C,N);const U=A.classes;null!==U&&_f(I,C,U);const Z=A.styles;return null!==Z&&Vl(I,C,Z),64!=(64&A.flags)&&Sg(f,h,C,A),0===function Na(){return Nt.lFrame.elementDepthCount}()&&Gr(C,h),function kc(){Nt.lFrame.elementDepthCount++}(),xa(A)&&(Hg(f,h,A),Cf(f,A,h)),null!==c&&$g(h,A),Ou}function Jg(){let s=ir();_u()?Go():(s=s.parent,$r(s,!1));const o=s;!function ka(){Nt.lFrame.elementDepthCount--}();const u=Kt();return u.firstCreatePass&&(yu(u,s),Mo(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function wu(s){return 0!=(16&s.flags)}(o)&&zy(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Iu(s){return 0!=(32&s.flags)}(o)&&zy(u,o,Me(),o.stylesWithoutHost,!1),Jg}function qy(s,o,u,c){return Ou(s,o,u,c),Jg(),qy}function Xg(s,o,u){const c=Me(),h=Kt(),f=s+22,y=h.firstCreatePass?function FS(s,o,u,c,h){const f=o.consts,y=fi(f,c),I=Id(o,s,8,"ng-container",y);return null!==y&&Df(I,y,!0),Ly(o,u,I,fi(f,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(f,h,c,o,u):h.data[f];$r(y,!0);const I=c[f]=c[11].createComment("");return Sg(h,c,I,y),Gr(I,c),xa(y)&&(Hg(h,c,y),Cf(h,y,c)),null!=u&&$g(c,y),Xg}function em(){let s=ir();const o=Kt();return _u()?Go():(s=s.parent,$r(s,!1)),o.firstCreatePass&&(yu(o,s),Mo(s)&&o.queries.elementEnd(s)),em}function Ky(s,o,u){return Xg(s,o,u),em(),Ky}function kE(){return Me()}function Zy(s){return!!s&&"function"==typeof s.then}function OE(s){return!!s&&"function"==typeof s.subscribe}const LE=OE;function Yy(s,o,u,c){const h=Me(),f=Kt(),y=ir();return function UE(s,o,u,c,h,f,y,I){const C=xa(c),N=s.firstCreatePass&&Dd(s),U=o[8],Z=mE(o);let re=!0;if(3&c.type||I){const qe=Cr(c,o),ct=I?I(qe):qe,Tt=Z.length,ke=I?vn=>I(Fn(vn[c.index])):c.index;let Mt=null;if(!I&&C&&(Mt=function US(s,o,u,c){const h=s.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===u&&h[f+1]===c){const I=o[7],C=h[f+2];return I.length>C?I[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,h,c.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=f,Mt.__ngLastListenerFn__=f,re=!1;else{f=BE(c,o,U,f,!1);const vn=u.listen(ct,h,f);Z.push(f,vn),N&&N.push(h,ke,Tt,Tt+1)}}else f=BE(c,o,U,f,!1);const Te=c.outputs;let We;if(re&&null!==Te&&(We=Te[h])){const qe=We.length;if(qe)for(let ct=0;ct<qe;ct+=2){const er=o[We[ct]][We[ct+1]].subscribe(f),oh=Z.length;Z.push(f,er),N&&N.push(h,c.index,oh,-(oh+1))}}}(f,h,h[11],y,s,o,0,c),Yy}function VE(s,o,u,c){try{return!1!==u(c)}catch(h){return AS(s,h),!1}}function BE(s,o,u,c,h){return function f(y){if(y===Function)return c;Tf(2&s.flags?on(s.index,o):o);let C=VE(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)C=VE(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function Fd(s=1){return function Ms(s){return(Nt.lFrame.contextLView=function Vc(s,o){for(;s>0;)o=o[15],s--;return o}(s,Nt.lFrame.contextLView))[8]}(s)}function _N(s,o){let u=null;const c=function xg(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const f=o[h];if("*"!==f){if(null===c?QD(s,f,!0):JD(c,f))return h}else u=h}return u}function VS(s){const o=Me()[16][6];if(!o.projection){const c=o.projection=co(s?s.length:1,null),h=c.slice();let f=o.child;for(;null!==f;){const y=s?_N(f,s):0;null!==y&&(h[y]?h[y].projectionNext=f:c[y]=f,h[y]=f),f=f.next}}}function BS(s,o=0,u){const c=Me(),h=Kt(),f=Id(h,22+s,16,null,u||null);null===f.projection&&(f.projection=o),Go(),64!=(64&f.flags)&&function V0(s,o,u){mf(o[11],0,o,u,M0(s,u,o),br(u.parent||o[6],u,o))}(h,c,f)}function tv(s,o,u,c,h){const f=s[u+1],y=null===o;let I=c?Io(f):tu(f),C=!1;for(;0!==I&&(!1===C||y);){const N=s[I+1];zE(s[I],o)&&(C=!0,s[I+1]=c?md(N):yy(N)),I=c?Io(N):tu(N)}C&&(s[u+1]=c?yy(f):md(f))}function zE(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&qi(s,o)>=0}const yr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nv(s){return s.substring(yr.key,yr.keyEnd)}function rv(s,o){const u=yr.textEnd;return u===o?-1:(o=yr.keyEnd=function qE(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,yr.key=o,u),Gl(s,o,u))}function Gl(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function ZE(s){!function Lr(s,o,u,c){const h=Kt(),f=function us(s){const o=Nt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);h.firstUpdatePass&&function Fu(s,o,u,c){const h=s.data;if(null===h[u+1]){const f=h[Rn()],y=Co(s,u);zl(f,c)&&null===o&&!y&&(o=!1),o=function WS(s,o,u,c){const h=function gl(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Vd(u=Dr(null,s,o,u,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Dr(h,s,o,u,c),null===f){let C=function Af(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==tu(c))return s[Io(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Dr(null,s,o,C[1],c),C=Vd(C,o.attrs,c),function sv(s,o,u,c){s[Io(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else f=function YE(s,o,u){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=Vd(c,s[f].hostAttrs,u);return Vd(c,o.attrs,u)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),u}(h,f,o,c),function vN(s,o,u,c,h,f){let y=f?o.classBindings:o.styleBindings,I=Io(y),C=tu(y);s[c]=u;let N,A=!1;if(Array.isArray(u)){const U=u;N=U[1],(null===N||qi(U,N)>0)&&(A=!0)}else N=u;if(h)if(0!==C){const Z=Io(s[I+1]);s[c+1]=kg(Z,I),0!==Z&&(s[Z+1]=vy(s[Z+1],c)),s[I+1]=function lS(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=kg(I,0),0!==I&&(s[I+1]=vy(s[I+1],c)),I=c;else s[c+1]=kg(C,0),0===I?I=c:s[C+1]=vy(s[C+1],c),C=c;A&&(s[c+1]=yy(s[c+1])),tv(s,N,c,!0),tv(s,N,c,!1),function ev(s,o,u,c,h){const f=h?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&qi(f,o)>=0&&(u[c+1]=md(u[c+1]))}(o,N,s,c,f),y=kg(I,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,u,y,c)}}(h,null,f,c);const y=Me();if(u!==Ht&&ii(y,f,u)){const I=h.data[Rn()];if(zl(I,c)&&!Co(h,f)){let C=c?I.classesWithoutHost:I.stylesWithoutHost;null!==C&&(u=ve(C,u||"")),zy(h,I,y,u,c)}else!function zS(s,o,u,c,h,f,y,I){h===Ht&&(h=bt);let C=0,A=0,N=0<h.length?h[0]:null,U=0<f.length?f[0]:null;for(;null!==N||null!==U;){const Z=C<h.length?h[C+1]:void 0,re=A<f.length?f[A+1]:void 0;let We,Te=null;N===U?(C+=2,A+=2,Z!==re&&(Te=U,We=re)):null===U||null!==N&&N<U?(C+=2,Te=N):(A+=2,Te=U,We=re),null!==Te&&JE(s,o,u,c,Te,We,y,I),N=C<h.length?h[C]:null,U=A<f.length?f[A]:null}}(h,I,y,y[11],y[f+1],y[f+1]=function GS(s,o,u){if(null==u||""===u)return bt;const c=[],h=Fs(u);if(Array.isArray(h))for(let f=0;f<h.length;f++)s(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&s(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,f)}}(st,ys,s,!0)}function ys(s,o){for(let u=function $S(s){return function Wl(s){yr.key=0,yr.keyEnd=0,yr.value=0,yr.valueEnd=0,yr.textEnd=s.length}(s),rv(s,Gl(s,0,yr.textEnd))}(o);u>=0;u=rv(o,u))st(s,nv(o),!0)}function Co(s,o){return o>=s.expandoStartIndex}function Dr(s,o,u,c,h){let f=null;const y=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<y&&(f=o[I],c=Vd(c,f.hostAttrs,h),f!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Vd(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),st(s,y,!!u||o[++f]))}return void 0===s?null:s}function JE(s,o,u,c,h,f,y,I){if(!(3&o.type))return;const C=s.data,A=C[I+1];Bd(function _i(s){return 1==(1&s)}(A)?ov(C,o,u,h,tu(A),y):void 0)||(Bd(f)||function _y(s){return 2==(2&s)}(A)&&(f=ov(C,null,u,h,I,y)),function B0(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let f=-1===c.indexOf("-")?void 0:ya.DashCase;null==h?s.removeStyle(u,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=ya.Important),s.setStyle(u,c,h,f))}}(c,y,Si(Rn(),u),h,f))}function ov(s,o,u,c,h,f){const y=null===o;let I;for(;h>0;){const C=s[h],A=Array.isArray(C),N=A?C[1]:C,U=null===N;let Z=u[h+1];Z===Ht&&(Z=U?bt:void 0);let re=U?Ka(Z,c):N===c?Z:void 0;if(A&&!Bd(re)&&(re=Ka(C,c)),Bd(re)&&(I=re,y))return I;const Te=s[h+1];h=y?Io(Te):tu(Te)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(I=Ka(C,c))}return I}function Bd(s){return void 0!==s}function zl(s,o){return 0!=(s.flags&(o?16:32))}function XE(s,o=""){const u=Me(),c=Kt(),h=s+22,f=c.firstCreatePass?Id(c,h,1,o,null):c.data[h],y=u[h]=function ry(s,o){return s.createText(o)}(u[11],o);Sg(c,u,y,f),$r(f,!1)}function ql(s){return sm("",s,""),ql}function sm(s,o,u){const c=Me(),h=function xd(s,o,u,c){return ii(s,Ua(),u)?o+Ee(u)+c:Ht}(c,s,o,u);return h!==Ht&&function iu(s,o,u){const c=Si(o,s);!function A0(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,Rn(),h),sm}const Kl=void 0;var Uu=["en",[["a","p"],["AM","PM"],Kl],[["AM","PM"],Kl,Kl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kl,"{1} 'at' {0}",Kl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eA(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Vu={};function Ev(s){const o=function tA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Tv(o);if(u)return u;const c=o.split("-")[0];if(u=Tv(c),u)return u;if("en"===c)return Uu;throw new be(701,!1)}function Zl(s){return Ev(s)[St.PluralCase]}function Tv(s){return s in Vu||(Vu[s]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[s]),Vu[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const Yl="en-US";let Dv=Yl;class qd{}class AC{}function wA(s,o){return new RC(s,o??null)}class RC extends qd{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vE(this);const c=rt(o);this._bootstrapComponents=Xa(c.bootstrap),this._r3Injector=yf(o,u,[{provide:qd,useValue:this},{provide:Ll,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Uf extends AC{constructor(o){super(),this.moduleType=o}create(o){return new RC(this.moduleType,o)}}class IA extends qd{constructor(o,u,c){super(),this.componentFactoryResolver=new vE(this),this.instance=null;const h=new U_([...o,{provide:qd,useValue:this},{provide:Ll,useValue:this.componentFactoryResolver}],u||ug(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Kd(s,o,u=null){return new IA(s,o,u).injector}let PC=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=s0(0,u.type),h=c.length>0?Kd([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=rn({token:s,providedIn:"environment",factory:()=>new s(xn(_a))}),s})();function $v(s){s.getStandaloneInjector=o=>o.get(PC).getOrCreateStandaloneInjector(s)}function ic(s,o,u,c){return function Hf(s,o,u,c,h,f){const y=o+u;return ii(s,y,h)?su(s,y+1,f?c.call(f,h):c(h)):Qd(s,y+1)}(Me(),sr(),s,o,u,c)}function ou(s,o,u,c,h){return function Wu(s,o,u,c,h,f,y){const I=o+u;return Hl(s,I,h,f)?su(s,I+2,y?c.call(y,h,f):c(h,f)):Qd(s,I+2)}(Me(),sr(),s,o,u,c,h)}function UC(s,o,u,c,h,f,y){return function VC(s,o,u,c,h,f,y,I,C){const A=o+u;return js(s,A,h,f,y,I)?su(s,A+4,C?c.call(C,h,f,y,I):c(h,f,y,I)):Qd(s,A+4)}(Me(),sr(),s,o,u,c,h,f,y)}function Yd(s,o,u,c,h,f,y,I){const C=sr()+s,A=Me(),N=js(A,C,u,c,h,f);return ii(A,C+4,y)||N?su(A,C+5,I?o.call(I,u,c,h,f,y):o(u,c,h,f,y)):function Sd(s,o){return s[o]}(A,C+5)}function Qd(s,o){const u=s[o];return u===Ht?void 0:u}function mm(s){return o=>{setTimeout(s,void 0,o)}}const vs=class Jd extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,f=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=mm(f),h&&(h=mm(h)),y&&(y=mm(y)));const I=super.subscribe({next:h,error:f,complete:y});return o instanceof $.w0&&o.add(I),I}};function SA(){return this._results[jl()]()}class qv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=jl(),c=qv.prototype;c[u]||(c[u]=SA)}get changes(){return this._changes||(this._changes=new vs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Sn(o);(this._changesDetected=!function ei(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],f=o[c];if(u&&(h=u(h),f=u(f)),f!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wf=(()=>{class s{}return s.__NG_ELEMENT_ID__=RA,s})();const AA=Wf,xA=class extends AA{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=Bg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),Py(c,h,o),new Kg(h)}};function RA(){return _m(ir(),Me())}function _m(s,o){return 4&s.type?new xA(o,s,ad(s,o)):null}let Gf=(()=>{class s{}return s.__NG_ELEMENT_ID__=$C,s})();function $C(){return zC(ir(),Me())}const PA=Gf,WC=class extends PA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return ad(this._hostTNode,this._hostLView)}get injector(){return new na(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ga(this._hostTNode,this._hostLView);if(Uh(o)){const u=Ns(o,this._hostLView),c=or(o);return new na(u[1].data[c+8],u)}return new na(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=GC(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const y=o.createEmbeddedView(u||{},f);return this.insert(y,h),y}createComponent(o,u,c,h,f){const y=o&&!function hs(s){return"function"==typeof s}(o);let I;if(y)I=u;else{const U=u||{};I=U.index,c=U.injector,h=U.projectableNodes,f=U.environmentInjector||U.ngModuleRef}const C=y?o:new Zg(M(o)),A=c||this.parentInjector;if(!f&&null==C.ngModule){const Z=(y?A:this.parentInjector).get(_a,null);Z&&(f=Z)}const N=C.create(A,h,void 0,f);return this.insert(N.hostView,I),N}insert(o,u){const c=o._lView,h=c[1];if(function fl(s){return ci(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const U=c[3],Z=new WC(U,U[6],U[3]);Z.detach(Z.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function HD(s,o,u,c){const h=10+c,f=u.length;c>0&&(u[h-1][4]=o),c<f-10?(o[4]=u[h],lo(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function $D(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(h,c,y,f);const I=U0(f,y),C=c[11],A=bg(C,y[7]);return null!==A&&function x0(s,o,u,c,h,f){c[0]=h,c[6]=o,Ul(s,c,u,1,h,f)}(h,y[6],C,c,A,I),o.attachToViewContainerRef(),lo(Kv(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=GC(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=sy(this._lContainer,u);c&&(Tr(Kv(this._lContainer),u),gf(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=sy(this._lContainer,u);return c&&null!=Tr(Kv(this._lContainer),u)?new Kg(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function GC(s){return s[8]}function Kv(s){return s[8]||(s[8]=[])}function zC(s,o){let u;const c=o[s.index];if(ci(c))u=c;else{let h;if(8&s.type)h=Fn(c);else{const f=o[11];h=f.createComment("");const y=Cr(s,o);va(f,bg(f,y),h,function L0(s,o){return s.nextSibling(o)}(f,y),!1)}o[s.index]=u=DS(c,o,h,s),Td(o,u)}return new WC(u,s,o)}class vm{constructor(o){this.queryList=o,this.matches=null}clone(){return new vm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new Xd(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Jv(o,u).matches&&this.queries[u].setDirty()}}class KC{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class zf{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new zf(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class wm{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new wm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,u,ZC(u,f)),this.matchTNodeWithReadOption(o,u,qa(u,o,f,!1,!1))}else c===Wf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,qa(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Fl||h===Gf||h===Wf&&4&u.type)this.addMatch(u.index,-2);else{const f=qa(u,o,h,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ZC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function kA(s,o,u,c){return-1===u?function NA(s,o){return 11&s.type?ad(s,o):4&s.type?_m(s,o):null}(o,s):-2===u?function YC(s,o,u){return u===Fl?ad(o,s):u===Wf?_m(o,s):u===Gf?zC(o,s):void 0}(s,o,c):Gi(s,s[1],u,o)}function Im(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const f=s.data,y=u.matches,I=[];for(let C=0;C<y.length;C+=2){const A=y[C];I.push(A<0?null:kA(o,f[A],y[C+1],u.metadata.read))}h.matches=I}return h.matches}function Zv(s,o,u,c){const h=s.queries.getByIndex(u),f=h.matches;if(null!==f){const y=Im(s,o,h,u);for(let I=0;I<f.length;I+=2){const C=f[I];if(C>0)c.push(y[I/2]);else{const A=f[I+1],N=o[-C];for(let U=10;U<N.length;U++){const Z=N[U];Z[17]===Z[3]&&Zv(Z[1],Z,A,c)}if(null!==N[9]){const U=N[9];for(let Z=0;Z<U.length;Z++){const re=U[Z];Zv(re[1],re,A,c)}}}}}return c}function QC(s){const o=Me(),u=Kt(),c=Va();ml(c+1);const h=Jv(u,c);if(s.dirty&&function hl(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const f=h.crossesNgTemplate?Zv(u,o,c,[]):Im(u,o,h,c);s.reset(f,f0),s.notifyOnChanges()}return!0}return!1}function JC(s,o,u,c){const h=Kt();if(h.firstCreatePass){const f=ir();(function Qv(s,o,u){null===s.queries&&(s.queries=new zf),s.queries.track(new wm(o,u))})(h,new KC(o,u,c),f.index),function LA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function Cm(s,o,u){const c=new qv(4==(4&u));Ny(s,o,c,c.destroy),null===o[19]&&(o[19]=new Xd),o[19].queries.push(new vm(c))}(h,Me(),u)}function Yv(){return function Em(s,o){return s[19].queries[o].queryList}(Me(),Va())}function Jv(s,o){return s.queries.getByIndex(o)}function Tm(s,o){return _m(s,o)}function rh(...s){}const gT=new Dn("Application Initializer");let Jf=(()=>{class s{constructor(u){this.appInits=u,this.resolve=rh,this.reject=rh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(Zy(f))u.push(f);else if(LE(f)){const y=new Promise((I,C)=>{f.subscribe({complete:I,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(xn(gT,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const mT=new Dn("AppId",{providedIn:"root",factory:function _T(){return`${Xf()}${Xf()}${Xf()}`}});function Xf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pm=new Dn("Platform Initializer"),uw=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ep=new Dn("appBootstrapListener");let vT=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const lc=new Dn("LocaleId",{providedIn:"root",factory:()=>T(lc,Ye.Optional|Ye.SkipSelf)||function GA(){return typeof $localize<"u"&&$localize.locale||Yl}()}),wT=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let qA=(()=>{class s{compileModuleSync(u){return new Uf(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=Xa(rt(u).declarations).reduce((y,I)=>{const C=M(I);return C&&y.push(new Zg(C)),y},[]);return new zA(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const tp=(()=>Promise.resolve(0))();function cw(s){typeof Zone>"u"?tp.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Qi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vs(!1),this.onMicrotaskEmpty=new vs(!1),this.onStable=new vs(!1),this.onError=new vs(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function TT(){let s=xt.requestAnimationFrame,o=xt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Ws(s){const o=()=>{!function ZA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Om(s),s.isCheckStableRunning=!0,cc(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Om(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,f,y,I)=>{try{return bT(s),u.invokeTask(h,f,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),rp(s)}},onInvoke:(u,c,h,f,y,I,C)=>{try{return bT(s),u.invoke(h,f,y,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),rp(s)}},onHasTask:(u,c,h,f)=>{u.hasTask(h,f),c===h&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Om(s),cc(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,h,f)=>(u.handleError(h,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qi.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(Qi.isInAngularZone())throw new be(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,np,rh,rh);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const np={};function cc(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Om(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function bT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function rp(s){s._nesting--,cc(s)}class DT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vs,this.onMicrotaskEmpty=new vs,this.onStable=new vs,this.onError=new vs}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const Ji=new Dn(""),dw=new Dn("");let fw,YA=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fw||(function QA(s){fw=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qi.assertNotInAngularZone(),cw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(xn(Qi),xn(hw),xn(dw))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),hw=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return fw?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ku=null;const pw=new Dn("AllowMultipleToken"),dc=new Dn("PlatformDestroyListeners");class Lm{constructor(o,u){this.name=o,this.token=u}}function xT(s,o,u=[]){const c=`Platform: ${o}`,h=new Dn(c);return(f=[])=>{let y=_w();if(!y||y.injector.get(pw,!1)){const I=[...u,...f,{provide:h,useValue:!0}];s?s(I):function JA(s){if(Ku&&!Ku.get(pw,!1))throw new be(400,!1);Ku=s;const o=s.get(Fm);(function AT(s){const o=s.get(Pm,null);o&&o.forEach(u=>u())})(s)}(function PT(s=[],o){return Bl.create({name:o,providers:[{provide:sg,useValue:"platform"},{provide:dc,useValue:new Set([()=>Ku=null])},...s]})}(I,c))}return function RT(s){const o=_w();if(!o)throw new be(401,!1);return o}()}}function _w(){return Ku?.get(Fm)??null}let Fm=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function MT(s,o){let u;return u="noop"===s?new DT:("zone.js"===s?void 0:s)||new Qi(o),u}(c?.ngZone,function yw(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Qi,useValue:h}];return h.run(()=>{const y=Bl.create({providers:f,parent:this.injector,name:u.moduleType.name}),I=u.create(y),C=I.injector.get(hf,null);if(!C)throw new be(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:N=>{C.handleError(N)}});I.onDestroy(()=>{sh(this._modules,I),A.unsubscribe()})}),function hc(s,o,u){try{const c=u();return Zy(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,h,()=>{const A=I.injector.get(Jf);return A.runInitializers(),A.donePromise.then(()=>(function Sv(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(Dv=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(lc,Yl)||Yl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const h=uu({},c);return function ST(s,o,u){const c=new Uf(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(u){const c=u.injector.get(Um);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new be(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(dc,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(xn(Bl))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function uu(s,o){return Array.isArray(o)?o.reduce(uu,s):{...s,...o}}let Um=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new k.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Qi.assertNotInAngularZone(),cw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Qi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(f,y.pipe((0,ue.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof j_;if(!this._injector.get(Jf).done)throw!h&&Oe(u),new be(405,false);let y;y=h?u:this._injector.get(Ll).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const I=function gw(s){return s.isBoundToModule}(y)?void 0:this._injector.get(qd),A=y.create(Bl.NULL,[],c||y.selector,I),N=A.location.nativeElement,U=A.injector.get(Ji,null);return U?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),sh(this.components,A),U?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;sh(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ep,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>sh(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new be(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(xn(Qi),xn(_a),xn(hf))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function sh(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let fc=!0,NT=!1;function kT(){return NT=!0,fc}function OT(){if(NT)throw new Error("Cannot enable prod mode after platform setup.");fc=!1}let ww=(()=>{class s{}return s.__NG_ELEMENT_ID__=tx,s})();function tx(s){return function nx(s,o,u){if(ul(s)&&!u){const c=on(s.index,o);return new Kg(c,c)}return 47&s.type?new Kg(o[16],o):null}(ir(),Me(),16==(16&s))}class jT{constructor(){}supports(o){return ku(o)}create(o){return new Wm(o)}}const op=(s,o)=>o;class Wm{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||op}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<Tw(c,h,f)?u:c,I=Tw(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{f||(f=[]);const A=I-h,N=C-h;if(A!=N){for(let Z=0;Z<A;Z++){const re=Z<f.length?f[Z]:f[Z]=0,Te=re+Z;N<=Te&&Te<A&&(f[Z]=re+1)}f[y.previousIndex]=N-A}}I!==C&&o(y,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!ku(o))throw new be(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)f=o[I],y=this._trackByFn(I,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,I)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,I),c=!0),u=u._next}else h=0,function gN(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[jl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(h,I),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,I,y,h)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,h)):o=this._addAfter(new ap(u,c),f,h),o}_verifyReinsertion(o,u,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Cw),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ap{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ew{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Cw{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Ew,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tw(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class bw{constructor(){}supports(o){return o instanceof Map||EE(o)}create(){return new HT}}class HT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||EE(o)))throw new be(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new $T(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class $T{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gs(){return new Gm([new jT])}let Gm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Gs()),deps:[[s,new Dt,new Ve]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new be(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Gs}),s})();function WT(){return new Dw([new bw])}let Dw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||WT()),deps:[[s,new Dt,new Ve]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new be(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:WT}),s})();const ox=xT(null,"core",[]);let ax=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(xn(Um))},s.\u0275mod=Xt({type:s}),s.\u0275inj=Vt({}),s})();function ux(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Re,F)=>{F.d(Re,{Z:()=>be});var p=F(2090),$=F(4859),k=F(9681),se=F(1877);class ue{constructor(Ee,ge){this._delegate=Ee,this.firebase=ge,(0,k._addComponent)(Ee,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Ee,ge=k._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(Ee);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Qe=Ze.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:ge})}_removeServiceInstance(Ee,ge=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(ge)}_addComponent(Ee){(0,k._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,k._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ve(){const tt=function he(tt){const Ee={},ge={__esModule:!0,initializeApp:function Le(ie,le={}){const we=k.initializeApp(ie,le);if((0,p.r3)(Ee,we.name))return Ee[we.name];const Q=new tt(we,ge);return Ee[we.name]=Q,Q},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(ie){const le=ie.name,we=le.replace("-compat","");if(k._registerComponent(ie)&&"PUBLIC"===ie.type){const Q=(ee=Ze())=>{if("function"!=typeof ee[we])throw pe.create("invalid-app-argument",{appName:le});return ee[we]()};void 0!==ie.serviceProps&&(0,p.ZB)(Q,ie.serviceProps),ge[we]=Q,tt.prototype[we]=function(...ee){return this._getService.bind(this,le).apply(this,ie.multipleInstances?ee:[])}}return"PUBLIC"===ie.type?ge[we]:null},removeApp:function Qe(ie){delete Ee[ie]},useAsService:function Ge(ie,le){return"serverAuth"===le?null:le},modularAPIs:k}};function Ze(ie){if(!(0,p.r3)(Ee,ie=ie||k._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ie});return Ee[ie]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function Pe(){return Object.keys(Ee).map(ie=>Ee[ie])}}),Ze.App=tt,ge}(ue);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ee(ge){(0,p.ZB)(tt,ge)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),tt}(),z=new se.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=K;!function Ne(tt){(0,k.registerVersion)("@firebase/app-compat","0.1.39",tt)}()},9681:(pt,Re,F)=>{F.r(Re),F.d(Re,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>nn,_addOrOverwriteComponent:()=>rn,_apps:()=>dn,_clearComponents:()=>Vi,_components:()=>Cn,_getProvider:()=>Vt,_registerComponent:()=>qt,_removeServiceInstance:()=>Ir,deleteApp:()=>Hi,getApp:()=>Bn,getApps:()=>bi,initializeApp:()=>jr,onLog:()=>Kn,registerVersion:()=>nr,setLogLevel:()=>wn});var p=F(5861),$=F(4859),k=F(1877),se=F(2090),ue=F(8766);class me{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function pe(Xe){return"VERSION"===Xe.getComponent()?.type}(et)){const It=et.getImmediate();return`${It.library}/${It.version}`}return null}).filter(et=>et).join(" ")}}const he="@firebase/app",K=new k.Yd("@firebase/app"),jt="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,Cn=new Map;function nn(Xe,De){try{Xe.container.addComponent(De)}catch(et){K.debug(`Component ${De.name} failed to register with FirebaseApp ${Xe.name}`,et)}}function rn(Xe,De){Xe.container.addOrOverwriteComponent(De)}function qt(Xe){const De=Xe.name;if(Cn.has(De))return K.debug(`There were multiple attempts to register component ${De}.`),!1;Cn.set(De,Xe);for(const et of dn.values())nn(et,Xe);return!0}function Vt(Xe,De){const et=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Xe.container.getProvider(De)}function Ir(Xe,De,et=jt){Vt(Xe,De).clearInstance(et)}function Vi(){Cn.clear()}const On=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bi{constructor(De,et,It){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}const ji="9.14.0";function jr(Xe,De={}){let et=Xe;"object"!=typeof De&&(De={name:De});const It=Object.assign({name:jt,automaticDataCollectionEnabled:!1},De),Ct=It.name;if("string"!=typeof Ct||!Ct)throw On.create("bad-app-name",{appName:String(Ct)});if(et||(et=(0,se.aH)()),!et)throw On.create("no-options");const Xt=dn.get(Ct);if(Xt){if((0,se.vZ)(et,Xt.options)&&(0,se.vZ)(It,Xt.config))return Xt;throw On.create("duplicate-app",{appName:Ct})}const q=new $.H0(Ct);for(const Y of Cn.values())q.addComponent(Y);const W=new Bi(et,It,q);return dn.set(Ct,W),W}function Bn(Xe=jt){const De=dn.get(Xe);if(!De&&Xe===jt)return jr();if(!De)throw On.create("no-app",{appName:Xe});return De}function bi(){return Array.from(dn.values())}function Hi(Xe){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(Xe){const De=Xe.name;dn.has(De)&&(dn.delete(De),yield Promise.all(Xe.container.getProviders().map(et=>et.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function nr(Xe,De,et){var It;let Ct=null!==(It=ze[Xe])&&void 0!==It?It:Xe;et&&(Ct+=`-${et}`);const Xt=Ct.match(/\s|\//),q=De.match(/\s|\//);if(Xt||q){const W=[`Unable to register library "${Ct}" with version "${De}":`];return Xt&&W.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Xt&&q&&W.push("and"),q&&W.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void K.warn(W.join(" "))}qt(new $.wA(`${Ct}-version`,()=>({library:Ct,version:De}),"VERSION"))}function Kn(Xe,De){if(null!==Xe&&"function"!=typeof Xe)throw On.create("invalid-log-argument");(0,k.Am)(Xe,De)}function wn(Xe){(0,k.Ub)(Xe)}const In="firebase-heartbeat-store";let Tn=null;function _n(){return Tn||(Tn=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,De)=>{0===De&&Xe.createObjectStore(In)}}).catch(Xe=>{throw On.create("idb-open",{originalErrorMessage:Xe.message})})),Tn}function _t(){return(_t=(0,p.Z)(function*(Xe){var De;try{return(yield _n()).transaction(In).objectStore(In).get(Zn(Xe))}catch(et){if(et instanceof se.ZR)K.warn(et.message);else{const It=On.create("idb-get",{originalErrorMessage:null===(De=et)||void 0===De?void 0:De.message});K.warn(It.message)}}})).apply(this,arguments)}function xt(Xe,De){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,p.Z)(function*(Xe,De){var et;try{const Ct=(yield _n()).transaction(In,"readwrite");return yield Ct.objectStore(In).put(De,Zn(Xe)),Ct.done}catch(It){if(It instanceof se.ZR)K.warn(It.message);else{const Ct=On.create("idb-set",{originalErrorMessage:null===(et=It)||void 0===et?void 0:et.message});K.warn(Ct.message)}}})).apply(this,arguments)}function Zn(Xe){return`${Xe.name}!${Xe.options.appId}`}class Nr{constructor(De){this.container=De,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Yt(et),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var De=this;return(0,p.Z)(function*(){const It=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=kt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!De._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Ct))return De._heartbeatsCache.heartbeats.push({date:Ct,agent:It}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Xt=>{const q=new Date(Xt.date).valueOf();return Date.now()-q<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,p.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const et=kt(),{heartbeatsToSend:It,unsentEntries:Ct}=function Zr(Xe,De=1024){const et=[];let It=Xe.slice();for(const Ct of Xe){const Xt=et.find(q=>q.agent===Ct.agent);if(Xt){if(Xt.dates.push(Ct.date),dr(et)>De){Xt.dates.pop();break}}else if(et.push({agent:Ct.agent,dates:[Ct.date]}),dr(et)>De){et.pop();break}It=It.slice(1)}return{heartbeatsToSend:et,unsentEntries:It}}(De._heartbeatsCache.heartbeats),Xt=(0,se.L)(JSON.stringify({version:2,heartbeats:It}));return De._heartbeatsCache.lastSentHeartbeatDate=et,Ct.length>0?(De._heartbeatsCache.heartbeats=Ct,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Xt})()}}function kt(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,p.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function mt(Xe){return _t.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var et=this;return(0,p.Z)(function*(){var It;if(yield et._canUseIndexedDBPromise){const Xt=yield et.read();return xt(et.app,{lastSentHeartbeatDate:null!==(It=De.lastSentHeartbeatDate)&&void 0!==It?It:Xt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var et=this;return(0,p.Z)(function*(){var It;if(yield et._canUseIndexedDBPromise){const Xt=yield et.read();return xt(et.app,{lastSentHeartbeatDate:null!==(It=De.lastSentHeartbeatDate)&&void 0!==It?It:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...De.heartbeats]})}})()}}function dr(Xe){return(0,se.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function An(Xe){qt(new $.wA("platform-logger",De=>new me(De),"PRIVATE")),qt(new $.wA("heartbeat",De=>new Nr(De),"PRIVATE")),nr(he,"0.8.4",Xe),nr(he,"0.8.4","esm2017"),nr("fire-js","")}("")},4859:(pt,Re,F)=>{F.d(Re,{H0:()=>he,wA:()=>k,zt:()=>ue});var p=F(5861),$=F(2090);class k{constructor(K,z,J){this.name=K,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const se="[DEFAULT]";class ue{constructor(K,z){this.name=K,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(z)){const J=new $.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:z});He&&J.resolve(He)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(K){var z;const J=this.normalizeInstanceIdentifier(K?.identifier),He=null!==(z=K?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ne){if(He)return null;throw Ne}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function pe(ve){return"EAGER"===ve.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(z);try{const Ne=this.getOrInitializeService({instanceIdentifier:He});J.resolve(Ne)}catch{}}}}clearInstance(K=se){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,p.Z)(function*(){const z=Array.from(K.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=se){return this.instances.has(K)}getOptions(K=se){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:z={}}=K,J=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[Ne,be]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ne)&&be.resolve(He);return He}onInit(K,z){var J;const He=this.normalizeInstanceIdentifier(z),Ne=null!==(J=this.onInitCallbacks.get(He))&&void 0!==J?J:new Set;Ne.add(K),this.onInitCallbacks.set(He,Ne);const be=this.instances.get(He);return be&&K(be,He),()=>{Ne.delete(K)}}invokeOnInitCallbacks(K,z){const J=this.onInitCallbacks.get(z);if(J)for(const He of J)try{He(K,z)}catch{}}getOrInitializeService({instanceIdentifier:K,options:z={}}){let J=this.instances.get(K);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=K,ve===se?void 0:ve),options:z}),this.instances.set(K,J),this.instancesOptions.set(K,z),this.invokeOnInitCallbacks(J,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,J)}catch{}var ve;return J||null}normalizeInstanceIdentifier(K=se){return this.component?this.component.multipleInstances?K:se:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const z=this.getProvider(K.name);if(z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const z=new ue(K,this);return this.providers.set(K,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Re,F)=>{F.d(Re,{Am:()=>ve,Ub:()=>he,Yd:()=>pe,in:()=>$});const p=[];var $=(()=>{return(K=$||($={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",$;var K})();const k={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,ue={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},me=(K,z,...J)=>{if(z<K.logLevel)return;const He=(new Date).toISOString(),Ne=ue[z];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ne](`[${He}]  ${K.name}:`,...J)};class pe{constructor(z){this.name=z,this._logLevel=se,this._logHandler=me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function he(K){p.forEach(z=>{z.setLogLevel(K)})}function ve(K,z){for(const J of p){let He=null;z&&z.level&&(He=k[z.level]),J.userLogHandler=null===K?null:(Ne,be,...tt)=>{const Ee=tt.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");be>=(He??Ne.logLevel)&&K({level:$[be].toLowerCase(),message:Ee,args:tt,type:Ne.name})}}}},8766:(pt,Re,F)=>{F.d(Re,{Lj:()=>Le,X3:()=>Ze});var p=F(5861);let k,se;const pe=new WeakMap,he=new WeakMap,ve=new WeakMap,K=new WeakMap,z=new WeakMap;let Ne={get(le,we,Q){if(le instanceof IDBTransaction){if("done"===we)return he.get(le);if("objectStoreNames"===we)return le.objectStoreNames||ve.get(le);if("store"===we)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return ge(le[we])},set:(le,we,Q)=>(le[we]=Q,!0),has:(le,we)=>le instanceof IDBTransaction&&("done"===we||"store"===we)||we in le};function Ee(le){return"function"==typeof le?function tt(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...we){return le.apply(Qe(this),we),ge(pe.get(this))}:function(...we){return ge(le.apply(Qe(this),we))}:function(we,...Q){const ee=le.call(Qe(this),we,...Q);return ve.set(ee,we.sort?we.sort():[we]),ge(ee)}}(le):(le instanceof IDBTransaction&&function He(le){if(he.has(le))return;const we=new Promise((Q,ee)=>{const fe=()=>{le.removeEventListener("complete",ae),le.removeEventListener("error",Be),le.removeEventListener("abort",Be)},ae=()=>{Q(),fe()},Be=()=>{ee(le.error||new DOMException("AbortError","AbortError")),fe()};le.addEventListener("complete",ae),le.addEventListener("error",Be),le.addEventListener("abort",Be)});he.set(le,we)}(le),((le,we)=>we.some(Q=>le instanceof Q))(le,function ue(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,Ne):le)}function ge(le){if(le instanceof IDBRequest)return function J(le){const we=new Promise((Q,ee)=>{const fe=()=>{le.removeEventListener("success",ae),le.removeEventListener("error",Be)},ae=()=>{Q(ge(le.result)),fe()},Be=()=>{ee(le.error),fe()};le.addEventListener("success",ae),le.addEventListener("error",Be)});return we.then(Q=>{Q instanceof IDBCursor&&pe.set(Q,le)}).catch(()=>{}),z.set(we,le),we}(le);if(K.has(le))return K.get(le);const we=Ee(le);return we!==le&&(K.set(le,we),z.set(we,le)),we}const Qe=le=>z.get(le);function Ze(le,we,{blocked:Q,upgrade:ee,blocking:fe,terminated:ae}={}){const Be=indexedDB.open(le,we),je=ge(Be);return ee&&Be.addEventListener("upgradeneeded",gt=>{ee(ge(Be.result),gt.oldVersion,gt.newVersion,ge(Be.transaction))}),Q&&Be.addEventListener("blocked",()=>Q()),je.then(gt=>{ae&&gt.addEventListener("close",()=>ae()),fe&&gt.addEventListener("versionchange",()=>fe())}).catch(()=>{}),je}function Le(le,{blocked:we}={}){const Q=indexedDB.deleteDatabase(le);return we&&Q.addEventListener("blocked",()=>we()),ge(Q).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ge=new Map;function ie(le,we){if(!(le instanceof IDBDatabase)||we in le||"string"!=typeof we)return;if(Ge.get(we))return Ge.get(we);const Q=we.replace(/FromIndex$/,""),ee=we!==Q,fe=Ce.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!fe&&!Pe.includes(Q))return;const ae=function(){var Be=(0,p.Z)(function*(je,...gt){const sn=this.transaction(je,fe?"readwrite":"readonly");let jt=sn.store;return ee&&(jt=jt.index(gt.shift())),(yield Promise.all([jt[Q](...gt),fe&&sn.done]))[0]});return function(gt){return Be.apply(this,arguments)}}();return Ge.set(we,ae),ae}!function be(le){Ne=le(Ne)}(le=>({...le,get:(we,Q,ee)=>ie(we,Q)||le.get(we,Q,ee),has:(we,Q)=>!!ie(we,Q)||le.has(we,Q)}))},5861:(pt,Re,F)=>{function p(k,se,ue,me,pe,he,ve){try{var K=k[he](ve),z=K.value}catch(J){return void ue(J)}K.done?se(z):Promise.resolve(z).then(me,pe)}function $(k){return function(){var se=this,ue=arguments;return new Promise(function(me,pe){var he=k.apply(se,ue);function ve(z){p(he,me,pe,ve,K,"next",z)}function K(z){p(he,me,pe,ve,K,"throw",z)}ve(void 0)})}}F.d(Re,{Z:()=>$})}},pt=>{pt(pt.s=3453)}]);