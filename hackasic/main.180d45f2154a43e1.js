"use strict";(self.webpackChunkhacka_sicredi=self.webpackChunkhacka_sicredi||[]).push([[179],{2011:(yt,Oe,U)=>{U.d(Oe,{Dh:()=>fe,GT:()=>ye,cc:()=>Pe,hO:()=>Ge,on:()=>Z,pX:()=>ce,xv:()=>we});var l=U(4650),$=U(127),N=U(5813);yt=U.hmd(yt);const ae=["ngOnDestroy"],ce=(_e,it,tt,Le={})=>new Proxy(_e,{get:(Re,De)=>tt.runOutsideAngular(()=>{var Ze;if(_e[De])return!(null===(Ze=Le?.spy)||void 0===Ze)&&Ze.get&&Le.spy.get(De,_e[De]),_e[De];if(ae.indexOf(De)>-1)return()=>{};const oe=it.toPromise().then(de=>{const Ce=de&&de[De];return"function"==typeof Ce?Ce.bind(de):Ce&&Ce.then?Ce.then(J=>tt.run(()=>J)):tt.run(()=>Ce)});return new Proxy(()=>{},{get:(de,Ce)=>oe[Ce],apply:(de,Ce,J)=>oe.then(te=>{var ge;const ue=te&&te(...J);return!(null===(ge=Le?.spy)||void 0===ge)&&ge.apply&&Le.spy.apply(De,J,ue),ue})})})}),ye=(_e,it)=>{it.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(Le=>{Object.defineProperty(_e.prototype,Le,Object.getOwnPropertyDescriptor(tt.prototype||tt,Le))})})};class me{constructor(it){return it}}const fe=new l.OlP("angularfire2.app.options"),we=new l.OlP("angularfire2.app.name");function Z(_e,it,tt){const Re="object"==typeof tt&&tt||{};Re.name=Re.name||"string"==typeof tt&&tt||"[DEFAULT]";const Ze=$.Z.apps.filter(oe=>oe&&oe.name===Re.name)[0]||it.runOutsideAngular(()=>$.Z.initializeApp(_e,Re));try{JSON.stringify(_e)!==JSON.stringify(Ze.options)&&z("error",`${Ze.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Ze)}const z=(_e,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...it)},X={provide:me,useFactory:Z,deps:[fe,l.R0b,[new l.FiY,we]]};let Ge=(()=>{class _e{constructor(tt){$.Z.registerVersion("angularfire",N.q4.full,"core"),$.Z.registerVersion("angularfire",N.q4.full,"app-compat"),$.Z.registerVersion("angular",l.q4F.full,tt.toString())}static initializeApp(tt,Le){return{ngModule:_e,providers:[{provide:fe,useValue:tt},{provide:we,useValue:Le}]}}}return _e.\u0275fac=function(tt){return new(tt||_e)(l.LFG(l.Lbi))},_e.\u0275mod=l.oAB({type:_e}),_e.\u0275inj=l.cJS({providers:[X]}),_e})();function Pe(_e,it,tt,Le,Re){const[,De,Ze]=globalThis.\u0275AngularfireInstanceCache.find(oe=>oe[0]===_e)||[];if(De)return function Se(_e,it){try{return _e.toString()===it.toString()}catch{return _e===it}}(Re,Ze)||(Ee("error",`${it} was already initialized on the ${tt} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Re,was:Ze})),De;{const oe=Le();return globalThis.\u0275AngularfireInstanceCache.push([_e,oe,Re]),oe}}const at=!!yt.hot,Ee=(_e,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(yt,Oe,U)=>{U.d(Oe,{q4:()=>dt,iC:()=>hs,fc:()=>Qn,HU:()=>Rs,vb:()=>da,JM:()=>Xa});var l=U(4650),$=U(5867),N=U(5861),ae=U(9681),ce=U(2090),ye=U(4859),me=U(1877),fe=U(8766);const we="@firebase/installations",Z="0.5.16",X=`w:${Z}`,Ge="FIS_v2",it=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(T){return T instanceof ce.ZR&&T.code.includes("request-failed")}function Le({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Re(T){return{token:T.token,requestStatus:2,expiresIn:te(T.expiresIn),creationTime:Date.now()}}function De(T,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,N.Z)(function*(T,S){const H=(yield S.json()).error;return it.create("request-failed",{requestName:T,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function oe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function de(T,{refreshToken:S}){const O=oe(T);return O.append("Authorization",function ge(T){return`${Ge} ${T}`}(S)),O}function Ce(T){return J.apply(this,arguments)}function J(){return(J=(0,N.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function te(T){return Number(T.replace("s","000"))}function ue(T,S){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:O}){const H=Le(T),ee=oe(T),le=S.getImmediate({optional:!0});if(le){const Mt=yield le.getHeartbeatsHeader();Mt&&ee.append("x-firebase-client",Mt)}const Be={method:"POST",headers:ee,body:JSON.stringify({fid:O,authVersion:Ge,appId:T.appId,sdkVersion:X})},ft=yield Ce(()=>fetch(H,Be));if(ft.ok){const Mt=yield ft.json();return{fid:Mt.fid||O,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:Re(Mt.authToken)}}throw yield De("Create Installation",ft)})).apply(this,arguments)}function je(T){return new Promise(S=>{setTimeout(S,T)})}const sn=/^[cdef][\w-]{21}$/;function Qe(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const O=function cn(T){return function vt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return sn.test(O)?O:""}catch{return""}}function In(T){return`${T.appName}!${T.appId}`}const tn=new Map;function nn(T,S){const O=In(T);wi(O,S),function Vr(T,S){const O=function On(){return!Pi&&"BroadcastChannel"in self&&(Pi=new BroadcastChannel("[Firebase] FID Change"),Pi.onmessage=T=>{wi(T.data.key,T.data.fid)}),Pi}();O&&O.postMessage({key:T,fid:S}),function Ur(){0===tn.size&&Pi&&(Pi.close(),Pi=null)}()}(O,S)}function wi(T,S){const O=tn.get(T);if(O)for(const H of O)H(S)}let Pi=null;const Bn="firebase-installations-store";let Ir=null;function Hr(){return Ir||(Ir=(0,fe.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Bn)}})),Ir}function nt(T,S){return ti.apply(this,arguments)}function ti(){return(ti=(0,N.Z)(function*(T,S){const O=In(T),ee=(yield Hr()).transaction(Bn,"readwrite"),le=ee.objectStore(Bn),Me=yield le.get(O);return yield le.put(S,O),yield ee.done,(!Me||Me.fid!==S.fid)&&nn(T,S.fid),S})).apply(this,arguments)}function qn(T){return vn.apply(this,arguments)}function vn(){return(vn=(0,N.Z)(function*(T){const S=In(T),H=(yield Hr()).transaction(Bn,"readwrite");yield H.objectStore(Bn).delete(S),yield H.done})).apply(this,arguments)}function hi(T,S){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,N.Z)(function*(T,S){const O=In(T),ee=(yield Hr()).transaction(Bn,"readwrite"),le=ee.objectStore(Bn),Me=yield le.get(O),Be=S(Me);return void 0===Be?yield le.delete(O):yield le.put(Be,O),yield ee.done,Be&&(!Me||Me.fid!==Be.fid)&&nn(T,Be.fid),Be})).apply(this,arguments)}function wn(T){return En.apply(this,arguments)}function En(){return(En=(0,N.Z)(function*(T){let S;const O=yield hi(T.appConfig,H=>{const ee=mn(H),le=wt(T,ee);return S=le.registrationPromise,le.installationEntry});return""===O.fid?{installationEntry:yield S}:{installationEntry:O,registrationPromise:S}})).apply(this,arguments)}function mn(T){return xt(T||{fid:Qe(),registrationStatus:0})}function wt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(it.create("app-offline"))};const O={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function Ct(T,S){return Ot.apply(this,arguments)}(T,O);return{installationEntry:O,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Li(T)}:{installationEntry:S}}function Ot(){return(Ot=(0,N.Z)(function*(T,S){try{const O=yield ue(T,S);return nt(T.appConfig,O)}catch(O){throw tt(O)&&409===O.customData.serverCode?yield qn(T.appConfig):yield nt(T.appConfig,{fid:S.fid,registrationStatus:0}),O}})).apply(this,arguments)}function Li(T){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,N.Z)(function*(T){let S=yield Ai(T.appConfig);for(;1===S.registrationStatus;)yield je(100),S=yield Ai(T.appConfig);if(0===S.registrationStatus){const{installationEntry:O,registrationPromise:H}=yield wn(T);return H||O}return S})).apply(this,arguments)}function Ai(T){return hi(T,S=>{if(!S)throw it.create("installation-not-found");return xt(S)})}function xt(T){return function xi(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Ft(T,S){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,N.Z)(function*({appConfig:T,heartbeatServiceProvider:S},O){const H=Qt(T,O),ee=de(T,O),le=S.getImmediate({optional:!0});if(le){const Mt=yield le.getHeartbeatsHeader();Mt&&ee.append("x-firebase-client",Mt)}const Be={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:X,appId:T.appId}})},ft=yield Ce(()=>fetch(H,Be));if(ft.ok)return Re(yield ft.json());throw yield De("Generate Auth Token",ft)})).apply(this,arguments)}function Qt(T,{fid:S}){return`${Le(T)}/${S}/authTokens:generate`}function li(T){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,N.Z)(function*(T,S=!1){let O;const H=yield hi(T.appConfig,le=>{if(!en(le))throw it.create("not-registered");const Me=le.authToken;if(!S&&q(Me))return le;if(1===Me.requestStatus)return O=st(T,S),le;{if(!navigator.onLine)throw it.create("app-offline");const Be=Y(le);return O=Tt(T,Be),Be}});return O?yield O:H.authToken})).apply(this,arguments)}function st(T,S){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,N.Z)(function*(T,S){let O=yield ot(T.appConfig);for(;1===O.authToken.requestStatus;)yield je(100),O=yield ot(T.appConfig);const H=O.authToken;return 0===H.requestStatus?li(T,S):H})).apply(this,arguments)}function ot(T){return hi(T,S=>{if(!en(S))throw it.create("not-registered");return function j(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Tt(T,S){return St.apply(this,arguments)}function St(){return(St=(0,N.Z)(function*(T,S){try{const O=yield Ft(T,S),H=Object.assign(Object.assign({},S),{authToken:O});return yield nt(T.appConfig,H),O}catch(O){if(!tt(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield nt(T.appConfig,H)}else yield qn(T.appConfig);throw O}})).apply(this,arguments)}function en(T){return void 0!==T&&2===T.registrationStatus}function q(T){return 2===T.requestStatus&&!function W(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function Y(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function B(){return(B=(0,N.Z)(function*(T){const S=T,{installationEntry:O,registrationPromise:H}=yield wn(S);return H?H.catch(console.error):li(S).catch(console.error),O.fid})).apply(this,arguments)}function Fe(){return(Fe=(0,N.Z)(function*(T,S=!1){const O=T;return yield ut(O),(yield li(O,S)).token})).apply(this,arguments)}function ut(T){return ct.apply(this,arguments)}function ct(){return(ct=(0,N.Z)(function*(T){const{registrationPromise:S}=yield wn(T);S&&(yield S)})).apply(this,arguments)}function eo(T){return it.create("missing-app-config-values",{valueName:T})}const Po="installations",to=T=>{const S=T.getProvider("app").getImmediate(),O=function bn(T){if(!T||!T.options)throw eo("App Configuration");if(!T.name)throw eo("App Name");const S=["projectId","apiKey","appId"];for(const O of S)if(!T.options[O])throw eo(O);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:O,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},no=T=>{const S=T.getProvider("app").getImmediate(),O=(0,ae._getProvider)(S,Po).getImmediate();return{getId:()=>function R(T){return B.apply(this,arguments)}(O),getToken:ee=>function se(T){return Fe.apply(this,arguments)}(O,ee)}};(function ml(){(0,ae._registerComponent)(new ye.wA(Po,to,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",no,"PRIVATE"))})(),(0,ae.registerVersion)(we,Z),(0,ae.registerVersion)(we,Z,"esm2017");const ns="@firebase/remote-config",Yn=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qi{constructor(S,O,H,ee){this.client=S,this.storage=O,this.storageCache=H,this.logger=ee}isCachedDataFresh(S,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-O,ee=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var O=this;return(0,N.Z)(function*(){const[H,ee]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(ee&&O.isCachedDataFresh(S.cacheMaxAgeMillis,H))return ee;S.eTag=ee&&ee.eTag;const le=yield O.client.fetch(S),Me=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Me.push(O.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Me),le})()}}function Vi(T=navigator){return T.languages&&T.languages[0]||T.language}class oo{constructor(S,O,H,ee,le,Me){this.firebaseInstallations=S,this.sdkVersion=O,this.namespace=H,this.projectId=ee,this.apiKey=le,this.appId=Me}fetch(S){var O=this;return(0,N.Z)(function*(){var H,ee,le;const[Me,Be]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},It={sdk_version:O.sdkVersion,app_instance_id:Me,app_instance_id_token:Be,app_id:O.appId,language_code:Vi()},Wn={method:"POST",headers:Nt,body:JSON.stringify(It)},gi=fetch(Mt,Wn),fa=new Promise((pa,vo)=>{S.signal.addEventListener(()=>{const nr=new Error("The operation was aborted.");nr.name="AbortError",vo(nr)})});let Ps;try{yield Promise.race([gi,fa]),Ps=yield gi}catch(pa){let vo="fetch-client-network";throw"AbortError"===(null===(H=pa)||void 0===H?void 0:H.name)&&(vo="fetch-timeout"),Yn.create(vo,{originalErrorMessage:null===(ee=pa)||void 0===ee?void 0:ee.message})}let Vt=Ps.status;const Dr=Ps.headers.get("ETag")||void 0;let fs,Zr;if(200===Ps.status){let pa;try{pa=yield Ps.json()}catch(vo){throw Yn.create("fetch-client-parse",{originalErrorMessage:null===(le=vo)||void 0===le?void 0:le.message})}fs=pa.entries,Zr=pa.state}if("INSTANCE_STATE_UNSPECIFIED"===Zr?Vt=500:"NO_CHANGE"===Zr?Vt=304:("NO_TEMPLATE"===Zr||"EMPTY_CONFIG"===Zr)&&(fs={}),304!==Vt&&200!==Vt)throw Yn.create("fetch-status",{httpStatus:Vt});return{status:Vt,eTag:Dr,config:fs}})()}}class rs{constructor(S,O){this.client=S,this.storage=O}fetch(S){var O=this;return(0,N.Z)(function*(){const H=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:O,backoffCount:H}){var ee=this;return(0,N.Z)(function*(){yield function ur(T,S){return new Promise((O,H)=>{const ee=Math.max(S-Date.now(),0),le=setTimeout(O,ee);T.addEventListener(()=>{clearTimeout(le),H(Yn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,O);try{const le=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),le}catch(le){if(!function mp(T){if(!(T instanceof ce.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const Me={throttleEndTimeMillis:Date.now()+(0,ce.$s)(H),backoffCount:H+1};return yield ee.storage.setThrottleMetadata(Me),ee.attemptFetch(S,Me)}})()}}class yp{constructor(S,O,H,ee,le){this.app=S,this._client=O,this._storageCache=H,this._storage=ee,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Oa(T,S){var O;const H=T.target.error||void 0;return Yn.create(S,{originalErrorMessage:H&&(null===(O=H)||void 0===O?void 0:O.message)})}const Lo="app_namespace_store";class sc{constructor(S,O,H,ee=function wp(){return new Promise((T,S)=>{var O;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=ee=>{S(Oa(ee,"storage-open"))},H.onsuccess=ee=>{T(ee.target.result)},H.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Lo,{keyPath:"compositeKey"})}}catch(H){S(Yn.create("storage-open",{originalErrorMessage:null===(O=H)||void 0===O?void 0:O.message}))}})}()){this.appId=S,this.appName=O,this.namespace=H,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var O=this;return(0,N.Z)(function*(){const H=yield O.openDbPromise;return new Promise((ee,le)=>{var Me;const ft=H.transaction([Lo],"readonly").objectStore(Lo),Mt=O.createCompositeKey(S);try{const Nt=ft.get(Mt);Nt.onerror=It=>{le(Oa(It,"storage-get"))},Nt.onsuccess=It=>{const Wn=It.target.result;ee(Wn?Wn.value:void 0)}}catch(Nt){le(Yn.create("storage-get",{originalErrorMessage:null===(Me=Nt)||void 0===Me?void 0:Me.message}))}})})()}set(S,O){var H=this;return(0,N.Z)(function*(){const ee=yield H.openDbPromise;return new Promise((le,Me)=>{var Be;const Mt=ee.transaction([Lo],"readwrite").objectStore(Lo),Nt=H.createCompositeKey(S);try{const It=Mt.put({compositeKey:Nt,value:O});It.onerror=Wn=>{Me(Oa(Wn,"storage-set"))},It.onsuccess=()=>{le()}}catch(It){Me(Yn.create("storage-set",{originalErrorMessage:null===(Be=It)||void 0===Be?void 0:Be.message}))}})})()}delete(S){var O=this;return(0,N.Z)(function*(){const H=yield O.openDbPromise;return new Promise((ee,le)=>{var Me;const ft=H.transaction([Lo],"readwrite").objectStore(Lo),Mt=O.createCompositeKey(S);try{const Nt=ft.delete(Mt);Nt.onerror=It=>{le(Oa(It,"storage-delete"))},Nt.onsuccess=()=>{ee()}}catch(Nt){le(Yn.create("storage-delete",{originalErrorMessage:null===(Me=Nt)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Vo{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,N.Z)(function*(){const O=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),le=yield O;le&&(S.lastFetchStatus=le);const Me=yield H;Me&&(S.lastSuccessfulFetchTimestampMillis=Me);const Be=yield ee;Be&&(S.activeConfig=Be)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function t_(){return _l.apply(this,arguments)}function _l(){return(_l=(0,N.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function oc(){(0,ae._registerComponent)(new ye.wA("remote-config",function T(S,{instanceIdentifier:O}){const H=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yn.create("registration-window");if(!(0,ce.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:le,apiKey:Me,appId:Be}=H.options;if(!le)throw Yn.create("registration-project-id");if(!Me)throw Yn.create("registration-api-key");if(!Be)throw Yn.create("registration-app-id");const ft=new sc(Be,H.name,O=O||"firebase"),Mt=new Vo(ft),Nt=new me.Yd(ns);Nt.logLevel=me.in.ERROR;const It=new oo(ee,ae.SDK_VERSION,O,le,Me,Be),Wn=new rs(It,ft),gi=new Qi(Wn,ft,Mt,Nt),fa=new yp(H,gi,Mt,ft,Nt);return function ln(T){const S=(0,ce.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(fa),fa},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ns,"0.3.15"),(0,ae.registerVersion)(ns,"0.3.15","esm2017")}();const Ci="/firebase-messaging-sw.js",Bo="/firebase-cloud-messaging-push-scope",Ss="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yl="google.c.a.c_id",ou="google.c.a.c_l",uc="google.c.a.ts",Ho="google.c.a.e";var cr=(()=>{return(T=cr||(cr={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",cr;var T})();function ss(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ji(T){const O=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(O),ee=new Uint8Array(H.length);for(let le=0;le<H.length;++le)ee[le]=H.charCodeAt(le);return ee}const ao="fcm_token_details_db",jo="fcm_token_object_Store";function Cp(T){return au.apply(this,arguments)}function au(){return au=(0,N.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(ao))return null;let S=null;return(yield(0,fe.X3)(ao,5,{upgrade:(H=(0,N.Z)(function*(ee,le,Me,Be){var ft;if(le<2||!ee.objectStoreNames.contains(jo))return;const Mt=Be.objectStore(jo),Nt=yield Mt.index("fcmSenderId").get(T);if(yield Mt.clear(),Nt)if(2===le){const It=Nt;if(!It.auth||!It.p256dh||!It.endpoint)return;S={token:It.fcmToken,createTime:null!==(ft=It.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:ss(It.vapidKey)}}}else if(3===le){const It=Nt;S={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:ss(It.auth),p256dh:ss(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:ss(It.vapidKey)}}}else if(4===le){const It=Nt;S={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:ss(It.auth),p256dh:ss(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:ss(It.vapidKey)}}}}),function(le,Me,Be,ft){return H.apply(this,arguments)})})).close(),yield(0,fe.Lj)(ao),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Rn(S)?S:null;var H}),au.apply(this,arguments)}function Rn(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const br="firebase-messaging-store";let Ii=null;function vl(){return Ii||(Ii=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(br)}})),Ii}function Go(T){return jr.apply(this,arguments)}function jr(){return(jr=(0,N.Z)(function*(T){const S=dr(T),H=yield(yield vl()).transaction(br).objectStore(br).get(S);if(H)return H;{const ee=yield Cp(T.appConfig.senderId);if(ee)return yield on(T,ee),ee}})).apply(this,arguments)}function on(T,S){return lu.apply(this,arguments)}function lu(){return(lu=(0,N.Z)(function*(T,S){const O=dr(T),ee=(yield vl()).transaction(br,"readwrite");return yield ee.objectStore(br).put(S,O),yield ee.done,S})).apply(this,arguments)}function As(T){return uu.apply(this,arguments)}function uu(){return(uu=(0,N.Z)(function*(T){const S=dr(T),H=(yield vl()).transaction(br,"readwrite");yield H.objectStore(br).delete(S),yield H.done})).apply(this,arguments)}function dr({appConfig:T}){return T.appId}const Hn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Pt(T,S){return Na.apply(this,arguments)}function Na(){return(Na=(0,N.Z)(function*(T,S){var O;const H=yield La(T),ee=Ne(S),le={method:"POST",headers:H,body:JSON.stringify(ee)};let Me;try{Me=yield(yield fetch(lo(T.appConfig),le)).json()}catch(Be){throw Hn.create("token-subscribe-failed",{errorInfo:null===(O=Be)||void 0===O?void 0:O.toString()})}if(Me.error)throw Hn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Hn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Ip(T,S){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,N.Z)(function*(T,S){var O;const H=yield La(T),ee=Ne(S.subscriptionOptions),le={method:"PATCH",headers:H,body:JSON.stringify(ee)};let Me;try{Me=yield(yield fetch(`${lo(T.appConfig)}/${S.token}`,le)).json()}catch(Be){throw Hn.create("token-update-failed",{errorInfo:null===(O=Be)||void 0===O?void 0:O.toString()})}if(Me.error)throw Hn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Hn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function dc(T,S){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,N.Z)(function*(T,S){var O;const ee={method:"DELETE",headers:yield La(T)};try{const Me=yield(yield fetch(`${lo(T.appConfig)}/${S}`,ee)).json();if(Me.error)throw Hn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(le){throw Hn.create("token-unsubscribe-failed",{errorInfo:null===(O=le)||void 0===O?void 0:O.toString()})}})).apply(this,arguments)}function lo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function La(T){return $o.apply(this,arguments)}function $o(){return($o=(0,N.Z)(function*({appConfig:T,installations:S}){const O=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Ne({p256dh:T,auth:S,endpoint:O,vapidKey:H}){const ee={web:{endpoint:O,auth:S,p256dh:T}};return H!==Ss&&(ee.web.applicationPubKey=H),ee}const Zt=6048e5;function dh(T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,N.Z)(function*(T){const S=yield hh(T.swRegistration,T.vapidKey),O={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:ss(S.getKey("auth")),p256dh:ss(S.getKey("p256dh"))},H=yield Go(T.firebaseDependencies);if(H){if(Ep(H.subscriptionOptions,O))return Date.now()>=H.createTime+Zt?wl(T,{token:H.token,createTime:Date.now(),subscriptionOptions:O}):H.token;try{yield dc(T.firebaseDependencies,H.token)}catch(ee){console.warn(ee)}return Cl(T.firebaseDependencies,O)}return Cl(T.firebaseDependencies,O)})).apply(this,arguments)}function ii(T){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*(T){const S=yield Go(T.firebaseDependencies);S&&(yield dc(T.firebaseDependencies,S.token),yield As(T.firebaseDependencies));const O=yield T.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function wl(T,S){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,N.Z)(function*(T,S){try{const O=yield Ip(T.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:O,createTime:Date.now()});return yield on(T.firebaseDependencies,H),O}catch(O){throw yield ii(T),O}})).apply(this,arguments)}function Cl(T,S){return qo.apply(this,arguments)}function qo(){return(qo=(0,N.Z)(function*(T,S){const H={token:yield Pt(T,S),createTime:Date.now(),subscriptionOptions:S};return yield on(T,H),H.token})).apply(this,arguments)}function hh(T,S){return Va.apply(this,arguments)}function Va(){return(Va=(0,N.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ji(S)})})).apply(this,arguments)}function Ep(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function uo(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function ri(T,S){if(!S.notification)return;T.notification={};const O=S.notification.title;O&&(T.notification.title=O);const H=S.notification.body;H&&(T.notification.body=H);const ee=S.notification.image;ee&&(T.notification.image=ee);const le=S.notification.icon;le&&(T.notification.icon=le)}(S,T),function Gr(T,S){!S.data||(T.data=S.data)}(S,T),function Ua(T,S){var O,H,ee,le,Me;if(!(S.fcmOptions||null!==(O=S.notification)&&void 0!==O&&O.click_action))return;T.fcmOptions={};const Be=null!==(ee=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==ee?ee:null===(le=S.notification)||void 0===le?void 0:le.click_action;Be&&(T.fcmOptions.link=Be);const ft=null===(Me=S.fcmOptions)||void 0===Me?void 0:Me.analytics_label;ft&&(T.fcmOptions.analyticsLabel=ft)}(S,T),S}function Ba(T){return"object"==typeof T&&!!T&&yl in T}function os(T,S){const O=[];for(let H=0;H<T.length;H++)O.push(T.charAt(H)),H<S.length&&O.push(S.charAt(H));return O.join("")}function cu(T){return Hn.create("missing-app-config-values",{valueName:T})}os("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),os("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fc{constructor(S,O,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function hc(T){if(!T||!T.options)throw cu("App Configuration Object");if(!T.name)throw cu("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:O}=T;for(const H of S)if(!O[H])throw cu(H);return{appName:T.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:O,analyticsProvider:H}}_delete(){return Promise.resolve()}}function fh(T){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,N.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(Ci,{scope:Bo}),T.swRegistration.update().catch(()=>{})}catch(O){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=O)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function du(T,S){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,N.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield fh(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function hu(T,S){return ja.apply(this,arguments)}function ja(){return(ja=(0,N.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Ss)})).apply(this,arguments)}function Ko(){return(Ko=(0,N.Z)(function*(T,S){if(!navigator)throw Hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hn.create("permission-blocked");return yield hu(T,S?.vapidKey),yield du(T,S?.serviceWorkerRegistration),dh(T)})).apply(this,arguments)}function ph(T,S,O){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,N.Z)(function*(T,S,O){const H=gh(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:O[yl],message_name:O[ou],message_time:O[uc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gh(T){switch(T){case cr.NOTIFICATION_CLICKED:return"notification_open";case cr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xs(){return(xs=(0,N.Z)(function*(T,S){const O=S.data;if(!O.isFirebaseMessaging)return;T.onMessageHandler&&O.messageType===cr.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(uo(O)):T.onMessageHandler.next(uo(O)));const H=O.data;Ba(H)&&"1"===H[Ho]&&(yield ph(T,O.messageType,H))})).apply(this,arguments)}const Ms="@firebase/messaging",xn=T=>{const S=new fc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function gc(T,S){return xs.apply(this,arguments)}(S,O)),S},as=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:H=>function pc(T,S){return Ko.apply(this,arguments)}(S,H)}};function _c(){return fu.apply(this,arguments)}function fu(){return(fu=(0,N.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Mn(){(0,ae._registerComponent)(new ye.wA("messaging",xn,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",as,"PRIVATE")),(0,ae.registerVersion)(Ms,"0.11.0"),(0,ae.registerVersion)(Ms,"0.11.0","esm2017")}();const Jo="analytics",vc="firebase_id",_u="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wc="https://www.googletagmanager.com/gtag/js",jn=new me.Yd("@firebase/analytics");function El(T){return Promise.all(T.map(S=>S.catch(O=>O)))}function bl(T,S){const O=document.createElement("script");O.src=`${wc}?l=${T}&id=${S}`,O.async=!0,document.head.appendChild(O)}function _h(T,S,O,H,ee,le){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,N.Z)(function*(T,S,O,H,ee,le){const Me=H[ee];try{if(Me)yield S[Me];else{const ft=(yield El(O)).find(Mt=>Mt.measurementId===ee);ft&&(yield S[ft.appId])}}catch(Be){jn.error(Be)}T("config",ee,le)})).apply(this,arguments)}function ls(T,S,O,H,ee){return $a.apply(this,arguments)}function $a(){return($a=(0,N.Z)(function*(T,S,O,H,ee){try{let le=[];if(ee&&ee.send_to){let Me=ee.send_to;Array.isArray(Me)||(Me=[Me]);const Be=yield El(O);for(const ft of Me){const Mt=Be.find(It=>It.measurementId===ft),Nt=Mt&&S[Mt.appId];if(!Nt){le=[];break}le.push(Nt)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),T("event",H,ee||{})}catch(le){jn.error(le)}})).apply(this,arguments)}function Cc(T){const S=window.document.getElementsByTagName("script");for(const O of Object.values(S))if(O.src&&O.src.includes(wc)&&O.src.includes(T))return O;return null}const si=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),za=new class vu{constructor(S={},O=1e3){this.throttleMetadata=S,this.intervalMillis=O}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,O){this.throttleMetadata[S]=O}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Xo(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function wh(T){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(T){var S;const{appId:O,apiKey:H}=T,ee={method:"GET",headers:Xo(H)},le=_u.replace("{app-id}",O),Me=yield fetch(le,ee);if(200!==Me.status&&304!==Me.status){let Be="";try{const ft=yield Me.json();null!==(S=ft.error)&&void 0!==S&&S.message&&(Be=ft.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Be})}return Me.json()})).apply(this,arguments)}function Ic(T){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,N.Z)(function*(T,S=za,O){const{appId:H,apiKey:ee,measurementId:le}=T.options;if(!H)throw si.create("no-app-id");if(!ee){if(le)return{measurementId:le,appId:H};throw si.create("no-api-key")}const Me=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new qa;return setTimeout((0,N.Z)(function*(){Be.abort()}),void 0!==O?O:6e4),Ec({appId:H,apiKey:ee,measurementId:le},Me,Be,S)})).apply(this,arguments)}function Ec(T,S,O){return us.apply(this,arguments)}function us(){return(us=(0,N.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:O},H,ee=za){var le,Me;const{appId:Be,measurementId:ft}=T;try{yield wu(H,S)}catch(Mt){if(ft)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${null===(le=Mt)||void 0===le?void 0:le.message}]`),{appId:Be,measurementId:ft};throw Mt}try{const Mt=yield wh(T);return ee.deleteThrottleMetadata(Be),Mt}catch(Mt){const Nt=Mt;if(!Sl(Nt)){if(ee.deleteThrottleMetadata(Be),ft)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Nt?.message}]`),{appId:Be,measurementId:ft};throw Mt}const It=503===Number(null===(Me=Nt?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,ce.$s)(O,ee.intervalMillis,30):(0,ce.$s)(O,ee.intervalMillis),Wn={throttleEndTimeMillis:Date.now()+It,backoffCount:O+1};return ee.setThrottleMetadata(Be,Wn),jn.debug(`Calling attemptFetch again in ${It} millis`),Ec(T,Wn,H,ee)}})).apply(this,arguments)}function wu(T,S){return new Promise((O,H)=>{const ee=Math.max(S-Date.now(),0),le=setTimeout(O,ee);T.addEventListener(()=>{clearTimeout(le),H(si.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Sl(T){if(!(T instanceof ce.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class qa{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let co,xl;function ea(){return(ea=(0,N.Z)(function*(T,S,O,H,ee){if(ee&&ee.global)T("event",O,H);else{const le=yield S;T("event",O,Object.assign(Object.assign({},H),{send_to:le}))}})).apply(this,arguments)}function ra(T){xl=T}function Cu(T){co=T}function Os(){return sa.apply(this,arguments)}function sa(){return(sa=(0,N.Z)(function*(){var T;if(!(0,ce.hl)())return jn.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(S){return jn.warn(si.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function oa(){return(oa=(0,N.Z)(function*(T,S,O,H,ee,le,Me){var Be;const ft=Ic(T);ft.then(gi=>{O[gi.measurementId]=gi.appId,T.options.measurementId&&gi.measurementId!==T.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${gi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gi=>jn.error(gi)),S.push(ft);const Mt=Os().then(gi=>{if(gi)return H.getId()}),[Nt,It]=yield Promise.all([ft,Mt]);Cc(le)||bl(le,Nt.measurementId),xl&&(ee("consent","default",xl),ra(void 0)),ee("js",new Date);const Wn=null!==(Be=Me?.config)&&void 0!==Be?Be:{};return Wn.origin="firebase",Wn.update=!0,null!=It&&(Wn[vc]=It),ee("config",Nt.measurementId,Wn),co&&(ee("set",co),Cu(void 0)),Nt.measurementId})).apply(this,arguments)}class Ml{constructor(S){this.app=S}_delete(){return delete Mi[this.app.options.appId],Promise.resolve()}}let Mi={},aa=[];const ho={};let ua,Wr,la="dataLayer",Tc=!1;function Eh(T,S,O){!function bp(){const T=[];if((0,ce.ru)()&&T.push("This is a browser extension environment."),(0,ce.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((H,ee)=>`(${ee+1}) ${H}`).join(" "),O=si.create("invalid-analytics-context",{errorInfo:S});jn.warn(O.message)}}();const H=T.options.appId;if(!H)throw si.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw si.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Mi[H])throw si.create("already-exists",{id:H});if(!Tc){!function Tl(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(la);const{wrappedGtag:le,gtagCore:Me}=function Wa(T,S,O,H,ee){let le=function(...Me){window[H].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(le=window[ee]),window[ee]=function yu(T,S,O,H){function le(){return(le=(0,N.Z)(function*(Me,Be,ft){try{"event"===Me?yield ls(T,S,O,Be,ft):"config"===Me?yield _h(T,S,O,H,Be,ft):"consent"===Me?T("consent","update",ft):T("set",Be)}catch(Mt){jn.error(Mt)}})).apply(this,arguments)}return function ee(Me,Be,ft){return le.apply(this,arguments)}}(le,T,S,O),{gtagCore:le,wrappedGtag:window[ee]}}(Mi,aa,ho,la,"gtag");Wr=le,ua=Me,Tc=!0}return Mi[H]=function Ih(T,S,O,H,ee,le,Me){return oa.apply(this,arguments)}(T,aa,ho,S,ua,la,O),new Ml(T)}function i_(){return bh.apply(this,arguments)}function bh(){return(bh=(0,N.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const ht="@firebase/analytics";!function Dn(){(0,ae._registerComponent)(new ye.wA(Jo,(S,{options:O})=>Eh(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function T(S){try{const O=S.getProvider(Jo).getImmediate();return{logEvent:(H,ee,le)=>function rn(T,S,O,H){T=(0,ce.m9)(T),function Za(T,S,O,H,ee){return ea.apply(this,arguments)}(Wr,Mi[T.app.options.appId],S,O,H).catch(ee=>jn.error(ee))}(O,H,ee,le)}}catch(O){throw si.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,ae.registerVersion)(ht,"0.8.4"),(0,ae.registerVersion)(ht,"0.8.4","esm2017")}();var cs=U(4408),pi=U(7565);const Dc=new class po extends pi.v{}(class fo extends cs.o{constructor(S,O){super(S,O),this.scheduler=S,this.work=O}schedule(S,O=0){return O>0?super.schedule(S,O):(this.delay=O,this.state=S,this.scheduler.flush(this),this)}execute(S,O){return O>0||this.closed?super.execute(S,O):this._execute(S,O)}requestAsyncId(S,O,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,O,H):(S.flush(this),0)}});var Th=U(4986),go=U(8505),Eu=U(5363),mo=U(9468);const dt=new l.GfV("7.4.1"),Ya="__angularfire_symbol__analyticsIsSupportedValue",qr="__angularfire_symbol__analyticsIsSupported",Ol="__angularfire_symbol__remoteConfigIsSupportedValue",Qa="__angularfire_symbol__remoteConfigIsSupported",Nn="__angularfire_symbol__messagingIsSupportedValue",Ja="__angularfire_symbol__messagingIsSupported";function Xa(T,S,O){if(S){if(1===S.length)return S[0];const le=S.filter(Me=>Me.app===O);if(1===le.length)return le[0]}return O.container.getProvider(T).getImmediate({optional:!0})}globalThis[qr]||(globalThis[qr]=i_().then(T=>globalThis[Ya]=T).catch(()=>globalThis[Ya]=!1)),globalThis[Ja]||(globalThis[Ja]=_c().then(T=>globalThis[Nn]=T).catch(()=>globalThis[Nn]=!1)),globalThis[Qa]||(globalThis[Qa]=t_().then(T=>globalThis[Ol]=T).catch(()=>globalThis[Ol]=!1));const da=(T,S)=>{const O=S?[S]:(0,$.C6)(),H=[];return O.forEach(ee=>{ee.container.getProvider(T).instances.forEach(Me=>{H.includes(Me)||H.push(Me)})}),H};function er(){}class _o{constructor(S,O=Dc){this.zone=S,this.delegate=O}now(){return this.delegate.now()}schedule(S,O,H){const ee=this.zone;return this.delegate.schedule(function(Me){ee.runGuarded(()=>{S.apply(this,[Me])})},O,H)}}class bu{constructor(S){this.zone=S,this.task=null}call(S,O){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",er,{},er,er)),O.pipe((0,go.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rs=(()=>{class T{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new _o(Zone.current)),this.insideAngular=O.run(()=>new _o(Zone.current,Th.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(O){return new(O||T)(l.LFG(l.R0b))},T.\u0275prov=l.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function tr(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Qn(T){return T.pipe((0,Eu.Q)(tr().outsideAngular))}function hs(T){return tr(),function $n(T){return function(O){return(O=O.lift(new bu(T.ngZone))).pipe((0,mo.R)(T.outsideAngular),(0,Eu.Q)(T.insideAngular))}}(tr())(T)}},8247:(yt,Oe,U)=>{U.d(Oe,{$:()=>lo,A:()=>z,B:()=>Pe,G:()=>no,H:()=>Ki,J:()=>rs,L:()=>q,M:()=>_l,N:()=>lc,P:()=>Th,Q:()=>yl,R:()=>r_,T:()=>ou,U:()=>Ss,V:()=>cr,W:()=>ss,X:()=>Cp,Y:()=>Ra,Z:()=>Pt,_:()=>Ip,a:()=>ks,a0:()=>dh,a1:()=>ii,a2:()=>wl,a3:()=>Cl,a4:()=>hh,a5:()=>Ep,a6:()=>ri,a7:()=>Gr,a8:()=>Ba,a9:()=>os,aA:()=>W,aB:()=>ft,aC:()=>Qn,aD:()=>Ns,aE:()=>Et,aI:()=>Xo,aL:()=>Ho,aa:()=>fh,ab:()=>du,ac:()=>hu,af:()=>ph,ag:()=>gh,ah:()=>gc,ak:()=>br,al:()=>pu,an:()=>wc,ao:()=>Dl,ap:()=>Ce,aq:()=>Ue,ar:()=>ut,as:()=>tt,at:()=>Nl,au:()=>Dr,av:()=>Rt,aw:()=>Le,ax:()=>oe,ay:()=>gi,az:()=>te,b:()=>si,c:()=>Nn,d:()=>Dh,e:()=>Rl,f:()=>$n,g:()=>H,h:()=>T,i:()=>sa,j:()=>Me,k:()=>Oh,l:()=>Hi,m:()=>Fs,o:()=>fe,r:()=>cs,s:()=>zr,u:()=>Dc});var l=U(5861),$=U(2090),N=U(9681),ae=U(1877),ce=U(655),ye=U(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Se=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new ae.Yd("@firebase/auth");function it(w,...m){_e.logLevel<=ae.in.ERROR&&_e.error(`Auth (${N.SDK_VERSION}): ${w}`,...m)}function tt(w,...m){throw Ze(w,...m)}function Le(w,...m){return Ze(w,...m)}function Re(w,m,_){const I=Object.assign(Object.assign({},Se()),{[m]:_});return new $.LL("auth","Firebase",I).create(m,{appName:w.name})}function De(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&tt(w,"argument-error"),Re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return at.create(w,...m)}function oe(w,m,..._){if(!w)throw Ze(m,..._)}function de(w){const m="INTERNAL ASSERTION FAILED: "+w;throw it(m),new Error(m)}function Ce(w,m){w||de(m)}const J=new Map;function te(w){Ce(w instanceof Function,"Expected a class definition");let m=J.get(w);return m?(Ce(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,J.set(w,m),m)}function He(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===vt()||"https:"===vt()}function vt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Qe{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ce(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function sn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(w,m){Ce(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class In{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Qe(3e4,6e4);function zt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function Ht(w,m,_,I){return wi.apply(this,arguments)}function wi(){return(wi=(0,l.Z)(function*(w,m,_,I,M={}){return Vr(w,M,(0,l.Z)(function*(){let F={},re={};I&&("GET"===m?re=I:F={body:JSON.stringify(I)});const ke=(0,$.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),lt=yield w._getAdditionalHeaders();return lt["Content-Type"]="application/json",w.languageCode&&(lt["X-Firebase-Locale"]=w.languageCode),In.fetch()(Br(w,w.config.apiHost,_,ke),Object.assign({method:m,headers:lt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Vr(w,m,_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,l.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},tn),m);try{const M=new Fi(w),F=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const re=yield F.json();if("needConfirmation"in re)throw Bn(w,"account-exists-with-different-credential",re);if(F.ok&&!("errorMessage"in re))return re;{const ke=F.ok?re.errorMessage:re.error.message,[lt,Dt]=ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw Bn(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===lt)throw Bn(w,"email-already-in-use",re);if("USER_DISABLED"===lt)throw Bn(w,"user-disabled",re);const Kt=I[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(Dt)throw Re(w,Kt,Dt);tt(w,Kt)}}catch(M){if(M instanceof $.ZR)throw M;tt(w,"network-request-failed")}})).apply(this,arguments)}function On(w,m,_,I){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,l.Z)(function*(w,m,_,I,M={}){const F=yield Ht(w,m,_,I,M);return"mfaPendingCredential"in F&&tt(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Br(w,m,_,I){const M=`${m}${_}?${I}`;return w.config.emulator?cn(w.config,M):`${w.config.apiScheme}://${M}`}class Fi{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Le(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const M=Le(w,m,I);return M.customData._tokenResponse=_,M}function Hr(){return(Hr=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function nt(w,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function qn(w,m){return vn.apply(this,arguments)}function vn(){return(vn=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function hi(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function En(){return(En=(0,l.Z)(function*(w,m=!1){const _=(0,$.m9)(w),I=yield _.getIdToken(m),M=wt(I);oe(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,re=F?.sign_in_provider;return{claims:M,token:I,authTime:hi(mn(M.auth_time)),issuedAtTime:hi(mn(M.iat)),expirationTime:hi(mn(M.exp)),signInProvider:re||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function mn(w){return 1e3*Number(w)}function wt(w){var m;const[_,I,M]=w.split(".");if(void 0===_||void 0===I||void 0===M)return it("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,$.tV)(I);return F?JSON.parse(F):(it("Failed to decode base64 JWT payload"),null)}catch(F){return it("Caught error parsing JWT payload as JSON",null===(m=F)||void 0===m?void 0:m.toString()),null}}function Ot(w,m){return Li.apply(this,arguments)}function Li(){return(Li=(0,l.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof $.ZR&&Zn(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function Zn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Ai{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,l.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,l.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(_=I)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class xt{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xi(w){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,l.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),M=yield Ot(w,qn(_,{idToken:I}));oe(M?.users.length,_,"internal-error");const F=M.users[0];w._notifyReloadListener(F);const re=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?Sn(F.providerUserInfo):[],ke=li(w.providerData,re),Kt=!!w.isAnonymous&&!(w.email&&F.passwordHash||ke?.length),fn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ke,metadata:new xt(F.createdAt,F.lastLoginAt),isAnonymous:Kt};Object.assign(w,fn)})).apply(this,arguments)}function Qt(){return(Qt=(0,l.Z)(function*(w){const m=(0,$.m9)(w);yield xi(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function li(w,m){return[...w.filter(I=>!m.some(M=>M.providerId===I.providerId)),...m]}function Sn(w){return w.map(m=>{var{providerId:_}=m,I=(0,ce._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Ae(){return(Ae=(0,l.Z)(function*(w,m){const _=yield Vr(w,{},(0,l.Z)(function*(){const I=(0,$.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:F}=w.config,re=Br(w,M,"/v1/token",`key=${F}`),ke=yield w._getAdditionalHeaders();return ke["Content-Type"]="application/x-www-form-urlencoded",In.fetch()(re,{method:"POST",headers:ke,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){oe(m.idToken,"internal-error"),oe(typeof m.idToken<"u","internal-error"),oe(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Ct(w){const m=wt(w);return oe(m,"internal-error"),oe(typeof m.exp<"u","internal-error"),oe(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,l.Z)(function*(){return oe(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:re}=yield function st(w,m){return Ae.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(M,F,Number(re))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:M,expirationTime:F}=_,re=new ot;return I&&(oe("string"==typeof I,"internal-error",{appName:m}),re.refreshToken=I),M&&(oe("string"==typeof M,"internal-error",{appName:m}),re.accessToken=M),F&&(oe("number"==typeof F,"internal-error",{appName:m}),re.expirationTime=F),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ot,this.toJSON())}_performRefresh(){return de("not implemented")}}function Tt(w,m){oe("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class St{constructor(m){var{uid:_,auth:I,stsTokenManager:M}=m,F=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ai(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new xt(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,l.Z)(function*(){const I=yield Ot(_,_.stsTokenManager.getToken(_.auth,m));return oe(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function wn(w){return En.apply(this,arguments)}(this,m)}reload(){return function Zi(w){return Qt.apply(this,arguments)}(this)}_assign(m){this!==m&&(oe(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new St(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,l.Z)(function*(){let M=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield xi(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,l.Z)(function*(){const _=yield m.getIdToken();return yield Ot(m,function Ir(w,m){return Hr.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,M,F,re,ke,lt,Dt,Kt;const fn=null!==(I=_.displayName)&&void 0!==I?I:void 0,ji=null!==(M=_.email)&&void 0!==M?M:void 0,Kr=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,Rc=null!==(re=_.photoURL)&&void 0!==re?re:void 0,Nc=null!==(ke=_.tenantId)&&void 0!==ke?ke:void 0,Pc=null!==(lt=_._redirectEventId)&&void 0!==lt?lt:void 0,tl=null!==(Dt=_.createdAt)&&void 0!==Dt?Dt:void 0,Mp=null!==(Kt=_.lastLoginAt)&&void 0!==Kt?Kt:void 0,{uid:Lh,emailVerified:Fc,isAnonymous:Au,providerData:xu,stsTokenManager:ga}=_;oe(Lh&&ga,m,"internal-error");const u_=ot.fromJSON(this.name,ga);oe("string"==typeof Lh,m,"internal-error"),Tt(fn,m.name),Tt(ji,m.name),oe("boolean"==typeof Fc,m,"internal-error"),oe("boolean"==typeof Au,m,"internal-error"),Tt(Kr,m.name),Tt(Rc,m.name),Tt(Nc,m.name),Tt(Pc,m.name),Tt(tl,m.name),Tt(Mp,m.name);const Pn=new St({uid:Lh,auth:m,email:ji,emailVerified:Fc,displayName:fn,isAnonymous:Au,photoURL:Rc,phoneNumber:Kr,tenantId:Nc,stsTokenManager:u_,createdAt:tl,lastLoginAt:Mp});return xu&&Array.isArray(xu)&&(Pn.providerData=xu.map(kp=>Object.assign({},kp))),Pc&&(Pn._redirectEventId=Pc),Pn}static _fromIdTokenResponse(m,_,I=!1){return(0,l.Z)(function*(){const M=new ot;M.updateFromServerResponse(_);const F=new St({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:I});return yield xi(F),F})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(_,I){var M=this;return(0,l.Z)(function*(){M.storage[_]=I})()}_get(_){var I=this;return(0,l.Z)(function*(){const M=I.storage[_];return void 0===M?null:M})()}_remove(_){var I=this;return(0,l.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function W(w,m,_){return`firebase:${w}:${m}:${_}`}class Y{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:M,name:F}=this.auth;this.fullUserKey=W(this.userKey,M.apiKey,F),this.fullPersistenceKey=W("persistence",M.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?St._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,l.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,l.Z)(function*(){if(!_.length)return new Y(te(q),m,I);const M=(yield Promise.all(_.map(function(){var Dt=(0,l.Z)(function*(Kt){if(yield Kt._isAvailable())return Kt});return function(Kt){return Dt.apply(this,arguments)}}()))).filter(Dt=>Dt);let F=M[0]||te(q);const re=W(I,m.config.apiKey,m.name);let ke=null;for(const Dt of _)try{const Kt=yield Dt._get(re);if(Kt){const fn=St._fromJSON(m,Kt);Dt!==F&&(ke=fn),F=Dt;break}}catch{}const lt=M.filter(Dt=>Dt._shouldAllowMigration);return F._shouldAllowMigration&&lt.length?(F=lt[0],ke&&(yield F._set(re,ke.toJSON())),yield Promise.all(_.map(function(){var Dt=(0,l.Z)(function*(Kt){if(Kt!==F)try{yield Kt._remove(re)}catch{}});return function(Kt){return Dt.apply(this,arguments)}}())),new Y(F,m,I)):new Y(F,m,I)})()}}function j(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Fe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(R(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(ct(m))return"Blackberry";if(xe(m))return"Webos";if(B(m))return"Safari";if((m.includes("chrome/")||se(m))&&!m.includes("edge/"))return"Chrome";if(ut(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function R(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function se(w=(0,$.z$)()){return/crios\//i.test(w)}function Fe(w=(0,$.z$)()){return/iemobile/i.test(w)}function ut(w=(0,$.z$)()){return/android/i.test(w)}function ct(w=(0,$.z$)()){return/blackberry/i.test(w)}function xe(w=(0,$.z$)()){return/webos/i.test(w)}function Ue(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Rt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function hn(w=(0,$.z$)()){return Ue(w)||ut(w)||xe(w)||ct(w)||/windows phone/i.test(w)||Fe(w)}function bn(w,m=[]){let _;switch(w){case"Browser":_=j((0,$.z$)());break;case"Worker":_=`${j((0,$.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${I}`}class eo{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=F=>new Promise((re,ke)=>{try{re(m(F))}catch(lt){ke(lt)}});I.onAbort=_,this.queue.push(I);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,l.Z)(function*(){var I;if(_.auth.currentUser===m)return;const M=[];try{for(const F of _.queue)yield F(m),F.onAbort&&M.push(F.onAbort)}catch(F){M.reverse();for(const re of M)try{re()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=F)||void 0===I?void 0:I.message})}})()}}class Po{constructor(m,_,I){this.app=m,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new to(this),this.idTokenSubscription=new to(this),this.beforeStateQueue=new eo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=te(_)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,F;if(!I._deleted&&(I.persistenceManager=yield Y.create(I,m),!I._deleted)){if(null!==(M=I._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,l.Z)(function*(){var I;const M=yield _.assertedPersistence.getCurrentUser();let F=M,re=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ke=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,lt=F?._redirectEventId,Dt=yield _.tryRedirectSignIn(m);(!ke||ke===lt)&&Dt?.user&&(F=Dt.user,re=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(re)try{yield _.beforeStateQueue.runMiddleware(F)}catch(ke){F=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ke))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return oe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var _=this;return(0,l.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,l.Z)(function*(){var I;try{yield xi(m)}catch(M){if("auth/network-request-failed"!==(null===(I=M)||void 0===I?void 0:I.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function jt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,l.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,l.Z)(function*(){const I=m?(0,$.m9)(m):null;return I&&oe(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,l.Z)(function*(){if(!I._deleted)return m&&oe(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,l.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,l.Z)(function*(){yield _.assertedPersistence.setPersistence(te(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new $.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,l.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,l.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&te(m)||_._popupRedirectResolver;oe(I,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[te(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,l.Z)(function*(){var I,M;return _._isInitialized&&(yield _.queue((0,l.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,l.Z)(function*(){if(m===_.currentUser)return _.queue((0,l.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,M){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),re=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(re,this,"internal-error"),re.then(()=>F(this.currentUser)),"function"==typeof _?m.addObserver(_,I,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,l.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(I["X-Firebase-Client"]=M),I})()}}function Et(w){return(0,$.m9)(w)}class to{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function no(w,m,_){const I=Et(w);oe(I._canInitEmulator,I,"emulator-config-failed"),oe(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const M=!!_?.disableWarnings,F=ml(m),{host:re,port:ke}=function ns(w){const m=ml(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const F=M[1];return{host:F,port:Kn(I.substr(F.length+1))}}{const[F,re]=I.split(":");return{host:F,port:Kn(re)}}}(m);I.config.emulator={url:`${F}//${re}${null===ke?"":`:${ke}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:re,port:ke,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function io(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ml(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Kn(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Ki{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return de("not implemented")}_getIdTokenResponse(m){return de("not implemented")}_linkToIdToken(m,_){return de("not implemented")}_getReauthenticationResolver(m){return de("not implemented")}}function or(w,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:resetPassword",zt(w,m))})).apply(this,arguments)}function iu(w,m){return qt.apply(this,arguments)}function qt(){return(qt=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function lh(w,m){return xa.apply(this,arguments)}function xa(){return(xa=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:update",zt(w,m))})).apply(this,arguments)}function ro(){return(ro=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithPassword",zt(w,m))})).apply(this,arguments)}function ar(w,m){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:sendOobCode",zt(w,m))})).apply(this,arguments)}function is(w,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,l.Z)(function*(w,m){return ar(w,m)})).apply(this,arguments)}function uh(w,m){return ni.apply(this,arguments)}function ni(){return(ni=(0,l.Z)(function*(w,m){return ar(w,m)})).apply(this,arguments)}function lr(w,m){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,l.Z)(function*(w,m){return ar(w,m)})).apply(this,arguments)}function ru(w,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,l.Z)(function*(w,m){return ar(w,m)})).apply(this,arguments)}function su(){return(su=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithEmailLink",zt(w,m))})).apply(this,arguments)}function Qi(){return(Qi=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithEmailLink",zt(w,m))})).apply(this,arguments)}class Vi extends Ki{constructor(m,_,I,M=null){super("password",I),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new Vi(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new Vi(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,l.Z)(function*(){switch(_.signInMethod){case"password":return function Ma(w,m){return ro.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Yi(w,m){return su.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:tt(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,l.Z)(function*(){switch(I.signInMethod){case"password":return iu(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function gp(w,m){return Qi.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:tt(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function oo(w,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithIdp",zt(w,m))})).apply(this,arguments)}class rs extends Ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new rs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):tt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M}=_,F=(0,ce._T)(_,["providerId","signInMethod"]);if(!I||!M)return null;const re=new rs(I,M);return re.idToken=F.idToken||void 0,re.accessToken=F.accessToken||void 0,re.secret=F.secret,re.nonce=F.nonce,re.pendingToken=F.pendingToken||null,re}_getIdTokenResponse(m){return oo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,oo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,oo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,$.xO)(_)}return m}}function _p(w,m){return ic.apply(this,arguments)}function ic(){return(ic=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:sendVerificationCode",zt(w,m))})).apply(this,arguments)}function Oa(){return(Oa=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",zt(w,m))})).apply(this,arguments)}function rc(){return(rc=(0,l.Z)(function*(w,m){const _=yield On(w,"POST","/v1/accounts:signInWithPhoneNumber",zt(w,m));if(_.temporaryProof)throw Bn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const vp={USER_NOT_FOUND:"user-not-found"};function sc(){return(sc=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",zt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),vp)})).apply(this,arguments)}class Vo extends Ki{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Vo({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Vo({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function yp(w,m){return Oa.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Lo(w,m){return rc.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function wp(w,m){return sc.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:F}=m;return I||_||M||F?new Vo({verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:F}):null}}class Uo{constructor(m){var _,I,M,F,re,ke;const lt=(0,$.zd)((0,$.pd)(m)),Dt=null!==(_=lt.apiKey)&&void 0!==_?_:null,Kt=null!==(I=lt.oobCode)&&void 0!==I?I:null,fn=function oc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=lt.mode)&&void 0!==M?M:null);oe(Dt&&Kt&&fn,"argument-error"),this.apiKey=Dt,this.operation=fn,this.code=Kt,this.continueUrl=null!==(F=lt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(re=lt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(ke=lt.tenantId)&&void 0!==ke?ke:null}static parseLink(m){const _=function ac(w){const m=(0,$.zd)((0,$.pd)(w)).link,_=m?(0,$.zd)((0,$.pd)(m)).deep_link_id:null,I=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(I?(0,$.zd)((0,$.pd)(I)).link:null)||I||_||m||w}(m);try{return new Uo(_)}catch{return null}}}let _l=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return Vi._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const M=Uo.parseLink(I);return oe(M,"argument-error"),Vi._fromEmailAndCode(_,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ci{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Bo extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ss extends Bo{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return oe("providerId"in _&&"signInMethod"in _,"argument-error"),rs._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return oe(m.idToken||m.accessToken,"argument-error"),rs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ss.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ss.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:F,nonce:re,providerId:ke}=m;if(!I&&!M&&!_&&!F||!ke)return null;try{return new Ss(ke)._credential({idToken:_,accessToken:I,nonce:re,pendingToken:F})}catch{return null}}}let lc=(()=>{class w extends Bo{constructor(){super("facebook.com")}static credential(_){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),yl=(()=>{class w extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:M}=_;if(!I&&!M)return null;try{return w.credential(I,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ou=(()=>{class w extends Bo{constructor(){super("github.com")}static credential(_){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ho extends Ki{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return oo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,oo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,oo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M,pendingToken:F}=_;return I&&M&&F&&I===M?new Ho(I,F):null}static _create(m,_){return new Ho(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cr extends Ci{constructor(m){oe(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return cr.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return cr.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Ho.fromJSON(m);return oe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return Ho._create(I,_)}catch{return null}}}let ss=(()=>{class w extends Bo{constructor(){super("twitter.com")}static credential(_,I){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=_;if(!I||!M)return null;try{return w.credential(I,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ji(w,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signUp",zt(w,m))})).apply(this,arguments)}class Er{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,M=!1){return(0,l.Z)(function*(){const F=yield St._fromIdTokenResponse(m,I,M),re=jo(I);return new Er({user:F,providerId:re,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,l.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const M=jo(I);return new Er({user:m,providerId:M,_tokenResponse:I,operationType:_})})()}}function jo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Cp(w){return au.apply(this,arguments)}function au(){return(au=(0,l.Z)(function*(w){var m;const _=Et(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Er({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Ji(_,{returnSecureToken:!0}),M=yield Er._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Rn extends $.ZR{constructor(m,_,I,M){var F;super(_.code,_.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,Rn.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,M){return new Rn(m,_,I,M)}}function cc(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Rn._fromErrorAndOperation(w,F,m,I):F})}function ch(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function br(w,m){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w);yield jr(!0,_,m);const{providerUserInfo:I}=yield nt(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=ch(I||[]);return _.providerData=_.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function vl(w,m){return Go.apply(this,arguments)}function Go(){return(Go=(0,l.Z)(function*(w,m,_=!1){const I=yield Ot(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return Er._forOperation(w,"link",I)})).apply(this,arguments)}function jr(w,m,_){return on.apply(this,arguments)}function on(){return(on=(0,l.Z)(function*(w,m,_){yield xi(m);const M=!1===w?"provider-already-linked":"no-such-provider";oe(ch(m.providerData).has(_)===w,m.auth,M)})).apply(this,arguments)}function lu(w,m){return As.apply(this,arguments)}function As(){return(As=(0,l.Z)(function*(w,m,_=!1){var I;const{auth:M}=w,F="reauthenticate";try{const re=yield Ot(w,cc(M,F,m,w),_);oe(re.idToken,M,"internal-error");const ke=wt(re.idToken);oe(ke,M,"internal-error");const{sub:lt}=ke;return oe(w.uid===lt,M,"user-mismatch"),Er._forOperation(w,F,re)}catch(re){throw"auth/user-not-found"===(null===(I=re)||void 0===I?void 0:I.code)&&tt(M,"user-mismatch"),re}})).apply(this,arguments)}function uu(w,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,l.Z)(function*(w,m,_=!1){const I="signIn",M=yield cc(w,I,m),F=yield Er._fromIdTokenResponse(w,I,M);return _||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Ra(w,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,l.Z)(function*(w,m){return uu(Et(w),m)})).apply(this,arguments)}function Pt(w,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w);return yield jr(!1,_,m.providerId),vl(_,m)})).apply(this,arguments)}function Ip(w,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,l.Z)(function*(w,m){return lu((0,$.m9)(w),m)})).apply(this,arguments)}function dc(w,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,l.Z)(function*(w,m){return On(w,"POST","/v1/accounts:signInWithCustomToken",zt(w,m))})).apply(this,arguments)}function lo(w,m){return La.apply(this,arguments)}function La(){return(La=(0,l.Z)(function*(w,m){const _=Et(w),I=yield dc(_,{token:m,returnSecureToken:!0}),M=yield Er._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class $o{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ne._fromServerResponse(m,_):tt(m,"internal-error")}}class Ne extends $o{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ne(_)}}function Zt(w,m,_){var I;oe((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),oe(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(oe(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(oe(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function dh(w,m,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M={requestType:"PASSWORD_RESET",email:m};_&&Zt(I,M,_),yield uh(I,M)})).apply(this,arguments)}function ii(w,m,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,l.Z)(function*(w,m,_){yield or((0,$.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function wl(w,m){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,l.Z)(function*(w,m){yield lh((0,$.m9)(w),{oobCode:m})})).apply(this,arguments)}function Cl(w,m){return qo.apply(this,arguments)}function qo(){return(qo=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w),I=yield or(_,{oobCode:m}),M=I.requestType;switch(oe(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(I.mfaInfo,_,"internal-error");default:oe(I.email,_,"internal-error")}let F=null;return I.mfaInfo&&(F=$o._fromServerResponse(Et(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function hh(w,m){return Va.apply(this,arguments)}function Va(){return(Va=(0,l.Z)(function*(w,m){const{data:_}=yield Cl((0,$.m9)(w),m);return _.email})).apply(this,arguments)}function Ep(w,m,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(w,m,_){const I=Et(w),M=yield Ji(I,{returnSecureToken:!0,email:m,password:_}),F=yield Er._fromIdTokenResponse(I,"signIn",M);return yield I._updateCurrentUser(F.user),F})).apply(this,arguments)}function ri(w,m,_){return Ra((0,$.m9)(w),_l.credential(m,_))}function Gr(w,m,_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M={requestType:"EMAIL_SIGNIN",email:m};oe(_.handleCodeInApp,I,"argument-error"),_&&Zt(I,M,_),yield lr(I,M)})).apply(this,arguments)}function Ba(w,m){return"EMAIL_SIGNIN"===Uo.parseLink(m)?.operation}function os(w,m,_){return hc.apply(this,arguments)}function hc(){return(hc=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M=_l.credentialWithLink(m,_||He());return oe(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Ra(I,M)})).apply(this,arguments)}function cu(w,m){return fc.apply(this,arguments)}function fc(){return(fc=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:createAuthUri",zt(w,m))})).apply(this,arguments)}function fh(w,m){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,l.Z)(function*(w,m){const I={identifier:m,continueUri:je()?He():"http://localhost"},{signinMethods:M}=yield cu((0,$.m9)(w),I);return M||[]})).apply(this,arguments)}function du(w,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Zt(_.auth,M,m);const{email:F}=yield is(_.auth,M);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function hu(w,m,_){return ja.apply(this,arguments)}function ja(){return(ja=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Zt(I.auth,F,_);const{email:re}=yield ru(I.auth,F);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function pc(w,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(w,m){return Ht(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ph(w,m){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,l.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,$.m9)(w),F={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},re=yield Ot(I,pc(I.auth,F));I.displayName=re.displayName||null,I.photoURL=re.photoUrl||null;const ke=I.providerData.find(({providerId:lt})=>"password"===lt);ke&&(ke.displayName=I.displayName,ke.photoURL=I.photoURL),yield I._updateTokensIfNecessary(re)})).apply(this,arguments)}function gh(w,m){return xs((0,$.m9)(w),m,null)}function gc(w,m){return xs((0,$.m9)(w),null,m)}function xs(w,m,_){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,l.Z)(function*(w,m,_){const{auth:I}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(F.email=m),_&&(F.password=_);const re=yield Ot(w,iu(I,F));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class xn{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class as extends xn{constructor(m,_,I,M){super(m,_,I),this.username=M}}class Mn extends xn{constructor(m,_){super(m,"facebook.com",_)}}class _c extends as{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class fu extends xn{constructor(m,_){super(m,"google.com",_)}}class mh extends as{constructor(m,_,I){super(m,"twitter.com",_,I)}}function pu(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function mc(w){var m,_;if(!w)return null;const{providerId:I}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const re=null===(_=null===(m=wt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(re)return new xn(F,"anonymous"!==re&&"custom"!==re?re:null)}if(!I)return null;switch(I){case"facebook.com":return new Mn(F,M);case"github.com":return new _c(F,M);case"google.com":return new fu(F,M);case"twitter.com":return new mh(F,M,w.screenName||null);case"custom":case"anonymous":return new xn(F,null);default:return new xn(F,I,M)}}(_)}class hr{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new hr("enroll",m,_)}static _fromMfaPendingCredential(m){return new hr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return hr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return hr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class _u{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Et(m),M=_.customData._serverResponse,F=(M.mfaInfo||[]).map(ke=>$o._fromServerResponse(I,ke));oe(M.mfaPendingCredential,I,"internal-error");const re=hr._fromMfaPendingCredential(M.mfaPendingCredential);return new _u(re,F,function(){var ke=(0,l.Z)(function*(lt){const Dt=yield lt._process(I,re);delete M.mfaInfo,delete M.mfaPendingCredential;const Kt=Object.assign(Object.assign({},M),{idToken:Dt.idToken,refreshToken:Dt.refreshToken});switch(_.operationType){case"signIn":const fn=yield Er._fromIdTokenResponse(I,_.operationType,Kt);return yield I._updateCurrentUser(fn.user),fn;case"reauthenticate":return oe(_.user,I,"internal-error"),Er._forOperation(_.user,_.operationType,Kt);default:tt(I,"internal-error")}});return function(lt){return ke.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,l.Z)(function*(){return _.signInResolver(m)})()}}function wc(w,m){var _;const I=(0,$.m9)(w),M=m;return oe(m.customData.operationType,I,"argument-error"),oe(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),_u._fromError(I,M)}function jn(w,m){return Ht(w,"POST","/v2/accounts/mfaEnrollment:start",zt(w,m))}class Tl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>$o._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Tl(m)}getSession(){var m=this;return(0,l.Z)(function*(){return hr._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,l.Z)(function*(){const M=m,F=yield I.getSession(),re=yield Ot(I.user,M._process(I.user.auth,F,_));return yield I.user._updateTokensIfNecessary(re),I.user.reload()})()}unenroll(m){var _=this;return(0,l.Z)(function*(){var I;const M="string"==typeof m?m:m.uid,F=yield _.user.getIdToken(),re=yield Ot(_.user,function bl(w,m){return Ht(w,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(w,m))}(_.user.auth,{idToken:F,mfaEnrollmentId:M}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ke})=>ke!==M),yield _.user._updateTokensIfNecessary(re);try{yield _.user.reload()}catch(ke){if("auth/user-token-expired"!==(null===(I=ke)||void 0===I?void 0:I.code))throw ke}})()}}const _h=new WeakMap;function Dl(w){const m=(0,$.m9)(w);return _h.has(m)||_h.set(m,Tl._fromUser(m)),_h.get(m)}const ls="__sak";class $a{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ls,"1"),this.storage.removeItem(ls),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const si=(()=>{class w extends $a{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yu(){const w=(0,$.z$)();return B(w)||Ue(w)}()&&function ts(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),F=this.localCache[I];M!==F&&_(I,F,M)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((ke,lt,Dt)=>{this.notifyListeners(ke,Dt)});const M=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ke=this.storage.getItem(M);if(_.newValue!==ke)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!I)return}const F=()=>{const ke=this.storage.getItem(M);!I&&this.localCache[M]===ke||this.notifyListeners(M,ke)},re=this.storage.getItem(M);!function Lt(){return(0,$.w1)()&&10===document.documentMode}()||re===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const F of Array.from(M))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var M=()=>super._set,F=this;return(0,l.Z)(function*(){yield M().call(F,_,I),F.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,M=this;return(0,l.Z)(function*(){const F=yield I().call(M,_);return M.localCache[_]=JSON.stringify(F),F})()}_remove(_){var I=()=>super._remove,M=this;return(0,l.Z)(function*(){yield I().call(M,_),delete M.localCache[_]})()}}return w.type="LOCAL",w})(),ks=(()=>{class w extends $a{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let za=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(F=>F.isListeningto(_));if(I)return I;const M=new w(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,l.Z)(function*(){const M=_,{eventId:F,eventType:re,data:ke}=M.data,lt=I.handlersMap[re];if(!lt?.size)return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:re});const Dt=Array.from(lt).map(function(){var fn=(0,l.Z)(function*(ji){return ji(M.origin,ke)});return function(ji){return fn.apply(this,arguments)}}()),Kt=yield function vu(w){return Promise.all(w.map(function(){var m=(0,l.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(Dt);M.ports[0].postMessage({status:"done",eventId:F,eventType:re,response:Kt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Xo(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class wh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var M=this;return(0,l.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let re,ke;return new Promise((lt,Dt)=>{const Kt=Xo("",20);F.port1.start();const fn=setTimeout(()=>{Dt(new Error("unsupported_event"))},I);ke={messageChannel:F,onMessage(ji){const Kr=ji;if(Kr.data.eventId===Kt)switch(Kr.data.status){case"ack":clearTimeout(fn),re=setTimeout(()=>{Dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),lt(Kr.data.response);break;default:clearTimeout(fn),clearTimeout(re),Dt(new Error("invalid_response"))}}},M.handlers.add(ke),F.port1.addEventListener("message",ke.onMessage),M.target.postMessage({eventType:m,eventId:Kt,data:_},[F.port2])}).finally(()=>{ke&&M.removeMessageHandler(ke)})})()}}function Gn(){return window}function Xi(){return typeof Gn().WorkerGlobalScope<"u"&&"function"==typeof Gn().importScripts}function us(){return(us=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const qa="firebaseLocalStorageDb",Za="firebaseLocalStorage",ea="fbase_key";class ta{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function na(w,m){return w.transaction([Za],m?"readwrite":"readonly").objectStore(Za)}function Al(){const w=indexedDB.open(qa,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Za,{keyPath:ea})}catch(M){_(M)}}),w.addEventListener("success",(0,l.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Za)?m(I):(I.close(),yield function bc(){const w=indexedDB.deleteDatabase(qa);return new ta(w).toPromise()}(),m(yield Al()))}))})}function Ka(w,m,_){return $r.apply(this,arguments)}function $r(){return($r=(0,l.Z)(function*(w,m,_){const I=na(w,!0).put({[ea]:m,value:_});return new ta(I).toPromise()})).apply(this,arguments)}function ia(){return(ia=(0,l.Z)(function*(w,m){const _=na(w,!1).get(m),I=yield new ta(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function xl(w,m){const _=na(w,!0).delete(m);return new ta(_).toPromise()}const sa=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,l.Z)(function*(){return _.db||(_.db=yield Al()),_.db})()}_withRetries(_){var I=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const F=yield I._openDb();return yield _(F)}catch(F){if(M++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,l.Z)(function*(){return Xi()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,l.Z)(function*(){_.receiver=za._getInstance(function Sl(){return Xi()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,l.Z)(function*(M,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(M,F){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,l.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,l.Z)(function*(){var I,M;if(_.activeServiceWorker=yield function Ec(){return us.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new wh(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(I=F[0])||void 0===I?void 0:I.fulfilled)&&(null===(M=F[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,l.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function wu(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Al();return yield Ka(_,ls,"1"),yield xl(_,ls),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,l.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(F=>Ka(F,_,I)),M.localCache[_]=I,M.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,l.Z)(function*(){const M=yield I._withRetries(F=>function Ch(w,m){return ia.apply(this,arguments)}(F,_));return I.localCache[_]=M,M})()}_remove(_){var I=this;return(0,l.Z)(function*(){return I._withPendingWrite((0,l.Z)(function*(){return yield I._withRetries(M=>xl(M,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,l.Z)(function*(){const I=yield _._withRetries(re=>{const ke=na(re,!1).getAll();return new ta(ke).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:re,value:ke}of I)F.add(re),JSON.stringify(_.localCache[re])!==JSON.stringify(ke)&&(_.notifyListeners(re,ke),M.push(re));for(const re of Object.keys(_.localCache))_.localCache[re]&&!F.has(re)&&(_.notifyListeners(re,null),M.push(re));return M})()}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const F of Array.from(M))F(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ih(w,m){return Ht(w,"POST","/v2/accounts/mfaSignIn:start",zt(w,m))}function Mi(){return(Mi=(0,l.Z)(function*(w){return(yield Ht(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ho(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=M=>{const F=Le("internal-error");F.customData=M,_(F)},I.type="text/javascript",I.charset="UTF-8",function aa(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function la(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Wr=1e12;class Tc{constructor(m){this.auth=m,this.counter=Wr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new Tn(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||Wr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Wr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,l.Z)(function*(){var I;return null===(I=_._widgets.get(m||Wr))||void 0===I||I.execute(),""})()}}class Tn{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;oe(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function bp(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Eh=la("rcb"),k0=new Qe(3e4,6e4);class i_{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Gn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return oe(function bh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Gn().grecaptcha):new Promise((I,M)=>{const F=Gn().setTimeout(()=>{M(Le(m,"network-request-failed"))},k0.get());Gn()[Eh]=()=>{Gn().clearTimeout(F),delete Gn()[Eh];const ke=Gn().grecaptcha;if(!ke)return void M(Le(m,"internal-error"));const lt=ke.render;ke.render=(Dt,Kt)=>{const fn=lt(Dt,Kt);return this.counter++,fn},this.hostLanguage=_,I(ke)},ho(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Eh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),M(Le(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Gn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class O0{load(m){return(0,l.Z)(function*(){return new Tc(m)})()}clearedOneInstance(){}}const kl="recaptcha",R0={theme:"light",type:"image"};class r_{constructor(m,_=Object.assign({},R0),I){this.parameters=_,this.type=kl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(I),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;oe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new O0:new i_,this.validateStartingState()}verify(){var m=this;return(0,l.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(F=>{const re=ke=>{!ke||(m.tokenChangeListeners.delete(re),F(ke))};m.tokenChangeListeners.add(re),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=Gn()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.Z)(function*(){oe(je()&&!Xi(),m.auth,"internal-error"),yield function fi(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ml(w){return Mi.apply(this,arguments)}(m.auth);oe(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rn{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Vo._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function zr(w,m,_){return ht.apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(w,m,_){const I=Et(w),M=yield pi(I,m,(0,$.m9)(_));return new rn(M,F=>Ra(I,F))})).apply(this,arguments)}function Hi(w,m,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);yield jr(!1,I,"phone");const M=yield pi(I.auth,m,(0,$.m9)(_));return new rn(M,F=>Pt(I,F))})).apply(this,arguments)}function cs(w,m,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M=yield pi(I.auth,m,(0,$.m9)(_));return new rn(M,F=>Ip(I,F))})).apply(this,arguments)}function pi(w,m,_){return po.apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(w,m,_){var I;const M=yield _.verify();try{let F;if(oe("string"==typeof M,w,"argument-error"),oe(_.type===kl,w,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const re=F.session;if("phoneNumber"in F)return oe("enroll"===re.type,w,"internal-error"),(yield jn(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{oe("signin"===re.type,w,"internal-error");const ke=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return oe(ke,w,"missing-multi-factor-info"),(yield Ih(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:ke,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield _p(w,{phoneNumber:F.phoneNumber,recaptchaToken:M});return re}}finally{_._reset()}})).apply(this,arguments)}function Dc(w,m){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,l.Z)(function*(w,m){yield vl((0,$.m9)(w),m)})).apply(this,arguments)}let Th=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Et(_)}verifyPhoneNumber(_,I){return pi(this.auth,_,(0,$.m9)(I))}static credential(_,I){return Vo._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:M}=_;return I&&M?Vo._fromTokenResponse(I,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function go(w,m){return m?te(m):(oe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Eu extends Ki{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return oo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return oo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return oo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function mo(w){return uu(w.auth,new Eu(w),w.bypassAuthState)}function dt(w){const{auth:m,user:_}=w;return oe(_,m,"internal-error"),lu(_,new Eu(w),w.bypassAuthState)}function Ya(w){return qr.apply(this,arguments)}function qr(){return(qr=(0,l.Z)(function*(w){const{auth:m,user:_}=w;return oe(_,m,"internal-error"),vl(_,new Eu(w),w.bypassAuthState)})).apply(this,arguments)}class Ol{constructor(m,_,I,M,F=!1){this.auth=m,this.resolver=I,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,l.Z)(function*(I,M){m.pendingPromise={resolve:I,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(I,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,l.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:F,tenantId:re,error:ke,type:lt}=m;if(ke)return void _.reject(ke);const Dt={auth:_.auth,requestUri:I,sessionId:M,tenantId:re||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(lt)(Dt))}catch(Kt){_.reject(Kt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return mo;case"linkViaPopup":case"linkViaRedirect":return Ya;case"reauthViaPopup":case"reauthViaRedirect":return dt;default:tt(this.auth,"internal-error")}}resolve(m){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qa=new Qe(2e3,1e4);function Nn(w,m,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,l.Z)(function*(w,m,_){const I=Et(w);De(w,m,Ci);const M=go(I,_);return new Xa(I,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function Rl(w,m,_){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);De(I.auth,m,Ci);const M=go(I.auth,_);return new Xa(I.auth,"reauthViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}function Dh(w,m,_){return ca.apply(this,arguments)}function ca(){return(ca=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);De(I.auth,m,Ci);const M=go(I.auth,_);return new Xa(I.auth,"linkViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}let Xa=(()=>{class w extends Ol{constructor(_,I,M,F,re){super(_,I,F,re),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,l.Z)(function*(){const I=yield _.execute();return oe(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,l.Z)(function*(){Ce(1===_.filter.length,"Popup operations only handle one event");const I=Xo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,M;this.pollId=null!==(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Qa.get())};_()}}return w.currentPopupAction=null,w})();const er=new Map;class _o extends Ol{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,l.Z)(function*(){let I=er.get(_.auth._key());if(!I){try{const F=(yield function bu(w,m){return Rs.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(F)}catch(M){I=()=>Promise.reject(M)}er.set(_.auth._key(),I)}return _.bypassAuthState||er.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,l.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const M=yield I.auth._redirectUserForId(m.eventId);if(M)return I.user=M,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Rs(){return(Rs=(0,l.Z)(function*(w,m){const _=hs(m),I=yo(w);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(_));return yield I._remove(_),M})).apply(this,arguments)}function tr(w,m){return ds.apply(this,arguments)}function ds(){return(ds=(0,l.Z)(function*(w,m){return yo(w)._set(hs(m),"true")})).apply(this,arguments)}function Ns(){er.clear()}function Qn(w,m){er.set(w._key(),m)}function yo(w){return te(w._redirectPersistence)}function hs(w){return W("pendingRedirect",w.config.apiKey,w.name)}function $n(w,m,_){return function An(w,m,_){return ha.apply(this,arguments)}(w,m,_)}function ha(){return(ha=(0,l.Z)(function*(w,m,_){const I=Et(w);De(w,m,Ci);const M=go(I,_);return yield tr(M,I),M._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function T(w,m,_){return function S(w,m,_){return O.apply(this,arguments)}(w,m,_)}function O(){return(O=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);De(I.auth,m,Ci);const M=go(I.auth,_);yield tr(M,I.auth);const F=yield Nt(I);return M._openRedirect(I.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function H(w,m,_){return function ee(w,m,_){return le.apply(this,arguments)}(w,m,_)}function le(){return(le=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);De(I.auth,m,Ci);const M=go(I.auth,_);yield jr(!1,I,m.providerId),yield tr(M,I.auth);const F=yield Nt(I);return M._openRedirect(I.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function Me(w,m){return Be.apply(this,arguments)}function Be(){return(Be=(0,l.Z)(function*(w,m){return yield Et(w)._initializationPromise,ft(w,m,!1)})).apply(this,arguments)}function ft(w,m){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,l.Z)(function*(w,m,_=!1){const I=Et(w),M=go(I,m),re=yield new _o(I,M,_).execute();return re&&!_&&(delete re.user._redirectEventId,yield I._persistUserIfCurrent(re.user),yield I._setRedirectUser(null,m)),re})).apply(this,arguments)}function Nt(w){return It.apply(this,arguments)}function It(){return(It=(0,l.Z)(function*(w){const m=Xo(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class gi{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Vt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ps(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Ps(m)){const M=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fa(m))}saveEventToCache(m){this.cachedEventUids.add(fa(m)),this.lastProcessedEventTime=Date.now()}}function fa(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Ps({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Dr(w){return fs.apply(this,arguments)}function fs(){return(fs=(0,l.Z)(function*(w,m={}){return Ht(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Zr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pa=/^https?/;function nr(){return(nr=(0,l.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Dr(w);for(const _ of m)try{if(s_(_))return}catch{}tt(w,"unauthorized-domain")})).apply(this,arguments)}function s_(w){const m=He(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&re.hostname===I}if(!pa.test(_))return!1;if(Zr.test(w))return I===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const Tp=new Qe(3e4,6e4);function Sh(){const w=Gn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let zn=null;function wo(w){return zn=zn||function N0(w){return new Promise((m,_)=>{var I,M,F;function re(){Sh(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Sh(),_(Le(w,"network-request-failed"))},timeout:Tp.get()})}if(null!==(M=null===(I=Gn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(F=Gn().gapi)||void 0===F||!F.load){const ke=la("iframefcb");return Gn()[ke]=()=>{gapi.load?re():_(Le(w,"network-request-failed"))},ho(`https://apis.google.com/js/api.js?onload=${ke}`).catch(lt=>_(lt))}re()}}).catch(m=>{throw zn=null,m})}(w),zn}const Ah=new Qe(5e3,15e3),xh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mh(w){const m=w.config;oe(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?cn(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:m.apiKey,appName:w.name,v:N.SDK_VERSION},M=o_.get(w.config.apiHost);M&&(I.eid=M);const F=w._getFrameworks();return F.length&&(I.fw=F.join(",")),`${_}?${(0,$.xO)(I).slice(1)}`}function xc(){return xc=(0,l.Z)(function*(w){const m=yield wo(w),_=Gn().gapi;return oe(_,w,"internal-error"),m.open({where:document.body,url:Mh(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xh,dontclear:!0},I=>new Promise(function(){var M=(0,l.Z)(function*(F,re){yield I.restyle({setHideOnLeave:!1});const ke=Le(w,"network-request-failed"),lt=Gn().setTimeout(()=>{re(ke)},Ah.get());function Dt(){Gn().clearTimeout(lt),F(I)}I.ping(Dt).then(Dt,()=>{re(ke)})});return function(F,re){return M.apply(this,arguments)}}()))}),xc.apply(this,arguments)}const Tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Du{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nl(w,m,_,I,M,F){oe(w.config.authDomain,w,"auth-domain-config-required"),oe(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:N.SDK_VERSION,eventId:M};if(m instanceof Ci){m.setDefaultLanguage(w.languageCode),re.providerId=m.providerId||"",(0,$.xb)(m.getCustomParameters())||(re.customParameters=JSON.stringify(m.getCustomParameters()));for(const[lt,Dt]of Object.entries(F||{}))re[lt]=Dt}if(m instanceof Bo){const lt=m.getScopes().filter(Dt=>""!==Dt);lt.length>0&&(re.scopes=lt.join(","))}w.tenantId&&(re.tid=w.tenantId);const ke=re;for(const lt of Object.keys(ke))void 0===ke[lt]&&delete ke[lt];return`${function xp({config:w}){return w.emulator?cn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(ke).slice(1)}`}const Pl="webStorageSupport",Oh=class Su{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ks,this._completeRedirectFn=ft,this._overrideRedirectResult=Qn}_openPopup(m,_,I,M){var F=this;return(0,l.Z)(function*(){var re;Ce(null===(re=F.eventManagers[m._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const ke=Nl(m,_,I,He(),M);return function kc(w,m,_,I=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),re=Math.max((window.screen.availWidth-I)/2,0).toString();let ke="";const lt=Object.assign(Object.assign({},Tu),{width:I.toString(),height:M.toString(),top:F,left:re}),Dt=(0,$.z$)().toLowerCase();_&&(ke=se(Dt)?"_blank":_),R(Dt)&&(m=m||"http://localhost",lt.scrollbars="yes");const Kt=Object.entries(lt).reduce((ji,[Kr,Rc])=>`${ji}${Kr}=${Rc},`,"");if(function dn(w=(0,$.z$)()){var m;return Ue(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Dt)&&"_self"!==ke)return function Io(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",ke),new Du(null);const fn=window.open(m||"",ke,Kt);oe(fn,w,"popup-blocked");try{fn.focus()}catch{}return new Du(fn)}(m,ke,Xo())})()}_openRedirect(m,_,I,M){var F=this;return(0,l.Z)(function*(){return yield F._originValidation(m),function Ic(w){Gn().location.href=w}(Nl(m,_,I,He(),M)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:F}=this.eventManagers[_];return M?Promise.resolve(M):(Ce(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,l.Z)(function*(){const I=yield function Sp(w){return xc.apply(this,arguments)}(m),M=new gi(m);return I.register("authEvent",F=>(oe(F?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=I,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Pl,{type:Pl},M=>{var F;const re=null===(F=M?.[0])||void 0===F?void 0:F[Pl];void 0!==re&&_(!!re),tt(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function vo(w){return nr.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return hn()||B()||Ue()}};class Rh extends class Oc{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return de("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Rh(m)}_finalizeEnroll(m,_,I){return function El(w,m){return Ht(w,"POST","/v2/accounts/mfaEnrollment:finalize",zt(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function oa(w,m){return Ht(w,"POST","/v2/accounts/mfaSignIn:finalize",zt(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fs=(()=>{class w{constructor(){}static assertion(_){return Rh._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Eo="@firebase/auth",Nh="0.20.11";class a_{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,l.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{var M;m((null===(M=I)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function L0(w){(0,N._registerComponent)(new ye.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:F,authDomain:re}=I.options;return((ke,lt)=>{oe(F&&!F.includes(":"),"invalid-api-key",{appName:ke.name}),oe(!re?.includes(":"),"argument-error",{appName:ke.name});const Dt={apiKey:F,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(w)},Kt=new Po(ke,lt,Dt);return function ue(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(te);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}(Kt,_),Kt})(I,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",m=>{const _=Et(m.getProvider("auth").getImmediate());return new a_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Eo,Nh,function F0(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(Eo,Nh,"esm2017")}("Browser")},2090:(yt,Oe,U)=>{U.d(Oe,{$s:()=>ot,BH:()=>jt,DV:()=>Bn,Dv:()=>Li,G6:()=>De,GJ:()=>Br,L:()=>fe,LL:()=>tn,Pz:()=>sn,Sg:()=>Qe,UG:()=>Se,UI:()=>Hr,US:()=>ye,Wj:()=>xt,Wl:()=>wi,Yr:()=>Re,ZB:()=>z,ZR:()=>In,aH:()=>vt,b$:()=>_e,cI:()=>Ht,dS:()=>Ft,eu:()=>oe,g5:()=>N,gK:()=>Zn,gQ:()=>wn,h$:()=>me,hl:()=>Ze,hu:()=>$,jU:()=>at,lb:()=>xi,m9:()=>en,ne:()=>En,p$:()=>Z,pd:()=>Xs,r3:()=>Fi,ru:()=>Ee,tV:()=>we,uI:()=>Pe,ug:()=>Zi,vZ:()=>nt,w1:()=>tt,w9:()=>Ur,xO:()=>vn,xb:()=>Ir,z$:()=>Ge,zI:()=>de,zd:()=>hi});const $=function(q,W){if(!q)throw N(W)},N=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},ae=function(q){const W=[];let Y=0;for(let j=0;j<q.length;j++){let R=q.charCodeAt(j);R<128?W[Y++]=R:R<2048?(W[Y++]=R>>6|192,W[Y++]=63&R|128):55296==(64512&R)&&j+1<q.length&&56320==(64512&q.charCodeAt(j+1))?(R=65536+((1023&R)<<10)+(1023&q.charCodeAt(++j)),W[Y++]=R>>18|240,W[Y++]=R>>12&63|128,W[Y++]=R>>6&63|128,W[Y++]=63&R|128):(W[Y++]=R>>12|224,W[Y++]=R>>6&63|128,W[Y++]=63&R|128)}return W},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let R=0;R<q.length;R+=3){const B=q[R],se=R+1<q.length,Fe=se?q[R+1]:0,ut=R+2<q.length,ct=ut?q[R+2]:0;let Rt=(15&Fe)<<2|ct>>6,dn=63&ct;ut||(dn=64,se||(Rt=64)),j.push(Y[B>>2],Y[(3&B)<<4|Fe>>4],Y[Rt],Y[dn])}return j.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(ae(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let Y=0,j=0;for(;Y<q.length;){const R=q[Y++];if(R<128)W[j++]=String.fromCharCode(R);else if(R>191&&R<224){const B=q[Y++];W[j++]=String.fromCharCode((31&R)<<6|63&B)}else if(R>239&&R<365){const ut=((7&R)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;W[j++]=String.fromCharCode(55296+(ut>>10)),W[j++]=String.fromCharCode(56320+(1023&ut))}else{const B=q[Y++],se=q[Y++];W[j++]=String.fromCharCode((15&R)<<12|(63&B)<<6|63&se)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const Y=W?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let R=0;R<q.length;){const B=Y[q.charAt(R++)],Fe=R<q.length?Y[q.charAt(R)]:0;++R;const ct=R<q.length?Y[q.charAt(R)]:64;++R;const Ue=R<q.length?Y[q.charAt(R)]:64;if(++R,null==B||null==Fe||null==ct||null==Ue)throw Error();j.push(B<<2|Fe>>4),64!==ct&&(j.push(Fe<<4&240|ct>>2),64!==Ue&&j.push(ct<<6&192|Ue))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},me=function(q){const W=ae(q);return ye.encodeByteArray(W,!0)},fe=function(q){return me(q).replace(/\./g,"")},we=function(q){try{return ye.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function Z(q){return z(void 0,q)}function z(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const Y in W)!W.hasOwnProperty(Y)||!X(Y)||(q[Y]=z(q[Y],W[Y]));return q}function X(q){return"__proto__"!==q}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Se(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function at(){return"object"==typeof self&&self.self===self}function Ee(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function _e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function tt(){const q=Ge();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Re(){return!1}function De(){return!Se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function oe(){return new Promise((q,W)=>{try{let Y=!0;const j="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(j);R.onsuccess=()=>{R.result.close(),Y||self.indexedDB.deleteDatabase(j),q(!0)},R.onupgradeneeded=()=>{Y=!1},R.onerror=()=>{var B;W((null===(B=R.error)||void 0===B?void 0:B.message)||"")}}catch(Y){W(Y)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ue=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&we(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},vt=()=>{var q;return null===(q=ue())||void 0===q?void 0:q.config},sn=q=>{var W;return null===(W=ue())||void 0===W?void 0:W[`_${q}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Y)=>{this.resolve=W,this.reject=Y})}wrapCallback(W){return(Y,j)=>{Y?this.reject(Y):this.resolve(j),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Y):W(Y,j))}}}function Qe(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=W||"demo-project",R=q.iat||0,B=q.sub||q.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:R,exp:R+3600,auth_time:R,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},q);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(se)),""].join(".")}class In extends Error{constructor(W,Y,j){super(Y),this.code=W,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}}class tn{constructor(W,Y,j){this.service=W,this.serviceName=Y,this.errors=j}create(W,...Y){const j=Y[0]||{},R=`${this.service}/${W}`,B=this.errors[W],se=B?function nn(q,W){return q.replace(zt,(Y,j)=>{const R=W[j];return null!=R?String(R):`<${j}?>`})}(B,j):"Error";return new In(R,`${this.serviceName}: ${se} (${R}).`,j)}}const zt=/\{\$([^}]+)}/g;function Ht(q){return JSON.parse(q)}function wi(q){return JSON.stringify(q)}const Vr=function(q){let W={},Y={},j={},R="";try{const B=q.split(".");W=Ht(we(B[0])||""),Y=Ht(we(B[1])||""),R=B[2],j=Y.d||{},delete Y.d}catch{}return{header:W,claims:Y,data:j,signature:R}},Ur=function(q){const Y=Vr(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Br=function(q){const W=Vr(q).claims;return"object"==typeof W&&!0===W.admin};function Fi(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function Bn(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function Ir(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function Hr(q,W,Y){const j={};for(const R in q)Object.prototype.hasOwnProperty.call(q,R)&&(j[R]=W.call(Y,q[R],R,q));return j}function nt(q,W){if(q===W)return!0;const Y=Object.keys(q),j=Object.keys(W);for(const R of Y){if(!j.includes(R))return!1;const B=q[R],se=W[R];if(ti(B)&&ti(se)){if(!nt(B,se))return!1}else if(B!==se)return!1}for(const R of j)if(!Y.includes(R))return!1;return!0}function ti(q){return null!==q&&"object"==typeof q}function vn(q){const W=[];for(const[Y,j]of Object.entries(q))Array.isArray(j)?j.forEach(R=>{W.push(encodeURIComponent(Y)+"="+encodeURIComponent(R))}):W.push(encodeURIComponent(Y)+"="+encodeURIComponent(j));return W.length?"&"+W.join("&"):""}function hi(q){const W={};return q.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[R,B]=j.split("=");W[decodeURIComponent(R)]=decodeURIComponent(B)}}),W}function Xs(q){const W=q.indexOf("?");if(!W)return"";const Y=q.indexOf("#",W);return q.substring(W,Y>0?Y:void 0)}class wn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Y){Y||(Y=0);const j=this.W_;if("string"==typeof W)for(let Ue=0;Ue<16;Ue++)j[Ue]=W.charCodeAt(Y)<<24|W.charCodeAt(Y+1)<<16|W.charCodeAt(Y+2)<<8|W.charCodeAt(Y+3),Y+=4;else for(let Ue=0;Ue<16;Ue++)j[Ue]=W[Y]<<24|W[Y+1]<<16|W[Y+2]<<8|W[Y+3],Y+=4;for(let Ue=16;Ue<80;Ue++){const Rt=j[Ue-3]^j[Ue-8]^j[Ue-14]^j[Ue-16];j[Ue]=4294967295&(Rt<<1|Rt>>>31)}let ct,xe,R=this.chain_[0],B=this.chain_[1],se=this.chain_[2],Fe=this.chain_[3],ut=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(ct=Fe^B&(se^Fe),xe=1518500249):(ct=B^se^Fe,xe=1859775393):Ue<60?(ct=B&se|Fe&(B|se),xe=2400959708):(ct=B^se^Fe,xe=3395469782);const Rt=(R<<5|R>>>27)+ct+ut+xe+j[Ue]&4294967295;ut=Fe,Fe=se,se=4294967295&(B<<30|B>>>2),B=R,R=Rt}this.chain_[0]=this.chain_[0]+R&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Fe&4294967295,this.chain_[4]=this.chain_[4]+ut&4294967295}update(W,Y){if(null==W)return;void 0===Y&&(Y=W.length);const j=Y-this.blockSize;let R=0;const B=this.buf_;let se=this.inbuf_;for(;R<Y;){if(0===se)for(;R<=j;)this.compress_(W,R),R+=this.blockSize;if("string"==typeof W){for(;R<Y;)if(B[se]=W.charCodeAt(R),++se,++R,se===this.blockSize){this.compress_(B),se=0;break}}else for(;R<Y;)if(B[se]=W[R],++se,++R,se===this.blockSize){this.compress_(B),se=0;break}}this.inbuf_=se,this.total_+=Y}digest(){const W=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let R=this.blockSize-1;R>=56;R--)this.buf_[R]=255&Y,Y/=256;this.compress_(this.buf_);let j=0;for(let R=0;R<5;R++)for(let B=24;B>=0;B-=8)W[j]=this.chain_[R]>>B&255,++j;return W}}function En(q,W){const Y=new mn(q,W);return Y.subscribe.bind(Y)}class mn{constructor(W,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{W(this)}).catch(j=>{this.error(j)})}next(W){this.forEachObserver(Y=>{Y.next(W)})}error(W){this.forEachObserver(Y=>{Y.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Y,j){let R;if(void 0===W&&void 0===Y&&void 0===j)throw new Error("Missing Observer.");R=function Ct(q,W){if("object"!=typeof q||null===q)return!1;for(const Y of W)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Y,complete:j},void 0===R.next&&(R.next=Ot),void 0===R.error&&(R.error=Ot),void 0===R.complete&&(R.complete=Ot);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),B}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,W)}sendOne(W,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Y(this.observers[W])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ot(){}const Li=function(q,W,Y,j){let R;if(j<W?R="at least "+W:j>Y&&(R=0===Y?"none":"no more than "+Y),R)throw new Error(q+" failed: Was called with "+j+(1===j?" argument.":" arguments.")+" Expects "+R+".")};function Zn(q,W){return`${q} failed: ${W} argument `}function xt(q,W,Y,j){if((!j||Y)&&"function"!=typeof Y)throw new Error(Zn(q,W)+"must be a valid function.")}function xi(q,W,Y,j){if((!j||Y)&&("object"!=typeof Y||null===Y))throw new Error(Zn(q,W)+"must be a valid context object.")}const Ft=function(q){const W=[];let Y=0;for(let j=0;j<q.length;j++){let R=q.charCodeAt(j);if(R>=55296&&R<=56319){const B=R-55296;j++,$(j<q.length,"Surrogate pair missing trail surrogate."),R=65536+(B<<10)+(q.charCodeAt(j)-56320)}R<128?W[Y++]=R:R<2048?(W[Y++]=R>>6|192,W[Y++]=63&R|128):R<65536?(W[Y++]=R>>12|224,W[Y++]=R>>6&63|128,W[Y++]=63&R|128):(W[Y++]=R>>18|240,W[Y++]=R>>12&63|128,W[Y++]=R>>6&63|128,W[Y++]=63&R|128)}return W},Zi=function(q){let W=0;for(let Y=0;Y<q.length;Y++){const j=q.charCodeAt(Y);j<128?W++:j<2048?W+=2:j>=55296&&j<=56319?(W+=4,Y++):W+=3}return W};function ot(q,W=1e3,Y=2){const j=W*Math.pow(Y,q),R=Math.round(.5*j*(Math.random()-.5)*2);return Math.min(144e5,j+R)}function en(q){return q&&q._delegate?q._delegate:q}},5120:(yt,Oe,U)=>{var l=U(4650);let $=null;function N(){return $}const me=new l.OlP("DocumentToken");let fe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function we(){return(0,l.LFG)(z)}()},providedIn:"platform"}),n})();const Z=new l.OlP("Location Initialized");let z=(()=>{class n extends fe{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){X()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){X()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ge(){return new z((0,l.LFG)(me))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Pe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Se(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(it)},providedIn:"root"}),n})();const _e=new l.OlP("appBaseHref");let it=(()=>{class n extends Ee{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Pe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+at(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+at(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+at(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fe),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tt=(()=>{class n extends Ee{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Pe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+at(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+at(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fe),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Se(Ze(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+at(i))}normalize(e){return n.stripTrailingSlash(function De(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ze(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=at,n.joinWithSlash=Pe,n.stripTrailingSlash=Se,n.\u0275fac=function(e){return new(e||n)(l.LFG(Ee))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Re(){return new Le((0,l.LFG)(Ee))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}let qt=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ro{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ar=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ro(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,c),so(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{so(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function so(n,t){n.context.$implicit=t.item}let ln=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new uh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ni("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ni("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class uh{constructor(){this.$implicit=null,this.ngIf=null}}function ni(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}let Qi=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),c=-1===r.indexOf("-")?void 0:l.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,r,c)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Vi=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=i.createEmbeddedView(r,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.TTD]}),n})(),Ui=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function jo(n){return"server"===n}let cc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new ch((0,l.LFG)(me),window)}),n})();class ch{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ii(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=br(this.window.history)||br(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function br(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs extends class gc extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){$||($=n)}(new xs)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function mc(){return Ms=Ms||document.querySelector("base"),Ms?Ms.getAttribute("href"):null}();return null==e?null:function as(n){xn=xn||document.createElement("a"),xn.setAttribute("href",n);const t=xn.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function iu(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let xn,Ms=null;const Mn=new l.OlP("TRANSITION_ID"),fu=[{provide:l.ip1,useFactory:function _c(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=N(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Mn,me,l.zs3],multi:!0}];let pu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const gu=new l.OlP("EventManagerPlugins");let mu=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(gu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Il{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=N().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Qo=(()=>{class n extends Yo{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(yc),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(yc))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function yc(n){N().remove(n)}const Jo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vc=/%COMP%/g;function bl(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?bl(n,r,e):(r=r.replace(vc,n),e.push(r))}return e}function Tl(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Dl=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ls(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Cc(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new yh(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=bl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(mu),l.LFG(Qo),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ls{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Jo[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Wa(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Wa(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Jo[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Jo[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Tl(i)):this.eventManager.addEventListener(t,e,Tl(i))}}function Wa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Cc extends ls{constructor(t,e,i,r){super(t),this.component=i;const s=bl(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function jn(n){return"_ngcontent-%COMP%".replace(vc,n)}(r+"-"+i.id),this.hostAttr=function El(n){return"_nghost-%COMP%".replace(vc,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class yh extends ls{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=bl(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let si=(()=>{class n extends Il{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const vh=["alt","control","meta","shift"],ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let za=(()=>{class n extends Il{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),c="code."),vh.forEach(y=>{const E=i.indexOf(y);E>-1&&(i.splice(E,1),c+=y+".")}),c+=s,0!=i.length||0===s.length)return null;const g={};return g.domEventName=r,g.fullKey=c,g}static matchEventFullKeyCode(e,i){let r=ks[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),vh.forEach(c=>{c!==r&&(0,vu[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qa=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Ec(){xs.makeCurrent()},multi:!0},{provide:me,useFactory:function wu(){return(0,l.RDi)(document),document},deps:[]}]),co=new l.OlP(""),Za=[{provide:l.rWj,useClass:class mh{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const h=function(g){c=c||g,s--,0==s&&i(c)};r.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?N().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],ea=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function us(){return new l.qLn},deps:[]},{provide:gu,useClass:si,multi:!0,deps:[me,l.R0b,l.Lbi]},{provide:gu,useClass:za,multi:!0,deps:[me]},{provide:Dl,useClass:Dl,deps:[mu,Qo,l.AFp]},{provide:l.FYo,useExisting:Dl},{provide:Yo,useExisting:Qo},{provide:Qo,useClass:Qo,deps:[me]},{provide:mu,useClass:mu,deps:[gu,l.R0b]},{provide:class Go{},useClass:pu,deps:[]},[]];let ta=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:Mn,useExisting:l.AFp},fu]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(co,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...ea,...Za],imports:[Ui,l.hGG]}),n})(),$r=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(me))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Ka(){return new $r((0,l.LFG)(me))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=U(8996),zr=U(7669);function ht(...n){const t=(0,zr.yG)(n);return(0,rn.D)(n,t)}var Hi=U(7579);class Dn extends Hi.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const fo=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var pi=U(9751);const{isArray:po}=Array,{getPrototypeOf:Dc,prototype:Sc,keys:Th}=Object;function go(n){if(1===n.length){const t=n[0];if(po(t))return{args:t,keys:null};if(function Eu(n){return n&&"object"==typeof n&&Dc(n)===Sc}(t)){const e=Th(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var mo=U(4671),dt=U(4004);const{isArray:Ya}=Array;function Ol(n){return(0,dt.U)(t=>function qr(n,t){return Ya(t)?n(...t):n(t)}(n,t))}function Qa(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var Nn=U(5403),Ja=U(9672);function Rl(...n){const t=(0,zr.yG)(n),e=(0,zr.jO)(n),{args:i,keys:r}=go(n);if(0===i.length)return(0,rn.D)([],t);const s=new pi.y(function Ac(n,t,e=mo.y){return i=>{Dh(t,()=>{const{length:r}=n,s=new Array(r);let c=r,h=r;for(let g=0;g<r;g++)Dh(t,()=>{const y=(0,rn.D)(n[g],t);let E=!1;y.subscribe((0,Nn.x)(i,D=>{s[g]=D,E||(E=!0,h--),h||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>Qa(r,c):mo.y));return e?s.pipe(Ol(e)):s}function Dh(n,t,e){n?(0,Ja.f)(e,n,t):t()}var ca=U(8189);function da(...n){return function Xa(){return(0,ca.J)(1)}()((0,rn.D)(n,(0,zr.yG)(n)))}var er=U(8421);function _o(n){return new pi.y(t=>{(0,er.Xf)(n()).subscribe(t)})}var bu=U(9635),Rs=U(576);function tr(n,t){const e=(0,Rs.m)(n)?n:()=>n,i=r=>r.error(e());return new pi.y(t?r=>t.schedule(i,0,r):i)}var ds=U(515),Ns=U(727),Qn=U(4482);function yo(){return(0,Qn.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Nn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class hs extends pi.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ns.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Nn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ns.w0.EMPTY)}return t}refCount(){return yo()(this)}}function $n(n,t){return(0,Qn.e)((e,i)=>{let r=null,s=0,c=!1;const h=()=>c&&!r&&i.complete();e.subscribe((0,Nn.x)(i,g=>{r?.unsubscribe();let y=0;const E=s++;(0,er.Xf)(n(g,E)).subscribe(r=(0,Nn.x)(i,D=>i.next(t?t(g,D,E,y++):D),()=>{r=null,h()}))},()=>{c=!0,h()}))})}function An(n){return n<=0?()=>ds.E:(0,Qn.e)((t,e)=>{let i=0;t.subscribe((0,Nn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function ha(...n){const t=(0,zr.yG)(n);return(0,Qn.e)((e,i)=>{(t?da(n,e,t):da(n,e)).subscribe(i)})}function T(n,t){return(0,Qn.e)((e,i)=>{let r=0;e.subscribe((0,Nn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var S=U(5577);function O(n){return(0,Qn.e)((t,e)=>{let i=!1;t.subscribe((0,Nn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function H(n=ee){return(0,Qn.e)((t,e)=>{let i=!1;t.subscribe((0,Nn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function ee(){return new fo}function le(n,t){const e=arguments.length>=2;return i=>i.pipe(n?T((r,s)=>n(r,s,i)):mo.y,An(1),e?O(t):H(()=>new fo))}function Me(n,t){return(0,Rs.m)(t)?(0,S.z)(n,t,1):(0,S.z)(n,1)}var Be=U(8505);function ft(n){return(0,Qn.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Nn.x)(e,void 0,void 0,c=>{s=(0,er.Xf)(n(c,ft(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Mt(n,t,e,i,r){return(s,c)=>{let h=e,g=t,y=0;s.subscribe((0,Nn.x)(c,E=>{const D=y++;g=h?n(g,E,D):(h=!0,E),i&&c.next(g)},r&&(()=>{h&&c.next(g),c.complete()})))}}function Nt(n,t){return(0,Qn.e)(Mt(n,t,arguments.length>=2,!0))}function It(n){return n<=0?()=>ds.E:(0,Qn.e)((t,e)=>{let i=[];t.subscribe((0,Nn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Wn(n,t){const e=arguments.length>=2;return i=>i.pipe(n?T((r,s)=>n(r,s,i)):mo.y,It(1),e?O(t):H(()=>new fo))}function Ps(n){return(0,Qn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Vt="primary",Dr=Symbol("RouteTitle");class fs{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Zr(n){return new fs(n)}function pa(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],h=n[s];if(c.startsWith(":"))r[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function nr(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!s_(n[r],t[r]))return!1;return!0}function s_(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function Tp(n){return Array.prototype.concat.apply([],n)}function Sh(n){return n.length>0?n[n.length-1]:null}function zn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function wo(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,rn.D)(Promise.resolve(n)):ht(n)}const P0={exact:function Sp(n,t,e){if(!Io(n.segments,t.segments)||!Co(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Sp(n.children[i],t.children[i],e))return!1;return!0},subset:Tu},xh={exact:function Mh(n,t){return nr(n,t)},subset:function xc(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>s_(n[e],t[e]))},ignored:()=>!0};function o_(n,t,e){return P0[e.paths](n.root,t.root,e.matrixParams)&&xh[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Tu(n,t,e){return Mc(n,t,t.segments,e)}function Mc(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Io(r,e)||t.hasChildren()||!Co(r,e,i))}if(n.segments.length===e.length){if(!Io(n.segments,e)||!Co(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Tu(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Io(n.segments,r)&&Co(n.segments,r,i)&&n.children[Vt])&&Mc(n.children[Vt],t,s,i)}}function Co(n,t,e){return t.every((i,r)=>xh[e](n[r].parameters,i.parameters))}class el{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zr(this.queryParams)),this._queryParamMap}toString(){return xp.serialize(this)}}class Jt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,zn(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pl(this)}}class Du{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Zr(this.parameters)),this._parameterMap}toString(){return a_(this)}}function Io(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let kh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new Nl},providedIn:"root"}),n})();class Nl{parse(t){const e=new m(t);return new el(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Su(t.root,!0)}`,i=function L0(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Oc(e)}=${Oc(r)}`).join("&"):`${Oc(e)}=${Oc(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Rh(n){return encodeURI(n)}(t.fragment)}`:""}`}}const xp=new Nl;function Pl(n){return n.segments.map(t=>a_(t)).join("/")}function Su(n,t){if(!n.hasChildren())return Pl(n);if(t){const e=n.children[Vt]?Su(n.children[Vt],!1):"",i=[];return zn(n.children,(r,s)=>{s!==Vt&&i.push(`${s}:${Su(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Ap(n,t){let e=[];return zn(n.children,(i,r)=>{r===Vt&&(e=e.concat(t(i,r)))}),zn(n.children,(i,r)=>{r!==Vt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Vt?[Su(n.children[Vt],!1)]:[`${r}:${Su(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${Pl(n)}/${e[0]}`:`${Pl(n)}/(${e.join("//")})`}}function Oh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oc(n){return Oh(n).replace(/%3B/gi,";")}function Fs(n){return Oh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Eo(n){return decodeURIComponent(n)}function Nh(n){return Eo(n.replace(/\+/g,"%20"))}function a_(n){return`${Fs(n.path)}${function F0(n){return Object.keys(n).map(t=>`;${Fs(t)}=${Fs(n[t])}`).join("")}(n.parameters)}`}const V0=/^[^\/()?;=#]+/;function Ph(n){const t=n.match(V0);return t?t[0]:""}const Fh=/^[^=?&#]+/,U0=/^[^&#]+/;class m{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Vt]=new Jt(t,e)),i}parseSegment(){const t=Ph(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new Du(Eo(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ph(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Ph(this.remaining);r&&(i=r,this.capture(i))}t[Eo(e)]=Eo(i)}parseQueryParam(t){const e=function l_(n){const t=n.match(Fh);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function w(n){const t=n.match(U0);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=Nh(e),s=Nh(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ph(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Vt);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[Vt]:new Jt([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function _(n){return n.segments.length>0?new Jt([],{[Vt]:n}):n}function I(n){const t={};for(const i of Object.keys(n.children)){const s=I(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function M(n){if(1===n.numberOfChildren&&n.children[Vt]){const t=n.children[Vt];return new Jt(n.segments.concat(t.segments),t.children)}return n}(new Jt(n.segments,t))}function F(n){return n instanceof el}function Kt(n,t,e,i,r){if(0===e.length)return Kr(t.root,t.root,t.root,i,r);const s=function Pc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Nc(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return zn(s.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?e=!0:".."===h?t++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new Nc(e,t,i)}(e);return s.toRoot()?Kr(t.root,t.root,new Jt([],{}),i,r):function c(g){const y=function Lh(n,t,e,i){if(n.isAbsolute)return new tl(t.root,!0,0);if(-1===i)return new tl(e,e===t.root,0);return function Fc(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new tl(i,!1,r-s)}(e,i+(fn(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,g),E=y.processChildren?ga(y.segmentGroup,y.index,s.commands):xu(y.segmentGroup,y.index,s.commands);return Kr(t.root,y.segmentGroup,E,i,r)}(n.snapshot?._lastPathIndex)}function fn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ji(n){return"object"==typeof n&&null!=n&&n.outlets}function Kr(n,t,e,i,r){let c,s={};i&&zn(i,(g,y)=>{s[y]=Array.isArray(g)?g.map(E=>`${E}`):`${g}`}),c=n===t?e:Rc(n,t,e);const h=_(I(c));return new el(h,s,r)}function Rc(n,t,e){const i={};return zn(n.children,(r,s)=>{i[s]=r===t?e:Rc(r,t,e)}),new Jt(n.segments,i)}class Nc{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&fn(i[0]))throw new l.vHH(4003,!1);const r=i.find(ji);if(r&&r!==Sh(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tl{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function xu(n,t,e){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return ga(n,t,e);const i=function u_(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],h=e[i];if(ji(h))break;const g=`${h}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!Op(g,y,c))return s;i+=2}else{if(!Op(g,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Jt(n.segments.slice(0,i.pathIndex),{});return s.children[Vt]=new Jt(n.segments.slice(i.pathIndex),n.children),ga(s,0,r)}return i.match&&0===r.length?new Jt(n.segments,{}):i.match&&!n.hasChildren()?Pn(n,t,e):i.match?ga(n,0,r):Pn(n,t,e)}function ga(n,t,e){if(0===e.length)return new Jt(n.segments,{});{const i=function Au(n){return ji(n[0])?n[0].outlets:{[Vt]:n}}(e),r={};return zn(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=xu(n.children[c],t,s))}),zn(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new Jt(n.segments,r)}}function Pn(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(ji(s)){const g=kp(s.outlets);return new Jt(i,g)}if(0===r&&fn(e[0])){i.push(new Du(n.segments[t].path,B0(e[0]))),r++;continue}const c=ji(s)?s.outlets[Vt]:`${s}`,h=r<e.length-1?e[r+1]:null;c&&h&&fn(h)?(i.push(new Du(c,B0(h))),r+=2):(i.push(new Du(c,{})),r++)}return new Jt(i,{})}function kp(n){const t={};return zn(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=Pn(new Jt([],{}),0,e))}),t}function B0(n){const t={};return zn(n,(e,i)=>t[i]=`${e}`),t}function Op(n,t,e){return n==e.path&&nr(t,e.parameters)}class ma{constructor(t,e){this.id=t,this.url=e}}class c_ extends ma{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mu extends ma{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rp extends ma{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class H0 extends ma{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eS extends ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FR extends ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LR extends ma{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vh extends ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d_ extends ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j0{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class G0{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $0{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tS{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W0{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z0{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Np{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class q0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Uh(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=Uh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Pp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Pp(t,this._root).map(e=>e.value)}}function Uh(n,t){if(n===t.value)return t;for(const e of t.children){const i=Uh(n,e);if(i)return i}return null}function Pp(n,t){if(n===t.value)return[t];for(const e of t.children){const i=Pp(n,e);if(i.length)return i.unshift(t),i}return[]}class _a{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ls(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Z0 extends q0{constructor(t,e){super(t),this.snapshot=e,Bh(this,t)}toString(){return this.snapshot.toString()}}function Fp(n,t){const e=function Lp(n,t){const c=new ya([],{},{},"",{},Vt,t,null,n.root,-1,{});return new h_("",new _a(c,[]))}(n,t),i=new Dn([new Du("",{})]),r=new Dn({}),s=new Dn({}),c=new Dn({}),h=new Dn(""),g=new Fl(i,r,c,h,s,Vt,t,e.root);return g.snapshot=e.root,new Z0(new _a(g,[]),e)}class Fl{constructor(t,e,i,r,s,c,h,g){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,dt.U)(y=>y[Dr]))??ht(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(t=>Zr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(t=>Zr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vp(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Up(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class ya{constructor(t,e,i,r,s,c,h,g,y,E,D,x){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.[Dr],this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=E,this._correctedLastPathIndex=x??E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class h_ extends q0{constructor(t,e){super(e),this.url=t,Bh(this,e)}toString(){return K0(this._root)}}function Bh(n,t){t.value._routerState=n,t.children.forEach(e=>Bh(n,e))}function K0(n){const t=n.children.length>0?` { ${n.children.map(K0).join(", ")} } `:"";return`${n.value}${t}`}function f_(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,nr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),nr(t.params,e.params)||n.params.next(e.params),function vo(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!nr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),nr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bp(n,t){const e=nr(n.params,t.params)&&function kc(n,t){return Io(n,t)&&n.every((e,i)=>nr(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Bp(n.parent,t.parent))}function Hh(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function nS(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Hh(n,i,r);return Hh(n,i)})}(n,t,e);return new _a(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(h=>Hh(n,h)),c}}const i=function iS(n){return new Fl(new Dn(n.url),new Dn(n.params),new Dn(n.queryParams),new Dn(n.fragment),new Dn(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Hh(n,s));return new _a(i,r)}}const p_="ngNavigationCancelingError";function Hp(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=F(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Y0(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function Y0(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[p_]=!0,i.cancellationCode=t,e&&(i.url=e),i}function g_(n){return Q0(n)&&F(n.url)}function Q0(n){return n&&n[p_]}class J0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jp,this.attachRef=null}}let jp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new J0,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gp=!1;let ku=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||Vt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Gp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Gp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Gp);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,Gp);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new rS(e,h,r.injector);if(i&&function Vc(n){return!!n.resolveComponentFactory}(i)){const y=i.resolveComponentFactory(c);this.activated=r.createComponent(y,r.length,g)}else this.activated=r.createComponent(c,{index:r.length,injector:g,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(jp),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class rS{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Fl?this.route:t===jp?this.childContexts:this.parent.get(t,e)}}let Ou=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[ku],encapsulation:2}),n})();function X0(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function y_(n){const t=n.children&&n.children.map(y_),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Vt&&(e.component=Ou),e}function Vs(n){return n.outlet||Vt}function $p(n,t){const e=n.filter(i=>Vs(i)===t);return e.push(...n.filter(i=>Vs(i)!==t)),e}function Wp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class v_{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),f_(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Ls(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),zn(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ls(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ls(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Ls(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new z0(s.value.snapshot))}),t.children.length&&this.forwardEvent(new tS(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(f_(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),f_(h.route.value),this.activateChildRoutes(t,null,c.children)}else{const h=Wp(r.snapshot),g=h?.get(l._Vd)??null;c.attachRef=null,c.route=r,c.resolver=g,c.injector=h,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class oS{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class w_{constructor(t,e){this.component=t,this.route=e}}function jR(n,t,e){const i=n._root;return Gh(i,t?t._root:null,e,[i.value])}function jh(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,l.Z0I)(n)?t.get(n):n:i}function Gh(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ls(t);return n.children.forEach(c=>{(function nC(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const g=function C_(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Io(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,t.url)||!nr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bp(n,t)||!nr(n.queryParams,t.queryParams);default:return!Bp(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new oS(i)):(s.data=c.data,s._resolvedData=c._resolvedData),Gh(n,t,s.component?h?h.children:null:e,i,r),g&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new w_(h.outlet.component,c))}else c&&Uc(t,h,r),r.canActivateChecks.push(new oS(i)),Gh(n,null,s.component?h?h.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),zn(s,(c,h)=>Uc(c,e.getContext(h),r)),r}function Uc(n,t,e){const i=Ls(n),r=n.value;zn(i,(s,c)=>{Uc(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new w_(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Bc(n){return"function"==typeof n}function zp(n){return n instanceof fo||"EmptyError"===n?.name}const qp=Symbol("INITIAL_VALUE");function Hc(){return $n(n=>Rl(n.map(t=>t.pipe(An(1),ha(qp)))).pipe((0,dt.U)(t=>{for(const e of t)if(!0!==e){if(e===qp)return qp;if(!1===e||e instanceof el)return e}return!0}),T(t=>t!==qp),An(1)))}function fr(n){return(0,bu.z)((0,Be.b)(t=>{if(F(t))throw Hp(0,t)}),(0,dt.U)(t=>!0===t))}const Zp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kp(n,t,e,i,r){const s=Gi(n,t,e);return s.matched?function T_(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ht(r.map(c=>{const h=jh(c,n);return wo(function lS(n){return n&&Bc(n.canMatch)}(h)?h.canMatch(t,e):n.runInContext(()=>h(t,e)))})).pipe(Hc(),fr()):ht(!0)}(i=X0(t,i),t,e).pipe((0,dt.U)(c=>!0===c?s:{...Zp})):ht(s)}function Gi(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...Zp}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||pa)(e,n,t);if(!r)return{...Zp};const s={};zn(r.posParams,(h,g)=>{s[g]=h.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function Ll(n,t,e,i,r="corrected"){if(e.length>0&&function yS(n,t,e){return e.some(i=>Yp(n,t,i)&&Vs(i)!==Vt)}(n,e,i)){const c=new Jt(t,function _S(n,t,e,i){const r={};r[Vt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Vs(s)!==Vt){const c=new Jt([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Vs(s)]=c}return r}(n,t,i,new Jt(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function oC(n,t,e){return e.some(i=>Yp(n,t,i))}(n,e,i)){const c=new Jt(n.segments,function sC(n,t,e,i,r,s){const c={};for(const h of i)if(Yp(n,e,h)&&!r[Vs(h)]){const g=new Jt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[Vs(h)]=g}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new Jt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Yp(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function D_(n,t,e,i){return!!(Vs(n)===i||i!==Vt&&Yp(t,e,n))&&("**"===n.path||Gi(t,n,e).matched)}function aC(n,t,e){return 0===t.length&&!n.children[e]}const Wh=!1;class Qp{constructor(t){this.segmentGroup=t||null}}class lC{constructor(t){this.urlTree=t}}function zh(n){return tr(new Qp(n))}function uC(n){return tr(new lC(n))}class wS{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=Ll(this.urlTree.root,[],[],this.config).segmentGroup,e=new Jt(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Vt).pipe((0,dt.U)(s=>this.createUrlTree(I(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ft(s=>{if(s instanceof lC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Qp?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Vt).pipe((0,dt.U)(r=>this.createUrlTree(I(r),t.queryParams,t.fragment))).pipe(ft(r=>{throw r instanceof Qp?this.noMatchError(r):r}))}noMatchError(t){return new l.vHH(4002,Wh)}createUrlTree(t,e,i){const r=_(t);return new el(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,dt.U)(s=>new Jt([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,rn.D)(r).pipe(Me(s=>{const c=i.children[s],h=$p(e,s);return this.expandSegmentGroup(t,h,c,s).pipe((0,dt.U)(g=>({segment:g,outlet:s})))}),Nt((s,c)=>(s[c.outlet]=c.segment,s),{}),Wn())}expandSegment(t,e,i,r,s,c){return(0,rn.D)(i).pipe(Me(h=>this.expandSegmentAgainstRoute(t,e,i,h,r,s,c).pipe(ft(y=>{if(y instanceof Qp)return ht(null);throw y}))),le(h=>!!h),ft((h,g)=>{if(zp(h))return aC(e,r,s)?ht(new Jt([],{})):zh(e);throw h}))}expandSegmentAgainstRoute(t,e,i,r,s,c,h){return D_(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):zh(e):zh(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?uC(s):this.lineralizeSegments(i,s).pipe((0,S.z)(c=>{const h=new Jt(c,{});return this.expandSegment(t,h,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:E}=Gi(e,r,s);if(!h)return zh(e);const D=this.applyRedirectCommands(g,r.redirectTo,E);return r.redirectTo.startsWith("/")?uC(D):this.lineralizeSegments(r,D).pipe((0,S.z)(x=>this.expandSegment(t,e,i,x.concat(y),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=X0(i,t),i.loadChildren?(i._loadedRoutes?ht({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,dt.U)(h=>(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,new Jt(r,{})))):ht(new Jt(r,{}))):Kp(e,i,r,t).pipe($n(({matched:c,consumedSegments:h,remainingSegments:g})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,S.z)(E=>{const D=E.injector??t,x=E.routes,{segmentGroup:L,slicedSegments:G}=Ll(e,h,g,x),ie=new Jt(L.segments,L.children);if(0===G.length&&ie.hasChildren())return this.expandChildren(D,x,ie).pipe((0,dt.U)(qe=>new Jt(h,qe)));if(0===x.length&&0===G.length)return ht(new Jt(h,{}));const ne=Vs(i)===s;return this.expandSegment(D,ie,x,G,ne?Vt:s,!0).pipe((0,dt.U)(Ke=>new Jt(h.concat(Ke.segments),Ke.children)))})):zh(e)))}getChildConfig(t,e,i){return e.children?ht({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ht({routes:e._loadedRoutes,injector:e._loadedInjector}):function mS(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ht(!0):ht(r.map(c=>{const h=jh(c,n);return wo(function I_(n){return n&&Bc(n.canLoad)}(h)?h.canLoad(t,e):n.runInContext(()=>h(t,e)))})).pipe(Hc(),fr())}(t,e,i).pipe((0,S.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Be.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function jc(n){return tr(Y0(Wh,3))}())):ht({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ht(i);if(r.numberOfChildren>1||!r.children[Vt])return tr(new l.vHH(4e3,Wh));r=r.children[Vt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new el(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return zn(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=e[h]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return zn(e.children,(h,g)=>{c[g]=this.createSegmentGroup(t,h,i,r)}),new Jt(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,Wh);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class WR{}class va{constructor(t,e,i,r,s,c,h,g){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=g}recognize(){const t=Ll(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Vt).pipe((0,dt.U)(e=>{if(null===e)return null;const i=new ya([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new _a(i,e),s=new h_(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=Vp(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,rn.D)(Object.keys(i.children)).pipe(Me(r=>{const s=i.children[r],c=$p(e,r);return this.processSegmentGroup(t,c,s,r)}),Nt((r,s)=>r&&s?(r.push(...s),r):null),function gi(n,t=!1){return(0,Qn.e)((e,i)=>{let r=0;e.subscribe((0,Nn.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),O(null),Wn(),(0,dt.U)(r=>{if(null===r)return null;const s=M_(r);return function A_(n){n.sort((t,e)=>t.value.outlet===Vt?-1:e.value.outlet===Vt?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,rn.D)(e).pipe(Me(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),le(c=>!!c),ft(c=>{if(zp(c))return aC(i,r,s)?ht([]):ht(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!D_(e,i,r,s))return ht(null);let c;if("**"===e.path){const h=r.length>0?Sh(r).parameters:{},g=dC(i)+r.length;c=ht({snapshot:new ya(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jp(e),Vs(e),e.component??e._loadedComponent??null,e,Gc(i),g,Xp(e),g),consumedSegments:[],remainingSegments:[]})}else c=Kp(i,e,r,t).pipe((0,dt.U)(({matched:h,consumedSegments:g,remainingSegments:y,parameters:E})=>{if(!h)return null;const D=dC(i)+g.length;return{snapshot:new ya(g,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jp(e),Vs(e),e.component??e._loadedComponent??null,e,Gc(i),D,Xp(e),D),consumedSegments:g,remainingSegments:y}}));return c.pipe($n(h=>{if(null===h)return ht(null);const{snapshot:g,consumedSegments:y,remainingSegments:E}=h;t=e._injector??t;const D=e._loadedInjector??t,x=function x_(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:L,slicedSegments:G}=Ll(i,y,E,x.filter(ne=>void 0===ne.redirectTo),this.relativeLinkResolution);if(0===G.length&&L.hasChildren())return this.processChildren(D,x,L).pipe((0,dt.U)(ne=>null===ne?null:[new _a(g,ne)]));if(0===x.length&&0===G.length)return ht([new _a(g,[])]);const ie=Vs(e)===s;return this.processSegment(D,x,L,G,ie?Vt:s).pipe((0,dt.U)(ne=>null===ne?null:[new _a(g,ne)]))}))}}function IS(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function M_(n){const t=[],e=new Set;for(const i of n){if(!IS(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=M_(i.children);t.push(new _a(i.value,r))}return t.filter(i=>!e.has(i))}function Gc(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function dC(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function Jp(n){return n.data||{}}function Xp(n){return n.resolve||{}}function eg(n){return"string"==typeof n.title||null===n.title}function O_(n){return $n(t=>{const e=n(t);return e?(0,rn.D)(e).pipe((0,dt.U)(()=>t)):ht(t)})}let gC=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Vt);return i}getResolvedTitleForRoute(e){return e.data[Dr]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(mC)},providedIn:"root"}),n})(),mC=(()=>{class n extends gC{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($r))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class TS{}class _C extends class DS{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const qh=new l.OlP("",{providedIn:"root",factory:()=>({})}),N_=new l.OlP("ROUTES");let P_=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ht(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=wo(e.loadComponent()).pipe((0,Be.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Ps(()=>{this.componentLoaders.delete(e)})),r=new hs(i,()=>new Hi.x).pipe(yo());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ht({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,dt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let g,y,E=!1;Array.isArray(h)?y=h:(g=h.create(e).injector,y=Tp(g.get(N_,[],l.XFs.Self|l.XFs.Optional)));return{routes:y.map(y_),injector:g}}),Ps(()=>{this.childrenLoaders.delete(i)})),c=new hs(s,()=>new Hi.x).pipe(yo());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return wo(e()).pipe((0,S.z)(i=>i instanceof l.YKP||Array.isArray(i)?ht(i):(0,rn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yC{}class vC{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function wC(n){throw n}function CC(n,t,e){return t.parse("/")}const SS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function IC(){const n=(0,l.f3M)(kh),t=(0,l.f3M)(jp),e=(0,l.f3M)(Le),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),s=(0,l.f3M)(N_,{optional:!0})??[],c=(0,l.f3M)(qh,{optional:!0})??{},h=(0,l.f3M)(mC),g=(0,l.f3M)(gC,{optional:!0}),y=(0,l.f3M)(yC,{optional:!0}),E=(0,l.f3M)(TS,{optional:!0}),D=new Ei(null,n,t,e,i,r,Tp(s));return y&&(D.urlHandlingStrategy=y),E&&(D.routeReuseStrategy=E),D.titleStrategy=g??h,function ng(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,D),D}let Ei=(()=>{class n{constructor(e,i,r,s,c,h,g){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Hi.x,this.errorHandler=wC,this.malformedUriErrorHandler=CC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ht(void 0),this.urlHandlingStrategy=new vC,this.routeReuseStrategy=new _C,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(P_),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new G0(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new j0(x)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const D=c.get(l.R0b);this.isNgZoneEnabled=D instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Dp(){return new el(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Fp(this.currentUrlTree,this.rootComponentType),this.transitions=new Dn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(T(r=>0!==r.id),(0,dt.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),$n(r=>{let s=!1,c=!1;return ht(r).pipe((0,Be.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$n(h=>{const g=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return F_(h.source)&&(this.browserUrlTree=h.extractedUrl),ht(h).pipe($n(D=>{const x=this.transitions.getValue();return i.next(new c_(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?ds.E:Promise.resolve(D)}),function CS(n,t,e,i){return $n(r=>function nl(n,t,e,i,r){return new wS(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,dt.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Be.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},r.urlAfterRedirects=D.urlAfterRedirects}),function fC(n,t,e,i,r,s){return(0,S.z)(c=>function zR(n,t,e,i,r,s,c="emptyOnly",h="legacy"){return new va(n,t,e,i,r,c,h,s).recognize().pipe($n(g=>null===g?function cC(n){return new pi.y(t=>t.error(n))}(new WR):ht(g)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,dt.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Be.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new eS(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:L,source:G,restoredState:ie,extras:ne}=h,ze=new c_(x,this.serializeUrl(L),G,ie);i.next(ze);const Ke=Fp(L,this.rootComponentType).snapshot;return ht(r={...h,targetSnapshot:Ke,urlAfterRedirects:L,extras:{...ne,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),ds.E}),(0,Be.b)(h=>{const g=new FR(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,dt.U)(h=>r={...h,guards:jR(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function cS(n,t){return(0,S.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?ht({...e,guardsResult:!0}):function dS(n,t,e,i){return(0,rn.D)(n).pipe((0,S.z)(r=>function gS(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ht(s.map(h=>{const g=Wp(t)??r,y=jh(h,g);return wo(function $h(n){return n&&Bc(n.canDeactivate)}(y)?y.canDeactivate(n,t,e,i):g.runInContext(()=>y(n,t,e,i))).pipe(le())})).pipe(Hc()):ht(!0)}(r.component,r.route,e,t,i)),le(r=>!0!==r,!0))}(c,i,r,n).pipe((0,S.z)(h=>h&&function iC(n){return"boolean"==typeof n}(h)?function b_(n,t,e,i){return(0,rn.D)(t).pipe(Me(r=>da(function fS(n,t){return null!==n&&t&&t(new $0(n)),ht(!0)}(r.route.parent,i),function hS(n,t){return null!==n&&t&&t(new W0(n)),ht(!0)}(r.route,i),function rC(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function GR(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>_o(()=>ht(c.guards.map(g=>{const y=Wp(c.node)??e,E=jh(g,y);return wo(function E_(n){return n&&Bc(n.canActivateChild)}(E)?E.canActivateChild(i,n):y.runInContext(()=>E(i,n))).pipe(le())})).pipe(Hc())));return ht(s).pipe(Hc())}(n,r.path,e),function pS(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ht(!0);const r=i.map(s=>_o(()=>{const c=Wp(t)??e,h=jh(s,c);return wo(function aS(n){return n&&Bc(n.canActivate)}(h)?h.canActivate(t,n):c.runInContext(()=>h(t,n))).pipe(le())}));return ht(r).pipe(Hc())}(n,r.route,e))),le(r=>!0!==r,!0))}(i,s,n,t):ht(h)),(0,dt.U)(h=>({...e,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Be.b)(h=>{if(r.guardsResult=h.guardsResult,F(h.guardsResult))throw Hp(0,h.guardsResult);const g=new LR(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),T(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),O_(h=>{if(h.guards.canActivateChecks.length)return ht(h).pipe((0,Be.b)(g=>{const y=new Vh(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),$n(g=>{let y=!1;return ht(g).pipe(function qR(n,t){return(0,S.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ht(e);let s=0;return(0,rn.D)(r).pipe(Me(c=>function $c(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!eg(r)&&(s[Dr]=r.title),function k_(n,t,e,i){const r=function pC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ht({});const s={};return(0,rn.D)(r).pipe((0,S.z)(c=>function bS(n,t,e,i){const r=Wp(t)??i,s=jh(n,r);return wo(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(le(),(0,Be.b)(h=>{s[c]=h}))),It(1),function fa(n){return(0,dt.U)(()=>n)}(s),ft(c=>zp(c)?ds.E:tr(c)))}(s,n,t,i).pipe((0,dt.U)(c=>(n._resolvedData=c,n.data=Vp(n,e).resolve,r&&eg(r)&&(n.data[Dr]=r.title),null)))}(c.route,i,n,t)),(0,Be.b)(()=>s++),It(1),(0,S.z)(c=>s===r.length?ht(e):ds.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Be.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Be.b)(g=>{const y=new d_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),O_(h=>{const g=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Be.b)(D=>{y.component=D}),(0,dt.U)(()=>{})));for(const D of y.children)E.push(...g(D));return E};return Rl(g(h.targetSnapshot.root)).pipe(O(),An(1))}),O_(()=>this.afterPreactivation()),(0,dt.U)(h=>{const g=function Lc(n,t,e){const i=Hh(n,t._root,e?e._root:void 0);return new Z0(i,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return r={...h,targetRouterState:g}}),(0,Be.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,t,e)=>(0,dt.U)(i=>(new v_(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Be.b)({next(){s=!0},complete(){s=!0}}),Ps(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ft(h=>{if(c=!0,Q0(h)){g_(h)||(this.navigated=!0,this.restoreHistory(r,!0));const g=new Rp(r.id,this.serializeUrl(r.extractedUrl),h.message,h.cancellationCode);if(i.next(g),g_(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),E={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||F_(r.source)};this.scheduleNavigation(y,"imperative",null,E,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const g=new H0(r.id,this.serializeUrl(r.extractedUrl),h,r.targetSnapshot??void 0);i.next(g);try{r.resolve(this.errorHandler(h))}catch(y){r.reject(y)}}return ds.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(r.state=h)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(y_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:g}=i,y=r||this.routerState.root,E=g?this.currentUrlTree.fragment:c;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),Kt(y,this.currentUrlTree,e,D,E??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=F(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function EC(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new l.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...SS}:!1===i?{...KR}:i,F(e))return o_(this.currentUrlTree,e,r);const s=this.parseUrl(e);return o_(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Mu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let h,g,y;c?(h=c.resolve,g=c.reject,y=c.promise):y=new Promise((x,L)=>{h=x,g=L});const E=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),D=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:E,targetPageId:D,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:h,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new Rp(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return IC()},providedIn:"root"}),n})();function F_(n){return"imperative"!==n}let Wc=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Hi.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Ei),l.Y36(Fl),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class L_{}let V_=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(T(e=>e instanceof Mu),Me(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,h=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,rn.D)(r).pipe((0,ca.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ht(null);const s=r.pipe((0,S.z)(c=>null===c?ht(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,rn.D)([s,c]).pipe((0,ca.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ei),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(L_),l.LFG(P_))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ru=new l.OlP("");let TC=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof c_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Mu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Np&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Np(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Nu(n,t){return{\u0275kind:n,\u0275providers:t}}function Kh(n){return[{provide:N_,multi:!0,useValue:n}]}function MS(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(Ei),r=n.get(U_);1===n.get(B_)&&i.initialNavigation(),n.get(Us,null,l.XFs.Optional)?.setUpPreloading(),n.get(Ru,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const U_=new l.OlP("",{factory:()=>new Hi.x}),B_=new l.OlP("",{providedIn:"root",factory:()=>1});const Us=new l.OlP("");function RS(n){return Nu(0,[{provide:Us,useExisting:V_},{provide:L_,useExisting:n}])}const AC=new l.OlP("ROUTER_FORROOT_GUARD"),PS=[Le,{provide:kh,useClass:Nl},{provide:Ei,useFactory:IC},jp,{provide:Fl,useFactory:function DC(n){return n.routerState.root},deps:[Ei]},P_];function xC(){return new l.PXZ("Router",Ei)}let MC=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[PS,[],Kh(e),{provide:AC,useFactory:kC,deps:[[Ei,new l.FiY,new l.tp0]]},{provide:qh,useValue:i||{}},i?.useHash?{provide:Ee,useClass:tt}:{provide:Ee,useClass:it},{provide:Ru,useFactory:()=>{const n=(0,l.f3M)(Ei),t=(0,l.f3M)(cc),e=(0,l.f3M)(qh);return e.scrollOffset&&t.setOffset(e.scrollOffset),new TC(n,t,e)}},i?.preloadingStrategy?RS(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:xC},i?.initialNavigation?OC(i):[],[{provide:H_,useFactory:MS},{provide:l.tb,multi:!0,useExisting:H_}]]}}static forChild(e){return{ngModule:n,providers:[Kh(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(AC,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ou]}),n})();function kC(n){return"guarded"}function OC(n){return["disabled"===n.initialNavigation?Nu(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const t=(0,l.f3M)(Ei);return()=>{t.setUpLocationChangeListener()}}},{provide:B_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Nu(2,[{provide:B_,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:t=>{const e=t.get(Z,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(Ei),h=t.get(U_);(function r(s){t.get(Ei).events.pipe(T(h=>h instanceof Mu||h instanceof Rp||h instanceof H0),(0,dt.U)(h=>h instanceof Mu||h instanceof Rp&&(0===h.code||1===h.code)&&null),T(h=>null!==h),An(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||h.closed?ht(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const H_=new l.OlP("");let RC={warnLogin:{severity:"warn",summary:"Warn",detail:"Efetue o Login"}};var US=U(8247),V=U(2090),Sr=U(9681),bo=U(1877),Ca=U(4859),ag=U(6451),Yh=U(5363),Pu=U(6063);class BS extends Hi.x{constructor(t=1/0,e=1/0,i=Pu.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let h=0;for(let g=1;g<i.length&&i[g]<=c;g+=2)h=g;h&&i.splice(0,h+1)}}}var lg=U(3099);function ug(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,lg.B)({connector:()=>new BS(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function NC(n,t){return(0,Rs.m)(t)?$n(()=>n,t):$n(()=>n)}var PC=U(9468),_n=U(5813),$i=U(2011);U(5867);var Ie=U(5861);const Jh=new Map,WS={activated:!1,tokenObservers:[]},$_={initialized:!1,enabled:!1};function ir(n){return Jh.get(n)||Object.assign({},WS)}function il(){return $_}class z_{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ie.Z)(function*(){e.stop();try{e.pending=new V.BH,yield function rl(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new V.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const pr=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qS(n){if(!ir(n).activated)throw pr.create("use-before-activation",{appName:n.name})}function Zc(n,t){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,Ie.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const L=yield c.getHeartbeatsHeader();L&&(s["X-Firebase-Client"]=L)}const h={method:"POST",body:JSON.stringify(t),headers:s};let g,y;try{g=yield fetch(n,h)}catch(L){throw pr.create("fetch-network-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}if(200!==g.status)throw pr.create("fetch-status-error",{httpStatus:g.status});try{y=yield g.json()}catch(L){throw pr.create("fetch-parse-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw pr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(E[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function Q_(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Xh="firebase-app-check-store";let fg=null;function J_(){return fg||(fg=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(pr.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xh,{keyPath:"compositeKey"})}}catch(i){t(pr.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),fg)}function ey(){return(ey=(0,Ie.Z)(function*(n,t){const i=(yield J_()).transaction(Xh,"readwrite"),s=i.objectStore(Xh).put({compositeKey:n,value:t});return new Promise((c,h)=>{s.onsuccess=g=>{c()},i.onerror=g=>{var y;h(pr.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const gg=new bo.Yd("@firebase/app-check");function GC(n,t){return(0,V.hl)()?function KS(n,t){return function X_(n,t){return ey.apply(this,arguments)}(function YS(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{gg.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function QS(){return il().enabled}function JS(){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,Ie.Z)(function*(){const n=il();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const XS={error:"UNKNOWN_ERROR"};function WC(n){return V.US.encodeString(JSON.stringify(n),!1)}function Yc(n){return mg.apply(this,arguments)}function mg(){return(mg=(0,Ie.Z)(function*(n,t=!1){const e=n.app;qS(e);const i=ir(e);let s,r=i.token;if(r&&!Qc(r)&&(i.token=void 0,r=void 0),!r){const g=yield i.cachedTokenPromise;g&&(Qc(g)?r=g:yield GC(e,void 0))}if(!t&&r&&Qc(r))return{token:r.token};let h,c=!1;if(QS()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Zc(Q_(e,yield JS()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const g=yield i.exchangeTokenPromise;return yield GC(e,g),i.token=g,{token:g.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield ir(e).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?gg.warn(g.message):gg.error(g),s=g}return r?s?h=Qc(r)?{token:r.token,internalError:s}:iy(s):(h={token:r.token},i.token=r,yield GC(e,r)):h=iy(s),c&&qC(e,h),h})).apply(this,arguments)}function ny(n,t){const e=ir(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function sl(n){const{app:t}=n,e=ir(t);let i=e.tokenRefresher;i||(i=function zC(n){const{app:t}=n;return new z_((0,Ie.Z)(function*(){let i;if(i=ir(t).token?yield Yc(n,!0):yield Yc(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=ir(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function qC(n,t){const e=ir(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function Qc(n){return n.expireTimeMillis-Date.now()>0}function iy(n){return{token:WC(XS),error:n}}class eA{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ir(this.app);for(const e of t)ny(this.app,e.next);return Promise.resolve()}}const dy="app-check-internal";!function rA(){(0,Sr._registerComponent)(new Ca.wA("app-check",n=>function tA(n,t){return new eA(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(dy).initialize()})),(0,Sr._registerComponent)(new Ca.wA(dy,n=>function _g(n){return{getToken:t=>Yc(n,t),addTokenListener:t=>function ef(n,t,e,i){const{app:r}=n,s=ir(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&Qc(s.token)){const h=s.token;Promise.resolve().then(()=>{e({token:h.token}),sl(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>sl(n))}(n,"INTERNAL",t),removeTokenListener:t=>ny(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Sr.registerVersion)("@firebase/app-check","0.5.17")}();class ed{constructor(){return(0,_n.vb)("app-check")}}typeof window<"u"&&window;var Eg=U(127);const py=new l.OlP("angularfire2.auth.use-emulator"),gy=new l.OlP("angularfire2.auth.settings"),td=new l.OlP("angularfire2.auth.tenant-id"),nf=new l.OlP("angularfire2.auth.langugage-code"),nd=new l.OlP("angularfire2.auth.use-device-language"),tI=new l.OlP("angularfire.auth.persistence"),rf=(n,t,e,i,r,s,c,h)=>(0,$i.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=t.runOutsideAngular(()=>n.auth());if(e&&g.useEmulator(...e),i&&(g.tenantId=i),g.languageCode=r,s&&g.useDeviceLanguage(),c)for(const[y,E]of Object.entries(c))g.settings[y]=E;return h&&g.setPersistence(h),g},[e,i,r,s,c,h]);let bg=(()=>{class n{constructor(e,i,r,s,c,h,g,y,E,D,x,L){const G=new Hi.x,ie=ht(void 0).pipe((0,Yh.Q)(c.outsideAngular),$n(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,dt.U)(()=>(0,$i.on)(e,s,i)),(0,dt.U)(ne=>rf(ne,s,h,y,E,D,g,x)),ug({bufferSize:1,refCount:!1}));if(jo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{ie.pipe(le()).subscribe();const ze=ie.pipe($n(Je=>Je.getRedirectResult().then(mt=>mt,()=>null)),_n.iC,ug({bufferSize:1,refCount:!1})),Ke=ie.pipe($n(Je=>new pi.y(mt=>({unsubscribe:s.runOutsideAngular(()=>Je.onAuthStateChanged(At=>mt.next(At),At=>mt.error(At),()=>mt.complete()))})))),qe=ie.pipe($n(Je=>new pi.y(mt=>({unsubscribe:s.runOutsideAngular(()=>Je.onIdTokenChanged(At=>mt.next(At),At=>mt.error(At),()=>mt.complete()))}))));this.authState=ze.pipe(NC(Ke),(0,PC.R)(c.outsideAngular),(0,Yh.Q)(c.insideAngular)),this.user=ze.pipe(NC(qe),(0,PC.R)(c.outsideAngular),(0,Yh.Q)(c.insideAngular)),this.idToken=this.user.pipe($n(Je=>Je?(0,rn.D)(Je.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe($n(Je=>Je?(0,rn.D)(Je.getIdTokenResult()):ht(null))),this.credential=(0,ag.T)(ze,G,this.authState.pipe(T(Je=>!Je))).pipe((0,dt.U)(Je=>Je?.user?Je:null),(0,PC.R)(c.outsideAngular),(0,Yh.Q)(c.insideAngular))}return(0,$i.pX)(this,ie,s,{spy:{apply:(ne,ze,Ke)=>{(ne.startsWith("signIn")||ne.startsWith("createUser"))&&Ke.then(qe=>G.next(qe))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($i.Dh),l.LFG($i.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(_n.HU),l.LFG(py,8),l.LFG(gy,8),l.LFG(td,8),l.LFG(nf,8),l.LFG(nd,8),l.LFG(tI,8),l.LFG(ed,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nI=(()=>{class n{constructor(){Eg.Z.registerVersion("angularfire",_n.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[bg]}),n})(),id=(()=>{class n{constructor(e,i){this.afAuth=e,this.router=i}googleLogin(){return this.afAuth.signInWithPopup(new US.Q).then(e=>{localStorage[n.tokenKey]=e.credential.accessToken,localStorage[n.userUidKey]=e?.user?.uid,this.router.navigate([""])}).catch(e=>{this.router.navigate(["/login"])})}logout(){return localStorage.removeItem(n.tokenKey),localStorage.removeItem(n.userUidKey),this.afAuth.signOut()}}return n.tokenKey="userToken",n.userUidKey="userUid",n.\u0275fac=function(e){return new(e||n)(l.LFG(bg),l.LFG(Ei))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bs(n,t){return{type:7,name:n,definitions:t,options:{}}}function gs(n,t=null){return{type:4,styles:t,timings:n}}function Hs(n){return{type:6,styles:n,offset:null}}function _y(n,t,e){return{type:0,name:n,styles:t,options:e}}function Ea(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function rI(n,t=null){return{type:8,animation:n,options:t}}function sI(n,t=null){return{type:10,animation:n,options:t}}class Cn{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,c,h,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((c=t.length)!=e.length)return!1;for(s=c;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(i!=r)return!1;var g=t instanceof Date,y=e instanceof Date;if(g!=y)return!1;if(g&&y)return t.getTime()==e.getTime();var E=t instanceof RegExp,D=e instanceof RegExp;if(E!=D)return!1;if(E&&D)return t.toString()==e.toString();var x=Object.keys(t);if((c=x.length)!==Object.keys(e).length)return!1;for(s=c;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,x[s]))return!1;for(s=c;0!=s--;)if(!this.equalsByValue(t[h=x[s]],e[h]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let s=0,c=i.length;s<c;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let s=!1;for(let c=0;c<i.length;c++)if(this.findIndexInList(i[c],r)>e){i.splice(c,0,t),s=!0;break}s||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let s=-1;const c=this.isEmpty(t),h=this.isEmpty(e);return s=c&&h?0:c?r:h?-r:"string"==typeof t&&"string"==typeof e?t.localeCompare(e,i,{numeric:!0}):t<e?-1:t>e?1:0,s}static sort(t,e,i=1,r,s=1){return(1===s?i:s)*Cn.compare(t,e,r,i)}static merge(t,e){return null!=t&&"object"!=typeof t||null!=e&&"object"!=typeof e?null!=t&&"string"!=typeof t||null!=e&&"string"!=typeof e?e||t:[t||"",e||""].join(" "):{...t||{},...e||{}}}}var Sg=0;function oI(){return"pr_id_"+ ++Sg}var js=function yy(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,c,h)=>{c&&(c.style.zIndex=String(((s,c)=>{let h=n.length>0?n[n.length-1]:{key:s,value:c},g=h.value+(h.key===s?0:c)+1;return n.push({key:s,value:g}),g})(s,h)))},clear:s=>{s&&((s=>{n=n.filter(c=>c.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();const aI=["*"];let gr=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),Fu=(()=>{class n{constructor(){this.filters={startsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=Cn.removeAccents(i.toString()).toLocaleLowerCase(r);return Cn.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=Cn.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==Cn.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=Cn.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===Cn.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=Cn.removeAccents(i.toString()).toLocaleLowerCase(r),c=Cn.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==c.indexOf(s,c.length-s.length)},equals:(e,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():Cn.removeAccents(e.toString()).toLocaleLowerCase(r)==Cn.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(e,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():Cn.removeAccents(e.toString()).toLocaleLowerCase(r)==Cn.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(e,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(Cn.equals(e,i[r]))return!0;return!1},between:(e,i)=>null==i||null==i[0]||null==i[1]||null!=e&&(e.getTime?i[0].getTime()<=e.getTime()&&e.getTime()<=i[1].getTime():i[0]<=e&&e<=i[1]),lt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<i.getTime():e<i),lte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<=i.getTime():e<=i),gt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>i.getTime():e>i),gte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>=i.getTime():e>=i),is:(e,i,r)=>this.filters.equals(e,i,r),isNot:(e,i,r)=>this.filters.notEquals(e,i,r),before:(e,i,r)=>this.filters.lt(e,i,r),after:(e,i,r)=>this.filters.gt(e,i,r),dateIs:(e,i)=>null==i||null!=e&&e.toDateString()===i.toDateString(),dateIsNot:(e,i)=>null==i||null!=e&&e.toDateString()!==i.toDateString(),dateBefore:(e,i)=>null==i||null!=e&&e.getTime()<i.getTime(),dateAfter:(e,i)=>null==i||null!=e&&e.getTime()>i.getTime()}}filter(e,i,r,s,c){let h=[];if(e)for(let g of e)for(let y of i){let E=Cn.resolveFieldData(g,y);if(this.filters[s](E,r,c)){h.push(g);break}}return h}register(e,i){this.filters[e]=i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xN=(()=>{class n{constructor(){this.messageSource=new Hi.x,this.clearSource=new Hi.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),rd=(()=>{class n{constructor(){this.clickSource=new Hi.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sd=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[gr.STARTS_WITH,gr.CONTAINS,gr.NOT_CONTAINS,gr.ENDS_WITH,gr.EQUALS,gr.NOT_EQUALS],numeric:[gr.EQUALS,gr.NOT_EQUALS,gr.LESS_THAN,gr.LESS_THAN_OR_EQUAL_TO,gr.GREATER_THAN,gr.GREATER_THAN_OR_EQUAL_TO],date:[gr.DATE_IS,gr.DATE_IS_NOT,gr.DATE_BEFORE,gr.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Hi.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:aI,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},encapsulation:2}),n})(),pA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:aI,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},encapsulation:2}),n})(),ki=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),Gs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})(),kn=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})(),be=(()=>{class n{static addClass(e,i){e&&i&&(e.classList?e.classList.add(i):e.className+=" "+i)}static addMultipleClasses(e,i){if(e&&i)if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,i){return!(!e||!i)&&(e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var c=0;c<r.length;c++){if(r[c]==e)return s;r[c].attributes&&r[c].attributes[i]&&1==r[c].nodeType&&s++}return-1}static appendOverlay(e,i,r="self"){"self"!==r&&e&&i&&this.appendChild(e,i)}static alignOverlay(e,i,r="self",s=!0){e&&i&&(s&&(e.style.minWidth||(e.style.minWidth=n.getOuterWidth(i)+"px")),"self"===r?this.relativePosition(e,i):this.absolutePosition(e,i))}static relativePosition(e,i){const r=ie=>{if(ie)return"relative"===getComputedStyle(ie).getPropertyValue("position")?ie:r(ie.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),c=i.offsetHeight,h=i.getBoundingClientRect(),g=this.getWindowScrollTop(),y=this.getWindowScrollLeft(),E=this.getViewport(),x=r(e)?.getBoundingClientRect()||{top:-1*g,left:-1*y};let L,G;h.top+c+s.height>E.height?(L=h.top-x.top-s.height,e.style.transformOrigin="bottom",h.top+L<0&&(L=-1*h.top)):(L=c+h.top-x.top,e.style.transformOrigin="top"),G=s.width>E.width?-1*(h.left-x.left):h.left-x.left+s.width>E.width?-1*(h.left-x.left+s.width-E.width):h.left-x.left,e.style.top=L+"px",e.style.left=G+"px"}static absolutePosition(e,i){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,c=r.width,h=i.offsetHeight,g=i.offsetWidth,y=i.getBoundingClientRect(),E=this.getWindowScrollTop(),D=this.getWindowScrollLeft(),x=this.getViewport();let L,G;y.top+h+s>x.height?(L=y.top+E-s,e.style.transformOrigin="bottom",L<0&&(L=E)):(L=h+y.top+E,e.style.transformOrigin="top"),G=y.left+c>x.width?Math.max(0,y.left+D+g-c):y.left+D,e.style.top=L+"px",e.style.left=G+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,c=h=>{let g=window.getComputedStyle(h,null);return s.test(g.getPropertyValue("overflow"))||s.test(g.getPropertyValue("overflowX"))||s.test(g.getPropertyValue("overflowY"))};for(let h of r){let g=1===h.nodeType&&h.dataset.scrollselectors;if(g){let y=g.split(",");for(let E of y){let D=this.findSingle(h,E);D&&c(D)&&i.push(D)}}9!==h.nodeType&&c(h)&&i.push(h)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,c=getComputedStyle(e).getPropertyValue("paddingTop"),h=c?parseFloat(c):0,g=e.getBoundingClientRect(),E=i.getBoundingClientRect().top+document.body.scrollTop-(g.top+document.body.scrollTop)-s-h,D=e.scrollTop,x=e.clientHeight,L=this.getOuterHeight(i);E<0?e.scrollTop=D+E:E+L>x&&(e.scrollTop=D+E-x+L)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,c=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(c)||setTimeout(c,16))};c()}static fadeOut(e,i){var r=1,h=50/i;let g=setInterval(()=>{(r-=h)<=0&&(r=0,clearInterval(g)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(c){return-1!==[].indexOf.call(document.querySelectorAll(c),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,i){e&&document.activeElement!==e&&e.focus(i)}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,i){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const c=(h=e)&&h.constructor&&h.call&&h.apply?e():e;return c&&9===c.nodeType||this.isExist(c)?c:null}var h}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class Yr{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=be.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let ad=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(be.removeClass(i,"p-ink-active"),!be.getHeight(i)&&!be.getWidth(i)){let h=Math.max(be.getOuterWidth(this.el.nativeElement),be.getOuterHeight(this.el.nativeElement));i.style.height=h+"px",i.style.width=h+"px"}let r=be.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-be.getWidth(i)/2,c=e.pageY-r.top+document.body.scrollLeft-be.getHeight(i)/2;i.style.top=c+"px",i.style.left=s+"px",be.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let h=this.getInk();h&&be.removeClass(h,"p-ink-active")},401)}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&be.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),be.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),be.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(sd,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),al=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})();function ld(n,t){if(1&n&&l._UZ(0,"span",11),2&n){const e=l.oxw(2).$implicit;l.Q6J("innerHTML",e.summary,l.oJD)}}function ud(n,t){if(1&n&&l._UZ(0,"span",12),2&n){const e=l.oxw(2).$implicit;l.Q6J("innerHTML",e.detail,l.oJD)}}function cd(n,t){if(1&n&&(l.ynx(0),l.YNc(1,ld,1,1,"span",9),l.YNc(2,ud,1,1,"span",10),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngIf",e.summary),l.xp6(1),l.Q6J("ngIf",e.detail)}}function dd(n,t){if(1&n&&(l.TgZ(0,"span",15),l._uU(1),l.qZA()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.summary)}}function hd(n,t){if(1&n&&(l.TgZ(0,"span",16),l._uU(1),l.qZA()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.detail)}}function fd(n,t){if(1&n&&(l.YNc(0,dd,2,1,"span",13),l.YNc(1,hd,2,1,"span",14)),2&n){const e=l.oxw().$implicit;l.Q6J("ngIf",e.summary),l.xp6(1),l.Q6J("ngIf",e.detail)}}function pd(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",17),l.NdJ("click",function(){l.CHM(e);const r=l.oxw().index,s=l.oxw(2);return l.KtG(s.removeMessage(r))}),l._UZ(1,"i",18),l.qZA()}}const gd=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},lI=function(n){return{value:"visible",params:n}},uI=function(n,t,e,i){return{"pi-info-circle":n,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":i}};function cI(n,t){if(1&n&&(l.TgZ(0,"div",4)(1,"div",5),l._UZ(2,"span",6),l.YNc(3,cd,3,2,"ng-container",1),l.YNc(4,fd,2,2,"ng-template",null,7,l.W1O),l.YNc(6,pd,2,0,"button",8),l.qZA()()),2&n){const e=t.$implicit,i=l.MAs(5),r=l.oxw(2);l.Tol("p-message p-message-"+e.severity),l.Q6J("@messageAnimation",l.VKq(12,lI,l.WLB(9,gd,r.showTransitionOptions,r.hideTransitionOptions))),l.xp6(2),l.Tol("p-message-icon pi"+(e.icon?" "+e.icon:"")),l.Q6J("ngClass",l.l5B(14,uI,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),l.xp6(1),l.Q6J("ngIf",!r.escape)("ngIfElse",i),l.xp6(3),l.Q6J("ngIf",r.closable)}}function dI(n,t){if(1&n&&(l.ynx(0),l.YNc(1,cI,7,19,"div",3),l.BQk()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.value)}}function hI(n,t){1&n&&l.GkF(0)}function fI(n,t){if(1&n&&(l.TgZ(0,"div",19)(1,"div",5),l.YNc(2,hI,1,0,"ng-container",20),l.qZA()()),2&n){const e=l.oxw();l.Q6J("ngClass","p-message p-message-"+e.severity),l.xp6(2),l.Q6J("ngTemplateOutlet",e.contentTemplate)}}let pI=(()=>{class n{constructor(e,i,r){this.messageService=e,this.el=i,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new l.vpe}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let i=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...i]:[...i]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((i,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xN,8),l.Y36(l.SBq),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-messages"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,ki,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,i){if(1&e&&(l.TgZ(0,"div",0),l.YNc(1,dI,2,1,"ng-container",1),l.YNc(2,fI,3,2,"ng-template",null,2,l.W1O),l.qZA()),2&e){const r=l.MAs(3);l.Tol(i.styleClass),l.Q6J("ngStyle",i.style),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate)("ngIfElse",r)}},dependencies:[qt,ar,ln,Vi,Qi,ad],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[Bs("messageAnimation",[Ea(":enter",[Hs({opacity:0,transform:"translateY(-25%)"}),gs("{{showTransitionParams}}")]),Ea(":leave",[gs("{{hideTransitionParams}}",Hs({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),n})(),gI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,al]}),n})();function mI(n,t){1&n&&l.GkF(0)}const gA=function(n,t,e,i){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":i}};function mA(n,t){if(1&n&&l._UZ(0,"span",4),2&n){const e=l.oxw();l.Tol(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),l.Q6J("ngClass",l.l5B(4,gA,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),l.uIk("aria-hidden",!0)}}function _I(n,t){if(1&n&&(l.TgZ(0,"span",5),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.uIk("aria-hidden",e.icon&&!e.label),l.xp6(1),l.Oqu(e.label)}}function _A(n,t){if(1&n&&(l.TgZ(0,"span",4),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.Tol(e.badgeClass),l.Q6J("ngClass",e.badgeStyleClass()),l.xp6(1),l.Oqu(e.badge)}}const yI=function(n,t,e,i,r){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":t,"p-disabled":e,"p-button-loading":i,"p-button-loading-label-only":r}},Cy=["*"];let Ag=(()=>{class n{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){if(this._initialStyleClass=this.el.nativeElement.className,be.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl(),this.label){let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",e.appendChild(document.createTextNode(this.label)),this.el.nativeElement.appendChild(e)}this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&Cn.isEmpty(this.el.nativeElement.textContent)&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&be.addClass(e,i);let r=this.getIconClass();r&&be.addMultipleClasses(e,r),this.el.nativeElement.insertBefore(e,this.el.nativeElement.firstChild)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=be.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=be.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(be.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label,(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),Iy=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,ki,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:Cy,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"button",0),l.NdJ("click",function(s){return i.onClick.emit(s)})("focus",function(s){return i.onFocus.emit(s)})("blur",function(s){return i.onBlur.emit(s)}),l.Hsn(1),l.YNc(2,mI,1,0,"ng-container",1),l.YNc(3,mA,1,9,"span",2),l.YNc(4,_I,2,2,"span",3),l.YNc(5,_A,2,4,"span",2),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngStyle",i.style)("disabled",i.disabled||i.loading)("ngClass",l.qbA(11,yI,i.icon&&!i.label,("top"===i.iconPos||"bottom"===i.iconPos)&&i.label,i.disabled||i.loading,i.loading,i.loading&&!i.icon&&i.label)),l.uIk("type",i.type)("aria-label",i.ariaLabel),l.xp6(2),l.Q6J("ngTemplateOutlet",i.contentTemplate),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&(i.icon||i.loading)),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&i.label),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&i.badge))},dependencies:[qt,ln,Vi,Qi,ad],encapsulation:2,changeDetection:0}),n})(),md=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,al]}),n})();function xg(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span")(1,"p-messages",8),l.NdJ("valueChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.msgsWarn=r)}),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(1),l.Q6J("value",e.msgsWarn)}}let yA=(()=>{class n{constructor(e,i){this.route=e,this.loginSerice=i,this.error=!1,this.msgs=[],this.msgsWarn=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{1==e.error?(this.error=!0,this.msgsWarn=[RC.warnLogin]):this.error=!1})}loginGoogle(){this.loginSerice.googleLogin().then()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Fl),l.Y36(id))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","align-items-center"],[1,"padding-login","grid","justify-content-center"],[1,"login-box","login","col-6","justify-content-center"],["src","assets/OrelhaSeca.png",1,"login-logo"],[1,"text-center"],[4,"ngIf"],[3,"value","valueChange"],[1,"login-button"],["type","button","label","Google",1,"",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l._UZ(5,"img",5),l.TgZ(6,"div",6),l.YNc(7,xg,2,1,"span",7),l.TgZ(8,"p-messages",8),l.NdJ("valueChange",function(s){return i.msgs=s}),l.qZA()(),l.TgZ(9,"div",9)(10,"p-button",10),l.NdJ("click",function(){return i.loginGoogle()}),l.qZA()()()()()()()),2&e&&(l.xp6(7),l.Q6J("ngIf",i.error),l.xp6(1),l.Q6J("value",i.msgs))},dependencies:[ln,pI,Iy],styles:[".login-box[_ngcontent-%COMP%]{width:100%;height:100%;max-width:500px;text-align:center}.login[_ngcontent-%COMP%]{background:rgb(255,255,255);justify-content:center;align-items:center;border-left-color:#010c29;border-right-color:#010c29;border-bottom-color:#010c29;border-top-color:#010c29;border-style:solid;border-radius:5px;border-width:2px}.login-logo[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:20px;width:90%;max-width:400px}.padding-login[_ngcontent-%COMP%]{padding-top:100px;align-items:center;align-content:center;align-self:center}.text-center[_ngcontent-%COMP%]{text-align:center}.login-button[_ngcontent-%COMP%]{text-align:center;padding-top:1em;padding-bottom:2em}.login-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em}.menu-container[_ngcontent-%COMP%]{background-color:#fff;max-width:1900px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:1810px;padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;min-height:100%}"]}),n})();const Mg=["*"];let Vl=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-template"]],ngContentSelectors:Mg,decls:8,vars:0,consts:[[1,"navbar"],["icon","pi pi-home","routerLink","/home",1,"menu-item"],["icon","pi pi-search","routerLink","/search",1,"menu-item"],["icon","pi pi-plus","routerLink","/novo",1,"menu-item"],["icon","pi pi-bell","routerLink","/notific",1,"menu-item"],["icon","pi pi-user","routerLink","/config",1,"menu-item"],[1,"content"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"div",0),l._UZ(1,"p-button",1)(2,"p-button",2)(3,"p-button",3)(4,"p-button",4)(5,"p-button",5),l.qZA(),l.TgZ(6,"div",6),l.Hsn(7),l.qZA())},dependencies:[Wc,Iy],styles:[".navbar[_ngcontent-%COMP%]{overflow:hidden;background-color:#333;position:fixed;bottom:0;width:100%;text-align:center;padding-top:.5em;padding-bottom:.5em;justify-content:space-evenly;display:flex;z-index:999}.content[_ngcontent-%COMP%]{margin-bottom:30px}.menu-item[_ngcontent-%COMP%]{padding-left:.2em;padding-right:.2em}"]}),n})();function Ey(n,t){1&n&&l.GkF(0)}function wI(n,t){if(1&n&&(l.TgZ(0,"div",8),l.Hsn(1,1),l.YNc(2,Ey,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngTemplateOutlet",e.headerTemplate)}}function by(n,t){1&n&&l.GkF(0)}function CI(n,t){if(1&n&&(l.TgZ(0,"div",9),l._uU(1),l.YNc(2,by,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij(" ",e.header," "),l.xp6(1),l.Q6J("ngTemplateOutlet",e.titleTemplate)}}function II(n,t){1&n&&l.GkF(0)}function Ty(n,t){if(1&n&&(l.TgZ(0,"div",10),l._uU(1),l.YNc(2,II,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij(" ",e.subheader," "),l.xp6(1),l.Q6J("ngTemplateOutlet",e.subtitleTemplate)}}function EI(n,t){1&n&&l.GkF(0)}function vA(n,t){1&n&&l.GkF(0)}function bI(n,t){if(1&n&&(l.TgZ(0,"div",11),l.Hsn(1,2),l.YNc(2,vA,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const TI=["*",[["p-header"]],[["p-footer"]]],DI=["*","p-header","p-footer"];let SI=(()=>{class n{constructor(e){this.el=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"title":this.titleTemplate=e.template;break;case"subtitle":this.subtitleTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-card"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,wy,5),l.Suo(r,pA,5),l.Suo(r,ki,4)),2&e){let s;l.iGM(s=l.CRH())&&(i.headerFacet=s.first),l.iGM(s=l.CRH())&&(i.footerFacet=s.first),l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:DI,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(e,i){1&e&&(l.F$t(TI),l.TgZ(0,"div",0),l.YNc(1,wI,3,1,"div",1),l.TgZ(2,"div",2),l.YNc(3,CI,3,2,"div",3),l.YNc(4,Ty,3,2,"div",4),l.TgZ(5,"div",5),l.Hsn(6),l.YNc(7,EI,1,0,"ng-container",6),l.qZA(),l.YNc(8,bI,3,1,"div",7),l.qZA()()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass","p-card p-component")("ngStyle",i.style),l.xp6(1),l.Q6J("ngIf",i.headerFacet||i.headerTemplate),l.xp6(2),l.Q6J("ngIf",i.header||i.titleTemplate),l.xp6(1),l.Q6J("ngIf",i.subheader||i.subtitleTemplate),l.xp6(3),l.Q6J("ngTemplateOutlet",i.contentTemplate),l.xp6(1),l.Q6J("ngIf",i.footerFacet||i.footerTemplate))},dependencies:[qt,ln,Vi,Qi],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),wA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Gs]}),n})();function AI(n,t){if(1&n&&(l.TgZ(0,"div",8)(1,"div",9),l._UZ(2,"img",10),l.qZA(),l.TgZ(3,"div",11),l._uU(4),l.qZA()()),2&n){const e=l.oxw();l.xp6(2),l.s9C("src",e.profiePic,l.LSH),l.xp6(2),l.hij(" ",e.userName," ")}}function xI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.liked=!r.liked)}),l.qZA()}}function Dy(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",13),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.liked=!r.liked)}),l.qZA()}}let Sy=(()=>{class n{constructor(){this.liked=!1,this.videoSrc="assets/video01.mp4",this.userName="Caesar Zama Altran",this.profiePic="assets/profile-cza.png",this.legenda="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-feed-card"]],inputs:{videoSrc:"videoSrc",userName:"userName",profiePic:"profiePic",legenda:"legenda"},decls:11,vars:5,consts:[["pTemplate","header"],["controls","",2,"max-width","100%",3,"src"],["class","pi pi-heart post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],["class","pi pi-heart-fill post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],[1,"pi","pi-share-alt","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[1,"pi","pi-comments","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[2,"margin-bottom","1em"],[2,"font-weight","bold"],[1,"flex","content-card-header","align-content-center"],[2,"padding-right",".4em"],[1,"profile-img",3,"src"],[1,"align-content-center",2,"padding-top",".28em","font-weight","bold"],[1,"pi","pi-heart","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"],[1,"pi","pi-heart-fill","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"p-card"),l.YNc(1,AI,5,2,"ng-template",0),l._UZ(2,"video",1),l.YNc(3,xI,1,0,"i",2),l.YNc(4,Dy,1,0,"i",3),l._UZ(5,"i",4)(6,"i",5),l.TgZ(7,"div",6)(8,"span",7),l._uU(9),l.qZA(),l._uU(10),l.qZA()()),2&e&&(l.xp6(2),l.s9C("src",i.videoSrc,l.LSH),l.xp6(1),l.Q6J("ngIf",!i.liked),l.xp6(1),l.Q6J("ngIf",i.liked),l.xp6(5),l.hij("",i.userName," "),l.xp6(1),l.hij("",i.legenda," "))},dependencies:[ln,ki,SI],styles:[".content-card-header[_ngcontent-%COMP%]{padding-top:.5em;padding-left:.5em;padding-bottom:.2em}.post-actions[_ngcontent-%COMP%]{padding:.2em}"]}),n})(),MI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:0,consts:[["profiePic","assets/cza-profile.png","userName","Caesar Zama Altran","videoSrc","assets/video01.mp4","legenda","Ol\xe1 mundo! Primeiro v\xeddeo de teste da plataforma!"],["profiePic","assets/profile-lincoln.jpg","userName","Lincoln Ricardo","videoSrc","assets/video02.mp4","legenda","GO GO GO! Hackathon com @CaesarAltran @GuilhermeNascimento @NathanAlmici e @BrunoRicardo"],["profiePic","assets/profile-gui.jpg","userName","Guilherme Nascimento","videoSrc","assets/video02.mp4"],["profiePic","assets/profile-nathan.jpg","userName","Nathan Almici","videoSrc","assets/video02.mp4"],["profiePic","assets/profile-bruno.jpg","userName","Bruno Ricardo","videoSrc","assets/video02.mp4"]],template:function(e,i){1&e&&(l.TgZ(0,"app-template"),l._UZ(1,"app-feed-card",0)(2,"app-feed-card",1)(3,"app-feed-card",2)(4,"app-feed-card",3)(5,"app-feed-card",4),l.qZA())},dependencies:[Vl,Sy]}),n})(),_d=(()=>{class n{constructor(e){this.router=e}canActivate(e,i){return localStorage,console.log(localStorage[id.tokenKey]),null==localStorage[id.tokenKey]?(this.router.navigate(["/login"]),!1):"null"!=localStorage[id.tokenKey]||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ei))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ay=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Ul=(()=>{class n extends Ay{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Ar=new l.OlP("NgValueAccessor"),kN={provide:Ar,useExisting:(0,l.Gpc)(()=>sf),multi:!0},IA=new l.OlP("CompositionEventMode");let sf=(()=>{class n extends Ay{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CA(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(IA,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([kN]),l.qOj]}),n})();const mr=new l.OlP("NgValidators"),Bl=new l.OlP("NgAsyncValidators");function kg(n){return null!=n}function Og(n){return(0,l.QGY)(n)?(0,rn.D)(n):n}function $s(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function LI(n,t){return t.map(e=>e(n))}function Do(n){return n.map(t=>function VI(n){return!n.validate}(t)?t:e=>t.validate(e))}function ms(n){return null!=n?function Ws(n){if(!n)return null;const t=n.filter(kg);return 0==t.length?null:function(e){return $s(LI(e,t))}}(Do(n)):null}function Rg(n){return null!=n?function Fy(n){if(!n)return null;const t=n.filter(kg);return 0==t.length?null:function(e){return function kI(...n){const t=(0,zr.jO)(n),{args:e,keys:i}=go(n),r=new pi.y(s=>{const{length:c}=e;if(!c)return void s.complete();const h=new Array(c);let g=c,y=c;for(let E=0;E<c;E++){let D=!1;(0,er.Xf)(e[E]).subscribe((0,Nn.x)(s,x=>{D||(D=!0,y--),h[E]=x},()=>g--,void 0,()=>{(!g||!D)&&(y||s.next(i?Qa(i,h):h),s.complete())}))}});return t?r.pipe(Ol(t)):r}(LI(e,t).map(Og)).pipe((0,dt.U)($s))}}(Do(n)):null}function UI(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Ly(n){return n?Array.isArray(n)?n:[n]:[]}function yd(n,t){return Array.isArray(n)?n.includes(t):n===t}function vd(n,t){const e=Ly(t);return Ly(n).forEach(r=>{yd(e,r)||e.push(r)}),e}function jI(n,t){return Ly(t).filter(e=>!yd(n,e))}class Vy{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ms(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Rg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class xr extends Vy{get formDirective(){return null}get path(){return null}}class ll extends Vy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Hy=(()=>{class n extends class Uy{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ll,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})();const lf="VALID",Pg="INVALID",wd="PENDING",uf="DISABLED";function zI(n){return Array.isArray(n)?ms(n):n||null}function qI(n){return Array.isArray(n)?Rg(n):n||null}function Fg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Cd(n,t){(function Zy(n,t){const e=function BI(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(UI(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function HI(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(UI(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();hf(t._rawValidators,r),hf(t._rawAsyncValidators,r)})(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function Id(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ug(n,t)})}(n,t),function LN(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function FN(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ug(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Uu(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function hf(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Ug(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function XI(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Qy(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Gg={provide:ll,useExisting:(0,l.Gpc)(()=>ff)},Xy=(()=>Promise.resolve())();let ff=(()=>{class n extends ll{constructor(e,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new class extends class qy{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=zI(this._rawValidators),this._composedAsyncValidatorFn=qI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===lf}get invalid(){return this.status===Pg}get pending(){return this.status==wd}get disabled(){return this.status===uf}get enabled(){return this.status!==uf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=zI(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=qI(t)}addValidators(t){this.setValidators(vd(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(vd(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(jI(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(jI(t,this._rawAsyncValidators))}hasValidator(t){return yd(this._rawValidators,t)}hasAsyncValidator(t){return yd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=wd,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=uf,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=lf,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lf||this.status===wd)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uf:lf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=wd,this._hasOwnPendingAsyncValidator=!0;const e=Og(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?uf:this.errors?Pg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wd)?wd:this._anyControlsHaveStatus(Pg)?Pg:lf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,i){super(function $y(n){return(Fg(n)?n.validators:n)||null}(e),function Wy(n,t){return(Fg(t)?t.asyncValidators:n)||null}(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Qy(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){XI(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){XI(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Qy(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new l.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function bd(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===sf?e=s:function Ed(n){return Object.getPrototypeOf(n.constructor)===Ul}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Yy(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Xy.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,l.D6c)(i);Xy.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function cf(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xr,9),l.Y36(mr,10),l.Y36(Bl,10),l.Y36(Ar,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([Gg]),l.qOj,l.TTD]}),n})(),rE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),YA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[rE]}),n})(),QA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[YA]}),n})();const lv=["container"],uv=["inputfield"],EE=["contentWrapper"];function cv(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",8),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.clear())}),l.qZA()}}function ex(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",9),l.NdJ("click",function(r){l.CHM(e),l.oxw();const s=l.MAs(1),c=l.oxw();return l.KtG(c.onButtonClick(r,s))}),l.qZA()}if(2&n){const e=l.oxw(2);l.Q6J("icon",e.icon)("disabled",e.disabled),l.uIk("aria-label",e.iconAriaLabel)}}function tx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"input",4,5),l.NdJ("focus",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputFocus(r))})("keydown",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputKeydown(r))})("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onInputClick())})("blur",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputBlur(r))})("input",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onUserInput(r))}),l.qZA(),l.YNc(2,cv,1,0,"i",6),l.YNc(3,ex,1,3,"button",7)}if(2&n){const e=l.oxw();l.Tol(e.inputStyleClass),l.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),l.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),l.xp6(2),l.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),l.xp6(1),l.Q6J("ngIf",e.showIcon)}}function dv(n,t){1&n&&l.GkF(0)}function nx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",30),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onPrevButtonClick(r))}),l._UZ(1,"span",31),l.qZA()}}function bE(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",32),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.switchToMonthView(r))})("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))}),l._uU(1),l.qZA()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.Q6J("disabled",i.switchViewButtonDisabled()),l.xp6(1),l.hij(" ",i.getMonthName(e.month)," ")}}function Ad(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",33),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.switchToYearView(r))})("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))}),l._uU(1),l.qZA()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.Q6J("disabled",i.switchViewButtonDisabled()),l.xp6(1),l.hij(" ",i.getYear(e)," ")}}function TE(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(5);l.xp6(1),l.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function ix(n,t){1&n&&l.GkF(0)}const rx=function(n){return{$implicit:n}};function DE(n,t){if(1&n&&(l.TgZ(0,"span",34),l.YNc(1,TE,2,2,"ng-container",13),l.YNc(2,ix,1,0,"ng-container",35),l.qZA()),2&n){const e=l.oxw(4);l.xp6(1),l.Q6J("ngIf",!e.decadeTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",l.VKq(3,rx,e.yearPickerValues))}}function hv(n,t){if(1&n&&(l.TgZ(0,"th",41)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=l.oxw(5);l.xp6(2),l.Oqu(e.getTranslation("weekHeader"))}}function sx(n,t){if(1&n&&(l.TgZ(0,"th",42)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=t.$implicit;l.xp6(2),l.Oqu(e)}}function fv(n,t){if(1&n&&(l.TgZ(0,"td",45)(1,"span",46),l._uU(2),l.qZA()()),2&n){const e=l.oxw().index,i=l.oxw(2).$implicit;l.xp6(2),l.hij(" ",i.weekNumbers[e]," ")}}function ox(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.day)}}function SE(n,t){1&n&&l.GkF(0)}const qg=function(n,t){return{"p-highlight":n,"p-disabled":t}};function AE(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"span",48),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw().$implicit,c=l.oxw(6);return l.KtG(c.onDateSelect(r,s))})("keydown",function(r){l.CHM(e);const s=l.oxw().$implicit,c=l.oxw(3).index,h=l.oxw(3);return l.KtG(h.onDateCellKeydown(r,s,c))}),l.YNc(2,ox,2,1,"ng-container",13),l.YNc(3,SE,1,0,"ng-container",35),l.qZA(),l.BQk()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(6);l.xp6(1),l.Q6J("ngClass",l.WLB(4,qg,i.isSelected(e),!e.selectable)),l.xp6(1),l.Q6J("ngIf",!i.dateTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",l.VKq(7,rx,e))}}const xE=function(n,t){return{"p-datepicker-other-month":n,"p-datepicker-today":t}};function ME(n,t){if(1&n&&(l.TgZ(0,"td",47),l.YNc(1,AE,4,9,"ng-container",13),l.qZA()),2&n){const e=t.$implicit,i=l.oxw(6);l.Q6J("ngClass",l.WLB(2,xE,e.otherMonth,e.today)),l.xp6(1),l.Q6J("ngIf",!e.otherMonth||i.showOtherMonths)}}function kE(n,t){if(1&n&&(l.TgZ(0,"tr"),l.YNc(1,fv,3,1,"td",43),l.YNc(2,ME,2,5,"td",44),l.qZA()),2&n){const e=t.$implicit,i=l.oxw(5);l.xp6(1),l.Q6J("ngIf",i.showWeek),l.xp6(1),l.Q6J("ngForOf",e)}}function ax(n,t){if(1&n&&(l.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),l.YNc(4,hv,3,1,"th",38),l.YNc(5,sx,3,1,"th",39),l.qZA()(),l.TgZ(6,"tbody"),l.YNc(7,kE,3,2,"tr",40),l.qZA()()()),2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.xp6(4),l.Q6J("ngIf",i.showWeek),l.xp6(1),l.Q6J("ngForOf",i.weekDays),l.xp6(2),l.Q6J("ngForOf",e.dates)}}function lx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",20)(1,"div",21),l.YNc(2,nx,2,0,"button",22),l.TgZ(3,"div",23),l.YNc(4,bE,2,2,"button",24),l.YNc(5,Ad,2,2,"button",25),l.YNc(6,DE,3,5,"span",26),l.qZA(),l.TgZ(7,"button",27),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onNextButtonClick(r))}),l._UZ(8,"span",28),l.qZA()(),l.YNc(9,ax,8,3,"div",29),l.qZA()}if(2&n){const e=t.index,i=l.oxw(3);l.xp6(2),l.Q6J("ngIf",0===e),l.xp6(2),l.Q6J("ngIf","date"===i.currentView),l.xp6(1),l.Q6J("ngIf","year"!==i.currentView),l.xp6(1),l.Q6J("ngIf","year"===i.currentView),l.xp6(1),l.Udp("display",1===i.numberOfMonths||e===i.numberOfMonths-1?"inline-flex":"none"),l.xp6(2),l.Q6J("ngIf","date"===i.currentView)}}function ux(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span",51),l.NdJ("click",function(r){const c=l.CHM(e).index,h=l.oxw(4);return l.KtG(h.onMonthSelect(r,c))})("keydown",function(r){const c=l.CHM(e).index,h=l.oxw(4);return l.KtG(h.onMonthCellKeydown(r,c))}),l._uU(1),l.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw(4);l.Q6J("ngClass",l.WLB(2,qg,r.isMonthSelected(i),r.isMonthDisabled(i))),l.xp6(1),l.hij(" ",e," ")}}function cx(n,t){if(1&n&&(l.TgZ(0,"div",49),l.YNc(1,ux,2,5,"span",50),l.qZA()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.monthPickerValues())}}const OE=function(n){return{"p-highlight":n}};function nP(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span",54),l.NdJ("click",function(r){const c=l.CHM(e).$implicit,h=l.oxw(4);return l.KtG(h.onYearSelect(r,c))})("keydown",function(r){const c=l.CHM(e).$implicit,h=l.oxw(4);return l.KtG(h.onYearCellKeydown(r,c))}),l._uU(1),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(4);l.Q6J("ngClass",l.VKq(2,OE,i.isYearSelected(e))),l.xp6(1),l.hij(" ",e," ")}}function RE(n,t){if(1&n&&(l.TgZ(0,"div",52),l.YNc(1,nP,2,4,"span",53),l.qZA()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.yearPickerValues())}}function dx(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"div",16),l.YNc(2,lx,10,7,"div",17),l.qZA(),l.YNc(3,cx,2,1,"div",18),l.YNc(4,RE,2,1,"div",19),l.BQk()),2&n){const e=l.oxw(2);l.xp6(2),l.Q6J("ngForOf",e.months),l.xp6(1),l.Q6J("ngIf","month"===e.currentView),l.xp6(1),l.Q6J("ngIf","year"===e.currentView)}}function hx(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function iP(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function rP(n,t){if(1&n&&(l.TgZ(0,"div",60)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=l.oxw(3);l.xp6(2),l.Oqu(e.timeSeparator)}}function fx(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function px(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",65)(1,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.incrementSecond(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.incrementSecond(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(2,"span",58),l.qZA(),l.TgZ(3,"span"),l.YNc(4,fx,2,0,"ng-container",13),l._uU(5),l.qZA(),l.TgZ(6,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.decrementSecond(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.decrementSecond(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(7,"span",59),l.qZA()()}if(2&n){const e=l.oxw(3);l.xp6(4),l.Q6J("ngIf",e.currentSecond<10),l.xp6(1),l.Oqu(e.currentSecond)}}function NE(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",66)(1,"button",67),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))}),l._UZ(2,"span",58),l.qZA(),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.TgZ(5,"button",67),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))}),l._UZ(6,"span",59),l.qZA()()}if(2&n){const e=l.oxw(3);l.xp6(4),l.Oqu(e.pm?"PM":"AM")}}function PE(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",55)(1,"div",56)(2,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementHour(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementHour(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(3,"span",58),l.qZA(),l.TgZ(4,"span"),l.YNc(5,hx,2,0,"ng-container",13),l._uU(6),l.qZA(),l.TgZ(7,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementHour(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementHour(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(8,"span",59),l.qZA()(),l.TgZ(9,"div",60)(10,"span"),l._uU(11),l.qZA()(),l.TgZ(12,"div",61)(13,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementMinute(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementMinute(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(14,"span",58),l.qZA(),l.TgZ(15,"span"),l.YNc(16,iP,2,0,"ng-container",13),l._uU(17),l.qZA(),l.TgZ(18,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementMinute(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementMinute(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(19,"span",59),l.qZA()(),l.YNc(20,rP,3,1,"div",62),l.YNc(21,px,8,2,"div",63),l.YNc(22,NE,7,1,"div",64),l.qZA()}if(2&n){const e=l.oxw(2);l.xp6(5),l.Q6J("ngIf",e.currentHour<10),l.xp6(1),l.Oqu(e.currentHour),l.xp6(5),l.Oqu(e.timeSeparator),l.xp6(5),l.Q6J("ngIf",e.currentMinute<10),l.xp6(1),l.Oqu(e.currentMinute),l.xp6(3),l.Q6J("ngIf",e.showSeconds),l.xp6(1),l.Q6J("ngIf",e.showSeconds),l.xp6(1),l.Q6J("ngIf","12"==e.hourFormat)}}const pv=function(n){return[n]};function FE(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",68)(1,"button",69),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTodayButtonClick(r))}),l.qZA(),l.TgZ(2,"button",69),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onClearButtonClick(r))}),l.qZA()()}if(2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("label",e.getTranslation("today"))("ngClass",l.VKq(4,pv,e.todayButtonStyleClass)),l.xp6(1),l.Q6J("label",e.getTranslation("clear"))("ngClass",l.VKq(6,pv,e.clearButtonStyleClass))}}function LE(n,t){1&n&&l.GkF(0)}const VE=function(n,t,e,i,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},gv=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},gx=function(n){return{value:"visibleTouchUI",params:n}},mx=function(n){return{value:"visible",params:n}};function UE(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",10,11),l.NdJ("@overlayAnimation.start",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayAnimationDone(r))})("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayClick(r))}),l.Hsn(2),l.YNc(3,dv,1,0,"ng-container",12),l.YNc(4,dx,5,3,"ng-container",13),l.YNc(5,PE,23,8,"div",14),l.YNc(6,FE,3,8,"div",15),l.Hsn(7,1),l.YNc(8,LE,1,0,"ng-container",12),l.qZA()}if(2&n){const e=l.oxw();l.Tol(e.panelStyleClass),l.Q6J("ngStyle",e.panelStyle)("ngClass",l.HTZ(11,VE,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?l.VKq(21,gx,l.WLB(18,gv,e.showTransitionOptions,e.hideTransitionOptions)):l.VKq(26,mx,l.WLB(23,gv,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),l.xp6(3),l.Q6J("ngTemplateOutlet",e.headerTemplate),l.xp6(1),l.Q6J("ngIf",!e.timeOnly),l.xp6(1),l.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),l.xp6(1),l.Q6J("ngIf",e.showButtonBar),l.xp6(2),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const _f=[[["p-header"]],[["p-footer"]]],BE=function(n,t,e,i){return{"p-calendar":!0,"p-calendar-w-btn":n,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":i}},HE=["p-header","p-footer"],jE={provide:Ar,useExisting:(0,l.Gpc)(()=>mv),multi:!0};let mv=(()=>{class n{constructor(e,i,r,s,c,h){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.config=c,this.overlayService=h,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onClose=new l.vpe,this.onSelect=new l.vpe,this.onClear=new l.vpe,this.onInput=new l.vpe,this.onTodayClick=new l.vpe,this.onClearClick=new l.vpe,this.onMonthChange=new l.vpe,this.onYearChange=new l.vpe,this.onClickOutside=new l.vpe,this.onShow=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(g,y){return"12"==this.hourFormat?12===g?y?12:0:y?g+12:g:g}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const i=e||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const i=e.split(":"),r=parseInt(i[0]),s=parseInt(i[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=oI();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=be.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,i){this.yearOptions=[];for(let r=e;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),i=this.getTranslation(kn.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let i=0;i<=11;i++)e.push(this.config.getTranslation("monthNamesShort")[i]);return e}yearPickerValues(){let e=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(i+r);return e}createMonths(e,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,c=i;s>11&&(s=s%11-1,c=i+1),this.months.push(this.createMonth(s,c))}}getWeekNumber(e){let i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(e,i){let r=[],s=this.getFirstDayOfMonthIndex(e,i),c=this.getDaysCountInMonth(e,i),h=this.getDaysCountInPrevMonth(e,i),g=1,y=new Date,E=[],D=Math.ceil((c+s)/7);for(let x=0;x<D;x++){let L=[];if(0==x){for(let ie=h-s+1;ie<=h;ie++){let ne=this.getPreviousMonthAndYear(e,i);L.push({day:ie,month:ne.month,year:ne.year,otherMonth:!0,today:this.isToday(y,ie,ne.month,ne.year),selectable:this.isSelectable(ie,ne.month,ne.year,!0)})}let G=7-L.length;for(let ie=0;ie<G;ie++)L.push({day:g,month:e,year:i,today:this.isToday(y,g,e,i),selectable:this.isSelectable(g,e,i,!1)}),g++}else for(let G=0;G<7;G++){if(g>c){let ie=this.getNextMonthAndYear(e,i);L.push({day:g-c,month:ie.month,year:ie.year,otherMonth:!0,today:this.isToday(y,g-c,ie.month,ie.year),selectable:this.isSelectable(g-c,ie.month,ie.year,!0)})}else L.push({day:g,month:e,year:i,today:this.isToday(y,g,e,i),selectable:this.isSelectable(g,e,i,!1)});g++}this.showWeek&&E.push(this.getWeekNumber(new Date(L[0].year,L[0].month,L[0].day))),r.push(L)}return{month:e,year:i,dates:r,weekNumbers:E}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,i){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,i){"year"===this.view?this.onDateSelect(e,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)e+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let i=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?i=this.formatTime(e):(i=this.formatDate(e,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(e)))),i}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let i=new Date(e.year,e.month,e.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&i.getTime()>=r.getTime()?s=i:(r=i,s=null),this.updateModel([r,s])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;this.value&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(e,i){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(i);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,i){return 32-this.daylightSavingAdjust(new Date(i,e,32)).getDate()}getDaysCountInPrevMonth(e,i){let r=this.getPreviousMonthAndYear(e,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,i){let r,s;return 0===e?(r=11,s=i-1):(r=e-1,s=i),{month:r,year:s}}getNextMonthAndYear(e,i){let r,s;return 11===e?(r=0,s=i+1):(r=e+1,s=i),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,e),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){const[i,r]=this.isRangeSelection()?this.value:[this.value,this.value],s=new Date(this.currentYear,e,1);return s>=i&&s<=(r??i)}return!1}isMonthDisabled(e){return!this.isSelectable(1,e,this.currentYear,!1)}isYearSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===e}return!1}isDateEquals(e,i){return!!(e&&e instanceof Date)&&e.getDate()===i.day&&e.getMonth()===i.month&&e.getFullYear()===i.year}isDateBetween(e,i,r){if(e&&i){let c=new Date(r.year,r.month,r.day);return e.getTime()<=c.getTime()&&i.getTime()>=c.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,i,r,s){return e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,i,r,s){let c=!0,h=!0,g=!0,y=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>e))&&(c=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<e))&&(h=!1),this.disabledDates&&(g=!this.isDateDisabled(e,i,r)),this.disabledDays&&(y=!this.isDayDisabled(e,i,r)),c&&h&&g&&y)}isDateDisabled(e,i,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===i&&s.getDate()===e)return!0;return!1}isDayDisabled(e,i,r){if(this.disabledDays){let c=new Date(r,i,e).getDay();return-1!==this.disabledDays.indexOf(c)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(be.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,i,r){const s=e.currentTarget,c=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let h=be.index(c),g=c.parentElement.nextElementSibling;g?be.hasClass(g.children[h].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(g.children[h].children[0].tabIndex="0",g.children[h].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let h=be.index(c),g=c.parentElement.previousElementSibling;if(g){let y=g.children[h].children[0];be.hasClass(y,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(y.tabIndex="0",y.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let h=c.previousElementSibling;if(h){let g=h.children[0];be.hasClass(g,"p-disabled")||be.hasClass(g.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(g.tabIndex="0",g.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let h=c.nextElementSibling;if(h){let g=h.children[0];be.hasClass(g,"p-disabled")?this.navigateToMonth(!1,r):(g.tabIndex="0",g.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,c=be.index(r);let h=s[40===e.which?c+3:c-3];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,i),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,c=be.index(r);let h=s[40===e.which?c+2:c-2];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,i){if(e)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let s=be.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),c=s[s.length-1];c.tabIndex="0",c.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=be.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?be.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():be.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=be.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(e=i[i.length-1])}else e=be.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const e=this.contentViewChild?.nativeElement;let i;if("month"===this.currentView){let r=be.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),s=be.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");r.forEach(c=>c.tabIndex=-1),i=s||r[0],0===r.length&&be.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(h=>h.tabIndex=-1)}else if("year"===this.currentView){let r=be.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),s=be.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");r.forEach(c=>c.tabIndex=-1),i=s||r[0],0===r.length&&be.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(h=>h.tabIndex=-1)}else if(i=be.findSingle(e,"span.p-highlight"),!i){let r=be.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i=r||be.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}i&&(i.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{i.focus()},1),this.preventFocus=!1)}trapFocus(e){let i=be.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,i,r,s){let c=this.value;const h=this.convertTo24Hour(e,s);this.isRangeSelection()&&(c=this.value[1]||this.value[0]),this.isMultipleSelection()&&(c=this.value[this.value.length-1]);const g=c?c.toDateString():null;return!(this.minDate&&g&&this.minDate.toDateString()===g&&(this.minDate.getHours()>h||this.minDate.getHours()===h&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&g&&this.maxDate.toDateString()===g&&(this.maxDate.getHours()<h||this.maxDate.getHours()===h&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,i,r){this.disabled||(this.repeat(e,null,i,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,i,r,s){let c=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},c),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),e.preventDefault()}incrementMinute(e){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}decrementMinute(e){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}incrementSecond(e){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}decrementSecond(e){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let i=e.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(e)}isValidSelection(e){let i=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(i=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=e.length>1&&e[1]>e[0]),i}parseValueFromString(e){if(!e||0===e.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);i=[];for(let s of r)i.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");i=[];for(let s=0;s<r.length;s++)i[s]=this.parseDateTime(r[s].trim())}return i}parseDateTime(e){let i,r=e.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let c="12"==this.hourFormat?r.pop():null,h=r.pop();i=this.parseDate(r.join(" "),s),this.populateTime(i,h,c)}else i=this.parseDate(e,s)}return i}populateTime(e,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(i);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&Cn.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?js.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):js.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&js.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):be.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=be.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=be.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=be.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",be.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):be.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),be.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),be.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(be.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let i,e=document.body.children;for(let r=0;r<e.length;r++)if(be.hasClass(e[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||be.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(kn.FIRST_DAY_OF_WEEK)}formatDate(e,i){if(!e)return"";let r;const s=E=>{const D=r+1<i.length&&i.charAt(r+1)===E;return D&&r++,D},c=(E,D,x)=>{let L=""+D;if(s(E))for(;L.length<x;)L="0"+L;return L},h=(E,D,x,L)=>s(E)?L[D]:x[D];let g="",y=!1;if(e)for(r=0;r<i.length;r++)if(y)"'"!==i.charAt(r)||s("'")?g+=i.charAt(r):y=!1;else switch(i.charAt(r)){case"d":g+=c("d",e.getDate(),2);break;case"D":g+=h("D",e.getDay(),this.getTranslation(kn.DAY_NAMES_SHORT),this.getTranslation(kn.DAY_NAMES));break;case"o":g+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":g+=c("m",e.getMonth()+1,2);break;case"M":g+=h("M",e.getMonth(),this.getTranslation(kn.MONTH_NAMES_SHORT),this.getTranslation(kn.MONTH_NAMES));break;case"y":g+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":g+=e.getTime();break;case"!":g+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?g+="'":y=!0;break;default:g+=i.charAt(r)}return g}formatTime(e){if(!e)return"";let i="",r=e.getHours(),s=e.getMinutes(),c=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=s<10?"0"+s:s,this.showSeconds&&(i+=":",i+=c<10?"0"+c:c),"12"==this.hourFormat&&(i+=e.getHours()>11?" PM":" AM"),i}parseTime(e){let i=e.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(i[0]),c=parseInt(i[1]),h=this.showSeconds?parseInt(i[2]):null;if(isNaN(s)||isNaN(c)||s>23||c>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(h)||h>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:c,second:h}}parseDate(e,i){if(null==i||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,c,G,h=0,g="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),y=-1,E=-1,D=-1,x=-1,L=!1,ie=qe=>{let Je=r+1<i.length&&i.charAt(r+1)===qe;return Je&&r++,Je},ne=qe=>{let Je=ie(qe),mt="@"===qe?14:"!"===qe?20:"y"===qe&&Je?4:"o"===qe?3:2,Un=new RegExp("^\\d{"+("y"===qe?mt:1)+","+mt+"}"),Ni=e.substring(h).match(Un);if(!Ni)throw"Missing number at position "+h;return h+=Ni[0].length,parseInt(Ni[0],10)},ze=(qe,Je,mt)=>{let At=-1,Un=ie(qe)?mt:Je,Ni=[];for(let Ds=0;Ds<Un.length;Ds++)Ni.push([Ds,Un[Ds]]);Ni.sort((Ds,M0)=>-(Ds[1].length-M0[1].length));for(let Ds=0;Ds<Ni.length;Ds++){let M0=Ni[Ds][1];if(e.substr(h,M0.length).toLowerCase()===M0.toLowerCase()){At=Ni[Ds][0],h+=M0.length;break}}if(-1!==At)return At+1;throw"Unknown name at position "+h},Ke=()=>{if(e.charAt(h)!==i.charAt(r))throw"Unexpected literal at position "+h;h++};for("month"===this.view&&(D=1),r=0;r<i.length;r++)if(L)"'"!==i.charAt(r)||ie("'")?Ke():L=!1;else switch(i.charAt(r)){case"d":D=ne("d");break;case"D":ze("D",this.getTranslation(kn.DAY_NAMES_SHORT),this.getTranslation(kn.DAY_NAMES));break;case"o":x=ne("o");break;case"m":E=ne("m");break;case"M":E=ze("M",this.getTranslation(kn.MONTH_NAMES_SHORT),this.getTranslation(kn.MONTH_NAMES));break;case"y":y=ne("y");break;case"@":G=new Date(ne("@")),y=G.getFullYear(),E=G.getMonth()+1,D=G.getDate();break;case"!":G=new Date((ne("!")-this.ticksTo1970)/1e4),y=G.getFullYear(),E=G.getMonth()+1,D=G.getDate();break;case"'":ie("'")?Ke():L=!0;break;default:Ke()}if(h<e.length&&(c=e.substr(h),!/^\s+/.test(c)))throw"Extra/unparsed characters found in date: "+c;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=g?0:-100)),x>-1)for(E=1,D=x;s=this.getDaysCountInMonth(y,E-1),!(D<=s);)E++,D-=s;if("year"===this.view&&(E=-1===E?1:E,D=-1===D?1:D),G=this.daylightSavingAdjust(new Date(y,E-1,D)),G.getFullYear()!==y||G.getMonth()+1!==E||G.getDate()!==D)throw"Invalid date";return G}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:s,numMonths:c}=i[r],h=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${c}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let g=c;g<this.numberOfMonths;g++)h+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${g+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${h}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Yr(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return be.hasClass(e.target,"p-datepicker-prev")||be.hasClass(e.target,"p-datepicker-prev-icon")||be.hasClass(e.target,"p-datepicker-next")||be.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!be.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&js.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(sd),l.Y36(rd))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,ki,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(lv,5),l.Gf(uv,5),l.Gf(EE,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.containerViewChild=r.first),l.iGM(r=l.CRH())&&(i.inputfieldViewChild=r.first),l.iGM(r=l.CRH())&&(i.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[l._Bn([jE])],ngContentSelectors:HE,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,i){1&e&&(l.F$t(_f),l.TgZ(0,"span",0,1),l.YNc(2,tx,4,17,"ng-template",2),l.YNc(3,UE,9,28,"div",3),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",l.l5B(6,BE,i.showIcon,i.timeOnly,i.disabled,i.focus))("ngStyle",i.style),l.xp6(2),l.Q6J("ngIf",!i.inline),l.xp6(1),l.Q6J("ngIf",i.inline||i.overlayVisible))},dependencies:[qt,ar,ln,Vi,Qi,Ag,ad],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[Bs("overlayAnimation",[_y("visibleTouchUI",Hs({transform:"translate(-50%,-50%)",opacity:1})),Ea("void => visible",[Hs({opacity:0,transform:"scaleY(0.8)"}),gs("{{showTransitionParams}}",Hs({opacity:1,transform:"*"}))]),Ea("visible => void",[gs("{{hideTransitionParams}}",Hs({opacity:0}))]),Ea("void => visibleTouchUI",[Hs({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),gs("{{showTransitionParams}}")]),Ea("visibleTouchUI => void",[gs("{{hideTransitionParams}}",Hs({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),n})(),GE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,md,Gs,al,md,Gs]}),n})(),_x=(()=>{class n{constructor(e,i,r){this.el=e,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ff,8),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i.onInput(s)}),2&e&&l.ekj("p-filled",i.filled)}}),n})(),yx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})(),vx=(()=>{class n{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=be.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),n})(),$E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})();const wx=["input"];function Cx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",3),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.clear())}),l.qZA()}}const Ix={provide:Ar,useExisting:(0,l.Gpc)(()=>WE),multi:!0};let WE=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.type="text",this.slotChar="_",this.autoClear=!0,this.showClear=!1,this.characterPattern="[A-Za-z]",this.onComplete=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onInput=new l.vpe,this.onKeydown=new l.vpe,this.onClear=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){let e=be.getUserAgent();this.androidChrome=/chrome/i.test(e)&&/android/i.test(e),this.initMask()}get mask(){return this._mask}set mask(e){this._mask=e,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let e=this.mask.split("");for(let i=0;i<e.length;i++){let r=e[i];"?"==r?(this.len--,this.partialPosition=i):this.defs[r]?(this.tests.push(new RegExp(this.defs[r])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<e.length;i++){let r=e[i];"?"!=r&&this.buffer.push(this.defs[r]?this.getPlaceholder(i):r)}this.defaultBuffer=this.buffer.join("")}writeValue(e){this.value=e,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.value=null==this.value||null==this.value?"":this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value,this.updateFilledState())}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}caret(e,i){let r,s,c;if(this.inputViewChild.nativeElement.offsetParent&&this.inputViewChild.nativeElement===this.inputViewChild.nativeElement.ownerDocument.activeElement){if("number"!=typeof e)return this.inputViewChild.nativeElement.setSelectionRange?(s=this.inputViewChild.nativeElement.selectionStart,c=this.inputViewChild.nativeElement.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),s=0-r.duplicate().moveStart("character",-1e5),c=s+r.text.length),{begin:s,end:c};s=e,c="number"==typeof i?i:s,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(s,c):this.inputViewChild.nativeElement.createTextRange&&(r=this.inputViewChild.nativeElement.createTextRange(),r.collapse(!0),r.moveEnd("character",c),r.moveStart("character",s),r.select())}}isCompleted(){for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(e){return this.slotChar.charAt(e<this.slotChar.length?e:0)}seekNext(e){for(;++e<this.len&&!this.tests[e];);return e}seekPrev(e){for(;--e>=0&&!this.tests[e];);return e}shiftL(e,i){let r,s;if(!(e<0)){for(r=e,s=this.seekNext(i);r<this.len;r++)if(this.tests[r]){if(!(s<this.len&&this.tests[r].test(this.buffer[s])))break;this.buffer[r]=this.buffer[s],this.buffer[s]=this.getPlaceholder(s),s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}}shiftR(e){let i,r,s,c;for(i=e,r=this.getPlaceholder(e);i<this.len;i++)if(this.tests[i]){if(s=this.seekNext(i),c=this.buffer[i],this.buffer[i]=r,!(s<this.len&&this.tests[s].test(c)))break;r=c}}handleAndroidInput(e){var i=this.inputViewChild.nativeElement.value,r=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);r.begin>0&&!this.tests[r.begin-1];)r.begin--;if(0===r.begin)for(;r.begin<this.firstNonMaskPos&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);r.begin<this.len&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(e){if(this.focused=!1,this.onModelTouched(),this.checkVal(),this.updateFilledState(),this.onBlur.emit(e),this.inputViewChild.nativeElement.value!=this.focusText||this.inputViewChild.nativeElement.value!=this.value){this.updateModel(e);let i=document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild.nativeElement.dispatchEvent(i)}}onInputKeydown(e){if(this.readonly)return;let r,s,c,i=e.which||e.keyCode,h=/iphone/i.test(be.getUserAgent());this.oldVal=this.inputViewChild.nativeElement.value,this.onKeydown.emit(e),8===i||46===i||h&&127===i?(r=this.caret(),s=r.begin,c=r.end,c-s==0&&(s=46!==i?this.seekPrev(s):c=this.seekNext(s-1),c=46===i?this.seekNext(c):c),this.clearBuffer(s,c),this.shiftL(s,c-1),this.updateModel(e),this.onInput.emit(e),e.preventDefault()):13===i?(this.onInputBlur(e),this.updateModel(e)):27===i&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(e),e.preventDefault())}onKeyPress(e){if(!this.readonly){var s,c,h,g,i=e.which||e.keyCode,r=this.caret();e.ctrlKey||e.altKey||e.metaKey||i<32||i>34&&i<41||(i&&13!==i&&(r.end-r.begin!=0&&(this.clearBuffer(r.begin,r.end),this.shiftL(r.begin,r.end-1)),(s=this.seekNext(r.begin-1))<this.len&&(c=String.fromCharCode(i),this.tests[s].test(c)&&(this.shiftR(s),this.buffer[s]=c,this.writeBuffer(),h=this.seekNext(s),/android/i.test(be.getUserAgent())?setTimeout(()=>{this.caret(h)},0):this.caret(h),r.begin<=this.lastRequiredNonMaskPos&&(g=this.isCompleted()),this.onInput.emit(e))),e.preventDefault()),this.updateModel(e),this.updateFilledState(),g&&this.onComplete.emit())}}clearBuffer(e,i){let r;for(r=e;r<i&&r<this.len;r++)this.tests[r]&&(this.buffer[r]=this.getPlaceholder(r))}writeBuffer(){this.inputViewChild.nativeElement.value=this.buffer.join("")}checkVal(e){let s,c,h,i=this.inputViewChild.nativeElement.value,r=-1;for(s=0,h=0;s<this.len;s++)if(this.tests[s]){for(this.buffer[s]=this.getPlaceholder(s);h++<i.length;)if(c=i.charAt(h-1),this.tests[s].test(c)){this.buffer[s]=c,r=s;break}if(h>i.length){this.clearBuffer(s+1,this.len);break}}else this.buffer[s]===i.charAt(h)&&h++,s<this.partialPosition&&(r=s);return e?this.writeBuffer():r+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild.nativeElement.value.substring(0,r+1)),this.partialPosition?s:this.firstNonMaskPos}onInputFocus(e){if(this.readonly)return;let i;this.focused=!0,clearTimeout(this.caretTimeoutId),this.focusText=this.inputViewChild.nativeElement.value,i=this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild.nativeElement===this.inputViewChild.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(e)}onInputChange(e){this.androidChrome?this.handleAndroidInput(e):this.handleInputChange(e),this.onInput.emit(e)}handleInputChange(e){this.readonly||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let e=[];for(let i=0;i<this.buffer.length;i++){let r=this.buffer[i];this.tests[i]&&r!=this.getPlaceholder(i)&&e.push(r)}return e.join("")}updateModel(e){const i=this.unmask?this.getUnmaskedValue():e.target.value;(null!==i||void 0!==i)&&(this.value=i,this.onModelChange(this.value))}updateFilledState(){this.filled=this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}focus(){this.inputViewChild.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-inputMask"]],viewQuery:function(e,i){if(1&e&&l.Gf(wx,7),2&e){let r;l.iGM(r=l.CRH())&&(i.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:6,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputmask-clearable",i.showClear&&!i.disabled)},inputs:{type:"type",slotChar:"slotChar",autoClear:"autoClear",showClear:"showClear",style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",disabled:"disabled",readonly:"readonly",unmask:"unmask",name:"name",required:"required",characterPattern:"characterPattern",autoFocus:"autoFocus",autocomplete:"autocomplete",mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},features:[l._Bn([Ix])],decls:3,vars:18,consts:[["pInputText","","pAutoFocus","",1,"p-inputmask",3,"ngStyle","ngClass","disabled","readonly","autofocus","focus","blur","keydown","keypress","input","paste"],["input",""],["class","p-inputmask-clear-icon pi pi-times",3,"click",4,"ngIf"],[1,"p-inputmask-clear-icon","pi","pi-times",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"input",0,1),l.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onInputKeydown(s)})("keypress",function(s){return i.onKeyPress(s)})("input",function(s){return i.onInputChange(s)})("paste",function(s){return i.handleInputChange(s)}),l.qZA(),l.YNc(2,Cx,1,0,"i",2)),2&e&&(l.Q6J("ngStyle",i.style)("ngClass",i.styleClass)("disabled",i.disabled)("readonly",i.readonly)("autofocus",i.autoFocus),l.uIk("id",i.inputId)("type",i.type)("name",i.name)("placeholder",i.placeholder)("title",i.title)("size",i.size)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-label",i.ariaLabel)("aria-required",i.ariaRequired)("required",i.required),l.xp6(2),l.Q6J("ngIf",null!=i.value&&i.filled&&i.showClear&&!i.disabled))},dependencies:[qt,ln,Qi,_x,vx],styles:[".p-inputmask-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputmask-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),yf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,yx,$E]}),n})();const Ex=["overlay"],_v=["content"];function ba(n,t){1&n&&l.GkF(0)}const bx=function(n,t,e){return{showTransitionParams:n,hideTransitionParams:t,transform:e}},yv=function(n){return{value:"visible",params:n}},vf=function(n){return{mode:n}},Tx=function(n){return{$implicit:n}};function Dx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1,3),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentAnimationDone(r))}),l.Hsn(2),l.YNc(3,ba,1,0,"ng-container",4),l.qZA()}if(2&n){const e=l.oxw(2);l.Tol(e.contentStyleClass),l.Q6J("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",l.VKq(11,yv,l.kEZ(7,bx,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),l.xp6(3),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.VKq(15,Tx,l.VKq(13,vf,e.overlayMode)))}}const Sx=function(n,t,e,i,r,s,c,h,g,y,E,D,x,L){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":n,"p-overlay-center":t,"p-overlay-top":e,"p-overlay-top-start":i,"p-overlay-top-end":r,"p-overlay-bottom":s,"p-overlay-bottom-start":c,"p-overlay-bottom-end":h,"p-overlay-left":g,"p-overlay-left-start":y,"p-overlay-left-end":E,"p-overlay-right":D,"p-overlay-right-start":x,"p-overlay-right-end":L}};function Zg(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1,2),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayClick(r))}),l.YNc(2,Dx,4,17,"div",0),l.qZA()}if(2&n){const e=l.oxw();l.Tol(e.styleClass),l.Q6J("ngStyle",e.style)("ngClass",l.rFY(5,Sx,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),l.xp6(2),l.Q6J("ngIf",e.visible)}}const Kg=["*"],Ax={provide:Ar,useExisting:(0,l.Gpc)(()=>vv),multi:!0},xx=rI([Hs({transform:"{{transform}}",opacity:0}),gs("{{showTransitionParams}}")]),zE=rI([gs("{{hideTransitionParams}}",Hs({transform:"{{transform}}",opacity:0}))]);let vv=(()=>{class n{constructor(e,i,r,s,c,h){this.document=e,this.el=i,this.renderer=r,this.config=s,this.overlayService=c,this.cd=h,this.visibleChange=new l.vpe,this.onBeforeShow=new l.vpe,this.onShow=new l.vpe,this.onBeforeHide=new l.vpe,this.onHide=new l.vpe,this.onAnimationStart=new l.vpe,this.onAnimationDone=new l.vpe,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return Cn.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return Cn.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return Cn.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return Cn.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}get modal(){return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return be.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,i=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&be.focus(this.targetEl),this.modal&&be.addClass(this.document?.body,"p-overflow-hidden")}hide(e,i=!1){this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&be.focus(this.targetEl),this.modal&&be.removeClass(this.document?.body,"p-overflow-hidden")}alignOverlay(){!this.modal&&be.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&js.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),be.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),this.modal&&be.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const i=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(i,!0),this.bindListeners();break;case"void":this.hide(i,!0),this.unbindListeners(),js.clear(i),this.modalVisible=!1}this.handleEvents("onAnimationDone",e)}handleEvents(e,i){this[e].emit(i),this.options&&this.options[e]&&this.options[e](i),this.config?.overlayOptions&&this.config?.overlayOptions[e]&&this.config?.overlayOptions[e](i)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Yr(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen("window","resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!be.isTouchDevice()}):!be.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),js.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(me),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(sd),l.Y36(rd),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-overlay"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,ki,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(Ex,5),l.Gf(_v,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.overlayViewChild=r.first),l.iGM(r=l.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[l._Bn([Ax])],ngContentSelectors:Kg,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,Zg,3,20,"div",0)),2&e&&l.Q6J("ngIf",i.modalVisible)},dependencies:[qt,ln,Vi,Qi],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[Bs("overlayContentAnimation",[Ea(":enter",[sI(xx)]),Ea(":leave",[sI(zE)])])]},changeDetection:0}),n})(),Yg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Gs,Gs]}),n})();const qE=["element"],Mx=["content"];function kx(n,t){1&n&&l.GkF(0)}const ZE=function(n,t){return{$implicit:n,options:t}};function wv(n,t){if(1&n&&(l.ynx(0),l.YNc(1,kx,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.WLB(2,ZE,e.loadedItems,e.getContentOptions()))}}function Cv(n,t){1&n&&l.GkF(0)}function KE(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Cv,1,0,"ng-container",7),l.BQk()),2&n){const e=t.$implicit,i=t.index,r=l.oxw(3);l.xp6(1),l.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",l.WLB(2,ZE,e,r.getOptions(i)))}}const Iv=function(n){return{"p-scroller-loading":n}};function Ev(n,t){if(1&n&&(l.TgZ(0,"div",8,9),l.YNc(2,KE,2,5,"ng-container",10),l.qZA()),2&n){const e=l.oxw(2);l.Q6J("ngClass",l.VKq(4,Iv,e.d_loading))("ngStyle",e.contentStyle),l.xp6(2),l.Q6J("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function Ox(n,t){if(1&n&&l._UZ(0,"div",11),2&n){const e=l.oxw(2);l.Q6J("ngStyle",e.spacerStyle)}}function Rx(n,t){1&n&&l.GkF(0)}const Nx=function(n){return{numCols:n}},YE=function(n){return{options:n}};function QE(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Rx,1,0,"ng-container",7),l.BQk()),2&n){const e=t.index,i=l.oxw(4);l.xp6(1),l.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",l.VKq(4,YE,i.getLoaderOptions(e,i.both&&l.VKq(2,Nx,i._numItemsInViewport.cols))))}}function bv(n,t){if(1&n&&(l.ynx(0),l.YNc(1,QE,2,6,"ng-container",14),l.BQk()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.loaderArr)}}function JE(n,t){1&n&&l.GkF(0)}const XE=function(){return{styleClass:"p-scroller-loading-icon"}};function eb(n,t){if(1&n&&(l.ynx(0),l.YNc(1,JE,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.Q6J("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",l.VKq(3,YE,l.DdM(2,XE)))}}function tb(n,t){1&n&&l._UZ(0,"i",16)}function Px(n,t){if(1&n&&(l.YNc(0,eb,2,5,"ng-container",0),l.YNc(1,tb,1,0,"ng-template",null,15,l.W1O)),2&n){const e=l.MAs(2),i=l.oxw(3);l.Q6J("ngIf",i.loaderIconTemplate)("ngIfElse",e)}}const nb=function(n){return{"p-component-overlay":n}};function ib(n,t){if(1&n&&(l.TgZ(0,"div",12),l.YNc(1,bv,2,1,"ng-container",0),l.YNc(2,Px,3,2,"ng-template",null,13,l.W1O),l.qZA()),2&n){const e=l.MAs(3),i=l.oxw(2);l.Q6J("ngClass",l.VKq(3,nb,!i.loaderTemplate)),l.xp6(1),l.Q6J("ngIf",i.loaderTemplate)("ngIfElse",e)}}const Fx=function(n,t,e){return{"p-scroller":!0,"p-scroller-inline":n,"p-both-scroll":t,"p-horizontal-scroll":e}};function rb(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"div",2,3),l.NdJ("scroll",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onContainerScroll(r))}),l.YNc(3,wv,2,5,"ng-container",0),l.YNc(4,Ev,3,6,"ng-template",null,4,l.W1O),l.YNc(6,Ox,1,1,"div",5),l.YNc(7,ib,4,5,"div",6),l.qZA(),l.BQk()}if(2&n){const e=l.MAs(5),i=l.oxw();l.xp6(1),l.Tol(i._styleClass),l.Q6J("ngStyle",i._style)("ngClass",l.kEZ(10,Fx,i.inline,i.both,i.horizontal)),l.uIk("id",i._id)("tabindex",i.tabindex),l.xp6(2),l.Q6J("ngIf",i.contentTemplate)("ngIfElse",e),l.xp6(3),l.Q6J("ngIf",i._showSpacer),l.xp6(1),l.Q6J("ngIf",!i.loaderDisabled&&i._showLoader&&i.d_loading)}}function sb(n,t){1&n&&l.GkF(0)}const Mr=function(n,t){return{rows:n,columns:t}};function xd(n,t){if(1&n&&(l.ynx(0),l.YNc(1,sb,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.WLB(5,ZE,e.items,l.WLB(2,Mr,e._items,e.loadedColumns)))}}function Lx(n,t){if(1&n&&(l.Hsn(0),l.YNc(1,xd,2,8,"ng-container",17)),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.contentTemplate)}}const Vx=["*"];let sP=(()=>{class n{constructor(e,i){this.cd=e,this.zone=i,this.onLazyLoad=new l.vpe,this.onScroll=new l.vpe,this.onScrollIndexChange=new l.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([i,r])=>this[`_${i}`]!==r&&(this[`_${i}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(e){let i=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,i=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading,i=!0),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}this.initialized&&!i&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.viewInit()}ngAfterViewChecked(){this.initialized||this.viewInit(),this.calculateAutoSize()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){be.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=be.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=be.getHeight(this.elementViewChild.nativeElement),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||be.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,i="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),c=(y=0,E)=>y<=E?0:y,h=(y,E,D)=>y*E+D,g=(y=0,E=0)=>this.scrollTo({left:y,top:E,behavior:i});this.both?(this.first={rows:c(e[0],r[0]),cols:c(e[1],r[1])},g(h(this.first.cols,this._itemSize[1],s.left),h(this.first.rows,this._itemSize[0],s.top))):(this.first=c(e,r),this.horizontal?g(h(this.first,this._itemSize,s.left),0):g(0,h(this.first,this._itemSize,s.top)))}scrollInView(e,i,r="auto"){if(i){const{first:s,viewport:c}=this.getRenderedRange(),h=(E=0,D=0)=>this.scrollTo({left:E,top:D,behavior:r}),y="to-end"===i;if("to-start"===i){if(this.both)c.first.rows-s.rows>e[0]?h(c.first.cols*this._itemSize[1],(c.first.rows-1)*this._itemSize[0]):c.first.cols-s.cols>e[1]&&h((c.first.cols-1)*this._itemSize[1],c.first.rows*this._itemSize[0]);else if(c.first-s>e){const E=(c.first-1)*this._itemSize;this.horizontal?h(E,0):h(0,E)}}else if(y)if(this.both)c.last.rows-s.rows<=e[0]+1?h(c.first.cols*this._itemSize[1],(c.first.rows+1)*this._itemSize[0]):c.last.cols-s.cols<=e[1]+1&&h((c.first.cols+1)*this._itemSize[1],c.first.rows*this._itemSize[0]);else if(c.last-s<=e+1){const E=(c.first+1)*this._itemSize;this.horizontal?h(E,0):h(0,E)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,c)=>Math.floor(s/(c||s));let i=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:c}=this.elementViewChild.nativeElement;this.both?(i={rows:e(s,this._itemSize[0]),cols:e(c,this._itemSize[1])},r={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols}):(i=e(this.horizontal?c:s,this._itemSize),r=i+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:i,last:r}}}calculateNumItems(){const e=this.getContentPosition(),i=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(y,E)=>Math.ceil(y/(E||y)),c=y=>Math.ceil(y/2),h=this.both?{rows:s(r,this._itemSize[0]),cols:s(i,this._itemSize[1])}:s(this.horizontal?i:r,this._itemSize);return{numItemsInViewport:h,numToleratedItems:this.d_numToleratedItems||(this.both?[c(h.rows),c(h.cols)]:c(h))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:i}=this.calculateNumItems(),r=(h,g,y,E=!1)=>this.getLast(h+g+(h<y?2:3)*y,E),s=this.first,c=this.both?{rows:r(this.first.rows,e.rows,i[0]),cols:r(this.first.cols,e.cols,i[1],!0)}:r(this.first,e,i);this.last=c,this.numItemsInViewport=e,this.d_numToleratedItems=i,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:s.cols}:0:s,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:i}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(i<this.defaultHeight?i:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,i=!1){return this._items?Math.min(i?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),i=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),s=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),c=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:i,right:r,top:s,bottom:c,x:i+r,y:s+c}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,i=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(c,h)=>this.elementViewChild.nativeElement.style[c]=h;this.both||this.horizontal?(s("height",r),s("width",i)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),i=(r,s,c,h=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*c+h+"px"};this.both?(i("height",this._items,this._itemSize[0],e.y),i("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?i("width",this._columns||this._items,this._itemSize,e.x):i("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const i=e?e.first:this.first,r=(c,h)=>c*h,s=(c=0,h=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${c}px, ${h}px, 0)`};if(this.both)s(r(i.cols,this._itemSize[1]),r(i.rows,this._itemSize[0]));else{const c=r(i,this._itemSize);this.horizontal?s(c,0):s(0,c)}}}onScrollPositionChange(e){const i=e.target,r=this.getContentPosition(),s=(ne,ze)=>ne?ne>ze?ne-ze:ne:0,c=(ne,ze)=>Math.floor(ne/(ze||ne)),h=(ne,ze,Ke,qe,Je,mt)=>ne<=Je?Je:mt?Ke-qe-Je:ze+Je-1,g=(ne,ze,Ke,qe,Je,mt,At)=>ne<=mt?0:Math.max(0,At?ne<ze?Ke:ne-mt:ne>ze?Ke:ne-2*mt),y=(ne,ze,Ke,qe,Je,mt=!1)=>{let At=ze+qe+2*Je;return ne>=Je&&(At+=Je+1),this.getLast(At,mt)},E=s(i.scrollTop,r.top),D=s(i.scrollLeft,r.left);let x=this.both?{rows:0,cols:0}:0,L=this.last,G=!1,ie=this.lastScrollPos;if(this.both){const ne=this.lastScrollPos.top<=E,ze=this.lastScrollPos.left<=D;if(!this._appendOnly||this._appendOnly&&(ne||ze)){const Ke={rows:c(E,this._itemSize[0]),cols:c(D,this._itemSize[1])},qe={rows:h(Ke.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],ne),cols:h(Ke.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],ze)};x={rows:g(Ke.rows,qe.rows,this.first.rows,0,0,this.d_numToleratedItems[0],ne),cols:g(Ke.cols,qe.cols,this.first.cols,0,0,this.d_numToleratedItems[1],ze)},L={rows:y(Ke.rows,x.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:y(Ke.cols,x.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},G=x.rows!==this.first.rows||L.rows!==this.last.rows||x.cols!==this.first.cols||L.cols!==this.last.cols,ie={top:E,left:D}}}else{const ne=this.horizontal?D:E,ze=this.lastScrollPos<=ne;if(!this._appendOnly||this._appendOnly&&ze){const Ke=c(ne,this._itemSize);x=g(Ke,h(Ke,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ze),this.first,0,0,this.d_numToleratedItems,ze),L=y(Ke,x,0,this.numItemsInViewport,this.d_numToleratedItems),G=x!==this.first||L!==this.last,ie=ne}}return{first:x,last:L,isRangeChanged:G,scrollPos:ie}}onScrollChange(e){const{first:i,last:r,isRangeChanged:s,scrollPos:c}=this.onScrollPositionChange(e);if(s){const h={first:i,last:r};if(this.setContentPosition(h),this.first=i,this.last=r,this.lastScrollPos=c,this.handleEvents("onScrollIndexChange",h),this._lazy&&this.isPageChanged){const g={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):i,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==g.first||this.lazyLoadState.last!==g.last)&&this.handleEvents("onLazyLoad",g),this.lazyLoadState=g}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:i}=this.onScrollPositionChange(e);(i||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}unbindResizeListener(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(be.isVisible(this.elementViewChild?.nativeElement)){const[e,i]=[be.getWidth(this.elementViewChild.nativeElement),be.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,i!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=i,this.init()})}},this._resizeDelay)}handleEvents(e,i){return this.options&&this.options[e]?this.options[e](i):this[e].emit(i)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,i)=>this.getLoaderOptions(e,i),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const i=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:i,first:0===r,last:r===i-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,i){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...i}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-scroller"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,ki,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(qE,5),l.Gf(Mx,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.elementViewChild=r.first),l.iGM(r=l.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[l.TTD],ngContentSelectors:Vx,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,i){if(1&e&&(l.F$t(),l.YNc(0,rb,8,14,"ng-container",0),l.YNc(1,Lx,2,1,"ng-template",null,1,l.W1O)),2&e){const r=l.MAs(2);l.Q6J("ngIf",!i._disabled)("ngIfElse",r)}},dependencies:[qt,ar,ln,Vi,Qi],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),n})(),Ux=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})(),ob=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?be.appendChild(this.container,this.el.nativeElement):be.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),be.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?js.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&js.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+be.getWindowScrollLeft(),top:e.top+be.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+be.getOuterWidth(this.el.nativeElement),r=e.top+(be.getOuterHeight(this.el.nativeElement)-be.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-be.getOuterWidth(this.container),r=e.top+(be.getOuterHeight(this.el.nativeElement)-be.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(be.getOuterWidth(this.el.nativeElement)-be.getOuterWidth(this.container))/2,r=e.top-be.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(be.getOuterWidth(this.el.nativeElement)-be.getOuterWidth(this.container))/2,r=e.top+be.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return be.hasClass(e,"p-inputwrapper")?be.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,s=be.getOuterWidth(this.container),c=be.getOuterHeight(this.container),h=be.getViewport();return r+s>h.width||r<0||i<0||i+c>h.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Yr(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):be.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&js.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(sd))},n.\u0275dir=l.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[l.TTD]}),n})(),ab=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})();function wf(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.label||"empty")}}function Bx(n,t){1&n&&l.GkF(0)}const Hu=function(n){return{height:n}},Hx=function(n,t){return{"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t}},Qg=function(n){return{$implicit:n}},jx=["container"],Gx=["filter"],$x=["in"],Tv=["editableInput"],lb=["items"],ub=["scroller"],Jg=["overlay"];function Dv(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Oqu(e.label||"empty")}}function oP(n,t){1&n&&l.GkF(0)}const cb=function(n){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":n}};function Wx(n,t){if(1&n&&(l.TgZ(0,"span",14),l.YNc(1,Dv,2,1,"ng-container",15),l.YNc(2,oP,1,0,"ng-container",16),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngClass",l.VKq(9,cb,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),l.uIk("id",e.labelId),l.xp6(1),l.Q6J("ngIf",!e.selectedItemTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",l.VKq(11,Qg,e.selectedOption))}}const db=function(n){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":n}};function Md(n,t){if(1&n&&(l.TgZ(0,"span",17),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngClass",l.VKq(2,db,null==e.placeholder||0===e.placeholder.length)),l.xp6(1),l.Oqu(e.placeholder||"empty")}}function zx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"input",18,19),l.NdJ("input",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onEditableInputChange(r))})("focus",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onEditableInputFocus(r))})("blur",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputBlur(r))}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("disabled",e.disabled),l.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function hb(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",20),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.clear(r))}),l.qZA()}}function Sv(n,t){1&n&&l.GkF(0)}function aP(n,t){1&n&&l.GkF(0)}const fb=function(n){return{options:n}};function lP(n,t){if(1&n&&(l.ynx(0),l.YNc(1,aP,1,0,"ng-container",16),l.BQk()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",l.VKq(2,fb,e.filterOptions))}}function qx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",30)(1,"input",31,32),l.NdJ("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onKeydown(r,!1))})("input",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onFilterInputChange(r))}),l.qZA(),l._UZ(3,"span",33),l.qZA()}if(2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("value",e.filterValue||""),l.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function Zx(n,t){if(1&n&&(l.TgZ(0,"div",27),l.NdJ("click",function(i){return i.stopPropagation()}),l.YNc(1,lP,2,4,"ng-container",28),l.YNc(2,qx,4,4,"ng-template",null,29,l.W1O),l.qZA()),2&n){const e=l.MAs(3),i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",i.filterTemplate)("ngIfElse",e)}}function Kx(n,t){1&n&&l.GkF(0)}const Av=function(n,t){return{$implicit:n,options:t}};function pb(n,t){if(1&n&&l.YNc(0,Kx,1,0,"ng-container",16),2&n){const e=t.$implicit,i=t.options;l.oxw(2);const r=l.MAs(7);l.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",l.WLB(2,Av,e,i))}}function Yx(n,t){1&n&&l.GkF(0)}function gb(n,t){if(1&n&&l.YNc(0,Yx,1,0,"ng-container",16),2&n){const e=t.options,i=l.oxw(4);l.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",l.VKq(2,fb,e))}}function mb(n,t){1&n&&(l.ynx(0),l.YNc(1,gb,1,4,"ng-template",36),l.BQk())}function Qx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"p-scroller",34,35),l.NdJ("onLazyLoad",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onLazyLoad.emit(r))}),l.YNc(2,pb,1,5,"ng-template",13),l.YNc(3,mb,2,0,"ng-container",15),l.qZA()}if(2&n){const e=l.oxw(2);l.Akn(l.VKq(8,Hu,e.scrollHeight)),l.Q6J("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),l.xp6(3),l.Q6J("ngIf",e.loaderTemplate)}}function Jx(n,t){1&n&&l.GkF(0)}const _b=function(){return{}};function Xx(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Jx,1,0,"ng-container",16),l.BQk()),2&n){l.oxw();const e=l.MAs(7),i=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",l.WLB(3,Av,i.optionsToDisplay,l.DdM(2,_b)))}}function yb(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,i=l.oxw(4);l.xp6(1),l.Oqu(i.getOptionGroupLabel(e)||"empty")}}function vb(n,t){1&n&&l.GkF(0)}function wb(n,t){1&n&&l.GkF(0)}const xv=function(n,t){return{$implicit:n,selectedOption:t}};function eM(n,t){if(1&n&&(l.TgZ(0,"li",42),l.YNc(1,yb,2,1,"span",15),l.YNc(2,vb,1,0,"ng-container",16),l.qZA(),l.YNc(3,wb,1,0,"ng-container",16)),2&n){const e=t.$implicit,i=l.oxw(2).options,r=l.MAs(5),s=l.oxw(2);l.Q6J("ngStyle",l.VKq(6,Hu,i.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!s.groupTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",l.VKq(8,Qg,e)),l.xp6(1),l.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",l.WLB(10,xv,s.getOptionGroupChildren(e),s.selectedOption))}}function tM(n,t){if(1&n&&(l.ynx(0),l.YNc(1,eM,4,13,"ng-template",41),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngForOf",e)}}function uP(n,t){1&n&&l.GkF(0)}function Cb(n,t){if(1&n&&(l.ynx(0),l.YNc(1,uP,1,0,"ng-container",16),l.BQk()),2&n){const e=l.oxw().$implicit,i=l.MAs(5),r=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",l.WLB(2,xv,e,r.selectedOption))}}function cP(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"p-dropdownItem",43),l.NdJ("onClick",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onItemClick(r))}),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw().selectedOption,r=l.oxw(3);l.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function dP(n,t){1&n&&l.YNc(0,cP,1,5,"ng-template",41),2&n&&l.Q6J("ngForOf",t.$implicit)}function hP(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.hij(" ",e.emptyFilterMessageLabel," ")}}function fP(n,t){1&n&&l.GkF(0,null,45)}function pP(n,t){if(1&n&&(l.TgZ(0,"li",44),l.YNc(1,hP,2,1,"ng-container",28),l.YNc(2,fP,2,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw().options,i=l.oxw(2);l.Q6J("ngStyle",l.VKq(4,Hu,e.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),l.xp6(1),l.Q6J("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function gP(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.hij(" ",e.emptyMessageLabel," ")}}function mP(n,t){1&n&&l.GkF(0,null,46)}function _P(n,t){if(1&n&&(l.TgZ(0,"li",44),l.YNc(1,gP,2,1,"ng-container",28),l.YNc(2,mP,2,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw().options,i=l.oxw(2);l.Q6J("ngStyle",l.VKq(4,Hu,e.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),l.xp6(1),l.Q6J("ngTemplateOutlet",i.emptyTemplate)}}function Xg(n,t){if(1&n&&(l.TgZ(0,"ul",37,38),l.YNc(2,tM,2,1,"ng-container",15),l.YNc(3,Cb,2,5,"ng-container",15),l.YNc(4,dP,1,1,"ng-template",null,39,l.W1O),l.YNc(6,pP,3,6,"li",40),l.YNc(7,_P,3,6,"li",40),l.qZA()),2&n){const e=t.options,i=l.oxw(2);l.Akn(e.contentStyle),l.Q6J("ngClass",e.contentStyleClass),l.uIk("id",i.listId),l.xp6(2),l.Q6J("ngIf",i.group),l.xp6(1),l.Q6J("ngIf",!i.group),l.xp6(3),l.Q6J("ngIf",i.filterValue&&i.isEmpty()),l.xp6(1),l.Q6J("ngIf",!i.filterValue&&i.isEmpty())}}function yP(n,t){1&n&&l.GkF(0)}function Ib(n,t){if(1&n&&(l.TgZ(0,"div",21),l.YNc(1,Sv,1,0,"ng-container",22),l.YNc(2,Zx,4,2,"div",23),l.TgZ(3,"div",24),l.YNc(4,Qx,4,10,"p-scroller",25),l.YNc(5,Xx,2,6,"ng-container",15),l.YNc(6,Xg,8,8,"ng-template",null,26,l.W1O),l.qZA(),l.YNc(8,yP,1,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw();l.Tol(e.panelStyleClass),l.Q6J("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),l.xp6(1),l.Q6J("ngTemplateOutlet",e.headerTemplate),l.xp6(1),l.Q6J("ngIf",e.filter),l.xp6(1),l.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),l.xp6(1),l.Q6J("ngIf",e.virtualScroll),l.xp6(1),l.Q6J("ngIf",!e.virtualScroll),l.xp6(3),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const em=function(n,t,e,i){return{"p-dropdown p-component":!0,"p-disabled":n,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":i}},Eb={provide:Ar,useExisting:(0,l.Gpc)(()=>nM),multi:!0};let bb=(()=>{class n{constructor(){this.onClick=new l.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(l.TgZ(0,"li",0),l.NdJ("click",function(s){return i.onOptionClick(s)}),l.YNc(1,wf,2,1,"span",1),l.YNc(2,Bx,1,0,"ng-container",2),l.qZA()),2&e&&(l.Q6J("ngStyle",l.VKq(8,Hu,i.itemSize+"px"))("id",i.selected?"p-highlighted-option":"")("ngClass",l.WLB(10,Hx,i.selected,i.disabled)),l.uIk("aria-label",i.label)("aria-selected",i.selected),l.xp6(1),l.Q6J("ngIf",!i.template),l.xp6(1),l.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",l.VKq(13,Qg,i.option)))},dependencies:[qt,ln,Vi,Qi,ad],encapsulation:2}),n})(),nM=(()=>{class n{constructor(e,i,r,s,c,h){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=c,this.config=h,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.overlayDirection="end",this.onChange=new l.vpe,this.onFilter=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onClick=new l.vpe,this.onShow=new l.vpe,this.onHide=new l.vpe,this.onClear=new l.vpe,this.onLazyLoad=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=oI()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&Cn.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(kn.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(kn.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?Cn.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?Cn.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?Cn.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Cn.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Cn.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const i=e.option;this.isOptionDisabled(i)||(this.selectItem(e.originalEvent,i),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(e,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(be.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")&&be.scrollInView(this.itemsWrapper,be.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(e){return be.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){if("visible"===e.toState){if(this.itemsWrapper=be.findSingle(this.overlayViewChild.el.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const i=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==i&&this.scroller.scrollToIndex(i)}else{let i=be.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");i&&i.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}"void"===e.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}findNextEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}onKeydown(e,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let c=this.optionsToDisplay[r.groupIndex-1];c&&(this.selectItem(e,this.getOptionGroupChildren(c)[this.getOptionGroupChildren(c).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:i&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:i&&!e.metaKey&&17!==e.which&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,e))),i}searchOptionInRange(e,i){for(let r=e;r<i;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let c=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(c).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(c))return c}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let c=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(c).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(c))return c}}return null}findOptionIndex(e,i){let r=-1;if(i)for(let s=0;s<i.length;s++)if(null==e&&null==this.getOptionValue(i[s])||Cn.equals(e,this.getOptionValue(i[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,i){let r,s;if(i)for(let c=0;c<i.length&&(r=c,s=this.findOptionIndex(e,this.getOptionGroupChildren(i[c])),-1===s);c++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,i,r){if(this.group&&!r){let s;if(i&&i.length)for(let c of i)if(s=this.findOption(e,this.getOptionGroupChildren(c),!0),s)break;return s}{let s=this.findOptionIndex(e,i);return-1!=s?i[s]:null}}onFilterInputChange(e){let i=e.target.value;i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?be.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():be.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(Fu),l.Y36(sd))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-dropdown"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,ki,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(jx,5),l.Gf(Gx,5),l.Gf($x,5),l.Gf(Tv,5),l.Gf(lb,5),l.Gf(ub,5),l.Gf(Jg,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.containerViewChild=r.first),l.iGM(r=l.CRH())&&(i.filterViewChild=r.first),l.iGM(r=l.CRH())&&(i.accessibleViewChild=r.first),l.iGM(r=l.CRH())&&(i.editableInputViewChild=r.first),l.iGM(r=l.CRH())&&(i.itemsViewChild=r.first),l.iGM(r=l.CRH())&&(i.scroller=r.first),l.iGM(r=l.CRH())&&(i.overlayViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",overlayDirection:"overlayDirection",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[l._Bn([Eb])],decls:14,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,i){1&e&&(l.TgZ(0,"div",0,1),l.NdJ("click",function(s){return i.onMouseclick(s)}),l.TgZ(2,"div",2)(3,"input",3,4),l.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onKeydown(s,!0)}),l.qZA()(),l.YNc(5,Wx,3,13,"span",5),l.YNc(6,Md,2,4,"span",6),l.YNc(7,zx,2,4,"input",7),l.YNc(8,hb,1,0,"i",8),l.TgZ(9,"div",9),l._UZ(10,"span",10),l.qZA(),l.TgZ(11,"p-overlay",11,12),l.NdJ("visibleChange",function(s){return i.overlayVisible=s})("onAnimationStart",function(s){return i.onOverlayAnimationStart(s)})("onHide",function(){return i.hide()}),l.YNc(13,Ib,9,11,"ng-template",13),l.qZA()()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",l.l5B(27,em,i.disabled,i.overlayVisible,i.focused,i.showClear&&!i.disabled))("ngStyle",i.style),l.xp6(3),l.Q6J("disabled",i.disabled)("autofocus",i.autofocus),l.uIk("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-expanded",!1)("aria-labelledby",i.ariaLabelledBy)("tabindex",i.tabindex)("aria-activedescendant",i.overlayVisible?i.labelId:null),l.xp6(2),l.Q6J("ngIf",!i.editable&&null!=i.label),l.xp6(1),l.Q6J("ngIf",!i.editable&&null==i.label),l.xp6(1),l.Q6J("ngIf",i.editable),l.xp6(1),l.Q6J("ngIf",i.isVisibleClearIcon),l.xp6(1),l.uIk("aria-expanded",i.overlayVisible),l.xp6(1),l.Q6J("ngClass",i.dropdownIcon),l.xp6(1),l.Q6J("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions))},dependencies:[qt,ar,ln,Vi,Qi,vv,ki,ob,sP,vx,bb],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,changeDetection:0}),n})(),Mv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Yg,Gs,ab,al,Ux,$E,Yg,Gs,Ux]}),n})();const Tb=["mask"];function iM(n,t){1&n&&l.GkF(0)}function Db(n,t){if(1&n&&(l.ynx(0),l.YNc(1,iM,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.indicatorTemplate)}}function vP(n,t){1&n&&l._UZ(0,"i",8)}function wP(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",4),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onImageClick())}),l.YNc(1,Db,2,1,"ng-container",5),l.YNc(2,vP,1,0,"ng-template",null,6,l.W1O),l.qZA()}if(2&n){const e=l.MAs(3),i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.indicatorTemplate)("ngIfElse",e)}}const rM=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},sM=function(n){return{value:"visible",params:n}};function tm(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div"),l.NdJ("@animation.start",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onAnimationStart(r))})("@animation.done",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onAnimationEnd(r))}),l.TgZ(1,"img",20),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onPreviewImageClick())}),l.qZA()()}if(2&n){const e=l.oxw(2);l.Q6J("@animation",l.VKq(6,sM,l.WLB(3,rM,e.showTransitionOptions,e.hideTransitionOptions))),l.xp6(1),l.Q6J("ngStyle",e.imagePreviewStyle()),l.uIk("src",e.src,l.LSH)}}function oM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",9,10),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onMaskClick())}),l.TgZ(2,"div",11),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.handleToolbarClick(r))}),l.TgZ(3,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateRight())}),l._UZ(4,"i",13),l.qZA(),l.TgZ(5,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateLeft())}),l._UZ(6,"i",14),l.qZA(),l.TgZ(7,"button",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.zoomOut())}),l._UZ(8,"i",16),l.qZA(),l.TgZ(9,"button",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.zoomIn())}),l._UZ(10,"i",17),l.qZA(),l.TgZ(11,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.closePreview())}),l._UZ(12,"i",18),l.qZA()(),l.YNc(13,tm,2,8,"div",19),l.qZA()}if(2&n){const e=l.oxw();l.xp6(7),l.Q6J("disabled",e.isZoomOutDisabled),l.xp6(2),l.Q6J("disabled",e.isZoomInDisabled),l.xp6(4),l.Q6J("ngIf",e.previewVisible)}}let CP=(()=>{class n{constructor(e,i){this.config=e,this.cd=i,this.preview=!1,this.showTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.onShow=new l.vpe,this.onHide=new l.vpe,this.onImageError=new l.vpe,this.maskVisible=!1,this.previewVisible=!1,this.rotate=0,this.scale=1,this.previewClick=!1,this.zoomSettings={default:1,step:.1,max:1.5,min:.5}}get isZoomOutDisabled(){return this.scale-this.zoomSettings.step<=this.zoomSettings.min}get isZoomInDisabled(){return this.scale+this.zoomSettings.step>=this.zoomSettings.max}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.indicatorTemplate=e.template})}onImageClick(){this.preview&&(this.maskVisible=!0,this.previewVisible=!0)}onMaskClick(){this.previewClick||this.closePreview(),this.previewClick=!1}onPreviewImageClick(){this.previewClick=!0}rotateRight(){this.rotate+=90,this.previewClick=!0}rotateLeft(){this.rotate-=90,this.previewClick=!0}zoomIn(){this.scale=this.scale+this.zoomSettings.step,this.previewClick=!0}zoomOut(){this.scale=this.scale-this.zoomSettings.step,this.previewClick=!0}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop();break;case"void":be.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":js.clear(this.wrapper),this.maskVisible=!1,this.container=null,this.wrapper=null,this.cd.markForCheck(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}moveOnTop(){js.set("modal",this.wrapper,this.config.zIndex.modal)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):be.appendChild(this.wrapper,this.appendTo))}imagePreviewStyle(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}}containerClass(){return{"p-image p-component":!0,"p-image-preview-container":this.preview}}handleToolbarClick(e){e.stopPropagation()}closePreview(){this.previewVisible=!1,this.rotate=0,this.scale=this.zoomSettings.default}imageError(e){this.onImageError.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(sd),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-image"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,ki,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&l.Gf(Tb,5),2&e){let r;l.iGM(r=l.CRH())&&(i.mask=r.first)}},hostAttrs:[1,"p-element"],inputs:{imageClass:"imageClass",imageStyle:"imageStyle",styleClass:"styleClass",style:"style",src:"src",alt:"alt",width:"width",height:"height",appendTo:"appendTo",preview:"preview",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide",onImageError:"onImageError"},decls:4,vars:13,consts:[[3,"ngClass","ngStyle"],[3,"ngStyle","error"],["class","p-image-preview-indicator",3,"click",4,"ngIf"],["class","p-image-mask p-component-overlay p-component-overlay-enter",3,"click",4,"ngIf"],[1,"p-image-preview-indicator",3,"click"],[4,"ngIf","ngIfElse"],["defaultTemplate",""],[4,"ngTemplateOutlet"],[1,"p-image-preview-icon","pi","pi-eye"],[1,"p-image-mask","p-component-overlay","p-component-overlay-enter",3,"click"],["mask",""],[1,"p-image-toolbar",3,"click"],["type","button",1,"p-image-action","p-link",3,"click"],[1,"pi","pi-refresh"],[1,"pi","pi-undo"],["type","button",1,"p-image-action","p-link",3,"disabled","click"],[1,"pi","pi-search-minus"],[1,"pi","pi-search-plus"],[1,"pi","pi-times"],[4,"ngIf"],[1,"p-image-preview",3,"ngStyle","click"]],template:function(e,i){1&e&&(l.TgZ(0,"span",0)(1,"img",1),l.NdJ("error",function(s){return i.imageError(s)}),l.qZA(),l.YNc(2,wP,4,2,"div",2),l.YNc(3,oM,14,3,"div",3),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",i.containerClass())("ngStyle",i.style),l.xp6(1),l.Tol(i.imageClass),l.Q6J("ngStyle",i.imageStyle),l.uIk("src",i.src,l.LSH)("alt",i.alt)("width",i.width)("height",i.height),l.xp6(1),l.Q6J("ngIf",i.preview),l.xp6(1),l.Q6J("ngIf",i.maskVisible))},dependencies:[qt,ln,Vi,Qi],styles:[".p-image-mask{display:flex;align-items:center;justify-content:center}.p-image-preview-container{position:relative;display:inline-block}.p-image-preview-indicator{position:absolute;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s}.p-image-preview-icon{font-size:1.5rem}.p-image-preview-container:hover>.p-image-preview-indicator{opacity:1;cursor:pointer}.p-image-preview-container>img{cursor:pointer}.p-image-toolbar{position:absolute;top:0;right:0;display:flex;z-index:1}.p-image-action.p-link{display:flex;justify-content:center;align-items:center}.p-image-action.p-link[disabled]{opacity:.5}.p-image-preview{transition:transform .15s;max-width:100vw;max-height:100vh}\n"],encapsulation:2,data:{animation:[Bs("animation",[Ea("void => visible",[Hs({transform:"scale(0.7)",opacity:0}),gs("{{showTransitionParams}}")]),Ea("visible => void",[gs("{{hideTransitionParams}}",Hs({transform:"scale(0.7)",opacity:0}))])])]},changeDetection:0}),n})(),IP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Gs]}),n})();const aM=function(){return{width:"100%"}};let lM=(()=>{class n{constructor(){this.states=[{name:"Selecione: "},{name:"Acre"},{name:"Alagoas"},{name:"Amap\xe1"},{name:"Amazonas"},{name:"Bahia"},{name:"Cear\xe1"},{name:"Distrito Federal"},{name:"Esp\xedrito Santo"},{name:"Goi\xe1s"},{name:"Maranh\xe3o"},{name:"Mato Grosso"},{name:"Mato Grosso do Sul"},{name:"Minas Gerais"},{name:"Par\xe1"},{name:"Para\xedba"},{name:"Paran\xe1"},{name:"Pernambuco"},{name:"Piau\xed"},{name:"Rio de Janeiro"},{name:"Rio Grande do Norte"},{name:"Rio Grande do Sul"},{name:"Rond\xf4nia"},{name:"Roraima"},{name:"Santa Catarina"},{name:"S\xe3o Paulo"},{name:"Sergipe"},{name:"Tocantins"}]}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-config-view"]],decls:35,vars:7,consts:[[1,"card"],[1,"fieldPhoto"],["src","assets/galleria1.jpg","alt","Image","width","250"],[1,"findPhoto"],["pButton","","type","button",1,"p-button-raised","p-button-rounded"],[1,"field"],["for","firstname1"],["id","firstname1","type","text","pInputText","",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","lastname1"],["id","lastname1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["optionLabel","name","autoWidth","false",3,"options"],["id","city1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["id","formacaoAcad1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["mask","(99) 9 9999-9999","slotChar"," "]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div",0)(2,"h5"),l._uU(3,"Editar usu\xe1rio"),l.qZA(),l.TgZ(4,"div",1),l._UZ(5,"p-image",2),l.qZA(),l.TgZ(6,"div",3)(7,"button",4),l._uU(8,"Upload da foto"),l.qZA()(),l.TgZ(9,"div",5)(10,"label",6),l._uU(11,"Nome:"),l.qZA(),l._UZ(12,"input",7),l.qZA(),l.TgZ(13,"div",5)(14,"label",8),l._uU(15,"Sobrenome:"),l.qZA(),l._UZ(16,"input",9),l.qZA(),l.TgZ(17,"div",5)(18,"label"),l._uU(19,"Data de nascimento: "),l.qZA(),l._UZ(20,"p-calendar"),l.qZA(),l.TgZ(21,"div",5),l._UZ(22,"p-dropdown",10),l.qZA(),l.TgZ(23,"div",5)(24,"label"),l._uU(25,"Cidade:"),l.qZA(),l._UZ(26,"input",11),l.qZA(),l.TgZ(27,"div",5)(28,"label"),l._uU(29,"Forma\xe7\xe3o acad\xeamica:"),l.qZA(),l._UZ(30,"input",12),l.qZA(),l.TgZ(31,"div",5)(32,"label"),l._uU(33,"Telefone:"),l.qZA(),l._UZ(34,"p-inputMask",13),l.qZA()()()),2&e&&(l.xp6(22),l.Akn(l.DdM(5,aM)),l.Q6J("options",i.states),l.xp6(12),l.Akn(l.DdM(6,aM)))},dependencies:[Ag,mv,WE,nM,CP,Vl]}),n})(),uM=(()=>{class n{constructor(){this.profiePic="assets/cza-profile.png",this.userName="Caesar Zama Altran"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-search-entry"]],inputs:{profiePic:"profiePic",userName:"userName"},decls:7,vars:2,consts:[[1,"col-12"],[1,"flex","content-card-header","align-content-center"],[2,"padding-right",".4em","padding-left",".2em"],[1,"profile-img",3,"src"],[1,"align-content-center",2,"padding-top",".30em","font-weight","bold"]],template:function(e,i){1&e&&(l.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2),l._UZ(4,"img",3),l.qZA(),l.TgZ(5,"div",4),l._uU(6),l.qZA()()()()),2&e&&(l.xp6(4),l.s9C("src",i.profiePic,l.LSH),l.xp6(2),l.hij(" ",i.userName," "))}}),n})();function cM(n,t){if(1&n&&l._UZ(0,"app-search-entry",5),2&n){const e=t.$implicit;l.Q6J("userName",e.userName)("profiePic",e.profilePic)}}const Sb=[{path:"login",component:yA},{path:"home",component:MI,canActivate:[_d]},{path:"search",component:(()=>{class n{constructor(){this.searchDataRaw=[{userName:"Caesar Zama Altran",profilePic:"assets/cza-profile.png"},{userName:"Guilherme Nascimento",profilePic:"assets/profile-gui.jpg"},{userName:"Bruno Ricardo",profilePic:"assets/profile-bruno.jpg"},{userName:"Nathan Almici",profilePic:"assets/profile-nathan.jpg"},{userName:"Lincoln Ricardo",profilePic:"assets/profile-lincoln.jpg"}],this.searchData=[],this.query=""}ngOnInit(){}filter(){this.searchData=this.searchDataRaw.filter(e=>e.userName.toUpperCase().includes(this.query.toUpperCase()))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-search-view"]],decls:7,vars:2,consts:[[1,"col-12"],[1,"p-inputgroup"],["type","text","pInputText","",1,"flex-grow-1",3,"ngModel","ngModelChange"],["type","button","pRipple","","icon","pi pi-search","styleClass","p-button-warn"],[3,"userName","profiePic",4,"ngFor","ngForOf"],[3,"userName","profiePic"]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div")(2,"div",0)(3,"div",1)(4,"input",2),l.NdJ("ngModelChange",function(s){return i.query=s})("ngModelChange",function(){return i.filter()}),l.qZA(),l._UZ(5,"p-button",3),l.qZA()()(),l.YNc(6,cM,1,2,"app-search-entry",4),l.qZA()),2&e&&(l.xp6(4),l.Q6J("ngModel",i.query),l.xp6(2),l.Q6J("ngForOf",i.searchData))},dependencies:[ar,Iy,sf,Hy,ff,Vl,uM]}),n})(),canActivate:[_d]},{path:"novo",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-new-content-view"]],decls:4,vars:0,consts:[["type","file","accept","video/*","capture",""]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"p"),l._uU(2,"new-content-view works!"),l.qZA(),l._UZ(3,"input",0),l.qZA())},dependencies:[Vl],styles:[".findPhoto[_ngcontent-%COMP%]{grid-gap:50px}"]}),n})(),canActivate:[_d]},{path:"notific",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-notification-view"]],decls:3,vars:0,template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"p"),l._uU(2,"notification-view works!"),l.qZA()())},dependencies:[Vl]}),n})(),canActivate:[_d]},{path:"config",component:lM,canActivate:[_d]},{path:"",redirectTo:"/home",pathMatch:"full"}];let bP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[MC.forRoot(Sb,{useHash:!0}),MC]}),n})(),So=(()=>{class n{constructor(){this.title="hacka-sicredi"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[ku]}),n})();const Ab_firebaseConfig={apiKey:"AIzaSyBNnuRVZ0vTs6I6iR_0gMMYWRoeD4HDl4k",authDomain:"hackasic.firebaseapp.com",projectId:"hackasic",storageBucket:"hackasic.appspot.com",messagingSenderId:"807324039482",appId:"1:807324039482:web:cf01e5d1b2a95f48e73803",measurementId:"G-DY0F90L8QH"};var Cf=U(4986);function xb(n,t=mo.y){return n=n??zs,(0,Qn.e)((e,i)=>{let r,s=!0;e.subscribe((0,Nn.x)(i,c=>{const h=t(c);(s||!n(r,h))&&(s=!1,r=h,i.next(c))}))})}function zs(n,t){return n===t}var hM=U(5032);U(5881);var If=U(3942);const Ov="@firebase/database",Rv="0.13.10";let Nv="";function Pv(n){Nv=n}class Mb{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,V.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,V.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class pM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,V.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Fv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Mb(t)}}catch{}return new pM},ju=Fv("localStorage"),Ef=Fv("sessionStorage"),_s=new bo.Yd("@firebase/database"),Lv=function(){let n=1;return function(){return n++}}(),nm=function(n){const t=(0,V.dS)(n),e=new V.gQ;e.update(t);const i=e.digest();return V.US.encodeByteArray(i)},ys=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=ys.apply(null,i):t+="object"==typeof i?(0,V.Wl)(i):i,t+=" "}return t};let Gu=null,gM=!0;const kb=function(n,t){(0,V.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(_s.logLevel=bo.in.VERBOSE,Gu=_s.log.bind(_s),t&&Ef.set("logging_enabled",!0)):"function"==typeof n?Gu=n:(Gu=null,Ef.remove("logging_enabled"))},Wi=function(...n){if(!0===gM&&(gM=!1,null===Gu&&!0===Ef.get("logging_enabled")&&kb(!0)),Gu){const t=ys.apply(null,n);Gu(t)}},bf=function(n){return function(...t){Wi(n,...t)}},Vv=function(...n){const t="FIREBASE INTERNAL ERROR: "+ys(...n);_s.error(t)},Ao=function(...n){const t=`FIREBASE FATAL ERROR: ${ys(...n)}`;throw _s.error(t),new Error(t)},kr=function(...n){const t="FIREBASE WARNING: "+ys(...n);_s.warn(t)},im=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Hl="[MIN_NAME]",qs="[MAX_NAME]",jl=function(n,t){if(n===t)return 0;if(n===Hl||t===qs)return-1;if(t===Hl||n===qs)return 1;{const e=Hv(n),i=Hv(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Nb=function(n,t){return n===t?0:n<t?-1:1},kd=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Wl)(t))},rm=function(n){if("object"!=typeof n||null===n)return(0,V.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,V.Wl)(t[i]),e+=":",e+=rm(n[t[i]]);return e+="}",e},Uv=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function _i(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Tf=function(n){(0,V.hu)(!im(n),"Invalid JSON number");const i=1023;let r,s,c,h,g;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const E=y.join("");let D="";for(g=0;g<64;g+=8){let x=parseInt(E.substr(g,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},Lb=new RegExp("^-?(0*)\\d{1,10}$"),Vb=-2147483648,Bv=2147483647,Hv=function(n){if(Lb.test(n)){const t=Number(n);if(t>=Vb&&t<=Bv)return t}return null},Df=function(n){try{n()}catch(t){setTimeout(()=>{throw kr("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Sf=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class _M{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){kr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class yM{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Wi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kr(t)}}let sm=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Af=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gl="websocket",Gv="long_polling";class xf{constructor(t,e,i,r,s=!1,c="",h=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ju.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ju.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Gb(n,t,e){let i;if((0,V.hu)("string"==typeof t,"typeof type must == string"),(0,V.hu)("object"==typeof e,"typeof params must == object"),t===Gl)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Gv)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function $v(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return _i(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class Wv{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,V.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,V.p$)(this.counters_)}}const Mf={},Od={};function $b(n){const t=n.toString();return Mf[t]||(Mf[t]=new Wv),Mf[t]}class SP{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Df(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $l{constructor(t,e,i,r,s,c,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bf(t),this.stats_=$b(e),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),Gb(e,Gv,g))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new SP(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jb((...s)=>{const[c,h,g,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Af.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$l.forceAllow_=!0}static forceDisallow(){$l.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!$l.forceAllow_&&($l.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,V.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,V.h$)(e),r=Uv(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,V.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Jb{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Lv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Jb.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Wi("frame writing exception"),h.stack&&Wi(h.stack),Wi(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Wi("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,V.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Wi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let lm=null;typeof MozWebSocket<"u"?lm=MozWebSocket:typeof WebSocket<"u"&&(lm=WebSocket);let Rd=(()=>{class n{constructor(e,i,r,s,c,h,g){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bf(this.connId),this.stats_=$b(i),this.connURL=n.connectionURL_(i,h,g,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const h={v:"5"};return!(0,V.Yr)()&&typeof location<"u"&&location.hostname&&Af.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),c&&(h.p=c),Gb(e,Gl,h)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ju.set("previous_websocket_failure",!0);try{let r;if((0,V.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Nv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new lm(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==lm&&!n.forceDisallow_}static previouslyFailed(){return ju.isInMemoryStorage||!0===ju.get("previous_websocket_failure")}markConnectionHealthy(){ju.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,V.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,V.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Uv(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),MM=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$l,Rd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Rd&&Rd.isAvailable();let r=i&&!Rd.previouslyFailed();if(e.webSocketOnly&&(i||kr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Rd];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class d{constructor(t,e,i,r,s,c,h,g,y,E){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bf("c:"+this.id+":"),this.transportManager_=new MM(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Sf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=kd("t",t),i=kd("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=kd("t",t),i=kd("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=kd("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?Vv("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vv("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&kr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Sf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Sf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ju.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class f{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class p{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,V.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,V.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class v extends p{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new v}getInitialEvent(t){return(0,V.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class A{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function k(){return new A("")}function P(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function K(n){return n.pieces_.length-n.pieceNum_}function Q(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new A(n.pieces_,t)}function Te(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ye(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function pt(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new A(t,0)}function Xe(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof A)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new A(e,0)}function pe(n){return n.pieceNum_>=n.pieces_.length}function gt(n,t){const e=P(n),i=P(t);if(null===e)return t;if(e===i)return gt(Q(n),Q(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function yn(n,t){const e=Ye(n,0),i=Ye(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=jl(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function Ln(n,t){if(K(n)!==K(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function zi(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(K(n)>K(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Kv{constructor(t,e){this.errorPrefix_=e,this.parts_=Ye(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,V.ug)(this.parts_[i]);um(this)}}function um(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ul(n))}function ul(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class kf extends p{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new kf}getInitialEvent(t){return(0,V.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const $u=1e3;let eT,Of=(()=>{class n extends f{constructor(e,i,r,s,c,h,g,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=bf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$u,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kf.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&v.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,V.Wl)(c)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new V.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:h=>{const g=h.d;"ok"===h.s?i.resolve(g):i.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,g=>{const y=g.d,E=g.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(r,s),e.onComplete&&e.onComplete(E,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,V.r3)(e,"w")){const r=(0,V.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();kr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,V.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,V.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,h=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const h={p:i,d:r};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,V.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):Vv("Unrecognized action received from server: "+(0,V.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$u),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ie.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let g=!1,y=null;const E=function(){y?y.close():(g=!0,s())};e.realtime_={close:E,sendRequest:function(L){(0,V.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const x=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[L,G]=yield Promise.all([e.authTokenProvider_.getToken(x),e.appCheckTokenProvider_.getToken(x)]);g?Wi("getToken() completed but was canceled"):(Wi("getToken() completed. Creating connection."),e.authToken_=L&&L.accessToken,e.appCheckToken_=G&&G.token,y=new d(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,ie=>{kr(ie+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(L){e.log_("Failed to get token: "+L),g||(e.repoInfo_.nodeAdmin&&kr(L),E())}}})()}interrupt(e){Wi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$u,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>rm(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new A(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Wi("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Wi("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,V.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+Nv.replace(/\./g,"-")]=1,(0,V.uI)()?e["framework.cordova"]=1:(0,V.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=v.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new an(t,e)}}class Xb{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new an(Hl,t),r=new an(Hl,e);return 0!==this.compare(i,r)}minPost(){return an.MIN}}class FP extends Xb{static get __EMPTY_NODE(){return eT}static set __EMPTY_NODE(t){eT=t}compare(t,e){return jl(t.name,e.name)}isDefinedOn(t){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return an.MIN}maxPost(){return new an(qs,eT)}makePost(t,e){return(0,V.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new an(t,eT)}toString(){return".key"}}const Wl=new FP;class tT{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let FM,cl=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Zs.EMPTY_NODE,this.right=c??Zs.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Zs.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Zs{constructor(t,e=Zs.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Zs(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,cl.BLACK,null,null))}remove(t){return new Zs(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,cl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new tT(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new tT(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new tT(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new tT(this.root_,null,this.comparator_,!0,t)}}function qH(n,t){return jl(n.name,t.name)}function PM(n,t){return jl(n,t)}Zs.EMPTY_NODE=new class zH{copy(t,e,i,r,s){return this}insert(t,e,i){return new cl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const LP=function(n){return"number"==typeof n?"number:"+Tf(n):"string:"+n},VP=function(n){if(n.isLeafNode()){const t=n.val();(0,V.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,V.r3)(t,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===FM||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===FM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let UP,BP,HP,dm=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),VP(this.priorityNode_)}static set __childrenNodeConstructor(e){UP=e}static get __childrenNodeConstructor(){return UP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pe(e)?this:".priority"===P(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=P(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,V.hu)(".priority"!==r||1===K(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Q(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+LP(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Tf(this.value_):this.value_,this.lazyHash_=nm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,V.hu)(s>=0,"Unknown leaf type: "+i),(0,V.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Jn=new class QH extends Xb{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?jl(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return an.MIN}maxPost(){return new an(qs,new dm("[PRIORITY-POST]",HP))}makePost(t,e){const i=BP(t);return new an(e,new dm("[PRIORITY-POST]",i))}toString(){return".priority"}},JH=Math.log(2);class XH{constructor(t){this.count=parseInt(Math.log(t+1)/JH,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const nT=function(n,t,e,i){n.sort(t);const r=function(g,y){const E=y-g;let D,x;if(0===E)return null;if(1===E)return D=n[g],x=e?e(D):D,new cl(x,D.node,cl.BLACK,null,null);{const L=parseInt(E/2,10)+g,G=r(g,L),ie=r(L+1,y);return D=n[L],x=e?e(D):D,new cl(x,D.node,cl.BLACK,G,ie)}},h=function(g){let y=null,E=null,D=n.length;const x=function(G,ie){const ne=D-G,ze=D;D-=G;const Ke=r(ne+1,ze),qe=n[ne],Je=e?e(qe):qe;L(new cl(Je,qe.node,ie,null,Ke))},L=function(G){y?(y.left=G,y=G):(E=G,y=G)};for(let G=0;G<g.count;++G){const ie=g.nextBitIsOne(),ne=Math.pow(2,g.count-(G+1));ie?x(ne,cl.BLACK):(x(ne,cl.BLACK),x(ne,cl.RED))}return E}(new XH(n.length));return new Zs(i||t,h)};let LM;const hm={};class Wu{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,V.hu)(hm&&Jn,"ChildrenNode.ts has not been loaded"),LM=LM||new Wu({".priority":hm},{".priority":Jn}),LM}get(t){const e=(0,V.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Zs?e:null}hasIndex(t){return(0,V.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,V.hu)(t!==Wl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(an.Wrap);let h,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();h=r?nT(i,t.getCompare()):hm;const g=t.toString(),y=Object.assign({},this.indexSet_);y[g]=t;const E=Object.assign({},this.indexes_);return E[g]=h,new Wu(E,y)}addToIndexes(t,e){const i=(0,V.UI)(this.indexes_,(r,s)=>{const c=(0,V.DV)(this.indexSet_,s);if((0,V.hu)(c,"Missing index implementation for "+s),r===hm){if(c.isDefinedOn(t.node)){const h=[],g=e.getIterator(an.Wrap);let y=g.getNext();for(;y;)y.name!==t.name&&h.push(y),y=g.getNext();return h.push(t),nT(h,c.getCompare())}return hm}{const h=e.get(t.name);let g=r;return h&&(g=g.remove(new an(t.name,h))),g.insert(t,t.node)}});return new Wu(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,V.UI)(this.indexes_,r=>{if(r===hm)return r;{const s=e.get(t.name);return s?r.remove(new an(t.name,s)):r}});return new Wu(i,this.indexSet_)}}let Xv,Yt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&VP(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xv||(Xv=new n(new Zs(PM),null,Wu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xv}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?Xv:i}}getChild(e){const i=P(e);return null===i?this:this.getImmediateChild(i).getChild(Q(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,V.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new an(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?Xv:this.priorityNode_;return new n(s,h,c)}}updateChild(e,i){const r=P(e);if(null===r)return i;{(0,V.hu)(".priority"!==P(e)||1===K(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Q(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(Jn,(h,g)=>{i[h]=g.val(e),r++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!e&&c&&s<2*r){const h=[];for(const g in i)h[g]=i[g];return h}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+LP(this.getPriority().val())+":"),this.forEachChild(Jn,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":nm(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new an(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new an(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new an(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ew?-1:0}withIndex(e){if(e===Wl||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Wl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Jn),s=i.getIterator(Jn);let c=r.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=r.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(e){return e===Wl?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ew=new class e3 extends Yt{constructor(){super(new Zs(PM),Yt.EMPTY_NODE,Wu.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Yt.EMPTY_NODE}isEmpty(){return!1}};function yi(n,t=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,V.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new dm(n,yi(t));if(n instanceof Array){let e=Yt.EMPTY_NODE;return _i(n,(i,r)=>{if((0,V.r3)(n,i)&&"."!==i.substring(0,1)){const s=yi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(yi(t))}{const e=[];let i=!1;if(_i(n,(c,h)=>{if("."!==c.substring(0,1)){const g=yi(h);g.isEmpty()||(i=i||!g.getPriority().isEmpty(),e.push(new an(c,g)))}}),0===e.length)return Yt.EMPTY_NODE;const s=nT(e,qH,c=>c.name,PM);if(i){const c=nT(e,Jn.getCompare());return new Yt(s,yi(t),new Wu({".priority":c},{".priority":Jn}))}return new Yt(s,yi(t),Wu.Default)}}Object.defineProperties(an,{MIN:{value:new an(Hl,Yt.EMPTY_NODE)},MAX:{value:new an(qs,ew)}}),FP.__EMPTY_NODE=Yt.EMPTY_NODE,dm.__childrenNodeConstructor=Yt,function ZH(n){FM=n}(ew),function YH(n){HP=n}(ew),function KH(n){BP=n}(yi);class VM extends Xb{constructor(t){super(),this.indexPath_=t,(0,V.hu)(!pe(t)&&".priority"!==P(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?jl(t.name,e.name):s}makePost(t,e){const i=yi(t),r=Yt.EMPTY_NODE.updateChild(this.indexPath_,i);return new an(e,r)}maxPost(){const t=Yt.EMPTY_NODE.updateChild(this.indexPath_,ew);return new an(qs,t)}toString(){return Ye(this.indexPath_,0).join("/")}}const UM=new class n3 extends Xb{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?jl(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(t,e){const i=yi(t);return new an(e,i)}toString(){return".value"}},fm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",i3=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=fm.charAt(e%64),e=Math.floor(e/64);(0,V.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=fm.charAt(t[r]);return(0,V.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),$P=function(n){if(n===""+Bv)return"-";const t=Hv(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return qs;const s=fm.charAt(fm.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},WP=function(n){if(n===""+Vb)return Hl;const t=Hv(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+Bv:(delete e[e.length-1],e.join("")):(e[e.length-1]=fm.charAt(fm.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function zP(n){return{type:"value",snapshotNode:n}}function pm(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function tw(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function nw(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class HM{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,V.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(tw(e,h)):(0,V.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(pm(e,i)):c.trackChildChange(nw(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Jn,(r,s)=>{e.hasChild(r)||i.trackChildChange(tw(r,s))}),e.isLeafNode()||e.forEachChild(Jn,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(nw(r,s,c))}else i.trackChildChange(pm(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Yt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class iw{constructor(t){this.indexedFilter_=new HM(t.getIndex()),this.index_=t.getIndex(),this.startPost_=iw.getStartPost_(t),this.endPost_=iw.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new an(e,i))||(i=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Yt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Yt.EMPTY_NODE);const s=this;return e.forEachChild(Jn,(c,h)=>{s.matches(new an(c,h))||(r=r.updateImmediateChild(c,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class s3{constructor(t){this.rangedFilter_=new iw(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new an(e,i))||(i=Yt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Yt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;r=r.updateImmediateChild(h.name,h.node),c++}}else{let s,c,h,g;if(r=e.withIndex(this.index_),r=r.updatePriority(Yt.EMPTY_NODE),this.reverse_){g=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(x,L)=>D(L,x)}else g=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,E=!1;for(;g.hasNext();){const D=g.getNext();!E&&h(s,D)<=0&&(E=!0),E&&y<this.limit_&&h(D,c)<=0?y++:r=r.updateImmediateChild(D.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const D=this.index_.getCompare();c=(x,L)=>D(L,x)}else c=this.index_.getCompare();const h=t;(0,V.hu)(h.numChildren()===this.limit_,"");const g=new an(e,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(g);if(h.hasChild(e)){const D=h.getImmediateChild(e);let x=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===e||h.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const L=null==x?1:c(x,g);if(E&&!i.isEmpty()&&L>=0)return s?.trackChildChange(nw(e,i,D)),h.updateImmediateChild(e,i);{s?.trackChildChange(tw(e,D));const ie=h.updateImmediateChild(e,Yt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(s?.trackChildChange(pm(x.name,x.node)),ie.updateImmediateChild(x.name,x.node)):ie}}return i.isEmpty()?t:E&&c(y,g)>=0?(null!=s&&(s.trackChildChange(tw(y.name,y.node)),s.trackChildChange(pm(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(y.name,Yt.EMPTY_NODE)):t}}class iT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jn}copy(){const t=new iT;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function jM(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function GM(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function rT(n,t){const e=n.copy();return e.index_=t,e}function qP(n){const t={};if(n.isDefault())return t;let e;return n.index_===Jn?e="$priority":n.index_===UM?e="$value":n.index_===Wl?e="$key":((0,V.hu)(n.index_ instanceof VM,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,V.Wl)(e),n.startSet_&&(t.startAt=(0,V.Wl)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,V.Wl)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,V.Wl)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,V.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function ZP(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Jn&&(t.i=n.index_.toString()),t}class sT extends f{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=bf("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,V.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=sT.getListenId_(t,i),h={};this.listens_[c]=h;const g=qP(t._queryParams);this.restRequest_(s+".json",g,(y,E)=>{let D=E;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,i),(0,V.DV)(this.listens_,c)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(x,null)}})}unlisten(t,e){const i=sT.getListenId_(t,e);delete this.listens_[i]}get(t){const e=qP(t._queryParams),i=t._path.toString(),r=new V.BH;return this.restRequest_(i+".json",e,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,V.xO)(e);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,V.cI)(h.responseText)}catch{kr("Failed to parse JSON response for "+c+": "+h.responseText)}i(null,g)}else 401!==h.status&&404!==h.status&&kr("Got unsuccessful REST response for "+c+" Status: "+h.status),i(h.status);i=null}},h.open("GET",c,!0),h.send()})}}class d3{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function oT(){return{value:null,children:new Map}}function gm(n,t,e){if(pe(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=P(t);n.children.has(i)||n.children.set(i,oT()),gm(n.children.get(i),t=Q(t),e)}}function $M(n,t){if(pe(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Jn,(i,r)=>{gm(n,new A(i),r)}),$M(n,t)}}if(n.children.size>0){const e=P(t);return t=Q(t),n.children.has(e)&&$M(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function WM(n,t,e){null!==n.value?e(t,n.value):function h3(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{WM(r,new A(t.toString()+"/"+i),e)})}class f3{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&_i(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class m3{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new f3(t);const i=1e4+2e4*Math.random();Sf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;_i(t,(r,s)=>{s>0&&(0,V.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),Sf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ta=(()=>{return(n=Ta||(Ta={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ta;var n})();function ZM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aT{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Ta.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(pe(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new A(t));return new aT(k(),e,this.revert)}}return(0,V.hu)(P(this.path)===t,"operationForChild called for unrelated child."),new aT(Q(this.path),this.affectedTree,this.revert)}}class rw{constructor(t,e){this.source=t,this.path=e,this.type=Ta.LISTEN_COMPLETE}operationForChild(t){return pe(this.path)?new rw(this.source,k()):new rw(this.source,Q(this.path))}}class Rf{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Ta.OVERWRITE}operationForChild(t){return pe(this.path)?new Rf(this.source,k(),this.snap.getImmediateChild(t)):new Rf(this.source,Q(this.path),this.snap)}}class mm{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Ta.MERGE}operationForChild(t){if(pe(this.path)){const e=this.children.subtree(new A(t));return e.isEmpty()?null:e.value?new Rf(this.source,k(),e.value):new mm(this.source,k(),e)}return(0,V.hu)(P(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new mm(this.source,Q(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nd{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(pe(t))return this.isFullyInitialized()&&!this.filtered_;const e=P(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class _3{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function sw(n,t,e,i,r,s){const c=i.filter(h=>h.type===e);c.sort((h,g)=>function w3(n,t,e){if(null==t.childName||null==e.childName)throw(0,V.g5)("Should only compare child_ events.");const i=new an(t.childName,t.snapshotNode),r=new an(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,h,g)),c.forEach(h=>{const g=function v3(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,s);r.forEach(y=>{y.respondsTo(h.type)&&t.push(y.createEvent(g,n.query_))})})}function lT(n,t){return{eventCache:n,serverCache:t}}function ow(n,t,e,i){return lT(new Nd(t,e,i),n.serverCache)}function YP(n,t,e,i){return lT(n.eventCache,new Nd(t,e,i))}function uT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Nf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let KM;class Xn{constructor(t,e=(()=>(KM||(KM=new Zs(Nb)),KM))()){this.value=t,this.children=e}static fromObject(t){let e=new Xn(null);return _i(t,(i,r)=>{e=e.set(new A(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:k(),value:this.value};if(pe(t))return null;{const i=P(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Q(t),e);return null!=s?{path:Xe(new A(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(pe(t))return this;{const e=P(t),i=this.children.get(e);return null!==i?i.subtree(Q(t)):new Xn(null)}}set(t,e){if(pe(t))return new Xn(e,this.children);{const i=P(t),s=(this.children.get(i)||new Xn(null)).set(Q(t),e),c=this.children.insert(i,s);return new Xn(this.value,c)}}remove(t){if(pe(t))return this.children.isEmpty()?new Xn(null):new Xn(null,this.children);{const e=P(t),i=this.children.get(e);if(i){const r=i.remove(Q(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Xn(null):new Xn(this.value,s)}return this}}get(t){if(pe(t))return this.value;{const e=P(t),i=this.children.get(e);return i?i.get(Q(t)):null}}setTree(t,e){if(pe(t))return e;{const i=P(t),s=(this.children.get(i)||new Xn(null)).setTree(Q(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Xn(this.value,c)}}fold(t){return this.fold_(k(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Xe(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,k(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(pe(t))return null;{const s=P(t),c=this.children.get(s);return c?c.findOnPath_(Q(t),Xe(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,k(),e)}foreachOnPath_(t,e,i){if(pe(t))return this;{this.value&&i(e,this.value);const r=P(t),s=this.children.get(r);return s?s.foreachOnPath_(Q(t),Xe(e,r),i):new Xn(null)}}foreach(t){this.foreach_(k(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Xe(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class dl{constructor(t){this.writeTree_=t}static empty(){return new dl(new Xn(null))}}function aw(n,t,e){if(pe(t))return new dl(new Xn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=gt(r,t);return s=s.updateChild(c,e),new dl(n.writeTree_.set(r,s))}{const r=new Xn(e),s=n.writeTree_.setTree(t,r);return new dl(s)}}}function YM(n,t,e){let i=n;return _i(e,(r,s)=>{i=aw(i,Xe(t,r),s)}),i}function QP(n,t){if(pe(t))return dl.empty();{const e=n.writeTree_.setTree(t,new Xn(null));return new dl(e)}}function QM(n,t){return null!=Pf(n,t)}function Pf(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(gt(e.path,t)):null}function JP(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Jn,(i,r)=>{t.push(new an(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new an(i,r.value))}),t}function Pd(n,t){if(pe(t))return n;{const e=Pf(n,t);return new dl(null!=e?new Xn(e):n.writeTree_.subtree(t))}}function JM(n){return n.writeTree_.isEmpty()}function _m(n,t){return XP(k(),n.writeTree_,t)}function XP(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,V.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=XP(Xe(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Xe(n,".priority"),i)),e}}function cT(n,t){return rF(t,n)}function D3(n,t){if(n.snap)return zi(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&zi(Xe(n.path,e),t))return!0;return!1}function A3(n){return n.visible}function eF(n,t,e){let i=dl.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let h;if(s.snap)zi(e,c)?(h=gt(e,c),i=aw(i,h,s.snap)):zi(c,e)&&(h=gt(c,e),i=aw(i,k(),s.snap.getChild(h)));else{if(!s.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(zi(e,c))h=gt(e,c),i=YM(i,h,s.children);else if(zi(c,e))if(h=gt(c,e),pe(h))i=YM(i,k(),s.children);else{const g=(0,V.DV)(s.children,P(h));if(g){const y=g.getChild(Q(h));i=aw(i,k(),y)}}}}}return i}function tF(n,t,e,i,r){if(i||r){const s=Pd(n.visibleWrites,t);return!r&&JM(s)?e:r||null!=e||QM(s,k())?_m(eF(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(zi(y.path,t)||zi(t,y.path))},t),e||Yt.EMPTY_NODE):null}{const s=Pf(n.visibleWrites,t);if(null!=s)return s;{const c=Pd(n.visibleWrites,t);return JM(c)?e:null!=e||QM(c,k())?_m(c,e||Yt.EMPTY_NODE):null}}}function dT(n,t,e,i){return tF(n.writeTree,n.treePath,t,e,i)}function XM(n,t){return function x3(n,t,e){let i=Yt.EMPTY_NODE;const r=Pf(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Jn,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Pd(n.visibleWrites,t);return e.forEachChild(Jn,(c,h)=>{const g=_m(Pd(s,new A(c)),h);i=i.updateImmediateChild(c,g)}),JP(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return JP(Pd(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function nF(n,t,e,i){return function M3(n,t,e,i,r){(0,V.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Xe(t,e);if(QM(n.visibleWrites,s))return null;{const c=Pd(n.visibleWrites,s);return JM(c)?r.getChild(e):_m(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function hT(n,t){return function O3(n,t){return Pf(n.visibleWrites,t)}(n.writeTree,Xe(n.treePath,t))}function ek(n,t,e){return function k3(n,t,e,i){const r=Xe(t,e),s=Pf(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?_m(Pd(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function iF(n,t){return rF(Xe(n.treePath,t),n.writeTree)}function rF(n,t){return{treePath:n,writeTree:t}}class F3{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,V.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,nw(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,tw(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,pm(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,V.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,nw(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const sF=new class L3{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class tk{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Nd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ek(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Nf(this.viewCache_),s=function P3(n,t,e,i,r,s){return function R3(n,t,e,i,r,s,c){let h;const g=Pd(n.visibleWrites,t),y=Pf(g,k());if(null!=y)h=y;else{if(null==e)return[];h=_m(g,e)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const E=[],D=c.getCompare(),x=s?h.getReverseIteratorFrom(i,c):h.getIteratorFrom(i,c);let L=x.getNext();for(;L&&E.length<r;)0!==D(L,i)&&E.push(L),L=x.getNext();return E}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function oF(n,t,e,i,r,s){const c=t.eventCache;if(null!=hT(i,e))return t;{let h,g;if(pe(e))if((0,V.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=Nf(t),D=XM(i,y instanceof Yt?y:Yt.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),D,s)}else{const y=dT(i,Nf(t));h=n.filter.updateFullNode(t.eventCache.getNode(),y,s)}else{const y=P(e);if(".priority"===y){(0,V.hu)(1===K(e),"Can't have a priority with additional path components");const E=c.getNode();g=t.serverCache.getNode();const D=nF(i,e,E,g);h=null!=D?n.filter.updatePriority(E,D):c.getNode()}else{const E=Q(e);let D;if(c.isCompleteForChild(y)){g=t.serverCache.getNode();const x=nF(i,e,c.getNode(),g);D=null!=x?c.getNode().getImmediateChild(y).updateChild(E,x):c.getNode().getImmediateChild(y)}else D=ek(i,y,t.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),y,D,E,r,s):c.getNode()}}return ow(t,h,c.isFullyInitialized()||pe(e),n.filter.filtersNodes())}}function fT(n,t,e,i,r,s,c,h){const g=t.serverCache;let y;const E=c?n.filter:n.filter.getIndexedFilter();if(pe(e))y=E.updateFullNode(g.getNode(),i,null);else if(E.filtersNodes()&&!g.isFiltered()){const L=g.getNode().updateChild(e,i);y=E.updateFullNode(g.getNode(),L,null)}else{const L=P(e);if(!g.isCompleteForPath(e)&&K(e)>1)return t;const G=Q(e),ne=g.getNode().getImmediateChild(L).updateChild(G,i);y=".priority"===L?E.updatePriority(g.getNode(),ne):E.updateChild(g.getNode(),L,ne,G,sF,null)}const D=YP(t,y,g.isFullyInitialized()||pe(e),E.filtersNodes());return oF(n,D,e,r,new tk(r,D,s),h)}function nk(n,t,e,i,r,s,c){const h=t.eventCache;let g,y;const E=new tk(r,t,s);if(pe(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,c),g=ow(t,y,!0,n.filter.filtersNodes());else{const D=P(e);if(".priority"===D)y=n.filter.updatePriority(t.eventCache.getNode(),i),g=ow(t,y,h.isFullyInitialized(),h.isFiltered());else{const x=Q(e),L=h.getNode().getImmediateChild(D);let G;if(pe(x))G=i;else{const ie=E.getCompleteChild(D);G=null!=ie?".priority"===Te(x)&&ie.getChild(pt(x)).isEmpty()?ie:ie.updateChild(x,i):Yt.EMPTY_NODE}g=L.equals(G)?t:ow(t,n.filter.updateChild(h.getNode(),D,G,x,E,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function aF(n,t){return n.eventCache.isCompleteForChild(t)}function lF(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function ik(n,t,e,i,r,s,c,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,g=t;y=pe(e)?i:new Xn(null).setTree(e,i);const E=t.serverCache.getNode();return y.children.inorderTraversal((D,x)=>{if(E.hasChild(D)){const G=lF(0,t.serverCache.getNode().getImmediateChild(D),x);g=fT(n,g,new A(D),G,r,s,c,h)}}),y.children.inorderTraversal((D,x)=>{const L=!t.serverCache.isCompleteForChild(D)&&null===x.value;if(!E.hasChild(D)&&!L){const ie=lF(0,t.serverCache.getNode().getImmediateChild(D),x);g=fT(n,g,new A(D),ie,r,s,c,h)}}),g}class z3{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new HM(i.getIndex()),s=function o3(n){return n.loadsAllData()?new HM(n.getIndex()):n.hasLimit()?new s3(n):new iw(n)}(i);this.processor_=function V3(n){return{filter:n}}(s);const c=e.serverCache,h=e.eventCache,g=r.updateFullNode(Yt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Yt.EMPTY_NODE,h.getNode(),null),E=new Nd(g,c.isFullyInitialized(),r.filtersNodes()),D=new Nd(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=lT(D,E),this.eventGenerator_=new _3(this.query_)}get query(){return this.query_}}function K3(n,t){const e=Nf(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!pe(t)&&!e.getImmediateChild(P(t)).isEmpty())?e.getChild(t):null}function uF(n){return 0===n.eventRegistrations_.length}function cF(n,t,e){const i=[];if(e){(0,V.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function dF(n,t,e,i){t.type===Ta.MERGE&&null!==t.source.queryId&&((0,V.hu)(Nf(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(uT(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function B3(n,t,e,i,r){const s=new F3;let c,h;if(e.type===Ta.OVERWRITE){const y=e;y.source.fromUser?c=nk(n,t,y.path,y.snap,i,r,s):((0,V.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered()&&!pe(y.path),c=fT(n,t,y.path,y.snap,i,r,h,s))}else if(e.type===Ta.MERGE){const y=e;y.source.fromUser?c=function j3(n,t,e,i,r,s,c){let h=t;return i.foreach((g,y)=>{const E=Xe(e,g);aF(t,P(E))&&(h=nk(n,h,E,y,r,s,c))}),i.foreach((g,y)=>{const E=Xe(e,g);aF(t,P(E))||(h=nk(n,h,E,y,r,s,c))}),h}(n,t,y.path,y.children,i,r,s):((0,V.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered(),c=ik(n,t,y.path,y.children,i,r,h,s))}else if(e.type===Ta.ACK_USER_WRITE){const y=e;c=y.revert?function W3(n,t,e,i,r,s){let c;if(null!=hT(i,e))return t;{const h=new tk(i,t,r),g=t.eventCache.getNode();let y;if(pe(e)||".priority"===P(e)){let E;if(t.serverCache.isFullyInitialized())E=dT(i,Nf(t));else{const D=t.serverCache.getNode();(0,V.hu)(D instanceof Yt,"serverChildren would be complete if leaf node"),E=XM(i,D)}y=n.filter.updateFullNode(g,E,s)}else{const E=P(e);let D=ek(i,E,t.serverCache);null==D&&t.serverCache.isCompleteForChild(E)&&(D=g.getImmediateChild(E)),y=null!=D?n.filter.updateChild(g,E,D,Q(e),h,s):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Yt.EMPTY_NODE,Q(e),h,s):g,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=dT(i,Nf(t)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=hT(i,k()),ow(t,y,c,n.filter.filtersNodes())}}(n,t,y.path,i,r,s):function G3(n,t,e,i,r,s,c){if(null!=hT(r,e))return t;const h=t.serverCache.isFiltered(),g=t.serverCache;if(null!=i.value){if(pe(e)&&g.isFullyInitialized()||g.isCompleteForPath(e))return fT(n,t,e,g.getNode().getChild(e),r,s,h,c);if(pe(e)){let y=new Xn(null);return g.getNode().forEachChild(Wl,(E,D)=>{y=y.set(new A(E),D)}),ik(n,t,e,y,r,s,h,c)}return t}{let y=new Xn(null);return i.foreach((E,D)=>{const x=Xe(e,E);g.isCompleteForPath(x)&&(y=y.set(E,g.getNode().getChild(x)))}),ik(n,t,e,y,r,s,h,c)}}(n,t,y.path,y.affectedTree,i,r,s)}else{if(e.type!==Ta.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+e.type);c=function $3(n,t,e,i,r){const s=t.serverCache;return oF(n,YP(t,s.getNode(),s.isFullyInitialized()||pe(e),s.isFiltered()),e,i,sF,r)}(n,t,e.path,i,s)}const g=s.getChanges();return function H3(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=uT(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(zP(uT(t)))}}(t,c,g),{viewCache:c,changes:g}}(n.processor_,r,t,e,i);return function U3(n,t){(0,V.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,V.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,hF(n,s.changes,s.viewCache.eventCache.getNode(),null)}function hF(n,t,e,i){return function y3(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function r3(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),sw(n,r,"child_removed",t,i,e),sw(n,r,"child_added",t,i,e),sw(n,r,"child_moved",s,i,e),sw(n,r,"child_changed",t,i,e),sw(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let pT,mT;class fF{constructor(){this.views=new Map}}function rk(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,V.hu)(null!=s,"SyncTree gave us an op for an invalid query."),dF(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(dF(c,t,e,i));return s}}function pF(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let h=dT(e,r?i:null),g=!1;h?g=!0:i instanceof Yt?(h=XM(e,i),g=!1):(h=Yt.EMPTY_NODE,g=!1);const y=lT(new Nd(h,g,!1),new Nd(i,r,!1));return new z3(t,y)}return c}function gF(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Fd(n,t){let e=null;for(const i of n.views.values())e=e||K3(i,t);return e}function mF(n,t){return t._queryParams.loadsAllData()?gT(n):n.views.get(t._queryIdentifier)}function _F(n,t){return null!=mF(n,t)}function Ld(n){return null!=gT(n)}function gT(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let sj=1;class yF{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Xn(null),this.pendingWriteTree_=function N3(){return{visibleWrites:dl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sk(n,t,e,i,r){return function I3(n,t,e,i,r){(0,V.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=aw(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?ym(n,new Rf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Vd(n,t,e=!1){const i=function b3(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function T3(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,V.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=e&&D3(h,i.path)?r=!1:zi(i.path,h.path)&&(s=!0)),c--}return!!r&&(s?(function S3(n){n.visibleWrites=eF(n.allWrites,A3,k()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=QP(n.visibleWrites,i.path):_i(i.children,g=>{n.visibleWrites=QP(n.visibleWrites,Xe(i.path,g))}),!0))}(n.pendingWriteTree_,t)){let s=new Xn(null);return null!=i.snap?s=s.set(k(),!0):_i(i.children,c=>{s=s.set(new A(c),!0)}),ym(n,new aT(i.path,s,e))}return[]}function lw(n,t,e){return ym(n,new Rf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function _T(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let h=[];if(c&&("default"===t._queryIdentifier||_F(c,t))){const g=function nj(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const h=Ld(n);if("default"===r)for(const[g,y]of n.views.entries())c=c.concat(cF(y,e,i)),uF(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||s.push(y.query));else{const g=n.views.get(r);g&&(c=c.concat(cF(g,e,i)),uF(g)&&(n.views.delete(r),g.query._queryParams.loadsAllData()||s.push(g.query)))}return h&&!Ld(n)&&s.push(new(function X3(){return(0,V.hu)(pT,"Reference.ts has not been loaded"),pT}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function ej(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=g.removed;if(h=g.events,!r){const E=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(x,L)=>Ld(L));if(E&&!D){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const L=function hj(n){return n.fold((t,e,i)=>{if(e&&Ld(e))return[gT(e)];{let r=[];return e&&(r=gF(e)),_i(i,(s,c)=>{r=r.concat(c)}),r}})}(x);for(let G=0;G<L.length;++G){const ie=L[G],ne=ie.query,ze=IF(n,ie);n.listenProvider_.startListening(cw(ne),uw(n,ne),ze.hashFn,ze.onComplete)}}}!D&&y.length>0&&!i&&(E?n.listenProvider_.stopListening(cw(t),null):y.forEach(x=>{const L=n.queryToTagMap.get(vT(x));n.listenProvider_.stopListening(cw(x),L)}))}!function fj(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=vT(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,y)}return h}function vF(n,t,e,i){const r=ak(n,i);if(null!=r){const s=lk(r),c=s.path,h=s.queryId,g=gt(c,t);return uk(n,c,new Rf(ZM(h),g,e))}return[]}function ok(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(x,L)=>{const G=gt(x,r);s=s||Fd(L,G),c=c||Ld(L)});let g,h=n.syncPointTree_.get(r);h?(c=c||Ld(h),s=s||Fd(h,k())):(h=new fF,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=s?g=!0:(g=!1,s=Yt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((L,G)=>{const ie=Fd(G,k());ie&&(s=s.updateImmediateChild(L,ie))}));const y=_F(h,t);if(!y&&!t._queryParams.loadsAllData()){const x=vT(t);(0,V.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const L=function pj(){return sj++}();n.queryToTagMap.set(x,L),n.tagToQueryMap.set(L,x)}let D=function tj(n,t,e,i,r,s){const c=pF(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function Y3(n,t){n.eventRegistrations_.push(t)}(c,e),function Q3(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Jn,(s,c)=>{i.push(pm(s,c))}),e.isFullyInitialized()&&i.push(zP(e.getNode())),hF(n,i,e.getNode(),t)}(c,e)}(h,t,e,cT(n.pendingWriteTree_,r),s,g);if(!y&&!c&&!i){const x=mF(h,t);D=D.concat(function gj(n,t,e){const i=t._path,r=uw(n,t),s=IF(n,e),c=n.listenProvider_.startListening(cw(t),r,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,V.hu)(!Ld(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,E,D)=>{if(!pe(y)&&E&&Ld(E))return[gT(E).query];{let x=[];return E&&(x=x.concat(gF(E).map(L=>L.query))),_i(D,(L,G)=>{x=x.concat(G)}),x}});for(let y=0;y<g.length;++y){const E=g[y];n.listenProvider_.stopListening(cw(E),uw(n,E))}}return c}(n,t,x))}return D}function yT(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,h)=>{const y=Fd(h,gt(c,t));if(y)return y});return tF(r,t,s,e,!0)}function ym(n,t){return wF(t,n.syncPointTree_,null,cT(n.pendingWriteTree_,k()))}function wF(n,t,e,i){if(pe(n.path))return CF(n,t,e,i);{const r=t.get(k());null==e&&null!=r&&(e=Fd(r,k()));let s=[];const c=P(n.path),h=n.operationForChild(c),g=t.children.get(c);if(g&&h){const y=e?e.getImmediateChild(c):null,E=iF(i,c);s=s.concat(wF(h,g,y,E))}return r&&(s=s.concat(rk(r,n,i,e))),s}}function CF(n,t,e,i){const r=t.get(k());null==e&&null!=r&&(e=Fd(r,k()));let s=[];return t.children.inorderTraversal((c,h)=>{const g=e?e.getImmediateChild(c):null,y=iF(i,c),E=n.operationForChild(c);E&&(s=s.concat(CF(E,h,g,y)))}),r&&(s=s.concat(rk(r,n,i,e))),s}function IF(n,t){const e=t.query,i=uw(n,e);return{hashFn:()=>(function q3(n){return n.viewCache_.serverCache.getNode()}(t)||Yt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function uj(n,t,e){const i=ak(n,e);if(i){const r=lk(i),s=r.path,c=r.queryId,h=gt(s,t);return uk(n,s,new rw(ZM(c),h))}return[]}(n,e._path,i):function lj(n,t){return ym(n,new rw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function Fb(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return _T(n,e,null,s)}}}}function uw(n,t){const e=vT(t);return n.queryToTagMap.get(e)}function vT(n){return n._path.toString()+"$"+n._queryIdentifier}function ak(n,t){return n.tagToQueryMap.get(t)}function lk(n){const t=n.indexOf("$");return(0,V.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new A(n.substr(0,t))}}function uk(n,t,e){const i=n.syncPointTree_.get(t);return(0,V.hu)(i,"Missing sync point for query tag that we're tracking"),rk(i,e,cT(n.pendingWriteTree_,t),null)}function cw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function rj(){return(0,V.hu)(mT,"Reference.ts has not been loaded"),mT}())(n._repo,n._path):n}class ck{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new ck(e)}node(){return this.node_}}class dk{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Xe(this.path_,t);return new dk(this.syncTree_,e)}node(){return yT(this.syncTree_,this.path_)}}const EF=function(n,t,e){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_j(n[".sv"],t,e):"object"==typeof n[".sv"]?yj(n[".sv"],t):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_j=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,V.hu)(!1,"Unexpected server value: "+n)},yj=function(n,t,e){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,V.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,V.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},bF=function(n,t,e,i){return fk(t,new dk(e,n),i)},hk=function(n,t,e){return fk(n,new ck(t),e)};function fk(n,t,e){const i=n.getPriority().val(),r=EF(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,h=EF(c.getValue(),t,e);return h!==c.getValue()||r!==c.getPriority().val()?new dm(h,yi(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new dm(r))),c.forEachChild(Jn,(h,g)=>{const y=fk(g,t.getImmediateChild(h),e);y!==g&&(s=s.updateImmediateChild(h,y))}),s}}class pk{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function wT(n,t){let e=t instanceof A?t:new A(t),i=n,r=P(e);for(;null!==r;){const s=(0,V.DV)(i.node.children,r)||{children:{},childCount:0};i=new pk(r,i,s),e=Q(e),r=P(e)}return i}function Ff(n){return n.node.value}function gk(n,t){n.node.value=t,mk(n)}function TF(n){return n.node.childCount>0}function CT(n,t){_i(n.node.children,(e,i)=>{t(new pk(e,n,i))})}function DF(n,t,e,i){e&&!i&&t(n),CT(n,r=>{DF(r,t,!0,i)}),e&&i&&t(n)}function dw(n){return new A(null===n.parent?n.name:dw(n.parent)+"/"+n.name)}function mk(n){null!==n.parent&&function Cj(n,t,e){const i=function vj(n){return void 0===Ff(n)&&!TF(n)}(e),r=(0,V.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,mk(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,mk(n))}(n.parent,n.name,n)}const Ij=/[\[\].#$\/\u0000-\u001F\u007F]/,Ej=/[\[\].#$\u0000-\u001F\u007F]/,_k=10485760,IT=function(n){return"string"==typeof n&&0!==n.length&&!Ij.test(n)},SF=function(n){return"string"==typeof n&&0!==n.length&&!Ej.test(n)},hw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!im(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},zl=function(n,t,e,i){i&&void 0===t||fw((0,V.gK)(n,"value"),t,e)},fw=function(n,t,e){const i=e instanceof A?new Kv(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+ul(i));if("function"==typeof t)throw new Error(n+"contains a function "+ul(i)+" with contents = "+t.toString());if(im(t))throw new Error(n+"contains "+t.toString()+" "+ul(i));if("string"==typeof t&&t.length>_k/3&&(0,V.ug)(t)>_k)throw new Error(n+"contains a string greater than "+_k+" utf8 bytes "+ul(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(_i(t,(c,h)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!IT(c)))throw new Error(n+" contains an invalid key ("+c+") "+ul(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Yv(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,V.ug)(t),um(n)})(i,c),fw(n,h,i),function Qv(n){const t=n.parts_.pop();n.byteLength_-=(0,V.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+ul(i)+" in addition to actual children.")}},AF=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,V.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];_i(t,(c,h)=>{const g=new A(c);if(fw(r,h,Xe(e,g)),".priority"===Te(g)&&!hw(h))throw new Error(r+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=Ye(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!IT(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(yn);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&zi(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},yk=function(n,t,e){if(!e||void 0!==t){if(im(t))throw new Error((0,V.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!hw(t))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pw=function(n,t,e,i){if(!(i&&void 0===e||IT(e)))throw new Error((0,V.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gw=function(n,t,e,i){if(!(i&&void 0===e||SF(e)))throw new Error((0,V.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Da=function(n,t){if(".info"===P(t))throw new Error(n+" failed = Can't modify data under /.info/")},xF=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!IT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),SF(n)}(e))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Sj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ET(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!Ln(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function MF(n,t,e){ET(n,e),kF(n,i=>Ln(i,t))}function xo(n,t,e){ET(n,e),kF(n,i=>zi(i,t)||zi(t,i))}function kF(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(Aj(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Aj(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Gu&&Wi("event: "+e.toString()),Df(i)}}}const OF="repo_interrupt";class Mj{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oT(),this.transactionQueueTree_=new pk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function RF(n){const e=n.infoData_.getNode(new A(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function mw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:RF(n)})}function NF(n,t,e,i,r){n.dataUpdateCount++;const s=new A(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const g=(0,V.UI)(e,y=>yi(y));c=function cj(n,t,e,i){const r=ak(n,i);if(r){const s=lk(r),c=s.path,h=s.queryId,g=gt(c,t),y=Xn.fromObject(e);return uk(n,c,new mm(ZM(h),g,y))}return[]}(n.serverSyncTree_,s,g,r)}else{const g=yi(e);c=vF(n.serverSyncTree_,s,g,r)}else if(i){const g=(0,V.UI)(e,y=>yi(y));c=function aj(n,t,e){const i=Xn.fromObject(e);return ym(n,new mm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,g)}else{const g=yi(e);c=lw(n.serverSyncTree_,s,g)}let h=s;c.length>0&&(h=wm(n,s)),xo(n.eventQueue_,h,c)}function PF(n,t){vk(n,"connected",t),!1===t&&function Pj(n){vm(n,"onDisconnectEvents");const t=mw(n),e=oT();WM(n.onDisconnect_,k(),(r,s)=>{const c=bF(r,s,n.serverSyncTree_,t);gm(e,r,c)});let i=[];WM(e,k(),(r,s)=>{i=i.concat(lw(n.serverSyncTree_,r,s));const c=Ek(n,r);wm(n,c)}),n.onDisconnect_=oT(),xo(n.eventQueue_,k(),i)}(n)}function vk(n,t,e){const i=new A("/.info/"+t),r=yi(e);n.infoData_.updateSnapshot(i,r);const s=lw(n.infoSyncTree_,i,r);xo(n.eventQueue_,i,s)}function bT(n){return n.nextWriteId_++}function wk(n,t,e,i,r){vm(n,"set",{path:t.toString(),value:e,priority:i});const s=mw(n),c=yi(e,i),h=yT(n.serverSyncTree_,t),g=hk(c,h,s),y=bT(n),E=sk(n.serverSyncTree_,t,g,y,!0);ET(n.eventQueue_,E),n.server_.put(t.toString(),c.val(!0),(x,L)=>{const G="ok"===x;G||kr("set at "+t+" failed: "+x);const ie=Vd(n.serverSyncTree_,y,!G);xo(n.eventQueue_,t,ie),Ud(0,r,x,L)});const D=Ek(n,t);wm(n,D),xo(n.eventQueue_,D,[])}function Fj(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&$M(n.onDisconnect_,t),Ud(0,e,i,r)})}function FF(n,t,e,i){const r=yi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&gm(n.onDisconnect_,t,r),Ud(0,i,s,c)})}function Ck(n,t,e){let i;i=".info"===P(t._path)?_T(n.infoSyncTree_,t,e):_T(n.serverSyncTree_,t,e),MF(n.eventQueue_,t._path,i)}function LF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(OF)}function vm(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Wi(e,...t)}function Ud(n,t,e,i){t&&Df(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function Ik(n,t,e){return yT(n.serverSyncTree_,t,e)||Yt.EMPTY_NODE}function TT(n,t=n.transactionQueueTree_){if(t||DT(n,t),Ff(t)){const e=UF(n,t);(0,V.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function jj(n,t,e){const i=e.map(y=>y.currentWriteId),r=Ik(n,t,i);let s=r;const c=r.hash();for(let y=0;y<e.length;y++){const E=e[y];(0,V.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=gt(t,E.path);s=s.updateChild(D,E.currentOutputSnapshotRaw)}const h=s.val(!0),g=t;n.server_.put(g.toString(),h,y=>{vm(n,"transaction put response",{path:g.toString(),status:y});let E=[];if("ok"===y){const D=[];for(let x=0;x<e.length;x++)e[x].status=2,E=E.concat(Vd(n.serverSyncTree_,e[x].currentWriteId)),e[x].onComplete&&D.push(()=>e[x].onComplete(null,!0,e[x].currentOutputSnapshotResolved)),e[x].unwatcher();DT(n,wT(n.transactionQueueTree_,t)),TT(n,n.transactionQueueTree_),xo(n.eventQueue_,t,E);for(let x=0;x<D.length;x++)Df(D[x])}else{if("datastale"===y)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{kr("transaction at "+g.toString()+" failed: "+y);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=y}wm(n,t)}},c)}(n,dw(t),e)}else TF(t)&&CT(t,e=>{TT(n,e)})}function wm(n,t){const e=VF(n,t),i=dw(e);return function Gj(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const g=t[h],y=gt(e,g.path);let D,E=!1;if((0,V.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,D=g.abortReason,r=r.concat(Vd(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)E=!0,D="maxretry",r=r.concat(Vd(n.serverSyncTree_,g.currentWriteId,!0));else{const x=Ik(n,g.path,c);g.currentInputSnapshot=x;const L=t[h].update(x.val());if(void 0!==L){fw("transaction failed: Data returned ",L,g.path);let G=yi(L);"object"==typeof L&&null!=L&&(0,V.r3)(L,".priority")||(G=G.updatePriority(x.getPriority()));const ne=g.currentWriteId,ze=mw(n),Ke=hk(G,x,ze);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=Ke,g.currentWriteId=bT(n),c.splice(c.indexOf(ne),1),r=r.concat(sk(n.serverSyncTree_,g.path,Ke,g.currentWriteId,g.applyLocally)),r=r.concat(Vd(n.serverSyncTree_,ne,!0))}else E=!0,D="nodata",r=r.concat(Vd(n.serverSyncTree_,g.currentWriteId,!0))}xo(n.eventQueue_,e,r),r=[],E&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&i.push("nodata"===D?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(D),!1,null)))}DT(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Df(i[h]);TT(n,n.transactionQueueTree_)}(n,UF(n,e),i),i}function VF(n,t){let e,i=n.transactionQueueTree_;for(e=P(t);null!==e&&void 0===Ff(i);)i=wT(i,e),e=P(t=Q(t));return i}function UF(n,t){const e=[];return BF(n,t,e),e.sort((i,r)=>i.order-r.order),e}function BF(n,t,e){const i=Ff(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);CT(t,r=>{BF(n,r,e)})}function DT(n,t){const e=Ff(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,gk(t,e.length>0?e:void 0)}CT(t,i=>{DT(n,i)})}function Ek(n,t){const e=dw(VF(n,t)),i=wT(n.transactionQueueTree_,t);return function wj(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{bk(n,r)}),bk(n,i),DF(i,r=>{bk(n,r)}),e}function bk(n,t){const e=Ff(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,V.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,V.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(Vd(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?gk(t,void 0):e.length=s+1,xo(n.eventQueue_,dw(t),r);for(let c=0;c<i.length;c++)Df(i[c])}}const Tk=function(n,t){const e=zj(n),i=e.namespace;return"firebase.com"===e.domain&&Ao(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Ao("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&kr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new xf(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new A(e.pathString)}},zj=function(n){let t="",e="",i="",r="",s="",c=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(E,D)),E<D&&(r=function $j(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(E,D)));const x=function Wj(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):kr(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));y=t.indexOf(":"),y>=0?(c="https"===h||"wss"===h,g=parseInt(t.substring(y+1),10)):y=t.length;const L=t.slice(0,y);if("localhost"===L.toLowerCase())e="localhost";else if(L.split(".").length<=2)e=L;else{const G=t.indexOf(".");i=t.substring(0,G).toLowerCase(),e=t.substring(G+1),s=i}"ns"in x&&(s=x.ns)}return{host:t,port:g,domain:e,subdomain:i,secure:c,scheme:h,pathString:r,namespace:s}};class HF{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class jF{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Dk{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class GF{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new V.BH;return Fj(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Da("OnDisconnect.remove",this._path);const t=new V.BH;return FF(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Da("OnDisconnect.set",this._path),zl("OnDisconnect.set",t,this._path,!1);const e=new V.BH;return FF(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Da("OnDisconnect.setWithPriority",this._path),zl("OnDisconnect.setWithPriority",t,this._path,!1),yk("OnDisconnect.setWithPriority",e,!1);const i=new V.BH;return function Lj(n,t,e,i,r){const s=yi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,h)=>{"ok"===c&&gm(n.onDisconnect_,t,s),Ud(0,r,c,h)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Da("OnDisconnect.update",this._path),AF("OnDisconnect.update",t,this._path,!1);const e=new V.BH;return function Vj(n,t,e,i){if((0,V.xb)(e))return Wi("onDisconnect().update() called with empty data.  Don't do anything."),void Ud(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&_i(e,(c,h)=>{const g=yi(h);gm(n.onDisconnect_,Xe(t,c),g)}),Ud(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Ks{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return pe(this._path)?null:Te(this._path)}get ref(){return new Sa(this._repo,this._path)}get _queryIdentifier(){const t=ZP(this._queryParams),e=rm(t);return"{}"===e?"default":e}get _queryObject(){return ZP(this._queryParams)}isEqual(t){if(!((t=(0,V.m9)(t))instanceof Ks))return!1;const e=this._repo===t._repo,i=Ln(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function We(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function ST(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Bd(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Wl){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Hl)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==qs)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Jn){if(null!=t&&!hw(t)||null!=e&&!hw(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof VM||n.getIndex()===UM,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function AT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Sa extends Ks{constructor(t,e){super(t,e,new iT,!1)}get parent(){const t=pt(this._path);return null===t?null:new Sa(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Lf{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new A(t),i=Vf(this.ref,t);return new Lf(this._node.getChild(e),i,Jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Lf(r,Vf(this.ref,i),Jn)))}hasChild(t){const e=new A(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $F(n,t){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==t?Vf(n._root,t):n._root}function WF(n,t){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const e=Tk(t,n._repo.repoInfo_.nodeAdmin);xF("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Ao("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),$F(n,e.path.toString())}function Vf(n,t){return null===P((n=(0,V.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),gw("child","path",e,!1)):gw("child","path",t,!1),new Sa(n._repo,Xe(n._path,t));var e}function Sk(n,t){n=(0,V.m9)(n),Da("set",n._path),zl("set",t,n._path,!1);const e=new V.BH;return wk(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function Qj(n,t){AF("update",t,n._path,!1);const e=new V.BH;return function Nj(n,t,e,i){vm(n,"update",{path:t.toString(),value:e});let r=!0;const s=mw(n),c={};if(_i(e,(h,g)=>{r=!1,c[h]=bF(Xe(t,h),yi(g),n.serverSyncTree_,s)}),r)Wi("update() called with empty data.  Don't do anything."),Ud(0,i,"ok",void 0);else{const h=bT(n),g=function oj(n,t,e,i){!function E3(n,t,e,i){(0,V.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=YM(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Xn.fromObject(e);return ym(n,new mm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,h);ET(n.eventQueue_,g),n.server_.merge(t.toString(),e,(y,E)=>{const D="ok"===y;D||kr("update at "+t+" failed: "+y);const x=Vd(n.serverSyncTree_,h,!D),L=x.length>0?wm(n,t):t;xo(n.eventQueue_,L,x),Ud(0,i,y,E)}),_i(e,y=>{const E=Ek(n,Xe(t,y));wm(n,E)}),xo(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Jj(n){n=(0,V.m9)(n);const t=new Dk(()=>{}),e=new _w(t);return function Rj(n,t,e){const i=function dj(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,E)=>{const D=gt(y,e);i=i||Fd(E,D)});let r=n.syncPointTree_.get(e);r?i=i||Fd(r,k()):(r=new fF,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new Nd(i,!0,!1):null;return function Z3(n){return uT(n.viewCache_)}(pF(r,t,cT(n.pendingWriteTree_,t._path),s?c.getNode():Yt.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=yi(r).withIndex(t._queryParams.getIndex());let c;if(ok(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=lw(n.serverSyncTree_,t._path,s);else{const h=uw(n.serverSyncTree_,t);c=vF(n.serverSyncTree_,t._path,s,h)}return xo(n.eventQueue_,t._path,c),_T(n.serverSyncTree_,t,e,null,!0),s},r=>(vm(n,"get for query "+(0,V.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Lf(i,new Sa(n._repo,n._path),n._queryParams.getIndex()))}class _w{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new HF("value",this,new Lf(t.snapshotNode,new Sa(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new jF(this,t,e):null}matches(t){return t instanceof _w&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xT{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new jF(this,t,e):null}createEvent(t,e){(0,V.hu)(null!=t.childName,"Child events should have a childName.");const i=Vf(new Sa(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new HF(t.type,this,new Lf(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof xT&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function yw(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const g=e,y=(E,D)=>{Ck(n._repo,n,h),g(E,D)};y.userCallback=e.userCallback,y.context=e.context,e=y}const c=new Dk(e,s||void 0),h="value"===t?new _w(c):new xT(t,c);return function Uj(n,t,e){let i;i=".info"===P(t._path)?ok(n.infoSyncTree_,t,e):ok(n.serverSyncTree_,t,e),MF(n.eventQueue_,t._path,i)}(n._repo,n,h),()=>Ck(n._repo,n,h)}function Ak(n,t,e,i){return yw(n,"value",t,e,i)}function zF(n,t,e,i){return yw(n,"child_added",t,e,i)}function qF(n,t,e,i){return yw(n,"child_changed",t,e,i)}function ZF(n,t,e,i){return yw(n,"child_moved",t,e,i)}function KF(n,t,e,i){return yw(n,"child_removed",t,e,i)}function YF(n,t,e){let i=null;const r=e?new Dk(e):null;"value"===t?i=new _w(r):t&&(i=new xT(t,r)),Ck(n._repo,n,i)}class hl{}class QF extends hl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zl("endAt",this._value,t._path,!0);const e=GM(t._queryParams,this._value,this._key);if(AT(e),Bd(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class eG extends hl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zl("endBefore",this._value,t._path,!1);const e=function c3(n,t,e){let i,r;return n.index_===Wl?("string"==typeof t&&(t=WP(t)),r=GM(n,t,e)):(i=null==e?Hl:WP(e),r=GM(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(AT(e),Bd(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class JF extends hl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zl("startAt",this._value,t._path,!0);const e=jM(t._queryParams,this._value,this._key);if(AT(e),Bd(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class iG extends hl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zl("startAfter",this._value,t._path,!1);const e=function u3(n,t,e){let i;if(n.index_===Wl)"string"==typeof t&&(t=$P(t)),i=jM(n,t,e);else{let r;r=null==e?qs:$P(e),i=jM(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(AT(e),Bd(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class sG extends hl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ks(t._repo,t._path,function a3(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class aG extends hl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ks(t._repo,t._path,function l3(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class uG extends hl{constructor(t){super(),this._path=t}_apply(t){ST(t,"orderByChild");const e=new A(this._path);if(pe(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new VM(e),r=rT(t._queryParams,i);return Bd(r),new Ks(t._repo,t._path,r,!0)}}class dG extends hl{_apply(t){ST(t,"orderByKey");const e=rT(t._queryParams,Wl);return Bd(e),new Ks(t._repo,t._path,e,!0)}}class fG extends hl{_apply(t){ST(t,"orderByPriority");const e=rT(t._queryParams,Jn);return Bd(e),new Ks(t._repo,t._path,e,!0)}}class gG extends hl{_apply(t){ST(t,"orderByValue");const e=rT(t._queryParams,UM);return Bd(e),new Ks(t._repo,t._path,e,!0)}}class _G extends hl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(zl("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new QF(this._value,this._key)._apply(new JF(this._value,this._key)._apply(t))}}function fl(n,...t){let e=(0,V.m9)(n);for(const i of t)e=i._apply(e);return e}(function J3(n){(0,V.hu)(!pT,"__referenceConstructor has already been defined"),pT=n})(Sa),function ij(n){(0,V.hu)(!mT,"__referenceConstructor has already been defined"),mT=n}(Sa);const xk={};function eL(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Ao("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,c=Tk(s,r),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,s=`http://${y}?ns=${h.namespace}`,c=Tk(s,r),h=c.repoInfo):g=!c.repoInfo.secure;const E=r&&g?new sm(sm.OWNER):new yM(n.name,n.options,t);xF("Invalid Firebase Database URL",c),pe(c.path)||Ao("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function IG(n,t,e,i){let r=xk[t.name];r||(r={},xk[t.name]=r);let s=r[n.toURLString()];return s&&Ao("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Mj(n,false,e,i),r[n.toURLString()]=s,s}(h,n,E,new _M(n.name,e));return new bG(D,n)}class bG{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function kj(n,t,e){if(n.stats_=$b(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sT(n.repoInfo_,(i,r,s,c)=>{NF(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>PF(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Of(n.repoInfo_,t,(i,r,s,c)=>{NF(n,i,r,s,c)},i=>{PF(n,i)},i=>{!function Oj(n,t){_i(t,(e,i)=>{vk(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function DP(n,t){const e=n.toString();return Od[e]||(Od[e]=t()),Od[e]}(n.repoInfo_,()=>new m3(n.stats_,n.server_)),n.infoData_=new d3,n.infoSyncTree_=new yF({startListening:(i,r,s,c)=>{let h=[];const g=n.infoData_.getNode(i._path);return g.isEmpty()||(h=lw(n.infoSyncTree_,i._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),vk(n,"connected",!1),n.serverSyncTree_=new yF({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(h,g)=>{const y=c(h,g);xo(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sa(this._repo,k())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function CG(n,t){const e=xk[t];(!e||e[n.key]!==n)&&Ao(`Database ${t}(${n.repoInfo_}) has already been deleted.`),LF(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Ao("Cannot call "+t+" on a deleted database.")}}function tL(){MM.IS_TRANSPORT_INITIALIZED&&kr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function TG(){tL(),$l.forceDisallow()}function DG(){tL(),Rd.forceDisallow(),$l.forceAllow()}function xG(n,t){kb(n,t)}const kG={".sv":"timestamp"};class NG{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Of.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Of.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function MG(n){Pv(Sr.SDK_VERSION),(0,Sr._registerComponent)(new Ca.wA("database",(t,{instanceIdentifier:e})=>eL(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Sr.registerVersion)(Ov,Rv,n),(0,Sr.registerVersion)(Ov,Rv,"esm2017")}();const VG=new bo.Yd("@firebase/database-compat"),iL=function(n){VG.warn("FIREBASE WARNING: "+n)};class HG{constructor(t){this._delegate=t}cancel(t){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,iL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class jG{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hd{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),gw("DataSnapshot.child","path",t,!1),new Hd(this._database,this._delegate.child(t))}hasChild(t){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),gw("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Hd(this._database,e)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new Mo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Or{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",e,!1);const c=Or.getCancelAndContextArgs_("Query.on",i,r),h=(y,E)=>{e.call(c.context,new Hd(this.database,y),E)};h.userCallback=e,h.context=c.context;const g=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return Ak(this._delegate,h,g),e;case"child_added":return zF(this._delegate,h,g),e;case"child_removed":return KF(this._delegate,h,g),e;case"child_changed":return qF(this._delegate,h,g),e;case"child_moved":return ZF(this._delegate,h,g),e;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,V.Wj)("Query.off","callback",e,!0),(0,V.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,YF(this._delegate,t,r)}else YF(this._delegate,t)}get(){return Jj(this._delegate).then(t=>new Hd(this.database,t))}once(t,e,i,r){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",e,!0);const s=Or.getCancelAndContextArgs_("Query.once",i,r),c=new V.BH,h=(y,E)=>{const D=new Hd(this.database,y);e&&e.call(s.context,D,E),c.resolve(D)};h.userCallback=e,h.context=s.context;const g=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(t){case"value":Ak(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":zF(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":KF(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":qF(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":ZF(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new Or(this.database,fl(this._delegate,function oG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sG(n)}(t)))}limitToLast(t){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new Or(this.database,fl(this._delegate,function lG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aG(n)}(t)))}orderByChild(t){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new Or(this.database,fl(this._delegate,function cG(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gw("orderByChild","path",n,!1),new uG(n)}(t)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new Or(this.database,fl(this._delegate,function hG(){return new dG}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new Or(this.database,fl(this._delegate,function pG(){return new fG}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new Or(this.database,fl(this._delegate,function mG(){return new gG}()))}startAt(t=null,e){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new Or(this.database,fl(this._delegate,function nG(n=null,t){return pw("startAt","key",t,!0),new JF(n,t)}(t,e)))}startAfter(t=null,e){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new Or(this.database,fl(this._delegate,function rG(n,t){return pw("startAfter","key",t,!0),new iG(n,t)}(t,e)))}endAt(t=null,e){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new Or(this.database,fl(this._delegate,function Xj(n,t){return pw("endAt","key",t,!0),new QF(n,t)}(t,e)))}endBefore(t=null,e){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new Or(this.database,fl(this._delegate,function tG(n,t){return pw("endBefore","key",t,!0),new eG(n,t)}(t,e)))}equalTo(t,e){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new Or(this.database,fl(this._delegate,function yG(n,t){return pw("equalTo","key",t,!0),new _G(n,t)}(t,e)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Or))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,V.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,V.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,V.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Mo(this.database,new Sa(this._delegate._repo,this._delegate._path))}}class Mo extends Or{constructor(t,e){super(t,new Ks(e._repo,e._path,new iT,!1)),this.database=t,this._delegate=e}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Mo(this.database,Vf(this._delegate,t))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Mo(this.database,t):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new Mo(this.database,this._delegate.root)}set(t,e){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",e,!0);const i=Sk(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,iL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Da("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",e,!0);const i=Qj(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Yj(n,t,e){if(Da("setWithPriority",n._path),zl("setWithPriority",t,n._path,!1),yk("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new V.BH;return wk(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",t,!0);const e=function Zj(n){return Da("remove",n._path),Sk(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,V.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function PG(n,t,e){var i;if(n=(0,V.m9)(n),Da("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new V.BH,h=Ak(n,()=>{});return function Hj(n,t,e,i,r,s){vm(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:Lv(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Ik(n,t,void 0);c.currentInputSnapshot=h;const g=c.update(h.val());if(void 0===g)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{fw("transaction failed: Data returned ",g,c.path),c.status=0;const y=wT(n.transactionQueueTree_,t),E=Ff(y)||[];let D;E.push(c),gk(y,E),"object"==typeof g&&null!==g&&(0,V.r3)(g,".priority")?(D=(0,V.DV)(g,".priority"),(0,V.hu)(hw(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(yT(n.serverSyncTree_,t)||Yt.EMPTY_NODE).getPriority().val();const x=mw(n),L=yi(g,D),G=hk(L,h,x);c.currentOutputSnapshotRaw=L,c.currentOutputSnapshotResolved=G,c.currentWriteId=bT(n);const ie=sk(n.serverSyncTree_,t,G,c.currentWriteId,c.applyLocally);xo(n.eventQueue_,t,ie),TT(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(g,y,E)=>{let D=null;g?s.reject(g):(D=new Lf(E,new Sa(n._repo,n._path),Jn),s.resolve(new NG(y,D)))},h,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new jG(s.committed,new Hd(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",e,!0);const i=function Kj(n,t){n=(0,V.m9)(n),Da("setPriority",n._path),yk("setPriority",t,!1);const e=new V.BH;return wk(n._repo,Xe(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",e,!0);const i=function qj(n,t){n=(0,V.m9)(n),Da("push",n._path),zl("push",t,n._path,!0);const e=RF(n._repo),i=i3(e),r=Vf(n,i),s=Vf(n,i);let c;return c=null!=t?Sk(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new Mo(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new Mo(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Da("Reference.onDisconnect",this._delegate._path),new HG(new GF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vw{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:TG,forceLongPolling:DG}}useEmulator(t,e,i={}){!function nL(n,t,e,i={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ao("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Ao('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new sm(sm.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,V.Sg)(i.mockUserToken,n.app.options.projectId);s=new sm(c)}!function wG(n,t,e,i){n.repoInfo_=new xf(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,V.Dv)("database.ref",0,1,arguments.length),t instanceof Mo){const e=WF(this._delegate,t.toString());return new Mo(this,e)}{const e=$F(this._delegate,t);return new Mo(this,e)}}refFromURL(t){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const i=WF(this._delegate,t);return new Mo(this,i)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function SG(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),LF(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function AG(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function Bj(n){n.persistentConnection_&&n.persistentConnection_.resume(OF)}(n._repo)}(this._delegate)}}vw.ServerValue={TIMESTAMP:function OG(){return kG}(),increment:n=>function RG(n){return{".sv":{increment:n}}}(n)};var $G=Object.freeze({__proto__:null,initStandalone:function GG({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){Pv(e);const c=new Ca.zt("auth-internal",new Ca.H0("database-standalone"));return c.setComponent(new Ca.wA("auth-internal",()=>i,"PRIVATE")),{instance:new vw(eL(n,c,void 0,t,s),n),namespace:r}}});const WG=vw.ServerValue;function rL(n){return null==n}function sL(n){return"function"==typeof n.set}function oL(n,t){return sL(t)?t:n.ref(t)}function aL(n,t){if(function qG(n){return"string"==typeof n}(n))return t.stringCase();if(sL(n))return t.firebaseCase();if(function ZG(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function ww(n,t,e="on",i=Cf.z){return new pi.y(r=>{let s=null;return s=n[e](t,(c,h)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:h})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,dt.U)(r=>{const{snapshot:s,prevKey:c}=r;let h=null;return s.exists()&&(h=s.key),{type:t,payload:s,prevKey:c,key:h}}),(0,lg.B)())}function lL(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function QG(n,t){const{payload:e,prevKey:i,key:r}=t,s=lL(n,r),c=function YG(n,t){if(rL(t))return 0;{const e=lL(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==i&&(n=n.filter(g=>g.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===r?t:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function uL(n){return(rL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function cL(n,t,e){return function KG(n,t,e){return ww(n,"value","once",e).pipe($n(i=>{const r=[ht(i)];return t.forEach(s=>r.push(ww(n,s,"on",e))),(0,ag.T)(...r).pipe(Nt(QG,[]))}),xb())}(n,t=uL(t),e)}function dL(n,t,e){const i=(t=uL(t)).map(r=>ww(n,r,"on",e));return(0,ag.T)(...i)}function hL(n,t){return function(i,r){return aL(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function t$(n){return function(e){return e?aL(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function fL(n,t){return function(){return ww(n,"value","on",t)}}!function zG(n){n.INTERNAL.registerComponent(new Ca.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new vw(r,i)},"PUBLIC").setServiceProps({Reference:Mo,Query:Or,Database:vw,DataSnapshot:Hd,enableLogging:xG,INTERNAL:$G,ServerValue:WG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(If.Z);const r$=new l.OlP("angularfire2.realtimeDatabaseURL"),s$=new l.OlP("angularfire2.database.use-emulator");let o$=(()=>{class n{constructor(e,i,r,s,c,h,g,y,E,D,x,L,G,ie,ne){this.schedulers=h;const ze=g,Ke=(0,$i.on)(e,c,i);y&&rf(Ke,c,E,x,L,G,D,ie),this.database=(0,$i.cc)(`${Ke.name}.database.${r}`,"AngularFireDatabase",Ke.name,()=>{const qe=c.runOutsideAngular(()=>Ke.database(r||void 0));return ze&&qe.useEmulator(...ze),qe},[ze])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>oL(this.database,e));let s=r;return i&&(s=i(r)),function n$(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:hL(i,"update"),set:hL(i,"set"),push:r=>i.push(r),remove:t$(i),snapshotChanges:r=>cL(n,r,e).pipe(_n.iC),stateChanges:r=>dL(n,r,e).pipe(_n.iC),auditTrail:r=>function JG(n,t,e){return function e$(n,t,e){return function XG(n,t){return ww(n,"value","on",t).pipe((0,dt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function kv(...n){const t=(0,zr.jO)(n);return(0,Qn.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),h=!1;for(let g=0;g<r;g++)(0,er.Xf)(n[g]).subscribe((0,Nn.x)(i,y=>{s[g]=y,!h&&!c[g]&&(c[g]=!0,(h=c.every(mo.y))&&(c=null))},hM.Z));e.subscribe((0,Nn.x)(i,g=>{if(h){const y=[g,...s];i.next(t?t(...y):y)}}))})}(t),(0,dt.U)(([r,s])=>{const c=r.lastKeyToLoad,h=s.map(g=>g.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function fM(n){return(0,Qn.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Nn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,dt.U)(r=>r.actions))}(n,dL(n,t).pipe(Nt((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(_n.iC),valueChanges:(r,s)=>cL(n,r,e).pipe((0,dt.U)(h=>h.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),_n.iC)}}(s,this)}object(e){return function i$(n,t){return{query:n,snapshotChanges:()=>fL(n,t.schedulers.outsideAngular)().pipe(_n.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>fL(n,t.schedulers.outsideAngular)().pipe(_n.iC,(0,dt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>oL(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($i.Dh),l.LFG($i.xv,8),l.LFG(r$,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(_n.HU),l.LFG(s$,8),l.LFG(bg,8),l.LFG(py,8),l.LFG(gy,8),l.LFG(td,8),l.LFG(nf,8),l.LFG(nd,8),l.LFG(tI,8),l.LFG(ed,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a$=(()=>{class n{constructor(){Eg.Z.registerVersion("angularfire",_n.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[o$]}),n})();const pL="firebasestorage.googleapis.com",gL="storageBucket";class vi extends V.ZR{constructor(t,e,i=0){super(Mk(t),`Firebase Storage: ${e} (${Mk(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Mk(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Mk(n){return"storage/"+n}function kk(){return new vi("unknown","An unknown error occurred, please check the error payload for server response.")}function mL(){return new vi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function _L(){return new vi("canceled","User canceled the upload/download.")}function yL(){return new vi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Cm(n){return new vi("invalid-argument",n)}function vL(){return new vi("app-deleted","The Firebase app was deleted.")}function wL(n){return new vi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cw(n,t){return new vi("invalid-format","String does not match format '"+n+"': "+t)}function Iw(n){throw new vi("internal-error","Internal error: "+n)}class Qr{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Qr.makeFromUrl(t,e)}catch{return new Qr(t,"")}if(""===i.path)return i;throw function y$(n){return new vi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Je){Je.path_=decodeURIComponent(Je.path)}const D=e.replace(/[.]/g,"\\."),qe=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Je){"/"===Je.path.charAt(Je.path.length-1)&&(Je.path_=Je.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===pL?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Je=0;Je<qe.length;Je++){const mt=qe[Je],At=mt.regex.exec(t);if(At){let Ni=At[mt.indices.path];Ni||(Ni=""),i=new Qr(At[mt.indices.bucket],Ni),mt.postModify(i);break}}if(null==i)throw function _$(n){return new vi("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class E${constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function MT(n){return"string"==typeof n||n instanceof String}function CL(n){return Ok()&&n instanceof Blob}function Ok(){return typeof Blob<"u"&&!(0,V.UG)()}function Rk(n,t,e,i){if(i<t)throw Cm(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Cm(`Invalid value for '${n}'. Expected ${e} or less.`)}function zu(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function IL(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var jd=(()=>{return(n=jd||(jd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",jd;var n})();function EL(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class x${constructor(t,e,i,r,s,c,h,g,y,E,D,x=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=D,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,G)=>{this.resolve_=L,this.reject_=G,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function D$(n){return void 0!==n}(g)?s():s(g)}catch(g){c(g)}else if(null!==h){const g=kk();g.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,g):g)}else c(r.canceled?this.appDelete_?vL():_L():mL())};this.canceled_?e(0,new kT(!1,null,!0)):this.backoffId_=function b$(n,t,e){let i=1,r=null,s=null,c=!1,h=0;function g(){return 2===h}let y=!1;function E(...ne){y||(y=!0,t.apply(null,ne))}function D(ne){r=setTimeout(()=>{r=null,n(L,g())},ne)}function x(){s&&clearTimeout(s)}function L(ne,...ze){if(y)return void x();if(ne)return x(),void E.call(null,ne,...ze);if(g()||c)return x(),void E.call(null,ne,...ze);let qe;i<64&&(i*=2),1===h?(h=2,qe=0):qe=1e3*(i+Math.random()),D(qe)}let G=!1;function ie(ne){G||(G=!0,x(),!y&&(null!==r?(ne||(h=2),clearTimeout(r),D(0)):ne||(h=1)))}return D(0),s=setTimeout(()=>{c=!0,ie(!0)},e),ie}((i,r)=>{if(r)return void i(!1,new kT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===jd.NO_ERROR,g=s.getStatus();if((!h||EL(g,this.additionalRetryCodes_))&&this.retry){const E=s.getErrorCode()===jd.ABORT;return void i(!1,new kT(!1,null,E))}const y=-1!==this.successCodes_.indexOf(g);i(!0,new kT(y,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function T$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class kT{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function F$(...n){const t=function P$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(Ok())return new Blob(n);throw new vi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ko={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Nk{constructor(t,e){this.data=t,this.contentType=e||null}}function Pk(n,t){switch(n){case ko.RAW:return new Nk(bL(t));case ko.BASE64:case ko.BASE64URL:return new Nk(TL(n,t));case ko.DATA_URL:return new Nk(function B$(n){const t=new DL(n);return t.base64?TL(ko.BASE64,t.rest):function U$(n){let t;try{t=decodeURIComponent(n)}catch{throw Cw(ko.DATA_URL,"Malformed data URL.")}return bL(t)}(t.rest)}(t),function H$(n){return new DL(n).contentType}(t))}throw kk()}function bL(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function TL(n,t){switch(n){case ko.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw Cw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ko.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw Cw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function V$(n){if(typeof atob>"u")throw function I$(n){return new vi("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:Cw(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class DL{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Cw(ko.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function j$(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class ql{constructor(t,e){let i=0,r="";CL(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(CL(this.data_)){const r=function L$(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new ql(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new ql(i,!0)}}static getBlob(...t){if(Ok()){const e=t.map(i=>i instanceof ql?i.data_:i);return new ql(F$.apply(null,e))}{const e=t.map(c=>MT(c)?Pk(ko.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let h=0;h<c.length;h++)r[s++]=c[h]}),new ql(r,!0)}}uploadData(){return this.data_}}function Fk(n){let t;try{t=JSON.parse(n)}catch{return null}return function A$(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function SL(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function W$(n,t){return t}class vs{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||W$}}let OT=null;function Ew(){if(OT)return OT;const n=[];n.push(new vs("bucket")),n.push(new vs("generation")),n.push(new vs("metageneration")),n.push(new vs("name","fullPath",!0));const e=new vs("name");e.xform=function t(s,c){return function z$(n){return!MT(n)||n.length<2?n:SL(n)}(c)},n.push(e);const r=new vs("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new vs("timeCreated")),n.push(new vs("updated")),n.push(new vs("md5Hash",null,!0)),n.push(new vs("cacheControl",null,!0)),n.push(new vs("contentDisposition",null,!0)),n.push(new vs("contentEncoding",null,!0)),n.push(new vs("contentLanguage",null,!0)),n.push(new vs("contentType",null,!0)),n.push(new vs("metadata","customMetadata",!0)),OT=n,OT}function AL(n,t,e){const i=Fk(t);return null===i?null:function Z$(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function q$(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Qr(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function Lk(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const xL="prefixes";class Zl{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kl(n){if(!n)throw kk()}function RT(n,t){return function e(i,r){const s=AL(n,r,t);return Kl(null!==s),s}}function Im(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function g$(){return new vi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function p$(){return new vi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function f$(n){return new vi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function m$(n){return new vi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function bw(n){const t=Im(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function h$(n){return new vi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function kL(n,t,e){const r=zu(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Zl(r,"GET",RT(n,e),c);return h.errorHandler=bw(t),h}function e6(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const h=zu(t.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new Zl(h,"GET",function J$(n,t){return function e(i,r){const s=function Q$(n,t,e){const i=Fk(e);return null===i?null:function Y$(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[xL])for(const r of e[xL]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Qr(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new Qr(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Kl(null!==s),s}}(n,t.bucket),y);return E.urlParams=s,E.errorHandler=Im(t),E}function RL(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function r6(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class NT{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function Vk(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Kl(!1)}return Kl(!!e&&-1!==(t||["active"]).indexOf(e)),e}const l6={STATE_CHANGED:"state_changed"},ws={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Uk(n){switch(n){case"running":case"pausing":case"canceling":return ws.RUNNING;case"paused":return ws.PAUSED;case"success":return ws.SUCCESS;case"canceled":return ws.CANCELED;default:return ws.ERROR}}class u6{constructor(t,e,i){if(function S$(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Em(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class d6 extends class c6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jd.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jd.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jd.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw Iw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Iw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Iw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Iw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Iw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function pl(){return new d6}class LL{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=Ew(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(EL(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=mL()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function s6(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=RL(t,i,r),h={name:c.fullPath},g=zu(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=Lk(c,e),G=new Zl(g,"POST",function L(ie){let ne;Vk(ie);try{ne=ie.getResponseHeader("X-Goog-Upload-URL")}catch{Kl(!1)}return Kl(MT(ne)),ne},n.maxUploadRetryTime);return G.urlParams=h,G.headers=E,G.body=D,G.errorHandler=Im(t),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,pl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function o6(n,t,e,i){const g=new Zl(e,"POST",function s(y){const E=Vk(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Kl(!1)}D||Kl(!1);const x=Number(D);return Kl(!isNaN(x)),new NT(x,i.size(),"final"===E)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Im(t),g}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,pl,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new NT(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function a6(n,t,e,i,r,s,c,h){const g=new NT(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=i.size()),i.size()!==g.total)throw function w$(){return new vi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let E=y;r>0&&(E=Math.min(E,r));const D=g.current;let L="";L=0===E?"finalize":y===E?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":L,"X-Goog-Upload-Offset":`${g.current}`},ie=i.slice(D,D+E);if(null===ie)throw yL();const qe=new Zl(e,"POST",function ne(Je,mt){const At=Vk(Je,["active","final"]),Un=g.current+E,Ni=i.size();let Ds;return Ds="final"===At?RT(t,s)(Je,mt):null,new NT(Un,Ni,"final"===At,Ds)},t.maxUploadRetryTime);return qe.headers=G,qe.body=ie.uploadData(),qe.progressCallback=h||null,qe.errorHandler=Im(n),qe}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(c,pl,r,s,!1);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=kL(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,pl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function NL(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let qe="";for(let Je=0;Je<2;Je++)qe+=Math.random().toString().slice(2);return qe}();c["Content-Type"]="multipart/related; boundary="+g;const y=RL(t,i,r),E=Lk(y,e),L=ql.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+g+"--");if(null===L)throw yL();const G={name:y.fullPath},ie=zu(s,n.host,n._protocol),ze=n.maxUploadRetryTime,Ke=new Zl(ie,"POST",RT(n,e),ze);return Ke.urlParams=G,Ke.headers=c,Ke.body=L.uploadData(),Ke.errorHandler=Im(t),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,pl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=_L(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=Uk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new u6(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(Uk(this._state)){case ws.SUCCESS:Em(this._resolve.bind(null,this.snapshot))();break;case ws.CANCELED:case ws.ERROR:Em(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(Uk(this._state)){case ws.RUNNING:case ws.PAUSED:t.next&&Em(t.next.bind(t,this.snapshot))();break;case ws.SUCCESS:t.complete&&Em(t.complete.bind(t))();break;default:t.error&&Em(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Uf{constructor(t,e){this._service=t,this._location=e instanceof Qr?e:Qr.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Uf(t,e)}get root(){const t=new Qr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SL(this._location.path)}get storage(){return this._service}get parent(){const t=function G$(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Qr(this._location.bucket,t);return new Uf(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw wL(t)}}function UL(n,t,e){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,Ie.Z)(function*(n,t,e){const r=yield BL(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield UL(n,t,r.nextPageToken))})).apply(this,arguments)}function BL(n,t){null!=t&&"number"==typeof t.maxResults&&Rk("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=e6(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,pl)}function E6(n){n._throwIfRoot("getDownloadURL");const t=function t6(n,t,e){const r=zu(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Zl(r,"GET",function X$(n,t){return function e(i,r){const s=AL(n,r,t);return Kl(null!==s),function K$(n,t,e,i){const r=Fk(t);if(null===r||!MT(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return zu("/b/"+c(n.bucket)+"/o/"+c(D),e,i)+IL({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return h.errorHandler=bw(t),h}(n.storage,n._location,Ew());return n.storage.makeRequestWithTokens(t,pl).then(e=>{if(null===e)throw function C$(){return new vi("no-download-url","The given file does not have any download URLs.")}();return e})}function HL(n,t){const e=function $$(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Qr(n._location.bucket,e);return new Uf(n.storage,i)}function jL(n,t){if(n instanceof Hk){const e=n;if(null==e._bucket)throw function v$(){return new vi("no-default-bucket","No default bucket found. Did you set the '"+gL+"' property when initializing the app?")}();const i=new Uf(e,e._bucket);return null!=t?jL(i,t):i}return void 0!==t?HL(n,t):n}function S6(n,t){if(t&&function T6(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof Hk)return function D6(n,t){return new Uf(n,t)}(n,t);throw Cm("To use ref(service, url), the first argument must be a Storage instance.")}return jL(n,t)}function GL(n,t){const e=t?.[gL];return null==e?null:Qr.makeFromBucketSpec(e,n)}class Hk{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=pL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Qr.makeFromBucketSpec(r,this._host):GL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Qr.makeFromBucketSpec(this._url,t):GL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Rk("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Rk("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ie.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ie.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Uf(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new E$(vL());{const c=function N$(n,t,e,i,r,s,c=!0){const h=IL(n.urlParams),g=n.url+h,y=Object.assign({},n.headers);return function O$(n,t){t&&(n["X-Firebase-GMPID"]=t)}(y,t),function M$(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(y,e),function k$(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(y,s),function R$(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(y,i),new x$(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(t,e){var i=this;return(0,Ie.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const $L="@firebase/storage";function qL(n,t){return S6(n=(0,V.m9)(n),t)}function L6(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Hk(e,i,r,t,Sr.SDK_VERSION)}!function V6(){(0,Sr._registerComponent)(new Ca.wA("storage",L6,"PUBLIC").setMultipleInstances(!0)),(0,Sr.registerVersion)($L,"0.9.14",""),(0,Sr.registerVersion)($L,"0.9.14","esm2017")}();class PT{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class KL{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PT(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new PT(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new PT(c,this,this._ref)):{next:e.next?c=>e.next(new PT(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class YL{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new qu(t,this._service))}get items(){return this._delegate.items.map(t=>new qu(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class qu{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function F6(n,t){return HL(n,t)}(this._delegate,t);return new qu(e,this.storage)}get root(){return new qu(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new qu(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new KL(function x6(n,t,e){return function y6(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new LL(n,new ql(t),e)}(n=(0,V.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=ko.RAW,i){this._throwIfRoot("putString");const r=Pk(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new KL(new LL(this._delegate,new ql(r.data,!0),s),this)}listAll(){return function R6(n){return function w6(n){const t={prefixes:[],items:[]};return UL(n,t).then(()=>t)}(n=(0,V.m9)(n))}(this._delegate).then(t=>new YL(t,this.storage))}list(t){return function O6(n,t){return BL(n=(0,V.m9)(n),t)}(this._delegate,t||void 0).then(e=>new YL(e,this.storage))}getMetadata(){return function M6(n){return function C6(n){n._throwIfRoot("getMetadata");const t=kL(n.storage,n._location,Ew());return n.storage.makeRequestWithTokens(t,pl)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(t){return function k6(n,t){return function I6(n,t){n._throwIfRoot("updateMetadata");const e=function n6(n,t,e,i){const s=zu(t.fullServerUrl(),n.host,n._protocol),h=Lk(e,i),y=n.maxOperationRetryTime,E=new Zl(s,"PATCH",RT(n,i),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=h,E.errorHandler=bw(t),E}(n.storage,n._location,t,Ew());return n.storage.makeRequestWithTokens(e,pl)}(n=(0,V.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function N6(n){return E6(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function P6(n){return function b6(n){n._throwIfRoot("deleteObject");const t=function i6(n,t){const i=zu(t.fullServerUrl(),n.host,n._protocol),h=new Zl(i,"DELETE",function c(g,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=bw(t),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,pl)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw wL(t)}}class QL{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(JL(t))throw Cm("ref() expected a child path but got a URL, use refFromURL instead.");return new qu(qL(this._delegate,t),this)}refFromURL(t){if(!JL(t))throw Cm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qr.makeFromUrl(t,this._delegate.host)}catch{throw Cm("refFromUrl() expected a valid full URL but got an invalid one.")}return new qu(qL(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function ZL(n,t,e,i={}){!function A6(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,V.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function JL(n){return/^[A-Za-z]+:\/\//.test(n)}function j6(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new QL(e,i)}function XL(n){const t=function $6(n){return new pi.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(function l$(n,t=Cf.z){return(0,Qn.e)((e,i)=>{let r=null,s=null,c=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function g(){const y=c+n,E=t.now();if(E<y)return r=this.schedule(void 0,y-E),void i.add(r);h()}e.subscribe((0,Nn.x)(i,y=>{s=y,c=t.now(),r||(r=t.schedule(g,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,dt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function FT(n){return{getDownloadURL:()=>ht(void 0).pipe(_n.fc,$n(()=>n.getDownloadURL()),_n.iC),getMetadata:()=>ht(void 0).pipe(_n.fc,$n(()=>n.getMetadata()),_n.iC),delete:()=>(0,rn.D)(n.delete()),child:t=>FT(n.child(t)),updateMetadata:t=>(0,rn.D)(n.updateMetadata(t)),put:(t,e)=>XL(n.put(t,e)),putString:(t,e,i)=>XL(n.putString(t,e,i)),list:t=>(0,rn.D)(n.list(t)),listAll:()=>(0,rn.D)(n.listAll())}}!function G6(n){const t={TaskState:ws,TaskEvent:l6,StringFormat:ko,Storage:QL,Reference:qu};n.INTERNAL.registerComponent(new Ca.wA("storage-compat",j6,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(If.Z);const W6=new l.OlP("angularfire2.storageBucket"),z6=new l.OlP("angularfire2.storage.maxUploadRetryTime"),q6=new l.OlP("angularfire2.storage.maxOperationRetryTime"),Z6=new l.OlP("angularfire2.storage.use-emulator");let K6=(()=>{class n{constructor(e,i,r,s,c,h,g,y,E,D){const x=(0,$i.on)(e,c,i);this.storage=(0,$i.cc)(`${x.name}.storage.${r}`,"AngularFireStorage",x.name,()=>{const L=c.runOutsideAngular(()=>x.storage(r||void 0)),G=E;return G&&L.useEmulator(...G),g&&L.setMaxUploadRetryTime(g),y&&L.setMaxOperationRetryTime(y),L},[g,y])}ref(e){return FT(this.storage.ref(e))}refFromURL(e){return FT(this.storage.refFromURL(e))}upload(e,i,r){return FT(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($i.Dh),l.LFG($i.xv,8),l.LFG(W6,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(_n.HU),l.LFG(z6,8),l.LFG(q6,8),l.LFG(Z6,8),l.LFG(ed,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Y6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Q6=(()=>{class n{constructor(){Eg.Z.registerVersion("angularfire",_n.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[K6],imports:[Y6]}),n})();function jk(){return(0,Qn.e)((n,t)=>{let e,i=!1;n.subscribe((0,Nn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var bt,J6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zu={},Gk=Gk||{},$t=J6||self;function LT(){}function VT(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Tw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var $k="closure_uid_"+(1e9*Math.random()>>>0),eW=0;function tW(n,t,e){return n.call.apply(n.bind,arguments)}function nW(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Jr(n,t,e){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tW:nW).apply(null,arguments)}function UT(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Rr(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return t.prototype[r].apply(i,c)}}function Gd(){this.s=this.s,this.o=this.o}Gd.prototype.s=!1,Gd.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function X6(n){Object.prototype.hasOwnProperty.call(n,$k)&&n[$k]||(n[$k]=++eW)}(this)},Gd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const eV=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function Wk(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function tV(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(VT(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function Xr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Xr.prototype.h=function(){this.defaultPrevented=!0};var rW=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",LT,t),$t.removeEventListener("test",LT,t)}catch{}return n}();function BT(n){return/^[\s\xa0]*$/.test(n)}var nV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zk(n,t){return n<t?-1:n>t?1:0}function HT(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function Yl(n){return-1!=HT().indexOf(n)}function qk(n){return qk[" "](n),n}qk[" "]=LT;var jT,n,oW=Yl("Opera"),bm=Yl("Trident")||Yl("MSIE"),iV=Yl("Edge"),Zk=iV||bm,rV=Yl("Gecko")&&!(-1!=HT().toLowerCase().indexOf("webkit")&&!Yl("Edge"))&&!(Yl("Trident")||Yl("MSIE"))&&!Yl("Edge"),aW=-1!=HT().toLowerCase().indexOf("webkit")&&!Yl("Edge");function sV(){var n=$t.document;return n?n.documentMode:void 0}e:{var Kk="",Yk=(n=HT(),rV?/rv:([^\);]+)(\)|;)/.exec(n):iV?/Edge\/([\d\.]+)/.exec(n):bm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):aW?/WebKit\/(\S+)/.exec(n):oW?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yk&&(Kk=Yk?Yk[1]:""),bm){var Qk=sV();if(null!=Qk&&Qk>parseFloat(Kk)){jT=String(Qk);break e}}jT=Kk}var lW={};var cW=$t.document&&bm&&(sV()||parseInt(jT,10))||void 0;function Dw(n,t){if(Xr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(rV){e:{try{qk(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Dw.X.h.call(this)}}Rr(Dw,Xr);var dW={2:"touch",3:"pen",4:"mouse"};Dw.prototype.h=function(){Dw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sw="closure_listenable_"+(1e6*Math.random()|0),hW=0;function fW(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++hW,this.ba=this.ea=!1}function GT(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Xk(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function aV(n){const t={};for(const e in n)t[e]=n[e];return t}const lV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uV(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<lV.length;s++)e=lV[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function $T(n){this.src=n,this.g={},this.h=0}function e1(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=eV(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(GT(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function t1(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return r}return-1}$T.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=t1(n,t,i,r);return-1<c?(t=n[c],e||(t.ea=!1)):((t=new fW(t,this.src,s,!!i,r)).ea=e,n.push(t)),t};var n1="closure_lm_"+(1e6*Math.random()|0),i1={};function cV(n,t,e,i,r){if(i&&i.once)return hV(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)cV(n,t[s],e,i,r);return null}return e=a1(e),n&&n[Sw]?n.N(t,e,Tw(i)?!!i.capture:!!i,r):dV(n,t,e,!1,i,r)}function dV(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=Tw(r)?!!r.capture:!!r,h=s1(n);if(h||(n[n1]=h=new $T(n)),(e=h.add(t,e,i,c,s)).proxy)return e;if(i=function pW(){const t=gW;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)rW||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(pV(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function hV(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)hV(n,t[s],e,i,r);return null}return e=a1(e),n&&n[Sw]?n.O(t,e,Tw(i)?!!i.capture:!!i,r):dV(n,t,e,!0,i,r)}function fV(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)fV(n,t[s],e,i,r);else i=Tw(i)?!!i.capture:!!i,e=a1(e),n&&n[Sw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=t1(s=n.g[t],e,i,r))&&(GT(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=s1(n))&&(t=n.g[t.toString()],n=-1,t&&(n=t1(t,e,i,r)),(e=-1<n?t[n]:null)&&r1(e))}function r1(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[Sw])e1(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(pV(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=s1(t))?(e1(e,n),0==e.h&&(e.src=null,t[n1]=null)):GT(n)}}}function pV(n){return n in i1?i1[n]:i1[n]="on"+n}function gW(n,t){if(n.ba)n=!0;else{t=new Dw(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&r1(n),n=e.call(i,t)}return n}function s1(n){return(n=n[n1])instanceof $T?n:null}var o1="__closure_events_fn_"+(1e9*Math.random()>>>0);function a1(n){return"function"==typeof n?n:(n[o1]||(n[o1]=function(t){return n.handleEvent(t)}),n[o1])}function _r(){Gd.call(this),this.i=new $T(this),this.P=this,this.I=null}function Nr(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Xr(t,n);else if(t instanceof Xr)t.target=t.target||n;else{var r=t;uV(t=new Xr(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=WT(c,i,!0,t)&&r}if(r=WT(c=t.g=n,i,!0,t)&&r,r=WT(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=WT(c=t.g=e[s],i,!1,t)&&r}function WT(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ba&&c.capture==e){var h=c.listener,g=c.ha||c.src;c.ea&&e1(n.i,c),r=!1!==h.call(g,i)&&r}}return r&&!i.defaultPrevented}Rr(_r,Gd),_r.prototype[Sw]=!0,_r.prototype.removeEventListener=function(n,t,e,i){fV(this,n,t,e,i)},_r.prototype.M=function(){if(_r.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)GT(e[i]);delete n.g[t],n.h--}}this.I=null},_r.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},_r.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var l1=$t.JSON.stringify;function mW(){var n=_V;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var u1,gV=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new yW,n=>n.reset());class yW{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function vW(n){$t.setTimeout(()=>{throw n},0)}function mV(n,t){u1||function wW(){var n=$t.Promise.resolve(void 0);u1=function(){n.then(CW)}}(),c1||(u1(),c1=!0),_V.add(n,t)}var c1=!1,_V=new class _W{constructor(){this.h=this.g=null}add(t,e){const i=gV.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function CW(){for(var n;n=mW();){try{n.h.call(n.g)}catch(e){vW(e)}var t=gV;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}c1=!1}function zT(n,t){_r.call(this),this.h=n||1,this.g=t||$t,this.j=Jr(this.lb,this),this.l=Date.now()}function d1(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function h1(n,t,e){if("function"==typeof n)e&&(n=Jr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(t)?-1:$t.setTimeout(n,t||0)}function yV(n){n.g=h1(()=>{n.g=null,n.i&&(n.i=!1,yV(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Rr(zT,_r),(bt=zT.prototype).ca=!1,bt.R=null,bt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Nr(this,"tick"),this.ca&&(d1(this),this.start()))}},bt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.M=function(){zT.X.M.call(this),d1(this),delete this.g};class IW extends Gd{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:yV(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aw(n){Gd.call(this),this.h=n,this.g={}}Rr(Aw,Gd);var vV=[];function wV(n,t,e,i){Array.isArray(e)||(e&&(vV[0]=e.toString()),e=vV);for(var r=0;r<e.length;r++){var s=cV(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function CV(n){Xk(n.g,function(t,e){this.g.hasOwnProperty(e)&&r1(t)},n),n.g={}}function qT(){this.g=!0}function Tm(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function DW(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return l1(e)}catch{return t}}(n,e)+(i?" "+i:"")})}Aw.prototype.M=function(){Aw.X.M.call(this),CV(this)},Aw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qT.prototype.Aa=function(){this.g=!1},qT.prototype.info=function(){};var Bf={},IV=null;function ZT(){return IV=IV||new _r}function EV(n){Xr.call(this,Bf.Pa,n)}function xw(n){const t=ZT();Nr(t,new EV(t))}function bV(n,t){Xr.call(this,Bf.STAT_EVENT,n),this.stat=t}function Cs(n){const t=ZT();Nr(t,new bV(t,n))}function TV(n,t){Xr.call(this,Bf.Qa,n),this.size=t}function Mw(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},t)}Bf.Pa="serverreachability",Rr(EV,Xr),Bf.STAT_EVENT="statevent",Rr(bV,Xr),Bf.Qa="timingevent",Rr(TV,Xr);var KT={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},DV={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function f1(){}function AV(){}f1.prototype.h=null;var m1,kw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function p1(){Xr.call(this,"d")}function g1(){Xr.call(this,"c")}function YT(){}function Ow(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new Aw(this),this.O=SW,this.T=new zT(n=Zk?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new xV}function xV(){this.i=null,this.g="",this.h=!1}Rr(p1,Xr),Rr(g1,Xr),Rr(YT,f1),YT.prototype.g=function(){return new XMLHttpRequest},YT.prototype.i=function(){return{}},m1=new YT;var SW=45e3,_1={},QT={};function y1(n,t,e){n.K=1,n.v=tD(Ku(t)),n.s=e,n.P=!0,MV(n,null)}function MV(n,t){n.F=Date.now(),Rw(n),n.A=Ku(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),BV(e.i,"t",i),n.C=0,e=n.l.H,n.h=new xV,n.g=c2(n.l,e?t:null,!n.s),0<n.N&&(n.L=new IW(Jr(n.La,n,n.g),n.N)),wV(n.S,n.g,"readystatechange",n.ib),t=n.H?aV(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),xw(),function EW(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var E=y[0];y=y[1];var D=E.split("_");c=2<=D.length&&"type"==D[1]?c+(E+"=")+y+"&":c+(E+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function kV(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function OV(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=AW(n,e),r==QT){4==t&&(n.o=4,Cs(14),i=!1),Tm(n.j,n.m,null,"[Incomplete Response]");break}if(r==_1){n.o=4,Cs(15),Tm(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Tm(n.j,n.m,r,null),v1(n,r)}kV(n)&&r!=QT&&r!=_1&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Cs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),S1(t),t.K=!0,Cs(11))):(Tm(n.j,n.m,e,"[Invalid Chunked Response]"),Hf(n),Nw(n))}function AW(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?QT:(e=Number(t.substring(e,i)),isNaN(e)?_1:(i+=1)+e>t.length?QT:(t=t.substr(i,e),n.C=i+e,t))}function Rw(n){n.V=Date.now()+n.O,RV(n,n.O)}function RV(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Mw(Jr(n.gb,n),t)}function JT(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function Nw(n){0==n.l.G||n.I||o2(n.l,n)}function Hf(n){JT(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,d1(n.T),CV(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function v1(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||w1(e.h,n)))if(!n.J&&w1(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;aD(e),sD(e)}D1(e),Cs(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=Mw(Jr(e.cb,e),6e3));if(1>=GV(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else Gf(e,11)}else if((n.J||e.g==n)&&aD(e),!BT(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.T=y[0],y=y[1],2==e.G)if("c"==y[0]){e.I=y[1],e.ka=y[2];const E=y[3];null!=E&&(e.ma=E,e.j.info("VER="+e.ma));const D=y[4];null!=D&&(e.Ca=D,e.j.info("SVER="+e.Ca));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(e.J=i=1.5*x,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const L=n.g;if(L){const G=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var s=i.h;s.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(C1(s,s.h),s.h=null))}if(i.D){const ie=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;ie&&(i.za=ie,ui(i.F,i.D,ie))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var c=n;if((i=e).sa=u2(i,i.H?i.ka:null,i.V),c.J){$V(i.h,c);var h=c,g=i.J;g&&h.setTimeout(g),h.B&&(JT(h),Rw(h)),i.g=c}else r2(i);0<e.i.length&&oD(e)}else"stop"!=y[0]&&"close"!=y[0]||Gf(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Gf(e,7):T1(e):"noop"!=y[0]&&e.l&&e.l.wa(y),e.A=0)}xw()}catch{}}function NV(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(VT(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function MW(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(VT(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function xW(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(VT(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(bt=Ow.prototype).setTimeout=function(n){this.O=n},bt.ib=function(n){n=n.target;const t=this.L;t&&3==Yu(n)?t.l():this.La(n)},bt.La=function(n){try{if(n==this.g)e:{const E=Yu(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>E)&&(3!=E||Zk||this.g&&(this.h.h||this.g.fa()||JV(this.g)))){this.I||4!=E||7==t||xw(),JT(this);var e=this.g.aa();this.Y=e;t:if(kV(this)){var i=JV(this.g);n="";var r=i.length,s=4==Yu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hf(this),Nw(this);var c="";break t}this.h.i=new $t.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==e,function bW(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,E,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!BT(h)){var y=h;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,Cs(12),Hf(this),Nw(this);break e}Tm(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,v1(this,e)}this.P?(OV(this,E,c),Zk&&this.i&&3==E&&(wV(this.S,this.T,"tick",this.hb),this.T.start())):(Tm(this.j,this.m,c,null),v1(this,c)),4==E&&Hf(this),this.i&&!this.I&&(4==E?o2(this.l,this):(this.i=!1,Rw(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,Cs(12)):(this.o=0,Cs(13)),Hf(this),Nw(this)}}}catch{}},bt.hb=function(){if(this.g){var n=Yu(this.g),t=this.g.fa();this.C<t.length&&(JT(this),OV(this,n,t),this.i&&4!=n&&Rw(this))}},bt.cancel=function(){this.I=!0,Hf(this)},bt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function TW(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(xw(),Cs(17)),Hf(this),this.o=2,Nw(this)):RV(this,this.V-n)};var PV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jf(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof jf){this.h=void 0!==t?t:n.h,XT(this,n.j),this.s=n.s,this.g=n.g,eD(this,n.m),this.l=n.l,t=n.i;var e=new Lw;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),FV(this,e),this.o=n.o}else n&&(e=String(n).match(PV))?(this.h=!!t,XT(this,e[1]||"",!0),this.s=Pw(e[2]||""),this.g=Pw(e[3]||"",!0),eD(this,e[4]),this.l=Pw(e[5]||"",!0),FV(this,e[6]||"",!0),this.o=Pw(e[7]||"")):(this.h=!!t,this.i=new Lw(null,this.h))}function Ku(n){return new jf(n)}function XT(n,t,e){n.j=e?Pw(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function eD(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function FV(n,t,e){t instanceof Lw?(n.i=t,function LW(n,t){t&&!n.j&&($d(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(VV(this,i),BV(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=Fw(t,PW)),n.i=new Lw(t,n.h))}function ui(n,t,e){n.i.set(t,e)}function tD(n){return ui(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Pw(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,OW),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function OW(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}jf.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Fw(t,LV,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Fw(t,LV,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(Fw(e,"/"==e.charAt(0)?NW:RW,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Fw(e,FW)),n.join("")};var LV=/[#\/\?@]/g,RW=/[#\?:]/g,NW=/[#\?]/g,PW=/[#\?@]/g,FW=/#/g;function Lw(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function $d(n){n.g||(n.g=new Map,n.h=0,n.i&&function kW(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function VV(n,t){$d(n),t=Dm(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function UV(n,t){return $d(n),t=Dm(n,t),n.g.has(t)}function BV(n,t,e){VV(n,t),0<e.length&&(n.i=null,n.g.set(Dm(n,t),Wk(e)),n.h+=e.length)}function Dm(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function HV(n){this.l=n||UW,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ga&&$t.g.Ga()&&$t.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=Lw.prototype).add=function(n,t){$d(this),this.i=null,n=Dm(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},bt.forEach=function(n,t){$d(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},bt.oa=function(){$d(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},bt.W=function(n){$d(this);let t=[];if("string"==typeof n)UV(this,n)&&(t=t.concat(this.g.get(Dm(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},bt.set=function(n,t){return $d(this),this.i=null,UV(this,n=Dm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},bt.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var UW=10;function jV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function GV(n){return n.h?1:n.g?n.g.size:0}function w1(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function C1(n,t){n.g?n.g.add(t):n.h=t}function $V(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function WV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return Wk(n.i)}function I1(){}function BW(){this.g=new I1}function HW(n,t,e){const i=e||"";try{NV(n,function(r,s){let c=r;Tw(r)&&(c=l1(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function nD(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function Vw(n){this.l=n.ac||null,this.j=n.jb||!1}function iD(n,t){_r.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=E1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}HV.prototype.cancel=function(){if(this.i=WV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},I1.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},I1.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},Rr(Vw,f1),Vw.prototype.g=function(){return new iD(this.l,this.j)},Vw.prototype.i=function(n){return function(){return n}}({}),Rr(iD,_r);var E1=0;function zV(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Uw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Bw(n)}function Bw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=iD.prototype).open=function(n,t){if(this.readyState!=E1)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Bw(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||$t).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uw(this)),this.readyState=E1},bt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Bw(this)),this.g&&(this.readyState=3,Bw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zV(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},bt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Uw(this):Bw(this),3==this.readyState&&zV(this)}},bt.Va=function(n){this.g&&(this.response=this.responseText=n,Uw(this))},bt.Ua=function(n){this.g&&(this.response=n,Uw(this))},bt.ga=function(){this.g&&Uw(this)},bt.setRequestHeader=function(n,t){this.v.append(n,t)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(iD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GW=$t.JSON.parse;function bi(n){_r.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qV,this.K=this.L=!1}Rr(bi,_r);var qV="",$W=/^https?$/i,WW=["POST","PUT"];function ZV(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,KV(n),rD(n)}function KV(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function YV(n){if(n.h&&typeof Gk<"u"&&(!n.C[1]||4!=Yu(n)||2!=n.aa()))if(n.v&&4==Yu(n))h1(n.Ha,0,n);else if(Nr(n,"readystatechange"),4==Yu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===h){var r=String(n.H).match(PV)[1]||null;if(!r&&$t.self&&$t.self.location){var s=$t.self.location.protocol;r=s.substr(0,s.length-1)}i=!$W.test(r?r.toLowerCase():"")}e=i}if(e)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var c=2<Yu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",KV(n)}}finally{rD(n)}}}function rD(n,t){if(n.g){QV(n);const e=n.g,i=n.C[0]?LT:null;n.g=null,n.C=null,t||Nr(n,"ready");try{e.onreadystatechange=i}catch{}}}function QV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Yu(n){return n.g?n.g.readyState:0}function JV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case qV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function XV(n){let t="";return Xk(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function b1(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=XV(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):ui(n,t,e))}function Hw(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function e2(n){this.Ca=0,this.i=[],this.j=new qT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Hw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Hw("baseRetryDelayMs",5e3,n),this.bb=Hw("retryDelaySeedMs",1e4,n),this.$a=Hw("forwardChannelMaxRetries",2,n),this.ta=Hw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new HV(n&&n.concurrentRequestLimit),this.Fa=new BW,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function T1(n){if(t2(n),3==n.G){var t=n.U++,e=Ku(n.F);ui(e,"SID",n.I),ui(e,"RID",t),ui(e,"TYPE","terminate"),jw(n,e),(t=new Ow(n,n.j,t,void 0)).K=2,t.v=tD(Ku(e)),e=!1,$t.navigator&&$t.navigator.sendBeacon&&(e=$t.navigator.sendBeacon(t.v.toString(),"")),!e&&$t.Image&&((new Image).src=t.v,e=!0),e||(t.g=c2(t.l,null),t.g.da(t.v)),t.F=Date.now(),Rw(t)}l2(n)}function sD(n){n.g&&(S1(n),n.g.cancel(),n.g=null)}function t2(n){sD(n),n.u&&($t.clearTimeout(n.u),n.u=null),aD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function oD(n){jV(n.h)||n.m||(n.m=!0,mV(n.Ja,n),n.C=0)}function n2(n,t){var e;e=t?t.m:n.U++;const i=Ku(n.F);ui(i,"SID",n.I),ui(i,"RID",e),ui(i,"AID",n.T),jw(n,i),n.o&&n.s&&b1(i,n.o,n.s),e=new Ow(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=i2(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),C1(n.h,e),y1(e,i,t)}function jw(n,t){n.ia&&Xk(n.ia,function(e,i){ui(t,i,e)}),n.l&&NV({},function(e,i){ui(t,i,e)})}function i2(n,t,e){e=Math.min(n.i.length,e);var i=n.l?Jr(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let g=0;g<e;g++){let y=r[g].h;const E=r[g].g;if(y-=s,0>y)s=Math.max(0,r[g].h-100),h=!1;else try{HW(E,c,"req"+y+"_")}catch{i&&i(E)}}if(h){i=c.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function r2(n){n.g||n.u||(n.Z=1,mV(n.Ia,n),n.A=0)}function D1(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Mw(Jr(n.Ia,n),a2(n,n.A)),n.A++,0))}function S1(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function s2(n){n.g=new Ow(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=Ku(n.sa);ui(t,"RID","rpc"),ui(t,"SID",n.I),ui(t,"CI",n.L?"0":"1"),ui(t,"AID",n.T),ui(t,"TYPE","xmlhttp"),jw(n,t),n.o&&n.s&&b1(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=tD(Ku(t)),e.s=null,e.P=!0,MV(e,n)}function aD(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function o2(n,t){var e=null;if(n.g==t){aD(n),S1(n),n.g=null;var i=2}else{if(!w1(n.h,t))return;e=t.D,$V(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;Nr(i=ZT(),new TV(i,e)),oD(n)}else r2(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function qW(n,t){return!(GV(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Mw(Jr(n.Ja,n,t),a2(n,n.C)),n.C++,0)))}(n,t)||2==i&&D1(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:Gf(n,5);break;case 4:Gf(n,10);break;case 3:Gf(n,6);break;default:Gf(n,2)}}function a2(n,t){let e=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(e*=2),e*t}function Gf(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=Jr(n.kb,n);e||(e=new jf("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||XT(e,"https"),tD(e)),function jW(n,t){const e=new qT;if($t.Image){const i=new Image;i.onload=UT(nD,e,i,"TestLoadImage: loaded",!0,t),i.onerror=UT(nD,e,i,"TestLoadImage: error",!1,t),i.onabort=UT(nD,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=UT(nD,e,i,"TestLoadImage: timeout",!1,t),$t.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Cs(2);n.G=0,n.l&&n.l.va(t),l2(n),t2(n)}function l2(n){if(n.G=0,n.la=[],n.l){const t=WV(n.h);(0!=t.length||0!=n.i.length)&&(tV(n.la,t),tV(n.la,n.i),n.h.i.length=0,Wk(n.i),n.i.length=0),n.l.ua()}}function u2(n,t,e){var i=e instanceof jf?Ku(e):new jf(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),eD(i,i.m);else{var r=$t.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new jf(null,void 0);i&&XT(s,i),t&&(s.g=t),r&&eD(s,r),e&&(s.l=e),i=s}return t=n.za,(e=n.D)&&t&&ui(i,e,t),ui(i,"VER",n.ma),jw(n,i),i}function c2(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new bi(e&&n.Da&&!n.ra?new Vw({jb:!0}):n.ra)).Ka(n.H),t}function d2(){}function lD(){if(bm&&!(10<=Number(cW)))throw Error("Environmental error: no available transport.")}function Oo(n,t){_r.call(this),this.g=new e2(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Yb)&&!BT(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!BT(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Sm(this)}function h2(n){p1.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function f2(){g1.call(this),this.status=1}function Sm(n){this.g=n}(bt=bi.prototype).Ka=function(n){this.L=n},bt.da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():m1.g(),this.C=function SV(n){return n.h||(n.h=n.i())}(this.u?this.u:m1),this.g.onreadystatechange=Jr(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void ZV(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=$t.FormData&&n instanceof $t.FormData,!(0<=eV(WW,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{QV(this),0<this.B&&((this.K=function zW(n){return bm&&function uW(){return function sW(n){var t=lW;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=nV(String(jT)).split("."),e=nV("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=zk(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||zk(0==r[2].length,0==s[2].length)||zk(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.qa,this)):this.A=h1(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){ZV(this,s)}},bt.qa=function(){typeof Gk<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),rD(this))},bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rD(this,!0)),bi.X.M.call(this)},bt.Ha=function(){this.s||(this.F||this.v||this.l?YV(this):this.fb())},bt.fb=function(){YV(this)},bt.aa=function(){try{return 2<Yu(this)?this.g.status:-1}catch{return-1}},bt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},bt.Sa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),GW(t)}},bt.Ea=function(){return this.m},bt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=e2.prototype).ma=8,bt.G=1,bt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Ow(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=aV(s),uV(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=i2(this,r,t),ui(e=Ku(this.F),"RID",n),ui(e,"CVER",22),this.D&&ui(e,"X-HTTP-Session-Id",this.D),jw(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(XV(s)))+"&"+t:this.o&&b1(e,this.o,s)),C1(this.h,r),this.Ya&&ui(e,"TYPE","init"),this.O?(ui(e,"$req",t),ui(e,"SID","null"),r.Z=!0,y1(r,e,null)):y1(r,e,t),this.G=2}}else 3==this.G&&(n?n2(this,n):0==this.i.length||jV(this.h)||n2(this))},bt.Ia=function(){if(this.u=null,s2(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Mw(Jr(this.eb,this),n)}},bt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Cs(10),sD(this),s2(this))},bt.cb=function(){null!=this.v&&(this.v=null,sD(this),D1(this),Cs(19))},bt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Cs(2)):(this.j.info("Failed to ping google.com"),Cs(1))},(bt=d2.prototype).xa=function(){},bt.wa=function(){},bt.va=function(){},bt.ua=function(){},bt.Ra=function(){},lD.prototype.g=function(n,t){return new Oo(n,t)},Rr(Oo,_r),Oo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;Cs(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=u2(n,null,n.V),oD(n)},Oo.prototype.close=function(){T1(this.g)},Oo.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=l1(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.ab++,n)),3==t.G&&oD(t)},Oo.prototype.M=function(){this.g.l=null,delete this.j,T1(this.g),delete this.g,Oo.X.M.call(this)},Rr(h2,p1),Rr(f2,g1),Rr(Sm,d2),Sm.prototype.xa=function(){Nr(this.g,"a")},Sm.prototype.wa=function(n){Nr(this.g,new h2(n))},Sm.prototype.va=function(n){Nr(this.g,new f2)},Sm.prototype.ua=function(){Nr(this.g,"b")},lD.prototype.createWebChannel=lD.prototype.g,Oo.prototype.send=Oo.prototype.u,Oo.prototype.open=Oo.prototype.m,Oo.prototype.close=Oo.prototype.close,KT.NO_ERROR=0,KT.TIMEOUT=8,KT.HTTP_ERROR=6,DV.COMPLETE="complete",AV.EventType=kw,kw.OPEN="a",kw.CLOSE="b",kw.ERROR="c",kw.MESSAGE="d",_r.prototype.listen=_r.prototype.N,bi.prototype.listenOnce=bi.prototype.O,bi.prototype.getLastError=bi.prototype.Oa,bi.prototype.getLastErrorCode=bi.prototype.Ea,bi.prototype.getStatus=bi.prototype.aa,bi.prototype.getResponseJson=bi.prototype.Sa,bi.prototype.getResponseText=bi.prototype.fa,bi.prototype.send=bi.prototype.da,bi.prototype.setWithCredentials=bi.prototype.Ka;var ZW=Zu.createWebChannelTransport=function(){return new lD},KW=Zu.getStatEventTarget=function(){return ZT()},A1=Zu.ErrorCode=KT,YW=Zu.EventType=DV,QW=Zu.Event=Bf,p2=Zu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},JW=Zu.FetchXmlHttpFactory=Vw,uD=Zu.WebChannel=AV,XW=Zu.XhrIo=bi;const g2="@firebase/firestore";class yr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");let Am="9.14.0";const Wd=new bo.Yd("@firebase/firestore");function x1(){return Wd.logLevel}function $e(n,...t){if(Wd.logLevel<=bo.in.DEBUG){const e=t.map(M1);Wd.debug(`Firestore (${Am}): ${n}`,...e)}}function Oi(n,...t){if(Wd.logLevel<=bo.in.ERROR){const e=t.map(M1);Wd.error(`Firestore (${Am}): ${n}`,...e)}}function $f(n,...t){if(Wd.logLevel<=bo.in.WARN){const e=t.map(M1);Wd.warn(`Firestore (${Am}): ${n}`,...e)}}function M1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const t=`FIRESTORE (${Am}) INTERNAL ASSERTION FAILED: `+n;throw Oi(t),new Error(t)}function Ut(n,t){n||_t()}function rt(n,t){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends V.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class m2{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class nz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(yr.UNAUTHENTICATED))}shutdown(){}}class iz{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class rz{constructor(t){this.t=t,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let c=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new rr,t.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=c;t.enqueueRetryable((0,Ie.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},g=y=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new rr)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ut("string"==typeof i.accessToken),new m2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ut(null===t||"string"==typeof t),new yr(t)}}class sz{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=yr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ut(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class oz{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new sz(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _2{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class az{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ut("string"==typeof e.token),this.A=e.token,new _2(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lz(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class y2{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=lz(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Wt(n,t){return n<t?-1:n>t?1:0}function xm(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function v2(n){return n+"\0"}class ci{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ci.fromMillis(Date.now())}static fromDate(t){return ci.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new ci(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Wt(this.nanoseconds,t.nanoseconds):Wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new ci(0,0))}static max(){return new Bt(new ci(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gw{constructor(t,e,i){void 0===e?e=0:e>t.length&&_t(),void 0===i?i=t.length-e:i>t.length-e&&_t(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Gw.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Gw?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class pn extends Gw{construct(t,e,i){return new pn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new pn(e)}static emptyPath(){return new pn([])}}const uz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ti extends Gw{construct(t,e,i){return new Ti(t,e,i)}static isValidIdentifier(t){return uz.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ti.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ti(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ve(ve.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const h=t[r];if("\\"===h){if(r+1===t.length)throw new Ve(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[r+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ve(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=g,r+=2}else"`"===h?(c=!c,r++):"."!==h||c?(i+=h,r++):(s(),r++)}if(s(),c)throw new Ve(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ti(e)}static emptyPath(){return new Ti([])}}class et{constructor(t){this.path=t}static fromPath(t){return new et(pn.fromString(t))}static fromName(t){return new et(pn.fromString(t).popFirst(5))}static empty(){return new et(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===pn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return pn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new pn(t.slice()))}}class cD{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function k1(n){return n.fields.find(t=>2===t.kind)}function Wf(n){return n.fields.filter(t=>2!==t.kind)}cD.UNKNOWN_ID=-1;class dD{constructor(t,e){this.fieldPath=t,this.kind=e}}class $w{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new $w(0,Ro.min())}}function w2(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Bt.fromTimestamp(1e9===i?new ci(e+1,0):new ci(e,i));return new Ro(r,et.empty(),t)}function C2(n){return new Ro(n.readTime,n.key,-1)}class Ro{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Ro(Bt.min(),et.empty(),-1)}static max(){return new Ro(Bt.max(),et.empty(),-1)}}function O1(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=et.comparator(n.documentKey,t.documentKey),0!==e?e:Wt(n.largestBatchId,t.largestBatchId))}const I2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function zd(n){return R1.apply(this,arguments)}function R1(){return R1=(0,Ie.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==I2)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),R1.apply(this,arguments)}class he{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new he((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof he?e:he.resolve(e)}catch(e){return he.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):he.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):he.reject(e)}static resolve(t){return new he((e,i)=>{e(t)})}static reject(t){return new he((e,i)=>{i(t)})}static waitFor(t){return new he((e,i)=>{let r=0,s=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++s,c&&s===r&&e()},g=>i(g))}),c=!0,s===r&&e()})}static or(t){let e=he.resolve(!1);for(const i of t)e=e.next(r=>r?he.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new he((i,r)=>{const s=t.length,c=new Array(s);let h=0;for(let g=0;g<s;g++){const y=g;e(t[y]).next(E=>{c[y]=E,++h,h===s&&i(c)},E=>r(E))}})}static doWhile(t,e){return new he((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class hD{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new rr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new Ww(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=N1(i.target.error);this.P.reject(new Ww(t,r))}}static open(t,e,i,r){try{return new hD(e,t.transaction(r,i))}catch(s){throw new Ww(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||($e("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new fz(e)}}class gl{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===gl.D((0,V.z$)())&&Oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $e("SimpleDb","Removing database:",t),zf(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,V.hl)())return!1;if(gl.N())return!0;const t=(0,V.z$)(),e=gl.D(t),i=0<e&&e<10,r=gl.k(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,Ie.Z)(function*(){return e.db||($e("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new Ww(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;r("VersionError"===h.name?new Ve(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ve(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Ww(t,h))},s.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.S.$(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{$e("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ie.Z)(function*(){const c="readonly"===e;let h=0;for(;;){++h;try{s.db=yield s.F(t);const g=hD.open(s.db,t,c?"readonly":"readwrite",i),y=r(g).next(E=>(g.V(),E)).catch(E=>(g.abort(E),he.reject(E))).toPromise();return y.catch(()=>{}),yield g.v,y}catch(g){const y=g,E="FirebaseError"!==y.name&&h<3;if($e("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),s.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hz{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return zf(this.U.delete())}}class Ww extends Ve{constructor(t,e){super(ve.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function qd(n){return"IndexedDbTransactionError"===n.name}class fz{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($e("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),zf(i)}add(t){return $e("SimpleDb","ADD",this.store.name,t,t),zf(this.store.add(t))}get(t){return zf(this.store.get(t)).next(e=>(void 0===e&&(e=null),$e("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $e("SimpleDb","DELETE",this.store.name,t),zf(this.store.delete(t))}count(){return $e("SimpleDb","COUNT",this.store.name),zf(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(c,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new he((s,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new he((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(t,e){$e("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(s,c,h)=>h.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new he((i,r)=>{e.onerror=s=>{const c=N1(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(h=>{h?c.continue():i()}):i()}})}H(t,e){const i=[];return new he((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const h=c.target.result;if(!h)return void r();const g=new hz(h),y=e(h.primaryKey,h.value,g);if(y instanceof he){const E=y.catch(D=>(g.done(),he.reject(D)));i.push(E)}g.isDone?r():null===g.G?h.continue():h.continue(g.G)}}).next(()=>he.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function zf(n){return new he((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=N1(i.target.error);e(r)}})}let b2=!1;function N1(n){const t=gl.D((0,V.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return b2||(b2=!0,setTimeout(()=>{throw i},0)),i}}return n}class pz{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;$e("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Ie.Z)(function*(){e.task=null;try{$e("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){qd(i)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield zd(i)}yield e.nt(6e4)}))}}class gz{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,Ie.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,s=!0;return he.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return $e("IndexBackiller",`Processing collection: ${c}`),this.rt(t,c,r).next(h=>{r-=h,i.add(c)});s=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.ot(r,s)).next(h=>($e("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(t,e,h))).next(()=>c.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=C2(s);O1(c,i)>0&&(i=c)}),new Ro(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Ys{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function T2(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function qf(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function D2(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}Ys.at=-1;class Di{constructor(t,e){this.comparator=t,this.root=e||Pr.EMPTY}insert(t,e){return new Di(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(t){return new Di(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fD(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fD(this.root,t,this.comparator,!1)}getReverseIterator(){return new fD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fD(this.root,t,this.comparator,!0)}}class fD{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Pr{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Pr.RED,this.left=r??Pr.EMPTY,this.right=s??Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Pr(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Pr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const t=this.left.check();if(t!==this.right.check())throw _t();return t+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1,Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Pr(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(t){this.comparator=t,this.data=new Di(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new S2(this.data.getIterator())}getIteratorFrom(t){return new S2(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Vn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Vn(this.comparator);return e.data=t,e}}class S2{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mm(n){return n.hasNext()?n.getNext():void 0}class No{constructor(t){this.fields=t,t.sort(Ti.comparator)}static empty(){return new No([])}unionWith(t){let e=new Vn(Ti.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new No(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return xm(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class sr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new sr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new sr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const _z=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zd(n){if(Ut(!!n),"string"==typeof n){let t=0;const e=_z.exec(n);if(Ut(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Si(n.seconds),nanos:Si(n.nanos)}}function Si(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zf(n){return"string"==typeof n?sr.fromBase64String(n):sr.fromUint8Array(n)}function P1(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function A2(n){const t=n.mapValue.fields.__previous_value__;return P1(t)?A2(t):t}function zw(n){const t=Zd(n.mapValue.fields.__local_write_time__.timestampValue);return new ci(t.seconds,t.nanos)}class yz{constructor(t,e,i,r,s,c,h,g){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Kd{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Kd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Kd&&t.projectId===this.projectId&&t.database===this.database}}function qw(n){return null==n}function Zw(n){return 0===n&&1/n==-1/0}function x2(n){return"number"==typeof n&&Number.isInteger(n)&&!Zw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pD={nullValue:"NULL_VALUE"};function Kf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?P1(n)?4:R2(n)?9007199254740991:10:_t()}function Ql(n,t){if(n===t)return!0;const e=Kf(n);if(e!==Kf(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return zw(n).isEqual(zw(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Zd(i.timestampValue),c=Zd(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Zf(n.bytesValue).isEqual(Zf(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Si(i.geoPointValue.latitude)===Si(r.geoPointValue.latitude)&&Si(i.geoPointValue.longitude)===Si(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Si(i.integerValue)===Si(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Si(i.doubleValue),c=Si(r.doubleValue);return s===c?Zw(s)===Zw(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return xm(n.arrayValue.values||[],t.arrayValue.values||[],Ql);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(T2(s)!==T2(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Ql(s[h],c[h])))return!1;return!0}(n,t);default:return _t()}var r}function Kw(n,t){return void 0!==(n.values||[]).find(e=>Ql(e,t))}function Qd(n,t){if(n===t)return 0;const e=Kf(n),i=Kf(t);if(e!==i)return Wt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=Si(r.integerValue||r.doubleValue),h=Si(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return M2(n.timestampValue,t.timestampValue);case 4:return M2(zw(n),zw(t));case 5:return Wt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=Zf(r),h=Zf(s);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),h=s.split("/");for(let g=0;g<c.length&&g<h.length;g++){const y=Wt(c[g],h[g]);if(0!==y)return y}return Wt(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Wt(Si(r.latitude),Si(s.latitude));return 0!==c?c:Wt(Si(r.longitude),Si(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],h=s.values||[];for(let g=0;g<c.length&&g<h.length;++g){const y=Qd(c[g],h[g]);if(y)return y}return Wt(c.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Yd.mapValue&&s===Yd.mapValue)return 0;if(r===Yd.mapValue)return 1;if(s===Yd.mapValue)return-1;const c=r.fields||{},h=Object.keys(c),g=s.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const D=Wt(h[E],y[E]);if(0!==D)return D;const x=Qd(c[h[E]],g[y[E]]);if(0!==x)return x}return Wt(h.length,y.length)}(n.mapValue,t.mapValue);default:throw _t()}}function M2(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Wt(n,t);const e=Zd(n),i=Zd(t),r=Wt(e.seconds,i.seconds);return 0!==r?r:Wt(e.nanos,i.nanos)}function km(n){return F1(n)}function F1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Zd(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zf(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=F1(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const h of r)c?c=!1:s+=",",s+=`${h}:${F1(i.fields[h])}`;return s+"}"}(n.mapValue):_t();var t}function Yf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function L1(n){return!!n&&"integerValue"in n}function Yw(n){return!!n&&"arrayValue"in n}function k2(n){return!!n&&"nullValue"in n}function O2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gD(n){return!!n&&"mapValue"in n}function Qw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return qf(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Qw(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Qw(n.arrayValue.values[e]);return t}return Object.assign({},n)}function R2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vz(n){return"nullValue"in n?pD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yf(Kd.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_t()}function wz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yf(Kd.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Yd:_t()}function N2(n,t){const e=Qd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function P2(n,t){const e=Qd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Fr{constructor(t){this.value=t}static empty(){return new Fr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!gD(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Qw(e)}setAll(t){let e=Ti.emptyPath(),i={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const g=this.getFieldsMap(e);this.applyChanges(g,i,r),i={},r=[],e=h.popLast()}c?i[h.lastSegment()]=Qw(c):r.push(h.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());gD(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ql(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];gD(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){qf(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Fr(Qw(this.value))}}function F2(n){const t=[];return qf(n.fields,(e,i)=>{const r=new Ti([e]);if(gD(i)){const s=F2(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new No(t)}class ei{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new ei(t,0,Bt.min(),Bt.min(),Fr.empty(),0)}static newFoundDocument(t,e,i){return new ei(t,1,e,Bt.min(),i,0)}static newNoDocument(t,e){return new ei(t,2,e,Bt.min(),Fr.empty(),0)}static newUnknownDocument(t,e){return new ei(t,3,e,Bt.min(),Fr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Fr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ei&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ei(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cz{constructor(t,e=null,i=[],r=[],s=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=h,this.ht=null}}function L2(n,t=null,e=[],i=[],r=null,s=null,c=null){return new Cz(n,t,e,i,r,s,c)}function Qf(n){const t=rt(n);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+km(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),qw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>km(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>km(i)).join(",")),t.ht=e}return t.ht}function Jw(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!Mz(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!Ql(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!j2(n.startAt,t.startAt)&&j2(n.endAt,t.endAt)}function mD(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _D(n,t){return n.filters.filter(e=>e instanceof Lr&&e.field.isEqual(t))}function V2(n,t,e){let i=pD,r=!0;for(const s of _D(n,t)){let c=pD,h=!0;switch(s.op){case"<":case"<=":c=vz(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=pD}N2({value:i,inclusive:r},{value:c,inclusive:h})<0&&(i=c,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];N2({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function U2(n,t,e){let i=Yd,r=!0;for(const s of _D(n,t)){let c=Yd,h=!0;switch(s.op){case">=":case">":c=wz(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=Yd}P2({value:i,inclusive:r},{value:c,inclusive:h})>0&&(i=c,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];P2({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class Lr extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new Ez(t,e,i):"array-contains"===e?new Dz(t,i):"in"===e?new Sz(t,i):"not-in"===e?new Az(t,i):"array-contains-any"===e?new xz(t,i):new Lr(t,e,i)}static lt(t,e,i){return"in"===e?new bz(t,i):new Tz(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(Qd(e,this.value)):null!==e&&Kf(this.value)===Kf(e)&&this.ft(Qd(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _t()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ez extends Lr{constructor(t,e,i){super(t,e,i),this.key=et.fromName(i.referenceValue)}matches(t){const e=et.comparator(t.key,this.key);return this.ft(e)}}class bz extends Lr{constructor(t,e){super(t,"in",e),this.keys=B2(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Tz extends Lr{constructor(t,e){super(t,"not-in",e),this.keys=B2(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function B2(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>et.fromName(i.referenceValue))}class Dz extends Lr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Yw(e)&&Kw(e.arrayValue,this.value)}}class Sz extends Lr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Kw(this.value.arrayValue,e)}}class Az extends Lr{constructor(t,e){super(t,"not-in",e)}matches(t){if(Kw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Kw(this.value.arrayValue,e)}}class xz extends Lr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Yw(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Kw(this.value.arrayValue,i))}}class Jd{constructor(t,e){this.position=t,this.inclusive=e}}class Om{constructor(t,e="asc"){this.field=t,this.dir=e}}function Mz(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function H2(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?et.comparator(et.fromName(c.referenceValue),e.key):Qd(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function j2(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ql(n.position[e],t.position[e]))return!1;return!0}class Qu{constructor(t,e=null,i=[],r=[],s=null,c="F",h=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=g,this._t=null,this.wt=null}}function G2(n,t,e,i,r,s,c,h){return new Qu(n,t,e,i,r,s,c,h)}function Rm(n){return new Qu(n)}function $2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function V1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function U1(n){for(const t of n.filters)if(t.dt())return t.field;return null}function B1(n){return null!==n.collectionGroup}function Nm(n){const t=rt(n);if(null===t._t){t._t=[];const e=U1(t),i=V1(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new Om(e)),t._t.push(new Om(Ti.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Om(Ti.keyField(),s))}}}return t._t}function Is(n){const t=rt(n);if(!t.wt)if("F"===t.limitType)t.wt=L2(t.path,t.collectionGroup,Nm(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Nm(t))e.push(new Om(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Jd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jd(t.startAt.position,t.startAt.inclusive):null;t.wt=L2(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.wt}function yD(n,t,e){return new Qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Xw(n,t){return Jw(Is(n),Is(t))&&n.limitType===t.limitType}function W2(n){return`${Qf(Is(n))}|lt:${n.limitType}`}function H1(n){return`Query(target=${function Iz(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${km(i.value)}`;var i}).join(", ")}]`),qw(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>km(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>km(e)).join(",")),`Target(${t})`}(Is(n))}; limitType=${n.limitType})`}function j1(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):et.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const h=H2(r,s,c);return r.inclusive?h<=0:h<0}(e.startAt,Nm(e),i)||e.endAt&&!function(r,s,c){const h=H2(r,s,c);return r.inclusive?h>=0:h>0}(e.endAt,Nm(e),i)));var e,i}function z2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function q2(n){return(t,e)=>{let i=!1;for(const r of Nm(n)){const s=kz(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function kz(n,t,e){const i=n.field.isKeyField()?et.comparator(t.key,e.key):function(r,s,c){const h=s.data.field(r),g=c.data.field(r);return null!==h&&null!==g?Qd(h,g):_t()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _t()}}function Z2(n,t){if(n.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zw(t)?"-0":t}}function K2(n){return{integerValue:""+n}}function Y2(n,t){return x2(t)?K2(t):Z2(n,t)}class vD{constructor(){this._=void 0}}function Oz(n,t,e){return n instanceof Pm?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Jf?J2(n,t):n instanceof Xf?X2(n,t):function(i,r){const s=Q2(i,r),c=eU(s)+eU(i.yt);return L1(s)&&L1(i.yt)?K2(c):Z2(i.It,c)}(n,t)}function Rz(n,t,e){return n instanceof Jf?J2(n,t):n instanceof Xf?X2(n,t):e}function Q2(n,t){return n instanceof Fm?L1(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Pm extends vD{}class Jf extends vD{constructor(t){super(),this.elements=t}}function J2(n,t){const e=tU(t);for(const i of n.elements)e.some(r=>Ql(r,i))||e.push(i);return{arrayValue:{values:e}}}class Xf extends vD{constructor(t){super(),this.elements=t}}function X2(n,t){let e=tU(t);for(const i of n.elements)e=e.filter(r=>!Ql(r,i));return{arrayValue:{values:e}}}class Fm extends vD{constructor(t,e){super(),this.It=t,this.yt=e}}function eU(n){return Si(n.integerValue||n.doubleValue)}function tU(n){return Yw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class e0{constructor(t,e){this.field=t,this.transform=e}}class Pz{constructor(t,e){this.version=t,this.transformResults=e}}class di{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new di}static exists(t){return new di(void 0,t)}static updateTime(t){return new di(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wD(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class CD{}function nU(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Vm(n.key,di.none()):new Lm(n.key,n.data,di.none());{const e=n.data,i=Fr.empty();let r=new Vn(Ti.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new Ju(n.key,i,new No(r.toArray()),di.none())}}function Fz(n,t,e){n instanceof Lm?function(i,r,s){const c=i.value.clone(),h=sU(i.fieldTransforms,r,s.transformResults);c.setAll(h),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof Ju?function(i,r,s){if(!wD(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=sU(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(rU(i)),h.setAll(c),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function t0(n,t,e,i){return n instanceof Lm?function(r,s,c,h){if(!wD(r.precondition,s))return c;const g=r.value.clone(),y=oU(r.fieldTransforms,h,s);return g.setAll(y),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof Ju?function(r,s,c,h){if(!wD(r.precondition,s))return c;const g=oU(r.fieldTransforms,h,s),y=s.data;return y.setAll(rU(r)),y.setAll(g),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(E=>E.field))}(n,t,e,i):(c=e,wD(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function Lz(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=Q2(i.transform,r||null);null!=s&&(null===e&&(e=Fr.empty()),e.set(i.field,s))}return e||null}function iU(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&xm(e,i,(r,s)=>function Nz(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Jf&&i instanceof Jf||e instanceof Xf&&i instanceof Xf?xm(e.elements,i.elements,Ql):e instanceof Fm&&i instanceof Fm?Ql(e.yt,i.yt):e instanceof Pm&&i instanceof Pm);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class Lm extends CD{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ju extends CD{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rU(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function sU(n,t,e){const i=new Map;Ut(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,h=t.data.field(s.field);i.set(s.field,Rz(c,h,e[r]))}return i}function oU(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,Oz(s,c,t))}return i}class Vm extends CD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G1 extends CD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vz{constructor(t){this.count=t}}var qi,gn;function aU(n){switch(n){default:return _t();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function lU(n){if(void 0===n)return Oi("GRPC error has no .code"),ve.UNKNOWN;switch(n){case qi.OK:return ve.OK;case qi.CANCELLED:return ve.CANCELLED;case qi.UNKNOWN:return ve.UNKNOWN;case qi.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case qi.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case qi.INTERNAL:return ve.INTERNAL;case qi.UNAVAILABLE:return ve.UNAVAILABLE;case qi.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case qi.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case qi.NOT_FOUND:return ve.NOT_FOUND;case qi.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case qi.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case qi.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case qi.ABORTED:return ve.ABORTED;case qi.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case qi.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case qi.DATA_LOSS:return ve.DATA_LOSS;default:return _t()}}(gn=qi||(qi={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class Xd{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){qf(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return D2(this.inner)}size(){return this.innerSize}}const Uz=new Di(et.comparator);function Qs(){return Uz}const uU=new Di(et.comparator);function n0(...n){let t=uU;for(const e of n)t=t.insert(e.key,e);return t}function cU(n){let t=uU;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Jl(){return r0()}function dU(){return r0()}function r0(){return new Xd(n=>n.toString(),(n,t)=>n.isEqual(t))}const Bz=new Di(et.comparator),Hz=new Vn(et.comparator);function Xt(...n){let t=Hz;for(const e of n)t=t.add(e);return t}const jz=new Vn(Wt);function ID(){return jz}class s0{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,o0.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new s0(Bt.min(),r,ID(),Qs(),Xt())}}class o0{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new o0(i,e,Xt(),Xt(),Xt())}}class ED{constructor(t,e,i,r){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=r}}class hU{constructor(t,e){this.targetId=t,this.At=e}}class fU{constructor(t,e,i=sr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class pU{constructor(){this.Rt=0,this.bt=mU(),this.Pt=sr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=Xt(),e=Xt(),i=Xt();return this.bt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:_t()}}),new o0(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=mU()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Ot(t){this.Vt=!0,this.bt=this.bt.remove(t)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Gz{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=Qs(),this.qt=gU(),this.Kt=new Vn(Wt)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:_t()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,r)=>{this.Ht(r)&&e(r)})}Yt(t){const e=t.targetId,i=t.At.count,r=this.Xt(e);if(r){const s=r.target;if(mD(s))if(0===i){const c=new et(s.path);this.jt(e,c,ei.newNoDocument(c,Bt.min()))}else Ut(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,c)=>{const h=this.Xt(c);if(h){if(s.current&&mD(h.target)){const g=new et(h.target.path);null!==this.Ut.get(g)||this.ee(c,g)||this.jt(c,g,ei.newNoDocument(g,t))}s.Dt&&(e.set(c,s.xt()),s.Nt())}});let i=Xt();this.qt.forEach((s,c)=>{let h=!0;c.forEachWhile(g=>{const y=this.Xt(g);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.Ut.forEach((s,c)=>c.setReadTime(t));const r=new s0(t,e,this.Kt,this.Ut,i);return this.Ut=Qs(),this.qt=gU(),this.Kt=new Vn(Wt),r}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const r=this.zt(t);this.ee(t,e)?r.kt(e,1):r.Ot(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Mt(t){this.zt(t).Mt()}zt(t){let e=this.Lt.get(t);return e||(e=new pU,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new Vn(Wt),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||$e("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new pU),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function gU(){return new Di(et.comparator)}function mU(){return new Di(et.comparator)}const $z={asc:"ASCENDING",desc:"DESCENDING"},Wz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zz{constructor(t,e){this.databaseId=t,this.gt=e}}function a0(n,t){return n.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _U(n,t){return n.gt?t.toBase64():t.toUint8Array()}function qz(n,t){return a0(n,t.toTimestamp())}function vr(n){return Ut(!!n),Bt.fromTimestamp(function(t){const e=Zd(t);return new ci(e.seconds,e.nanos)}(n))}function $1(n,t){return(e=n,new pn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function yU(n){const t=pn.fromString(n);return Ut(DU(t)),t}function l0(n,t){return $1(n.databaseId,t.path)}function Xl(n,t){const e=yU(t);if(e.get(1)!==n.databaseId.projectId)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new et(wU(e))}function W1(n,t){return $1(n.databaseId,t)}function vU(n){const t=yU(n);return 4===t.length?pn.emptyPath():wU(t)}function u0(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wU(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function CU(n,t,e){return{name:l0(n,t),fields:e.value.mapValue.fields}}function IU(n,t,e){const i=Xl(n,t.name),r=vr(t.updateTime),s=new Fr({mapValue:{fields:t.fields}}),c=ei.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function c0(n,t){let e;if(t instanceof Lm)e={update:CU(n,t.key,t.value)};else if(t instanceof Vm)e={delete:l0(n,t.key)};else if(t instanceof Ju)e={update:CU(n,t.key,t.data),updateMask:nq(t.fieldMask)};else{if(!(t instanceof G1))return _t();e={verify:l0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof Pm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Jf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fm)return{fieldPath:s.field.canonicalString(),increment:c.yt};throw _t()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:qz(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:_t()),e;var r}function z1(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?di.updateTime(vr(r.updateTime)):void 0!==r.exists?di.exists(r.exists):di.none():di.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let h=null;"setToServerValue"in c?(Ut("REQUEST_TIME"===c.setToServerValue),h=new Pm):"appendMissingElements"in c?h=new Jf(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Xf(c.removeAllFromArray.values||[]):"increment"in c?h=new Fm(s,c.increment):_t();const g=Ti.fromServerFormat(c.fieldPath);return new e0(g,h)}(n,r)):[];var r;if(t.update){const r=Xl(n,t.update.name),s=new Fr({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new No((t.updateMask.fieldPaths||[]).map(y=>Ti.fromServerFormat(y)));return new Ju(r,s,c,e,i)}return new Lm(r,s,e,i)}if(t.delete){const r=Xl(n,t.delete);return new Vm(r,e)}if(t.verify){const r=Xl(n,t.verify);return new G1(r,e)}return _t()}function EU(n,t){return{documents:[W1(n,t.path)]}}function q1(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=W1(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=W1(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(g){if(0===g.length)return;const y=g.map(E=>function(D){if("=="===D.op){if(O2(D.value))return{unaryFilter:{field:Um(D.field),op:"IS_NAN"}};if(k2(D.value))return{unaryFilter:{field:Um(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(O2(D.value))return{unaryFilter:{field:Um(D.field),op:"IS_NOT_NAN"}};if(k2(D.value))return{unaryFilter:{field:Um(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Um(D.field),op:Xz(D.op),value:D.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(g){if(0!==g.length)return g.map(y=>{return{field:Um((E=y).field),direction:Jz(E.dir)};var E})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(y=t.limit,n.gt||qw(y)?y:{value:y});var y,h,g;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(g=t.endAt).inclusive,values:g.position}),e}function bU(n){let t=vU(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Ut(1===i);const E=e.from[0];E.allDescendants?r=E.collectionId:t=t.child(E.collectionId)}let s=[];e.where&&(s=TU(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(E=>{return new Om(Bm((D=E).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;e.limit&&(h=function(E){let D;return D="object"==typeof E?E.value:E,qw(D)?null:D}(e.limit));let g=null;var E;e.startAt&&(g=new Jd((E=e.startAt).values||[],!!E.before));let y=null;return e.endAt&&(y=function(E){return new Jd(E.values||[],!E.before)}(e.endAt)),G2(t,r,c,s,h,"F",g,y)}function TU(n){return n?void 0!==n.unaryFilter?[tq(n)]:void 0!==n.fieldFilter?[eq(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>TU(t)).reduce((t,e)=>t.concat(e)):_t():[]}function Jz(n){return $z[n]}function Xz(n){return Wz[n]}function Um(n){return{fieldPath:n.canonicalString()}}function Bm(n){return Ti.fromServerFormat(n.fieldPath)}function eq(n){return Lr.create(Bm(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(n.fieldFilter.op),n.fieldFilter.value)}function tq(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Bm(n.unaryFilter.field);return Lr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Bm(n.unaryFilter.field);return Lr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bm(n.unaryFilter.field);return Lr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Bm(n.unaryFilter.field);return Lr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}function nq(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function DU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Es(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=SU(t)),t=iq(n.get(e),t);return SU(t)}function iq(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function SU(n){return n+"\x01\x01"}function eu(n){const t=n.length;if(Ut(t>=2),2===t)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&_t(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let g;0===r.length?g=h:(r+=h,g=r,r=""),i.push(g);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:_t()}s=c+2}return new pn(i)}const AU=["userId","batchId"];function bD(n,t){return[n,Es(t)]}function xU(n,t,e){return[n,Es(t),e]}const rq={},sq=["prefixPath","collectionGroup","readTime","documentId"],oq=["prefixPath","collectionGroup","documentId"],aq=["collectionGroup","readTime","prefixPath","documentId"],lq=["canonicalId","targetId"],uq=["targetId","path"],cq=["path","targetId"],dq=["collectionId","parent"],hq=["indexId","uid"],fq=["uid","sequenceNumber"],pq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gq=["indexId","uid","orderedDocumentKey"],mq=["userId","collectionPath","documentId"],_q=["userId","collectionPath","largestBatchId"],yq=["userId","collectionGroup","largestBatchId"],MU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vq=[...MU,"documentOverlays"],kU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],OU=kU,wq=[...OU,"indexConfiguration","indexState","indexEntries"];class Z1 extends E2{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function wr(n,t){const e=rt(n);return gl.M(e.ie,t)}class K1{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Fz(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=t0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=t0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=dU();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=e.has(r.key)?null:h;const g=nU(c,h);null!==g&&i.set(r.key,g),c.isValidDocument()||c.convertToNoDocument(Bt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Xt())}isEqual(t){return this.batchId===t.batchId&&xm(this.mutations,t.mutations,(e,i)=>iU(e,i))&&xm(this.baseMutations,t.baseMutations,(e,i)=>iU(e,i))}}class Y1{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Ut(t.mutations.length===i.length);let r=Bz;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new Y1(t,e,i,r)}}class Q1{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eh{constructor(t,e,i,r,s=Bt.min(),c=Bt.min(),h=sr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(t){return new eh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class RU{constructor(t){this.re=t}}function NU(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:TD(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:l0(r=n.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:a0(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:ep(t.version)};else{if(!t.isUnknownDocument())return _t();i.unknownDocument={path:e.path.toArray(),version:ep(t.version)}}var r,s;return i}function TD(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function ep(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function tp(n){const t=new ci(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function np(n,t){const e=(t.baseMutations||[]).map(s=>z1(n.re,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>z1(n.re,s)),r=ci.fromMillis(t.localWriteTimeMs);return new K1(t.batchId,r,e,i)}function d0(n){const t=tp(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?tp(n.lastLimboFreeSnapshotVersion):Bt.min();let i;var r;return void 0!==n.query.documents?(Ut(1===(r=n.query).documents.length),i=Is(Rm(vU(r.documents[0])))):i=Is(bU(n.query)),new eh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,sr.fromBase64String(n.resumeToken))}function PU(n,t){const e=ep(t.snapshotVersion),i=ep(t.lastLimboFreeSnapshotVersion);let r;r=mD(t.target)?EU(n.re,t.target):q1(n.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Qf(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function J1(n){const t=bU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yD(t,t.limit,"L"):t}function X1(n,t){return new Q1(t.largestBatchId,z1(n.re,t.overlayMutation))}function FU(n,t){const e=t.path.lastSegment();return[n,Es(t.path.popLast()),e]}function LU(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:ep(i.readTime),documentKey:Es(i.documentKey.path),largestBatchId:i.largestBatchId}}class Iq{getBundleMetadata(t,e){return VU(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:tp(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return VU(t).put({bundleId:(i=e).id,createTime:ep(vr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return UU(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:J1(r.bundledQuery),readTime:tp(r.readTime)};var r})}saveNamedQuery(t,e){return UU(t).put({name:(i=e).name,readTime:ep(vr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function VU(n){return wr(n,"bundles")}function UU(n){return wr(n,"namedQueries")}class DD{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new DD(t,e.uid||"")}getOverlay(t,e){return h0(t).get(FU(this.userId,e)).next(i=>i?X1(this.It,i):null)}getOverlays(t,e){const i=Jl();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const h=new Q1(e,c);r.push(this.ue(t,h))}),he.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Es(c.getCollectionPath())));const s=[];return r.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(h0(t).Y("collectionPathOverlayIndex",h))}),he.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Jl(),s=Es(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return h0(t).W("collectionPathOverlayIndex",c).next(h=>{for(const g of h){const y=X1(this.It,g);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Jl();let c;const h=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return h0(t).Z({index:"collectionGroupOverlayIndex",range:h},(g,y,E)=>{const D=X1(this.It,y);s.size()<r||D.largestBatchId===c?(s.set(D.getKey(),D),c=D.largestBatchId):E.done()}).next(()=>s)}ue(t,e){return h0(t).put(function(i,r,s){const[c,h,g]=FU(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:c0(i.re,s.mutation)}}(this.It,this.userId,e))}}function h0(n){return wr(n,"documentOverlays")}class ip{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(Si(t.integerValue));else if("doubleValue"in t){const i=Si(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),Zw(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(Zf(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?R2(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):_t()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const r of Object.keys(i))this._e(r,e),this.ae(i[r],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const r of i)this.ae(r,e)}ge(t,e){this.le(e,37),et.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function Eq(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function BU(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=Eq(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}ip.Te=new ip;class bq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=e.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(t){const e=this.Ce(t),i=BU(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Ne(t){const e=this.Ce(t),i=BU(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Oe(0),this.Oe(255)):255===e?(this.Oe(255),this.Oe(0)):this.Oe(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Tq{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class Dq{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Me()}}class f0{constructor(){this.Be=new bq,this.Le=new Tq(this.Be),this.Ue=new Dq(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class rp{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new rp(this.indexId,this.documentKey,this.arrayValue,i)}}function sp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=HU(n.arrayValue,t.arrayValue),0!==e?e:(e=HU(n.directionalValue,t.directionalValue),0!==e?e:et.comparator(n.documentKey,t.documentKey)))}function HU(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class Sq{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=k1(t);if(void 0!==e&&!this.ze(e))return!1;const i=Wf(t);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const c=i[r];if(!this.He(this.je,c)||!this.Je(this.Ge[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],c))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class Aq{constructor(){this.Ye=new eO}addToCollectionParentIndex(t,e){return this.Ye.add(e),he.resolve()}getCollectionParents(t,e){return he.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return he.resolve()}deleteFieldIndex(t,e){return he.resolve()}getDocumentsMatchingTarget(t,e){return he.resolve(null)}getIndexType(t,e){return he.resolve(0)}getFieldIndexes(t,e){return he.resolve([])}getNextCollectionGroupToUpdate(t){return he.resolve(null)}getMinOffset(t,e){return he.resolve(Ro.min())}getMinOffsetFromCollectionGroup(t,e){return he.resolve(Ro.min())}updateCollectionGroup(t,e,i){return he.resolve()}updateIndexEntries(t,e){return he.resolve()}}class eO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Vn(pn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Vn(pn.comparator)).toArray()}}const SD=new Uint8Array(0);class xq{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new eO,this.Ze=new Xd(i=>Qf(i),(i,r)=>Jw(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:Es(r)};return jU(t).put(s)}return he.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[v2(e),""],!1,!0);return jU(t).W(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(eu(c.parent))}return i})}addFieldIndex(t,e){const i=AD(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=g0(t);return s.next(h=>{c.put(LU(h,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=AD(t),r=g0(t),s=p0(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=p0(t);let r=!0;const s=new Map;return he.forEach(this.tn(e),c=>this.en(t,c).next(h=>{r&&(r=!!h),s.set(c,h)})).next(()=>{if(r){let c=Xt();const h=[];return he.forEach(s,(g,y)=>{var E;$e("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${Qf(e)}`);const D=function(qe,Je){const mt=k1(Je);if(void 0===mt)return null;for(const At of _D(qe,mt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(y,g),x=function(qe,Je){const mt=new Map;for(const At of Wf(Je))for(const Un of _D(qe,At.fieldPath))switch(Un.op){case"==":case"in":mt.set(At.fieldPath.canonicalString(),Un.value);break;case"not-in":case"!=":return mt.set(At.fieldPath.canonicalString(),Un.value),Array.from(mt.values())}return null}(y,g),L=function(qe,Je){const mt=[];let At=!0;for(const Un of Wf(Je)){const Ni=0===Un.kind?V2(qe,Un.fieldPath,qe.startAt):U2(qe,Un.fieldPath,qe.startAt);mt.push(Ni.value),At&&(At=Ni.inclusive)}return new Jd(mt,At)}(y,g),G=function(qe,Je){const mt=[];let At=!0;for(const Un of Wf(Je)){const Ni=0===Un.kind?U2(qe,Un.fieldPath,qe.endAt):V2(qe,Un.fieldPath,qe.endAt);mt.push(Ni.value),At&&(At=Ni.inclusive)}return new Jd(mt,At)}(y,g),ie=this.nn(g,y,L),ne=this.nn(g,y,G),ze=this.sn(g,y,x),Ke=this.rn(g.indexId,D,ie,L.inclusive,ne,G.inclusive,ze);return he.forEach(Ke,qe=>i.J(qe,e.limit).next(Je=>{Je.forEach(mt=>{const At=et.fromSegments(mt.documentKey);c.has(At)||(c=c.add(At),h.push(At))})}))}).next(()=>h)}return he.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,r,s,c,h){const g=(null!=e?e.length:1)*Math.max(i.length,s.length),y=g/(null!=e?e.length:1),E=[];for(let D=0;D<g;++D){const x=e?this.on(e[D/y]):SD,L=this.un(t,x,i[D%y],r),G=this.cn(t,x,s[D%y],c),ie=h.map(ne=>this.un(t,x,ne,!0));E.push(...this.createRange(L,G,ie))}return E}un(t,e,i,r){const s=new rp(t,et.empty(),e,i);return r?s:s.Ke()}cn(t,e,i,r){const s=new rp(t,et.empty(),e,i);return r?s.Ke():s}en(t,e){const i=new Sq(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const h of s)i.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(t,e){let i=2;return he.forEach(this.tn(e),r=>this.en(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let h=new Vn(Ti.comparator),g=!1;for(const y of c.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?g=!0:h=h.add(E.field))}for(const y of c.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(g?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new f0;for(const r of Wf(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.qe(r.kind);ip.Te.ce(s,c)}return i.$e()}on(t){const e=new f0;return ip.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new f0;return ip.Te.ce(Yf(this.databaseId,e),i.qe(function(r){const s=Wf(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let r=[];r.push(new f0);let s=0;for(const c of Wf(t)){const h=i[s++];for(const g of r)if(this.ln(e,c.fieldPath)&&Yw(h))r=this.fn(r,c,h);else{const y=g.qe(c.kind);ip.Te.ce(h,y)}}return this.dn(r)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const h of r){const g=new f0;g.seed(h.$e()),ip.Te.ce(c,g.qe(e.kind)),s.push(g)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof Lr&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=AD(t),r=g0(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const c=[];return he.forEach(s,h=>r.get([h.indexId,this.uid]).next(g=>{c.push(function(y,E){const D=E?new $w(E.sequenceNumber,new Ro(tp(E.readTime),new et(eu(E.documentKey)),E.largestBatchId)):$w.empty(),x=y.fields.map(([L,G])=>new dD(Ti.fromServerFormat(L),G));return new cD(y.indexId,y.collectionGroup,x,D)}(h,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Wt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=AD(t),s=g0(t);return this._n(t).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>he.forEach(h,g=>s.put(LU(g.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return he.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),he.forEach(h,g=>this.wn(t,r,g).next(y=>{const E=this.mn(s,g);return y.isEqual(E)?he.resolve():this.gn(t,s,g,y,E)}))))})}yn(t,e,i,r){return p0(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,r){return p0(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const r=p0(t);let s=new Vn(sp);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(c,h)=>{s=s.add(new rp(i.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>s)}mn(t,e){let i=new Vn(sp);const r=this.an(e,t);if(null==r)return i;const s=k1(e);if(null!=s){const c=t.data.field(s.fieldPath);if(Yw(c))for(const h of c.arrayValue.values||[])i=i.add(new rp(e.indexId,t.key,this.on(h),r))}else i=i.add(new rp(e.indexId,t.key,SD,r));return i}gn(t,e,i,r,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(h,g,y,E,D){const x=h.getIterator(),L=g.getIterator();let G=Mm(x),ie=Mm(L);for(;G||ie;){let ne=!1,ze=!1;if(G&&ie){const Ke=y(G,ie);Ke<0?ze=!0:Ke>0&&(ne=!0)}else null!=G?ze=!0:ne=!0;ne?(E(ie),ie=Mm(L)):ze?(D(G),G=Mm(x)):(G=Mm(x),ie=Mm(L))}}(r,s,sp,h=>{c.push(this.yn(t,e,i,h))},h=>{c.push(this.pn(t,e,i,h))}),he.waitFor(c)}_n(t){let e=1;return g0(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,h)=>sp(c,h)).filter((c,h,g)=>!h||0!==sp(c,g[h-1]));const r=[];r.push(t);for(const c of i){const h=sp(c,t),g=sp(c,e);if(0===h)r[0]=t.Ke();else if(h>0&&g<0)r.push(c),r.push(c.Ke());else if(g>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,SD,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,SD,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(GU)}getMinOffset(t,e){return he.mapArray(this.tn(e),i=>this.en(t,i).next(r=>r||_t())).next(GU)}}function jU(n){return wr(n,"collectionParents")}function p0(n){return wr(n,"indexEntries")}function AD(n){return wr(n,"indexConfiguration")}function g0(n){return wr(n,"indexState")}function GU(n){Ut(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;O1(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Ro(t.readTime,t.documentKey,e)}const $U={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Js{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Js(t,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function WU(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let h=0;const g=i.Z({range:c},(E,D,x)=>(h++,x.delete()));s.push(g.next(()=>{Ut(1===h)}));const y=[];for(const E of e.mutations){const D=xU(t,E.key.path,e.batchId);s.push(r.delete(D)),y.push(E.key)}return he.waitFor(s).next(()=>y)}function xD(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw _t();t=n.noDocument}return JSON.stringify(t).length}Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(41943040,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);class MD{constructor(t,e,i,r){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(t,e,i,r){Ut(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new MD(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return th(t).Z({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Hm(t),c=th(t);return c.add({}).next(h=>{Ut("number"==typeof h);const g=new K1(h,e,i,r),y=function(x,L,G){const ie=G.baseMutations.map(ze=>c0(x.re,ze)),ne=G.mutations.map(ze=>c0(x.re,ze));return{userId:L,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ie,mutations:ne}}(this.It,this.userId,g),E=[];let D=new Vn((x,L)=>Wt(x.canonicalString(),L.canonicalString()));for(const x of r){const L=xU(this.userId,x.key.path,h);D=D.add(x.key.path.popLast()),E.push(c.put(y)),E.push(s.put(L,rq))}return D.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(t,x))}),t.addOnCommittedListener(()=>{this.In[h]=g.keys()}),he.waitFor(E).next(()=>g)})}lookupMutationBatch(t,e){return th(t).get(e).next(i=>i?(Ut(i.userId===this.userId),np(this.It,i)):null)}Tn(t,e){return this.In[e]?he.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return th(t).Z({index:"userMutationsIndex",range:r},(c,h,g)=>{h.userId===this.userId&&(Ut(h.batchId>=i),s=np(this.It,h)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return th(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return th(t).W("userMutationsIndex",e).next(i=>i.map(r=>np(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=bD(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Hm(t).Z({range:r},(c,h,g)=>{const[y,E,D]=c,x=eu(E);if(y===this.userId&&e.path.isEqual(x))return th(t).get(D).next(L=>{if(!L)throw _t();Ut(L.userId===this.userId),s.push(np(this.It,L))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Vn(Wt);const r=[];return e.forEach(s=>{const c=bD(this.userId,s.path),h=IDBKeyRange.lowerBound(c),g=Hm(t).Z({range:h},(y,E,D)=>{const[x,L,G]=y,ie=eu(L);x===this.userId&&s.path.isEqual(ie)?i=i.add(G):D.done()});r.push(g)}),he.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=bD(this.userId,i),c=IDBKeyRange.lowerBound(s);let h=new Vn(Wt);return Hm(t).Z({range:c},(g,y,E)=>{const[D,x,L]=g,G=eu(x);D===this.userId&&i.isPrefixOf(G)?G.length===r&&(h=h.add(L)):E.done()}).next(()=>this.En(t,h))}En(t,e){const i=[],r=[];return e.forEach(s=>{r.push(th(t).get(s).next(c=>{if(null===c)throw _t();Ut(c.userId===this.userId),i.push(np(this.It,c))}))}),he.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return WU(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),he.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return he.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Hm(t).Z({range:i},(s,c,h)=>{if(s[0]===this.userId){const g=eu(s[1]);r.push(g)}else h.done()}).next(()=>{Ut(0===r.length)})})}containsKey(t,e){return zU(t,this.userId,e)}Rn(t){return qU(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zU(n,t,e){const i=bD(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Hm(n).Z({range:s,X:!0},(h,g,y)=>{const[E,D,x]=h;E===t&&D===r&&(c=!0),y.done()}).next(()=>c)}function th(n){return wr(n,"mutations")}function Hm(n){return wr(n,"documentMutations")}function qU(n){return wr(n,"mutationQueues")}class op{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new op(0)}static vn(){return new op(-1)}}class Mq{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new op(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>Bt.fromTimestamp(new ci(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>jm(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Ut(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return jm(t).Z((c,h)=>{const g=d0(h);g.sequenceNumber<=e&&null===i.get(g.targetId)&&(r++,s.push(this.removeTargetData(t,g)))}).next(()=>he.waitFor(s)).next(()=>r)}forEachTarget(t,e){return jm(t).Z((i,r)=>{const s=d0(r);e(s)})}Vn(t){return ZU(t).get("targetGlobalKey").next(e=>(Ut(null!==e),e))}Sn(t,e){return ZU(t).put("targetGlobalKey",e)}Dn(t,e){return jm(t).put(PU(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Qf(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return jm(t).Z({range:r,index:"queryTargetsIndex"},(c,h,g)=>{const y=d0(h);Jw(e,y.target)&&(s=y,g.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=nh(t);return e.forEach(c=>{const h=Es(c.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(t,i,c))}),he.waitFor(r)}removeMatchingKeys(t,e,i){const r=nh(t);return he.forEach(e,s=>{const c=Es(s.path);return he.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=nh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=nh(t);let s=Xt();return r.Z({range:i,X:!0},(c,h,g)=>{const y=eu(c[1]),E=new et(y);s=s.add(E)}).next(()=>s)}containsKey(t,e){const i=Es(e.path),r=IDBKeyRange.bound([i],[v2(i)],!1,!0);let s=0;return nh(t).Z({index:"documentTargetsIndex",X:!0,range:r},([c,h],g,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}se(t,e){return jm(t).get(e).next(i=>i?d0(i):null)}}function jm(n){return wr(n,"targets")}function ZU(n){return wr(n,"targetGlobal")}function nh(n){return wr(n,"targetDocuments")}function KU([n,t],[e,i]){const r=Wt(n,e);return 0===r?Wt(t,i):r}class kq{constructor(t){this.xn=t,this.buffer=new Vn(KU),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();KU(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Oq{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Ie.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){qd(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield zd(i)}yield e.Fn(3e5)}))}}class Rq{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return he.resolve(Ys.at);const i=new kq(e);return this.$n.forEachTarget(t,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve($U)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$U):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,r,s,c,h,g,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,c=Date.now(),this.nthSequenceNumber(t,r))).next(D=>(i=D,h=Date.now(),this.removeTargets(t,i,e))).next(D=>(s=D,g=Date.now(),this.removeOrphanedDocuments(t,i))).next(D=>(y=Date.now(),x1()<=bo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${r} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(g-h)+`ms\n\tRemoved ${D} documents in `+(y-g)+`ms\nTotal Duration: ${y-E}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class Nq{constructor(t,e){this.db=t,this.garbageCollector=new Rq(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return kD(t,i)}removeReference(t,e,i){return kD(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return kD(t,e)}Gn(t,e){return function(i,r){let s=!1;return qU(i).tt(c=>zU(i,c,r).next(h=>(h&&(s=!0),he.resolve(!h)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(t,(c,h)=>{if(h<=e){const g=this.Gn(t,c).next(y=>{if(!y)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Bt.min()),nh(t).delete([0,Es(c.path)])))});r.push(g)}}).next(()=>he.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return kD(t,e)}Kn(t,e){const i=nh(t);let r,s=Ys.at;return i.Z({index:"documentTargetsIndex"},([c,h],{path:g,sequenceNumber:y})=>{0===c?(s!==Ys.at&&e(new et(eu(r)),s),s=y,r=g):s=Ys.at}).next(()=>{s!==Ys.at&&e(new et(eu(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function kD(n,t){return nh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Es(t.path),sequenceNumber:i}));var i}class YU{constructor(){this.changes=new Xd(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ei.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?he.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Pq{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return ap(t).put(i)}removeEntry(t,e,i){return ap(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],TD(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=ei.newInvalidDocument(e);return ap(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(m0(e))},(r,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:ei.newInvalidDocument(e)};return ap(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(m0(e))},(r,s)=>{i={document:this.jn(e,s),size:xD(s)}}).next(()=>i)}getEntries(t,e){let i=Qs();return this.zn(t,e,(r,s)=>{const c=this.jn(r,s);i=i.insert(r,c)}).next(()=>i)}Hn(t,e){let i=Qs(),r=new Di(et.comparator);return this.zn(t,e,(s,c)=>{const h=this.jn(s,c);i=i.insert(s,h),r=r.insert(s,xD(c))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return he.resolve();let r=new Vn(eB);e.forEach(g=>r=r.add(g));const s=IDBKeyRange.bound(m0(r.first()),m0(r.last())),c=r.getIterator();let h=c.getNext();return ap(t).Z({index:"documentKeyIndex",range:s},(g,y,E)=>{const D=et.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&eB(h,D)<0;)i(h,null),h=c.getNext();h&&h.isEqual(D)&&(i(h,y),h=c.hasNext()?c.getNext():null),h?E.j(m0(h)):E.done()}).next(()=>{for(;h;)i(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),TD(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ap(t).W(IDBKeyRange.bound(r,s,!0)).next(c=>{let h=Qs();for(const g of c){const y=this.jn(et.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(t,e,i,r){let s=Qs();const c=XU(e,i),h=XU(e,Ro.max());return ap(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(g,y,E)=>{const D=this.jn(et.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(t){return new Fq(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return JU(t).get("remoteDocumentGlobalKey").next(e=>(Ut(!!e),e))}Qn(t,e){return JU(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function Cq(n,t){let e;if(t.document)e=IU(n.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=et.fromSegments(t.noDocument.path),r=tp(t.noDocument.readTime);e=ei.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return _t();{const i=et.fromSegments(t.unknownDocument.path),r=tp(t.unknownDocument.version);e=ei.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new ci(i[0],i[1]);return Bt.fromTimestamp(r)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual(Bt.min()))return i}return ei.newInvalidDocument(t)}}function QU(n){return new Pq(n)}class Fq extends YU{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new Xd(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Vn((s,c)=>Wt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,h.readTime)),c.isValidDocument()){const g=NU(this.Yn.It,c);r=r.add(s.path.popLast()),i+=xD(g)-h.size,e.push(this.Yn.addEntry(t,s,g))}else if(i-=h.size,this.trackRemovals){const g=NU(this.Yn.It,c.convertToNoDocument(Bt.min()));e.push(this.Yn.addEntry(t,s,g))}}),r.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),he.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function JU(n){return wr(n,"remoteDocumentGlobal")}function ap(n){return wr(n,"remoteDocumentsV14")}function m0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function XU(n,t){const e=t.documentKey.path.toArray();return[n,TD(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function eB(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Wt(e[s],i[s]),r)return r;return r=Wt(e.length,i.length),r||(r=Wt(e[e.length-2],i[i.length-2]),r||Wt(e[e.length-1],i[i.length-1]))}class Lq{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class tB{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&t0(i.mutation,r,No.empty(),ci.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Xt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Xt()){const r=Jl();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=n0();return s.forEach((h,g)=>{c=c.insert(h,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Jl();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Xt()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,r){let s=Qs();const c=r0(),h=r0();return e.forEach((g,y)=>{const E=i.get(y.key);r.has(y.key)&&(void 0===E||E.mutation instanceof Ju)?s=s.insert(y.key,y):void 0!==E&&(c.set(y.key,E.mutation.getFieldMask()),t0(E.mutation,y,E.mutation.getFieldMask(),ci.now()))}),this.recalculateAndSaveOverlays(t,s).next(g=>(g.forEach((y,E)=>c.set(y,E)),e.forEach((y,E)=>{var D;return h.set(y,new Lq(E,null!==(D=c.get(y))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(t,e){const i=r0();let r=new Di((c,h)=>c-h),s=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(g=>{const y=e.get(g);if(null===y)return;let E=i.get(g)||No.empty();E=h.applyToLocalView(y,E),i.set(g,E);const D=(r.get(h.batchId)||Xt()).add(g);r=r.insert(h.batchId,D)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),y=g.key,E=g.value,D=dU();E.forEach(x=>{if(!s.has(x)){const L=nU(e.get(x),i.get(x));null!==L&&D.set(x,L),s=s.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(t,y,D))}return he.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return et.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):B1(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):he.resolve(Jl());let h=-1,g=s;return c.next(y=>he.forEach(y,(E,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),s.get(E)?he.resolve():this.getBaseDocument(t,E,D).next(x=>{g=g.insert(E,x)}))).next(()=>this.populateOverlays(t,y,s)).next(()=>this.computeViews(t,g,y,Xt())).next(E=>({batchId:h,changes:cU(E)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new et(e)).next(i=>{let r=n0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=n0();return this.indexManager.getCollectionParents(t,r).next(c=>he.forEach(c,h=>{const g=(y=e,E=h.child(r),new Qu(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(t,g,i).next(y=>{y.forEach((E,D)=>{s=s.insert(E,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((h,g)=>{const y=g.getKey();null===r.get(y)&&(r=r.insert(y,ei.newInvalidDocument(y)))});let c=n0();return r.forEach((h,g)=>{const y=s.get(h);void 0!==y&&t0(y.mutation,g,No.empty(),ci.now()),j1(e,g)&&(c=c.insert(h,g))}),c})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):he.resolve(ei.newInvalidDocument(e))}}class Vq{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return he.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:vr(i.createTime)}),he.resolve()}getNamedQuery(t,e){return he.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:J1(i.bundledQuery),readTime:vr(i.readTime)}),he.resolve();var i}}class Uq{constructor(){this.overlays=new Di(et.comparator),this.es=new Map}getOverlay(t,e){return he.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Jl();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ue(t,e,s)}),he.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),he.resolve()}getOverlaysForCollection(t,e,i){const r=Jl(),s=e.length+1,c=new et(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===s&&g.largestBatchId>i&&r.set(g.getKey(),g)}return he.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Di((y,E)=>y-E);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let E=s.get(y.largestBatchId);null===E&&(E=Jl(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=Jl(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=r)););return he.resolve(h)}ue(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Q1(e,i));let s=this.es.get(e);void 0===s&&(s=Xt(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class tO{constructor(){this.ns=new Vn(Cr.ss),this.rs=new Vn(Cr.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new Cr(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new Cr(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new et(new pn([])),i=new Cr(e,t),r=new Cr(e,t+1),s=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new et(new pn([])),i=new Cr(e,t),r=new Cr(e,t+1);let s=Xt();return this.rs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Cr(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Cr{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return et.comparator(t.key,e.key)||Wt(t._s,e._s)}static os(t,e){return Wt(t._s,e._s)||et.comparator(t.key,e.key)}}class Bq{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Vn(Cr.ss)}checkEmpty(t){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.ws;this.ws++;const c=new K1(s,e,i,r);this.mutationQueue.push(c);for(const h of r)this.gs=this.gs.add(new Cr(h.key,s)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return he.resolve(c)}lookupMutationBatch(t,e){return he.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),s=r<0?0:r;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Cr(e,0),r=new Cr(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],c=>{const h=this.ys(c._s);s.push(h)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Vn(Wt);return e.forEach(r=>{const s=new Cr(r,0),c=new Cr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],h=>{i=i.add(h._s)})}),he.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;et.isDocumentKey(s)||(s=s.child(""));const c=new Cr(new et(s),0);let h=new Vn(Wt);return this.gs.forEachWhile(g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(g._s)),!0)},c),he.resolve(this.Is(h))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Ut(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return he.forEach(e.mutations,r=>{const s=new Cr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new Cr(e,0),r=this.gs.firstAfterOrEqual(i);return he.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return he.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Hq{constructor(t){this.Es=t,this.docs=new Di(et.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return he.resolve(i?i.document.mutableCopy():ei.newInvalidDocument(e))}getEntries(t,e){let i=Qs();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ei.newInvalidDocument(r))}),he.resolve(i)}getAllFromCollection(t,e,i){let r=Qs();const s=new et(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!e.isPrefixOf(h.path))break;h.path.length>e.length+1||O1(C2(g),i)<=0||(r=r.insert(g.key,g.mutableCopy()))}return he.resolve(r)}getAllFromCollectionGroup(t,e,i,r){_t()}As(t,e){return he.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new jq(this)}getSize(t){return he.resolve(this.size)}}class jq extends YU{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),he.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class Gq{constructor(t){this.persistence=t,this.Rs=new Xd(e=>Qf(e),Jw),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new tO,this.targetCount=0,this.vs=op.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),he.resolve()}getLastRemoteSnapshotVersion(t){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return he.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),he.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new op(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,he.resolve()}updateTargetData(t,e){return this.Dn(e),he.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,he.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Rs.forEach((c,h)=>{h.sequenceNumber<=e&&null===i.get(h.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),he.waitFor(s).next(()=>r)}getTargetCount(t){return he.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return he.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),he.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),he.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),he.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return he.resolve(i)}containsKey(t,e){return he.resolve(this.Ps.containsKey(e))}}class nB{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new Ys(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Gq(this),this.indexManager=new Aq,this.remoteDocumentCache=new Hq(i=>this.referenceDelegate.xs(i)),this.It=new RU(e),this.Ns=new Vq(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Uq,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new Bq(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("MemoryPersistence","Starting transaction:",t);const r=new $q(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(t,e){return he.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class $q extends E2{constructor(t){super(),this.currentSequenceNumber=t}}class OD{constructor(t){this.persistence=t,this.Fs=new tO,this.$s=null}static Bs(t){return new OD(t)}get Ls(){if(this.$s)return this.$s;throw _t()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),he.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),he.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),he.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,i=>{const r=et.fromPath(i);return this.Us(t,r).next(s=>{s||e.removeEntry(r,Bt.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return he.or([()=>he.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class Wq{constructor(t){this.It=t}$(t,e,i,r){const s=new hD("createOrUpgrade",e);var h;i<1&&r>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AU,{unique:!0}),h.createObjectStore("documentMutations"),iB(t),function(h){h.createObjectStore("remoteDocuments")}(t));let c=he.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),iB(t)),c=c.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(h,g){return g.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AU,{unique:!0});const E=g.store("mutations"),D=y.map(x=>E.put(x));return he.waitFor(D)})}(t,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.qs(s))),i<6&&r>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(s))),i<8&&r>=8&&(c=c.next(()=>this.Qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.js(s))),i<11&&r>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:mq});g.createIndex("collectionPathOverlayIndex",_q,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",yq,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:sq});g.createIndex("documentKeyIndex",oq),g.createIndex("collectionGroupIndex",aq)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:hq}).createIndex("sequenceNumberIndex",fq,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:pq}).createIndex("documentKeyIndex",gq,{unique:!1})}(t))),c}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=xD(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>he.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(h=>he.forEach(h,g=>{Ut(g.userId===s.userId);const y=np(this.It,g);return WU(t,s.userId,y).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((c,h)=>{const g=new pn(c),y=[0,Es(g)];s.push(e.get(y).next(E=>E?he.resolve():e.put({targetId:0,path:Es(g),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:dq});const i=e.store("collectionParents"),r=new eO,s=c=>{if(r.add(c)){const h=c.lastSegment(),g=c.popLast();return i.put({collectionId:h,parent:Es(g)})}};return e.store("remoteDocuments").Z({X:!0},(c,h)=>{const g=new pn(c);return s(g.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([c,h,g],y)=>{const E=eu(h);return s(E.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const s=d0(r),c=PU(this.It,s);return e.put(c)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((s,c)=>{const h=e.store("remoteDocumentsV14"),g=(y=c,y.document?new et(pn.fromString(y.document.name).popFirst(5)):y.noDocument?et.fromSegments(y.noDocument.path):y.unknownDocument?et.fromSegments(y.unknownDocument.path):_t()).path.toArray();var y;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(h.put(E))}).next(()=>he.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=QU(this.It),s=new nB(OD.Bs,this.It.re);return i.W().next(c=>{const h=new Map;return c.forEach(g=>{var y;let E=null!==(y=h.get(g.userId))&&void 0!==y?y:Xt();np(this.It,g).keys().forEach(D=>E=E.add(D)),h.set(g.userId,E)}),he.forEach(h,(g,y)=>{const E=new yr(y),D=DD.oe(this.It,E),x=s.getIndexManager(E),L=MD.oe(E,this.It,x,s.referenceDelegate);return new tB(r,L,D,x).recalculateAndSaveOverlaysForDocumentKeys(new Z1(e,Ys.at),g).next()})})}}function iB(n){n.createObjectStore("targetDocuments",{keyPath:uq}).createIndex("documentTargetsIndex",cq,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lq,{unique:!0}),n.createObjectStore("targetGlobal")}const nO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iO{constructor(t,e,i,r,s,c,h,g,y,E,D=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=c,this.document=h,this.Js=y,this.Ys=E,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!iO.C())throw new Ve(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nq(this,r),this.ii=e+"main",this.It=new RU(g),this.ri=new gl(this.ii,this.Xs,new Wq(this.It)),this.Cs=new Mq(this.referenceDelegate,this.It),this.remoteDocumentCache=QU(this.It),this.Ns=new Iq,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===E&&Oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(ve.FAILED_PRECONDITION,nO);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new Ys(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,Ie.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,Ie.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,Ie.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>RD(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(qd(t))return $e("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return _0(t).get("owner").next(e=>he.resolve(this.mi(e)))}gi(t){return RD(t).delete(this.clientId)}yi(){var t=this;return(0,Ie.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=wr(i,"clientMetadata");return r.W().next(s=>{const c=t.Ii(s,18e5),h=s.filter(g=>-1===c.indexOf(g));return he.forEach(h,g=>r.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?he.resolve(!0):_0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Ve(ve.FAILED_PRECONDITION,nO);return!1}}return!(!this.networkEnabled||!this.inForeground)||RD(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&h)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$e("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ie.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new Z1(e,Ys.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>RD(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return MD.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new xq(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return DD.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Xs)?wq:14===c?OU:13===c?kU:12===c?vq:11===c?MU:void _t();var c;let h;return this.ri.runTransaction(t,r,s,g=>(h=new Z1(g,this.Ss?this.Ss.next():Ys.at),"readwrite-primary"===e?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw Oi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ve(ve.FAILED_PRECONDITION,I2);return i(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>i(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Vi(t){return _0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ve(ve.FAILED_PRECONDITION,nO)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _0(t).put("owner",e)}static C(){return gl.C()}_i(t){const e=_0(t);return e.get("owner").next(i=>this.mi(i)?($e("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):he.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Oi(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,V.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return $e("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Oi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){Oi("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function _0(n){return wr(n,"owner")}function RD(n){return wr(n,"clientMetadata")}function rO(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class sO{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=Xt(),r=Xt();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new sO(t,e.fromCache,i,r)}}class rB{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(s=>s||this.Oi(t,e,r,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if($2(e))return he.resolve(null);let i=Is(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=yD(e,null,"F"),i=Is(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=Xt(...s);return this.Ni.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(g=>{const y=this.Fi(e,h);return this.$i(e,y,c,g.readTime)?this.ki(t,yD(e,null,"F")):this.Bi(t,y,e,g)}))})))}Oi(t,e,i,r){return $2(e)||r.isEqual(Bt.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const c=this.Fi(e,s);return this.$i(e,c,i,r)?this.Mi(t,e):(x1()<=bo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),H1(e)),this.Bi(t,c,e,w2(r,-1)))})}Fi(t,e){let i=new Vn(q2(t));return e.forEach((r,s)=>{j1(t,s)&&(i=i.add(s))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(t,e){return x1()<=bo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",H1(e)),this.Ni.getDocumentsMatchingQuery(t,e,Ro.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class zq{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.It=r,this.Ui=new Di(Wt),this.qi=new Xd(s=>Qf(s),Jw),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tB(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function sB(n,t,e,i){return new zq(n,t,e,i)}function oB(n,t){return oO.apply(this,arguments)}function oO(){return oO=(0,Ie.Z)(function*(n,t){const e=rt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],h=[];let g=Xt();for(const y of r){c.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of s){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(i,g).next(y=>({ji:y,removedBatchIds:c,addedBatchIds:h}))})})}),oO.apply(this,arguments)}function qq(n,t){const e=rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(c,h,g,y){const E=g.batch,D=E.keys();let x=he.resolve();return D.forEach(L=>{x=x.next(()=>y.getEntry(h,L)).next(G=>{const ie=g.docVersions.get(L);Ut(null!==ie),G.version.compareTo(ie)<0&&(E.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),y.addEntry(G)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,E))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let h=Xt();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(h=h.add(c.batch.mutations[g].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function aB(n){const t=rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function Zq(n,t){const e=rt(n),i=t.snapshotVersion;let r=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.Ui;const h=[];t.targetChanges.forEach((E,D)=>{const x=r.get(D);if(!x)return;h.push(e.Cs.removeMatchingKeys(s,E.removedDocuments,D).next(()=>e.Cs.addMatchingKeys(s,E.addedDocuments,D)));let L=x.withSequenceNumber(s.currentSequenceNumber);var G,ie,ne;t.targetMismatches.has(D)?L=L.withResumeToken(sr.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,i)),r=r.insert(D,L),ie=L,ne=E,(0===(G=x).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&h.push(e.Cs.updateTargetData(s,L))});let g=Qs(),y=Xt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(s,E))}),h.push(lB(s,c,t.documentUpdates).next(E=>{g=E.Wi,y=E.zi})),!i.isEqual(Bt.min())){const E=e.Cs.getLastRemoteSnapshotVersion(s).next(D=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(E)}return he.waitFor(h).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,g,y)).next(()=>g)}).then(s=>(e.Ui=r,s))}function lB(n,t,e){let i=Xt(),r=Xt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=Qs();return e.forEach((h,g)=>{const y=s.get(h);g.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(h)),g.isNoDocument()&&g.version.isEqual(Bt.min())?(t.removeEntry(h,g.readTime),c=c.insert(h,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(t.addEntry(g),c=c.insert(h,g)):$e("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",g.version)}),{Wi:c,zi:r}})}function Kq(n,t){const e=rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Gm(n,t){const e=rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(s=>s?(r=s,he.resolve(r)):e.Cs.allocateTargetId(i).next(c=>(r=new eh(t,c,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function $m(n,t,e){return aO.apply(this,arguments)}function aO(){return aO=(0,Ie.Z)(function*(n,t,e){const i=rt(n),r=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!qd(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ui=i.Ui.remove(t),i.qi.delete(r.target)}),aO.apply(this,arguments)}function ND(n,t,e){const i=rt(n);let r=Bt.min(),s=Xt();return i.persistence.runTransaction("Execute query","readonly",c=>function(h,g,y){const E=rt(h),D=E.qi.get(y);return void 0!==D?he.resolve(E.Ui.get(D)):E.Cs.getTargetData(g,y)}(i,c,Is(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,h.targetId).next(g=>{s=g})}).next(()=>i.Li.getDocumentsMatchingQuery(c,t,e?r:Bt.min(),e?s:Xt())).next(h=>(dB(i,z2(t),h),{documents:h,Hi:s})))}function uB(n,t){const e=rt(n),i=rt(e.Cs),r=e.Ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(c=>c?c.target:null))}function cB(n,t){const e=rt(n),i=e.Ki.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,w2(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(dB(e,t,r),r))}function dB(n,t,e){let i=n.Ki.get(t)||Bt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(t,i)}function lO(){return lO=(0,Ie.Z)(function*(n,t,e,i){const r=rt(n);let s=Xt(),c=Qs();for(const y of e){const E=t.Ji(y.metadata.name);y.document&&(s=s.add(E));const D=t.Yi(y);D.setReadTime(t.Xi(y.metadata.readTime)),c=c.insert(E,D)}const h=r.Gi.newChangeBuffer({trackRemovals:!0}),g=yield Gm(r,(y=i,Is(Rm(pn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>lB(y,h,c).next(E=>(h.apply(y),E)).next(E=>r.Cs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>r.Cs.addMatchingKeys(y,s,g.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,E.Wi,E.zi)).next(()=>E.Wi)))}),lO.apply(this,arguments)}function Qq(n,t){return uO.apply(this,arguments)}function uO(){return uO=(0,Ie.Z)(function*(n,t,e=Xt()){const i=yield Gm(n,Is(J1(t.bundledQuery))),r=rt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=vr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(s,t);const h=i.withResumeToken(sr.EMPTY_BYTE_STRING,c);return r.Ui=r.Ui.insert(h.targetId,h),r.Cs.updateTargetData(s,h).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,t))})}),uO.apply(this,arguments)}function hB(n,t){return`firestore_clients_${n}_${t}`}function fB(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function cO(n,t){return`firestore_targets_${n}_${t}`}class PD{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ve(r.error.code,r.error.message))),c?new PD(t,e,r.state,s):(Oi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class y0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ve(i.error.code,i.error.message))),s?new y0(t,i.state,r):(Oi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class FD{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=ID();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=x2(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new FD(t,s):(Oi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class dO{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new dO(e.clientId,e.onlineState):(Oi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class hO{constructor(){this.activeTargetIds=ID()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fO{constructor(t,e,i,r,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Di(Wt),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=hB(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new hO),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const s=t.getItem(hB(t.persistenceKey,r));if(s){const c=FD.Zi(r,s);c&&(t.ur=t.ur.insert(c.clientId,c))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(cO(this.persistenceKey,t));if(i){const r=y0.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(cO(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $e("SharedClientState","READ",t,e),e}setItem(t,e){$e("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$e("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if($e("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ie.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(s){let c=Ys.at;if(null!=s)try{const h=JSON.parse(s);Ut("number"==typeof h),c=h}catch(h){Oi("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(i.newValue);r!==Ys.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new PD(this.currentUser,t,e,i),s=fB(this.persistenceKey,this.currentUser,t);this.setItem(s,r.tr())}Er(t){const e=fB(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=cO(this.persistenceKey,t),s=new y0(t,e,i);this.setItem(r,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return FD.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return PD.Zi(new yr(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return y0.Zi(r,e)}yr(t){return dO.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,Ie.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);$e("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),s=this.Ir(i),c=[],h=[];return s.forEach(g=>{r.has(g)||c.push(g)}),r.forEach(g=>{s.has(g)||h.push(g)}),this.syncEngine.Br(c,h).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=ID();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class pB{constructor(){this.Lr=new hO,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new hO,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Jq{qr(t){}shutdown(){}}class gB{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Xq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e4{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class t4 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,r,s){const c=this.ho(t,e);$e("RestConnection","Sending: ",c,i);const h={};return this.lo(h,r,s),this.fo(t,c,h,i).then(g=>($e("RestConnection","Received: ",g),g),g=>{throw $f("RestConnection",`${t} failed with error: `,g,"url: ",c,"request:",i),g})}_o(t,e,i,r,s,c){return this.ao(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Am,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.oo}/v1/${e}:${Xq[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,c)=>{const h=new XW;h.setWithCredentials(!0),h.listenOnce(YW.COMPLETE,()=>{var y;try{switch(h.getLastErrorCode()){case A1.NO_ERROR:const E=h.getResponseJson();$e("Connection","XHR received:",JSON.stringify(E)),s(E);break;case A1.TIMEOUT:$e("Connection",'RPC "'+t+'" timed out'),c(new Ve(ve.DEADLINE_EXCEEDED,"Request time out"));break;case A1.HTTP_ERROR:const D=h.getStatus();if($e("Connection",'RPC "'+t+'" failed with status:',D,"response text:",h.getResponseText()),D>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const L=null===(y=x)||void 0===y?void 0:y.error;if(L&&L.status&&L.message){const G=function(ie){const ne=ie.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(ne)>=0?ne:ve.UNKNOWN}(L.status);c(new Ve(G,L.message))}else c(new Ve(ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ve(ve.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{$e("Connection",'RPC "'+t+'" completed.')}});const g=JSON.stringify(r);h.send(e,"POST",g,i,15)})}wo(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ZW(),c=KW(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new JW({})),this.lo(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;const g=r.join("");$e("Connection","Creating WebChannel: "+g,h);const y=s.createWebChannel(g,h);let E=!1,D=!1;const x=new e4({Hr:G=>{D?$e("Connection","Not sending because WebChannel is closed:",G):(E||($e("Connection","Opening WebChannel transport."),y.open(),E=!0),$e("Connection","WebChannel sending:",G),y.send(G))},Jr:()=>y.close()}),L=(G,ie,ne)=>{G.listen(ie,ze=>{try{ne(ze)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return L(y,uD.EventType.OPEN,()=>{D||$e("Connection","WebChannel transport opened.")}),L(y,uD.EventType.CLOSE,()=>{D||(D=!0,$e("Connection","WebChannel transport closed"),x.io())}),L(y,uD.EventType.ERROR,G=>{D||(D=!0,$f("Connection","WebChannel transport errored:",G),x.io(new Ve(ve.UNAVAILABLE,"The operation could not be completed")))}),L(y,uD.EventType.MESSAGE,G=>{var ie;if(!D){const ne=G.data[0];Ut(!!ne);const ze=ne,Ke=ze.error||(null===(ie=ze[0])||void 0===ie?void 0:ie.error);if(Ke){$e("Connection","WebChannel received error:",Ke);const qe=Ke.status;let Je=function(At){const Un=qi[At];if(void 0!==Un)return lU(Un)}(qe),mt=Ke.message;void 0===Je&&(Je=ve.INTERNAL,mt="Unknown error status: "+qe+" with message "+Ke.message),D=!0,x.io(new Ve(Je,mt)),y.close()}else $e("Connection","WebChannel received:",ne),x.ro(ne)}}),L(c,QW.STAT_EVENT,G=>{G.stat===p2.PROXY?$e("Connection","Detected buffering proxy"):G.stat===p2.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function mB(){return typeof window<"u"?window:null}function LD(){return typeof document<"u"?document:null}function v0(n){return new zz(n,!0)}class pO{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class _B{constructor(t,e,i,r,s,c,h,g){this.Hs=t,this.vo=i,this.Vo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new pO(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Ie.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,Ie.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,Ie.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===ve.RESOURCE_EXHAUSTED?(Oi(e.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===ve.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new Ve(ve.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,Ie.Z)(function*(){t.state=0,t.start()}))}Qo(t){return $e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n4 extends _B{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.It=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function Kz(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(g=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:_t(),r=t.targetChange.targetIds||[],s=function(g,y){return g.gt?(Ut(void 0===y||"string"==typeof y),sr.fromBase64String(y||"")):(Ut(void 0===y||y instanceof Uint8Array),sr.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(g){const y=void 0===g.code?ve.UNKNOWN:lU(g.code);return new Ve(y,g.message||"")}(c);e=new fU(i,r,s,h||null)}else if("documentChange"in t){const i=t.documentChange,r=Xl(n,i.document.name),s=vr(i.document.updateTime),c=new Fr({mapValue:{fields:i.document.fields}}),h=ei.newFoundDocument(r,s,c);e=new ED(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){const i=t.documentDelete,r=Xl(n,i.document),s=i.readTime?vr(i.readTime):Bt.min(),c=ei.newNoDocument(r,s);e=new ED([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Xl(n,i.document);e=new ED([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return _t();{const i=t.filter,s=new Vz(i.count||0);e=new hU(i.targetId,s)}}var g;return e}(this.It,t),i=function(r){if(!("targetChange"in r))return Bt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?vr(s.readTime):Bt.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=u0(this.It),e.addTarget=function(r,s){let c;const h=s.target;return c=mD(h)?{documents:EU(r,h)}:{query:q1(r,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=_U(r,s.resumeToken):s.snapshotVersion.compareTo(Bt.min())>0&&(c.readTime=a0(r,s.snapshotVersion.toTimestamp())),c}(this.It,t);const i=function Qz(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _t()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=u0(this.It),e.removeTarget=t,this.Bo(e)}}class i4 extends _B{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(Ut(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function Yz(n,t){return n&&n.length>0?(Ut(void 0!==t),n.map(e=>function(i,r){let s=vr(i.updateTime?i.updateTime:r);return s.isEqual(Bt.min())&&(s=vr(r)),new Pz(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=vr(t.commitTime);return this.listener.Zo(i,e)}return Ut(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=u0(this.It),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>c0(this.It,i))};this.Bo(e)}}class r4 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.ao(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ve(ve.UNKNOWN,r.toString())})}_o(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection._o(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(ve.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class o4{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Oi(e),this.ou=!1):$e("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class a4{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(h=>{i.enqueueAndForget((0,Ie.Z)(function*(){var g;Xu(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ie.Z)(function*(y){const E=rt(y);E._u.add(4),yield Wm(E),E.gu.set("Unknown"),E._u.delete(4),yield w0(E)}),function(y){return g.apply(this,arguments)})(c))}))}),this.gu=new o4(i,r)}}function w0(n){return mO.apply(this,arguments)}function mO(){return mO=(0,Ie.Z)(function*(n){if(Xu(n))for(const t of n.wu)yield t(!0)}),mO.apply(this,arguments)}function Wm(n){return _O.apply(this,arguments)}function _O(){return _O=(0,Ie.Z)(function*(n){for(const t of n.wu)yield t(!1)}),_O.apply(this,arguments)}function VD(n,t){const e=rt(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),wO(e)?vO(e):qm(e).ko()&&yO(e,t))}function C0(n,t){const e=rt(n),i=qm(e);e.du.delete(t),i.ko()&&yB(e,t),0===e.du.size&&(i.ko()?i.Fo():Xu(e)&&e.gu.set("Unknown"))}function yO(n,t){n.yu.Mt(t.targetId),qm(n).zo(t)}function yB(n,t){n.yu.Mt(t),qm(n).Ho(t)}function vO(n){n.yu=new Gz({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),se:t=>n.du.get(t)||null}),qm(n).start(),n.gu.uu()}function wO(n){return Xu(n)&&!qm(n).No()&&n.du.size>0}function Xu(n){return 0===rt(n)._u.size}function vB(n){n.yu=void 0}function l4(n){return CO.apply(this,arguments)}function CO(){return CO=(0,Ie.Z)(function*(n){n.du.forEach((t,e)=>{yO(n,t)})}),CO.apply(this,arguments)}function u4(n,t){return IO.apply(this,arguments)}function IO(){return IO=(0,Ie.Z)(function*(n,t){vB(n),wO(n)?(n.gu.hu(t),vO(n)):n.gu.set("Unknown")}),IO.apply(this,arguments)}function c4(n,t,e){return EO.apply(this,arguments)}function EO(){return EO=(0,Ie.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof fU&&2===t.state&&t.cause)try{yield(i=(0,Ie.Z)(function*(r,s){const c=s.cause;for(const h of s.targetIds)r.du.has(h)&&(yield r.remoteSyncer.rejectListen(h,c),r.du.delete(h),r.yu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){$e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield UD(n,i)}else if(t instanceof ED?n.yu.Gt(t):t instanceof hU?n.yu.Yt(t):n.yu.Wt(t),!e.isEqual(Bt.min()))try{const i=yield aB(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.yu.te(s);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.du.get(g);y&&r.du.set(g,y.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const g=r.du.get(h);if(!g)return;r.du.set(h,g.withResumeToken(sr.EMPTY_BYTE_STRING,g.snapshotVersion)),yB(r,h);const y=new eh(g.target,h,1,g.sequenceNumber);yO(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){$e("RemoteStore","Failed to raise snapshot:",i),yield UD(n,i)}var i}),EO.apply(this,arguments)}function UD(n,t,e){return bO.apply(this,arguments)}function bO(){return bO=(0,Ie.Z)(function*(n,t,e){if(!qd(t))throw t;n._u.add(1),yield Wm(n),n.gu.set("Offline"),e||(e=()=>aB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield w0(n)}))}),bO.apply(this,arguments)}function wB(n,t){return t().catch(e=>UD(n,e,t))}function zm(n){return TO.apply(this,arguments)}function TO(){return TO=(0,Ie.Z)(function*(n){const t=rt(n),e=ih(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;d4(t);)try{const r=yield Kq(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,h4(t,r)}catch(r){yield UD(t,r)}CB(t)&&IB(t)}),TO.apply(this,arguments)}function d4(n){return Xu(n)&&n.fu.length<10}function h4(n,t){n.fu.push(t);const e=ih(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function CB(n){return Xu(n)&&!ih(n).No()&&n.fu.length>0}function IB(n){ih(n).start()}function f4(n){return DO.apply(this,arguments)}function DO(){return DO=(0,Ie.Z)(function*(n){ih(n).eu()}),DO.apply(this,arguments)}function p4(n){return SO.apply(this,arguments)}function SO(){return SO=(0,Ie.Z)(function*(n){const t=ih(n);for(const e of n.fu)t.Xo(e.mutations)}),SO.apply(this,arguments)}function g4(n,t,e){return AO.apply(this,arguments)}function AO(){return AO=(0,Ie.Z)(function*(n,t,e){const i=n.fu.shift(),r=Y1.from(i,t,e);yield wB(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield zm(n)}),AO.apply(this,arguments)}function m4(n,t){return xO.apply(this,arguments)}function xO(){return xO=(0,Ie.Z)(function*(n,t){var e;t&&ih(n).Yo&&(yield(e=(0,Ie.Z)(function*(i,r){if(aU(s=r.code)&&s!==ve.ABORTED){const c=i.fu.shift();ih(i).Mo(),yield wB(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield zm(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),CB(n)&&IB(n)}),xO.apply(this,arguments)}function EB(n,t){return MO.apply(this,arguments)}function MO(){return MO=(0,Ie.Z)(function*(n,t){const e=rt(n);e.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const i=Xu(e);e._u.add(3),yield Wm(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield w0(e)}),MO.apply(this,arguments)}function kO(n,t){return OO.apply(this,arguments)}function OO(){return OO=(0,Ie.Z)(function*(n,t){const e=rt(n);t?(e._u.delete(2),yield w0(e)):t||(e._u.add(2),yield Wm(e),e.gu.set("Unknown"))}),OO.apply(this,arguments)}function qm(n){return n.pu||(n.pu=function(t,e,i){const r=rt(t);return r.su(),new n4(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:l4.bind(null,n),Zr:u4.bind(null,n),Wo:c4.bind(null,n)}),n.wu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.pu.Mo(),wO(n)?vO(n):n.gu.set("Unknown")):(yield n.pu.stop(),vB(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function ih(n){return n.Iu||(n.Iu=function(t,e,i){const r=rt(t);return r.su(),new i4(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:f4.bind(null,n),Zr:m4.bind(null,n),tu:p4.bind(null,n),Zo:g4.bind(null,n)}),n.wu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.Iu.Mo(),yield zm(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class RO{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,h=new RO(t,e,c,r,s);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(ve.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(n,t){if(Oi("AsyncQueue",`${t}: ${n}`),qd(n))return new Ve(ve.UNAVAILABLE,`${t}: ${n}`);throw n}class Km{constructor(t){this.comparator=t?(e,i)=>t(e,i)||et.comparator(e.key,i.key):(e,i)=>et.comparator(e.key,i.key),this.keyedMap=n0(),this.sortedSet=new Di(this.comparator)}static emptySet(t){return new Km(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Km)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Km;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class bB{constructor(){this.Tu=new Di(et.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):_t():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Ym{constructor(t,e,i,r,s,c,h,g,y){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new Ym(t,e,Km.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class _4{constructor(){this.Au=void 0,this.listeners=[]}}class y4{constructor(){this.queries=new Xd(t=>W2(t),Xw),this.onlineState="Unknown",this.Ru=new Set}}function NO(n,t){return PO.apply(this,arguments)}function PO(){return PO=(0,Ie.Z)(function*(n,t){const e=rt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new _4),r)try{s.Au=yield e.onListen(i)}catch(c){const h=Zm(c,`Initialization of query '${H1(t.query)}' failed`);return void t.onError(h)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&VO(e)}),PO.apply(this,arguments)}function FO(n,t){return LO.apply(this,arguments)}function LO(){return LO=(0,Ie.Z)(function*(n,t){const e=rt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),LO.apply(this,arguments)}function v4(n,t){const e=rt(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const h of c.listeners)h.Pu(r)&&(i=!0);c.Au=r}}i&&VO(e)}function w4(n,t,e){const i=rt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function VO(n){n.Ru.forEach(t=>{t.next()})}class UO{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Ym(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=Ym.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class C4{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class TB{constructor(t){this.It=t}Ji(t){return Xl(this.It,t)}Yi(t){return t.metadata.exists?IU(this.It,t.document,!1):ei.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return vr(t)}}class I4{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=DB(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=pn.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new TB(this.It);for(const r of t)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const h=(e.get(c)||Xt()).add(s);e.set(c,h)}}return e}complete(){var t=this;return(0,Ie.Z)(function*(){const e=yield function Yq(n,t,e,i){return lO.apply(this,arguments)}(t.localStore,new TB(t.It),t.documents,t.Mu.id),i=t.$u(t.documents);for(const r of t.queries)yield Qq(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function DB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class SB{constructor(t){this.key=t}}class AB{constructor(t){this.key=t}}class xB{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Xt(),this.mutatedKeys=Xt(),this.Gu=q2(t),this.Qu=new Km(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new bB,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const g="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((E,D)=>{const x=r.get(E),L=j1(this.query,D)?D:null,G=!!x&&this.mutatedKeys.has(x.key),ie=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let ne=!1;x&&L?x.data.isEqual(L.data)?G!==ie&&(i.track({type:3,doc:L}),ne=!0):this.Hu(x,L)||(i.track({type:2,doc:L}),ne=!0,(g&&this.Gu(L,g)>0||y&&this.Gu(L,y)<0)&&(h=!0)):!x&&L?(i.track({type:0,doc:L}),ne=!0):x&&!L&&(i.track({type:1,doc:x}),ne=!0,(g||y)&&(h=!0)),ne&&(L?(c=c.add(L),s=ie?s.add(E):s.delete(E)):(c=c.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const E="F"===this.query.limitType?c.last():c.first();c=c.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Qu:c,zu:i,$i:h,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort((y,E)=>function(D,x){const L=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return L(D)-L(x)}(y.type,E.type)||this.Gu(y.doc,E.doc)),this.Ju(i);const c=e?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,g=h!==this.qu;return this.qu=h,0!==s.length||g?{snapshot:new Ym(this.query,t.Qu,r,s,t.mutatedKeys,0===h,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new bB,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=Xt(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new AB(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new SB(i))}),e}tc(t){this.Uu=t.Hi,this.Ku=Xt();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return Ym.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class E4{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class b4{constructor(t){this.key=t,this.nc=!1}}class T4{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new Xd(h=>W2(h),Xw),this.rc=new Map,this.oc=new Set,this.uc=new Di(et.comparator),this.cc=new Map,this.ac=new tO,this.hc={},this.lc=new Map,this.fc=op.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function D4(n,t){return BO.apply(this,arguments)}function BO(){return BO=(0,Ie.Z)(function*(n,t){const e=uR(n);let i,r;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const c=yield Gm(e.localStore,Is(t));e.isPrimaryClient&&VD(e.remoteStore,c);const h=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield HO(e,t,i,"current"===h,c.resumeToken)}return r}),BO.apply(this,arguments)}function HO(n,t,e,i,r){return jO.apply(this,arguments)}function jO(){return jO=(0,Ie.Z)(function*(n,t,e,i,r){n._c=(D,x,L)=>{return(G=(0,Ie.Z)(function*(ie,ne,ze,Ke){let qe=ne.view.Wu(ze);qe.$i&&(qe=yield ND(ie.localStore,ne.query,!1).then(({documents:At})=>ne.view.Wu(At,qe)));const Je=Ke&&Ke.targetChanges.get(ne.targetId),mt=ne.view.applyChanges(qe,ie.isPrimaryClient,Je);return JO(ie,ne.targetId,mt.Xu),mt.snapshot}),function(ie,ne,ze,Ke){return G.apply(this,arguments)})(n,D,x,L);var G};const s=yield ND(n.localStore,t,!0),c=new xB(t,s.Hi),h=c.Wu(s.documents),g=o0.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),y=c.applyChanges(h,n.isPrimaryClient,g);JO(n,e,y.Xu);const E=new E4(t,e,c);return n.ic.set(t,E),n.rc.has(e)?n.rc.get(e).push(t):n.rc.set(e,[t]),y.snapshot}),jO.apply(this,arguments)}function S4(n,t){return GO.apply(this,arguments)}function GO(){return GO=(0,Ie.Z)(function*(n,t){const e=rt(n),i=e.ic.get(t),r=e.rc.get(i.targetId);if(r.length>1)return e.rc.set(i.targetId,r.filter(s=>!Xw(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $m(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),C0(e.remoteStore,i.targetId),Qm(e,i.targetId)}).catch(zd))):(Qm(e,i.targetId),yield $m(e.localStore,i.targetId,!0))}),GO.apply(this,arguments)}function $O(){return $O=(0,Ie.Z)(function*(n,t,e){const i=cR(n);try{const r=yield function(s,c){const h=rt(s),g=ci.now(),y=c.reduce((x,L)=>x.add(L.key),Xt());let E,D;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let L=Qs(),G=Xt();return h.Gi.getEntries(x,y).next(ie=>{L=ie,L.forEach((ne,ze)=>{ze.isValidDocument()||(G=G.add(ne))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,L)).next(ie=>{E=ie;const ne=[];for(const ze of c){const Ke=Lz(ze,E.get(ze.key).overlayedDocument);null!=Ke&&ne.push(new Ju(ze.key,Ke,F2(Ke.value.mapValue),di.exists(!0)))}return h.mutationQueue.addMutationBatch(x,g,ne,c)}).next(ie=>{D=ie;const ne=ie.applyToLocalDocumentSet(E,G);return h.documentOverlayCache.saveOverlays(x,ie.batchId,ne)})}).then(()=>({batchId:D.batchId,changes:cU(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,h){let g=s.hc[s.currentUser.toKey()];g||(g=new Di(Wt)),g=g.insert(c,h),s.hc[s.currentUser.toKey()]=g}(i,r.batchId,e),yield ec(i,r.changes),yield zm(i.remoteStore)}catch(r){const s=Zm(r,"Failed to persist write");e.reject(s)}}),$O.apply(this,arguments)}function MB(n,t){return WO.apply(this,arguments)}function WO(){return WO=(0,Ie.Z)(function*(n,t){const e=rt(n);try{const i=yield Zq(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.cc.get(s);c&&(Ut(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.nc=!0:r.modifiedDocuments.size>0?Ut(c.nc):r.removedDocuments.size>0&&(Ut(c.nc),c.nc=!1))}),yield ec(e,i,t)}catch(i){yield zd(i)}}),WO.apply(this,arguments)}function kB(n,t,e){const i=rt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ic.forEach((s,c)=>{const h=c.view.bu(t);h.snapshot&&r.push(h.snapshot)}),function(s,c){const h=rt(s);h.onlineState=c;let g=!1;h.queries.forEach((y,E)=>{for(const D of E.listeners)D.bu(c)&&(g=!0)}),g&&VO(h)}(i.eventManager,t),r.length&&i.sc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function x4(n,t,e){return zO.apply(this,arguments)}function zO(){return zO=(0,Ie.Z)(function*(n,t,e){const i=rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.cc.get(t),s=r&&r.key;if(s){let c=new Di(et.comparator);c=c.insert(s,ei.newNoDocument(s,Bt.min()));const h=Xt().add(s),g=new s0(Bt.min(),new Map,new Vn(Wt),c,h);yield MB(i,g),i.uc=i.uc.remove(s),i.cc.delete(t),XO(i)}else yield $m(i.localStore,t,!1).then(()=>Qm(i,t,e)).catch(zd)}),zO.apply(this,arguments)}function M4(n,t){return qO.apply(this,arguments)}function qO(){return qO=(0,Ie.Z)(function*(n,t){const e=rt(n),i=t.batch.batchId;try{const r=yield qq(e.localStore,t);QO(e,i,null),YO(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield ec(e,r)}catch(r){yield zd(r)}}),qO.apply(this,arguments)}function k4(n,t,e){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,Ie.Z)(function*(n,t,e){const i=rt(n);try{const r=yield function(s,c){const h=rt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.mutationQueue.lookupMutationBatch(g,c).next(E=>(Ut(null!==E),y=E.keys(),h.mutationQueue.removeMutationBatch(g,E))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>h.localDocuments.getDocuments(g,y))})}(i.localStore,t);QO(i,t,e),YO(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield ec(i,r)}catch(r){yield zd(r)}}),ZO.apply(this,arguments)}function KO(){return KO=(0,Ie.Z)(function*(n,t){const e=rt(n);Xu(e.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=rt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===i)return void t.resolve();const r=e.lc.get(i)||[];r.push(t),e.lc.set(i,r)}catch(i){const r=Zm(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),KO.apply(this,arguments)}function YO(n,t){(n.lc.get(t)||[]).forEach(e=>{e.resolve()}),n.lc.delete(t)}function QO(n,t,e){const i=rt(n);let r=i.hc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.hc[i.currentUser.toKey()]=r}}function Qm(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.rc.get(t))n.ic.delete(i),e&&n.sc.wc(i,e);n.rc.delete(t),n.isPrimaryClient&&n.ac.ls(t).forEach(i=>{n.ac.containsKey(i)||OB(n,i)})}function OB(n,t){n.oc.delete(t.path.canonicalString());const e=n.uc.get(t);null!==e&&(C0(n.remoteStore,e),n.uc=n.uc.remove(t),n.cc.delete(e),XO(n))}function JO(n,t,e){for(const i of e)i instanceof SB?(n.ac.addReference(i.key,t),R4(n,i)):i instanceof AB?($e("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,t),n.ac.containsKey(i.key)||OB(n,i.key)):_t()}function R4(n,t){const e=t.key,i=e.path.canonicalString();n.uc.get(e)||n.oc.has(i)||($e("SyncEngine","New document in limbo: "+e),n.oc.add(i),XO(n))}function XO(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const t=n.oc.values().next().value;n.oc.delete(t);const e=new et(pn.fromString(t)),i=n.fc.next();n.cc.set(i,new b4(e)),n.uc=n.uc.insert(e,i),VD(n.remoteStore,new eh(Is(Rm(e.path)),i,2,Ys.at))}}function ec(n,t,e){return eR.apply(this,arguments)}function eR(){return eR=(0,Ie.Z)(function*(n,t,e){const i=rt(n),r=[],s=[],c=[];var h;i.ic.isEmpty()||(i.ic.forEach((h,g)=>{c.push(i._c(g,t,e).then(y=>{if((y||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){r.push(y);const E=sO.Ci(g.targetId,y);s.push(E)}}))}),yield Promise.all(c),i.sc.Wo(r),yield(h=(0,Ie.Z)(function*(g,y){const E=rt(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>he.forEach(y,x=>he.forEach(x.Si,L=>E.persistence.referenceDelegate.addReference(D,x.targetId,L)).next(()=>he.forEach(x.Di,L=>E.persistence.referenceDelegate.removeReference(D,x.targetId,L)))))}catch(D){if(!qd(D))throw D;$e("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const x=D.targetId;if(!D.fromCache){const L=E.Ui.get(x),ie=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);E.Ui=E.Ui.insert(x,ie)}}}),function(g,y){return h.apply(this,arguments)})(i.localStore,s))}),eR.apply(this,arguments)}function N4(n,t){return tR.apply(this,arguments)}function tR(){return tR=(0,Ie.Z)(function*(n,t){const e=rt(n);if(!e.currentUser.isEqual(t)){$e("SyncEngine","User change. New user:",t.toKey());const i=yield oB(e.localStore,t);e.currentUser=t,(r=e).lc.forEach(c=>{c.forEach(h=>{h.reject(new Ve(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield ec(e,i.ji)}var r}),tR.apply(this,arguments)}function P4(n,t){const e=rt(n),i=e.cc.get(t);if(i&&i.nc)return Xt().add(i.key);{let r=Xt();const s=e.rc.get(t);if(!s)return r;for(const c of s){const h=e.ic.get(c);r=r.unionWith(h.view.ju)}return r}}function F4(n,t){return nR.apply(this,arguments)}function nR(){return nR=(0,Ie.Z)(function*(n,t){const e=rt(n),i=yield ND(e.localStore,t.query,!0),r=t.view.tc(i);return e.isPrimaryClient&&JO(e,t.targetId,r.Xu),r}),nR.apply(this,arguments)}function L4(n,t){return iR.apply(this,arguments)}function iR(){return iR=(0,Ie.Z)(function*(n,t){const e=rt(n);return cB(e.localStore,t).then(i=>ec(e,i))}),iR.apply(this,arguments)}function V4(n,t,e,i){return rR.apply(this,arguments)}function rR(){return rR=(0,Ie.Z)(function*(n,t,e,i){const r=rt(n),s=yield function(c,h){const g=rt(c),y=rt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.Tn(E,h).next(D=>D?g.localDocuments.getDocuments(E,D):he.resolve(null)))}(r.localStore,t);var h;null!==s?("pending"===e?yield zm(r.remoteStore):"acknowledged"===e||"rejected"===e?(QO(r,t,i||null),YO(r,t),h=t,rt(rt(r.localStore).mutationQueue).An(h)):_t(),yield ec(r,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+t)}),rR.apply(this,arguments)}function sR(){return sR=(0,Ie.Z)(function*(n,t){const e=rt(n);if(uR(e),cR(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield RB(e,i.toArray());e.dc=!0,yield kO(e.remoteStore,!0);for(const s of r)VD(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let r=Promise.resolve();e.rc.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(Qm(e,c),$m(e.localStore,c,!0))),C0(e.remoteStore,c)}),yield r,yield RB(e,i),function(s){const c=rt(s);c.cc.forEach((h,g)=>{C0(c.remoteStore,g)}),c.ac.fs(),c.cc=new Map,c.uc=new Di(et.comparator)}(e),e.dc=!1,yield kO(e.remoteStore,!1)}}),sR.apply(this,arguments)}function RB(n,t,e){return oR.apply(this,arguments)}function oR(){return oR=(0,Ie.Z)(function*(n,t,e){const i=rt(n),r=[],s=[];for(const c of t){let h;const g=i.rc.get(c);if(g&&0!==g.length){h=yield Gm(i.localStore,Is(g[0]));for(const y of g){const E=i.ic.get(y),D=yield F4(i,E);D.snapshot&&s.push(D.snapshot)}}else{const y=yield uB(i.localStore,c);h=yield Gm(i.localStore,y),yield HO(i,NB(y),c,!1,h.resumeToken)}r.push(h)}return i.sc.Wo(s),r}),oR.apply(this,arguments)}function NB(n){return G2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function B4(n){const t=rt(n);return rt(rt(t.localStore).persistence).vi()}function H4(n,t,e,i){return aR.apply(this,arguments)}function aR(){return aR=(0,Ie.Z)(function*(n,t,e,i){const r=rt(n);if(r.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield cB(r.localStore,z2(s[0])),h=s0.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,sr.EMPTY_BYTE_STRING);yield ec(r,c,h);break}case"rejected":yield $m(r.localStore,t,!0),Qm(r,t,i);break;default:_t()}}),aR.apply(this,arguments)}function j4(n,t,e){return lR.apply(this,arguments)}function lR(){return lR=(0,Ie.Z)(function*(n,t,e){const i=uR(n);if(i.dc){for(const r of t){if(i.rc.has(r)){$e("SyncEngine","Adding an already active target "+r);continue}const s=yield uB(i.localStore,r),c=yield Gm(i.localStore,s);yield HO(i,NB(s),c.targetId,!1,c.resumeToken),VD(i.remoteStore,c)}for(const r of e)i.rc.has(r)&&(yield $m(i.localStore,r,!1).then(()=>{C0(i.remoteStore,r),Qm(i,r)}).catch(zd))}}),lR.apply(this,arguments)}function uR(n){const t=rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=MB.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=P4.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=x4.bind(null,t),t.sc.Wo=v4.bind(null,t.eventManager),t.sc.wc=w4.bind(null,t.eventManager),t}function cR(n){const t=rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=M4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=k4.bind(null,t),t}class PB{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ie.Z)(function*(){e.It=v0(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return sB(this.persistence,new rB,t.initialUser,this.It)}yc(t){return new nB(OD.Bs,this.It)}gc(t){return new pB}terminate(){var t=this;return(0,Ie.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class FB extends PB{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield cR(i.Ac.syncEngine),yield zm(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return sB(this.persistence,new rB,t.initialUser,this.It)}Tc(t,e){return new Oq(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new gz(e,this.persistence);return new pz(t.asyncQueue,i)}yc(t){const e=rO(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Js.withCacheSize(this.cacheSizeBytes):Js.DEFAULT;return new iO(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,mB(),LD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(t){return new pB}}class $4 extends FB{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t);const r=i.Ac.syncEngine;i.sharedClientState instanceof fO&&(i.sharedClientState.syncEngine={Fr:V4.bind(null,r),$r:H4.bind(null,r),Br:j4.bind(null,r),vi:B4.bind(null,r),Mr:L4.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,Ie.Z)(function*(c){yield function U4(n,t){return sR.apply(this,arguments)}(i.Ac.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}gc(t){const e=mB();if(!fO.C(e))throw new Ve(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=rO(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new fO(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class dR{initialize(t,e){var i=this;return(0,Ie.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>kB(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=N4.bind(null,i.syncEngine),yield kO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new y4}createDatastore(t){const e=v0(t.databaseInfo.databaseId),i=new t4(t.databaseInfo);return new r4(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=h=>kB(this.syncEngine,h,0),c=gB.C()?new gB:new Jq,new a4(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,h,g,y){const E=new T4(i,r,s,c,h,g);return y&&(E.dc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ie.Z)(function*(e){const i=rt(e);$e("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Wm(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function hR(n,t,e){if(!e)throw new Ve(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function LB(n,t,e,i){if(!0===t&&!0===i)throw new Ve(ve.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function VB(n){if(!et.isDocumentKey(n))throw new Ve(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UB(n){if(et.isDocumentKey(n))throw new Ve(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":_t()}function un(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ve(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=BD(n);throw new Ve(ve.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function BB(n,t){if(t<=0)throw new Ve(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}const HB=new Map;class jB{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ve(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ve(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,LB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class I0{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ve(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jB(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new nz;switch(e.type){case"gapi":return new oz(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ve(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=HB.get(t);e&&($e("ComponentProvider","Removing Datastore"),HB.delete(t),e.terminate())}(this),Promise.resolve()}}class oi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new oi(this.firestore,t,this._key)}}class es{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new es(this.firestore,t,this._query)}}class tu extends es{constructor(t,e,i){super(t,e,Rm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new oi(this.firestore,null,new et(t))}withConverter(t){return new tu(this.firestore,t,this._path)}}function $B(n,t,...e){if(n=(0,V.m9)(n),hR("collection","path",t),n instanceof I0){const i=pn.fromString(t,...e);return UB(i),new tu(n,null,i)}{if(!(n instanceof oi||n instanceof tu))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pn.fromString(t,...e));return UB(i),new tu(n.firestore,null,i)}}function HD(n,t,...e){if(n=(0,V.m9)(n),1===arguments.length&&(t=y2.R()),hR("doc","path",t),n instanceof I0){const i=pn.fromString(t,...e);return VB(i),new oi(n,null,new et(i))}{if(!(n instanceof oi||n instanceof tu))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pn.fromString(t,...e));return VB(i),new oi(n.firestore,n instanceof tu?n.converter:null,new et(i))}}function WB(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),(n instanceof oi||n instanceof tu)&&(t instanceof oi||t instanceof tu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function fR(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),n instanceof es&&t instanceof es&&n.firestore===t.firestore&&Xw(n._query,t._query)&&n.converter===t.converter}function zB(n,t=10240){let e=0;return{read:()=>(0,Ie.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jD{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):Oi("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class z4{constructor(t,e){this.Pc=t,this.It=e,this.metadata=new rr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,Ie.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,Ie.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),r=Number(i);isNaN(r)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(r);return new C4(JSON.parse(s),e.length+r)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,Ie.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,Ie.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class K4{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ve(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ie.Z)(function*(s,c){const h=rt(s),g=u0(h.It)+"/documents",y={documents:c.map(L=>l0(h.It,L))},E=yield h._o("BatchGetDocuments",g,y,c.length),D=new Map;E.forEach(L=>{const G=function Zz(n,t){return"found"in t?function(e,i){Ut(!!i.found);const r=Xl(e,i.found.name),s=vr(i.found.updateTime),c=new Fr({mapValue:{fields:i.found.fields}});return ei.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){Ut(!!i.missing),Ut(!!i.readTime);const r=Xl(e,i.missing),s=vr(i.readTime);return ei.newNoDocument(r,s)}(n,t):_t()}(h.It,L);D.set(G.key.toString(),G)});const x=[];return c.forEach(L=>{const G=D.get(L.toString());Ut(!!G),x.push(G)}),x}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Vm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=et.fromPath(r);t.mutations.push(new G1(s,t.precondition(s)))}),yield(i=(0,Ie.Z)(function*(r,s){const c=rt(r),h=u0(c.It)+"/documents",g={writes:s.map(y=>c0(c.It,y))};yield c.ao("Commit",h,g)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw _t();e=Bt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ve(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Bt.min())?di.exists(!1):di.updateTime(e):di.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new Ve(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return di.updateTime(e)}return di.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Y4{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.kc=i.maxAttempts,this.xo=new pO(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,Ie.Z)(function*(){const e=new K4(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Fc(s)}))}).catch(r=>{t.Fc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!qw(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!aU(e)}return!1}}class Q4{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=yr.UNAUTHENTICATED,this.clientId=y2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Ie.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Ie.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Zm(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function qB(n,t){return pR.apply(this,arguments)}function pR(){return pR=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ie.Z)(function*(s){i.isEqual(s)||(yield oB(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),pR.apply(this,arguments)}function ZB(n,t){return gR.apply(this,arguments)}function gR(){return gR=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield mR(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>EB(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>EB(t.remoteStore,s)),n.onlineComponents=t}),gR.apply(this,arguments)}function mR(n){return _R.apply(this,arguments)}function _R(){return _R=(0,Ie.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield qB(n,new PB)),n.offlineComponents}),_R.apply(this,arguments)}function GD(n){return yR.apply(this,arguments)}function yR(){return yR=(0,Ie.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield ZB(n,new dR)),n.onlineComponents}),yR.apply(this,arguments)}function KB(n){return mR(n).then(t=>t.persistence)}function $D(n){return mR(n).then(t=>t.localStore)}function vR(n){return GD(n).then(t=>t.remoteStore)}function wR(n){return GD(n).then(t=>t.syncEngine)}function Jm(n){return CR.apply(this,arguments)}function CR(){return CR=(0,Ie.Z)(function*(n){const t=yield GD(n),e=t.eventManager;return e.onListen=D4.bind(null,t.syncEngine),e.onUnlisten=S4.bind(null,t.syncEngine),e}),CR.apply(this,arguments)}function QB(n,t,e={}){const i=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,c,h,g){const y=new jD({next:D=>{s.enqueueAndForget(()=>FO(r,E));const x=D.docs.has(c);!x&&D.fromCache?g.reject(new Ve(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&h&&"server"===h.source?g.reject(new Ve(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),E=new UO(Rm(c.path),y,{includeMetadataChanges:!0,Nu:!0});return NO(r,E)}(yield Jm(n),n.asyncQueue,t,e,i)})),i.promise}function JB(n,t,e={}){const i=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,c,h,g){const y=new jD({next:D=>{s.enqueueAndForget(()=>FO(r,E)),D.fromCache&&"server"===h.source?g.reject(new Ve(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),E=new UO(c,y,{includeMetadataChanges:!0,Nu:!0});return NO(r,E)}(yield Jm(n),n.asyncQueue,t,e,i)})),i.promise}class sZ{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new pO(this,"async_queue_retry"),this.Wc=()=>{const e=LD();e&&$e("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=LD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;const e=LD();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.Uc)return new Promise(()=>{});const e=new rr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,Ie.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!qd(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,Oi("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=RO.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.qc.push(r),r}zc(){this.Kc&&_t()}verifyOperationInProgress(){}Xc(){var t=this;return(0,Ie.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.qc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.qc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.qc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.qc.indexOf(t);this.qc.splice(e,1)}}function IR(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class oZ{constructor(){this._progressObserver={},this._taskCompletionResolver=new rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ai extends I0{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new sZ,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XB(this),this._firestoreClient.terminate()}}function Ri(n){return n._firestoreClient||XB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XB(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new yz(n._databaseId,s,n._persistenceKey,(h=e).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new Q4(n._authCredentials,n._appCheckCredentials,n._queue,i)}function eH(n,t,e){const i=new rr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield qB(n,e),yield ZB(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===ve.FAILED_PRECONDITION||c.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;$f("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function tH(n){if(n._initialized||n._terminated)throw new Ve(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nu(sr.fromBase64String(t))}catch(e){throw new Ve(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new nu(sr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class tc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ve(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ti(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class lp{constructor(t){this._methodName=t}}class WD{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ve(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ve(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Wt(this._lat,t._lat)||Wt(this._long,t._long)}}const mZ=/^__.*__$/;class _Z{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Ju(t,this.data,this.fieldMask,e,this.fieldTransforms):new Lm(t,this.data,e,this.fieldTransforms)}}class nH{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Ju(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function iH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class zD{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new zD(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.ua(t),r}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return KD(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(iH(this.sa)&&mZ.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class yZ{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||v0(t)}da(t,e,i,r=!1){return new zD({sa:t,methodName:e,fa:i,path:Ti.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function up(n){const t=n._freezeSettings(),e=v0(n._databaseId);return new yZ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function qD(n,t,e,i,r,s={}){const c=n.da(s.merge||s.mergeFields?2:0,t,e,r);DR("Data must be an object, but it was:",c,i);const h=oH(i,c);let g,y;if(s.merge)g=new No(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const E=[];for(const D of s.mergeFields){const x=SR(t,D,e);if(!c.contains(x))throw new Ve(ve.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);lH(E,x)||E.push(x)}g=new No(E),y=c.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,y=c.fieldTransforms;return new _Z(new Fr(h),g,y)}class E0 extends lp{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof E0}}function rH(n,t,e){return new zD({sa:3,fa:t.settings.fa,methodName:n._methodName,oa:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class ER extends lp{_toFieldTransform(t){return new e0(t.path,new Pm)}isEqual(t){return t instanceof ER}}class vZ extends lp{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=rH(this,t,!0),i=this._a.map(s=>cp(s,e)),r=new Jf(i);return new e0(t.path,r)}isEqual(t){return this===t}}class wZ extends lp{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=rH(this,t,!0),i=this._a.map(s=>cp(s,e)),r=new Xf(i);return new e0(t.path,r)}isEqual(t){return this===t}}class CZ extends lp{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new Fm(t.It,Y2(t.It,this.wa));return new e0(t.path,e)}isEqual(t){return this===t}}function bR(n,t,e,i){const r=n.da(1,t,e);DR("Data must be an object, but it was:",r,i);const s=[],c=Fr.empty();qf(i,(g,y)=>{const E=ZD(t,g,e);y=(0,V.m9)(y);const D=r.ca(E);if(y instanceof E0)s.push(E);else{const x=cp(y,D);null!=x&&(s.push(E),c.set(E,x))}});const h=new No(s);return new nH(c,h,r.fieldTransforms)}function TR(n,t,e,i,r,s){const c=n.da(1,t,e),h=[SR(t,i,e)],g=[r];if(s.length%2!=0)throw new Ve(ve.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)h.push(SR(t,s[x])),g.push(s[x+1]);const y=[],E=Fr.empty();for(let x=h.length-1;x>=0;--x)if(!lH(y,h[x])){const L=h[x];let G=g[x];G=(0,V.m9)(G);const ie=c.ca(L);if(G instanceof E0)y.push(L);else{const ne=cp(G,ie);null!=ne&&(y.push(L),E.set(L,ne))}}const D=new No(y);return new nH(E,D,c.fieldTransforms)}function sH(n,t,e,i=!1){return cp(e,n.da(i?4:3,t))}function cp(n,t){if(aH(n=(0,V.m9)(n)))return DR("Unsupported field value:",t,n),oH(n,t);if(n instanceof lp)return function(e,i){if(!iH(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let h=cp(c,i.aa(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,V.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Y2(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=ci.fromDate(e);return{timestampValue:a0(i.It,r)}}if(e instanceof ci){const r=new ci(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:a0(i.It,r)}}if(e instanceof WD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nu)return{bytesValue:_U(i.It,e._byteString)};if(e instanceof oi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:$1(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${BD(e)}`)}(n,t)}function oH(n,t){const e={};return D2(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qf(n,(i,r)=>{const s=cp(r,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function aH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ci||n instanceof WD||n instanceof nu||n instanceof oi||n instanceof lp)}function DR(n,t,e){if(!aH(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=BD(e);throw t.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function SR(n,t,e){if((t=(0,V.m9)(t))instanceof tc)return t._internalPath;if("string"==typeof t)return ZD(n,t);throw KD("Field path arguments must be of type string or ",n,!1,void 0,e)}const IZ=new RegExp("[~\\*/\\[\\]]");function ZD(n,t,e){if(t.search(IZ)>=0)throw KD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new tc(...t.split("."))._internalPath}catch{throw KD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function KD(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(s||c)&&(g+=" (found",s&&(g+=` in field ${i}`),c&&(g+=` in document ${r}`),g+=")"),new Ve(ve.INVALID_ARGUMENT,h+n+g)}function lH(n,t){return n.some(e=>e.isEqual(t))}class b0{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new EZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(YD("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class EZ extends b0{data(){return super.data()}}function YD(n,t){return"string"==typeof t?ZD(n,t):t instanceof tc?t._internalPath:t._delegate._internalPath}function uH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T0{}function rh(n,...t){for(const e of t)n=e._apply(n);return n}class bZ extends T0{constructor(t,e,i){super(),this.ma=t,this.ga=e,this.ya=i,this.type="where"}_apply(t){const e=up(t.firestore),i=function(r,s,c,h,g,y,E){let D;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ve(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){gH(E,y);const L=[];for(const G of E)L.push(pH(h,r,G));D={arrayValue:{values:L}}}else D=pH(h,r,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||gH(E,y),D=sH(c,"where",E,"in"===y||"not-in"===y);const x=Lr.create(g,y,D);return function(L,G){if(G.dt()){const ne=U1(L);if(null!==ne&&!ne.isEqual(G.field))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ne.toString()}' and '${G.field.toString()}'`);const ze=V1(L);null!==ze&&mH(0,G.field,ze)}const ie=function(ne,ze){for(const Ke of ne.filters)if(ze.indexOf(Ke.op)>=0)return Ke.op;return null}(L,function(ne){switch(ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ie)throw new Ve(ve.INVALID_ARGUMENT,ie===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ie.toString()}' filters.`)}(r,x),x}(t._query,0,e,t.firestore._databaseId,this.ma,this.ga,this.ya);return new es(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new Qu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class DZ extends T0{constructor(t,e){super(),this.ma=t,this.pa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Om(r,s);return function(h,g){if(null===V1(h)){const y=U1(h);null!==y&&mH(0,y,g.field)}}(i,c),c}(t._query,this.ma,this.pa);return new es(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Qu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class cH extends T0{constructor(t,e,i){super(),this.type=t,this.Ia=e,this.Ta=i}_apply(t){return new es(t.firestore,t.converter,yD(t._query,this.Ia,this.Ta))}}class dH extends T0{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=fH(t,this.type,this.Ea,this.Aa);return new es(t.firestore,t.converter,(r=e,new Qu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class hH extends T0{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=fH(t,this.type,this.Ea,this.Aa);return new es(t.firestore,t.converter,(r=e,new Qu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function fH(n,t,e,i){if(e[0]=(0,V.m9)(e[0]),e[0]instanceof b0)return function(r,s,c,h,g){if(!h)throw new Ve(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const E of Nm(r))if(E.field.isKeyField())y.push(Yf(s,h.key));else{const D=h.data.field(E.field);if(P1(D))throw new Ve(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=E.field.canonicalString();throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(D)}return new Jd(y,g)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=up(n.firestore);return function(s,c,h,g,y,E){const D=s.explicitOrderBy;if(y.length>D.length)throw new Ve(ve.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let L=0;L<y.length;L++){const G=y[L];if(D[L].field.isKeyField()){if("string"!=typeof G)throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!B1(s)&&-1!==G.indexOf("/"))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const ie=s.path.child(pn.fromString(G));if(!et.isDocumentKey(ie))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ie}' is not because it contains an odd number of segments.`);const ne=new et(ie);x.push(Yf(c,ne))}else{const ie=sH(h,g,G);x.push(ie)}}return new Jd(x,E)}(n._query,n.firestore._databaseId,r,t,e,i)}}function pH(n,t,e){if("string"==typeof(e=(0,V.m9)(e))){if(""===e)throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B1(t)&&-1!==e.indexOf("/"))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(pn.fromString(e));if(!et.isDocumentKey(i))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Yf(n,new et(i))}if(e instanceof oi)return Yf(n,e._key);throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BD(e)}.`)}function gH(n,t){if(!Array.isArray(n)||0===n.length)throw new Ve(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ve(ve.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function mH(n,t,e){if(!e.isEqual(t))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class AR{convertValue(t,e="none"){switch(Kf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Si(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw _t()}}convertObject(t,e){const i={};return qf(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new WD(Si(t.latitude),Si(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=A2(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(zw(t));default:return null}}convertTimestamp(t){const e=Zd(t);return new ci(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=pn.fromString(t);Ut(DU(i));const r=new Kd(i.get(1),i.get(3)),s=new et(i.popFirst(5));return r.isEqual(e)||Oi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function QD(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class NZ extends AR{constructor(t){super(),this.firestore=t}convertBytes(t){return new nu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new oi(this.firestore,null,e)}}class dp{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class nc extends b0{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new D0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(YD("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class D0 extends nc{data(t={}){return super.data(t)}}class sh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new dp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new D0(this._firestore,this._userDataWriter,i.key,i,new dp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ve(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new D0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new dp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const h=new D0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new dp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,y=-1;return 0!==c.type&&(g=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:PZ(c.type),doc:h,oldIndex:g,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function PZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function _H(n,t){return n instanceof nc&&t instanceof nc?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof sh&&t instanceof sh&&n._firestore===t._firestore&&fR(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class oh extends AR{constructor(t){super(),this.firestore=t}convertBytes(t){return new nu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new oi(this.firestore,null,e)}}function yH(n,t,e){n=un(n,oi);const i=un(n.firestore,ai),r=QD(n.converter,t,e);return Xm(i,[qD(up(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,di.none())])}function vH(n,t,e,...i){n=un(n,oi);const r=un(n.firestore,ai),s=up(r);let c;return c="string"==typeof(t=(0,V.m9)(t))||t instanceof tc?TR(s,"updateDoc",n._key,t,e,i):bR(s,"updateDoc",n._key,t),Xm(r,[c.toMutation(n._key,di.exists(!0))])}function wH(n,...t){var e,i,r;n=(0,V.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||IR(t[c])||(s=t[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(IR(t[c])){const D=t[c];t[c]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[c+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),t[c+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let g,y,E;if(n instanceof oi)y=un(n.firestore,ai),E=Rm(n._key.path),g={next:D=>{t[c]&&t[c](xR(y,n,D))},error:t[c+1],complete:t[c+2]};else{const D=un(n,es);y=un(D.firestore,ai),E=D._query;const x=new oh(y);g={next:L=>{t[c]&&t[c](new sh(y,x,D,L))},error:t[c+1],complete:t[c+2]},uH(n._query)}return function(D,x,L,G){const ie=new jD(G),ne=new UO(x,ie,L);return D.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return NO(yield Jm(D),ne)})),()=>{ie.bc(),D.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return FO(yield Jm(D),ne)}))}}(Ri(y),E,h,g)}function Xm(n,t){return function(e,i){const r=new rr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function A4(n,t,e){return $O.apply(this,arguments)}(yield wR(e),i,r)})),r.promise}(Ri(n),t)}function xR(n,t,e){const i=e.docs.get(t._key),r=new oh(n);return new nc(n,r,t._key,i,new dp(e.hasPendingWrites,e.fromCache),t.converter)}const WZ={maxAttempts:5};class CH{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=up(t)}set(t,e,i){this._verifyNotCommitted();const r=ah(t,this._firestore),s=QD(r.converter,e,i),c=qD(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,di.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=ah(t,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof tc?TR(this._dataReader,"WriteBatch.update",s._key,e,i,r):bR(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,di.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ah(t,this._firestore);return this._mutations=this._mutations.concat(new Vm(e._key,di.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ah(n,t){if((n=(0,V.m9)(n)).firestore!==t)throw new Ve(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zZ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=up(t)}get(t){const e=ah(t,this._firestore),i=new NZ(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return _t();const s=r[0];if(s.isFoundDocument())return new b0(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new b0(this._firestore,i,e._key,null,e.converter);throw _t()})}set(t,e,i){const r=ah(t,this._firestore),s=QD(r.converter,e,i),c=qD(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=ah(t,this._firestore);let c;return c="string"==typeof(e=(0,V.m9)(e))||e instanceof tc?TR(this._dataReader,"Transaction.update",s._key,e,i,r):bR(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=ah(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=ah(t,this._firestore),i=new oh(this._firestore);return super.get(t).then(r=>new nc(this._firestore,i,e._key,r._document,new dp(!1,!1),e.converter))}}function MR(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function EH(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function bH(){if(!function mz(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Am=Sr.SDK_VERSION,(0,Sr._registerComponent)(new Ca.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new ai(new rz(e.getProvider("auth-internal")),new az(e.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ve(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kd(h.options.projectId,g)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,Sr.registerVersion)(g2,"3.7.3",n),(0,Sr.registerVersion)(g2,"3.7.3","esm2017")}();class S0{constructor(t){this._delegate=t}static fromBase64String(t){return bH(),new S0(nu.fromBase64String(t))}static fromUint8Array(t){return EH(),new S0(nu.fromUint8Array(t))}toBase64(){return bH(),this._delegate.toBase64()}toUint8Array(){return EH(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kR(n){return function tK(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class nK{enableIndexedDbPersistence(t,e){return function lZ(n,t){tH(n=un(n,ai));const e=Ri(n),i=n._freezeSettings(),r=new dR;return eH(e,r,new FB(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function uZ(n){tH(n=un(n,ai));const t=Ri(n),e=n._freezeSettings(),i=new dR;return eH(t,i,new $4(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function cZ(n){if(n._initialized&&!n._terminated)throw new Ve(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(e=(0,Ie.Z)(function*(i){if(!gl.C())return Promise.resolve();const r=i+"main";yield gl.delete(r)}),function(i){return e.apply(this,arguments)})(rO(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class TH{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Kd||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&$f("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function GB(n,t,e,i={}){var r;const s=(n=un(n,I0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&$f("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,h;if("string"==typeof i.mockUserToken)c=i.mockUserToken,h=yr.MOCK_USER;else{c=(0,V.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new Ve(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new yr(g)}n._authCredentials=new iz(new m2(c,h))}}(this._delegate,t,e,i)}enableNetwork(){return function hZ(n){return function J4(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield KB(n),e=yield vR(n);return t.setNetworkEnabled(!0),function(i){const r=rt(i);return r._u.delete(0),w0(r)}(e)}))}(Ri(n=un(n,ai)))}(this._delegate)}disableNetwork(){return function fZ(n){return function X4(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield KB(n),e=yield vR(n);return t.setNetworkEnabled(!1),(i=(0,Ie.Z)(function*(r){const s=rt(r);s._u.add(0),yield Wm(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(Ri(n=un(n,ai)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,LB("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dZ(n){return function(t){const e=new rr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function O4(n,t){return KO.apply(this,arguments)}(yield wR(t),e)})),e.promise}(Ri(n=un(n,ai)))}(this._delegate)}onSnapshotsInSync(t){return function $Z(n,t){return function nZ(n,t){const e=new jD(t);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield Jm(n),r=e,rt(i).Ru.add(r),void r.next();var i,r})),()=>{e.bc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield Jm(n),r=e,void rt(i).Ru.delete(r);var i,r}))}}(Ri(n=un(n,ai)),IR(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new e_(this,$B(this._delegate,t))}catch(e){throw bs(e,"collection()","Firestore.collection()")}}doc(t){try{return new Aa(this,HD(this._delegate,t))}catch(e){throw bs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Ts(this,function W4(n,t){if(n=un(n,I0),hR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(e=t,new Qu(pn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw bs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function qZ(n,t,e){n=un(n,ai);const i=Object.assign(Object.assign({},WZ),e);return function(r){if(r.maxAttempts<1)throw new Ve(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const h=new rr;return r.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const g=yield function YB(n){return GD(n).then(t=>t.datastore)}(r);new Y4(r.asyncQueue,g,c,s,h).run()})),h.promise}(Ri(n),r=>t(new zZ(n,r)),i)}(this._delegate,e=>t(new DH(this,e)))}batch(){return Ri(this._delegate),new SH(new CH(this._delegate,t=>Xm(this._delegate,t)))}loadBundle(t){return function pZ(n,t){const e=Ri(n=un(n,ai)),i=new oZ;return function iZ(n,t,e,i){const r=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,g=function(g,y){if(g instanceof Uint8Array)return zB(g,y);if(g instanceof ArrayBuffer)return zB(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new z4(g,c);var g}(e,v0(t));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function G4(n,t,e){const i=rt(n);var r;(r=(0,Ie.Z)(function*(s,c,h){try{const g=yield c.getMetadata();if(yield function(x,L){const G=rt(x),ie=vr(L.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",ne=>G.Ns.getBundleMetadata(ne,L.id)).then(ne=>!!ne&&ne.createTime.compareTo(ie)>=0)}(s.localStore,g))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=g).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(DB(g));const y=new I4(g,s.localStore,c.It);let E=yield c.mc();for(;E;){const x=yield y.Fu(E);x&&h._updateProgress(x),E=yield c.mc()}const D=yield y.complete();return yield ec(s,D.Lu,void 0),yield function(x,L){const G=rt(x);return G.persistence.runTransaction("Save bundle","readwrite",ie=>G.Ns.saveBundleMetadata(ie,L))}(s.localStore,g),h._completeWith(D.progress),Promise.resolve(D.Bu)}catch(g){return $f("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var x}),function(s,c,h){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield wR(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function gZ(n,t){return function rZ(n,t){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(e,i){const r=rt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield $D(n),t)}))}(Ri(n=un(n,ai)),t).then(e=>e?new es(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Ts(this,e):null)}}class JD extends AR{constructor(t){super(),this.firestore=t}convertBytes(t){return new S0(new nu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Aa.forKey(e,this.firestore,null)}}class DH{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new JD(t)}get(t){const e=fp(t);return this._delegate.get(e).then(i=>new A0(this._firestore,new nc(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=fp(t);return i?(MR("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=fp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=fp(t);return this._delegate.delete(e),this}}class SH{constructor(t){this._delegate=t}set(t,e,i){const r=fp(t);return i?(MR("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=fp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=fp(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class hp{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new D0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new x0(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=hp.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new hp(t,new JD(t),e),r.set(e,s)),s}}hp.INSTANCES=new WeakMap;class Aa{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new JD(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Aa(e,new oi(e._delegate,i,new et(t)))}static forKey(t,e,i){return new Aa(e,new oi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new e_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new e_(this.firestore,$B(this._delegate,t))}catch(e){throw bs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,V.m9)(t))instanceof oi&&WB(this._delegate,t)}set(t,e){e=MR("DocumentReference.set",e);try{return e?yH(this._delegate,t,e):yH(this._delegate,t)}catch(i){throw bs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?vH(this._delegate,t):vH(this._delegate,t,e,...i)}catch(r){throw bs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function jZ(n){return Xm(un(n.firestore,ai),[new Vm(n._key,di.none())])}(this._delegate)}onSnapshot(...t){const e=AH(t),i=xH(t,r=>new A0(this.firestore,new nc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return wH(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function LZ(n){n=un(n,oi);const t=un(n.firestore,ai),e=Ri(t),i=new oh(t);return function eZ(n,t){const e=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,c){try{const h=yield function(g,y){const E=rt(g);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,y))}(r,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ve(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Zm(h,`Failed to get document '${s} from cache`);c.reject(g)}}),function(r,s,c){return i.apply(this,arguments)})(yield $D(n),t,e);var i})),e.promise}(e,n._key).then(r=>new nc(t,i,n._key,r,new dp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function VZ(n){n=un(n,oi);const t=un(n.firestore,ai);return QB(Ri(t),n._key,{source:"server"}).then(e=>xR(t,n,e))}(this._delegate):function FZ(n){n=un(n,oi);const t=un(n.firestore,ai);return QB(Ri(t),n._key).then(e=>xR(t,n,e))}(this._delegate),e.then(i=>new A0(this.firestore,new nc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Aa(this.firestore,this._delegate.withConverter(t?hp.getInstance(this.firestore,t):null))}}function bs(n,t,e){return n.message=n.message.replace(t,e),n}function AH(n){for(const t of n)if("object"==typeof t&&!kR(t))return t;return{}}function xH(n,t){var e,i;let r;return r=kR(n[0])?n[0]:kR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class A0{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return _H(this._delegate,t._delegate)}}class x0 extends A0{data(t){const e=this._delegate.data(t);return function tz(n,t){n||_t()}(void 0!==e),e}}class Ts{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new JD(t)}where(t,e,i){try{return new Ts(this.firestore,rh(this._delegate,function TZ(n,t,e){const i=t,r=YD("where",n);return new bZ(r,i,e)}(t,e,i)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Ts(this.firestore,rh(this._delegate,function SZ(n,t="asc"){const e=t,i=YD("orderBy",n);return new DZ(i,e)}(t,e)))}catch(i){throw bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Ts(this.firestore,rh(this._delegate,function AZ(n){return BB("limit",n),new cH("limit",n,"F")}(t)))}catch(e){throw bs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Ts(this.firestore,rh(this._delegate,function xZ(n){return BB("limitToLast",n),new cH("limitToLast",n,"L")}(t)))}catch(e){throw bs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Ts(this.firestore,rh(this._delegate,function MZ(...n){return new dH("startAt",n,!0)}(...t)))}catch(e){throw bs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Ts(this.firestore,rh(this._delegate,function kZ(...n){return new dH("startAfter",n,!1)}(...t)))}catch(e){throw bs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Ts(this.firestore,rh(this._delegate,function OZ(...n){return new hH("endBefore",n,!1)}(...t)))}catch(e){throw bs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Ts(this.firestore,rh(this._delegate,function RZ(...n){return new hH("endAt",n,!0)}(...t)))}catch(e){throw bs(e,"endAt()","Query.endAt()")}}isEqual(t){return fR(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function BZ(n){n=un(n,es);const t=un(n.firestore,ai),e=Ri(t),i=new oh(t);return function tZ(n,t){const e=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,c){try{const h=yield ND(r,s,!0),g=new xB(s,h.Hi),y=g.Wu(h.documents),E=g.applyChanges(y,!1);c.resolve(E.snapshot)}catch(h){const g=Zm(h,`Failed to execute query '${s} against cache`);c.reject(g)}}),function(r,s,c){return i.apply(this,arguments)})(yield $D(n),t,e);var i})),e.promise}(e,n._query).then(r=>new sh(t,i,n,r))}(this._delegate):"server"===t?.source?function HZ(n){n=un(n,es);const t=un(n.firestore,ai),e=Ri(t),i=new oh(t);return JB(e,n._query,{source:"server"}).then(r=>new sh(t,i,n,r))}(this._delegate):function UZ(n){n=un(n,es);const t=un(n.firestore,ai),e=Ri(t),i=new oh(t);return uH(n._query),JB(e,n._query).then(r=>new sh(t,i,n,r))}(this._delegate),e.then(i=>new OR(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=AH(t),i=xH(t,r=>new OR(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return wH(this._delegate,e,i)}withConverter(t){return new Ts(this.firestore,this._delegate.withConverter(t?hp.getInstance(this.firestore,t):null))}}class rK{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new x0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OR{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new x0(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new rK(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new x0(this._firestore,i))})}isEqual(t){return _H(this._delegate,t._delegate)}}class e_ extends Ts{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Aa(this.firestore,t):null}doc(t){try{return new Aa(this.firestore,void 0===t?HD(this._delegate):HD(this._delegate,t))}catch(e){throw bs(e,"doc()","CollectionReference.doc()")}}add(t){return function GZ(n,t){const e=un(n.firestore,ai),i=HD(n),r=QD(n.converter,t);return Xm(e,[qD(up(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,di.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Aa(this.firestore,e))}isEqual(t){return WB(this._delegate,t._delegate)}withConverter(t){return new e_(this.firestore,this._delegate.withConverter(t?hp.getInstance(this.firestore,t):null))}}function fp(n){return un(n,oi)}class RR{constructor(...t){this._delegate=new tc(...t)}static documentId(){return new RR(Ti.keyField().canonicalString())}isEqual(t){return(t=(0,V.m9)(t))instanceof tc&&this._delegate._internalPath.isEqual(t._internalPath)}}class pp{constructor(t){this._delegate=t}static serverTimestamp(){const t=function KZ(){return new ER("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new pp(t)}static delete(){const t=function ZZ(){return new E0("deleteField")}();return t._methodName="FieldValue.delete",new pp(t)}static arrayUnion(...t){const e=function YZ(...n){return new vZ("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new pp(e)}static arrayRemove(...t){const e=function QZ(...n){return new wZ("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new pp(e)}static increment(t){const e=function JZ(n){return new CZ("increment",n)}(t);return e._methodName="FieldValue.increment",new pp(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const sK={Firestore:TH,GeoPoint:WD,Timestamp:ci,Blob:S0,Transaction:DH,WriteBatch:SH,DocumentReference:Aa,DocumentSnapshot:A0,Query:Ts,QueryDocumentSnapshot:x0,QuerySnapshot:OR,CollectionReference:e_,FieldPath:RR,FieldValue:pp,setLogLevel:function iK(n){!function ez(n){Wd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function MH(n,t){return function lK(n,t=Cf.z){return new pi.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function NR(n,t){return MH(n,t).pipe((0,dt.U)(e=>({payload:e,type:"query"})))}function XD(n,t){return NR(n,t).pipe(ha(void 0),jk(),(0,dt.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,h)=>{const g=r.find(E=>E.doc.ref.isEqual(c.ref)),y=e?.payload.docs.find(E=>E.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function kH(n,t,e){return XD(n,e).pipe(Nt((i,r)=>function cK(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function dK(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return PR(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return PR(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return PR(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),xb(),(0,dt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function PR(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function OH(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function aK(n){(function oK(n,t){n.INTERNAL.registerComponent(new Ca.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},sK)))})(n,(t,e)=>new TH(t,e,new nK)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(If.Z);class RH{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=XD(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,dt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(ha(void 0),jk(),T(([i,r])=>r.length>0||!i),(0,dt.U)(([i,r])=>r),_n.iC)}auditTrail(t){return this.stateChanges(t).pipe(Nt((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=OH(t);return kH(this.query,e,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return NR(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),_n.iC)}get(t){return(0,rn.D)(this.query.get(t)).pipe(_n.iC)}add(t){return this.ref.add(t)}doc(t){return new NH(this.ref.doc(t),this.afs)}}class NH{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=LH(i,e);return new RH(r,s,this.afs)}snapshotChanges(){return function uK(n,t){return MH(n,t).pipe(ha(void 0),jk(),(0,dt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,rn.D)(this.ref.get(t)).pipe(_n.iC)}}class hK{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?XD(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),T(e=>e.length>0),_n.iC):XD(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}auditTrail(t){return this.stateChanges(t).pipe(Nt((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=OH(t);return kH(this.query,e,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return NR(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),_n.iC)}get(t){return(0,rn.D)(this.query.get(t)).pipe(_n.iC)}}const PH=new l.OlP("angularfire2.enableFirestorePersistence"),FH=new l.OlP("angularfire2.firestore.persistenceSettings"),fK=new l.OlP("angularfire2.firestore.settings"),pK=new l.OlP("angularfire2.firestore.use-emulator");function LH(n,t=(e=>e)){return{query:t(n),ref:n}}let gK=(()=>{class n{constructor(e,i,r,s,c,h,g,y,E,D,x,L,G,ie,ne,ze,Ke){this.schedulers=g;const qe=(0,$i.on)(e,h,i),Je=E;D&&rf(qe,h,x,G,ie,ne,L,ze),[this.firestore,this.persistenceEnabled$]=(0,$i.cc)(`${qe.name}.firestore`,"AngularFirestore",qe.name,()=>{const mt=h.runOutsideAngular(()=>qe.firestore());if(s&&mt.settings(s),Je&&mt.useEmulator(...Je),r&&!jo(c)){const At=()=>{try{return(0,rn.D)(mt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Un){return typeof console<"u"&&console.warn(Un),ht(!1)}};return[mt,h.runOutsideAngular(At)]}return[mt,ht(!1)]},[s,Je,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=LH(r,i),h=this.schedulers.ngZone.run(()=>s);return new RH(h,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new hK(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new NH(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($i.Dh),l.LFG($i.xv,8),l.LFG(PH,8),l.LFG(fK,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(_n.HU),l.LFG(FH,8),l.LFG(pK,8),l.LFG(bg,8),l.LFG(py,8),l.LFG(gy,8),l.LFG(td,8),l.LFG(nf,8),l.LFG(nd,8),l.LFG(tI,8),l.LFG(ed,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mK=(()=>{class n{constructor(){Eg.Z.registerVersion("angularfire",_n.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:PH,useValue:!0},{provide:FH,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[gK]}),n})(),_K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[So]}),n.\u0275inj=l.cJS({imports:[ta,bP,$i.hO.initializeApp(Ab_firebaseConfig),nI,mK,Q6,a$,gI,md,GE,yf,Mv,IP,wA,QA]}),n})();(0,l.G48)(),qa().bootstrapModule(_K).catch(n=>console.error(n))},5867:(yt,Oe,U)=>{U.d(Oe,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=U(9681);(0,l.registerVersion)("firebase","9.14.0","app")},127:(yt,Oe,U)=>{U.d(Oe,{Z:()=>l.Z});var l=U(3942);l.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(yt,Oe,U)=>{U.r(Oe);var l=U(5861),$=U(3942),N=U(8247),ae=U(2090),me=(U(9681),U(1877),U(4859));function fe(){return window}function z(){return(z=(0,l.Z)(function*(j,R,B){var se;const{BuildInfo:Fe}=fe();(0,N.ap)(R.sessionId,"AuthEvent did not contain a session ID");const ut=yield _e(R.sessionId),ct={};return(0,N.aq)()?ct.ibi=Fe.packageName:(0,N.ar)()?ct.apn=Fe.packageName:(0,N.as)(j,"operation-not-supported-in-this-environment"),Fe.displayName&&(ct.appDisplayName=Fe.displayName),ct.sessionId=ut,(0,N.at)(j,B,R.type,void 0,null!==(se=R.eventId)&&void 0!==se?se:void 0,ct)})).apply(this,arguments)}function Ge(){return(Ge=(0,l.Z)(function*(j){const{BuildInfo:R}=fe(),B={};(0,N.aq)()?B.iosBundleId=R.packageName:(0,N.ar)()?B.androidPackageName=R.packageName:(0,N.as)(j,"operation-not-supported-in-this-environment"),yield(0,N.au)(j,B)})).apply(this,arguments)}function at(){return(at=(0,l.Z)(function*(j,R,B){const{cordova:se}=fe();let Fe=()=>{};try{yield new Promise((ut,ct)=>{let xe=null;function Ue(){var Lt;ut();const hn=null===(Lt=se.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof hn&&hn(),"function"==typeof B?.close&&B.close()}function Rt(){xe||(xe=window.setTimeout(()=>{ct((0,N.aw)(j,"redirect-cancelled-by-user"))},2e3))}function dn(){"visible"===document?.visibilityState&&Rt()}R.addPassiveListener(Ue),document.addEventListener("resume",Rt,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",dn,!1),Fe=()=>{R.removePassiveListener(Ue),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",dn,!1),xe&&window.clearTimeout(xe)}})}finally{Fe()}})).apply(this,arguments)}function _e(j){return it.apply(this,arguments)}function it(){return(it=(0,l.Z)(function*(j){const R=tt(j),B=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(B)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function tt(j){if((0,N.ap)(/[0-9a-zA-Z]+/.test(j),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(j);const R=new ArrayBuffer(j.length),B=new Uint8Array(R);for(let se=0;se<j.length;se++)B[se]=j.charCodeAt(se);return B}class Re extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(R)),super.onEvent(R)}initialized(){var R=this;return(0,l.Z)(function*(){yield R.initPromise})()}}function oe(j){return de.apply(this,arguments)}function de(){return(de=(0,l.Z)(function*(j){const R=yield te()._get(ge(j));return R&&(yield te()._remove(ge(j))),R})).apply(this,arguments)}function J(){const j=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const se=Math.floor(Math.random()*R.length);j.push(R.charAt(se))}return j.join("")}function te(){return(0,N.az)(N.b)}function ge(j){return(0,N.aA)("authEvent",j.config.apiKey,j.name)}function je(j){if(!j?.includes("?"))return{};const[R,...B]=j.split("?");return(0,ae.zd)(B.join("?"))}function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function zt(){var j;return(null===(j=self?.location)||void 0===j?void 0:j.protocol)||null}function wi(j=(0,ae.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()&&"capacitor:"!==zt()||!j.toLowerCase().match(/iphone|ipad|ipod|android/))}function Br(){try{const j=self.localStorage,R=N.aI();if(j)return j.setItem(R,"1"),j.removeItem(R),!function Ur(j=(0,ae.z$)()){return function Pi(){return(0,ae.w1)()&&11===document?.documentMode}()||function On(j=(0,ae.z$)()){return/Edge\/\d+/.test(j)}(j)}()||(0,ae.hl)()}catch{return Fi()&&(0,ae.hl)()}return!1}function Fi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Ht(){return"http:"===zt()||"https:"===zt()}()||(0,ae.ru)()||wi())&&!function Vr(){return(0,ae.b$)()||(0,ae.UG)()}()&&Br()&&!Fi()}function Ir(){return wi()&&typeof document<"u"}function nt(){return(nt=(0,l.Z)(function*(){return!!Ir()&&new Promise(j=>{const R=setTimeout(()=>{j(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),j(!0)})})})).apply(this,arguments)}const qn={LOCAL:"local",NONE:"none",SESSION:"session"},vn=N.ax,hi="persistence";function wn(j){return En.apply(this,arguments)}function En(){return(En=(0,l.Z)(function*(j){yield j._initializationPromise;const R=wt(),B=N.aA(hi,j.config.apiKey,j.name);R&&R.setItem(B,j._getPersistence())})).apply(this,arguments)}function wt(){var j;try{return(null===(j=function ti(){return typeof window<"u"?window:null}())||void 0===j?void 0:j.sessionStorage)||null}catch{return null}}const Ct=N.ax;class Ot{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(class sn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(R){var B=this;return(0,l.Z)(function*(){const se=R._key();let Fe=B.eventManagers.get(se);return Fe||(Fe=new Re(R),B.eventManagers.set(se,Fe),B.attachCallbackListeners(R,Fe)),Fe})()}_openPopup(R){(0,N.as)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,B,se,Fe){var ut=this;return(0,l.Z)(function*(){!function Ee(j){var R,B,se,Fe,ut,ct,xe,Ue,Rt,dn;const Lt=fe();(0,N.ax)("function"==typeof(null===(R=Lt?.universalLinks)||void 0===R?void 0:R.subscribe),j,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(B=Lt?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(ut=null===(Fe=null===(se=Lt?.cordova)||void 0===se?void 0:se.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===ut?void 0:ut.openUrl),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Ue=null===(xe=null===(ct=Lt?.cordova)||void 0===ct?void 0:ct.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(dn=null===(Rt=Lt?.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===dn?void 0:dn.open),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const ct=yield ut._initialize(R);yield ct.initialized(),ct.resetRedirect(),(0,N.aD)(),yield ut._originValidation(R);const xe=function De(j,R,B=null){return{type:R,eventId:B,urlResponse:null,sessionId:J(),postBody:null,tenantId:j.tenantId,error:(0,N.aw)(j,"no-auth-event")}}(R,se,Fe);yield function Ze(j,R){return te()._set(ge(j),R)}(R,xe);const Ue=yield function Z(j,R,B){return z.apply(this,arguments)}(R,xe,B),Rt=yield function Pe(j){const{cordova:R}=fe();return new Promise(B=>{R.plugins.browsertab.isAvailable(se=>{let Fe=null;se?R.plugins.browsertab.openUrl(j):Fe=R.InAppBrowser.open(j,(0,N.av)()?"_blank":"_system","location=yes"),B(Fe)})})}(Ue);return function Se(j,R,B){return at.apply(this,arguments)}(R,ct,Rt)})()}_isIframeWebStorageSupported(R,B){throw new Error("Method not implemented.")}_originValidation(R){const B=R._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function X(j){return Ge.apply(this,arguments)}(R)),this.originValidationPromises[B]}attachCallbackListeners(R,B){const{universalLinks:se,handleOpenURL:Fe,BuildInfo:ut}=fe(),ct=setTimeout((0,l.Z)(function*(){yield oe(R),B.onEvent(Qe())}),500),xe=function(){var dn=(0,l.Z)(function*(Lt){clearTimeout(ct);const hn=yield oe(R);let ts=null;hn&&Lt?.url&&(ts=function Ce(j,R){var B,se;const Fe=function He(j){const R=je(j),B=R.link?decodeURIComponent(R.link):void 0,se=je(B).link,Fe=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return je(Fe).link||Fe||se||B||j}(R);if(Fe.includes("/__/auth/callback")){const ut=je(Fe),ct=ut.firebaseError?function ue(j){try{return JSON.parse(j)}catch{return null}}(decodeURIComponent(ut.firebaseError)):null,xe=null===(se=null===(B=ct?.code)||void 0===B?void 0:B.split("auth/"))||void 0===se?void 0:se[1],Ue=xe?(0,N.aw)(xe):null;return Ue?{type:j.type,eventId:j.eventId,tenantId:j.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:j.type,eventId:j.eventId,tenantId:j.tenantId,sessionId:j.sessionId,urlResponse:Fe,postBody:null}}return null}(hn,Lt.url)),B.onEvent(ts||Qe())});return function(hn){return dn.apply(this,arguments)}}();typeof se<"u"&&"function"==typeof se.subscribe&&se.subscribe(null,xe);const Ue=Fe,Rt=`${ut.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var dn=(0,l.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(Rt)&&xe({url:Lt}),"function"==typeof Ue)try{Ue(Lt)}catch(hn){console.error(hn)}});return function(Lt){return dn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(R){var B=this;return(0,l.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,B,se,Fe){var ut=this;return(0,l.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openPopup(R,B,se,Fe)})()}_openRedirect(R,B,se,Fe){var ut=this;return(0,l.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openRedirect(R,B,se,Fe)})()}_isIframeWebStorageSupported(R,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,B)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Ir()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ct(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,l.Z)(function*(){if(R.underlyingResolver)return;const B=yield function Hr(){return nt.apply(this,arguments)}();R.underlyingResolver=B?R.cordovaResolver:R.browserResolver})()}}function Li(j){return j.unwrap()}function Ai(j){return xi(j)}function xi(j){const{_tokenResponse:R}=j instanceof ae.ZR?j.customData:j;if(!R)return null;if(!(j instanceof ae.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return N.P.credentialFromResult(j);const B=R.providerId;if(!B||B===N.o.PASSWORD)return null;let se;switch(B){case N.o.GOOGLE:se=N.Q;break;case N.o.FACEBOOK:se=N.N;break;case N.o.GITHUB:se=N.T;break;case N.o.TWITTER:se=N.W;break;default:const{oauthIdToken:Fe,oauthAccessToken:ut,oauthTokenSecret:ct,pendingToken:xe,nonce:Ue}=R;return ut||ct||Fe||xe?xe?B.startsWith("saml.")?N.aL._create(B,xe):N.J._fromParams({providerId:B,signInMethod:B,pendingToken:xe,idToken:Fe,accessToken:ut}):new N.U(B).credential({idToken:Fe,accessToken:ut,rawNonce:Ue}):null}return j instanceof ae.ZR?se.credentialFromError(j):se.credentialFromResult(j)}function Ft(j,R){return R.catch(B=>{throw B instanceof ae.ZR&&function xt(j,R){var B,se;const Fe=null===(B=R.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(se=R)||void 0===se?void 0:se.code))R.resolver=new li(j,N.an(j,R));else if(Fe){const ut=xi(R),ct=R;ut&&(ct.credential=ut,ct.tenantId=Fe.tenantId||void 0,ct.email=Fe.email||void 0,ct.phoneNumber=Fe.phoneNumber||void 0)}}(j,B),B}).then(B=>{const Fe=B.user;return{operationType:B.operationType,credential:Ai(B),additionalUserInfo:N.al(B),user:Sn.getOrCreate(Fe)}})}function Zi(j,R){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,l.Z)(function*(j,R){const B=yield R;return{verificationId:B.verificationId,confirm:se=>Ft(j,B.confirm(se))}})).apply(this,arguments)}class li{constructor(R,B){this.resolver=B,this.auth=function Zn(j){return j.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return Ft(Li(this.auth),this.resolver.resolveSignIn(R))}}class Sn{constructor(R){this._delegate=R,this.multiFactor=N.ao(R)}static getOrCreate(R){return Sn.USER_MAP.has(R)||Sn.USER_MAP.set(R,new Sn(R)),Sn.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var B=this;return(0,l.Z)(function*(){return Ft(B.auth,N.Z(B._delegate,R))})()}linkWithPhoneNumber(R,B){var se=this;return(0,l.Z)(function*(){return Zi(se.auth,N.l(se._delegate,R,B))})()}linkWithPopup(R){var B=this;return(0,l.Z)(function*(){return Ft(B.auth,N.d(B._delegate,R,Ot))})()}linkWithRedirect(R){var B=this;return(0,l.Z)(function*(){return yield wn(N.aE(B.auth)),N.g(B._delegate,R,Ot)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var B=this;return(0,l.Z)(function*(){return Ft(B.auth,N._(B._delegate,R))})()}reauthenticateWithPhoneNumber(R,B){return Zi(this.auth,N.r(this._delegate,R,B))}reauthenticateWithPopup(R){return Ft(this.auth,N.e(this._delegate,R,Ot))}reauthenticateWithRedirect(R){var B=this;return(0,l.Z)(function*(){return yield wn(N.aE(B.auth)),N.h(B._delegate,R,Ot)})()}sendEmailVerification(R){return N.ab(this._delegate,R)}unlink(R){var B=this;return(0,l.Z)(function*(){return yield N.ak(B._delegate,R),B})()}updateEmail(R){return N.ag(this._delegate,R)}updatePassword(R){return N.ah(this._delegate,R)}updatePhoneNumber(R){return N.u(this._delegate,R)}updateProfile(R){return N.af(this._delegate,R)}verifyBeforeUpdateEmail(R,B){return N.ac(this._delegate,R,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sn.USER_MAP=new WeakMap;const st=N.ax;let Ae=(()=>{class j{constructor(B,se){if(this.app=B,se.isInitialized())return this._delegate=se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=B.options;st(Fe,"invalid-api-key",{appName:B.name}),st(Fe,"invalid-api-key",{appName:B.name});const ut=typeof window<"u"?Ot:void 0;this._delegate=se.initialize({options:{persistence:Tt(Fe,B.name),popupRedirectResolver:ut}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,se){N.G(this._delegate,B,se)}applyActionCode(B){return N.a2(this._delegate,B)}checkActionCode(B){return N.a3(this._delegate,B)}confirmPasswordReset(B,se){return N.a1(this._delegate,B,se)}createUserWithEmailAndPassword(B,se){var Fe=this;return(0,l.Z)(function*(){return Ft(Fe._delegate,N.a5(Fe._delegate,B,se))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return N.aa(this._delegate,B)}isSignInWithEmailLink(B){return N.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,l.Z)(function*(){st(Bn(),B._delegate,"operation-not-supported-in-this-environment");const se=yield N.j(B._delegate,Ot);return se?Ft(B._delegate,Promise.resolve(se)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function cn(j,R){(0,N.aE)(j)._logFramework(R)}(this._delegate,B)}onAuthStateChanged(B,se,Fe){const{next:ut,error:ct,complete:xe}=ot(B,se,Fe);return this._delegate.onAuthStateChanged(ut,ct,xe)}onIdTokenChanged(B,se,Fe){const{next:ut,error:ct,complete:xe}=ot(B,se,Fe);return this._delegate.onIdTokenChanged(ut,ct,xe)}sendSignInLinkToEmail(B,se){return N.a7(this._delegate,B,se)}sendPasswordResetEmail(B,se){return N.a0(this._delegate,B,se||void 0)}setPersistence(B){var se=this;return(0,l.Z)(function*(){let Fe;switch(function Xs(j,R){vn(Object.values(qn).includes(R),j,"invalid-persistence-type"),(0,ae.b$)()?vn(R!==qn.SESSION,j,"unsupported-persistence-type"):(0,ae.UG)()?vn(R===qn.NONE,j,"unsupported-persistence-type"):Fi()?vn(R===qn.NONE||R===qn.LOCAL&&(0,ae.hl)(),j,"unsupported-persistence-type"):vn(R===qn.NONE||Br(),j,"unsupported-persistence-type")}(se._delegate,B),B){case qn.SESSION:Fe=N.a;break;case qn.LOCAL:Fe=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case qn.NONE:Fe=N.L;break;default:return N.as("argument-error",{appName:se._delegate.name})}return se._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return Ft(this._delegate,N.X(this._delegate))}signInWithCredential(B){return Ft(this._delegate,N.Y(this._delegate,B))}signInWithCustomToken(B){return Ft(this._delegate,N.$(this._delegate,B))}signInWithEmailAndPassword(B,se){return Ft(this._delegate,N.a6(this._delegate,B,se))}signInWithEmailLink(B,se){return Ft(this._delegate,N.a9(this._delegate,B,se))}signInWithPhoneNumber(B,se){return Zi(this._delegate,N.s(this._delegate,B,se))}signInWithPopup(B){var se=this;return(0,l.Z)(function*(){return st(Bn(),se._delegate,"operation-not-supported-in-this-environment"),Ft(se._delegate,N.c(se._delegate,B,Ot))})()}signInWithRedirect(B){var se=this;return(0,l.Z)(function*(){return st(Bn(),se._delegate,"operation-not-supported-in-this-environment"),yield wn(se._delegate),N.f(se._delegate,B,Ot)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return N.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return j.Persistence=qn,j})();function ot(j,R,B){let se=j;"function"!=typeof j&&({next:se,error:R,complete:B}=j);const Fe=se;return{next:ct=>Fe(ct&&Sn.getOrCreate(ct)),error:R,complete:B}}function Tt(j,R){const B=function mn(j,R){const B=wt();if(!B)return[];const se=N.aA(hi,j,R);switch(B.getItem(se)){case qn.NONE:return[N.L];case qn.LOCAL:return[N.i,N.a];case qn.SESSION:return[N.a];default:return[]}}(j,R);if(typeof self<"u"&&!B.includes(N.i)&&B.push(N.i),typeof window<"u")for(const se of[N.b,N.a])B.includes(se)||B.push(se);return B.includes(N.L)||B.push(N.L),B}class St{constructor(){this.providerId="phone",this._delegate=new N.P(Li($.Z.auth()))}static credential(R,B){return N.P.credential(R,B)}verifyPhoneNumber(R,B){return this._delegate.verifyPhoneNumber(R,B)}unwrap(){return this._delegate}}St.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,St.PROVIDER_ID=N.P.PROVIDER_ID;const en=N.ax;class q{constructor(R,B,se=$.Z.app()){var Fe;en(null===(Fe=se.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:se.name}),this._delegate=new N.R(R,B,se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(j){j.INTERNAL.registerComponent(new me.wA("auth-compat",R=>{const B=R.getProvider("app-compat").getImmediate(),se=R.getProvider("auth");return new Ae(B,se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:St,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:q,TwitterAuthProvider:N.W,Auth:Ae,AuthCredential:N.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),j.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(yt,Oe,U)=>{U.d(Oe,{y:()=>fe});var l=U(930),$=U(727),N=U(8822),ae=U(9635),ce=U(2416),ye=U(576),me=U(2806);let fe=(()=>{class X{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Se=new X;return Se.source=this,Se.operator=Pe,Se}subscribe(Pe,Se,at){const Ee=function z(X){return X&&X instanceof l.Lv||function Z(X){return X&&(0,ye.m)(X.next)&&(0,ye.m)(X.error)&&(0,ye.m)(X.complete)}(X)&&(0,$.Nn)(X)}(Pe)?Pe:new l.Hp(Pe,Se,at);return(0,me.x)(()=>{const{operator:_e,source:it}=this;Ee.add(_e?_e.call(Ee,it):it?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Se){Pe.error(Se)}}forEach(Pe,Se){return new(Se=we(Se))((at,Ee)=>{const _e=new l.Hp({next:it=>{try{Pe(it)}catch(tt){Ee(tt),_e.unsubscribe()}},error:Ee,complete:at});this.subscribe(_e)})}_subscribe(Pe){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Pe)}[N.L](){return this}pipe(...Pe){return(0,ae.U)(Pe)(this)}toPromise(Pe){return new(Pe=we(Pe))((Se,at)=>{let Ee;this.subscribe(_e=>Ee=_e,_e=>at(_e),()=>Se(Ee))})}}return X.create=Ge=>new X(Ge),X})();function we(X){var Ge;return null!==(Ge=X??ce.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(yt,Oe,U)=>{U.d(Oe,{x:()=>me});var l=U(9751),$=U(727);const ae=(0,U(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=U(8737),ye=U(2806);let me=(()=>{class we extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const X=new fe(this,this);return X.operator=z,X}_throwIfClosed(){if(this.closed)throw new ae}next(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(z)}})}error(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:X}=this;for(;X.length;)X.shift().error(z)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:X,isStopped:Ge,observers:Pe}=this;return X||Ge?$.Lc:(this.currentObservers=null,Pe.push(z),new $.w0(()=>{this.currentObservers=null,(0,ce.P)(Pe,z)}))}_checkFinalizedStatuses(z){const{hasError:X,thrownError:Ge,isStopped:Pe}=this;X?z.error(Ge):Pe&&z.complete()}asObservable(){const z=new l.y;return z.source=this,z}}return we.create=(Z,z)=>new fe(Z,z),we})();class fe extends me{constructor(Z,z){super(),this.destination=Z,this.source=z}next(Z){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===X||X.call(z,Z)}error(Z){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===X||X.call(z,Z)}complete(){var Z,z;null===(z=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===z||z.call(Z)}_subscribe(Z){var z,X;return null!==(X=null===(z=this.source)||void 0===z?void 0:z.subscribe(Z))&&void 0!==X?X:$.Lc}}},930:(yt,Oe,U)=>{U.d(Oe,{Hp:()=>at,Lv:()=>X});var l=U(576),$=U(727),N=U(2416),ae=U(7849),ce=U(5032);const ye=we("C",void 0,void 0);function we(Le,Re,De){return{kind:Le,value:Re,error:De}}var Z=U(3410),z=U(2806);class X extends $.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,$.Nn)(Re)&&Re.add(this)):this.destination=tt}static create(Re,De,Ze){return new at(Re,De,Ze)}next(Re){this.isStopped?it(function fe(Le){return we("N",Le,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?it(function me(Le){return we("E",void 0,Le)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?it(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Pe(Le,Re){return Ge.call(Le,Re)}class Se{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:De}=this;if(De.next)try{De.next(Re)}catch(Ze){Ee(Ze)}}error(Re){const{partialObserver:De}=this;if(De.error)try{De.error(Re)}catch(Ze){Ee(Ze)}else Ee(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(De){Ee(De)}}}class at extends X{constructor(Re,De,Ze){let oe;if(super(),(0,l.m)(Re)||!Re)oe={next:Re??void 0,error:De??void 0,complete:Ze??void 0};else{let de;this&&N.v.useDeprecatedNextContext?(de=Object.create(Re),de.unsubscribe=()=>this.unsubscribe(),oe={next:Re.next&&Pe(Re.next,de),error:Re.error&&Pe(Re.error,de),complete:Re.complete&&Pe(Re.complete,de)}):oe=Re}this.destination=new Se(oe)}}function Ee(Le){N.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Le):(0,ae.h)(Le)}function it(Le,Re){const{onStoppedNotification:De}=N.v;De&&Z.z.setTimeout(()=>De(Le,Re))}const tt={closed:!0,next:ce.Z,error:function _e(Le){throw Le},complete:ce.Z}},727:(yt,Oe,U)=>{U.d(Oe,{Lc:()=>ye,w0:()=>ce,Nn:()=>me});var l=U(576);const N=(0,U(3888).d)(we=>function(z){we(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((X,Ge)=>`${Ge+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ae=U(8737);class ce{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Pe of z)Pe.remove(this);else z.remove(this);const{initialTeardown:X}=this;if((0,l.m)(X))try{X()}catch(Pe){Z=Pe instanceof N?Pe.errors:[Pe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Pe of Ge)try{fe(Pe)}catch(Se){Z=Z??[],Se instanceof N?Z=[...Z,...Se.errors]:Z.push(Se)}}if(Z)throw new N(Z)}}add(Z){var z;if(Z&&Z!==this)if(this.closed)fe(Z);else{if(Z instanceof ce){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(Z)}}_hasParent(Z){const{_parentage:z}=this;return z===Z||Array.isArray(z)&&z.includes(Z)}_addParent(Z){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(Z),z):z?[z,Z]:Z}_removeParent(Z){const{_parentage:z}=this;z===Z?this._parentage=null:Array.isArray(z)&&(0,ae.P)(z,Z)}remove(Z){const{_finalizers:z}=this;z&&(0,ae.P)(z,Z),Z instanceof ce&&Z._removeParent(this)}}ce.EMPTY=(()=>{const we=new ce;return we.closed=!0,we})();const ye=ce.EMPTY;function me(we){return we instanceof ce||we&&"closed"in we&&(0,l.m)(we.remove)&&(0,l.m)(we.add)&&(0,l.m)(we.unsubscribe)}function fe(we){(0,l.m)(we)?we():we.unsubscribe()}},2416:(yt,Oe,U)=>{U.d(Oe,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(yt,Oe,U)=>{U.d(Oe,{E:()=>$});const $=new(U(9751).y)(ce=>ce.complete())},8996:(yt,Oe,U)=>{U.d(Oe,{D:()=>Re});var l=U(8421),$=U(5363),N=U(9468),ye=U(9751),fe=U(2202),we=U(576),Z=U(9672);function X(De,Ze){if(!De)throw new Error("Iterable cannot be null");return new ye.y(oe=>{(0,Z.f)(oe,Ze,()=>{const de=De[Symbol.asyncIterator]();(0,Z.f)(oe,Ze,()=>{de.next().then(Ce=>{Ce.done?oe.complete():oe.next(Ce.value)})},0,!0)})})}var Ge=U(3670),Pe=U(8239),Se=U(1144),at=U(6495),Ee=U(2206),_e=U(4532),it=U(3260);function Re(De,Ze){return Ze?function Le(De,Ze){if(null!=De){if((0,Ge.c)(De))return function ae(De,Ze){return(0,l.Xf)(De).pipe((0,N.R)(Ze),(0,$.Q)(Ze))}(De,Ze);if((0,Se.z)(De))return function me(De,Ze){return new ye.y(oe=>{let de=0;return Ze.schedule(function(){de===De.length?oe.complete():(oe.next(De[de++]),oe.closed||this.schedule())})})}(De,Ze);if((0,Pe.t)(De))return function ce(De,Ze){return(0,l.Xf)(De).pipe((0,N.R)(Ze),(0,$.Q)(Ze))}(De,Ze);if((0,Ee.D)(De))return X(De,Ze);if((0,at.T)(De))return function z(De,Ze){return new ye.y(oe=>{let de;return(0,Z.f)(oe,Ze,()=>{de=De[fe.h](),(0,Z.f)(oe,Ze,()=>{let Ce,J;try{({value:Ce,done:J}=de.next())}catch(te){return void oe.error(te)}J?oe.complete():oe.next(Ce)},0,!0)}),()=>(0,we.m)(de?.return)&&de.return()})}(De,Ze);if((0,it.L)(De))return function tt(De,Ze){return X((0,it.Q)(De),Ze)}(De,Ze)}throw(0,_e.z)(De)}(De,Ze):(0,l.Xf)(De)}},8421:(yt,Oe,U)=>{U.d(Oe,{Xf:()=>Ge});var l=U(655),$=U(1144),N=U(8239),ae=U(9751),ce=U(3670),ye=U(2206),me=U(4532),fe=U(6495),we=U(3260),Z=U(576),z=U(7849),X=U(8822);function Ge(Le){if(Le instanceof ae.y)return Le;if(null!=Le){if((0,ce.c)(Le))return function Pe(Le){return new ae.y(Re=>{const De=Le[X.L]();if((0,Z.m)(De.subscribe))return De.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,$.z)(Le))return function Se(Le){return new ae.y(Re=>{for(let De=0;De<Le.length&&!Re.closed;De++)Re.next(Le[De]);Re.complete()})}(Le);if((0,N.t)(Le))return function at(Le){return new ae.y(Re=>{Le.then(De=>{Re.closed||(Re.next(De),Re.complete())},De=>Re.error(De)).then(null,z.h)})}(Le);if((0,ye.D)(Le))return _e(Le);if((0,fe.T)(Le))return function Ee(Le){return new ae.y(Re=>{for(const De of Le)if(Re.next(De),Re.closed)return;Re.complete()})}(Le);if((0,we.L)(Le))return function it(Le){return _e((0,we.Q)(Le))}(Le)}throw(0,me.z)(Le)}function _e(Le){return new ae.y(Re=>{(function tt(Le,Re){var De,Ze,oe,de;return(0,l.mG)(this,void 0,void 0,function*(){try{for(De=(0,l.KL)(Le);!(Ze=yield De.next()).done;)if(Re.next(Ze.value),Re.closed)return}catch(Ce){oe={error:Ce}}finally{try{Ze&&!Ze.done&&(de=De.return)&&(yield de.call(De))}finally{if(oe)throw oe.error}}Re.complete()})})(Le,Re).catch(De=>Re.error(De))})}},6451:(yt,Oe,U)=>{U.d(Oe,{T:()=>ye});var l=U(8189),$=U(8421),N=U(515),ae=U(7669),ce=U(8996);function ye(...me){const fe=(0,ae.yG)(me),we=(0,ae._6)(me,1/0),Z=me;return Z.length?1===Z.length?(0,$.Xf)(Z[0]):(0,l.J)(we)((0,ce.D)(Z,fe)):N.E}},5403:(yt,Oe,U)=>{U.d(Oe,{x:()=>$});var l=U(930);function $(ae,ce,ye,me,fe){return new N(ae,ce,ye,me,fe)}class N extends l.Lv{constructor(ce,ye,me,fe,we,Z){super(ce),this.onFinalize=we,this.shouldUnsubscribe=Z,this._next=ye?function(z){try{ye(z)}catch(X){ce.error(X)}}:super._next,this._error=fe?function(z){try{fe(z)}catch(X){ce.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(z){ce.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(yt,Oe,U)=>{U.d(Oe,{U:()=>N});var l=U(4482),$=U(5403);function N(ae,ce){return(0,l.e)((ye,me)=>{let fe=0;ye.subscribe((0,$.x)(me,we=>{me.next(ae.call(ce,we,fe++))}))})}},8189:(yt,Oe,U)=>{U.d(Oe,{J:()=>N});var l=U(5577),$=U(4671);function N(ae=1/0){return(0,l.z)($.y,ae)}},5577:(yt,Oe,U)=>{U.d(Oe,{z:()=>fe});var l=U(4004),$=U(8421),N=U(4482),ae=U(9672),ce=U(5403),me=U(576);function fe(we,Z,z=1/0){return(0,me.m)(Z)?fe((X,Ge)=>(0,l.U)((Pe,Se)=>Z(X,Pe,Ge,Se))((0,$.Xf)(we(X,Ge))),z):("number"==typeof Z&&(z=Z),(0,N.e)((X,Ge)=>function ye(we,Z,z,X,Ge,Pe,Se,at){const Ee=[];let _e=0,it=0,tt=!1;const Le=()=>{tt&&!Ee.length&&!_e&&Z.complete()},Re=Ze=>_e<X?De(Ze):Ee.push(Ze),De=Ze=>{Pe&&Z.next(Ze),_e++;let oe=!1;(0,$.Xf)(z(Ze,it++)).subscribe((0,ce.x)(Z,de=>{Ge?.(de),Pe?Re(de):Z.next(de)},()=>{oe=!0},void 0,()=>{if(oe)try{for(_e--;Ee.length&&_e<X;){const de=Ee.shift();Se?(0,ae.f)(Z,Se,()=>De(de)):De(de)}Le()}catch(de){Z.error(de)}}))};return we.subscribe((0,ce.x)(Z,Re,()=>{tt=!0,Le()})),()=>{at?.()}}(X,Ge,we,z)))}},5363:(yt,Oe,U)=>{U.d(Oe,{Q:()=>ae});var l=U(9672),$=U(4482),N=U(5403);function ae(ce,ye=0){return(0,$.e)((me,fe)=>{me.subscribe((0,N.x)(fe,we=>(0,l.f)(fe,ce,()=>fe.next(we),ye),()=>(0,l.f)(fe,ce,()=>fe.complete(),ye),we=>(0,l.f)(fe,ce,()=>fe.error(we),ye)))})}},3099:(yt,Oe,U)=>{U.d(Oe,{B:()=>ce});var l=U(8421),$=U(7579),N=U(930),ae=U(4482);function ce(me={}){const{connector:fe=(()=>new $.x),resetOnError:we=!0,resetOnComplete:Z=!0,resetOnRefCountZero:z=!0}=me;return X=>{let Ge,Pe,Se,at=0,Ee=!1,_e=!1;const it=()=>{Pe?.unsubscribe(),Pe=void 0},tt=()=>{it(),Ge=Se=void 0,Ee=_e=!1},Le=()=>{const Re=Ge;tt(),Re?.unsubscribe()};return(0,ae.e)((Re,De)=>{at++,!_e&&!Ee&&it();const Ze=Se=Se??fe();De.add(()=>{at--,0===at&&!_e&&!Ee&&(Pe=ye(Le,z))}),Ze.subscribe(De),!Ge&&at>0&&(Ge=new N.Hp({next:oe=>Ze.next(oe),error:oe=>{_e=!0,it(),Pe=ye(tt,we,oe),Ze.error(oe)},complete:()=>{Ee=!0,it(),Pe=ye(tt,Z),Ze.complete()}}),(0,l.Xf)(Re).subscribe(Ge))})(X)}}function ye(me,fe,...we){if(!0===fe)return void me();if(!1===fe)return;const Z=new N.Hp({next:()=>{Z.unsubscribe(),me()}});return fe(...we).subscribe(Z)}},9468:(yt,Oe,U)=>{U.d(Oe,{R:()=>$});var l=U(4482);function $(N,ae=0){return(0,l.e)((ce,ye)=>{ye.add(N.schedule(()=>ce.subscribe(ye),ae))})}},8505:(yt,Oe,U)=>{U.d(Oe,{b:()=>ce});var l=U(576),$=U(4482),N=U(5403),ae=U(4671);function ce(ye,me,fe){const we=(0,l.m)(ye)||me||fe?{next:ye,error:me,complete:fe}:ye;return we?(0,$.e)((Z,z)=>{var X;null===(X=we.subscribe)||void 0===X||X.call(we);let Ge=!0;Z.subscribe((0,N.x)(z,Pe=>{var Se;null===(Se=we.next)||void 0===Se||Se.call(we,Pe),z.next(Pe)},()=>{var Pe;Ge=!1,null===(Pe=we.complete)||void 0===Pe||Pe.call(we),z.complete()},Pe=>{var Se;Ge=!1,null===(Se=we.error)||void 0===Se||Se.call(we,Pe),z.error(Pe)},()=>{var Pe,Se;Ge&&(null===(Pe=we.unsubscribe)||void 0===Pe||Pe.call(we)),null===(Se=we.finalize)||void 0===Se||Se.call(we)}))}):ae.y}},4408:(yt,Oe,U)=>{U.d(Oe,{o:()=>ce});var l=U(727);class $ extends l.w0{constructor(me,fe){super()}schedule(me,fe=0){return this}}const N={setInterval(ye,me,...fe){const{delegate:we}=N;return we?.setInterval?we.setInterval(ye,me,...fe):setInterval(ye,me,...fe)},clearInterval(ye){const{delegate:me}=N;return(me?.clearInterval||clearInterval)(ye)},delegate:void 0};var ae=U(8737);class ce extends ${constructor(me,fe){super(me,fe),this.scheduler=me,this.work=fe,this.pending=!1}schedule(me,fe=0){var we;if(this.closed)return this;this.state=me;const Z=this.id,z=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(z,Z,fe)),this.pending=!0,this.delay=fe,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(z,this.id,fe),this}requestAsyncId(me,fe,we=0){return N.setInterval(me.flush.bind(me,this),we)}recycleAsyncId(me,fe,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return fe;null!=fe&&N.clearInterval(fe)}execute(me,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(me,fe);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,fe){let Z,we=!1;try{this.work(me)}catch(z){we=!0,Z=z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:me,scheduler:fe}=this,{actions:we}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(we,this),null!=me&&(this.id=this.recycleAsyncId(fe,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(yt,Oe,U)=>{U.d(Oe,{v:()=>N});var l=U(6063);class ${constructor(ce,ye=$.now){this.schedulerActionCtor=ce,this.now=ye}schedule(ce,ye=0,me){return new this.schedulerActionCtor(this,ce).schedule(me,ye)}}$.now=l.l.now;class N extends ${constructor(ce,ye=$.now){super(ce,ye),this.actions=[],this._active=!1}flush(ce){const{actions:ye}=this;if(this._active)return void ye.push(ce);let me;this._active=!0;do{if(me=ce.execute(ce.state,ce.delay))break}while(ce=ye.shift());if(this._active=!1,me){for(;ce=ye.shift();)ce.unsubscribe();throw me}}}},4986:(yt,Oe,U)=>{U.d(Oe,{z:()=>N});var l=U(4408);const N=new(U(7565).v)(l.o)},6063:(yt,Oe,U)=>{U.d(Oe,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(yt,Oe,U)=>{U.d(Oe,{z:()=>l});const l={setTimeout($,N,...ae){const{delegate:ce}=l;return ce?.setTimeout?ce.setTimeout($,N,...ae):setTimeout($,N,...ae)},clearTimeout($){const{delegate:N}=l;return(N?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(yt,Oe,U)=>{U.d(Oe,{h:()=>$});const $=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yt,Oe,U)=>{U.d(Oe,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(yt,Oe,U)=>{U.d(Oe,{_6:()=>ye,jO:()=>ae,yG:()=>ce});var l=U(576);function N(me){return me[me.length-1]}function ae(me){return(0,l.m)(N(me))?me.pop():void 0}function ce(me){return function $(me){return me&&(0,l.m)(me.schedule)}(N(me))?me.pop():void 0}function ye(me,fe){return"number"==typeof N(me)?me.pop():fe}},8737:(yt,Oe,U)=>{function l($,N){if($){const ae=$.indexOf(N);0<=ae&&$.splice(ae,1)}}U.d(Oe,{P:()=>l})},3888:(yt,Oe,U)=>{function l($){const ae=$(ce=>{Error.call(ce),ce.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}U.d(Oe,{d:()=>l})},2806:(yt,Oe,U)=>{U.d(Oe,{O:()=>ae,x:()=>N});var l=U(2416);let $=null;function N(ce){if(l.v.useDeprecatedSynchronousErrorHandling){const ye=!$;if(ye&&($={errorThrown:!1,error:null}),ce(),ye){const{errorThrown:me,error:fe}=$;if($=null,me)throw fe}}else ce()}function ae(ce){l.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ce)}},9672:(yt,Oe,U)=>{function l($,N,ae,ce=0,ye=!1){const me=N.schedule(function(){ae(),ye?$.add(this.schedule(null,ce)):this.unsubscribe()},ce);if($.add(me),!ye)return me}U.d(Oe,{f:()=>l})},4671:(yt,Oe,U)=>{function l($){return $}U.d(Oe,{y:()=>l})},1144:(yt,Oe,U)=>{U.d(Oe,{z:()=>l});const l=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(yt,Oe,U)=>{U.d(Oe,{D:()=>$});var l=U(576);function $(N){return Symbol.asyncIterator&&(0,l.m)(N?.[Symbol.asyncIterator])}},576:(yt,Oe,U)=>{function l($){return"function"==typeof $}U.d(Oe,{m:()=>l})},3670:(yt,Oe,U)=>{U.d(Oe,{c:()=>N});var l=U(8822),$=U(576);function N(ae){return(0,$.m)(ae[l.L])}},6495:(yt,Oe,U)=>{U.d(Oe,{T:()=>N});var l=U(2202),$=U(576);function N(ae){return(0,$.m)(ae?.[l.h])}},8239:(yt,Oe,U)=>{U.d(Oe,{t:()=>$});var l=U(576);function $(N){return(0,l.m)(N?.then)}},3260:(yt,Oe,U)=>{U.d(Oe,{L:()=>ae,Q:()=>N});var l=U(655),$=U(576);function N(ce){return(0,l.FC)(this,arguments,function*(){const me=ce.getReader();try{for(;;){const{value:fe,done:we}=yield(0,l.qq)(me.read());if(we)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(fe)}}finally{me.releaseLock()}})}function ae(ce){return(0,$.m)(ce?.getReader)}},4482:(yt,Oe,U)=>{U.d(Oe,{A:()=>$,e:()=>N});var l=U(576);function $(ae){return(0,l.m)(ae?.lift)}function N(ae){return ce=>{if($(ce))return ce.lift(function(ye){try{return ae(ye,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(yt,Oe,U)=>{function l(){}U.d(Oe,{Z:()=>l})},9635:(yt,Oe,U)=>{U.d(Oe,{U:()=>N,z:()=>$});var l=U(4671);function $(...ae){return N(ae)}function N(ae){return 0===ae.length?l.y:1===ae.length?ae[0]:function(ye){return ae.reduce((me,fe)=>fe(me),ye)}}},7849:(yt,Oe,U)=>{U.d(Oe,{h:()=>N});var l=U(2416),$=U(3410);function N(ae){$.z.setTimeout(()=>{const{onUnhandledError:ce}=l.v;if(!ce)throw ae;ce(ae)})}},4532:(yt,Oe,U)=>{function l($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Oe,{z:()=>l})},655:(yt,Oe,U)=>{function ae(J,te){var ge={};for(var ue in J)Object.prototype.hasOwnProperty.call(J,ue)&&te.indexOf(ue)<0&&(ge[ue]=J[ue]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ue=Object.getOwnPropertySymbols(J);He<ue.length;He++)te.indexOf(ue[He])<0&&Object.prototype.propertyIsEnumerable.call(J,ue[He])&&(ge[ue[He]]=J[ue[He]])}return ge}function fe(J,te,ge,ue){return new(ge||(ge=Promise))(function(je,vt){function sn(cn){try{Qe(ue.next(cn))}catch(In){vt(In)}}function jt(cn){try{Qe(ue.throw(cn))}catch(In){vt(In)}}function Qe(cn){cn.done?je(cn.value):function He(je){return je instanceof ge?je:new ge(function(vt){vt(je)})}(cn.value).then(sn,jt)}Qe((ue=ue.apply(J,te||[])).next())})}function Ee(J){return this instanceof Ee?(this.v=J,this):new Ee(J)}function _e(J,te,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ue=ge.apply(J,te||[]),je=[];return He={},vt("next"),vt("throw"),vt("return"),He[Symbol.asyncIterator]=function(){return this},He;function vt(tn){ue[tn]&&(He[tn]=function(nn){return new Promise(function(zt,Ht){je.push([tn,nn,zt,Ht])>1||sn(tn,nn)})})}function sn(tn,nn){try{!function jt(tn){tn.value instanceof Ee?Promise.resolve(tn.value.v).then(Qe,cn):In(je[0][2],tn)}(ue[tn](nn))}catch(zt){In(je[0][3],zt)}}function Qe(tn){sn("next",tn)}function cn(tn){sn("throw",tn)}function In(tn,nn){tn(nn),je.shift(),je.length&&sn(je[0][0],je[0][1])}}function tt(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,te=J[Symbol.asyncIterator];return te?te.call(J):(J=function X(J){var te="function"==typeof Symbol&&Symbol.iterator,ge=te&&J[te],ue=0;if(ge)return ge.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ue>=J.length&&(J=void 0),{value:J&&J[ue++],done:!J}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ge={},ue("next"),ue("throw"),ue("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ue(je){ge[je]=J[je]&&function(vt){return new Promise(function(sn,jt){!function He(je,vt,sn,jt){Promise.resolve(jt).then(function(Qe){je({value:Qe,done:sn})},vt)}(sn,jt,(vt=J[je](vt)).done,vt.value)})}}}U.d(Oe,{FC:()=>_e,KL:()=>tt,_T:()=>ae,mG:()=>fe,qq:()=>Ee})},4650:(yt,Oe,U)=>{U.d(Oe,{$8M:()=>Ml,$Z:()=>cg,AFp:()=>Eb,AaK:()=>fe,Akn:()=>$s,AsE:()=>jy,BQk:()=>Vl,CHM:()=>dh,CRH:()=>tb,CZH:()=>em,CqO:()=>II,D6c:()=>Rd,DdM:()=>NE,EJc:()=>oM,EpF:()=>wI,F$t:()=>AI,F4k:()=>CI,FYo:()=>sS,FiY:()=>Be,G48:()=>Bv,Gf:()=>XE,GfV:()=>eC,GkF:()=>Ey,Gpc:()=>z,HTZ:()=>gv,Hsn:()=>xI,JOm:()=>va,KtG:()=>Wo,LFG:()=>An,LSH:()=>Op,Lbi:()=>iM,Lck:()=>ix,MAs:()=>yI,MMx:()=>fv,NdJ:()=>Ty,OlP:()=>Tn,Oqu:()=>af,PXZ:()=>Wi,Q6J:()=>Cy,QGY:()=>by,QP$:()=>Fe,Qsj:()=>UR,R0b:()=>zs,RDi:()=>Sp,Rgc:()=>vf,SBq:()=>Ou,Sil:()=>uM,Suo:()=>eb,TTD:()=>Ss,TgZ:()=>md,Tol:()=>VI,Udp:()=>kg,VKq:()=>PE,W1O:()=>sb,WLB:()=>pv,X6Q:()=>Vb,XFs:()=>nt,Xpm:()=>Ae,Xts:()=>d_,Y36:()=>il,YKP:()=>TE,YNc:()=>_I,Yjl:()=>j,Yz7:()=>nn,Z0I:()=>Vr,ZZ4:()=>am,_Bn:()=>bE,_UZ:()=>vI,_Vd:()=>ku,_c5:()=>xM,_uU:()=>GI,aQg:()=>qv,c2e:()=>rM,cJS:()=>Ht,cg1:()=>Ug,dDg:()=>pM,dqk:()=>Ot,eFA:()=>Ob,ekj:()=>Og,eoX:()=>Fv,f3M:()=>T,g9A:()=>Tb,h0i:()=>Ad,hGG:()=>lm,hij:()=>Vu,iGM:()=>JE,ifc:()=>Ct,ip1:()=>Ib,jDz:()=>SE,kEZ:()=>FE,kL8:()=>Ky,l5B:()=>LE,lG2:()=>Y,lqb:()=>ya,lri:()=>Pv,n5z:()=>Os,oAB:()=>en,oJD:()=>kp,oxw:()=>SI,q4F:()=>tC,qLn:()=>$h,qOj:()=>Sg,qZA:()=>xg,qbA:()=>VE,rFY:()=>UE,rWj:()=>Mb,s9C:()=>Dy,sBO:()=>Sf,sIi:()=>rd,s_b:()=>Kg,soG:()=>tm,tb:()=>Db,tp0:()=>Mt,uIk:()=>ad,vHH:()=>Se,vpe:()=>ba,wAp:()=>kt,xp6:()=>kC,ynx:()=>Mg,z2F:()=>_i,zSh:()=>Fp,zs3:()=>Pu});var l=U(7579),$=U(727),N=U(9751),ae=U(6451),ce=U(3099);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function me(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function fe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(fe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function we(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Z=ye({__forward_ref__:ye});function z(o){return o.__forward_ref__=z,o.toString=function(){return fe(this())},o}function X(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(Z)&&o.__forward_ref__===z}class Se extends Error{constructor(a,u){super(function at(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function Ee(o){return"string"==typeof o?o:null==o?"":String(o)}function Re(o,a){throw new Se(-201,!1)}function jt(o,a){null==o&&function Qe(o,a,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function nn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ht(o){return{providers:o.providers||[],imports:o.imports||[]}}function wi(o){return Pi(o,Fi)||Pi(o,Ir)}function Vr(o){return null!==wi(o)}function Pi(o,a){return o.hasOwnProperty(a)?o[a]:null}function Br(o){return o&&(o.hasOwnProperty(Bn)||o.hasOwnProperty(Hr))?o[Bn]:null}const Fi=ye({\u0275prov:ye}),Bn=ye({\u0275inj:ye}),Ir=ye({ngInjectableDef:ye}),Hr=ye({ngInjectorDef:ye});var nt=(()=>((nt=nt||{})[nt.Default=0]="Default",nt[nt.Host=1]="Host",nt[nt.Self=2]="Self",nt[nt.SkipSelf=4]="SkipSelf",nt[nt.Optional=8]="Optional",nt))();let ti;function vn(o){const a=ti;return ti=o,a}function hi(o,a,u){const d=wi(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&nt.Optional?null:void 0!==a?a:void Re(fe(o))}function wn(o){return{toString:o}.toString()}var En=(()=>((En=En||{})[En.OnPush=0]="OnPush",En[En.Default=1]="Default",En))(),Ct=(()=>{return(o=Ct||(Ct={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ct;var o})();const Ot=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ai={},xt=[],xi=ye({\u0275cmp:ye}),Ft=ye({\u0275dir:ye}),Zi=ye({\u0275pipe:ye}),Qt=ye({\u0275mod:ye}),li=ye({\u0275fac:ye}),Sn=ye({__NG_ELEMENT_ID__:ye});let st=0;function Ae(o){return wn(()=>{const u=!0===o.standalone,d={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||xt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Ct.Emulated,id:"c"+st++,styles:o.styles||xt,_:null,setInput:null,schemas:o.schemas||null,tView:null},p=o.dependencies,v=o.features;return f.inputs=W(o.inputs,d),f.outputs=W(o.outputs),v&&v.forEach(C=>C(f)),f.directiveDefs=p?()=>("function"==typeof p?p():p).map(Tt).filter(St):null,f.pipeDefs=p?()=>("function"==typeof p?p():p).map(se).filter(St):null,f})}function Tt(o){return R(o)||B(o)}function St(o){return null!==o}function en(o){return wn(()=>({type:o.type,bootstrap:o.bootstrap||xt,declarations:o.declarations||xt,imports:o.imports||xt,exports:o.exports||xt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function W(o,a){if(null==o)return Ai;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],p=f;Array.isArray(f)&&(p=f[1],f=f[0]),u[f]=d,a&&(a[f]=p)}return u}const Y=Ae;function j(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function R(o){return o[xi]||null}function B(o){return o[Ft]||null}function se(o){return o[Zi]||null}function Fe(o){const a=R(o)||B(o)||se(o);return null!==a&&a.standalone}function ut(o,a){const u=o[Qt]||null;if(!u&&!0===a)throw new Error(`Type ${fe(o)} does not have '\u0275mod' property.`);return u}function ni(o){return Array.isArray(o)&&"object"==typeof o[1]}function lr(o){return Array.isArray(o)&&!0===o[1]}function Fo(o){return 0!=(8&o.flags)}function ru(o){return 2==(2&o.flags)}function ka(o){return 1==(1&o.flags)}function Yi(o){return null!==o.template}function su(o){return 0!=(256&o[2])}function Ci(o,a){return o.hasOwnProperty(li)?o[li]:null}class Bo{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ss(){return lc}function lc(o){return o.type.prototype.ngOnChanges&&(o.setInput=ou),yl}function yl(){const o=Ho(this),a=o?.current;if(a){const u=o.previous;if(u===Ai)o.previous=a;else for(let d in a)u[d]=a[d];o.current=null,this.ngOnChanges(a)}}function ou(o,a,u,d){const f=Ho(o)||function Ui(o,a){return o[uc]=a}(o,{previous:Ai,current:null}),p=f.current||(f.current={}),v=f.previous,C=this.declaredInputs[u],b=v[C];p[C]=new Bo(b&&b.currentValue,a,v===Ai),o[d]=a}Ss.ngInherit=!0;const uc="__ngSimpleChanges__";function Ho(o){return o[uc]||null}function Rn(o){for(;Array.isArray(o);)o=o[0];return o}function br(o,a){return Rn(a[o])}function Ii(o,a){return Rn(a[o.index])}function Go(o,a){return o.data[a]}function on(o,a){const u=a[o];return ni(u)?u:u[0]}function As(o){return 64==(64&o[2])}function dr(o,a){return null==a?null:o[a]}function Ra(o){o[18]=0}function Hn(o,a){o[5]+=a;let u=o,d=o[3];for(;null!==d&&(1===a&&1===u[5]||-1===a&&0===u[5]);)d[5]+=a,u=d,d=d[3]}const Pt={lFrame:Ga(null),bindingsEnabled:!0};function lo(){return Pt.bindingsEnabled}function Ne(){return Pt.lFrame.lView}function Zt(){return Pt.lFrame.tView}function dh(o){return Pt.lFrame.contextLView=o,o[8]}function Wo(o){return Pt.lFrame.contextLView=null,o}function ii(){let o=zo();for(;null!==o&&64===o.type;)o=o.parent;return o}function zo(){return Pt.lFrame.currentTNode}function Bi(o,a){const u=Pt.lFrame;u.currentTNode=o,u.isParent=a}function Cl(){return Pt.lFrame.isParent}function qo(){Pt.lFrame.isParent=!1}function ri(){const o=Pt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Ba(){return Pt.lFrame.bindingIndex++}function os(o){const a=Pt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function fc(o,a){const u=Pt.lFrame;u.bindingIndex=u.bindingRootIndex=o,Zo(a)}function Zo(o){Pt.lFrame.currentDirectiveIndex=o}function Ha(){return Pt.lFrame.currentQueryIndex}function hu(o){Pt.lFrame.currentQueryIndex=o}function ja(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function pc(o,a,u){if(u&nt.SkipSelf){let f=a,p=o;for(;!(f=f.parent,null!==f||u&nt.Host||(f=ja(p),null===f||(p=p[15],10&f.type))););if(null===f)return!1;a=f,o=p}const d=Pt.lFrame=ph();return d.currentTNode=a,d.lView=o,!0}function Ko(o){const a=ph(),u=o[1];Pt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function ph(){const o=Pt.lFrame,a=null===o?null:o.child;return null===a?Ga(o):a}function Ga(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function gh(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const gc=gh;function xs(){const o=gh();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function xn(){return Pt.lFrame.selectedIndex}function as(o){Pt.lFrame.selectedIndex=o}function Mn(){const o=Pt.lFrame;return Go(o.tView,o.selectedIndex)}function Il(o,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const p=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:k}=p;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),b&&(o.viewHooks||(o.viewHooks=[])).push(-u,b),A&&((o.viewHooks||(o.viewHooks=[])).push(u,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,A)),null!=k&&(o.destroyHooks||(o.destroyHooks=[])).push(u,k)}}function Yo(o,a,u){Jo(o,a,3,u)}function Qo(o,a,u,d){(3&o[2])===u&&Jo(o,a,u,d)}function yc(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Jo(o,a,u,d){const p=d??-1,v=a.length-1;let C=0;for(let b=void 0!==d?65535&o[18]:0;b<v;b++)if("number"==typeof a[b+1]){if(C=a[b],null!=d&&C>=d)break}else a[b]<0&&(o[18]+=65536),(C<p||-1==p)&&(vc(o,u,a,b),o[18]=(4294901760&o[18])+b+2),b++}function vc(o,a,u,d){const f=u[d]<0,p=u[d+1],C=o[f?-u[d]:u[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class hr{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function ls(o,a,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const p=u[d++],v=u[d++],C=u[d++];o.setAttribute(a,v,C,p)}else{const p=f,v=u[++d];yu(p)?o.setProperty(a,p,v):o.setAttribute(a,p,v),d++}}return d}function $a(o){return 3===o||4===o||6===o}function yu(o){return 64===o.charCodeAt(0)}function Wa(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?u=f:0===u||Cc(o,u,f,null,-1===u||2===u?a[++d]:null)}}return o}function Cc(o,a,u,d,f){let p=0,v=o.length;if(-1===a)v=-1;else for(;p<o.length;){const C=o[p++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=p-1;break}}}for(;p<o.length;){const C=o[p];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==f&&(o[p+1]=f));if(d===o[p+1])return void(o[p+2]=f)}p++,null!==d&&p++,null!==f&&p++}-1!==v&&(o.splice(v,0,a),p=v+1),o.splice(p++,0,u),null!==d&&o.splice(p++,0,d),null!==f&&o.splice(p++,0,f)}function yh(o){return-1!==o}function si(o){return 32767&o}function ks(o,a){let u=function vh(o){return o>>16}(o),d=a;for(;u>0;)d=d[15],u--;return d}let vu=!0;function za(o){const a=vu;return vu=o,a}let Ic=0;const Xi={};function us(o,a){const u=Sl(o,a);if(-1!==u)return u;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,wu(d.data,o),wu(a,null),wu(d.blueprint,null));const f=qa(o,a),p=o.injectorIndex;if(yh(f)){const v=si(f),C=ks(f,a),b=C[1].data;for(let A=0;A<8;A++)a[p+A]=C[v+A]|b[v+A]}return a[p+8]=f,p}function wu(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Sl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function qa(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=a;for(;null!==f;){if(d=oa(f),null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function co(o,a,u){!function Ec(o,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Sn)&&(d=u[Sn]),null==d&&(d=u[Sn]=Ic++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function ea(o,a,u){if(u&nt.Optional||void 0!==o)return o;Re()}function ta(o,a,u,d){if(u&nt.Optional&&void 0===d&&(d=null),0==(u&(nt.Self|nt.Host))){const f=o[9],p=vn(void 0);try{return f?f.get(a,d,u&nt.Optional):hi(a,d,u&nt.Optional)}finally{vn(p)}}return ea(d,0,u)}function na(o,a,u,d=nt.Default,f){if(null!==o){if(1024&a[2]){const v=function Ih(o,a,u,d,f){let p=o,v=a;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=bc(p,v,u,d|nt.Self,Xi);if(C!==Xi)return C;let b=p.parent;if(!b){const A=v[21];if(A){const k=A.get(u,Xi,d);if(k!==Xi)return k}b=oa(v),v=v[15]}p=b}return f}(o,a,u,d,Xi);if(v!==Xi)return v}const p=bc(o,a,u,d,Xi);if(p!==Xi)return p}return ta(a,u,d,f)}function bc(o,a,u,d,f){const p=function Ch(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Sn)?o[Sn]:void 0;return"number"==typeof a?a>=0?255&a:Cu:a}(u);if("function"==typeof p){if(!pc(a,o,d))return d&nt.Host?ea(f,0,d):ta(a,u,d,f);try{const v=p(d);if(null!=v||d&nt.Optional)return v;Re()}finally{gc()}}else if("number"==typeof p){let v=null,C=Sl(o,a),b=-1,A=d&nt.Host?a[16][6]:null;for((-1===C||d&nt.SkipSelf)&&(b=-1===C?qa(o,a):a[C+8],-1!==b&&xl(d,!1)?(v=a[1],C=si(b),a=ks(b,a)):C=-1);-1!==C;){const k=a[1];if(ia(p,C,k.data)){const P=Al(C,a,u,v,d,A);if(P!==Xi)return P}b=a[C+8],-1!==b&&xl(d,a[1].data[C+8]===A)&&ia(p,C,a)?(v=k,C=si(b),a=ks(b,a)):C=-1}}return f}function Al(o,a,u,d,f,p){const v=a[1],C=v.data[o+8],k=Ka(C,v,u,null==d?ru(C)&&vu:d!=v&&0!=(3&C.type),f&nt.Host&&p===C);return null!==k?$r(a,v,k,C):Xi}function Ka(o,a,u,d,f){const p=o.providerIndexes,v=a.data,C=1048575&p,b=o.directiveStart,k=p>>20,K=f?C+k:o.directiveEnd;for(let Q=d?C:C+k;Q<K;Q++){const Te=v[Q];if(Q<b&&u===Te||Q>=b&&Te.type===u)return Q}if(f){const Q=v[b];if(Q&&Yi(Q)&&Q.type===u)return b}return null}function $r(o,a,u,d){let f=o[u];const p=a.data;if(function _u(o){return o instanceof hr}(f)){const v=f;v.resolving&&function it(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Se(-200,`Circular dependency in DI detected for ${o}${u}`)}(function _e(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ee(o)}(p[u]));const C=za(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?vn(v.injectImpl):null;pc(o,d,nt.Default);try{f=o[u]=v.factory(void 0,p,o,d),a.firstCreatePass&&u>=d.directiveStart&&function mu(o,a,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:p}=a.type.prototype;if(d){const v=lc(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,p))}(u,p[u],a)}finally{null!==b&&vn(b),za(C),v.resolving=!1,gc()}}return f}function ia(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function xl(o,a){return!(o&nt.Self||o&nt.Host&&a)}class ra{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return na(this._tNode,this._lView,a,d,u)}}function Cu(){return new ra(ii(),Ne())}function Os(o){return wn(()=>{const a=o.prototype.constructor,u=a[li]||sa(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const p=f[li]||sa(f);if(p&&p!==u)return p;f=Object.getPrototypeOf(f)}return p=>new p})}function sa(o){return Ge(o)?()=>{const a=sa(X(o));return a&&a()}:Ci(o)}function oa(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Ml(o){return function Za(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const p=u[f];if($a(p))break;if(0===p)f+=2;else if("number"==typeof p)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(p===a)return u[f+1];f+=2}}}return null}(ii(),o)}const aa="__parameters__";function ua(o,a,u){return wn(()=>{const d=function Iu(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(a);function f(...p){if(this instanceof f)return d.apply(this,p),this;const v=new f(...p);return C.annotation=v,C;function C(b,A,k){const P=b.hasOwnProperty(aa)?b[aa]:Object.defineProperty(b,aa,{value:[]})[aa];for(;P.length<=k;)P.push(null);return(P[k]=P[k]||[]).push(v),b}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Tn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Dn(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let d=o[u];Array.isArray(d)?(a===o&&(a=o.slice(0,u)),Dn(d,a)):a!==o&&a.push(d)}return a}function cs(o,a){o.forEach(u=>Array.isArray(u)?cs(u,a):a(u))}function fo(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function pi(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function po(o,a){const u=[];for(let d=0;d<o;d++)u.push(a);return u}function dt(o,a,u){let d=qr(o,a);return d>=0?o[1|d]=u:(d=~d,function Th(o,a,u,d){let f=o.length;if(f==a)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=d}}(o,d,a,u)),d}function Ya(o,a){const u=qr(o,a);if(u>=0)return o[1|u]}function qr(o,a){return function Qa(o,a,u){let d=0,f=o.length>>u;for(;f!==d;){const p=d+(f-d>>1),v=o[p<<u];if(a===v)return p<<u;v>a?f=p:d=p+1}return~(f<<u)}(o,a,1)}const _o={},bu="__NG_DI_FLAG__",Rs="ngTempTokenPath",ds=/\n/gm,Qn="__source";let yo;function hs(o){const a=yo;return yo=o,a}function $n(o,a=nt.Default){if(void 0===yo)throw new Se(-203,!1);return null===yo?hi(o,void 0,a):yo.get(o,a&nt.Optional?null:void 0,a)}function An(o,a=nt.Default){return(function qn(){return ti}()||$n)(X(o),a)}function T(o,a=nt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),An(o,a)}function S(o){const a=[];for(let u=0;u<o.length;u++){const d=X(o[u]);if(Array.isArray(d)){if(0===d.length)throw new Se(900,!1);let f,p=nt.Default;for(let v=0;v<d.length;v++){const C=d[v],b=H(C);"number"==typeof b?-1===b?f=C.token:p|=b:f=C}a.push(An(f,p))}else a.push(An(d))}return a}function O(o,a){return o[bu]=a,o.prototype[bu]=a,o}function H(o){return o[bu]}const Be=O(ua("Optional"),8),Mt=O(ua("SkipSelf"),4);let Mh,Tu,kc;function Sp(o){Mh=o}function Co(o){return function Mc(){if(void 0===Tu&&(Tu=null,Ot.trustedTypes))try{Tu=Ot.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Tu}()?.createHTML(o)||o}function Ap(o){return function Io(){if(void 0===kc&&(kc=null,Ot.trustedTypes))try{kc=Ot.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return kc}()?.createHTML(o)||o}class xp{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Fs(o){return o instanceof xp?o.changingThisBreaksApplicationSecurity:o}function Eo(o,a){const u=function Nh(o){return o instanceof xp&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}class l_{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Co(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class U0{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Co(a),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Co(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const v=u.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function _(o){return(o=String(o)).match(m)?o:"unsafe:"+o}function I(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function M(...o){const a={};for(const u of o)for(const d in u)u.hasOwnProperty(d)&&(a[d]=!0);return a}const F=I("area,br,col,hr,img,wbr"),re=I("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ke=I("rp,rt"),fn=M(F,M(re,I("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),M(ke,I("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),M(ke,re)),ji=I("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nc=M(ji,I("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),I("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Pc=I("script,style,template");class tl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!fn.hasOwnProperty(u))return this.sanitizedSomething=!0,!Pc.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=a.attributes;for(let f=0;f<d.length;f++){const p=d.item(f),v=p.name,C=v.toLowerCase();if(!Nc.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let b=p.value;ji[C]&&(b=_(b)),this.buf.push(" ",v,'="',Fc(b),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();fn.hasOwnProperty(u)&&!F.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(Fc(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Mp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Lh=/([^\#-~ |!])/g;function Fc(o){return o.replace(/&/g,"&amp;").replace(Mp,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Lh,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Au;function ga(o){return"content"in o&&function u_(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Pn=(()=>((Pn=Pn||{})[Pn.NONE=0]="NONE",Pn[Pn.HTML=1]="HTML",Pn[Pn.STYLE=2]="STYLE",Pn[Pn.SCRIPT=3]="SCRIPT",Pn[Pn.URL=4]="URL",Pn[Pn.RESOURCE_URL=5]="RESOURCE_URL",Pn))();function kp(o){const a=Vh();return a?Ap(a.sanitize(Pn.HTML,o)||""):Eo(o,"HTML")?Ap(Fs(o)):function xu(o,a){let u=null;try{Au=Au||function Fh(o){const a=new U0(o);return function w(){try{return!!(new window.DOMParser).parseFromString(Co(""),"text/html")}catch{return!1}}()?new l_(a):a}(o);let d=a?String(a):"";u=Au.getInertBodyElement(d);let f=5,p=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=p,p=u.innerHTML,u=Au.getInertBodyElement(d)}while(d!==p);return Co((new tl).sanitizeChildren(ga(u)||u))}finally{if(u){const d=ga(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}(function xc(){return void 0!==Mh?Mh:typeof document<"u"?document:void 0}(),Ee(o))}function Op(o){const a=Vh();return a?a.sanitize(Pn.URL,o)||"":Eo(o,"URL")?Fs(o):_(Ee(o))}function Vh(){const o=Ne();return o&&o[12]}const d_=new Tn("ENVIRONMENT_INITIALIZER"),j0=new Tn("INJECTOR",-1),G0=new Tn("INJECTOR_DEF_TYPES");class $0{get(a,u=_o){if(u===_o){const d=new Error(`NullInjectorError: No provider for ${fe(a)}!`);throw d.name="NullInjectorError",d}return u}}function tS(...o){return{\u0275providers:W0(0,o)}}function W0(o,...a){const u=[],d=new Set;let f;return cs(a,p=>{const v=p;Np(v,u,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&z0(f,u),u}function z0(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];cs(f,p=>{a.push(p)})}}function Np(o,a,u,d){if(!(o=X(o)))return!1;let f=null,p=Br(o);const v=!p&&R(o);if(p||v){if(v&&!v.standalone)return!1;f=o}else{const b=o.ngModule;if(p=Br(b),!p)return!1;f=b}const C=d.has(f);if(v){if(C)return!1;if(d.add(f),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of b)Np(A,a,u,d)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let A;d.add(f);try{cs(p.imports,k=>{Np(k,a,u,d)&&(A||(A=[]),A.push(k))})}finally{}void 0!==A&&z0(A,a)}if(!C){const A=Ci(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:xt},{provide:G0,useValue:f,multi:!0},{provide:d_,useValue:()=>An(f),multi:!0})}const b=p.providers;null==b||C||cs(b,k=>{a.push(k)})}}return f!==o&&void 0!==o.providers}const q0=ye({provide:String,useValue:ye});function Uh(o){return null!==o&&"object"==typeof o&&q0 in o}function Ls(o){return"function"==typeof o}const Fp=new Tn("Set Injector scope."),Lp={},Fl={};let Vp;function Up(){return void 0===Vp&&(Vp=new $0),Vp}class ya{}class h_ extends ya{constructor(a,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hp(a,v=>this.processProvider(v)),this.records.set(j0,Lc(void 0,this)),f.has("environment")&&this.records.set(ya,Lc(void 0,this));const p=this.records.get(Fp);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(G0.multi,xt,nt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=hs(this),d=vn(void 0);try{return a()}finally{hs(u),vn(d)}}get(a,u=_o,d=nt.Default){this.assertNotDestroyed();const f=hs(this),p=vn(void 0);try{if(!(d&nt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const b=function iS(o){return"function"==typeof o||"object"==typeof o&&o instanceof Tn}(a)&&wi(a);C=b&&this.injectableDefInScope(b)?Lc(Bh(a),Lp):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&nt.Self?Up():this.parent).get(a,u=d&nt.Optional&&u===_o?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Rs]=v[Rs]||[]).unshift(fe(a)),f)throw v;return function ee(o,a,u,d){const f=o[Rs];throw a[Qn]&&f.unshift(a[Qn]),o.message=function le(o,a,u,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=fe(a);if(Array.isArray(a))f=a.map(fe).join(" -> ");else if("object"==typeof a){let p=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):fe(C)))}f=`{${p.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(ds,"\n  ")}`}("\n"+o.message,f,u,d),o.ngTokenPath=f,o[Rs]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{vn(p),hs(f)}}resolveInjectorInitializers(){const a=hs(this),u=vn(void 0);try{const d=this.get(d_.multi,xt,nt.Self);for(const f of d)f()}finally{hs(a),vn(u)}}toString(){const a=[],u=this.records;for(const d of u.keys())a.push(fe(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(a){let u=Ls(a=X(a))?a:X(a&&a.provide);const d=function f_(o){return Uh(o)?Lc(void 0,o.useValue):Lc(Bp(o),Lp)}(a);if(Ls(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Lc(void 0,Lp,!0),f.factory=()=>S(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,d)}hydrate(a,u){return u.value===Lp&&(u.value=Fl,u.value=u.factory()),"object"==typeof u.value&&u.value&&function nS(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=X(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Bh(o){const a=wi(o),u=null!==a?a.factory:Ci(o);if(null!==u)return u;if(o instanceof Tn)throw new Se(204,!1);if(o instanceof Function)return function K0(o){const a=o.length;if(a>0)throw po(a,"?"),new Se(204,!1);const u=function On(o){const a=o&&(o[Fi]||o[Ir]);if(a){const u=function Ur(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Se(204,!1)}function Bp(o,a,u){let d;if(Ls(o)){const f=X(o);return Ci(f)||Bh(f)}if(Uh(o))d=()=>X(o.useValue);else if(function _a(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...S(o.deps||[]));else if(function Pp(o){return!(!o||!o.useExisting)}(o))d=()=>An(X(o.useExisting));else{const f=X(o&&(o.useClass||o.provide));if(!function Hh(o){return!!o.deps}(o))return Ci(f)||Bh(f);d=()=>new f(...S(o.deps))}return d}function Lc(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function p_(o){return!!o.\u0275providers}function Hp(o,a){for(const u of o)Array.isArray(u)?Hp(u,a):p_(u)?Hp(u.\u0275providers,a):a(u)}class g_{}class Gp{resolveComponentFactory(a){throw function Q0(o){const a=Error(`No component factory found for ${fe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let ku=(()=>{class o{}return o.NULL=new Gp,o})();function rS(){return Vc(ii(),Ne())}function Vc(o,a){return new Ou(Ii(o,a))}let Ou=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=rS,o})();function X0(o){return o instanceof Ou?o.nativeElement:o}class sS{}let UR=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function BR(){const o=Ne(),u=on(ii().index,o);return(ni(u)?u:o)[11]}(),o})(),m_=(()=>{class o{}return o.\u0275prov=nn({token:o,providedIn:"root",factory:()=>null}),o})();class eC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const tC=new eC("14.2.10"),__={};function E_(o){return o.ngOriginalError}class $h{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&E_(a);for(;u&&E_(u);)u=E_(u);return u||null}}const b_=new Map;let hS=0;const Kp="__ngContext__";function Gi(o,a){ni(a)?(o[Kp]=a[20],function pS(o){b_.set(o[20],o)}(a)):o[Kp]=a}function nl(o){return o instanceof Function?o():o}var va=(()=>((va=va||{})[va.Important=1]="Important",va[va.DashCase=2]="DashCase",va))();function x_(o,a){return undefined(o,a)}function Gc(o){const a=o[3];return lr(a)?a[3]:a}function Jp(o){return fC(o[13])}function Xp(o){return fC(o[4])}function fC(o){for(;null!==o&&!lr(o);)o=o[4];return o}function $c(o,a,u,d,f){if(null!=d){let p,v=!1;lr(d)?p=d:ni(d)&&(v=!0,d=d[0]);const C=Rn(d);0===o&&null!==u?null==f?wC(a,u,C):wa(a,u,C,f||null,!0):1===o&&null!==u?wa(a,u,C,f||null,!0):2===o?function AS(o,a,u){const d=ng(o,a);d&&function SS(o,a,u,d){o.removeChild(a,u,d)}(o,d,a,u)}(a,C,v):3===o&&a.destroyNode(C),null!=p&&function YR(o,a,u,d,f){const p=u[7];p!==Rn(u)&&$c(a,o,d,p,f);for(let C=10;C<u.length;C++){const b=u[C];Ru(b[1],b,o,a,d,p)}}(a,o,p,u,f)}}function eg(o,a,u){return o.createElement(a,u)}function _C(o,a){const u=o[9],d=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Hn(f,-1)),u.splice(d,1)}function R_(o,a){if(o.length<=10)return;const u=10+a,d=o[u];if(d){const f=d[17];null!==f&&f!==o&&_C(f,d),a>0&&(o[u-1][4]=d[4]);const p=pi(o,10+a);!function O_(o,a){Ru(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=p[19];null!==v&&v.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function qh(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&Ru(o,a,u,3,null,null),function ZR(o){let a=o[13];if(!a)return tg(o[1],o);for(;a;){let u=null;if(ni(a))u=a[13];else{const d=a[10];d&&(u=d)}if(!u){for(;a&&!a[4]&&a!==o;)ni(a)&&tg(a[1],a),a=a[3];null===a&&(a=o),ni(a)&&tg(a[1],a),u=a&&a[4]}a=u}}(a)}}function tg(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function P_(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=a[u[d]];if(!(f instanceof hr)){const p=u[d+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=f[p[v]],b=p[v+1];try{b.call(C)}finally{}}else try{p.call(f)}finally{}}}}(o,a),function N_(o,a){const u=o.cleanup,d=a[7];let f=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],C="function"==typeof v?v(a):Rn(a[v]),b=d[f=u[p+2]],A=u[p+3];"boolean"==typeof A?C.removeEventListener(u[p],b,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),p+=2}else{const v=d[f=u[p+1]];u[p].call(v)}if(null!==d){for(let p=f+1;p<d.length;p++)(0,d[p])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&lr(a[3])){u!==a[3]&&_C(u,a);const d=a[19];null!==d&&d.detachView(o)}!function gS(o){b_.delete(o[20])}(a)}}function yC(o,a,u){return function vC(o,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Ct.None||f===Ct.Emulated)return null}return Ii(d,u)}(o,a.parent,u)}function wa(o,a,u,d,f){o.insertBefore(a,u,d,f)}function wC(o,a,u){o.appendChild(a,u)}function CC(o,a,u,d,f){null!==d?wa(o,a,u,d,f):wC(o,a,u)}function ng(o,a){return o.parentNode(a)}function Ei(o,a,u){return F_(o,a,u)}let F_=function EC(o,a,u){return 40&o.type?Ii(o,u):null};function rg(o,a,u,d){const f=yC(o,d,a),p=a[11],C=Ei(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(u))for(let b=0;b<u.length;b++)CC(p,f,u[b],C,!1);else CC(p,f,u,C,!1)}function sg(o,a){if(null!==a){const u=a.type;if(3&u)return Ii(a,o);if(4&u)return bC(-1,o[a.index]);if(8&u){const d=a.child;if(null!==d)return sg(o,d);{const f=o[a.index];return lr(f)?bC(-1,f):Rn(f)}}if(32&u)return x_(a,o)()||Rn(o[a.index]);{const d=L_(o,a);return null!==d?Array.isArray(d)?d[0]:sg(Gc(o[16]),d):sg(o,a.next)}}return null}function L_(o,a){return null!==a?o[16][6].projection[a.projection]:null}function bC(o,a){const u=10+o+1;if(u<a.length){const d=a[u],f=d[1].firstChild;if(null!==f)return sg(d,f)}return a[7]}function V_(o,a,u,d,f,p,v){for(;null!=u;){const C=d[u.index],b=u.type;if(v&&0===a&&(C&&Gi(Rn(C),d),u.flags|=4),64!=(64&u.flags))if(8&b)V_(o,a,u.child,d,f,p,!1),$c(a,o,f,C,p);else if(32&b){const A=x_(u,d);let k;for(;k=A();)$c(a,o,f,k,p);$c(a,o,f,C,p)}else 16&b?Zh(o,a,d,u,f,p):$c(a,o,f,C,p);u=v?u.projectionNext:u.next}}function Ru(o,a,u,d,f,p){V_(u,d,o.firstChild,a,f,p,!1)}function Zh(o,a,u,d,f,p){const v=u[16],b=v[6].projection[d.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)$c(a,o,f,b[A],p);else V_(o,a,b,v[3],f,p,!0)}function Nu(o,a,u){o.setAttribute(a,"style",u)}function Kh(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function xS(o,a,u){let d=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const p=a.length;if(f+p===d||o.charCodeAt(f+p)<=32)return f}u=f+1}}const U_="ng-template";function B_(o,a,u){let d=0;for(;d<o.length;){let f=o[d++];if(u&&"class"===f){if(f=o[d],-1!==xS(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function SC(o){return 4===o.type&&o.value!==U_}function kS(o,a,u){return a===(4!==o.type||u?o.value:U_)}function OS(o,a,u){let d=4;const f=o.attrs||[],p=function QR(o){for(let a=0;a<o.length;a++)if($a(o[a]))return a;return o.length}(f);let v=!1;for(let C=0;C<a.length;C++){const b=a[C];if("number"!=typeof b){if(!v)if(4&d){if(d=2|1&d,""!==b&&!kS(o,b,u)||""===b&&1===a.length){if(Us(d))return!1;v=!0}}else{const A=8&d?b:a[++C];if(8&d&&null!==o.attrs){if(!B_(o.attrs,A,u)){if(Us(d))return!1;v=!0}continue}const P=RS(8&d?"class":b,f,SC(o),u);if(-1===P){if(Us(d))return!1;v=!0;continue}if(""!==A){let K;K=P>p?"":f[P+1].toLowerCase();const Q=8&d?K:null;if(Q&&-1!==xS(Q,A,0)||2&d&&A!==K){if(Us(d))return!1;v=!0}}}}else{if(!v&&!Us(d)&&!Us(b))return!1;if(v&&Us(b))continue;v=!1,d=b|1&d}}return Us(d)||v}function Us(o){return 0==(1&o)}function RS(o,a,u,d){if(null===a)return-1;let f=0;if(d||!u){let p=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=p?1:2}return-1}return function AC(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,o)}function NS(o,a,u=!1){for(let d=0;d<a.length;d++)if(OS(o,a[d],u))return!0;return!1}function PS(o,a){e:for(let u=0;u<a.length;u++){const d=a[u];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function xC(o,a){return o?":not("+a.trim()+")":a}function MC(o){let a=o[0],u=1,d=2,f="",p=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&d){const C=o[++u];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Us(v)&&(a+=xC(p,f),f=""),d=v,p=p||!Us(d);u++}return""!==f&&(a+=xC(p,f)),a}const Gt={};function kC(o){OC(Zt(),Ne(),xn()+o,!1)}function OC(o,a,u,d){if(!d)if(3==(3&a[2])){const p=o.preOrderCheckHooks;null!==p&&Yo(a,p,u)}else{const p=o.preOrderHooks;null!==p&&Qo(a,p,0,u)}as(u)}function ag(o,a=null,u=null,d){const f=Yh(o,a,u,d);return f.resolveInjectorInitializers(),f}function Yh(o,a=null,u=null,d,f=new Set){const p=[u||xt,tS(o)];return d=d||("object"==typeof o?void 0:fe(o)),new h_(p,a||Up(),d||null,f)}let Pu=(()=>{class o{static create(u,d){if(Array.isArray(u))return ag({name:""},d,u,"");{const f=u.name??"";return ag({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=_o,o.NULL=new $0,o.\u0275prov=nn({token:o,providedIn:"any",factory:()=>An(j0)}),o.__NG_ELEMENT_ID__=-1,o})();function il(o,a=nt.Default){const u=Ne();return null===u?An(o,a):na(ii(),u,X(o),a)}function cg(){throw new Error("invalid")}function dg(o,a){return o<<17|a<<2}function To(o){return o>>17&32767}function z_(o){return 2|o}function rl(o){return(131068&o)>>2}function q_(o,a){return-131069&o|a<<2}function qc(o){return 1|o}function iy(o,a){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],p=u[d+1];if(-1!==p){const v=o.data[p];hu(f),v.contentQueries(2,a[p],p)}}}function _g(o,a,u,d,f,p,v,C,b,A,k){const P=a.blueprint.slice();return P[0]=f,P[2]=76|d,(null!==k||o&&1024&o[2])&&(P[2]|=1024),Ra(P),P[3]=P[15]=o,P[8]=u,P[10]=v||o&&o[10],P[11]=C||o&&o[11],P[12]=b||o&&o[12]||null,P[9]=A||o&&o[9]||null,P[6]=p,P[20]=function fS(){return hS++}(),P[21]=k,P[16]=2==a.type?o[16]:P,P}function Jc(o,a,u,d,f){let p=o.data[a];if(null===p)p=function ry(o,a,u,d,f){const p=zo(),v=Cl(),b=o.data[a]=function YC(o,a,u,d,f,p){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,a,d,f);return null===o.firstChild&&(o.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(o,a,u,d,f),function hc(){return Pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=d,p.attrs=f;const v=function wl(){const o=Pt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Bi(p,!0),p}function Xc(o,a,u,d){if(0===u)return-1;const f=a.length;for(let p=0;p<u;p++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function sy(o,a,u){Ko(a);try{const d=o.viewQuery;null!==d&&rf(1,d,u);const f=o.template;null!==f&&ZC(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&iy(o,a),o.staticViewQueries&&rf(2,o.viewQuery,u);const p=o.components;null!==p&&function tA(o,a){for(let u=0;u<a.length;u++)py(o,a[u])}(a,p)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,xs()}}function yg(o,a,u,d){const f=a[2];if(128!=(128&f)){Ko(a);try{Ra(a),function Ua(o){return Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&ZC(o,a,u,2,d);const v=3==(3&f);if(v){const A=o.preOrderCheckHooks;null!==A&&Yo(a,A,null)}else{const A=o.preOrderHooks;null!==A&&Qo(a,A,0,null),yc(a,0)}if(function CN(o){for(let a=Jp(o);null!==a;a=Xp(a)){if(!a[2])continue;const u=a[9];for(let d=0;d<u.length;d++){const f=u[d],p=f[3];0==(512&f[2])&&Hn(p,1),f[2]|=512}}}(a),function wN(o){for(let a=Jp(o);null!==a;a=Xp(a))for(let u=10;u<a.length;u++){const d=a[u],f=d[1];As(d)&&yg(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&iy(o,a),v){const A=o.contentCheckHooks;null!==A&&Yo(a,A)}else{const A=o.contentHooks;null!==A&&Qo(a,A,1),yc(a,1)}!function Qc(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)as(~f);else{const p=f,v=u[++d],C=u[++d];fc(v,p),C(2,a[p])}}}finally{as(-1)}}(o,a);const C=o.components;null!==C&&function eA(o,a){for(let u=0;u<a.length;u++)Eg(o,a[u])}(a,C);const b=o.viewQuery;if(null!==b&&rf(2,b,d),v){const A=o.viewCheckHooks;null!==A&&Yo(a,A)}else{const A=o.viewHooks;null!==A&&Qo(a,A,2),yc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Hn(a[3],-1))}finally{xs()}}}function ZC(o,a,u,d,f){const p=xn(),v=2&d;try{as(-1),v&&a.length>22&&OC(o,a,22,!1),u(d,f)}finally{as(p)}}function tf(o,a,u){if(Fo(a)){const f=a.directiveEnd;for(let p=a.directiveStart;p<f;p++){const v=o.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}function vg(o,a,u){!lo()||(function JC(o,a,u,d){const f=u.directiveStart,p=u.directiveEnd;o.firstCreatePass||us(u,a),Gi(d,a);const v=u.initialInputs;for(let C=f;C<p;C++){const b=o.data[C],A=Yi(b);A&&aA(a,u,b);const k=$r(a,o,C,u);Gi(k,a),null!==v&&lA(0,C-f,k,b,0,v),A&&(on(u.index,a)[8]=k)}}(o,a,u,Ii(u,a)),128==(128&u.flags)&&function hy(o,a,u){const d=u.directiveStart,f=u.directiveEnd,p=u.index,v=function fh(){return Pt.lFrame.currentDirectiveIndex}();try{as(p);for(let C=d;C<f;C++){const b=o.data[C],A=a[C];Zo(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&ed(b,A)}}finally{as(-1),Zo(v)}}(o,a,u))}function wg(o,a,u=Ii){const d=a.localNames;if(null!==d){let f=a.index+1;for(let p=0;p<d.length;p+=2){const v=d[p+1],C=-1===v?u(a,o):o[v];o[f++]=C}}}function Cg(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=oy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function oy(o,a,u,d,f,p,v,C,b,A){const k=22+d,P=k+f,K=function nA(o,a){const u=[];for(let d=0;d<a;d++)u.push(d<o?null:Gt);return u}(k,P),Q="function"==typeof A?A():A;return K[1]={type:o,blueprint:K,template:u,queries:null,viewQuery:C,declTNode:a,data:K.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function ay(o,a,u,d){const f=nI(a);null===u?f.push(d):(f.push(u),o.firstCreatePass&&id(o).push(d,f.length-1))}function ly(o,a,u){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(a,f):u[d]=[a,f]}return u}function uy(o,a){const d=a.directiveEnd,f=o.data,p=a.attrs,v=[];let C=null,b=null;for(let A=a.directiveStart;A<d;A++){const k=f[A],P=k.inputs,K=null===p||SC(a)?null:vN(P,p);v.push(K),C=ly(P,A,C),b=ly(k.outputs,A,b)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=C,a.outputs=b}function ps(o,a,u,d,f,p,v,C){const b=Ii(a,u);let k,A=a.inputs;!C&&null!=A&&(k=A[d])?(iI(o,u,k,d,f),ru(a)&&iA(u,a.index)):3&a.type&&(d=function pN(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,p.setProperty(b,d,f))}function iA(o,a){const u=on(a,o);16&u[2]||(u[2]|=32)}function cy(o,a,u,d){let f=!1;if(lo()){const p=function _N(o,a,u){const d=o.directiveRegistry;let f=null;if(d)for(let p=0;p<d.length;p++){const v=d[p];NS(u,v.selectors,!1)&&(f||(f=[]),co(us(u,a),o,v.type),Yi(v)?(Ig(o,u),f.unshift(v)):f.push(v))}return f}(o,a,u),v=null===d?null:{"":-1};if(null!==p){f=!0,oA(u,o.data.length,p.length);for(let k=0;k<p.length;k++){const P=p[k];P.providersResolver&&P.providersResolver(P)}let C=!1,b=!1,A=Xc(o,a,p.length,null);for(let k=0;k<p.length;k++){const P=p[k];u.mergedAttrs=Wa(u.mergedAttrs,P.hostAttrs),XC(o,u,a,A,P),sA(A,P,v),null!==P.contentQueries&&(u.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=128);const K=P.type.prototype;!C&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!b&&(K.ngOnChanges||K.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),b=!0),A++}uy(o,u)}v&&function yN(o,a,u){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const p=u[a[f+1]];if(null==p)throw new Se(-301,!1);d.push(a[f],p)}}}(u,d,v)}return u.mergedAttrs=Wa(u.mergedAttrs,u.attrs),f}function dy(o,a,u,d,f,p){const v=p.hostBindings;if(v){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const b=~a.index;(function rA(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=b&&C.push(b),C.push(d,f,v)}}function ed(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Ig(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function sA(o,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=o;Yi(a)&&(u[""]=o)}}function oA(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function XC(o,a,u,d,f){o.data[d]=f;const p=f.factory||(f.factory=Ci(f.type)),v=new hr(p,Yi(f),il);o.blueprint[d]=v,u[d]=v,dy(o,a,0,d,Xc(o,u,f.hostVars,Gt),f)}function aA(o,a,u){const d=Ii(a,o),f=Cg(u),p=o[10],v=td(o,_g(o,f,null,u.onPush?32:16,d,a,p,p.createRenderer(d,u),null,null,null));o[a.index]=v}function ol(o,a,u,d,f,p){const v=Ii(o,a);!function eI(o,a,u,d,f,p,v){if(null==p)o.removeAttribute(a,f,u);else{const C=null==v?Ee(p):v(p,d||"",f);o.setAttribute(a,f,C,u)}}(a[11],v,p,o.value,u,d,f)}function lA(o,a,u,d,f,p){const v=p[a];if(null!==v){const C=d.setInput;for(let b=0;b<v.length;){const A=v[b++],k=v[b++],P=v[b++];null!==C?d.setInput(u,P,A,k):u[k]=P}}}function vN(o,a){let u=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return u}function uA(o,a,u,d){return new Array(o,!0,!1,a,null,0,d,u,null,null)}function Eg(o,a){const u=on(a,o);if(As(u)){const d=u[1];48&u[2]?yg(d,u,d.template,u[8]):u[5]>0&&fy(u)}}function fy(o){for(let d=Jp(o);null!==d;d=Xp(d))for(let f=10;f<d.length;f++){const p=d[f];if(As(p))if(512&p[2]){const v=p[1];yg(v,p,v.template,p[8])}else p[5]>0&&fy(p)}const u=o[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=on(u[d],o);As(f)&&f[5]>0&&fy(f)}}function py(o,a){const u=on(a,o),d=u[1];(function gy(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(d,u),sy(d,u,u[8])}function td(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function nf(o){for(;o;){o[2]|=32;const a=Gc(o);if(su(o)&&!a)return o;o=a}return null}function nd(o,a,u,d=!0){const f=a[10];f.begin&&f.begin();try{yg(o,a,o.template,u)}catch(v){throw d&&dA(a,v),v}finally{f.end&&f.end()}}function rf(o,a,u){hu(0),a(o,u)}function nI(o){return o[7]||(o[7]=[])}function id(o){return o.cleanup||(o.cleanup=[])}function dA(o,a){const u=o[9],d=u?u.get($h,null):null;d&&d.handleError(a)}function iI(o,a,u,d,f){for(let p=0;p<u.length;){const v=u[p++],C=u[p++],b=a[v],A=o.data[v];null!==A.setInput?A.setInput(b,f,d,C):b[C]=f}}function Bs(o,a,u){const d=br(a,o);!function pC(o,a,u){o.setValue(a,u)}(o[11],d,u)}function gs(o,a,u){let d=u?o.styles:null,f=u?o.classes:null,p=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?p=C:1==p?f=we(f,C):2==p&&(d=we(d,C+": "+a[++v]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}function my(o,a,u,d,f=!1){for(;null!==u;){const p=a[u.index];if(null!==p&&d.push(Rn(p)),lr(p))for(let C=10;C<p.length;C++){const b=p[C],A=b[1].firstChild;null!==A&&my(b[1],b,A,d)}const v=u.type;if(8&v)my(o,a,u.child,d);else if(32&v){const C=x_(u,a);let b;for(;b=C();)d.push(b)}else if(16&v){const C=L_(a,u);if(Array.isArray(C))d.push(...C);else{const b=Gc(a[16]);my(b[1],b,C,d,!0)}}u=f?u.projectionNext:u.next}return d}class Tg{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return my(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(lr(a)){const u=a[8],d=u?u.indexOf(this):-1;d>-1&&(R_(a,d),pi(u,d))}this._attachedToViewContainer=!1}qh(this._lView[1],this._lView)}onDestroy(a){ay(this._lView[1],this._lView,null,a)}markForCheck(){nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){nd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mC(o,a){Ru(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=a}}class Hs extends Tg{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;nd(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class _y extends ku{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=R(a);return new Dg(u,this.ngModule)}}function hA(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class rI{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,d){const f=this.injector.get(a,__,d);return f!==__||u===__?f:this.parentInjector.get(a,u,d)}}class Dg extends g_{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function FS(o){return o.map(MC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return hA(this.componentDef.inputs)}get outputs(){return hA(this.componentDef.outputs)}create(a,u,d,f){let p=(f=f||this.ngModule)instanceof ya?f:f?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new rI(a,p):a,C=v.get(sS,null);if(null===C)throw new Se(407,!1);const b=v.get(m_,null),A=C.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",P=d?function KC(o,a,u){return o.selectRootElement(a,u===Ct.ShadowDom)}(A,d,this.componentDef.encapsulation):eg(A,k,function Ea(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(k)),K=this.componentDef.onPush?288:272,Q=oy(0,null,null,1,0,null,null,null,null,null),Te=_g(null,Q,null,K,null,null,C,A,b,v,null);let We,Ye;Ko(Te);try{const pt=function EN(o,a,u,d,f,p){const v=u[1];u[22]=o;const b=Jc(v,22,2,"#host",null),A=b.mergedAttrs=a.hostAttrs;null!==A&&(gs(b,A,!0),null!==o&&(ls(f,o,A),null!==b.classes&&Kh(f,o,b.classes),null!==b.styles&&Nu(f,o,b.styles)));const k=d.createRenderer(o,a),P=_g(u,Cg(a),null,a.onPush?32:16,u[22],b,d,k,p||null,null,null);return v.firstCreatePass&&(co(us(b,u),v,a.type),Ig(v,b),oA(b,u.length,1)),td(u,P),u[22]=P}(P,this.componentDef,Te,C,A);if(P)if(d)ls(A,P,["ng-version",tC.full]);else{const{attrs:Xe,classes:pe}=function LS(o){const a=[],u=[];let d=1,f=2;for(;d<o.length;){let p=o[d];if("string"==typeof p)2===f?""!==p&&a.push(p,o[++d]):8===f&&u.push(p);else{if(!Us(f))break;f=p}d++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Xe&&ls(A,P,Xe),pe&&pe.length>0&&Kh(A,P,pe.join(" "))}if(Ye=Go(Q,22),void 0!==u){const Xe=Ye.projection=[];for(let pe=0;pe<this.ngContentSelectors.length;pe++){const gt=u[pe];Xe.push(null!=gt?Array.from(gt):null)}}We=function bN(o,a,u,d){const f=u[1],p=function mN(o,a,u){const d=ii();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),XC(o,d,a,Xc(o,a,1,null),u),uy(o,d));const f=$r(a,o,d.directiveStart,d);Gi(f,a);const p=Ii(d,a);return p&&Gi(p,a),f}(f,u,a);if(o[8]=u[8]=p,null!==d)for(const C of d)C(p,a);if(a.contentQueries){const C=ii();a.contentQueries(1,p,C.directiveStart)}const v=ii();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(as(v.index),dy(u[1],v,0,v.directiveStart,v.directiveEnd,a),ed(a,p)),p}(pt,this.componentDef,Te,[TN]),sy(Q,Te,null)}finally{xs()}return new IN(this.componentType,We,Vc(Ye,Te),Te,Ye)}}class IN extends class Y0{}{constructor(a,u,d,f,p){super(),this.location=d,this._rootLView=f,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new Hs(f),this.componentType=a}setInput(a,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const p=this._rootLView;iI(p[1],p,f,a,u),iA(p,this._tNode.index)}}get injector(){return new ra(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function TN(){const o=ii();Il(Ne()[1],o)}function Sg(o){let a=function Cn(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;a;){let f;if(Yi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Se(903,!1);f=a.\u0275dir}if(f){if(u){d.push(f);const v=o;v.inputs=yy(o.inputs),v.declaredInputs=yy(o.declaredInputs),v.outputs=yy(o.outputs);const C=f.hostBindings;C&&DN(o,C);const b=f.viewQuery,A=f.contentQueries;if(b&&js(o,b),A&&aI(o,A),me(o.inputs,f.inputs),me(o.declaredInputs,f.declaredInputs),me(o.outputs,f.outputs),Yi(f)&&f.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const p=f.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(o),C===Sg&&(u=!1)}}a=Object.getPrototypeOf(a)}!function oI(o){let a=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Wa(f.hostAttrs,u=Wa(u,f.hostAttrs))}}(d)}function yy(o){return o===Ai?{}:o===xt?[]:o}function js(o,a){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{a(d,f),u(d,f)}:a}function aI(o,a){const u=o.contentQueries;o.contentQueries=u?(d,f,p)=>{a(d,f,p),u(d,f,p)}:a}function DN(o,a){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{a(d,f),u(d,f)}:a}let vy=null;function Fu(){if(!vy){const o=Ot.Symbol;if(o&&o.iterator)vy=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const d=a[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(vy=d)}}}return vy}function rd(o){return!!wy(o)&&(Array.isArray(o)||!(o instanceof Map)&&Fu()in o)}function wy(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ki(o,a,u){return o[a]=u}function Gs(o,a){return o[a]}function kn(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function od(o,a,u,d){const f=kn(o,a,u);return kn(o,a+1,d)||f}function Yr(o,a,u,d,f,p){const v=od(o,a,u,d);return od(o,a+2,f,p)||v}function ad(o,a,u,d){const f=Ne();return kn(f,Ba(),a)&&(Zt(),ol(Mn(),f,o,a,u,d)),ad}function ld(o,a,u,d){return kn(o,Ba(),u)?a+Ee(u)+d:Gt}function ud(o,a,u,d,f,p){const C=od(o,function Gr(){return Pt.lFrame.bindingIndex}(),u,f);return os(2),C?a+Ee(u)+d+Ee(f)+p:Gt}function _I(o,a,u,d,f,p,v,C){const b=Ne(),A=Zt(),k=o+22,P=A.firstCreatePass?function mA(o,a,u,d,f,p,v,C,b){const A=a.consts,k=Jc(a,o,4,v||null,dr(A,C));cy(a,u,k,dr(A,b)),Il(a,k);const P=k.tViews=oy(2,k,d,f,p,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,k),P.queries=a.queries.embeddedTView(k)),k}(k,A,b,a,u,d,f,p,v):A.data[k];Bi(P,!1);const K=b[11].createComment("");rg(A,b,K,P),Gi(K,b),td(b,b[k]=uA(K,b,K,P)),ka(P)&&vg(A,b,P),null!=v&&wg(b,P,C)}function yI(o){return function jr(o,a){return o[a]}(function Va(){return Pt.lFrame.contextLView}(),22+o)}function Cy(o,a,u){const d=Ne();return kn(d,Ba(),a)&&ps(Zt(),Mn(),d,o,a,d[11],u,!1),Cy}function Ag(o,a,u,d,f){const v=f?"class":"style";iI(o,u,a.inputs[v],v,d)}function md(o,a,u,d){const f=Ne(),p=Zt(),v=22+o,C=f[11],b=f[v]=eg(C,a,function gu(){return Pt.lFrame.currentNamespace}()),A=p.firstCreatePass?function Iy(o,a,u,d,f,p,v){const C=a.consts,A=Jc(a,o,2,f,dr(C,p));return cy(a,u,A,dr(C,v)),null!==A.attrs&&gs(A,A.attrs,!1),null!==A.mergedAttrs&&gs(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,p,f,0,a,u,d):p.data[v];Bi(A,!0);const k=A.mergedAttrs;null!==k&&ls(C,b,k);const P=A.classes;null!==P&&Kh(C,b,P);const K=A.styles;return null!==K&&Nu(C,b,K),64!=(64&A.flags)&&rg(p,f,b,A),0===function Pa(){return Pt.lFrame.elementDepthCount}()&&Gi(b,f),function dc(){Pt.lFrame.elementDepthCount++}(),ka(A)&&(vg(p,f,A),tf(p,A,f)),null!==d&&wg(f,A),md}function xg(){let o=ii();Cl()?qo():(o=o.parent,Bi(o,!1));const a=o;!function Fa(){Pt.lFrame.elementDepthCount--}();const u=Zt();return u.firstCreatePass&&(Il(u,o),Fo(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function bl(o){return 0!=(16&o.flags)}(a)&&Ag(u,a,Ne(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Tl(o){return 0!=(32&o.flags)}(a)&&Ag(u,a,Ne(),a.stylesWithoutHost,!1),xg}function vI(o,a,u,d){return md(o,a,u,d),xg(),vI}function Mg(o,a,u){const d=Ne(),f=Zt(),p=o+22,v=f.firstCreatePass?function yA(o,a,u,d,f){const p=a.consts,v=dr(p,d),C=Jc(a,o,8,"ng-container",v);return null!==v&&gs(C,v,!0),cy(a,u,C,dr(p,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(p,f,d,a,u):f.data[p];Bi(v,!0);const C=d[p]=d[11].createComment("");return rg(f,d,C,v),Gi(C,d),ka(v)&&(vg(f,d,v),tf(f,v,d)),null!=u&&wg(d,v),Mg}function Vl(){let o=ii();const a=Zt();return Cl()?qo():(o=o.parent,Bi(o,!1)),a.firstCreatePass&&(Il(a,o),Fo(o)&&a.queries.elementEnd(o)),Vl}function Ey(o,a,u){return Mg(o,a,u),Vl(),Ey}function wI(){return Ne()}function by(o){return!!o&&"function"==typeof o.then}function CI(o){return!!o&&"function"==typeof o.subscribe}const II=CI;function Ty(o,a,u,d){const f=Ne(),p=Zt(),v=ii();return function bI(o,a,u,d,f,p,v,C){const b=ka(d),k=o.firstCreatePass&&id(o),P=a[8],K=nI(a);let Q=!0;if(3&d.type||C){const Ye=Ii(d,a),pt=C?C(Ye):Ye,Xe=K.length,pe=C?yn=>C(Rn(yn[d.index])):d.index;let gt=null;if(!C&&b&&(gt=function vA(o,a,u,d){const f=o.cleanup;if(null!=f)for(let p=0;p<f.length-1;p+=2){const v=f[p];if(v===u&&f[p+1]===d){const C=a[7],b=f[p+2];return C.length>b?C[b]:null}"string"==typeof v&&(p+=2)}return null}(o,a,f,d.index)),null!==gt)(gt.__ngLastListenerFn__||gt).__ngNextListenerFn__=p,gt.__ngLastListenerFn__=p,Q=!1;else{p=DI(d,a,P,p,!1);const yn=u.listen(pt,f,p);K.push(p,yn),k&&k.push(f,pe,Xe,Xe+1)}}else p=DI(d,a,P,p,!1);const Te=d.outputs;let We;if(Q&&null!==Te&&(We=Te[f])){const Ye=We.length;if(Ye)for(let pt=0;pt<Ye;pt+=2){const Ln=a[We[pt]][We[pt+1]].subscribe(p),zi=K.length;K.push(p,Ln),k&&k.push(f,d.index,zi,-(zi+1))}}}(p,f,f[11],v,o,a,0,d),Ty}function TI(o,a,u,d){try{return!1!==u(d)}catch(f){return dA(o,f),!1}}function DI(o,a,u,d,f){return function p(v){if(v===Function)return d;nf(2&o.flags?on(o.index,a):a);let b=TI(a,0,d,v),A=p.__ngNextListenerFn__;for(;A;)b=TI(a,0,A,v)&&b,A=A.__ngNextListenerFn__;return f&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function SI(o=1){return function Ms(o){return(Pt.lFrame.contextLView=function mc(o,a){for(;o>0;)a=a[15],o--;return a}(o,Pt.lFrame.contextLView))[8]}(o)}function wA(o,a){let u=null;const d=function og(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const p=a[f];if("*"!==p){if(null===d?NS(o,p,!0):PS(d,p))return f}else u=f}return u}function AI(o){const a=Ne()[16][6];if(!a.projection){const d=a.projection=po(o?o.length:1,null),f=d.slice();let p=a.child;for(;null!==p;){const v=o?wA(p,o):0;null!==v&&(f[v]?f[v].projectionNext=p:d[v]=p,f[v]=p),p=p.next}}}function xI(o,a=0,u){const d=Ne(),f=Zt(),p=Jc(f,22+o,16,null,u||null);null===p.projection&&(p.projection=a),qo(),64!=(64&p.flags)&&function TC(o,a,u){Zh(a[11],0,a,u,yC(o,u,a),Ei(u.parent||a[6],u,a))}(f,d,p)}function Dy(o,a,u){return Sy(o,"",a,"",u),Dy}function Sy(o,a,u,d,f){const p=Ne(),v=ld(p,a,u,d);return v!==Gt&&ps(Zt(),Mn(),p,o,v,p[11],f,!1),Sy}function sf(o,a,u,d,f){const p=o[u+1],v=null===a;let C=d?To(p):rl(p),b=!1;for(;0!==C&&(!1===b||v);){const k=o[C+1];EA(o[C],a)&&(b=!0,o[C+1]=d?qc(k):z_(k)),C=d?To(k):rl(k)}b&&(o[u+1]=d?z_(p):qc(p))}function EA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&qr(o,a)>=0}const Fn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function My(o){return o.substring(Fn.key,Fn.keyEnd)}function mr(o){return o.substring(Fn.value,Fn.valueEnd)}function RI(o,a){const u=Fn.textEnd;return u===a?-1:(a=Fn.keyEnd=function NI(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Fn.key=a,u),Lu(o,a,u))}function ky(o,a){const u=Fn.textEnd;let d=Fn.key=Lu(o,a,u);return u===d?-1:(d=Fn.keyEnd=function PI(o,a,u){let d;for(;a<u&&(45===(d=o.charCodeAt(a))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)a++;return a}(o,d,u),d=Ry(o,d,u),d=Fn.value=Lu(o,d,u),d=Fn.valueEnd=function FI(o,a,u){let d=-1,f=-1,p=-1,v=a,C=v;for(;v<u;){const b=o.charCodeAt(v++);if(59===b)return C;34===b||39===b?C=v=Ny(o,b,v,u):a===v-4&&85===p&&82===f&&76===d&&40===b?C=v=Ny(o,41,v,u):b>32&&(C=v),p=f,f=d,d=-33&b}return C}(o,d,u),Ry(o,d,u))}function Oy(o){Fn.key=0,Fn.keyEnd=0,Fn.value=0,Fn.valueEnd=0,Fn.textEnd=o.length}function Lu(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function Ry(o,a,u,d){return(a=Lu(o,a,u))<u&&a++,a}function Ny(o,a,u,d){let f=-1,p=u;for(;p<d;){const v=o.charCodeAt(p++);if(v==a&&92!==f)return p;f=92==v&&92===f?0:v}throw new Error}function kg(o,a,u){return Ws(o,a,u,!1),kg}function Og(o,a){return Ws(o,a,null,!0),Og}function $s(o){ms(Vy,LI,o,!1)}function LI(o,a){for(let u=function ON(o){return Oy(o),ky(o,Lu(o,0,Fn.textEnd))}(a);u>=0;u=ky(a,u))Vy(o,My(a),mr(a))}function VI(o){ms(dt,Do,o,!0)}function Do(o,a){for(let u=function Bl(o){return Oy(o),RI(o,Lu(o,0,Fn.textEnd))}(a);u>=0;u=RI(a,u))dt(o,My(a),!0)}function Ws(o,a,u,d){const f=Ne(),p=Zt(),v=os(2);p.firstUpdatePass&&Rg(p,o,v,d),a!==Gt&&kn(f,v,a)&&ll(p,p.data[xn()],f,f[11],o,f[v+1]=function RN(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=fe(Fs(o)))),o}(a,u),d,v)}function ms(o,a,u,d){const f=Zt(),p=os(2);f.firstUpdatePass&&Rg(f,null,p,d);const v=Ne();if(u!==Gt&&kn(v,p,u)){const C=f.data[xn()];if(Hy(C,d)&&!Fy(f,p)){let b=d?C.classesWithoutHost:C.stylesWithoutHost;null!==b&&(u=we(b,u||"")),Ag(f,C,v,u,d)}else!function xr(o,a,u,d,f,p,v,C){f===Gt&&(f=xt);let b=0,A=0,k=0<f.length?f[0]:null,P=0<p.length?p[0]:null;for(;null!==k||null!==P;){const K=b<f.length?f[b+1]:void 0,Q=A<p.length?p[A+1]:void 0;let We,Te=null;k===P?(b+=2,A+=2,K!==Q&&(Te=P,We=Q)):null===P||null!==k&&k<P?(b+=2,Te=k):(A+=2,Te=P,We=Q),null!==Te&&ll(o,a,u,d,Te,We,v,C),k=b<f.length?f[b]:null,P=A<p.length?p[A]:null}}(f,C,v,v[11],v[p+1],v[p+1]=function jI(o,a,u){if(null==u||""===u)return xt;const d=[],f=Fs(u);if(Array.isArray(f))for(let p=0;p<f.length;p++)o(d,f[p],!0);else if("object"==typeof f)for(const p in f)f.hasOwnProperty(p)&&o(d,p,f[p]);else"string"==typeof f&&a(d,f);return d}(o,a,u),d,p)}}function Fy(o,a){return a>=o.expandoStartIndex}function Rg(o,a,u,d){const f=o.data;if(null===f[u+1]){const p=f[xn()],v=Fy(o,u);Hy(p,d)&&null===a&&!v&&(a=!1),a=function UI(o,a,u,d){const f=function du(o){const a=Pt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let p=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(u=vd(u=yd(null,o,a,u,d),a.attrs,d),p=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(u=yd(f,o,a,u,d),null===p){let b=function BI(o,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==rl(d))return o[To(d)]}(o,a,d);void 0!==b&&Array.isArray(b)&&(b=yd(null,o,a,b[1],d),b=vd(b,a.attrs,d),function HI(o,a,u,d){o[To(u?a.classBindings:a.styleBindings)]=d}(o,a,d,b))}else p=function Ly(o,a,u){let d;const f=a.directiveEnd;for(let p=1+a.directiveStylingLast;p<f;p++)d=vd(d,o[p].hostAttrs,u);return vd(d,a.attrs,u)}(o,a,d)}return void 0!==p&&(d?a.residualClasses=p:a.residualStyles=p),u}(f,p,a,d),function CA(o,a,u,d,f,p){let v=p?a.classBindings:a.styleBindings,C=To(v),b=rl(v);o[d]=u;let k,A=!1;if(Array.isArray(u)){const P=u;k=P[1],(null===k||qr(P,k)>0)&&(A=!0)}else k=u;if(f)if(0!==b){const K=To(o[C+1]);o[d+1]=dg(K,C),0!==K&&(o[K+1]=q_(o[K+1],d)),o[C+1]=function zS(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=dg(C,0),0!==C&&(o[C+1]=q_(o[C+1],d)),C=d;else o[d+1]=dg(b,0),0===C?C=d:o[b+1]=q_(o[b+1],d),b=d;A&&(o[d+1]=z_(o[d+1])),sf(o,k,d,!0),sf(o,k,d,!1),function IA(o,a,u,d,f){const p=f?o.residualClasses:o.residualStyles;null!=p&&"string"==typeof a&&qr(p,a)>=0&&(u[d+1]=qc(u[d+1]))}(a,k,o,d,p),v=dg(C,b),p?a.classBindings=v:a.styleBindings=v}(f,p,a,u,v,d)}}function yd(o,a,u,d,f){let p=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(p=a[C],d=vd(d,p.hostAttrs,f),p!==o);)C++;return null!==o&&(u.directiveStylingLast=C),d}function vd(o,a,u){const d=u?1:2;let f=-1;if(null!==a)for(let p=0;p<a.length;p++){const v=a[p];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),dt(o,v,!!u||a[++p]))}return void 0===o?null:o}function Vy(o,a,u){dt(o,a,Fs(u))}function ll(o,a,u,d,f,p,v,C){if(!(3&a.type))return;const b=o.data,A=b[C+1];By(function pr(o){return 1==(1&o)}(A)?Uy(b,a,u,f,rl(A),v):void 0)||(By(p)||function W_(o){return 2==(2&o)}(A)&&(p=Uy(b,null,u,f,C,v)),function DC(o,a,u,d,f){if(a)f?o.addClass(u,d):o.removeClass(u,d);else{let p=-1===d.indexOf("-")?void 0:va.DashCase;null==f?o.removeStyle(u,d,p):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),p|=va.Important),o.setStyle(u,d,f,p))}}(d,v,br(xn(),u),f,p))}function Uy(o,a,u,d,f,p){const v=null===a;let C;for(;f>0;){const b=o[f],A=Array.isArray(b),k=A?b[1]:b,P=null===k;let K=u[f+1];K===Gt&&(K=P?xt:void 0);let Q=P?Ya(K,d):k===d?K:void 0;if(A&&!By(Q)&&(Q=Ya(b,d)),By(Q)&&(C=Q,v))return C;const Te=o[f+1];f=v?To(Te):rl(Te)}if(null!==a){let b=p?a.residualClasses:a.residualStyles;null!=b&&(C=Ya(b,d))}return C}function By(o){return void 0!==o}function Hy(o,a){return 0!=(o.flags&(a?16:32))}function GI(o,a=""){const u=Ne(),d=Zt(),f=o+22,p=d.firstCreatePass?Jc(d,f,1,a,null):d.data[f],v=u[f]=function k_(o,a){return o.createText(a)}(u[11],a);rg(d,u,v,p),Bi(p,!1)}function af(o){return Vu("",o,""),af}function Vu(o,a,u){const d=Ne(),f=ld(d,o,a,u);return f!==Gt&&Bs(d,xn(),f),Vu}function jy(o,a,u,d,f){const p=Ne(),v=ud(p,o,a,u,d,f);return v!==Gt&&Bs(p,xn(),v),jy}const Uu=void 0;var Vg=["en",[["a","p"],["AM","PM"],Uu],[["AM","PM"],Uu,Uu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uu,"{1} 'at' {0}",Uu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Zy(o){const u=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Id={};function Ug(o){const a=function QI(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=YI(a);if(u)return u;const d=a.split("-")[0];if(u=YI(d),u)return u;if("en"===d)return Vg;throw new Se(701,!1)}function Ky(o){return Ug(o)[kt.PluralCase]}function YI(o){return o in Id||(Id[o]=Ot.ng&&Ot.ng.common&&Ot.ng.common.locales&&Ot.ng.common.locales[o]),Id[o]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const Ed="en-US";let Td=Ed;function lv(o,a,u,d,f){if(o=X(o),Array.isArray(o))for(let p=0;p<o.length;p++)lv(o[p],a,u,d,f);else{const p=Zt(),v=Ne();let C=Ls(o)?o:X(o.provide),b=Bp(o);const A=ii(),k=1048575&A.providerIndexes,P=A.directiveStart,K=A.providerIndexes>>20;if(Ls(o)||!o.multi){const Q=new hr(b,f,il),Te=cv(C,a,f?k:k+K,P);-1===Te?(co(us(A,v),p,C),uv(p,o,a.length),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(Q),v.push(Q)):(u[Te]=Q,v[Te]=Q)}else{const Q=cv(C,a,k+K,P),Te=cv(C,a,k,k+K),We=Q>=0&&u[Q],Ye=Te>=0&&u[Te];if(f&&!Ye||!f&&!We){co(us(A,v),p,C);const pt=function nx(o,a,u,d,f){const p=new hr(o,u,il);return p.multi=[],p.index=a,p.componentProviders=0,EE(p,f,d&&!u),p}(f?tx:ex,u.length,f,d,b);!f&&Ye&&(u[Te].providerFactory=pt),uv(p,o,a.length,0),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(pt),v.push(pt)}else uv(p,o,Q>-1?Q:Te,EE(u[f?Te:Q],b,!f&&d));!f&&d&&Ye&&u[Te].componentProviders++}}}function uv(o,a,u,d){const f=Ls(a),p=function Z0(o){return!!o.useClass}(a);if(f||p){const b=(p?X(a.useClass):a).prototype.ngOnDestroy;if(b){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const k=A.indexOf(u);-1===k?A.push(u,[d,b]):A[k+1].push(d,b)}else A.push(u,b)}}}function EE(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function cv(o,a,u,d){for(let f=u;f<d;f++)if(a[f]===o)return f;return-1}function ex(o,a,u,d){return dv(this.multi,[])}function tx(o,a,u,d){const f=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=$r(u,u[1],this.providerFactory.index,d);p=C.slice(0,v),dv(f,p);for(let b=v;b<C.length;b++)p.push(C[b])}else p=[],dv(f,p);return p}function dv(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function bE(o,a=[]){return u=>{u.providersResolver=(d,f)=>function tP(o,a,u){const d=Zt();if(d.firstCreatePass){const f=Yi(o);lv(u,d.data,d.blueprint,f,!0),lv(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Ad{}class TE{}function ix(o,a){return new DE(o,a??null)}class DE extends Ad{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _y(this);const d=ut(a);this._bootstrapComponents=nl(d.bootstrap),this._r3Injector=Yh(a,u,[{provide:Ad,useValue:this},{provide:ku,useValue:this.componentFactoryResolver}],fe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class hv extends TE{constructor(a){super(),this.moduleType=a}create(a){return new DE(this.moduleType,a)}}class sx extends Ad{constructor(a,u,d){super(),this.componentFactoryResolver=new _y(this),this.instance=null;const f=new h_([...a,{provide:Ad,useValue:this},{provide:ku,useValue:this.componentFactoryResolver}],u||Up(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function fv(o,a,u=null){return new sx(o,a,u).injector}let ox=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=W0(0,u.type),f=d.length>0?fv([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=nn({token:o,providedIn:"environment",factory:()=>new o(An(ya))}),o})();function SE(o){o.getStandaloneInjector=a=>a.get(ox).getOrCreateStandaloneInjector(o)}function NE(o,a,u){const d=ri()+o,f=Ne();return f[d]===Gt?ki(f,d,u?a.call(u):a()):Gs(f,d)}function PE(o,a,u,d){return function BE(o,a,u,d,f,p){const v=a+u;return kn(o,v,f)?ki(o,v+1,p?d.call(p,f):d(f)):_f(o,v+1)}(Ne(),ri(),o,a,u,d)}function pv(o,a,u,d,f){return function HE(o,a,u,d,f,p,v){const C=a+u;return od(o,C,f,p)?ki(o,C+2,v?d.call(v,f,p):d(f,p)):_f(o,C+2)}(Ne(),ri(),o,a,u,d,f)}function FE(o,a,u,d,f,p){return function jE(o,a,u,d,f,p,v,C){const b=a+u;return function be(o,a,u,d,f){const p=od(o,a,u,d);return kn(o,a+2,f)||p}(o,b,f,p,v)?ki(o,b+3,C?d.call(C,f,p,v):d(f,p,v)):_f(o,b+3)}(Ne(),ri(),o,a,u,d,f,p)}function LE(o,a,u,d,f,p,v){return function mv(o,a,u,d,f,p,v,C,b){const A=a+u;return Yr(o,A,f,p,v,C)?ki(o,A+4,b?d.call(b,f,p,v,C):d(f,p,v,C)):_f(o,A+4)}(Ne(),ri(),o,a,u,d,f,p,v)}function VE(o,a,u,d,f,p,v,C){const b=ri()+o,A=Ne(),k=Yr(A,b,u,d,f,p);return kn(A,b+4,v)||k?ki(A,b+5,C?a.call(C,u,d,f,p,v):a(u,d,f,p,v)):Gs(A,b+5)}function gv(o,a,u,d,f,p,v,C,b){const A=ri()+o,k=Ne(),P=Yr(k,A,u,d,f,p);return od(k,A+4,v,C)||P?ki(k,A+6,b?a.call(b,u,d,f,p,v,C):a(u,d,f,p,v,C)):Gs(k,A+6)}function UE(o,a,u,d){return function GE(o,a,u,d,f,p){let v=a+u,C=!1;for(let b=0;b<f.length;b++)kn(o,v++,f[b])&&(C=!0);return C?ki(o,v,d.apply(p,f)):_f(o,v)}(Ne(),ri(),o,a,u,d)}function _f(o,a){const u=o[a];return u===Gt?void 0:u}function _v(o){return a=>{setTimeout(o,void 0,a)}}const ba=class Ex extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){let f=a,p=u||(()=>null),v=d;if(a&&"object"==typeof a){const b=a;f=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=_v(p),f&&(f=_v(f)),v&&(v=_v(v)));const C=super.subscribe({next:f,error:p,complete:v});return a instanceof $.w0&&a.add(C),C}};function bx(){return this._results[Fu()]()}class yv{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Fu(),d=yv.prototype;d[u]||(d[u]=bx)}get changes(){return this._changes||(this._changes=new ba)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const f=Dn(a);(this._changesDetected=!function Hi(o,a,u){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],p=a[d];if(u&&(f=u(f),p=u(p)),p!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let vf=(()=>{class o{}return o.__NG_ELEMENT_ID__=Sx,o})();const Tx=vf,Dx=class extends Tx{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a,u){const d=this._declarationTContainer.tViews,f=_g(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(d)),sy(d,f,a),new Tg(f)}};function Sx(){return Zg(ii(),Ne())}function Zg(o,a){return 4&o.type?new Dx(a,o,Vc(o,a)):null}let Kg=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ax,o})();function Ax(){return qE(ii(),Ne())}const xx=Kg,zE=class extends xx{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return Vc(this._hostTNode,this._hostLView)}get injector(){return new ra(this._hostTNode,this._hostLView)}get parentInjector(){const a=qa(this._hostTNode,this._hostLView);if(yh(a)){const u=ks(a,this._hostLView),d=si(a);return new ra(u[1].data[d+8],u)}return new ra(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=vv(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,d){let f,p;"number"==typeof d?f=d:null!=d&&(f=d.index,p=d.injector);const v=a.createEmbeddedView(u||{},p);return this.insert(v,f),v}createComponent(a,u,d,f,p){const v=a&&!function zr(o){return"function"==typeof o}(a);let C;if(v)C=u;else{const P=u||{};C=P.index,d=P.injector,f=P.projectableNodes,p=P.environmentInjector||P.ngModuleRef}const b=v?a:new Dg(R(a)),A=d||this.parentInjector;if(!p&&null==b.ngModule){const K=(v?A:this.parentInjector).get(ya,null);K&&(p=K)}const k=b.create(A,f,void 0,p);return this.insert(k.hostView,C),k}insert(a,u){const d=a._lView,f=d[1];if(function uu(o){return lr(o[3])}(d)){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const P=d[3],K=new zE(P,P[6],P[3]);K.detach(K.indexOf(a))}}const p=this._adjustIndex(u),v=this._lContainer;!function TS(o,a,u,d){const f=10+d,p=u.length;d>0&&(u[f-1][4]=a),d<p-10?(a[4]=u[f],fo(u,10+d,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function DS(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,d,v,p);const C=bC(p,v),b=d[11],A=ng(b,v[7]);return null!==A&&function gC(o,a,u,d,f,p){d[0]=f,d[6]=a,Ru(o,d,u,1,f,p)}(f,v[6],b,d,A,C),a.attachToViewContainerRef(),fo(Yg(v),p,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=vv(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=R_(this._lContainer,u);d&&(pi(Yg(this._lContainer),u),qh(d[1],d))}detach(a){const u=this._adjustIndex(a,-1),d=R_(this._lContainer,u);return d&&null!=pi(Yg(this._lContainer),u)?new Tg(d):null}_adjustIndex(a,u=0){return a??this.length+u}};function vv(o){return o[8]}function Yg(o){return o[8]||(o[8]=[])}function qE(o,a){let u;const d=a[o.index];if(lr(d))u=d;else{let f;if(8&o.type)f=Rn(d);else{const p=a[11];f=p.createComment("");const v=Ii(o,a);wa(p,ng(p,v),f,function IC(o,a){return o.nextSibling(a)}(p,v),!1)}a[o.index]=u=uA(d,a,f,o),td(a,u)}return new zE(u,o,a)}class wv{constructor(a){this.queryList=a,this.matches=null}clone(){return new wv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let p=0;p<d;p++){const v=u.getByIndex(p);f.push(this.queries[v.indexInDeclarationView].clone())}return new Cv(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==rb(a,u).matches&&this.queries[u].setDirty()}}class KE{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class Iv{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,p=this.getByIndex(d).embeddedTView(a,f);p&&(p.indexInDeclarationView=d,null!==u?u.push(p):u=[p])}return null!==u?new Iv(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Ev{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Ev(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const p=d[f];this.matchTNodeWithReadOption(a,u,Ox(u,p)),this.matchTNodeWithReadOption(a,u,Ka(u,a,p,!1,!1))}else d===vf?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Ka(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Ou||f===Kg||f===vf&&4&u.type)this.addMatch(u.index,-2);else{const p=Ka(u,a,f,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Ox(o,a){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function Nx(o,a,u,d){return-1===u?function Rx(o,a){return 11&o.type?Vc(o,a):4&o.type?Zg(o,a):null}(a,o):-2===u?function YE(o,a,u){return u===Ou?Vc(a,o):u===vf?Zg(a,o):u===Kg?qE(a,o):void 0}(o,a,d):$r(o,o[1],u,a)}function QE(o,a,u,d){const f=a[19].queries[d];if(null===f.matches){const p=o.data,v=u.matches,C=[];for(let b=0;b<v.length;b+=2){const A=v[b];C.push(A<0?null:Nx(a,p[A],v[b+1],u.metadata.read))}f.matches=C}return f.matches}function bv(o,a,u,d){const f=o.queries.getByIndex(u),p=f.matches;if(null!==p){const v=QE(o,a,f,u);for(let C=0;C<p.length;C+=2){const b=p[C];if(b>0)d.push(v[C/2]);else{const A=p[C+1],k=a[-b];for(let P=10;P<k.length;P++){const K=k[P];K[17]===K[3]&&bv(K[1],K,A,d)}if(null!==k[9]){const P=k[9];for(let K=0;K<P.length;K++){const Q=P[K];bv(Q[1],Q,A,d)}}}}}return d}function JE(o){const a=Ne(),u=Zt(),d=Ha();hu(d+1);const f=rb(u,d);if(o.dirty&&function lu(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const p=f.crossesNgTemplate?bv(u,a,d,[]):QE(u,a,f,d);o.reset(p,X0),o.notifyOnChanges()}return!0}return!1}function XE(o,a,u){const d=Zt();d.firstCreatePass&&(ib(d,new KE(o,a,u),-1),2==(2&a)&&(d.staticViewQueries=!0)),nb(d,Ne(),a)}function eb(o,a,u,d){const f=Zt();if(f.firstCreatePass){const p=ii();ib(f,new KE(a,u,d),p.index),function Fx(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}nb(f,Ne(),u)}function tb(){return function Px(o,a){return o[19].queries[a].queryList}(Ne(),Ha())}function nb(o,a,u){const d=new yv(4==(4&u));ay(o,a,d,d.destroy),null===a[19]&&(a[19]=new Cv),a[19].queries.push(new wv(d))}function ib(o,a,u){null===o.queries&&(o.queries=new Iv),o.queries.track(new Ev(a,u))}function rb(o,a){return o.queries.getByIndex(a)}function sb(o,a){return Zg(o,a)}function Xg(...o){}const Ib=new Tn("Application Initializer");let em=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Xg,this.reject=Xg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const p=this.appInits[f]();if(by(p))u.push(p);else if(II(p)){const v=new Promise((C,b)=>{p.subscribe({complete:C,error:b})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(An(Ib,8))},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Eb=new Tn("AppId",{providedIn:"root",factory:function bb(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tb=new Tn("Platform Initializer"),iM=new Tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Db=new Tn("appBootstrapListener");let rM=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const tm=new Tn("LocaleId",{providedIn:"root",factory:()=>T(tm,nt.Optional|nt.SkipSelf)||function sM(){return typeof $localize<"u"&&$localize.locale||Ed}()}),oM=new Tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class lM{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let uM=(()=>{class o{compileModuleSync(u){return new hv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),p=nl(ut(u).declarations).reduce((v,C)=>{const b=R(C);return b&&v.push(new Dg(b)),v},[]);return new lM(d,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ab=(()=>Promise.resolve(0))();function Cf(o){typeof Zone>"u"?Ab.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class zs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ba(!1),this.onMicrotaskEmpty=new ba(!1),this.onStable=new ba(!1),this.onError=new ba(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function xb(){let o=Ot.requestAnimationFrame,a=Ot.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function TP(o){const a=()=>{!function fM(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ot,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,If(o),o.isCheckStableRunning=!0,kv(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),If(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,p,v,C)=>{try{return Ov(o),u.invokeTask(f,p,v,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||o.shouldCoalesceRunChangeDetection)&&a(),Rv(o)}},onInvoke:(u,d,f,p,v,C,b)=>{try{return Ov(o),u.invoke(f,p,v,C,b)}finally{o.shouldCoalesceRunChangeDetection&&a(),Rv(o)}},onHasTask:(u,d,f,p)=>{u.hasTask(f,p),d===f&&("microTask"==p.change?(o._hasPendingMicrotasks=p.microTask,If(o),kv(o)):"macroTask"==p.change&&(o.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,d,f,p)=>(u.handleError(f,p),o.runOutsideAngular(()=>o.onError.emit(p)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zs.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(zs.isInAngularZone())throw new Se(909,!1)}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,f){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+f,a,hM,Xg,Xg);try{return p.runTask(v,u,d)}finally{p.cancelTask(v)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const hM={};function kv(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function If(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Ov(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Rv(o){o._nesting--,kv(o)}class Nv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ba,this.onMicrotaskEmpty=new ba,this.onStable=new ba,this.onError=new ba}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,f){return a.apply(u,d)}}const Pv=new Tn(""),Mb=new Tn("");let Ef,pM=(()=>{class o{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ef||(function ju(o){Ef=o}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zs.assertNotInAngularZone(),Cf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cf(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(An(zs),An(Fv),An(Mb))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})(),Fv=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Ef?.findTestabilityInTree(this,u,d)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),_s=null;const Lv=new Tn("AllowMultipleToken"),nm=new Tn("PlatformDestroyListeners");class Wi{constructor(a,u){this.name=a,this.token=u}}function Ob(o,a,u=[]){const d=`Platform: ${a}`,f=new Tn(d);return(p=[])=>{let v=qs();if(!v||v.injector.get(Lv,!1)){const C=[...u,...p,{provide:f,useValue:!0}];o?o(C):function bf(o){if(_s&&!_s.get(Lv,!1))throw new Se(400,!1);_s=o;const a=o.get(jl);(function Ao(o){const a=o.get(Tb,null);a&&a.forEach(u=>u())})(o)}(function Rb(o=[],a){return Pu.create({name:a,providers:[{provide:Fp,useValue:"platform"},{provide:nm,useValue:new Set([()=>_s=null])},...o]})}(C,d))}return function im(o){const a=qs();if(!a)throw new Se(401,!1);return a}()}}function qs(){return _s?.get(jl)??null}let jl=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function kd(o,a){let u;return u="noop"===o?new Nv:("zone.js"===o?void 0:o)||new zs(a),u}(d?.ngZone,function Nb(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),p=[{provide:zs,useValue:f}];return f.run(()=>{const v=Pu.create({providers:p,parent:this.injector,name:u.moduleType.name}),C=u.create(v),b=C.injector.get($h,null);if(!b)throw new Se(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:k=>{b.handleError(k)}});C.onDestroy(()=>{Tf(this._modules,C),A.unsubscribe()})}),function rm(o,a,u){try{const d=u();return by(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(b,f,()=>{const A=C.injector.get(em);return A.runInitializers(),A.donePromise.then(()=>(function Hg(o){jt(o,"Expected localeId to be defined"),"string"==typeof o&&(Td=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(tm,Ed)||Ed),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,d=[]){const f=Uv({},d);return function Gu(o,a,u){const d=new hv(u);return Promise.resolve(d)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,f))}_moduleDoBootstrap(u){const d=u.injector.get(_i);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Se(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(nm,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(An(Pu))},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Uv(o,a){return Array.isArray(a)?a.reduce(Uv,o):{...o,...a}}let _i=(()=>{class o{constructor(u,d,f){this._zone=u,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new N.y(C=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{zs.assertNotInAngularZone(),Cf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{zs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(p,v.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const f=u instanceof g_;if(!this._injector.get(em).done)throw!f&&Fe(u),new Se(405,false);let v;v=f?u:this._injector.get(ku).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const C=function kb(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Ad),A=v.create(Pu.NULL,[],d||v.selector,C),k=A.location.nativeElement,P=A.injector.get(Pv,null);return P?.registerApplication(k),A.onDestroy(()=>{this.detachView(A.hostView),Tf(this.components,A),P?.unregisterApplication(k)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Tf(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Db,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Tf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Se(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(An(zs),An(ya),An($h))},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Tf(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let Fb=!0,Lb=!1;function Vb(){return Lb=!0,Fb}function Bv(){if(Lb)throw new Error("Cannot enable prod mode after platform setup.");Fb=!1}let Sf=(()=>{class o{}return o.__NG_ELEMENT_ID__=_M,o})();function _M(o){return function yM(o,a,u){if(ru(o)&&!u){const d=on(o.index,a);return new Tg(d,d)}return 47&o.type?new Tg(a[16],a):null}(ii(),Ne(),16==(16&o))}class Wb{constructor(){}supports(a){return rd(a)}create(a){return new bM(a)}}const EM=(o,a)=>a;class bM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||EM}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,f=0,p=null;for(;u||d;){const v=!d||u&&u.currentIndex<Zb(d,f,p)?u:d,C=Zb(v,f,p),b=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{p||(p=[]);const A=C-f,k=b-f;if(A!=k){for(let K=0;K<A;K++){const Q=K<p.length?p[K]:p[K]=0,Te=Q+K;k<=Te&&Te<A&&(p[K]=Q+1)}p[v.previousIndex]=k-A}}C!==b&&a(v,C,b)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!rd(a))throw new Se(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,p,v,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)p=a[C],v=this._trackByFn(C,p),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,p,v,C)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,C),d=!0),u=u._next}else f=0,function sd(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Fu()]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,C=>{v=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,C,v,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,f){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,p,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,p,f)):a=this._addAfter(new zb(u,d),p,f),a}_verifyReinsertion(a,u,d,f){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?a=this._reinsertAfter(p,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,p=a._nextRemoved;return null===f?this._removalsHead=p:f._nextRemoved=p,null===p?this._removalsTail=f:p._prevRemoved=f,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new zv),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zv),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class zb{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qb{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class zv{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new qb,this.map.set(u,d)),d.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zb(o,a,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+a+f}class Kb{constructor(){}supports(a){return a instanceof Map||wy(a)}create(){return new TM}}class TM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||wy(a)))throw new Se(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const p=f._prev,v=f._next;return p&&(p._next=v),v&&(v._prev=p),f._next=null,f._prev=null,f}const d=new DM(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class DM{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yb(){return new am([new Wb])}let am=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||Yb()),deps:[[o,new Mt,new Be]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Se(901,!1)}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:Yb}),o})();function Qb(){return new qv([new Kb])}let qv=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||Qb()),deps:[[o,new Mt,new Be]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Se(901,!1)}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:Qb}),o})();const xM=Ob(null,"core",[]);let lm=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(An(_i))},o.\u0275mod=en({type:o}),o.\u0275inj=Ht({}),o})();function Rd(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(yt,Oe,U)=>{U.d(Oe,{Z:()=>Se});var l=U(2090),$=U(4859),N=U(9681),ae=U(1877);class ce{constructor(Ee,_e){this._delegate=Ee,this.firebase=_e,(0,N._addComponent)(Ee,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ee,_e=N._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(Ee);return!tt.isInitialized()&&"EXPLICIT"===(null===(it=tt.getComponent())||void 0===it?void 0:it.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:_e})}_removeServiceInstance(Ee,_e=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(_e)}_addComponent(Ee){(0,N._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,N._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function we(){const at=function fe(at){const Ee={},_e={__esModule:!0,initializeApp:function Le(oe,de={}){const Ce=N.initializeApp(oe,de);if((0,l.r3)(Ee,Ce.name))return Ee[Ce.name];const J=new at(Ce,_e);return Ee[Ce.name]=J,J},app:tt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function De(oe){const de=oe.name,Ce=de.replace("-compat","");if(N._registerComponent(oe)&&"PUBLIC"===oe.type){const J=(te=tt())=>{if("function"!=typeof te[Ce])throw me.create("invalid-app-argument",{appName:de});return te[Ce]()};void 0!==oe.serviceProps&&(0,l.ZB)(J,oe.serviceProps),_e[Ce]=J,at.prototype[Ce]=function(...te){return this._getService.bind(this,de).apply(this,oe.multipleInstances?te:[])}}return"PUBLIC"===oe.type?_e[Ce]:null},removeApp:function it(oe){delete Ee[oe]},useAsService:function Ze(oe,de){return"serverAuth"===de?null:de},modularAPIs:N}};function tt(oe){if(!(0,l.r3)(Ee,oe=oe||N._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:oe});return Ee[oe]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function Re(){return Object.keys(Ee).map(oe=>Ee[oe])}}),tt.App=at,_e}(ce);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ee(_e){(0,l.ZB)(at,_e)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),at}(),z=new ae.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=Z;!function Pe(at){(0,N.registerVersion)("@firebase/app-compat","0.1.39",at)}()},9681:(yt,Oe,U)=>{U.r(Oe),U.d(Oe,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Br,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>tn,_addOrOverwriteComponent:()=>nn,_apps:()=>cn,_clearComponents:()=>Vr,_components:()=>In,_getProvider:()=>Ht,_registerComponent:()=>zt,_removeServiceInstance:()=>wi,deleteApp:()=>Hr,getApp:()=>Bn,getApps:()=>Ir,initializeApp:()=>Fi,onLog:()=>qn,registerVersion:()=>ti,setLogLevel:()=>vn});var l=U(5861),$=U(4859),N=U(1877),ae=U(2090),ce=U(8766);class ye{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function me(st){return"VERSION"===st.getComponent()?.type}(ot)){const Tt=ot.getImmediate();return`${Tt.library}/${Tt.version}`}return null}).filter(ot=>ot).join(" ")}}const fe="@firebase/app",Z=new N.Yd("@firebase/app"),jt="[DEFAULT]",Qe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,In=new Map;function tn(st,Ae){try{st.container.addComponent(Ae)}catch(ot){Z.debug(`Component ${Ae.name} failed to register with FirebaseApp ${st.name}`,ot)}}function nn(st,Ae){st.container.addOrOverwriteComponent(Ae)}function zt(st){const Ae=st.name;if(In.has(Ae))return Z.debug(`There were multiple attempts to register component ${Ae}.`),!1;In.set(Ae,st);for(const ot of cn.values())tn(ot,st);return!0}function Ht(st,Ae){const ot=st.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),st.container.getProvider(Ae)}function wi(st,Ae,ot=jt){Ht(st,Ae).clearInstance(ot)}function Vr(){In.clear()}const On=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(Ae,ot,Tt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=Tt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}const Br="9.14.0";function Fi(st,Ae={}){let ot=st;"object"!=typeof Ae&&(Ae={name:Ae});const Tt=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Ae),St=Tt.name;if("string"!=typeof St||!St)throw On.create("bad-app-name",{appName:String(St)});if(ot||(ot=(0,ae.aH)()),!ot)throw On.create("no-options");const en=cn.get(St);if(en){if((0,ae.vZ)(ot,en.options)&&(0,ae.vZ)(Tt,en.config))return en;throw On.create("duplicate-app",{appName:St})}const q=new $.H0(St);for(const Y of In.values())q.addComponent(Y);const W=new Ur(ot,Tt,q);return cn.set(St,W),W}function Bn(st=jt){const Ae=cn.get(st);if(!Ae&&st===jt)return Fi();if(!Ae)throw On.create("no-app",{appName:st});return Ae}function Ir(){return Array.from(cn.values())}function Hr(st){return nt.apply(this,arguments)}function nt(){return(nt=(0,l.Z)(function*(st){const Ae=st.name;cn.has(Ae)&&(cn.delete(Ae),yield Promise.all(st.container.getProviders().map(ot=>ot.delete())),st.isDeleted=!0)})).apply(this,arguments)}function ti(st,Ae,ot){var Tt;let St=null!==(Tt=Qe[st])&&void 0!==Tt?Tt:st;ot&&(St+=`-${ot}`);const en=St.match(/\s|\//),q=Ae.match(/\s|\//);if(en||q){const W=[`Unable to register library "${St}" with version "${Ae}":`];return en&&W.push(`library name "${St}" contains illegal characters (whitespace or "/")`),en&&q&&W.push("and"),q&&W.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void Z.warn(W.join(" "))}zt(new $.wA(`${St}-version`,()=>({library:St,version:Ae}),"VERSION"))}function qn(st,Ae){if(null!==st&&"function"!=typeof st)throw On.create("invalid-log-argument");(0,N.Am)(st,Ae)}function vn(st){(0,N.Ub)(st)}const wn="firebase-heartbeat-store";let En=null;function mn(){return En||(En=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(st,Ae)=>{0===Ae&&st.createObjectStore(wn)}}).catch(st=>{throw On.create("idb-open",{originalErrorMessage:st.message})})),En}function Ct(){return(Ct=(0,l.Z)(function*(st){var Ae;try{return(yield mn()).transaction(wn).objectStore(wn).get(Zn(st))}catch(ot){if(ot instanceof ae.ZR)Z.warn(ot.message);else{const Tt=On.create("idb-get",{originalErrorMessage:null===(Ae=ot)||void 0===Ae?void 0:Ae.message});Z.warn(Tt.message)}}})).apply(this,arguments)}function Ot(st,Ae){return Li.apply(this,arguments)}function Li(){return(Li=(0,l.Z)(function*(st,Ae){var ot;try{const St=(yield mn()).transaction(wn,"readwrite");return yield St.objectStore(wn).put(Ae,Zn(st)),St.done}catch(Tt){if(Tt instanceof ae.ZR)Z.warn(Tt.message);else{const St=On.create("idb-set",{originalErrorMessage:null===(ot=Tt)||void 0===ot?void 0:ot.message});Z.warn(St.message)}}})).apply(this,arguments)}function Zn(st){return`${st.name}!${st.options.appId}`}class xi{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new Qt(ot),this._heartbeatsCachePromise=this._storage.read().then(Tt=>(this._heartbeatsCache=Tt,Tt))}triggerHeartbeat(){var Ae=this;return(0,l.Z)(function*(){const Tt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=Ft();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==St&&!Ae._heartbeatsCache.heartbeats.some(en=>en.date===St))return Ae._heartbeatsCache.heartbeats.push({date:St,agent:Tt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(en=>{const q=new Date(en.date).valueOf();return Date.now()-q<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,l.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const ot=Ft(),{heartbeatsToSend:Tt,unsentEntries:St}=function Zi(st,Ae=1024){const ot=[];let Tt=st.slice();for(const St of st){const en=ot.find(q=>q.agent===St.agent);if(en){if(en.dates.push(St.date),li(ot)>Ae){en.dates.pop();break}}else if(ot.push({agent:St.agent,dates:[St.date]}),li(ot)>Ae){ot.pop();break}Tt=Tt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:Tt}}(Ae._heartbeatsCache.heartbeats),en=(0,ae.L)(JSON.stringify({version:2,heartbeats:Tt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=ot,St.length>0?(Ae._heartbeatsCache.heartbeats=St,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),en})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,l.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function wt(st){return Ct.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var ot=this;return(0,l.Z)(function*(){var Tt;if(yield ot._canUseIndexedDBPromise){const en=yield ot.read();return Ot(ot.app,{lastSentHeartbeatDate:null!==(Tt=Ae.lastSentHeartbeatDate)&&void 0!==Tt?Tt:en.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var ot=this;return(0,l.Z)(function*(){var Tt;if(yield ot._canUseIndexedDBPromise){const en=yield ot.read();return Ot(ot.app,{lastSentHeartbeatDate:null!==(Tt=Ae.lastSentHeartbeatDate)&&void 0!==Tt?Tt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...Ae.heartbeats]})}})()}}function li(st){return(0,ae.L)(JSON.stringify({version:2,heartbeats:st})).length}!function Sn(st){zt(new $.wA("platform-logger",Ae=>new ye(Ae),"PRIVATE")),zt(new $.wA("heartbeat",Ae=>new xi(Ae),"PRIVATE")),ti(fe,"0.8.4",st),ti(fe,"0.8.4","esm2017"),ti("fire-js","")}("")},4859:(yt,Oe,U)=>{U.d(Oe,{H0:()=>fe,wA:()=>N,zt:()=>ce});var l=U(5861),$=U(2090);class N{constructor(Z,z,X){this.name=Z,this.instanceFactory=z,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ae="[DEFAULT]";class ce{constructor(Z,z){this.name=Z,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const z=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(z)){const X=new $.BH;if(this.instancesDeferred.set(z,X),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:z});Ge&&X.resolve(Ge)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(Z){var z;const X=this.normalizeInstanceIdentifier(Z?.identifier),Ge=null!==(z=Z?.optional)&&void 0!==z&&z;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Pe){if(Ge)return null;throw Pe}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function me(we){return"EAGER"===we.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[z,X]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(z);try{const Pe=this.getOrInitializeService({instanceIdentifier:Ge});X.resolve(Pe)}catch{}}}}clearInstance(Z=ae){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,l.Z)(function*(){const z=Array.from(Z.instances.values());yield Promise.all([...z.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...z.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ae){return this.instances.has(Z)}getOptions(Z=ae){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:z={}}=Z,X=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:X,options:z});for(const[Pe,Se]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Pe)&&Se.resolve(Ge);return Ge}onInit(Z,z){var X;const Ge=this.normalizeInstanceIdentifier(z),Pe=null!==(X=this.onInitCallbacks.get(Ge))&&void 0!==X?X:new Set;Pe.add(Z),this.onInitCallbacks.set(Ge,Pe);const Se=this.instances.get(Ge);return Se&&Z(Se,Ge),()=>{Pe.delete(Z)}}invokeOnInitCallbacks(Z,z){const X=this.onInitCallbacks.get(z);if(X)for(const Ge of X)try{Ge(Z,z)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:z={}}){let X=this.instances.get(Z);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(we=Z,we===ae?void 0:we),options:z}),this.instances.set(Z,X),this.instancesOptions.set(Z,z),this.invokeOnInitCallbacks(X,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,X)}catch{}var we;return X||null}normalizeInstanceIdentifier(Z=ae){return this.component?this.component.multipleInstances?Z:ae:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const z=this.getProvider(Z.name);if(z.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);z.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const z=new ce(Z,this);return this.providers.set(Z,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(yt,Oe,U)=>{U.d(Oe,{Am:()=>we,Ub:()=>fe,Yd:()=>me,in:()=>$});const l=[];var $=(()=>{return(Z=$||($={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",$;var Z})();const N={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ae=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ye=(Z,z,...X)=>{if(z<Z.logLevel)return;const Ge=(new Date).toISOString(),Pe=ce[z];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Pe](`[${Ge}]  ${Z.name}:`,...X)};class me{constructor(z){this.name=z,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?N[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function fe(Z){l.forEach(z=>{z.setLogLevel(Z)})}function we(Z,z){for(const X of l){let Ge=null;z&&z.level&&(Ge=N[z.level]),X.userLogHandler=null===Z?null:(Pe,Se,...at)=>{const Ee=at.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Se>=(Ge??Pe.logLevel)&&Z({level:$[Se].toLowerCase(),message:Ee,args:at,type:Pe.name})}}}},8766:(yt,Oe,U)=>{U.d(Oe,{Lj:()=>Le,X3:()=>tt});var l=U(5861);let N,ae;const me=new WeakMap,fe=new WeakMap,we=new WeakMap,Z=new WeakMap,z=new WeakMap;let Pe={get(de,Ce,J){if(de instanceof IDBTransaction){if("done"===Ce)return fe.get(de);if("objectStoreNames"===Ce)return de.objectStoreNames||we.get(de);if("store"===Ce)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return _e(de[Ce])},set:(de,Ce,J)=>(de[Ce]=J,!0),has:(de,Ce)=>de instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in de};function Ee(de){return"function"==typeof de?function at(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...Ce){return de.apply(it(this),Ce),_e(me.get(this))}:function(...Ce){return _e(de.apply(it(this),Ce))}:function(Ce,...J){const te=de.call(it(this),Ce,...J);return we.set(te,Ce.sort?Ce.sort():[Ce]),_e(te)}}(de):(de instanceof IDBTransaction&&function Ge(de){if(fe.has(de))return;const Ce=new Promise((J,te)=>{const ge=()=>{de.removeEventListener("complete",ue),de.removeEventListener("error",He),de.removeEventListener("abort",He)},ue=()=>{J(),ge()},He=()=>{te(de.error||new DOMException("AbortError","AbortError")),ge()};de.addEventListener("complete",ue),de.addEventListener("error",He),de.addEventListener("abort",He)});fe.set(de,Ce)}(de),((de,Ce)=>Ce.some(J=>de instanceof J))(de,function ce(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,Pe):de)}function _e(de){if(de instanceof IDBRequest)return function X(de){const Ce=new Promise((J,te)=>{const ge=()=>{de.removeEventListener("success",ue),de.removeEventListener("error",He)},ue=()=>{J(_e(de.result)),ge()},He=()=>{te(de.error),ge()};de.addEventListener("success",ue),de.addEventListener("error",He)});return Ce.then(J=>{J instanceof IDBCursor&&me.set(J,de)}).catch(()=>{}),z.set(Ce,de),Ce}(de);if(Z.has(de))return Z.get(de);const Ce=Ee(de);return Ce!==de&&(Z.set(de,Ce),z.set(Ce,de)),Ce}const it=de=>z.get(de);function tt(de,Ce,{blocked:J,upgrade:te,blocking:ge,terminated:ue}={}){const He=indexedDB.open(de,Ce),je=_e(He);return te&&He.addEventListener("upgradeneeded",vt=>{te(_e(He.result),vt.oldVersion,vt.newVersion,_e(He.transaction))}),J&&He.addEventListener("blocked",()=>J()),je.then(vt=>{ue&&vt.addEventListener("close",()=>ue()),ge&&vt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),je}function Le(de,{blocked:Ce}={}){const J=indexedDB.deleteDatabase(de);return Ce&&J.addEventListener("blocked",()=>Ce()),_e(J).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Ze=new Map;function oe(de,Ce){if(!(de instanceof IDBDatabase)||Ce in de||"string"!=typeof Ce)return;if(Ze.get(Ce))return Ze.get(Ce);const J=Ce.replace(/FromIndex$/,""),te=Ce!==J,ge=De.includes(J);if(!(J in(te?IDBIndex:IDBObjectStore).prototype)||!ge&&!Re.includes(J))return;const ue=function(){var He=(0,l.Z)(function*(je,...vt){const sn=this.transaction(je,ge?"readwrite":"readonly");let jt=sn.store;return te&&(jt=jt.index(vt.shift())),(yield Promise.all([jt[J](...vt),ge&&sn.done]))[0]});return function(vt){return He.apply(this,arguments)}}();return Ze.set(Ce,ue),ue}!function Se(de){Pe=de(Pe)}(de=>({...de,get:(Ce,J,te)=>oe(Ce,J)||de.get(Ce,J,te),has:(Ce,J)=>!!oe(Ce,J)||de.has(Ce,J)}))},5861:(yt,Oe,U)=>{function l(N,ae,ce,ye,me,fe,we){try{var Z=N[fe](we),z=Z.value}catch(X){return void ce(X)}Z.done?ae(z):Promise.resolve(z).then(ye,me)}function $(N){return function(){var ae=this,ce=arguments;return new Promise(function(ye,me){var fe=N.apply(ae,ce);function we(z){l(fe,ye,me,we,Z,"next",z)}function Z(z){l(fe,ye,me,we,Z,"throw",z)}we(void 0)})}}U.d(Oe,{Z:()=>$})}},yt=>{yt(yt.s=5120)}]);