"use strict";(self.webpackChunkhacka_sicredi=self.webpackChunkhacka_sicredi||[]).push([[179],{2011:(_t,ke,V)=>{V.d(ke,{Dh:()=>fe,GT:()=>_e,cc:()=>Pe,hO:()=>Ge,on:()=>Z,pX:()=>ce,xv:()=>ve});var l=V(4650),$=V(127),N=V(5813);_t=V.hmd(_t);const ae=["ngOnDestroy"],ce=(me,it,tt,Le={})=>new Proxy(me,{get:(Oe,Ee)=>tt.runOutsideAngular(()=>{var Ze;if(me[Ee])return!(null===(Ze=Le?.spy)||void 0===Ze)&&Ze.get&&Le.spy.get(Ee,me[Ee]),me[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const oe=it.toPromise().then(de=>{const we=de&&de[Ee];return"function"==typeof we?we.bind(de):we&&we.then?we.then(Q=>tt.run(()=>Q)):tt.run(()=>we)});return new Proxy(()=>{},{get:(de,we)=>oe[we],apply:(de,we,Q)=>oe.then(ee=>{var pe;const ue=ee&&ee(...Q);return!(null===(pe=Le?.spy)||void 0===pe)&&pe.apply&&Le.spy.apply(Ee,Q,ue),ue})})})}),_e=(me,it)=>{it.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(Le=>{Object.defineProperty(me.prototype,Le,Object.getOwnPropertyDescriptor(tt.prototype||tt,Le))})})};class ge{constructor(it){return it}}const fe=new l.OlP("angularfire2.app.options"),ve=new l.OlP("angularfire2.app.name");function Z(me,it,tt){const Oe="object"==typeof tt&&tt||{};Oe.name=Oe.name||"string"==typeof tt&&tt||"[DEFAULT]";const Ze=$.Z.apps.filter(oe=>oe&&oe.name===Oe.name)[0]||it.runOutsideAngular(()=>$.Z.initializeApp(me,Oe));try{JSON.stringify(me)!==JSON.stringify(Ze.options)&&z("error",`${Ze.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(Ze)}const z=(me,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[me](...it)},J={provide:ge,useFactory:Z,deps:[fe,l.R0b,[new l.FiY,ve]]};let Ge=(()=>{class me{constructor(tt){$.Z.registerVersion("angularfire",N.q4.full,"core"),$.Z.registerVersion("angularfire",N.q4.full,"app-compat"),$.Z.registerVersion("angular",l.q4F.full,tt.toString())}static initializeApp(tt,Le){return{ngModule:me,providers:[{provide:fe,useValue:tt},{provide:ve,useValue:Le}]}}}return me.\u0275fac=function(tt){return new(tt||me)(l.LFG(l.Lbi))},me.\u0275mod=l.oAB({type:me}),me.\u0275inj=l.cJS({providers:[J]}),me})();function Pe(me,it,tt,Le,Oe){const[,Ee,Ze]=globalThis.\u0275AngularfireInstanceCache.find(oe=>oe[0]===me)||[];if(Ee)return function De(me,it){try{return me.toString()===it.toString()}catch{return me===it}}(Oe,Ze)||(Ie("error",`${it} was already initialized on the ${tt} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:Oe,was:Ze})),Ee;{const oe=Le();return globalThis.\u0275AngularfireInstanceCache.push([me,oe,Oe]),oe}}const at=!!_t.hot,Ie=(me,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[me](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(_t,ke,V)=>{V.d(ke,{q4:()=>dt,iC:()=>ms,fc:()=>ei,HU:()=>Ps,vb:()=>fa,JM:()=>rl});var l=V(4650),$=V(5867),N=V(5861),ae=V(9681),ce=V(2090),_e=V(4859),ge=V(1877),fe=V(8766);const ve="@firebase/installations",Z="0.5.16",J=`w:${Z}`,Ge="FIS_v2",it=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(T){return T instanceof ce.ZR&&T.code.includes("request-failed")}function Le({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Oe(T){return{token:T.token,requestStatus:2,expiresIn:ee(T.expiresIn),creationTime:Date.now()}}function Ee(T,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,N.Z)(function*(T,S){const H=(yield S.json()).error;return it.create("request-failed",{requestName:T,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function oe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function de(T,{refreshToken:S}){const k=oe(T);return k.append("Authorization",function pe(T){return`${Ge} ${T}`}(S)),k}function we(T){return Q.apply(this,arguments)}function Q(){return(Q=(0,N.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function ee(T){return Number(T.replace("s","000"))}function ue(T,S){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:k}){const H=Le(T),X=oe(T),le=S.getImmediate({optional:!0});if(le){const Ot=yield le.getHeartbeatsHeader();Ot&&X.append("x-firebase-client",Ot)}const Be={method:"POST",headers:X,body:JSON.stringify({fid:k,authVersion:Ge,appId:T.appId,sdkVersion:J})},pt=yield we(()=>fetch(H,Be));if(pt.ok){const Ot=yield pt.json();return{fid:Ot.fid||k,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:Oe(Ot.authToken)}}throw yield Ee("Create Installation",pt)})).apply(this,arguments)}function je(T){return new Promise(S=>{setTimeout(S,T)})}const ln=/^[cdef][\w-]{21}$/;function Ye(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function fn(T){return function wt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return ln.test(k)?k:""}catch{return""}}function En(T){return`${T.appName}!${T.appId}`}const sn=new Map;function on(T,S){const k=En(T);Ii(k,S),function Hr(T,S){const k=function Pn(){return!Bi&&"BroadcastChannel"in self&&(Bi=new BroadcastChannel("[Firebase] FID Change"),Bi.onmessage=T=>{Ii(T.data.key,T.data.fid)}),Bi}();k&&k.postMessage({key:T,fid:S}),function jr(){0===sn.size&&Bi&&(Bi.close(),Bi=null)}()}(k,S)}function Ii(T,S){const k=sn.get(T);if(k)for(const H of k)H(S)}let Bi=null;const Gn="firebase-installations-store";let Dr=null;function $r(){return Dr||(Dr=(0,fe.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Gn)}})),Dr}function nt(T,S){return ri.apply(this,arguments)}function ri(){return(ri=(0,N.Z)(function*(T,S){const k=En(T),X=(yield $r()).transaction(Gn,"readwrite"),le=X.objectStore(Gn),xe=yield le.get(k);return yield le.put(S,k),yield X.done,(!xe||xe.fid!==S.fid)&&on(T,S.fid),S})).apply(this,arguments)}function Yn(T){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,N.Z)(function*(T){const S=En(T),H=(yield $r()).transaction(Gn,"readwrite");yield H.objectStore(Gn).delete(S),yield H.done})).apply(this,arguments)}function gi(T,S){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,N.Z)(function*(T,S){const k=En(T),X=(yield $r()).transaction(Gn,"readwrite"),le=X.objectStore(Gn),xe=yield le.get(k),Be=S(xe);return void 0===Be?yield le.delete(k):yield le.put(Be,k),yield X.done,Be&&(!xe||xe.fid!==Be.fid)&&on(T,Be.fid),Be})).apply(this,arguments)}function In(T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,N.Z)(function*(T){let S;const k=yield gi(T.appConfig,H=>{const X=vn(H),le=Ct(T,X);return S=le.registrationPromise,le.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function vn(T){return kt(T||{fid:Ye(),registrationStatus:0})}function Ct(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(it.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},H=function It(T,S){return Nt.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:H}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ji(T)}:{installationEntry:S}}function Nt(){return(Nt=(0,N.Z)(function*(T,S){try{const k=yield ue(T,S);return nt(T.appConfig,k)}catch(k){throw tt(k)&&409===k.customData.serverCode?yield Yn(T.appConfig):yield nt(T.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function ji(T){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,N.Z)(function*(T){let S=yield Mi(T.appConfig);for(;1===S.registrationStatus;)yield je(100),S=yield Mi(T.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:H}=yield In(T);return H||k}return S})).apply(this,arguments)}function Mi(T){return gi(T,S=>{if(!S)throw it.create("installation-not-found");return kt(S)})}function kt(T){return function ki(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Vt(T,S){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,N.Z)(function*({appConfig:T,heartbeatServiceProvider:S},k){const H=en(T,k),X=de(T,k),le=S.getImmediate({optional:!0});if(le){const Ot=yield le.getHeartbeatsHeader();Ot&&X.append("x-firebase-client",Ot)}const Be={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:T.appId}})},pt=yield we(()=>fetch(H,Be));if(pt.ok)return Oe(yield pt.json());throw yield Ee("Generate Auth Token",pt)})).apply(this,arguments)}function en(T,{fid:S}){return`${Le(T)}/${S}/authTokens:generate`}function di(T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,N.Z)(function*(T,S=!1){let k;const H=yield gi(T.appConfig,le=>{if(!rn(le))throw it.create("not-registered");const xe=le.authToken;if(!S&&q(xe))return le;if(1===xe.requestStatus)return k=st(T,S),le;{if(!navigator.onLine)throw it.create("app-offline");const Be=Y(le);return k=Dt(T,Be),Be}});return k?yield k:H.authToken})).apply(this,arguments)}function st(T,S){return Se.apply(this,arguments)}function Se(){return(Se=(0,N.Z)(function*(T,S){let k=yield ot(T.appConfig);for(;1===k.authToken.requestStatus;)yield je(100),k=yield ot(T.appConfig);const H=k.authToken;return 0===H.requestStatus?di(T,S):H})).apply(this,arguments)}function ot(T){return gi(T,S=>{if(!rn(S))throw it.create("not-registered");return function j(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Dt(T,S){return At.apply(this,arguments)}function At(){return(At=(0,N.Z)(function*(T,S){try{const k=yield Vt(T,S),H=Object.assign(Object.assign({},S),{authToken:k});return yield nt(T.appConfig,H),k}catch(k){if(!tt(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const H=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield nt(T.appConfig,H)}else yield Yn(T.appConfig);throw k}})).apply(this,arguments)}function rn(T){return void 0!==T&&2===T.registrationStatus}function q(T){return 2===T.requestStatus&&!function W(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function Y(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function B(){return(B=(0,N.Z)(function*(T){const S=T,{installationEntry:k,registrationPromise:H}=yield In(S);return H?H.catch(console.error):di(S).catch(console.error),k.fid})).apply(this,arguments)}function Fe(){return(Fe=(0,N.Z)(function*(T,S=!1){const k=T;return yield ut(k),(yield di(k,S)).token})).apply(this,arguments)}function ut(T){return ct.apply(this,arguments)}function ct(){return(ct=(0,N.Z)(function*(T){const{registrationPromise:S}=yield In(T);S&&(yield S)})).apply(this,arguments)}function eo(T){return it.create("missing-app-config-values",{valueName:T})}const Lo="installations",to=T=>{const S=T.getProvider("app").getImmediate(),k=function Dn(T){if(!T||!T.options)throw eo("App Configuration");if(!T.name)throw eo("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!T.options[k])throw eo(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},no=T=>{const S=T.getProvider("app").getImmediate(),k=(0,ae._getProvider)(S,Lo).getImmediate();return{getId:()=>function O(T){return B.apply(this,arguments)}(k),getToken:X=>function re(T){return Fe.apply(this,arguments)}(k,X)}};(function Cl(){(0,ae._registerComponent)(new _e.wA(Lo,to,"PUBLIC")),(0,ae._registerComponent)(new _e.wA("installations-internal",no,"PRIVATE"))})(),(0,ae.registerVersion)(ve,Z),(0,ae.registerVersion)(ve,Z,"esm2017");const os="@firebase/remote-config",Xn=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class er{constructor(S,k,H,X){this.client=S,this.storage=k,this.storageCache=H,this.logger=X}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-k,X=H<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var k=this;return(0,N.Z)(function*(){const[H,X]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(X&&k.isCachedDataFresh(S.cacheMaxAgeMillis,H))return X;S.eTag=X&&X.eTag;const le=yield k.client.fetch(S),xe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&xe.push(k.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(xe),le})()}}function Gi(T=navigator){return T.languages&&T.languages[0]||T.language}class oo{constructor(S,k,H,X,le,xe){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=H,this.projectId=X,this.apiKey=le,this.appId=xe}fetch(S){var k=this;return(0,N.Z)(function*(){var H,X,le;const[xe,Be]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},bt={sdk_version:k.sdkVersion,app_instance_id:xe,app_instance_id_token:Be,app_id:k.appId,language_code:Gi()},Zn={method:"POST",headers:Ft,body:JSON.stringify(bt)},yi=fetch(Ot,Zn),ga=new Promise((ma,vo)=>{S.signal.addEventListener(()=>{const sr=new Error("The operation was aborted.");sr.name="AbortError",vo(sr)})});let Ls;try{yield Promise.race([yi,ga]),Ls=yield yi}catch(ma){let vo="fetch-client-network";throw"AbortError"===(null===(H=ma)||void 0===H?void 0:H.name)&&(vo="fetch-timeout"),Xn.create(vo,{originalErrorMessage:null===(X=ma)||void 0===X?void 0:X.message})}let Bt=Ls.status;const Mr=Ls.headers.get("ETag")||void 0;let _s,Qr;if(200===Ls.status){let ma;try{ma=yield Ls.json()}catch(vo){throw Xn.create("fetch-client-parse",{originalErrorMessage:null===(le=vo)||void 0===le?void 0:le.message})}_s=ma.entries,Qr=ma.state}if("INSTANCE_STATE_UNSPECIFIED"===Qr?Bt=500:"NO_CHANGE"===Qr?Bt=304:("NO_TEMPLATE"===Qr||"EMPTY_CONFIG"===Qr)&&(_s={}),304!==Bt&&200!==Bt)throw Xn.create("fetch-status",{httpStatus:Bt});return{status:Bt,eTag:Mr,config:_s}})()}}class ls{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,N.Z)(function*(){const H=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,H)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:H}){var X=this;return(0,N.Z)(function*(){yield function fr(T,S){return new Promise((k,H)=>{const X=Math.max(S-Date.now(),0),le=setTimeout(k,X);T.addEventListener(()=>{clearTimeout(le),H(Xn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const le=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),le}catch(le){if(!function yp(T){if(!(T instanceof ce.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const xe={throttleEndTimeMillis:Date.now()+(0,ce.$s)(H),backoffCount:H+1};return yield X.storage.setThrottleMetadata(xe),X.attemptFetch(S,xe)}})()}}class wp{constructor(S,k,H,X,le){this.app=S,this._client=k,this._storageCache=H,this._storage=X,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function La(T,S){var k;const H=T.target.error||void 0;return Xn.create(S,{originalErrorMessage:H&&(null===(k=H)||void 0===k?void 0:k.message)})}const Uo="app_namespace_store";class cc{constructor(S,k,H,X=function Ip(){return new Promise((T,S)=>{var k;try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=X=>{S(La(X,"storage-open"))},H.onsuccess=X=>{T(X.target.result)},H.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Uo,{keyPath:"compositeKey"})}}catch(H){S(Xn.create("storage-open",{originalErrorMessage:null===(k=H)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=H,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,N.Z)(function*(){const H=yield k.openDbPromise;return new Promise((X,le)=>{var xe;const pt=H.transaction([Uo],"readonly").objectStore(Uo),Ot=k.createCompositeKey(S);try{const Ft=pt.get(Ot);Ft.onerror=bt=>{le(La(bt,"storage-get"))},Ft.onsuccess=bt=>{const Zn=bt.target.result;X(Zn?Zn.value:void 0)}}catch(Ft){le(Xn.create("storage-get",{originalErrorMessage:null===(xe=Ft)||void 0===xe?void 0:xe.message}))}})})()}set(S,k){var H=this;return(0,N.Z)(function*(){const X=yield H.openDbPromise;return new Promise((le,xe)=>{var Be;const Ot=X.transaction([Uo],"readwrite").objectStore(Uo),Ft=H.createCompositeKey(S);try{const bt=Ot.put({compositeKey:Ft,value:k});bt.onerror=Zn=>{xe(La(Zn,"storage-set"))},bt.onsuccess=()=>{le()}}catch(bt){xe(Xn.create("storage-set",{originalErrorMessage:null===(Be=bt)||void 0===Be?void 0:Be.message}))}})})()}delete(S){var k=this;return(0,N.Z)(function*(){const H=yield k.openDbPromise;return new Promise((X,le)=>{var xe;const pt=H.transaction([Uo],"readwrite").objectStore(Uo),Ot=k.createCompositeKey(S);try{const Ft=pt.delete(Ot);Ft.onerror=bt=>{le(La(bt,"storage-delete"))},Ft.onsuccess=()=>{X()}}catch(Ft){le(Xn.create("storage-delete",{originalErrorMessage:null===(xe=Ft)||void 0===xe?void 0:xe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Bo{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,N.Z)(function*(){const k=S.storage.getLastFetchStatus(),H=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),le=yield k;le&&(S.lastFetchStatus=le);const xe=yield H;xe&&(S.lastSuccessfulFetchTimestampMillis=xe);const Be=yield X;Be&&(S.activeConfig=Be)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function d_(){return Il.apply(this,arguments)}function Il(){return(Il=(0,N.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function dc(){(0,ae._registerComponent)(new _e.wA("remote-config",function T(S,{instanceIdentifier:k}){const H=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xn.create("registration-window");if(!(0,ce.hl)())throw Xn.create("indexed-db-unavailable");const{projectId:le,apiKey:xe,appId:Be}=H.options;if(!le)throw Xn.create("registration-project-id");if(!xe)throw Xn.create("registration-api-key");if(!Be)throw Xn.create("registration-app-id");const pt=new cc(Be,H.name,k=k||"firebase"),Ot=new Bo(pt),Ft=new ge.Yd(os);Ft.logLevel=ge.in.ERROR;const bt=new oo(X,ae.SDK_VERSION,k,le,xe,Be),Zn=new ls(bt,pt),yi=new er(Zn,pt,Ot,Ft),ga=new wp(H,yi,Ot,pt,Ft);return function dn(T){const S=(0,ce.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ga),ga},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(os,"0.3.15"),(0,ae.registerVersion)(os,"0.3.15","esm2017")}();const bi="/firebase-messaging-sw.js",jo="/firebase-cloud-messaging-push-scope",xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bl="google.c.a.c_id",lu="google.c.a.c_l",pc="google.c.a.ts",Go="google.c.a.e";var pr=(()=>{return(T=pr||(pr={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",pr;var T})();function us(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tr(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(k),X=new Uint8Array(H.length);for(let le=0;le<H.length;++le)X[le]=H.charCodeAt(le);return X}const ao="fcm_token_details_db",$o="fcm_token_object_Store";function bp(T){return uu.apply(this,arguments)}function uu(){return uu=(0,N.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(ao))return null;let S=null;return(yield(0,fe.X3)(ao,5,{upgrade:(H=(0,N.Z)(function*(X,le,xe,Be){var pt;if(le<2||!X.objectStoreNames.contains($o))return;const Ot=Be.objectStore($o),Ft=yield Ot.index("fcmSenderId").get(T);if(yield Ot.clear(),Ft)if(2===le){const bt=Ft;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;S={token:bt.fcmToken,createTime:null!==(pt=bt.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:us(bt.vapidKey)}}}else if(3===le){const bt=Ft;S={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:us(bt.auth),p256dh:us(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:us(bt.vapidKey)}}}else if(4===le){const bt=Ft;S={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:us(bt.auth),p256dh:us(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:us(bt.vapidKey)}}}}),function(le,xe,Be,pt){return H.apply(this,arguments)})})).close(),yield(0,fe.Lj)(ao),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Fn(S)?S:null;var H}),uu.apply(this,arguments)}function Fn(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ar="firebase-messaging-store";let Ei=null;function El(){return Ei||(Ei=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Ar)}})),Ei}function Wo(T){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,N.Z)(function*(T){const S=gr(T),H=yield(yield El()).transaction(Ar).objectStore(Ar).get(S);if(H)return H;{const X=yield bp(T.appConfig.senderId);if(X)return yield un(T,X),X}})).apply(this,arguments)}function un(T,S){return cu.apply(this,arguments)}function cu(){return(cu=(0,N.Z)(function*(T,S){const k=gr(T),X=(yield El()).transaction(Ar,"readwrite");return yield X.objectStore(Ar).put(S,k),yield X.done,S})).apply(this,arguments)}function Ms(T){return du.apply(this,arguments)}function du(){return(du=(0,N.Z)(function*(T){const S=gr(T),H=(yield El()).transaction(Ar,"readwrite");yield H.objectStore(Ar).delete(S),yield H.done})).apply(this,arguments)}function gr({appConfig:T}){return T.appId}const $n=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Lt(T,S){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,N.Z)(function*(T,S){var k;const H=yield ja(T),X=Re(S),le={method:"POST",headers:H,body:JSON.stringify(X)};let xe;try{xe=yield(yield fetch(lo(T.appConfig),le)).json()}catch(Be){throw $n.create("token-subscribe-failed",{errorInfo:null===(k=Be)||void 0===k?void 0:k.toString()})}if(xe.error)throw $n.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw $n.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function Ep(T,S){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,N.Z)(function*(T,S){var k;const H=yield ja(T),X=Re(S.subscriptionOptions),le={method:"PATCH",headers:H,body:JSON.stringify(X)};let xe;try{xe=yield(yield fetch(`${lo(T.appConfig)}/${S.token}`,le)).json()}catch(Be){throw $n.create("token-update-failed",{errorInfo:null===(k=Be)||void 0===k?void 0:k.toString()})}if(xe.error)throw $n.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw $n.create("token-update-no-token");return xe.token})).apply(this,arguments)}function mc(T,S){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,N.Z)(function*(T,S){var k;const X={method:"DELETE",headers:yield ja(T)};try{const xe=yield(yield fetch(`${lo(T.appConfig)}/${S}`,X)).json();if(xe.error)throw $n.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(le){throw $n.create("token-unsubscribe-failed",{errorInfo:null===(k=le)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function lo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function ja(T){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*({appConfig:T,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Re({p256dh:T,auth:S,endpoint:k,vapidKey:H}){const X={web:{endpoint:k,auth:S,p256dh:T}};return H!==xs&&(X.web.applicationPubKey=H),X}const Yt=6048e5;function _h(T){return qo.apply(this,arguments)}function qo(){return(qo=(0,N.Z)(function*(T){const S=yield yh(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:us(S.getKey("auth")),p256dh:us(S.getKey("p256dh"))},H=yield Wo(T.firebaseDependencies);if(H){if(Tp(H.subscriptionOptions,k))return Date.now()>=H.createTime+Yt?Tl(T,{token:H.token,createTime:Date.now(),subscriptionOptions:k}):H.token;try{yield mc(T.firebaseDependencies,H.token)}catch(X){console.warn(X)}return Dl(T.firebaseDependencies,k)}return Dl(T.firebaseDependencies,k)})).apply(this,arguments)}function oi(T){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,N.Z)(function*(T){const S=yield Wo(T.firebaseDependencies);S&&(yield mc(T.firebaseDependencies,S.token),yield Ms(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Tl(T,S){return $i.apply(this,arguments)}function $i(){return($i=(0,N.Z)(function*(T,S){try{const k=yield Ep(T.firebaseDependencies,S),H=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield un(T.firebaseDependencies,H),k}catch(k){throw yield oi(T),k}})).apply(this,arguments)}function Dl(T,S){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,N.Z)(function*(T,S){const H={token:yield Lt(T,S),createTime:Date.now(),subscriptionOptions:S};return yield un(T,H),H.token})).apply(this,arguments)}function yh(T,S){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,N.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tr(S)})})).apply(this,arguments)}function Tp(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function uo(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function ai(T,S){if(!S.notification)return;T.notification={};const k=S.notification.title;k&&(T.notification.title=k);const H=S.notification.body;H&&(T.notification.body=H);const X=S.notification.image;X&&(T.notification.image=X);const le=S.notification.icon;le&&(T.notification.icon=le)}(S,T),function zr(T,S){!S.data||(T.data=S.data)}(S,T),function $a(T,S){var k,H,X,le,xe;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;T.fcmOptions={};const Be=null!==(X=null===(H=S.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==X?X:null===(le=S.notification)||void 0===le?void 0:le.click_action;Be&&(T.fcmOptions.link=Be);const pt=null===(xe=S.fcmOptions)||void 0===xe?void 0:xe.analytics_label;pt&&(T.fcmOptions.analyticsLabel=pt)}(S,T),S}function Wa(T){return"object"==typeof T&&!!T&&bl in T}function cs(T,S){const k=[];for(let H=0;H<T.length;H++)k.push(T.charAt(H)),H<S.length&&k.push(S.charAt(H));return k.join("")}function hu(T){return $n.create("missing-app-config-values",{valueName:T})}cs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yc{constructor(S,k,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function _c(T){if(!T||!T.options)throw hu("App Configuration Object");if(!T.name)throw hu("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const H of S)if(!k[H])throw hu(H);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:k,analyticsProvider:H}}_delete(){return Promise.resolve()}}function vh(T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,N.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(bi,{scope:jo}),T.swRegistration.update().catch(()=>{})}catch(k){throw $n.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function fu(T,S){return za.apply(this,arguments)}function za(){return(za=(0,N.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield vh(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw $n.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function pu(T,S){return qa.apply(this,arguments)}function qa(){return(qa=(0,N.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=xs)})).apply(this,arguments)}function Qo(){return(Qo=(0,N.Z)(function*(T,S){if(!navigator)throw $n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $n.create("permission-blocked");return yield pu(T,S?.vapidKey),yield fu(T,S?.serviceWorkerRegistration),_h(T)})).apply(this,arguments)}function wh(T,S,k){return Za.apply(this,arguments)}function Za(){return(Za=(0,N.Z)(function*(T,S,k){const H=Ch(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:k[bl],message_name:k[lu],message_time:k[pc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ch(T){switch(T){case pr.NOTIFICATION_CLICKED:return"notification_open";case pr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ks(){return(ks=(0,N.Z)(function*(T,S){const k=S.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===pr.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(uo(k)):T.onMessageHandler.next(uo(k)));const H=k.data;Wa(H)&&"1"===H[Go]&&(yield wh(T,k.messageType,H))})).apply(this,arguments)}const Os="@firebase/messaging",On=T=>{const S=new yc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function wc(T,S){return ks.apply(this,arguments)}(S,k)),S},ds=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:H=>function vc(T,S){return Qo.apply(this,arguments)}(S,H)}};function Ic(){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rn(){(0,ae._registerComponent)(new _e.wA("messaging",On,"PUBLIC")),(0,ae._registerComponent)(new _e.wA("messaging-internal",ds,"PRIVATE")),(0,ae.registerVersion)(Os,"0.11.0"),(0,ae.registerVersion)(Os,"0.11.0","esm2017")}();const ea="analytics",Ec="firebase_id",vu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tc="https://www.googletagmanager.com/gtag/js",Wn=new ge.Yd("@firebase/analytics");function Al(T){return Promise.all(T.map(S=>S.catch(k=>k)))}function xl(T,S){const k=document.createElement("script");k.src=`${Tc}?l=${T}&id=${S}`,k.async=!0,document.head.appendChild(k)}function bh(T,S,k,H,X,le){return kl.apply(this,arguments)}function kl(){return(kl=(0,N.Z)(function*(T,S,k,H,X,le){const xe=H[X];try{if(xe)yield S[xe];else{const pt=(yield Al(k)).find(Ot=>Ot.measurementId===X);pt&&(yield S[pt.appId])}}catch(Be){Wn.error(Be)}T("config",X,le)})).apply(this,arguments)}function hs(T,S,k,H,X){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,N.Z)(function*(T,S,k,H,X){try{let le=[];if(X&&X.send_to){let xe=X.send_to;Array.isArray(xe)||(xe=[xe]);const Be=yield Al(k);for(const pt of xe){const Ot=Be.find(bt=>bt.measurementId===pt),Ft=Ot&&S[Ot.appId];if(!Ft){le=[];break}le.push(Ft)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),T("event",H,X||{})}catch(le){Wn.error(le)}})).apply(this,arguments)}function Dc(T){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(Tc)&&k.src.includes(T))return k;return null}const li=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Qa=new class Cu{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ta(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Dh(T){return zn.apply(this,arguments)}function zn(){return(zn=(0,N.Z)(function*(T){var S;const{appId:k,apiKey:H}=T,X={method:"GET",headers:ta(H)},le=vu.replace("{app-id}",k),xe=yield fetch(le,X);if(200!==xe.status&&304!==xe.status){let Be="";try{const pt=yield xe.json();null!==(S=pt.error)&&void 0!==S&&S.message&&(Be=pt.error.message)}catch{}throw li.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Be})}return xe.json()})).apply(this,arguments)}function Sc(T){return nr.apply(this,arguments)}function nr(){return(nr=(0,N.Z)(function*(T,S=Qa,k){const{appId:H,apiKey:X,measurementId:le}=T.options;if(!H)throw li.create("no-app-id");if(!X){if(le)return{measurementId:le,appId:H};throw li.create("no-api-key")}const xe=S.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new Ja;return setTimeout((0,N.Z)(function*(){Be.abort()}),void 0!==k?k:6e4),Ac({appId:H,apiKey:X,measurementId:le},xe,Be,S)})).apply(this,arguments)}function Ac(T,S,k){return fs.apply(this,arguments)}function fs(){return(fs=(0,N.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:k},H,X=Qa){var le,xe;const{appId:Be,measurementId:pt}=T;try{yield Iu(H,S)}catch(Ot){if(pt)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${null===(le=Ot)||void 0===le?void 0:le.message}]`),{appId:Be,measurementId:pt};throw Ot}try{const Ot=yield Dh(T);return X.deleteThrottleMetadata(Be),Ot}catch(Ot){const Ft=Ot;if(!Ol(Ft)){if(X.deleteThrottleMetadata(Be),pt)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:Be,measurementId:pt};throw Ot}const bt=503===Number(null===(xe=Ft?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,ce.$s)(k,X.intervalMillis,30):(0,ce.$s)(k,X.intervalMillis),Zn={throttleEndTimeMillis:Date.now()+bt,backoffCount:k+1};return X.setThrottleMetadata(Be,Zn),Wn.debug(`Calling attemptFetch again in ${bt} millis`),Ac(T,Zn,H,X)}})).apply(this,arguments)}function Iu(T,S){return new Promise((k,H)=>{const X=Math.max(S-Date.now(),0),le=setTimeout(k,X);T.addEventListener(()=>{clearTimeout(le),H(li.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Ol(T){if(!(T instanceof ce.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Ja{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let co,Nl;function na(){return(na=(0,N.Z)(function*(T,S,k,H,X){if(X&&X.global)T("event",k,H);else{const le=yield S;T("event",k,Object.assign(Object.assign({},H),{send_to:le}))}})).apply(this,arguments)}function oa(T){Nl=T}function bu(T){co=T}function Ns(){return aa.apply(this,arguments)}function aa(){return(aa=(0,N.Z)(function*(){var T;if(!(0,ce.hl)())return Wn.warn(li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(S){return Wn.warn(li.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function la(){return(la=(0,N.Z)(function*(T,S,k,H,X,le,xe){var Be;const pt=Sc(T);pt.then(yi=>{k[yi.measurementId]=yi.appId,T.options.measurementId&&yi.measurementId!==T.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${yi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yi=>Wn.error(yi)),S.push(pt);const Ot=Ns().then(yi=>{if(yi)return H.getId()}),[Ft,bt]=yield Promise.all([pt,Ot]);Dc(le)||xl(le,Ft.measurementId),Nl&&(X("consent","default",Nl),oa(void 0)),X("js",new Date);const Zn=null!==(Be=xe?.config)&&void 0!==Be?Be:{};return Zn.origin="firebase",Zn.update=!0,null!=bt&&(Zn[Ec]=bt),X("config",Ft.measurementId,Zn),co&&(X("set",co),bu(void 0)),Ft.measurementId})).apply(this,arguments)}class Pl{constructor(S){this.app=S}_delete(){return delete Ri[this.app.options.appId],Promise.resolve()}}let Ri={},ua=[];const ho={};let da,Zr,ca="dataLayer",Mc=!1;function xh(T,S,k){!function Dp(){const T=[];if((0,ce.ru)()&&T.push("This is a browser extension environment."),(0,ce.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((H,X)=>`(${X+1}) ${H}`).join(" "),k=li.create("invalid-analytics-context",{errorInfo:S});Wn.warn(k.message)}}();const H=T.options.appId;if(!H)throw li.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw li.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ri[H])throw li.create("already-exists",{id:H});if(!Mc){!function Ml(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(ca);const{wrappedGtag:le,gtagCore:xe}=function Ya(T,S,k,H,X){let le=function(...xe){window[H].push(arguments)};return window[X]&&"function"==typeof window[X]&&(le=window[X]),window[X]=function wu(T,S,k,H){function le(){return(le=(0,N.Z)(function*(xe,Be,pt){try{"event"===xe?yield hs(T,S,k,Be,pt):"config"===xe?yield bh(T,S,k,H,Be,pt):"consent"===xe?T("consent","update",pt):T("set",Be)}catch(Ot){Wn.error(Ot)}})).apply(this,arguments)}return function X(xe,Be,pt){return le.apply(this,arguments)}}(le,T,S,k),{gtagCore:le,wrappedGtag:window[X]}}(Ri,ua,ho,ca,"gtag");Zr=le,da=xe,Mc=!0}return Ri[H]=function Ah(T,S,k,H,X,le,xe){return la.apply(this,arguments)}(T,ua,ho,S,da,ca,k),new Pl(T)}function f_(){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,N.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const ht="@firebase/analytics";!function An(){(0,ae._registerComponent)(new _e.wA(ea,(S,{options:k})=>xh(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ae._registerComponent)(new _e.wA("analytics-internal",function T(S){try{const k=S.getProvider(ea).getImmediate();return{logEvent:(H,X,le)=>function an(T,S,k,H){T=(0,ce.m9)(T),function Xa(T,S,k,H,X){return na.apply(this,arguments)}(Zr,Ri[T.app.options.appId],S,k,H).catch(X=>Wn.error(X))}(k,H,X,le)}}catch(k){throw li.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ae.registerVersion)(ht,"0.8.4"),(0,ae.registerVersion)(ht,"0.8.4","esm2017")}();var ps=V(4408),_i=V(7565);const kc=new class po extends _i.v{}(class fo extends ps.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,H=0){return null!=H&&H>0||null==H&&this.delay>0?super.requestAsyncId(S,k,H):(S.flush(this),0)}});var kh=V(4986),go=V(8505),Tu=V(5363),mo=V(9468);const dt=new l.GfV("7.4.1"),tl="__angularfire_symbol__analyticsIsSupportedValue",Yr="__angularfire_symbol__analyticsIsSupported",Ll="__angularfire_symbol__remoteConfigIsSupportedValue",nl="__angularfire_symbol__remoteConfigIsSupported",Ln="__angularfire_symbol__messagingIsSupportedValue",il="__angularfire_symbol__messagingIsSupported";function rl(T,S,k){if(S){if(1===S.length)return S[0];const le=S.filter(xe=>xe.app===k);if(1===le.length)return le[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[Yr]||(globalThis[Yr]=f_().then(T=>globalThis[tl]=T).catch(()=>globalThis[tl]=!1)),globalThis[il]||(globalThis[il]=Ic().then(T=>globalThis[Ln]=T).catch(()=>globalThis[Ln]=!1)),globalThis[nl]||(globalThis[nl]=d_().then(T=>globalThis[Ll]=T).catch(()=>globalThis[Ll]=!1));const fa=(T,S)=>{const k=S?[S]:(0,$.C6)(),H=[];return k.forEach(X=>{X.container.getProvider(T).instances.forEach(xe=>{H.includes(xe)||H.push(xe)})}),H};function ir(){}class _o{constructor(S,k=kc){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,H){const X=this.zone;return this.delegate.schedule(function(xe){X.runGuarded(()=>{S.apply(this,[xe])})},k,H)}}class Du{constructor(S){this.zone=S,this.task=null}call(S,k){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ir,{},ir,ir)),k.pipe((0,go.b)({next:H,complete:H,error:H})).subscribe(S).add(H)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ps=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new _o(Zone.current)),this.insideAngular=k.run(()=>new _o(Zone.current,kh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(l.LFG(l.R0b))},T.\u0275prov=l.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function rr(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function ei(T){return T.pipe((0,Tu.Q)(rr().outsideAngular))}function ms(T){return rr(),function qn(T){return function(k){return(k=k.lift(new Du(T.ngZone))).pipe((0,mo.R)(T.outsideAngular),(0,Tu.Q)(T.insideAngular))}}(rr())(T)}},8247:(_t,ke,V)=>{V.d(ke,{$:()=>lo,A:()=>z,B:()=>Pe,G:()=>no,H:()=>Ji,J:()=>ls,L:()=>q,M:()=>Il,N:()=>fc,P:()=>kh,Q:()=>bl,R:()=>p_,T:()=>lu,U:()=>xs,V:()=>pr,W:()=>us,X:()=>bp,Y:()=>Va,Z:()=>Lt,_:()=>Ep,a:()=>Rs,a0:()=>_h,a1:()=>oi,a2:()=>Tl,a3:()=>Dl,a4:()=>yh,a5:()=>Tp,a6:()=>ai,a7:()=>zr,a8:()=>Wa,a9:()=>cs,aA:()=>W,aB:()=>pt,aC:()=>ei,aD:()=>Fs,aE:()=>Et,aI:()=>ta,aL:()=>Go,aa:()=>vh,ab:()=>fu,ac:()=>pu,af:()=>wh,ag:()=>Ch,ah:()=>wc,ak:()=>Ar,al:()=>mu,an:()=>Tc,ao:()=>kl,ap:()=>we,aq:()=>Ue,ar:()=>ut,as:()=>tt,at:()=>Ul,au:()=>Mr,av:()=>Pt,aw:()=>Le,ax:()=>oe,ay:()=>yi,az:()=>ee,b:()=>li,c:()=>Ln,d:()=>Oh,e:()=>Vl,f:()=>qn,g:()=>H,h:()=>T,i:()=>aa,j:()=>xe,k:()=>Vh,l:()=>Wi,m:()=>Vs,o:()=>fe,r:()=>ps,s:()=>Kr,u:()=>kc});var l=V(5861),$=V(2090),N=V(9681),ae=V(1877),ce=V(655),_e=V(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},De=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new ae.Yd("@firebase/auth");function it(w,...m){me.logLevel<=ae.in.ERROR&&me.error(`Auth (${N.SDK_VERSION}): ${w}`,...m)}function tt(w,...m){throw Ze(w,...m)}function Le(w,...m){return Ze(w,...m)}function Oe(w,m,_){const I=Object.assign(Object.assign({},De()),{[m]:_});return new $.LL("auth","Firebase",I).create(m,{appName:w.name})}function Ee(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&tt(w,"argument-error"),Oe(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return at.create(w,...m)}function oe(w,m,..._){if(!w)throw Ze(m,..._)}function de(w){const m="INTERNAL ASSERTION FAILED: "+w;throw it(m),new Error(m)}function we(w,m){w||de(m)}const Q=new Map;function ee(w){we(w instanceof Function,"Expected a class definition");let m=Q.get(w);return m?(we(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Q.set(w,m),m)}function He(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===wt()||"https:"===wt()}function wt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ye{constructor(m,_){this.shortDelay=m,this.longDelay=_,we(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function ln(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(w,m){we(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class En{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},on=new Ye(3e4,6e4);function Zt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function Gt(w,m,_,I){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,l.Z)(function*(w,m,_,I,M={}){return Hr(w,M,(0,l.Z)(function*(){let P={},ie={};I&&("GET"===m?ie=I:P={body:JSON.stringify(I)});const Me=(0,$.xO)(Object.assign({key:w.config.apiKey},ie)).slice(1),lt=yield w._getAdditionalHeaders();return lt["Content-Type"]="application/json",w.languageCode&&(lt["X-Firebase-Locale"]=w.languageCode),En.fetch()(Gr(w,w.config.apiHost,_,Me),Object.assign({method:m,headers:lt,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Hr(w,m,_){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,l.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},sn),m);try{const M=new Hi(w),P=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const ie=yield P.json();if("needConfirmation"in ie)throw Gn(w,"account-exists-with-different-credential",ie);if(P.ok&&!("errorMessage"in ie))return ie;{const Me=P.ok?ie.errorMessage:ie.error.message,[lt,St]=Me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw Gn(w,"credential-already-in-use",ie);if("EMAIL_EXISTS"===lt)throw Gn(w,"email-already-in-use",ie);if("USER_DISABLED"===lt)throw Gn(w,"user-disabled",ie);const Qt=I[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(St)throw Oe(w,Qt,St);tt(w,Qt)}}catch(M){if(M instanceof $.ZR)throw M;tt(w,"network-request-failed")}})).apply(this,arguments)}function Pn(w,m,_,I){return jr.apply(this,arguments)}function jr(){return(jr=(0,l.Z)(function*(w,m,_,I,M={}){const P=yield Gt(w,m,_,I,M);return"mfaPendingCredential"in P&&tt(w,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Gr(w,m,_,I){const M=`${m}${_}?${I}`;return w.config.emulator?fn(w.config,M):`${w.config.apiScheme}://${M}`}class Hi{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Le(this.auth,"network-request-failed")),on.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const M=Le(w,m,I);return M.customData._tokenResponse=_,M}function $r(){return($r=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function nt(w,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Yn(w,m){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function gi(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Tn(){return(Tn=(0,l.Z)(function*(w,m=!1){const _=(0,$.m9)(w),I=yield _.getIdToken(m),M=Ct(I);oe(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,ie=P?.sign_in_provider;return{claims:M,token:I,authTime:gi(vn(M.auth_time)),issuedAtTime:gi(vn(M.iat)),expirationTime:gi(vn(M.exp)),signInProvider:ie||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function vn(w){return 1e3*Number(w)}function Ct(w){var m;const[_,I,M]=w.split(".");if(void 0===_||void 0===I||void 0===M)return it("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,$.tV)(I);return P?JSON.parse(P):(it("Failed to decode base64 JWT payload"),null)}catch(P){return it("Caught error parsing JWT payload as JSON",null===(m=P)||void 0===m?void 0:m.toString()),null}}function Nt(w,m){return ji.apply(this,arguments)}function ji(){return(ji=(0,l.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof $.ZR&&Qn(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function Qn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Mi{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,l.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,l.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(_=I)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class kt{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gi(this.lastLoginAt),this.creationTime=gi(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ki(w){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,l.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),M=yield Nt(w,Yn(_,{idToken:I}));oe(M?.users.length,_,"internal-error");const P=M.users[0];w._notifyReloadListener(P);const ie=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?Mn(P.providerUserInfo):[],Me=di(w.providerData,ie),Qt=!!w.isAnonymous&&!(w.email&&P.passwordHash||Me?.length),mn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Me,metadata:new kt(P.createdAt,P.lastLoginAt),isAnonymous:Qt};Object.assign(w,mn)})).apply(this,arguments)}function en(){return(en=(0,l.Z)(function*(w){const m=(0,$.m9)(w);yield ki(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function di(w,m){return[...w.filter(I=>!m.some(M=>M.providerId===I.providerId)),...m]}function Mn(w){return w.map(m=>{var{providerId:_}=m,I=(0,ce._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Se(){return(Se=(0,l.Z)(function*(w,m){const _=yield Hr(w,{},(0,l.Z)(function*(){const I=(0,$.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:P}=w.config,ie=Gr(w,M,"/v1/token",`key=${P}`),Me=yield w._getAdditionalHeaders();return Me["Content-Type"]="application/x-www-form-urlencoded",En.fetch()(ie,{method:"POST",headers:Me,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){oe(m.idToken,"internal-error"),oe(typeof m.idToken<"u","internal-error"),oe(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function It(w){const m=Ct(w);return oe(m,"internal-error"),oe(typeof m.exp<"u","internal-error"),oe(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,l.Z)(function*(){return oe(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:ie}=yield function st(w,m){return Se.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(M,P,Number(ie))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:M,expirationTime:P}=_,ie=new ot;return I&&(oe("string"==typeof I,"internal-error",{appName:m}),ie.refreshToken=I),M&&(oe("string"==typeof M,"internal-error",{appName:m}),ie.accessToken=M),P&&(oe("number"==typeof P,"internal-error",{appName:m}),ie.expirationTime=P),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ot,this.toJSON())}_performRefresh(){return de("not implemented")}}function Dt(w,m){oe("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class At{constructor(m){var{uid:_,auth:I,stsTokenManager:M}=m,P=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new kt(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,l.Z)(function*(){const I=yield Nt(_,_.stsTokenManager.getToken(_.auth,m));return oe(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function In(w){return Tn.apply(this,arguments)}(this,m)}reload(){return function Qi(w){return en.apply(this,arguments)}(this)}_assign(m){this!==m&&(oe(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new At(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,l.Z)(function*(){let M=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield ki(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,l.Z)(function*(){const _=yield m.getIdToken();return yield Nt(m,function Dr(w,m){return $r.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,M,P,ie,Me,lt,St,Qt;const mn=null!==(I=_.displayName)&&void 0!==I?I:void 0,zi=null!==(M=_.email)&&void 0!==M?M:void 0,Jr=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Vc=null!==(ie=_.photoURL)&&void 0!==ie?ie:void 0,Uc=null!==(Me=_.tenantId)&&void 0!==Me?Me:void 0,Bc=null!==(lt=_._redirectEventId)&&void 0!==lt?lt:void 0,ol=null!==(St=_.createdAt)&&void 0!==St?St:void 0,Op=null!==(Qt=_.lastLoginAt)&&void 0!==Qt?Qt:void 0,{uid:Gh,emailVerified:Hc,isAnonymous:Mu,providerData:ku,stsTokenManager:_a}=_;oe(Gh&&_a,m,"internal-error");const v_=ot.fromJSON(this.name,_a);oe("string"==typeof Gh,m,"internal-error"),Dt(mn,m.name),Dt(zi,m.name),oe("boolean"==typeof Hc,m,"internal-error"),oe("boolean"==typeof Mu,m,"internal-error"),Dt(Jr,m.name),Dt(Vc,m.name),Dt(Uc,m.name),Dt(Bc,m.name),Dt(ol,m.name),Dt(Op,m.name);const Vn=new At({uid:Gh,auth:m,email:zi,emailVerified:Hc,displayName:mn,isAnonymous:Mu,photoURL:Vc,phoneNumber:Jr,tenantId:Uc,stsTokenManager:v_,createdAt:ol,lastLoginAt:Op});return ku&&Array.isArray(ku)&&(Vn.providerData=ku.map(Rp=>Object.assign({},Rp))),Bc&&(Vn._redirectEventId=Bc),Vn}static _fromIdTokenResponse(m,_,I=!1){return(0,l.Z)(function*(){const M=new ot;M.updateFromServerResponse(_);const P=new At({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:I});return yield ki(P),P})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(_,I){var M=this;return(0,l.Z)(function*(){M.storage[_]=I})()}_get(_){var I=this;return(0,l.Z)(function*(){const M=I.storage[_];return void 0===M?null:M})()}_remove(_){var I=this;return(0,l.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function W(w,m,_){return`firebase:${w}:${m}:${_}`}class Y{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:M,name:P}=this.auth;this.fullUserKey=W(this.userKey,M.apiKey,P),this.fullPersistenceKey=W("persistence",M.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?At._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,l.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,l.Z)(function*(){if(!_.length)return new Y(ee(q),m,I);const M=(yield Promise.all(_.map(function(){var St=(0,l.Z)(function*(Qt){if(yield Qt._isAvailable())return Qt});return function(Qt){return St.apply(this,arguments)}}()))).filter(St=>St);let P=M[0]||ee(q);const ie=W(I,m.config.apiKey,m.name);let Me=null;for(const St of _)try{const Qt=yield St._get(ie);if(Qt){const mn=At._fromJSON(m,Qt);St!==P&&(Me=mn),P=St;break}}catch{}const lt=M.filter(St=>St._shouldAllowMigration);return P._shouldAllowMigration&&lt.length?(P=lt[0],Me&&(yield P._set(ie,Me.toJSON())),yield Promise.all(_.map(function(){var St=(0,l.Z)(function*(Qt){if(Qt!==P)try{yield Qt._remove(ie)}catch{}});return function(Qt){return St.apply(this,arguments)}}())),new Y(P,m,I)):new Y(P,m,I)})()}}function j(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Fe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(ct(m))return"Blackberry";if(Ae(m))return"Webos";if(B(m))return"Safari";if((m.includes("chrome/")||re(m))&&!m.includes("edge/"))return"Chrome";if(ut(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function re(w=(0,$.z$)()){return/crios\//i.test(w)}function Fe(w=(0,$.z$)()){return/iemobile/i.test(w)}function ut(w=(0,$.z$)()){return/android/i.test(w)}function ct(w=(0,$.z$)()){return/blackberry/i.test(w)}function Ae(w=(0,$.z$)()){return/webos/i.test(w)}function Ue(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Pt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function gn(w=(0,$.z$)()){return Ue(w)||ut(w)||Ae(w)||ct(w)||/windows phone/i.test(w)||Fe(w)}function Dn(w,m=[]){let _;switch(w){case"Browser":_=j((0,$.z$)());break;case"Worker":_=`${j((0,$.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${I}`}class eo{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=P=>new Promise((ie,Me)=>{try{ie(m(P))}catch(lt){Me(lt)}});I.onAbort=_,this.queue.push(I);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,l.Z)(function*(){var I;if(_.auth.currentUser===m)return;const M=[];try{for(const P of _.queue)yield P(m),P.onAbort&&M.push(P.onAbort)}catch(P){M.reverse();for(const ie of M)try{ie()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=P)||void 0===I?void 0:I.message})}})()}}class Lo{constructor(m,_,I){this.app=m,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new to(this),this.idTokenSubscription=new to(this),this.beforeStateQueue=new eo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=ee(_)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,P;if(!I._deleted&&(I.persistenceManager=yield Y.create(I,m),!I._deleted)){if(null!==(M=I._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,l.Z)(function*(){var I;const M=yield _.assertedPersistence.getCurrentUser();let P=M,ie=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Me=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,lt=P?._redirectEventId,St=yield _.tryRedirectSignIn(m);(!Me||Me===lt)&&St?.user&&(P=St.user,ie=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(ie)try{yield _.beforeStateQueue.runMiddleware(P)}catch(Me){P=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Me))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return oe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,l.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,l.Z)(function*(){var I;try{yield ki(m)}catch(M){if("auth/network-request-failed"!==(null===(I=M)||void 0===I?void 0:I.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function $t(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,l.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,l.Z)(function*(){const I=m?(0,$.m9)(m):null;return I&&oe(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,l.Z)(function*(){if(!I._deleted)return m&&oe(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,l.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,l.Z)(function*(){yield _.assertedPersistence.setPersistence(ee(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new $.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,l.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,l.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&ee(m)||_._popupRedirectResolver;oe(I,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ee(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,l.Z)(function*(){var I,M;return _._isInitialized&&(yield _.queue((0,l.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,l.Z)(function*(){if(m===_.currentUser)return _.queue((0,l.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,M){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(ie,this,"internal-error"),ie.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,I,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,l.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Dn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(I["X-Firebase-Client"]=M),I})()}}function Et(w){return(0,$.m9)(w)}class to{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function no(w,m,_){const I=Et(w);oe(I._canInitEmulator,I,"emulator-config-failed"),oe(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const M=!!_?.disableWarnings,P=Cl(m),{host:ie,port:Me}=function os(w){const m=Cl(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const P=M[1];return{host:P,port:Jn(I.substr(P.length+1))}}{const[P,ie]=I.split(":");return{host:P,port:Jn(ie)}}}(m);I.config.emulator={url:`${P}//${ie}${null===Me?"":`:${Me}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ie,port:Me,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function io(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Cl(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Jn(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Ji{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return de("not implemented")}_getIdTokenResponse(m){return de("not implemented")}_linkToIdToken(m,_){return de("not implemented")}_getReauthenticationResolver(m){return de("not implemented")}}function cr(w,m){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:resetPassword",Zt(w,m))})).apply(this,arguments)}function su(w,m){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ph(w,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:update",Zt(w,m))})).apply(this,arguments)}function ro(){return(ro=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signInWithPassword",Zt(w,m))})).apply(this,arguments)}function dr(w,m){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:sendOobCode",Zt(w,m))})).apply(this,arguments)}function as(w,m){return dn.apply(this,arguments)}function dn(){return(dn=(0,l.Z)(function*(w,m){return dr(w,m)})).apply(this,arguments)}function gh(w,m){return si.apply(this,arguments)}function si(){return(si=(0,l.Z)(function*(w,m){return dr(w,m)})).apply(this,arguments)}function hr(w,m){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,l.Z)(function*(w,m){return dr(w,m)})).apply(this,arguments)}function ou(w,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,l.Z)(function*(w,m){return dr(w,m)})).apply(this,arguments)}function au(){return(au=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signInWithEmailLink",Zt(w,m))})).apply(this,arguments)}function er(){return(er=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signInWithEmailLink",Zt(w,m))})).apply(this,arguments)}class Gi extends Ji{constructor(m,_,I,M=null){super("password",I),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new Gi(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new Gi(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,l.Z)(function*(){switch(_.signInMethod){case"password":return function Pa(w,m){return ro.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Xi(w,m){return au.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:tt(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,l.Z)(function*(){switch(I.signInMethod){case"password":return su(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function _p(w,m){return er.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:tt(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function oo(w,m){return fr.apply(this,arguments)}function fr(){return(fr=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signInWithIdp",Zt(w,m))})).apply(this,arguments)}class ls extends Ji{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new ls(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):tt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M}=_,P=(0,ce._T)(_,["providerId","signInMethod"]);if(!I||!M)return null;const ie=new ls(I,M);return ie.idToken=P.idToken||void 0,ie.accessToken=P.accessToken||void 0,ie.secret=P.secret,ie.nonce=P.nonce,ie.pendingToken=P.pendingToken||null,ie}_getIdTokenResponse(m){return oo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,oo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,oo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,$.xO)(_)}return m}}function vp(w,m){return lc.apply(this,arguments)}function lc(){return(lc=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:sendVerificationCode",Zt(w,m))})).apply(this,arguments)}function La(){return(La=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signInWithPhoneNumber",Zt(w,m))})).apply(this,arguments)}function uc(){return(uc=(0,l.Z)(function*(w,m){const _=yield Pn(w,"POST","/v1/accounts:signInWithPhoneNumber",Zt(w,m));if(_.temporaryProof)throw Gn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Cp={USER_NOT_FOUND:"user-not-found"};function cc(){return(cc=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signInWithPhoneNumber",Zt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Cp)})).apply(this,arguments)}class Bo extends Ji{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Bo({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Bo({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function wp(w,m){return La.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Uo(w,m){return uc.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Ip(w,m){return cc.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:P}=m;return I||_||M||P?new Bo({verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:P}):null}}class Ho{constructor(m){var _,I,M,P,ie,Me;const lt=(0,$.zd)((0,$.pd)(m)),St=null!==(_=lt.apiKey)&&void 0!==_?_:null,Qt=null!==(I=lt.oobCode)&&void 0!==I?I:null,mn=function dc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=lt.mode)&&void 0!==M?M:null);oe(St&&Qt&&mn,"argument-error"),this.apiKey=St,this.operation=mn,this.code=Qt,this.continueUrl=null!==(P=lt.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(ie=lt.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Me=lt.tenantId)&&void 0!==Me?Me:null}static parseLink(m){const _=function hc(w){const m=(0,$.zd)((0,$.pd)(w)).link,_=m?(0,$.zd)((0,$.pd)(m)).deep_link_id:null,I=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(I?(0,$.zd)((0,$.pd)(I)).link:null)||I||_||m||w}(m);try{return new Ho(_)}catch{return null}}}let Il=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return Gi._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const M=Ho.parseLink(I);return oe(M,"argument-error"),Gi._fromEmailAndCode(_,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class bi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class jo extends bi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class xs extends jo{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return oe("providerId"in _&&"signInMethod"in _,"argument-error"),ls._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return oe(m.idToken||m.accessToken,"argument-error"),ls._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return xs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return xs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:P,nonce:ie,providerId:Me}=m;if(!I&&!M&&!_&&!P||!Me)return null;try{return new xs(Me)._credential({idToken:_,accessToken:I,nonce:ie,pendingToken:P})}catch{return null}}}let fc=(()=>{class w extends jo{constructor(){super("facebook.com")}static credential(_){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),bl=(()=>{class w extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:M}=_;if(!I&&!M)return null;try{return w.credential(I,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),lu=(()=>{class w extends jo{constructor(){super("github.com")}static credential(_){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Go extends Ji{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return oo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,oo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,oo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M,pendingToken:P}=_;return I&&M&&P&&I===M?new Go(I,P):null}static _create(m,_){return new Go(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pr extends bi{constructor(m){oe(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return pr.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return pr.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Go.fromJSON(m);return oe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return Go._create(I,_)}catch{return null}}}let us=(()=>{class w extends jo{constructor(){super("twitter.com")}static credential(_,I){return ls._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=_;if(!I||!M)return null;try{return w.credential(I,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function tr(w,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signUp",Zt(w,m))})).apply(this,arguments)}class Sr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,M=!1){return(0,l.Z)(function*(){const P=yield At._fromIdTokenResponse(m,I,M),ie=$o(I);return new Sr({user:P,providerId:ie,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,l.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const M=$o(I);return new Sr({user:m,providerId:M,_tokenResponse:I,operationType:_})})()}}function $o(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function bp(w){return uu.apply(this,arguments)}function uu(){return(uu=(0,l.Z)(function*(w){var m;const _=Et(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Sr({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield tr(_,{returnSecureToken:!0}),M=yield Sr._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Fn extends $.ZR{constructor(m,_,I,M){var P;super(_.code,_.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,Fn.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,M){return new Fn(m,_,I,M)}}function gc(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Fn._fromErrorAndOperation(w,P,m,I):P})}function mh(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Ar(w,m){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w);yield Wr(!0,_,m);const{providerUserInfo:I}=yield nt(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=mh(I||[]);return _.providerData=_.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function El(w,m){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,l.Z)(function*(w,m,_=!1){const I=yield Nt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return Sr._forOperation(w,"link",I)})).apply(this,arguments)}function Wr(w,m,_){return un.apply(this,arguments)}function un(){return(un=(0,l.Z)(function*(w,m,_){yield ki(m);const M=!1===w?"provider-already-linked":"no-such-provider";oe(mh(m.providerData).has(_)===w,m.auth,M)})).apply(this,arguments)}function cu(w,m){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,l.Z)(function*(w,m,_=!1){var I;const{auth:M}=w,P="reauthenticate";try{const ie=yield Nt(w,gc(M,P,m,w),_);oe(ie.idToken,M,"internal-error");const Me=Ct(ie.idToken);oe(Me,M,"internal-error");const{sub:lt}=Me;return oe(w.uid===lt,M,"user-mismatch"),Sr._forOperation(w,P,ie)}catch(ie){throw"auth/user-not-found"===(null===(I=ie)||void 0===I?void 0:I.code)&&tt(M,"user-mismatch"),ie}})).apply(this,arguments)}function du(w,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,l.Z)(function*(w,m,_=!1){const I="signIn",M=yield gc(w,I,m),P=yield Sr._fromIdTokenResponse(w,I,M);return _||(yield w._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Va(w,m){return $n.apply(this,arguments)}function $n(){return($n=(0,l.Z)(function*(w,m){return du(Et(w),m)})).apply(this,arguments)}function Lt(w,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w);return yield Wr(!1,_,m.providerId),El(_,m)})).apply(this,arguments)}function Ep(w,m){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,l.Z)(function*(w,m){return cu((0,$.m9)(w),m)})).apply(this,arguments)}function mc(w,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,l.Z)(function*(w,m){return Pn(w,"POST","/v1/accounts:signInWithCustomToken",Zt(w,m))})).apply(this,arguments)}function lo(w,m){return ja.apply(this,arguments)}function ja(){return(ja=(0,l.Z)(function*(w,m){const _=Et(w),I=yield mc(_,{token:m,returnSecureToken:!0}),M=yield Sr._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class zo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Re._fromServerResponse(m,_):tt(m,"internal-error")}}class Re extends zo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Re(_)}}function Yt(w,m,_){var I;oe((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),oe(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(oe(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(oe(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function _h(w,m,_){return qo.apply(this,arguments)}function qo(){return(qo=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M={requestType:"PASSWORD_RESET",email:m};_&&Yt(I,M,_),yield gh(I,M)})).apply(this,arguments)}function oi(w,m,_){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,l.Z)(function*(w,m,_){yield cr((0,$.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Tl(w,m){return $i.apply(this,arguments)}function $i(){return($i=(0,l.Z)(function*(w,m){yield ph((0,$.m9)(w),{oobCode:m})})).apply(this,arguments)}function Dl(w,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w),I=yield cr(_,{oobCode:m}),M=I.requestType;switch(oe(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(I.mfaInfo,_,"internal-error");default:oe(I.email,_,"internal-error")}let P=null;return I.mfaInfo&&(P=zo._fromServerResponse(Et(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function yh(w,m){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,l.Z)(function*(w,m){const{data:_}=yield Dl((0,$.m9)(w),m);return _.email})).apply(this,arguments)}function Tp(w,m,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(w,m,_){const I=Et(w),M=yield tr(I,{returnSecureToken:!0,email:m,password:_}),P=yield Sr._fromIdTokenResponse(I,"signIn",M);return yield I._updateCurrentUser(P.user),P})).apply(this,arguments)}function ai(w,m,_){return Va((0,$.m9)(w),Il.credential(m,_))}function zr(w,m,_){return $a.apply(this,arguments)}function $a(){return($a=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M={requestType:"EMAIL_SIGNIN",email:m};oe(_.handleCodeInApp,I,"argument-error"),_&&Yt(I,M,_),yield hr(I,M)})).apply(this,arguments)}function Wa(w,m){return"EMAIL_SIGNIN"===Ho.parseLink(m)?.operation}function cs(w,m,_){return _c.apply(this,arguments)}function _c(){return(_c=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M=Il.credentialWithLink(m,_||He());return oe(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Va(I,M)})).apply(this,arguments)}function hu(w,m){return yc.apply(this,arguments)}function yc(){return(yc=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:createAuthUri",Zt(w,m))})).apply(this,arguments)}function vh(w,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,l.Z)(function*(w,m){const I={identifier:m,continueUri:je()?He():"http://localhost"},{signinMethods:M}=yield hu((0,$.m9)(w),I);return M||[]})).apply(this,arguments)}function fu(w,m){return za.apply(this,arguments)}function za(){return(za=(0,l.Z)(function*(w,m){const _=(0,$.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Yt(_.auth,M,m);const{email:P}=yield as(_.auth,M);P!==w.email&&(yield w.reload())})).apply(this,arguments)}function pu(w,m,_){return qa.apply(this,arguments)}function qa(){return(qa=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Yt(I.auth,P,_);const{email:ie}=yield ou(I.auth,P);ie!==w.email&&(yield w.reload())})).apply(this,arguments)}function vc(w,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(w,m){return Gt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function wh(w,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,l.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,$.m9)(w),P={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ie=yield Nt(I,vc(I.auth,P));I.displayName=ie.displayName||null,I.photoURL=ie.photoUrl||null;const Me=I.providerData.find(({providerId:lt})=>"password"===lt);Me&&(Me.displayName=I.displayName,Me.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ie)})).apply(this,arguments)}function Ch(w,m){return ks((0,$.m9)(w),m,null)}function wc(w,m){return ks((0,$.m9)(w),null,m)}function ks(w,m,_){return Os.apply(this,arguments)}function Os(){return(Os=(0,l.Z)(function*(w,m,_){const{auth:I}=w,P={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const ie=yield Nt(w,su(I,P));yield w._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class On{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class ds extends On{constructor(m,_,I,M){super(m,_,I),this.username=M}}class Rn extends On{constructor(m,_){super(m,"facebook.com",_)}}class Ic extends ds{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class gu extends On{constructor(m,_){super(m,"google.com",_)}}class Ih extends ds{constructor(m,_,I){super(m,"twitter.com",_,I)}}function mu(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Cc(w){var m,_;if(!w)return null;const{providerId:I}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},P=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const ie=null===(_=null===(m=Ct(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ie)return new On(P,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!I)return null;switch(I){case"facebook.com":return new Rn(P,M);case"github.com":return new Ic(P,M);case"google.com":return new gu(P,M);case"twitter.com":return new Ih(P,M,w.screenName||null);case"custom":case"anonymous":return new On(P,null);default:return new On(P,I,M)}}(_)}class mr{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new mr("enroll",m,_)}static _fromMfaPendingCredential(m){return new mr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return mr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return mr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class vu{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Et(m),M=_.customData._serverResponse,P=(M.mfaInfo||[]).map(Me=>zo._fromServerResponse(I,Me));oe(M.mfaPendingCredential,I,"internal-error");const ie=mr._fromMfaPendingCredential(M.mfaPendingCredential);return new vu(ie,P,function(){var Me=(0,l.Z)(function*(lt){const St=yield lt._process(I,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const Qt=Object.assign(Object.assign({},M),{idToken:St.idToken,refreshToken:St.refreshToken});switch(_.operationType){case"signIn":const mn=yield Sr._fromIdTokenResponse(I,_.operationType,Qt);return yield I._updateCurrentUser(mn.user),mn;case"reauthenticate":return oe(_.user,I,"internal-error"),Sr._forOperation(_.user,_.operationType,Qt);default:tt(I,"internal-error")}});return function(lt){return Me.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,l.Z)(function*(){return _.signInResolver(m)})()}}function Tc(w,m){var _;const I=(0,$.m9)(w),M=m;return oe(m.customData.operationType,I,"argument-error"),oe(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),vu._fromError(I,M)}function Wn(w,m){return Gt(w,"POST","/v2/accounts/mfaEnrollment:start",Zt(w,m))}class Ml{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>zo._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Ml(m)}getSession(){var m=this;return(0,l.Z)(function*(){return mr._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,l.Z)(function*(){const M=m,P=yield I.getSession(),ie=yield Nt(I.user,M._process(I.user.auth,P,_));return yield I.user._updateTokensIfNecessary(ie),I.user.reload()})()}unenroll(m){var _=this;return(0,l.Z)(function*(){var I;const M="string"==typeof m?m:m.uid,P=yield _.user.getIdToken(),ie=yield Nt(_.user,function xl(w,m){return Gt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(w,m))}(_.user.auth,{idToken:P,mfaEnrollmentId:M}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Me})=>Me!==M),yield _.user._updateTokensIfNecessary(ie);try{yield _.user.reload()}catch(Me){if("auth/user-token-expired"!==(null===(I=Me)||void 0===I?void 0:I.code))throw Me}})()}}const bh=new WeakMap;function kl(w){const m=(0,$.m9)(w);return bh.has(m)||bh.set(m,Ml._fromUser(m)),bh.get(m)}const hs="__sak";class Ka{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(hs,"1"),this.storage.removeItem(hs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const li=(()=>{class w extends Ka{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wu(){const w=(0,$.z$)();return B(w)||Ue(w)}()&&function ss(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),P=this.localCache[I];M!==P&&_(I,P,M)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Me,lt,St)=>{this.notifyListeners(Me,St)});const M=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Me=this.storage.getItem(M);if(_.newValue!==Me)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!I)return}const P=()=>{const Me=this.storage.getItem(M);!I&&this.localCache[M]===Me||this.notifyListeners(M,Me)},ie=this.storage.getItem(M);!function Ut(){return(0,$.w1)()&&10===document.documentMode}()||ie===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var M=()=>super._set,P=this;return(0,l.Z)(function*(){yield M().call(P,_,I),P.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,M=this;return(0,l.Z)(function*(){const P=yield I().call(M,_);return M.localCache[_]=JSON.stringify(P),P})()}_remove(_){var I=()=>super._remove,M=this;return(0,l.Z)(function*(){yield I().call(M,_),delete M.localCache[_]})()}}return w.type="LOCAL",w})(),Rs=(()=>{class w extends Ka{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Qa=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(P=>P.isListeningto(_));if(I)return I;const M=new w(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,l.Z)(function*(){const M=_,{eventId:P,eventType:ie,data:Me}=M.data,lt=I.handlersMap[ie];if(!lt?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:ie});const St=Array.from(lt).map(function(){var mn=(0,l.Z)(function*(zi){return zi(M.origin,Me)});return function(zi){return mn.apply(this,arguments)}}()),Qt=yield function Cu(w){return Promise.all(w.map(function(){var m=(0,l.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(St);M.ports[0].postMessage({status:"done",eventId:P,eventType:ie,response:Qt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ta(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class Dh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var M=this;return(0,l.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let ie,Me;return new Promise((lt,St)=>{const Qt=ta("",20);P.port1.start();const mn=setTimeout(()=>{St(new Error("unsupported_event"))},I);Me={messageChannel:P,onMessage(zi){const Jr=zi;if(Jr.data.eventId===Qt)switch(Jr.data.status){case"ack":clearTimeout(mn),ie=setTimeout(()=>{St(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),lt(Jr.data.response);break;default:clearTimeout(mn),clearTimeout(ie),St(new Error("invalid_response"))}}},M.handlers.add(Me),P.port1.addEventListener("message",Me.onMessage),M.target.postMessage({eventType:m,eventId:Qt,data:_},[P.port2])}).finally(()=>{Me&&M.removeMessageHandler(Me)})})()}}function zn(){return window}function nr(){return typeof zn().WorkerGlobalScope<"u"&&"function"==typeof zn().importScripts}function fs(){return(fs=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ja="firebaseLocalStorageDb",Xa="firebaseLocalStorage",na="fbase_key";class ia{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ra(w,m){return w.transaction([Xa],m?"readwrite":"readonly").objectStore(Xa)}function Rl(){const w=indexedDB.open(Ja,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Xa,{keyPath:na})}catch(M){_(M)}}),w.addEventListener("success",(0,l.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Xa)?m(I):(I.close(),yield function xc(){const w=indexedDB.deleteDatabase(Ja);return new ia(w).toPromise()}(),m(yield Rl()))}))})}function el(w,m,_){return qr.apply(this,arguments)}function qr(){return(qr=(0,l.Z)(function*(w,m,_){const I=ra(w,!0).put({[na]:m,value:_});return new ia(I).toPromise()})).apply(this,arguments)}function sa(){return(sa=(0,l.Z)(function*(w,m){const _=ra(w,!1).get(m),I=yield new ia(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Nl(w,m){const _=ra(w,!0).delete(m);return new ia(_).toPromise()}const aa=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,l.Z)(function*(){return _.db||(_.db=yield Rl()),_.db})()}_withRetries(_){var I=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const P=yield I._openDb();return yield _(P)}catch(P){if(M++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,l.Z)(function*(){return nr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,l.Z)(function*(){_.receiver=Qa._getInstance(function Ol(){return nr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,l.Z)(function*(M,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(M,P){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,l.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,l.Z)(function*(){var I,M;if(_.activeServiceWorker=yield function Ac(){return fs.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Dh(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(I=P[0])||void 0===I?void 0:I.fulfilled)&&(null===(M=P[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,l.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Iu(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Rl();return yield el(_,hs,"1"),yield Nl(_,hs),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,l.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(P=>el(P,_,I)),M.localCache[_]=I,M.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,l.Z)(function*(){const M=yield I._withRetries(P=>function Sh(w,m){return sa.apply(this,arguments)}(P,_));return I.localCache[_]=M,M})()}_remove(_){var I=this;return(0,l.Z)(function*(){return I._withPendingWrite((0,l.Z)(function*(){return yield I._withRetries(M=>Nl(M,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,l.Z)(function*(){const I=yield _._withRetries(ie=>{const Me=ra(ie,!1).getAll();return new ia(Me).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:ie,value:Me}of I)P.add(ie),JSON.stringify(_.localCache[ie])!==JSON.stringify(Me)&&(_.notifyListeners(ie,Me),M.push(ie));for(const ie of Object.keys(_.localCache))_.localCache[ie]&&!P.has(ie)&&(_.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ah(w,m){return Gt(w,"POST","/v2/accounts/mfaSignIn:start",Zt(w,m))}function Ri(){return(Ri=(0,l.Z)(function*(w){return(yield Gt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ho(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=M=>{const P=Le("internal-error");P.customData=M,_(P)},I.type="text/javascript",I.charset="UTF-8",function ua(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function ca(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Zr=1e12;class Mc{constructor(m){this.auth=m,this.counter=Zr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new Sn(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||Zr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Zr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,l.Z)(function*(){var I;return null===(I=_._widgets.get(m||Zr))||void 0===I||I.execute(),""})()}}class Sn{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;oe(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dp(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xh=ca("rcb"),P0=new Ye(3e4,6e4);class f_{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=zn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return oe(function Mh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(zn().grecaptcha):new Promise((I,M)=>{const P=zn().setTimeout(()=>{M(Le(m,"network-request-failed"))},P0.get());zn()[xh]=()=>{zn().clearTimeout(P),delete zn()[xh];const Me=zn().grecaptcha;if(!Me)return void M(Le(m,"internal-error"));const lt=Me.render;Me.render=(St,Qt)=>{const mn=lt(St,Qt);return this.counter++,mn},this.hostLanguage=_,I(Me)},ho(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:xh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),M(Le(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=zn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class F0{load(m){return(0,l.Z)(function*(){return new Mc(m)})()}clearedOneInstance(){}}const Fl="recaptcha",L0={theme:"light",type:"image"};class p_{constructor(m,_=Object.assign({},L0),I){this.parameters=_,this.type=Fl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(I),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;oe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new F0:new f_,this.validateStartingState()}verify(){var m=this;return(0,l.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(P=>{const ie=Me=>{!Me||(m.tokenChangeListeners.delete(ie),P(Me))};m.tokenChangeListeners.add(ie),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=zn()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.Z)(function*(){oe(je()&&!nr(),m.auth,"internal-error"),yield function mi(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Pl(w){return Ri.apply(this,arguments)}(m.auth);oe(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class an{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Bo._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Kr(w,m,_){return ht.apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(w,m,_){const I=Et(w),M=yield _i(I,m,(0,$.m9)(_));return new an(M,P=>Va(I,P))})).apply(this,arguments)}function Wi(w,m,_){return An.apply(this,arguments)}function An(){return(An=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);yield Wr(!1,I,"phone");const M=yield _i(I.auth,m,(0,$.m9)(_));return new an(M,P=>Lt(I,P))})).apply(this,arguments)}function ps(w,m,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w),M=yield _i(I.auth,m,(0,$.m9)(_));return new an(M,P=>Ep(I,P))})).apply(this,arguments)}function _i(w,m,_){return po.apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(w,m,_){var I;const M=yield _.verify();try{let P;if(oe("string"==typeof M,w,"argument-error"),oe(_.type===Fl,w,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const ie=P.session;if("phoneNumber"in P)return oe("enroll"===ie.type,w,"internal-error"),(yield Wn(w,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{oe("signin"===ie.type,w,"internal-error");const Me=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return oe(Me,w,"missing-multi-factor-info"),(yield Ah(w,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Me,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield vp(w,{phoneNumber:P.phoneNumber,recaptchaToken:M});return ie}}finally{_._reset()}})).apply(this,arguments)}function kc(w,m){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,l.Z)(function*(w,m){yield El((0,$.m9)(w),m)})).apply(this,arguments)}let kh=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Et(_)}verifyPhoneNumber(_,I){return _i(this.auth,_,(0,$.m9)(I))}static credential(_,I){return Bo._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:M}=_;return I&&M?Bo._fromTokenResponse(I,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function go(w,m){return m?ee(m):(oe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Tu extends Ji{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return oo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return oo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return oo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function mo(w){return du(w.auth,new Tu(w),w.bypassAuthState)}function dt(w){const{auth:m,user:_}=w;return oe(_,m,"internal-error"),cu(_,new Tu(w),w.bypassAuthState)}function tl(w){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,l.Z)(function*(w){const{auth:m,user:_}=w;return oe(_,m,"internal-error"),El(_,new Tu(w),w.bypassAuthState)})).apply(this,arguments)}class Ll{constructor(m,_,I,M,P=!1){this.auth=m,this.resolver=I,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,l.Z)(function*(I,M){m.pendingPromise={resolve:I,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(I,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,l.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:P,tenantId:ie,error:Me,type:lt}=m;if(Me)return void _.reject(Me);const St={auth:_.auth,requestUri:I,sessionId:M,tenantId:ie||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(lt)(St))}catch(Qt){_.reject(Qt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return mo;case"linkViaPopup":case"linkViaRedirect":return tl;case"reauthViaPopup":case"reauthViaRedirect":return dt;default:tt(this.auth,"internal-error")}}resolve(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nl=new Ye(2e3,1e4);function Ln(w,m,_){return il.apply(this,arguments)}function il(){return(il=(0,l.Z)(function*(w,m,_){const I=Et(w);Ee(w,m,bi);const M=go(I,_);return new rl(I,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function Vl(w,m,_){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);Ee(I.auth,m,bi);const M=go(I.auth,_);return new rl(I.auth,"reauthViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}function Oh(w,m,_){return ha.apply(this,arguments)}function ha(){return(ha=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);Ee(I.auth,m,bi);const M=go(I.auth,_);return new rl(I.auth,"linkViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}let rl=(()=>{class w extends Ll{constructor(_,I,M,P,ie){super(_,I,P,ie),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,l.Z)(function*(){const I=yield _.execute();return oe(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,l.Z)(function*(){we(1===_.filter.length,"Popup operations only handle one event");const I=ta();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,M;this.pollId=null!==(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,nl.get())};_()}}return w.currentPopupAction=null,w})();const ir=new Map;class _o extends Ll{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,l.Z)(function*(){let I=ir.get(_.auth._key());if(!I){try{const P=(yield function Du(w,m){return Ps.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(P)}catch(M){I=()=>Promise.reject(M)}ir.set(_.auth._key(),I)}return _.bypassAuthState||ir.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,l.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const M=yield I.auth._redirectUserForId(m.eventId);if(M)return I.user=M,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Ps(){return(Ps=(0,l.Z)(function*(w,m){const _=ms(m),I=yo(w);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(_));return yield I._remove(_),M})).apply(this,arguments)}function rr(w,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,l.Z)(function*(w,m){return yo(w)._set(ms(m),"true")})).apply(this,arguments)}function Fs(){ir.clear()}function ei(w,m){ir.set(w._key(),m)}function yo(w){return ee(w._redirectPersistence)}function ms(w){return W("pendingRedirect",w.config.apiKey,w.name)}function qn(w,m,_){return function kn(w,m,_){return pa.apply(this,arguments)}(w,m,_)}function pa(){return(pa=(0,l.Z)(function*(w,m,_){const I=Et(w);Ee(w,m,bi);const M=go(I,_);return yield rr(M,I),M._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function T(w,m,_){return function S(w,m,_){return k.apply(this,arguments)}(w,m,_)}function k(){return(k=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);Ee(I.auth,m,bi);const M=go(I.auth,_);yield rr(M,I.auth);const P=yield Ft(I);return M._openRedirect(I.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function H(w,m,_){return function X(w,m,_){return le.apply(this,arguments)}(w,m,_)}function le(){return(le=(0,l.Z)(function*(w,m,_){const I=(0,$.m9)(w);Ee(I.auth,m,bi);const M=go(I.auth,_);yield Wr(!1,I,m.providerId),yield rr(M,I.auth);const P=yield Ft(I);return M._openRedirect(I.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function xe(w,m){return Be.apply(this,arguments)}function Be(){return(Be=(0,l.Z)(function*(w,m){return yield Et(w)._initializationPromise,pt(w,m,!1)})).apply(this,arguments)}function pt(w,m){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,l.Z)(function*(w,m,_=!1){const I=Et(w),M=go(I,m),ie=yield new _o(I,M,_).execute();return ie&&!_&&(delete ie.user._redirectEventId,yield I._persistUserIfCurrent(ie.user),yield I._setRedirectUser(null,m)),ie})).apply(this,arguments)}function Ft(w){return bt.apply(this,arguments)}function bt(){return(bt=(0,l.Z)(function*(w){const m=ta(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class yi{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Bt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ls(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Ls(m)){const M=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ga(m))}saveEventToCache(m){this.cachedEventUids.add(ga(m)),this.lastProcessedEventTime=Date.now()}}function ga(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Ls({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Mr(w){return _s.apply(this,arguments)}function _s(){return(_s=(0,l.Z)(function*(w,m={}){return Gt(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Qr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ma=/^https?/;function sr(){return(sr=(0,l.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Mr(w);for(const _ of m)try{if(g_(_))return}catch{}tt(w,"unauthorized-domain")})).apply(this,arguments)}function g_(w){const m=He(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const ie=new URL(w);return""===ie.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ie.hostname===I}if(!ma.test(_))return!1;if(Qr.test(w))return I===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const Sp=new Ye(3e4,6e4);function Rh(){const w=zn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Kn=null;function wo(w){return Kn=Kn||function V0(w){return new Promise((m,_)=>{var I,M,P;function ie(){Rh(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Rh(),_(Le(w,"network-request-failed"))},timeout:Sp.get()})}if(null!==(M=null===(I=zn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(P=zn().gapi)||void 0===P||!P.load){const Me=ca("iframefcb");return zn()[Me]=()=>{gapi.load?ie():_(Le(w,"network-request-failed"))},ho(`https://apis.google.com/js/api.js?onload=${Me}`).catch(lt=>_(lt))}ie()}}).catch(m=>{throw Kn=null,m})}(w),Kn}const Nh=new Ye(5e3,15e3),Ph={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fh(w){const m=w.config;oe(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?fn(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:m.apiKey,appName:w.name,v:N.SDK_VERSION},M=m_.get(w.config.apiHost);M&&(I.eid=M);const P=w._getFrameworks();return P.length&&(I.fw=P.join(",")),`${_}?${(0,$.xO)(I).slice(1)}`}function Nc(){return Nc=(0,l.Z)(function*(w){const m=yield wo(w),_=zn().gapi;return oe(_,w,"internal-error"),m.open({where:document.body,url:Fh(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ph,dontclear:!0},I=>new Promise(function(){var M=(0,l.Z)(function*(P,ie){yield I.restyle({setHideOnLeave:!1});const Me=Le(w,"network-request-failed"),lt=zn().setTimeout(()=>{ie(Me)},Nh.get());function St(){zn().clearTimeout(lt),P(I)}I.ping(St).then(St,()=>{ie(Me)})});return function(P,ie){return M.apply(this,arguments)}}()))}),Nc.apply(this,arguments)}const Su={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Au{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ul(w,m,_,I,M,P){oe(w.config.authDomain,w,"auth-domain-config-required"),oe(w.config.apiKey,w,"invalid-api-key");const ie={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:N.SDK_VERSION,eventId:M};if(m instanceof bi){m.setDefaultLanguage(w.languageCode),ie.providerId=m.providerId||"",(0,$.xb)(m.getCustomParameters())||(ie.customParameters=JSON.stringify(m.getCustomParameters()));for(const[lt,St]of Object.entries(P||{}))ie[lt]=St}if(m instanceof jo){const lt=m.getScopes().filter(St=>""!==St);lt.length>0&&(ie.scopes=lt.join(","))}w.tenantId&&(ie.tid=w.tenantId);const Me=ie;for(const lt of Object.keys(Me))void 0===Me[lt]&&delete Me[lt];return`${function kp({config:w}){return w.emulator?fn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(Me).slice(1)}`}const Bl="webStorageSupport",Vh=class xu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rs,this._completeRedirectFn=pt,this._overrideRedirectResult=ei}_openPopup(m,_,I,M){var P=this;return(0,l.Z)(function*(){var ie;we(null===(ie=P.eventManagers[m._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Me=Ul(m,_,I,He(),M);return function Fc(w,m,_,I=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-I)/2,0).toString();let Me="";const lt=Object.assign(Object.assign({},Su),{width:I.toString(),height:M.toString(),top:P,left:ie}),St=(0,$.z$)().toLowerCase();_&&(Me=re(St)?"_blank":_),O(St)&&(m=m||"http://localhost",lt.scrollbars="yes");const Qt=Object.entries(lt).reduce((zi,[Jr,Vc])=>`${zi}${Jr}=${Vc},`,"");if(function pn(w=(0,$.z$)()){var m;return Ue(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(St)&&"_self"!==Me)return function Io(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",Me),new Au(null);const mn=window.open(m||"",Me,Qt);oe(mn,w,"popup-blocked");try{mn.focus()}catch{}return new Au(mn)}(m,Me,ta())})()}_openRedirect(m,_,I,M){var P=this;return(0,l.Z)(function*(){return yield P._originValidation(m),function Sc(w){zn().location.href=w}(Ul(m,_,I,He(),M)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:P}=this.eventManagers[_];return M?Promise.resolve(M):(we(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,l.Z)(function*(){const I=yield function xp(w){return Nc.apply(this,arguments)}(m),M=new yi(m);return I.register("authEvent",P=>(oe(P?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=I,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Bl,{type:Bl},M=>{var P;const ie=null===(P=M?.[0])||void 0===P?void 0:P[Bl];void 0!==ie&&_(!!ie),tt(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function vo(w){return sr.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return gn()||B()||Ue()}};class Uh extends class Lc{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return de("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Uh(m)}_finalizeEnroll(m,_,I){return function Al(w,m){return Gt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function la(w,m){return Gt(w,"POST","/v2/accounts/mfaSignIn:finalize",Zt(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vs=(()=>{class w{constructor(){}static assertion(_){return Uh._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var bo="@firebase/auth",Bh="0.20.11";class __{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,l.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{var M;m((null===(M=I)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function H0(w){(0,N._registerComponent)(new _e.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:P,authDomain:ie}=I.options;return((Me,lt)=>{oe(P&&!P.includes(":"),"invalid-api-key",{appName:Me.name}),oe(!ie?.includes(":"),"argument-error",{appName:Me.name});const St={apiKey:P,authDomain:ie,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dn(w)},Qt=new Lo(Me,lt,St);return function ue(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(ee);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}(Qt,_),Qt})(I,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new _e.wA("auth-internal",m=>{const _=Et(m.getProvider("auth").getImmediate());return new __(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(bo,Bh,function B0(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(bo,Bh,"esm2017")}("Browser")},2090:(_t,ke,V)=>{V.d(ke,{$s:()=>ot,BH:()=>$t,DV:()=>Gn,Dv:()=>ji,G6:()=>Ee,GJ:()=>Gr,L:()=>fe,LL:()=>sn,Pz:()=>ln,Sg:()=>Ye,UG:()=>De,UI:()=>$r,US:()=>_e,Wj:()=>kt,Wl:()=>Ii,Yr:()=>Oe,ZB:()=>z,ZR:()=>En,aH:()=>wt,b$:()=>me,cI:()=>Gt,dS:()=>Vt,eu:()=>oe,g5:()=>N,gK:()=>Qn,gQ:()=>In,h$:()=>ge,hl:()=>Ze,hu:()=>$,jU:()=>at,lb:()=>ki,m9:()=>rn,ne:()=>Tn,p$:()=>Z,pd:()=>Xs,r3:()=>Hi,ru:()=>Ie,tV:()=>ve,uI:()=>Pe,ug:()=>Qi,vZ:()=>nt,w1:()=>tt,w9:()=>jr,xO:()=>Cn,xb:()=>Dr,z$:()=>Ge,zI:()=>de,zd:()=>gi});const $=function(q,W){if(!q)throw N(W)},N=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},ae=function(q){const W=[];let Y=0;for(let j=0;j<q.length;j++){let O=q.charCodeAt(j);O<128?W[Y++]=O:O<2048?(W[Y++]=O>>6|192,W[Y++]=63&O|128):55296==(64512&O)&&j+1<q.length&&56320==(64512&q.charCodeAt(j+1))?(O=65536+((1023&O)<<10)+(1023&q.charCodeAt(++j)),W[Y++]=O>>18|240,W[Y++]=O>>12&63|128,W[Y++]=O>>6&63|128,W[Y++]=63&O|128):(W[Y++]=O>>12|224,W[Y++]=O>>6&63|128,W[Y++]=63&O|128)}return W},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let O=0;O<q.length;O+=3){const B=q[O],re=O+1<q.length,Fe=re?q[O+1]:0,ut=O+2<q.length,ct=ut?q[O+2]:0;let Pt=(15&Fe)<<2|ct>>6,pn=63&ct;ut||(pn=64,re||(Pt=64)),j.push(Y[B>>2],Y[(3&B)<<4|Fe>>4],Y[Pt],Y[pn])}return j.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(ae(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let Y=0,j=0;for(;Y<q.length;){const O=q[Y++];if(O<128)W[j++]=String.fromCharCode(O);else if(O>191&&O<224){const B=q[Y++];W[j++]=String.fromCharCode((31&O)<<6|63&B)}else if(O>239&&O<365){const ut=((7&O)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;W[j++]=String.fromCharCode(55296+(ut>>10)),W[j++]=String.fromCharCode(56320+(1023&ut))}else{const B=q[Y++],re=q[Y++];W[j++]=String.fromCharCode((15&O)<<12|(63&B)<<6|63&re)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const Y=W?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let O=0;O<q.length;){const B=Y[q.charAt(O++)],Fe=O<q.length?Y[q.charAt(O)]:0;++O;const ct=O<q.length?Y[q.charAt(O)]:64;++O;const Ue=O<q.length?Y[q.charAt(O)]:64;if(++O,null==B||null==Fe||null==ct||null==Ue)throw Error();j.push(B<<2|Fe>>4),64!==ct&&(j.push(Fe<<4&240|ct>>2),64!==Ue&&j.push(ct<<6&192|Ue))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},ge=function(q){const W=ae(q);return _e.encodeByteArray(W,!0)},fe=function(q){return ge(q).replace(/\./g,"")},ve=function(q){try{return _e.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function Z(q){return z(void 0,q)}function z(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const Y in W)!W.hasOwnProperty(Y)||!J(Y)||(q[Y]=z(q[Y],W[Y]));return q}function J(q){return"__proto__"!==q}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function at(){return"object"==typeof self&&self.self===self}function Ie(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function tt(){const q=Ge();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Oe(){return!1}function Ee(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function oe(){return new Promise((q,W)=>{try{let Y=!0;const j="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(j);O.onsuccess=()=>{O.result.close(),Y||self.indexedDB.deleteDatabase(j),q(!0)},O.onupgradeneeded=()=>{Y=!1},O.onerror=()=>{var B;W((null===(B=O.error)||void 0===B?void 0:B.message)||"")}}catch(Y){W(Y)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ue=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&ve(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},wt=()=>{var q;return null===(q=ue())||void 0===q?void 0:q.config},ln=q=>{var W;return null===(W=ue())||void 0===W?void 0:W[`_${q}`]};class $t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Y)=>{this.resolve=W,this.reject=Y})}wrapCallback(W){return(Y,j)=>{Y?this.reject(Y):this.resolve(j),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Y):W(Y,j))}}}function Ye(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=W||"demo-project",O=q.iat||0,B=q.sub||q.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const re=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:O,exp:O+3600,auth_time:O,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},q);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(re)),""].join(".")}class En extends Error{constructor(W,Y,j){super(Y),this.code=W,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}}class sn{constructor(W,Y,j){this.service=W,this.serviceName=Y,this.errors=j}create(W,...Y){const j=Y[0]||{},O=`${this.service}/${W}`,B=this.errors[W],re=B?function on(q,W){return q.replace(Zt,(Y,j)=>{const O=W[j];return null!=O?String(O):`<${j}?>`})}(B,j):"Error";return new En(O,`${this.serviceName}: ${re} (${O}).`,j)}}const Zt=/\{\$([^}]+)}/g;function Gt(q){return JSON.parse(q)}function Ii(q){return JSON.stringify(q)}const Hr=function(q){let W={},Y={},j={},O="";try{const B=q.split(".");W=Gt(ve(B[0])||""),Y=Gt(ve(B[1])||""),O=B[2],j=Y.d||{},delete Y.d}catch{}return{header:W,claims:Y,data:j,signature:O}},jr=function(q){const Y=Hr(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Gr=function(q){const W=Hr(q).claims;return"object"==typeof W&&!0===W.admin};function Hi(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function Gn(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function Dr(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function $r(q,W,Y){const j={};for(const O in q)Object.prototype.hasOwnProperty.call(q,O)&&(j[O]=W.call(Y,q[O],O,q));return j}function nt(q,W){if(q===W)return!0;const Y=Object.keys(q),j=Object.keys(W);for(const O of Y){if(!j.includes(O))return!1;const B=q[O],re=W[O];if(ri(B)&&ri(re)){if(!nt(B,re))return!1}else if(B!==re)return!1}for(const O of j)if(!Y.includes(O))return!1;return!0}function ri(q){return null!==q&&"object"==typeof q}function Cn(q){const W=[];for(const[Y,j]of Object.entries(q))Array.isArray(j)?j.forEach(O=>{W.push(encodeURIComponent(Y)+"="+encodeURIComponent(O))}):W.push(encodeURIComponent(Y)+"="+encodeURIComponent(j));return W.length?"&"+W.join("&"):""}function gi(q){const W={};return q.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[O,B]=j.split("=");W[decodeURIComponent(O)]=decodeURIComponent(B)}}),W}function Xs(q){const W=q.indexOf("?");if(!W)return"";const Y=q.indexOf("#",W);return q.substring(W,Y>0?Y:void 0)}class In{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Y){Y||(Y=0);const j=this.W_;if("string"==typeof W)for(let Ue=0;Ue<16;Ue++)j[Ue]=W.charCodeAt(Y)<<24|W.charCodeAt(Y+1)<<16|W.charCodeAt(Y+2)<<8|W.charCodeAt(Y+3),Y+=4;else for(let Ue=0;Ue<16;Ue++)j[Ue]=W[Y]<<24|W[Y+1]<<16|W[Y+2]<<8|W[Y+3],Y+=4;for(let Ue=16;Ue<80;Ue++){const Pt=j[Ue-3]^j[Ue-8]^j[Ue-14]^j[Ue-16];j[Ue]=4294967295&(Pt<<1|Pt>>>31)}let ct,Ae,O=this.chain_[0],B=this.chain_[1],re=this.chain_[2],Fe=this.chain_[3],ut=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(ct=Fe^B&(re^Fe),Ae=1518500249):(ct=B^re^Fe,Ae=1859775393):Ue<60?(ct=B&re|Fe&(B|re),Ae=2400959708):(ct=B^re^Fe,Ae=3395469782);const Pt=(O<<5|O>>>27)+ct+ut+Ae+j[Ue]&4294967295;ut=Fe,Fe=re,re=4294967295&(B<<30|B>>>2),B=O,O=Pt}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+re&4294967295,this.chain_[3]=this.chain_[3]+Fe&4294967295,this.chain_[4]=this.chain_[4]+ut&4294967295}update(W,Y){if(null==W)return;void 0===Y&&(Y=W.length);const j=Y-this.blockSize;let O=0;const B=this.buf_;let re=this.inbuf_;for(;O<Y;){if(0===re)for(;O<=j;)this.compress_(W,O),O+=this.blockSize;if("string"==typeof W){for(;O<Y;)if(B[re]=W.charCodeAt(O),++re,++O,re===this.blockSize){this.compress_(B),re=0;break}}else for(;O<Y;)if(B[re]=W[O],++re,++O,re===this.blockSize){this.compress_(B),re=0;break}}this.inbuf_=re,this.total_+=Y}digest(){const W=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&Y,Y/=256;this.compress_(this.buf_);let j=0;for(let O=0;O<5;O++)for(let B=24;B>=0;B-=8)W[j]=this.chain_[O]>>B&255,++j;return W}}function Tn(q,W){const Y=new vn(q,W);return Y.subscribe.bind(Y)}class vn{constructor(W,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{W(this)}).catch(j=>{this.error(j)})}next(W){this.forEachObserver(Y=>{Y.next(W)})}error(W){this.forEachObserver(Y=>{Y.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Y,j){let O;if(void 0===W&&void 0===Y&&void 0===j)throw new Error("Missing Observer.");O=function It(q,W){if("object"!=typeof q||null===q)return!1;for(const Y of W)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Y,complete:j},void 0===O.next&&(O.next=Nt),void 0===O.error&&(O.error=Nt),void 0===O.complete&&(O.complete=Nt);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),B}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,W)}sendOne(W,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Y(this.observers[W])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}const ji=function(q,W,Y,j){let O;if(j<W?O="at least "+W:j>Y&&(O=0===Y?"none":"no more than "+Y),O)throw new Error(q+" failed: Was called with "+j+(1===j?" argument.":" arguments.")+" Expects "+O+".")};function Qn(q,W){return`${q} failed: ${W} argument `}function kt(q,W,Y,j){if((!j||Y)&&"function"!=typeof Y)throw new Error(Qn(q,W)+"must be a valid function.")}function ki(q,W,Y,j){if((!j||Y)&&("object"!=typeof Y||null===Y))throw new Error(Qn(q,W)+"must be a valid context object.")}const Vt=function(q){const W=[];let Y=0;for(let j=0;j<q.length;j++){let O=q.charCodeAt(j);if(O>=55296&&O<=56319){const B=O-55296;j++,$(j<q.length,"Surrogate pair missing trail surrogate."),O=65536+(B<<10)+(q.charCodeAt(j)-56320)}O<128?W[Y++]=O:O<2048?(W[Y++]=O>>6|192,W[Y++]=63&O|128):O<65536?(W[Y++]=O>>12|224,W[Y++]=O>>6&63|128,W[Y++]=63&O|128):(W[Y++]=O>>18|240,W[Y++]=O>>12&63|128,W[Y++]=O>>6&63|128,W[Y++]=63&O|128)}return W},Qi=function(q){let W=0;for(let Y=0;Y<q.length;Y++){const j=q.charCodeAt(Y);j<128?W++:j<2048?W+=2:j>=55296&&j<=56319?(W+=4,Y++):W+=3}return W};function ot(q,W=1e3,Y=2){const j=W*Math.pow(Y,q),O=Math.round(.5*j*(Math.random()-.5)*2);return Math.min(144e5,j+O)}function rn(q){return q&&q._delegate?q._delegate:q}},5341:(_t,ke,V)=>{var l=V(4650);let $=null;function N(){return $}const ge=new l.OlP("DocumentToken");let fe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ve(){return(0,l.LFG)(z)}()},providedIn:"platform"}),n})();const Z=new l.OlP("Location Initialized");let z=(()=>{class n extends fe{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){J()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){J()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ge(){return new z((0,l.LFG)(ge))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Pe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function De(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(it)},providedIn:"root"}),n})();const me=new l.OlP("appBaseHref");let it=(()=>{class n extends Ie{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Pe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+at(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+at(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+at(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fe),l.LFG(me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tt=(()=>{class n extends Ie{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Pe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+at(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+at(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fe),l.LFG(me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=De(Ze(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+at(i))}normalize(e){return n.stripTrailingSlash(function Ee(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ze(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=at,n.joinWithSlash=Pe,n.stripTrailingSlash=De,n.\u0275fac=function(e){return new(e||n)(l.LFG(Ie))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Oe(){return new Le((0,l.LFG)(Ie))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}let Kt=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ro{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dr=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ro(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,c),so(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{so(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function so(n,t){n.context.$implicit=t.item}let dn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new gh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){si("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){si("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class gh{constructor(){this.$implicit=null,this.ngIf=null}}function si(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}let er=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),c=-1===r.indexOf("-")?void 0:l.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,r,c)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Gi=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=i.createEmbeddedView(r,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.TTD]}),n})(),Oi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function $o(n){return"server"===n}let gc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new mh((0,l.LFG)(ge),window)}),n})();class mh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ei(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ar(this.window.history)||Ar(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ar(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ks extends class wc extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){$||($=n)}(new ks)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Cc(){return Os=Os||document.querySelector("base"),Os?Os.getAttribute("href"):null}();return null==e?null:function ds(n){On=On||document.createElement("a"),On.setAttribute("href",n);const t=On.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Os=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function su(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let On,Os=null;const Rn=new l.OlP("TRANSITION_ID"),gu=[{provide:l.ip1,useFactory:function Ic(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=N(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Rn,ge,l.zs3],multi:!0}];let mu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=new l.OlP("EventManagerPlugins");let yu=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(_u),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Sl{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=N().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Jo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Xo=(()=>{class n extends Jo{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(bc),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(bc))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function bc(n){N().remove(n)}const ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ec=/%COMP%/g;function xl(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?xl(n,r,e):(r=r.replace(Ec,n),e.push(r))}return e}function Ml(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let kl=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new hs(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Dc(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new Eh(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=xl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(yu),l.LFG(Xo),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class hs{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(ea[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Ya(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Ya(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=ea[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=ea[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ml(i)):this.eventManager.addEventListener(t,e,Ml(i))}}function Ya(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Dc extends hs{constructor(t,e,i,r){super(t),this.component=i;const s=xl(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function Wn(n){return"_ngcontent-%COMP%".replace(Ec,n)}(r+"-"+i.id),this.hostAttr=function Al(n){return"_nghost-%COMP%".replace(Ec,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Eh extends hs{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=xl(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const h=document.createElement("style");h.textContent=s[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let li=(()=>{class n extends Sl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Th=["alt","control","meta","shift"],Rs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qa=(()=>{class n extends Sl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),c="code."),Th.forEach(y=>{const b=i.indexOf(y);b>-1&&(i.splice(b,1),c+=y+".")}),c+=s,0!=i.length||0===s.length)return null;const g={};return g.domEventName=r,g.fullKey=c,g}static matchEventFullKeyCode(e,i){let r=Rs[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Th.forEach(c=>{c!==r&&(0,Cu[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ja=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Ac(){ks.makeCurrent()},multi:!0},{provide:ge,useFactory:function Iu(){return(0,l.RDi)(document),document},deps:[]}]),co=new l.OlP(""),Xa=[{provide:l.rWj,useClass:class Ih{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const h=function(g){c=c||g,s--,0==s&&i(c)};r.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?N().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],na=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function fs(){return new l.qLn},deps:[]},{provide:_u,useClass:li,multi:!0,deps:[ge,l.R0b,l.Lbi]},{provide:_u,useClass:Qa,multi:!0,deps:[ge]},{provide:kl,useClass:kl,deps:[yu,Xo,l.AFp]},{provide:l.FYo,useExisting:kl},{provide:Jo,useExisting:Xo},{provide:Xo,useClass:Xo,deps:[ge]},{provide:yu,useClass:yu,deps:[_u,l.R0b]},{provide:class Wo{},useClass:mu,deps:[]},[]];let ia=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:Rn,useExisting:l.AFp},gu]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(co,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...na,...Xa],imports:[Oi,l.hGG]}),n})(),qr=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function el(){return new qr((0,l.LFG)(ge))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var an=V(8996),Kr=V(7669);function ht(...n){const t=(0,Kr.yG)(n);return(0,an.D)(n,t)}var Wi=V(7579);class An extends Wi.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const fo=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var _i=V(9751);const{isArray:po}=Array,{getPrototypeOf:kc,prototype:Oc,keys:kh}=Object;function go(n){if(1===n.length){const t=n[0];if(po(t))return{args:t,keys:null};if(function Tu(n){return n&&"object"==typeof n&&kc(n)===Oc}(t)){const e=kh(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var mo=V(4671),dt=V(4004);const{isArray:tl}=Array;function Ll(n){return(0,dt.U)(t=>function Yr(n,t){return tl(t)?n(...t):n(t)}(n,t))}function nl(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var Ln=V(5403),il=V(9672);function Vl(...n){const t=(0,Kr.yG)(n),e=(0,Kr.jO)(n),{args:i,keys:r}=go(n);if(0===i.length)return(0,an.D)([],t);const s=new _i.y(function Rc(n,t,e=mo.y){return i=>{Oh(t,()=>{const{length:r}=n,s=new Array(r);let c=r,h=r;for(let g=0;g<r;g++)Oh(t,()=>{const y=(0,an.D)(n[g],t);let b=!1;y.subscribe((0,Ln.x)(i,D=>{s[g]=D,b||(b=!0,h--),h||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>nl(r,c):mo.y));return e?s.pipe(Ll(e)):s}function Oh(n,t,e){n?(0,il.f)(e,n,t):t()}var ha=V(8189);function fa(...n){return function rl(){return(0,ha.J)(1)}()((0,an.D)(n,(0,Kr.yG)(n)))}var ir=V(8421);function _o(n){return new _i.y(t=>{(0,ir.Xf)(n()).subscribe(t)})}var Du=V(9635),Ps=V(576);function rr(n,t){const e=(0,Ps.m)(n)?n:()=>n,i=r=>r.error(e());return new _i.y(t?r=>t.schedule(i,0,r):i)}var gs=V(515),Fs=V(727),ei=V(4482);function yo(){return(0,ei.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Ln.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class ms extends _i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,ei.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Fs.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Ln.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Fs.w0.EMPTY)}return t}refCount(){return yo()(this)}}function qn(n,t){return(0,ei.e)((e,i)=>{let r=null,s=0,c=!1;const h=()=>c&&!r&&i.complete();e.subscribe((0,Ln.x)(i,g=>{r?.unsubscribe();let y=0;const b=s++;(0,ir.Xf)(n(g,b)).subscribe(r=(0,Ln.x)(i,D=>i.next(t?t(g,D,b,y++):D),()=>{r=null,h()}))},()=>{c=!0,h()}))})}function kn(n){return n<=0?()=>gs.E:(0,ei.e)((t,e)=>{let i=0;t.subscribe((0,Ln.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function pa(...n){const t=(0,Kr.yG)(n);return(0,ei.e)((e,i)=>{(t?fa(n,e,t):fa(n,e)).subscribe(i)})}function T(n,t){return(0,ei.e)((e,i)=>{let r=0;e.subscribe((0,Ln.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var S=V(5577);function k(n){return(0,ei.e)((t,e)=>{let i=!1;t.subscribe((0,Ln.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function H(n=X){return(0,ei.e)((t,e)=>{let i=!1;t.subscribe((0,Ln.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function X(){return new fo}function le(n,t){const e=arguments.length>=2;return i=>i.pipe(n?T((r,s)=>n(r,s,i)):mo.y,kn(1),e?k(t):H(()=>new fo))}function xe(n,t){return(0,Ps.m)(t)?(0,S.z)(n,t,1):(0,S.z)(n,1)}var Be=V(8505);function pt(n){return(0,ei.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Ln.x)(e,void 0,void 0,c=>{s=(0,ir.Xf)(n(c,pt(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Ot(n,t,e,i,r){return(s,c)=>{let h=e,g=t,y=0;s.subscribe((0,Ln.x)(c,b=>{const D=y++;g=h?n(g,b,D):(h=!0,b),i&&c.next(g)},r&&(()=>{h&&c.next(g),c.complete()})))}}function Ft(n,t){return(0,ei.e)(Ot(n,t,arguments.length>=2,!0))}function bt(n){return n<=0?()=>gs.E:(0,ei.e)((t,e)=>{let i=[];t.subscribe((0,Ln.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Zn(n,t){const e=arguments.length>=2;return i=>i.pipe(n?T((r,s)=>n(r,s,i)):mo.y,bt(1),e?k(t):H(()=>new fo))}function Ls(n){return(0,ei.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Bt="primary",Mr=Symbol("RouteTitle");class _s{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Qr(n){return new _s(n)}function ma(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],h=n[s];if(c.startsWith(":"))r[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function sr(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!g_(n[r],t[r]))return!1;return!0}function g_(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function Sp(n){return Array.prototype.concat.apply([],n)}function Rh(n){return n.length>0?n[n.length-1]:null}function Kn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function wo(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,an.D)(Promise.resolve(n)):ht(n)}const U0={exact:function xp(n,t,e){if(!Io(n.segments,t.segments)||!Co(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!xp(n.children[i],t.children[i],e))return!1;return!0},subset:Su},Ph={exact:function Fh(n,t){return sr(n,t)},subset:function Nc(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>g_(n[e],t[e]))},ignored:()=>!0};function m_(n,t,e){return U0[e.paths](n.root,t.root,e.matrixParams)&&Ph[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Su(n,t,e){return Pc(n,t,t.segments,e)}function Pc(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Io(r,e)||t.hasChildren()||!Co(r,e,i))}if(n.segments.length===e.length){if(!Io(n.segments,e)||!Co(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Su(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Io(n.segments,r)&&Co(n.segments,r,i)&&n.children[Bt])&&Pc(n.children[Bt],t,s,i)}}function Co(n,t,e){return t.every((i,r)=>Ph[e](n[r].parameters,i.parameters))}class sl{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qr(this.queryParams)),this._queryParamMap}toString(){return kp.serialize(this)}}class tn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Kn(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bl(this)}}class Au{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Qr(this.parameters)),this._parameterMap}toString(){return __(this)}}function Io(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let Lh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new Ul},providedIn:"root"}),n})();class Ul{parse(t){const e=new m(t);return new sl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${xu(t.root,!0)}`,i=function H0(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Lc(e)}=${Lc(r)}`).join("&"):`${Lc(e)}=${Lc(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Uh(n){return encodeURI(n)}(t.fragment)}`:""}`}}const kp=new Ul;function Bl(n){return n.segments.map(t=>__(t)).join("/")}function xu(n,t){if(!n.hasChildren())return Bl(n);if(t){const e=n.children[Bt]?xu(n.children[Bt],!1):"",i=[];return Kn(n.children,(r,s)=>{s!==Bt&&i.push(`${s}:${xu(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Mp(n,t){let e=[];return Kn(n.children,(i,r)=>{r===Bt&&(e=e.concat(t(i,r)))}),Kn(n.children,(i,r)=>{r!==Bt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Bt?[xu(n.children[Bt],!1)]:[`${r}:${xu(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Bt]?`${Bl(n)}/${e[0]}`:`${Bl(n)}/(${e.join("//")})`}}function Vh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lc(n){return Vh(n).replace(/%3B/gi,";")}function Vs(n){return Vh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bo(n){return decodeURIComponent(n)}function Bh(n){return bo(n.replace(/\+/g,"%20"))}function __(n){return`${Vs(n.path)}${function B0(n){return Object.keys(n).map(t=>`;${Vs(t)}=${Vs(n[t])}`).join("")}(n.parameters)}`}const j0=/^[^\/()?;=#]+/;function Hh(n){const t=n.match(j0);return t?t[0]:""}const jh=/^[^=?&#]+/,G0=/^[^&#]+/;class m{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Bt]=new tn(t,e)),i}parseSegment(){const t=Hh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new Au(bo(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Hh(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Hh(this.remaining);r&&(i=r,this.capture(i))}t[bo(e)]=bo(i)}parseQueryParam(t){const e=function y_(n){const t=n.match(jh);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function w(n){const t=n.match(G0);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=Bh(e),s=Bh(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Hh(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Bt);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[Bt]:new tn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function _(n){return n.segments.length>0?new tn([],{[Bt]:n}):n}function I(n){const t={};for(const i of Object.keys(n.children)){const s=I(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function M(n){if(1===n.numberOfChildren&&n.children[Bt]){const t=n.children[Bt];return new tn(n.segments.concat(t.segments),t.children)}return n}(new tn(n.segments,t))}function P(n){return n instanceof sl}function Qt(n,t,e,i,r){if(0===e.length)return Jr(t.root,t.root,t.root,i,r);const s=function Bc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Uc(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Kn(s.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?e=!0:".."===h?t++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new Uc(e,t,i)}(e);return s.toRoot()?Jr(t.root,t.root,new tn([],{}),i,r):function c(g){const y=function Gh(n,t,e,i){if(n.isAbsolute)return new ol(t.root,!0,0);if(-1===i)return new ol(e,e===t.root,0);return function Hc(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new ol(i,!1,r-s)}(e,i+(mn(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,g),b=y.processChildren?_a(y.segmentGroup,y.index,s.commands):ku(y.segmentGroup,y.index,s.commands);return Jr(t.root,y.segmentGroup,b,i,r)}(n.snapshot?._lastPathIndex)}function mn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function zi(n){return"object"==typeof n&&null!=n&&n.outlets}function Jr(n,t,e,i,r){let c,s={};i&&Kn(i,(g,y)=>{s[y]=Array.isArray(g)?g.map(b=>`${b}`):`${g}`}),c=n===t?e:Vc(n,t,e);const h=_(I(c));return new sl(h,s,r)}function Vc(n,t,e){const i={};return Kn(n.children,(r,s)=>{i[s]=r===t?e:Vc(r,t,e)}),new tn(n.segments,i)}class Uc{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&mn(i[0]))throw new l.vHH(4003,!1);const r=i.find(zi);if(r&&r!==Rh(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ol{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function ku(n,t,e){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return _a(n,t,e);const i=function v_(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],h=e[i];if(zi(h))break;const g=`${h}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!Np(g,y,c))return s;i+=2}else{if(!Np(g,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new tn(n.segments.slice(0,i.pathIndex),{});return s.children[Bt]=new tn(n.segments.slice(i.pathIndex),n.children),_a(s,0,r)}return i.match&&0===r.length?new tn(n.segments,{}):i.match&&!n.hasChildren()?Vn(n,t,e):i.match?_a(n,0,r):Vn(n,t,e)}function _a(n,t,e){if(0===e.length)return new tn(n.segments,{});{const i=function Mu(n){return zi(n[0])?n[0].outlets:{[Bt]:n}}(e),r={};return Kn(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=ku(n.children[c],t,s))}),Kn(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new tn(n.segments,r)}}function Vn(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(zi(s)){const g=Rp(s.outlets);return new tn(i,g)}if(0===r&&mn(e[0])){i.push(new Au(n.segments[t].path,$0(e[0]))),r++;continue}const c=zi(s)?s.outlets[Bt]:`${s}`,h=r<e.length-1?e[r+1]:null;c&&h&&mn(h)?(i.push(new Au(c,$0(h))),r+=2):(i.push(new Au(c,{})),r++)}return new tn(i,{})}function Rp(n){const t={};return Kn(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=Vn(new tn([],{}),0,e))}),t}function $0(n){const t={};return Kn(n,(e,i)=>t[i]=`${e}`),t}function Np(n,t,e){return n==e.path&&sr(t,e.parameters)}class ya{constructor(t,e){this.id=t,this.url=e}}class w_ extends ya{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ou extends ya{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pp extends ya{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class W0 extends ya{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eS extends ya{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UR extends ya{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BR extends ya{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $h extends ya{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C_ extends ya{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z0{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class q0{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Z0{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tS{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K0{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y0{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fp{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Q0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Wh(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=Wh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Lp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Lp(t,this._root).map(e=>e.value)}}function Wh(n,t){if(n===t.value)return t;for(const e of t.children){const i=Wh(n,e);if(i)return i}return null}function Lp(n,t){if(n===t.value)return[t];for(const e of t.children){const i=Lp(n,e);if(i.length)return i.unshift(t),i}return[]}class va{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Us(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class J0 extends Q0{constructor(t,e){super(t),this.snapshot=e,zh(this,t)}toString(){return this.snapshot.toString()}}function Vp(n,t){const e=function Up(n,t){const c=new wa([],{},{},"",{},Bt,t,null,n.root,-1,{});return new I_("",new va(c,[]))}(n,t),i=new An([new Au("",{})]),r=new An({}),s=new An({}),c=new An({}),h=new An(""),g=new Hl(i,r,c,h,s,Bt,t,e.root);return g.snapshot=e.root,new J0(new va(g,[]),e)}class Hl{constructor(t,e,i,r,s,c,h,g){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,dt.U)(y=>y[Mr]))??ht(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(t=>Qr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(t=>Qr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bp(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Hp(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class wa{constructor(t,e,i,r,s,c,h,g,y,b,D,x){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=h,this.title=this.data?.[Mr],this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=b,this._correctedLastPathIndex=x??b,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class I_ extends Q0{constructor(t,e){super(e),this.url=t,zh(this,e)}toString(){return X0(this._root)}}function zh(n,t){t.value._routerState=n,t.children.forEach(e=>zh(n,e))}function X0(n){const t=n.children.length>0?` { ${n.children.map(X0).join(", ")} } `:"";return`${n.value}${t}`}function b_(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,sr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),sr(t.params,e.params)||n.params.next(e.params),function vo(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!sr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),sr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jp(n,t){const e=sr(n.params,t.params)&&function Fc(n,t){return Io(n,t)&&n.every((e,i)=>sr(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||jp(n.parent,t.parent))}function qh(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function nS(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return qh(n,i,r);return qh(n,i)})}(n,t,e);return new va(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(h=>qh(n,h)),c}}const i=function iS(n){return new Hl(new An(n.url),new An(n.params),new An(n.queryParams),new An(n.fragment),new An(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>qh(n,s));return new va(i,r)}}const E_="ngNavigationCancelingError";function Gp(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=P(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=eC(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function eC(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[E_]=!0,i.cancellationCode=t,e&&(i.url=e),i}function T_(n){return tC(n)&&P(n.url)}function tC(n){return n&&n[E_]}class nC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new $p,this.attachRef=null}}let $p=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new nC,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wp=!1;let Ru=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||Bt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Wp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Wp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Wp);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,Wp);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new rS(e,h,r.injector);if(i&&function Gc(n){return!!n.resolveComponentFactory}(i)){const y=i.resolveComponentFactory(c);this.activated=r.createComponent(y,r.length,g)}else this.activated=r.createComponent(c,{index:r.length,injector:g,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36($p),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class rS{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Hl?this.route:t===$p?this.childContexts:this.parent.get(t,e)}}let Nu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[Ru],encapsulation:2}),n})();function iC(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function A_(n){const t=n.children&&n.children.map(A_),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Bt&&(e.component=Nu),e}function Bs(n){return n.outlet||Bt}function zp(n,t){const e=n.filter(i=>Bs(i)===t);return e.push(...n.filter(i=>Bs(i)!==t)),e}function qp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class x_{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),b_(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Us(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),Kn(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Us(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Us(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Us(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Y0(s.value.snapshot))}),t.children.length&&this.forwardEvent(new tS(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(b_(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),b_(h.route.value),this.activateChildRoutes(t,null,c.children)}else{const h=qp(r.snapshot),g=h?.get(l._Vd)??null;c.attachRef=null,c.route=r,c.resolver=g,c.injector=h,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class oS{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class M_{constructor(t,e){this.component=t,this.route=e}}function WR(n,t,e){const i=n._root;return Kh(i,t?t._root:null,e,[i.value])}function Zh(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,l.Z0I)(n)?t.get(n):n:i}function Kh(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Us(t);return n.children.forEach(c=>{(function oC(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const g=function k_(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Io(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,t.url)||!sr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jp(n,t)||!sr(n.queryParams,t.queryParams);default:return!jp(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new oS(i)):(s.data=c.data,s._resolvedData=c._resolvedData),Kh(n,t,s.component?h?h.children:null:e,i,r),g&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new M_(h.outlet.component,c))}else c&&$c(t,h,r),r.canActivateChecks.push(new oS(i)),Kh(n,null,s.component?h?h.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),Kn(s,(c,h)=>$c(c,e.getContext(h),r)),r}function $c(n,t,e){const i=Us(n),r=n.value;Kn(i,(s,c)=>{$c(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new M_(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Wc(n){return"function"==typeof n}function Zp(n){return n instanceof fo||"EmptyError"===n?.name}const Kp=Symbol("INITIAL_VALUE");function zc(){return qn(n=>Vl(n.map(t=>t.pipe(kn(1),pa(Kp)))).pipe((0,dt.U)(t=>{for(const e of t)if(!0!==e){if(e===Kp)return Kp;if(!1===e||e instanceof sl)return e}return!0}),T(t=>t!==Kp),kn(1)))}function _r(n){return(0,Du.z)((0,Be.b)(t=>{if(P(t))throw Gp(0,t)}),(0,dt.U)(t=>!0===t))}const Yp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qp(n,t,e,i,r){const s=qi(n,t,e);return s.matched?function P_(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ht(r.map(c=>{const h=Zh(c,n);return wo(function lS(n){return n&&Wc(n.canMatch)}(h)?h.canMatch(t,e):n.runInContext(()=>h(t,e)))})).pipe(zc(),_r()):ht(!0)}(i=iC(t,i),t,e).pipe((0,dt.U)(c=>!0===c?s:{...Yp})):ht(s)}function qi(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...Yp}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||ma)(e,n,t);if(!r)return{...Yp};const s={};Kn(r.posParams,(h,g)=>{s[g]=h.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function jl(n,t,e,i,r="corrected"){if(e.length>0&&function yS(n,t,e){return e.some(i=>Jp(n,t,i)&&Bs(i)!==Bt)}(n,e,i)){const c=new tn(t,function _S(n,t,e,i){const r={};r[Bt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Bs(s)!==Bt){const c=new tn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Bs(s)]=c}return r}(n,t,i,new tn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function cC(n,t,e){return e.some(i=>Jp(n,t,i))}(n,e,i)){const c=new tn(n.segments,function uC(n,t,e,i,r,s){const c={};for(const h of i)if(Jp(n,e,h)&&!r[Bs(h)]){const g=new tn([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[Bs(h)]=g}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new tn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Jp(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function F_(n,t,e,i){return!!(Bs(n)===i||i!==Bt&&Jp(t,e,n))&&("**"===n.path||qi(t,n,e).matched)}function dC(n,t,e){return 0===t.length&&!n.children[e]}const Qh=!1;class Xp{constructor(t){this.segmentGroup=t||null}}class hC{constructor(t){this.urlTree=t}}function Jh(n){return rr(new Xp(n))}function fC(n){return rr(new hC(n))}class wS{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=jl(this.urlTree.root,[],[],this.config).segmentGroup,e=new tn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Bt).pipe((0,dt.U)(s=>this.createUrlTree(I(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(pt(s=>{if(s instanceof hC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Xp?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Bt).pipe((0,dt.U)(r=>this.createUrlTree(I(r),t.queryParams,t.fragment))).pipe(pt(r=>{throw r instanceof Xp?this.noMatchError(r):r}))}noMatchError(t){return new l.vHH(4002,Qh)}createUrlTree(t,e,i){const r=_(t);return new sl(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,dt.U)(s=>new tn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,an.D)(r).pipe(xe(s=>{const c=i.children[s],h=zp(e,s);return this.expandSegmentGroup(t,h,c,s).pipe((0,dt.U)(g=>({segment:g,outlet:s})))}),Ft((s,c)=>(s[c.outlet]=c.segment,s),{}),Zn())}expandSegment(t,e,i,r,s,c){return(0,an.D)(i).pipe(xe(h=>this.expandSegmentAgainstRoute(t,e,i,h,r,s,c).pipe(pt(y=>{if(y instanceof Xp)return ht(null);throw y}))),le(h=>!!h),pt((h,g)=>{if(Zp(h))return dC(e,r,s)?ht(new tn([],{})):Jh(e);throw h}))}expandSegmentAgainstRoute(t,e,i,r,s,c,h){return F_(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):Jh(e):Jh(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fC(s):this.lineralizeSegments(i,s).pipe((0,S.z)(c=>{const h=new tn(c,{});return this.expandSegment(t,h,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:b}=qi(e,r,s);if(!h)return Jh(e);const D=this.applyRedirectCommands(g,r.redirectTo,b);return r.redirectTo.startsWith("/")?fC(D):this.lineralizeSegments(r,D).pipe((0,S.z)(x=>this.expandSegment(t,e,i,x.concat(y),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=iC(i,t),i.loadChildren?(i._loadedRoutes?ht({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,dt.U)(h=>(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,new tn(r,{})))):ht(new tn(r,{}))):Qp(e,i,r,t).pipe(qn(({matched:c,consumedSegments:h,remainingSegments:g})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,S.z)(b=>{const D=b.injector??t,x=b.routes,{segmentGroup:F,slicedSegments:G}=jl(e,h,g,x),ne=new tn(F.segments,F.children);if(0===G.length&&ne.hasChildren())return this.expandChildren(D,x,ne).pipe((0,dt.U)(qe=>new tn(h,qe)));if(0===x.length&&0===G.length)return ht(new tn(h,{}));const te=Bs(i)===s;return this.expandSegment(D,ne,x,G,te?Bt:s,!0).pipe((0,dt.U)(Ke=>new tn(h.concat(Ke.segments),Ke.children)))})):Jh(e)))}getChildConfig(t,e,i){return e.children?ht({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ht({routes:e._loadedRoutes,injector:e._loadedInjector}):function mS(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ht(!0):ht(r.map(c=>{const h=Zh(c,n);return wo(function O_(n){return n&&Wc(n.canLoad)}(h)?h.canLoad(t,e):n.runInContext(()=>h(t,e)))})).pipe(zc(),_r())}(t,e,i).pipe((0,S.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Be.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function qc(n){return rr(eC(Qh,3))}())):ht({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ht(i);if(r.numberOfChildren>1||!r.children[Bt])return rr(new l.vHH(4e3,Qh));r=r.children[Bt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new sl(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Kn(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=e[h]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return Kn(e.children,(h,g)=>{c[g]=this.createSegmentGroup(t,h,i,r)}),new tn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,Qh);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class ZR{}class Ca{constructor(t,e,i,r,s,c,h,g){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=g}recognize(){const t=jl(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Bt).pipe((0,dt.U)(e=>{if(null===e)return null;const i=new wa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new va(i,e),s=new I_(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=Bp(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,an.D)(Object.keys(i.children)).pipe(xe(r=>{const s=i.children[r],c=zp(e,r);return this.processSegmentGroup(t,c,s,r)}),Ft((r,s)=>r&&s?(r.push(...s),r):null),function yi(n,t=!1){return(0,ei.e)((e,i)=>{let r=0;e.subscribe((0,Ln.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),k(null),Zn(),(0,dt.U)(r=>{if(null===r)return null;const s=B_(r);return function V_(n){n.sort((t,e)=>t.value.outlet===Bt?-1:e.value.outlet===Bt?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,an.D)(e).pipe(xe(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),le(c=>!!c),pt(c=>{if(Zp(c))return dC(i,r,s)?ht([]):ht(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!F_(e,i,r,s))return ht(null);let c;if("**"===e.path){const h=r.length>0?Rh(r).parameters:{},g=gC(i)+r.length;c=ht({snapshot:new wa(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eg(e),Bs(e),e.component??e._loadedComponent??null,e,Zc(i),g,tg(e),g),consumedSegments:[],remainingSegments:[]})}else c=Qp(i,e,r,t).pipe((0,dt.U)(({matched:h,consumedSegments:g,remainingSegments:y,parameters:b})=>{if(!h)return null;const D=gC(i)+g.length;return{snapshot:new wa(g,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eg(e),Bs(e),e.component??e._loadedComponent??null,e,Zc(i),D,tg(e),D),consumedSegments:g,remainingSegments:y}}));return c.pipe(qn(h=>{if(null===h)return ht(null);const{snapshot:g,consumedSegments:y,remainingSegments:b}=h;t=e._injector??t;const D=e._loadedInjector??t,x=function U_(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:F,slicedSegments:G}=jl(i,y,b,x.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===G.length&&F.hasChildren())return this.processChildren(D,x,F).pipe((0,dt.U)(te=>null===te?null:[new va(g,te)]));if(0===x.length&&0===G.length)return ht([new va(g,[])]);const ne=Bs(e)===s;return this.processSegment(D,x,F,G,ne?Bt:s).pipe((0,dt.U)(te=>null===te?null:[new va(g,te)]))}))}}function IS(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function B_(n){const t=[],e=new Set;for(const i of n){if(!IS(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=B_(i.children);t.push(new va(i.value,r))}return t.filter(i=>!e.has(i))}function Zc(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function gC(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function eg(n){return n.data||{}}function tg(n){return n.resolve||{}}function ng(n){return"string"==typeof n.title||null===n.title}function j_(n){return qn(t=>{const e=n(t);return e?(0,an.D)(e).pipe((0,dt.U)(()=>t)):ht(t)})}let vC=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Bt);return i}getResolvedTitleForRoute(e){return e.data[Mr]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(wC)},providedIn:"root"}),n})(),wC=(()=>{class n extends vC{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(qr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class TS{}class CC extends class DS{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Xh=new l.OlP("",{providedIn:"root",factory:()=>({})}),$_=new l.OlP("ROUTES");let W_=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ht(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=wo(e.loadComponent()).pipe((0,Be.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Ls(()=>{this.componentLoaders.delete(e)})),r=new ms(i,()=>new Wi.x).pipe(yo());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ht({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,dt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let g,y,b=!1;Array.isArray(h)?y=h:(g=h.create(e).injector,y=Sp(g.get($_,[],l.XFs.Self|l.XFs.Optional)));return{routes:y.map(A_),injector:g}}),Ls(()=>{this.childrenLoaders.delete(i)})),c=new ms(s,()=>new Wi.x).pipe(yo());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return wo(e()).pipe((0,S.z)(i=>i instanceof l.YKP||Array.isArray(i)?ht(i):(0,an.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class IC{}class bC{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function EC(n){throw n}function TC(n,t,e){return t.parse("/")}const SS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function DC(){const n=(0,l.f3M)(Lh),t=(0,l.f3M)($p),e=(0,l.f3M)(Le),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),s=(0,l.f3M)($_,{optional:!0})??[],c=(0,l.f3M)(Xh,{optional:!0})??{},h=(0,l.f3M)(wC),g=(0,l.f3M)(vC,{optional:!0}),y=(0,l.f3M)(IC,{optional:!0}),b=(0,l.f3M)(TS,{optional:!0}),D=new Ti(null,n,t,e,i,r,Sp(s));return y&&(D.urlHandlingStrategy=y),b&&(D.routeReuseStrategy=b),D.titleStrategy=g??h,function rg(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,D),D}let Ti=(()=>{class n{constructor(e,i,r,s,c,h,g){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Wi.x,this.errorHandler=EC,this.malformedUriErrorHandler=TC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ht(void 0),this.urlHandlingStrategy=new bC,this.routeReuseStrategy=new CC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(W_),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new q0(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new z0(x)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const D=c.get(l.R0b);this.isNgZoneEnabled=D instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Ap(){return new sl(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Vp(this.currentUrlTree,this.rootComponentType),this.transitions=new An({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(T(r=>0!==r.id),(0,dt.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),qn(r=>{let s=!1,c=!1;return ht(r).pipe((0,Be.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),qn(h=>{const g=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return z_(h.source)&&(this.browserUrlTree=h.extractedUrl),ht(h).pipe(qn(D=>{const x=this.transitions.getValue();return i.next(new w_(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?gs.E:Promise.resolve(D)}),function CS(n,t,e,i){return qn(r=>function al(n,t,e,i,r){return new wS(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,dt.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Be.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},r.urlAfterRedirects=D.urlAfterRedirects}),function _C(n,t,e,i,r,s){return(0,S.z)(c=>function KR(n,t,e,i,r,s,c="emptyOnly",h="legacy"){return new Ca(n,t,e,i,r,c,h,s).recognize().pipe(qn(g=>null===g?function pC(n){return new _i.y(t=>t.error(n))}(new ZR):ht(g)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,dt.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Be.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(F,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new eS(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:F,source:G,restoredState:ne,extras:te}=h,ze=new w_(x,this.serializeUrl(F),G,ne);i.next(ze);const Ke=Vp(F,this.rootComponentType).snapshot;return ht(r={...h,targetSnapshot:Ke,urlAfterRedirects:F,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),gs.E}),(0,Be.b)(h=>{const g=new UR(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,dt.U)(h=>r={...h,guards:WR(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function cS(n,t){return(0,S.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?ht({...e,guardsResult:!0}):function dS(n,t,e,i){return(0,an.D)(n).pipe((0,S.z)(r=>function gS(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ht(s.map(h=>{const g=qp(t)??r,y=Zh(h,g);return wo(function Yh(n){return n&&Wc(n.canDeactivate)}(y)?y.canDeactivate(n,t,e,i):g.runInContext(()=>y(n,t,e,i))).pipe(le())})).pipe(zc()):ht(!0)}(r.component,r.route,e,t,i)),le(r=>!0!==r,!0))}(c,i,r,n).pipe((0,S.z)(h=>h&&function aC(n){return"boolean"==typeof n}(h)?function N_(n,t,e,i){return(0,an.D)(t).pipe(xe(r=>fa(function fS(n,t){return null!==n&&t&&t(new Z0(n)),ht(!0)}(r.route.parent,i),function hS(n,t){return null!==n&&t&&t(new K0(n)),ht(!0)}(r.route,i),function lC(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function zR(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>_o(()=>ht(c.guards.map(g=>{const y=qp(c.node)??e,b=Zh(g,y);return wo(function R_(n){return n&&Wc(n.canActivateChild)}(b)?b.canActivateChild(i,n):y.runInContext(()=>b(i,n))).pipe(le())})).pipe(zc())));return ht(s).pipe(zc())}(n,r.path,e),function pS(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ht(!0);const r=i.map(s=>_o(()=>{const c=qp(t)??e,h=Zh(s,c);return wo(function aS(n){return n&&Wc(n.canActivate)}(h)?h.canActivate(t,n):c.runInContext(()=>h(t,n))).pipe(le())}));return ht(r).pipe(zc())}(n,r.route,e))),le(r=>!0!==r,!0))}(i,s,n,t):ht(h)),(0,dt.U)(h=>({...e,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Be.b)(h=>{if(r.guardsResult=h.guardsResult,P(h.guardsResult))throw Gp(0,h.guardsResult);const g=new BR(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),T(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),j_(h=>{if(h.guards.canActivateChecks.length)return ht(h).pipe((0,Be.b)(g=>{const y=new $h(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),qn(g=>{let y=!1;return ht(g).pipe(function YR(n,t){return(0,S.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ht(e);let s=0;return(0,an.D)(r).pipe(xe(c=>function Kc(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!ng(r)&&(s[Mr]=r.title),function H_(n,t,e,i){const r=function yC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ht({});const s={};return(0,an.D)(r).pipe((0,S.z)(c=>function ES(n,t,e,i){const r=qp(t)??i,s=Zh(n,r);return wo(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(le(),(0,Be.b)(h=>{s[c]=h}))),bt(1),function ga(n){return(0,dt.U)(()=>n)}(s),pt(c=>Zp(c)?gs.E:rr(c)))}(s,n,t,i).pipe((0,dt.U)(c=>(n._resolvedData=c,n.data=Bp(n,e).resolve,r&&ng(r)&&(n.data[Mr]=r.title),null)))}(c.route,i,n,t)),(0,Be.b)(()=>s++),bt(1),(0,S.z)(c=>s===r.length?ht(e):gs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Be.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Be.b)(g=>{const y=new C_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),j_(h=>{const g=y=>{const b=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Be.b)(D=>{y.component=D}),(0,dt.U)(()=>{})));for(const D of y.children)b.push(...g(D));return b};return Vl(g(h.targetSnapshot.root)).pipe(k(),kn(1))}),j_(()=>this.afterPreactivation()),(0,dt.U)(h=>{const g=function jc(n,t,e){const i=qh(n,t._root,e?e._root:void 0);return new J0(i,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return r={...h,targetRouterState:g}}),(0,Be.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,t,e)=>(0,dt.U)(i=>(new x_(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Be.b)({next(){s=!0},complete(){s=!0}}),Ls(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),pt(h=>{if(c=!0,tC(h)){T_(h)||(this.navigated=!0,this.restoreHistory(r,!0));const g=new Pp(r.id,this.serializeUrl(r.extractedUrl),h.message,h.cancellationCode);if(i.next(g),T_(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||z_(r.source)};this.scheduleNavigation(y,"imperative",null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const g=new W0(r.id,this.serializeUrl(r.extractedUrl),h,r.targetSnapshot??void 0);i.next(g);try{r.resolve(this.errorHandler(h))}catch(y){r.reject(y)}}return gs.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(r.state=h)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(A_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:h,preserveFragment:g}=i,y=r||this.routerState.root,b=g?this.currentUrlTree.fragment:c;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),Qt(y,this.currentUrlTree,e,D,b??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=P(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function SC(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new l.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...SS}:!1===i?{...JR}:i,P(e))return m_(this.currentUrlTree,e,r);const s=this.parseUrl(e);return m_(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ou(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let h,g,y;c?(h=c.resolve,g=c.reject,y=c.promise):y=new Promise((x,F)=>{h=x,g=F});const b=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),D=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:b,targetPageId:D,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:h,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new Pp(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return DC()},providedIn:"root"}),n})();function z_(n){return"imperative"!==n}let Yc=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Wi.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Ti),l.Y36(Hl),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class q_{}let Z_=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(T(e=>e instanceof Ou),xe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,h=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,an.D)(r).pipe((0,ha.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ht(null);const s=r.pipe((0,S.z)(c=>null===c?ht(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,an.D)([s,c]).pipe((0,ha.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ti),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(q_),l.LFG(W_))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pu=new l.OlP("");let xC=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof w_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ou&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Fp&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Fp(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Fu(n,t){return{\u0275kind:n,\u0275providers:t}}function tf(n){return[{provide:$_,multi:!0,useValue:n}]}function MS(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(Ti),r=n.get(K_);1===n.get(Y_)&&i.initialNavigation(),n.get(Hs,null,l.XFs.Optional)?.setUpPreloading(),n.get(Pu,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const K_=new l.OlP("",{factory:()=>new Wi.x}),Y_=new l.OlP("",{providedIn:"root",factory:()=>1});const Hs=new l.OlP("");function RS(n){return Fu(0,[{provide:Hs,useExisting:Z_},{provide:q_,useExisting:n}])}const OC=new l.OlP("ROUTER_FORROOT_GUARD"),PS=[Le,{provide:Lh,useClass:Ul},{provide:Ti,useFactory:DC},$p,{provide:Hl,useFactory:function MC(n){return n.routerState.root},deps:[Ti]},W_];function RC(){return new l.PXZ("Router",Ti)}let NC=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[PS,[],tf(e),{provide:OC,useFactory:PC,deps:[[Ti,new l.FiY,new l.tp0]]},{provide:Xh,useValue:i||{}},i?.useHash?{provide:Ie,useClass:tt}:{provide:Ie,useClass:it},{provide:Pu,useFactory:()=>{const n=(0,l.f3M)(Ti),t=(0,l.f3M)(gc),e=(0,l.f3M)(Xh);return e.scrollOffset&&t.setOffset(e.scrollOffset),new xC(n,t,e)}},i?.preloadingStrategy?RS(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:RC},i?.initialNavigation?FC(i):[],[{provide:Q_,useFactory:MS},{provide:l.tb,multi:!0,useExisting:Q_}]]}}static forChild(e){return{ngModule:n,providers:[tf(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(OC,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Nu]}),n})();function PC(n){return"guarded"}function FC(n){return["disabled"===n.initialNavigation?Fu(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const t=(0,l.f3M)(Ti);return()=>{t.setUpLocationChangeListener()}}},{provide:Y_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fu(2,[{provide:Y_,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:t=>{const e=t.get(Z,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(Ti),h=t.get(K_);(function r(s){t.get(Ti).events.pipe(T(h=>h instanceof Ou||h instanceof Pp||h instanceof W0),(0,dt.U)(h=>h instanceof Ou||h instanceof Pp&&(0===h.code||1===h.code)&&null),T(h=>null!==h),kn(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||h.closed?ht(void 0):h),c.initialNavigation()}))}}]).\u0275providers:[]]}const Q_=new l.OlP("");let LC={warnLogin:{severity:"warn",summary:"Warn",detail:"Efetue o Login"}};var US=V(8247),L=V(2090),kr=V(9681),Eo=V(1877),ba=V(4859),ug=V(6451),nf=V(5363),Lu=V(6063);class BS extends Wi.x{constructor(t=1/0,e=1/0,i=Lu.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let h=0;for(let g=1;g<i.length&&i[g]<=c;g+=2)h=g;h&&i.splice(0,h+1)}}}var cg=V(3099);function dg(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,cg.B)({connector:()=>new BS(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function VC(n,t){return(0,Ps.m)(t)?qn(()=>n,t):qn(()=>n)}var UC=V(9468),wn=V(5813),Zi=V(2011);V(5867);var Ce=V(5861);const sf=new Map,WS={activated:!1,tokenObservers:[]},ey={initialized:!1,enabled:!1};function or(n){return sf.get(n)||Object.assign({},WS)}function ll(){return ey}class ny{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ce.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function ul(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const yr=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qS(n){if(!or(n).activated)throw yr.create("use-before-activation",{appName:n.name})}function Xc(n,t){return ed.apply(this,arguments)}function ed(){return(ed=(0,Ce.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const F=yield c.getHeartbeatsHeader();F&&(s["X-Firebase-Client"]=F)}const h={method:"POST",body:JSON.stringify(t),headers:s};let g,y;try{g=yield fetch(n,h)}catch(F){throw yr.create("fetch-network-error",{originalErrorMessage:null===(i=F)||void 0===i?void 0:i.message})}if(200!==g.status)throw yr.create("fetch-status-error",{httpStatus:g.status});try{y=yield g.json()}catch(F){throw yr.create("fetch-parse-error",{originalErrorMessage:null===(r=F)||void 0===r?void 0:r.message})}const b=y.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw yr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(b[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function ay(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const af="firebase-app-check-store";let gg=null;function ly(){return gg||(gg=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(yr.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(af,{keyPath:"compositeKey"})}}catch(i){t(yr.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),gg)}function cy(){return(cy=(0,Ce.Z)(function*(n,t){const i=(yield ly()).transaction(af,"readwrite"),s=i.objectStore(af).put({compositeKey:n,value:t});return new Promise((c,h)=>{s.onsuccess=g=>{c()},i.onerror=g=>{var y;h(yr.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const _g=new Eo.Yd("@firebase/app-check");function qC(n,t){return(0,L.hl)()?function KS(n,t){return function uy(n,t){return cy.apply(this,arguments)}(function YS(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{_g.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function QS(){return ll().enabled}function JS(){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,Ce.Z)(function*(){const n=ll();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const XS={error:"UNKNOWN_ERROR"};function KC(n){return L.US.encodeString(JSON.stringify(n),!1)}function td(n){return yg.apply(this,arguments)}function yg(){return(yg=(0,Ce.Z)(function*(n,t=!1){const e=n.app;qS(e);const i=or(e);let s,r=i.token;if(r&&!nd(r)&&(i.token=void 0,r=void 0),!r){const g=yield i.cachedTokenPromise;g&&(nd(g)?r=g:yield qC(e,void 0))}if(!t&&r&&nd(r))return{token:r.token};let h,c=!1;if(QS()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Xc(ay(e,yield JS()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const g=yield i.exchangeTokenPromise;return yield qC(e,g),i.token=g,{token:g.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield or(e).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?_g.warn(g.message):_g.error(g),s=g}return r?s?h=nd(r)?{token:r.token,internalError:s}:fy(s):(h={token:r.token},i.token=r,yield qC(e,r)):h=fy(s),c&&QC(e,h),h})).apply(this,arguments)}function hy(n,t){const e=or(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function cl(n){const{app:t}=n,e=or(t);let i=e.tokenRefresher;i||(i=function YC(n){const{app:t}=n;return new ny((0,Ce.Z)(function*(){let i;if(i=or(t).token?yield td(n,!0):yield td(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=or(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function QC(n,t){const e=or(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function nd(n){return n.expireTimeMillis-Date.now()>0}function fy(n){return{token:KC(XS),error:n}}class eA{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=or(this.app);for(const e of t)hy(this.app,e.next);return Promise.resolve()}}const Cy="app-check-internal";!function rA(){(0,kr._registerComponent)(new ba.wA("app-check",n=>function tA(n,t){return new eA(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Cy).initialize()})),(0,kr._registerComponent)(new ba.wA(Cy,n=>function vg(n){return{getToken:t=>td(n,t),addTokenListener:t=>function lf(n,t,e,i){const{app:r}=n,s=or(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&nd(s.token)){const h=s.token;Promise.resolve().then(()=>{e({token:h.token}),cl(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>cl(n))}(n,"INTERNAL",t),removeTokenListener:t=>hy(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,kr.registerVersion)("@firebase/app-check","0.5.17")}();class sd{constructor(){return(0,wn.vb)("app-check")}}typeof window<"u"&&window;var Tg=V(127);const Ey=new l.OlP("angularfire2.auth.use-emulator"),Ty=new l.OlP("angularfire2.auth.settings"),od=new l.OlP("angularfire2.auth.tenant-id"),cf=new l.OlP("angularfire2.auth.langugage-code"),ad=new l.OlP("angularfire2.auth.use-device-language"),sI=new l.OlP("angularfire.auth.persistence"),df=(n,t,e,i,r,s,c,h)=>(0,Zi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=t.runOutsideAngular(()=>n.auth());if(e&&g.useEmulator(...e),i&&(g.tenantId=i),g.languageCode=r,s&&g.useDeviceLanguage(),c)for(const[y,b]of Object.entries(c))g.settings[y]=b;return h&&g.setPersistence(h),g},[e,i,r,s,c,h]);let Dg=(()=>{class n{constructor(e,i,r,s,c,h,g,y,b,D,x,F){const G=new Wi.x,ne=ht(void 0).pipe((0,nf.Q)(c.outsideAngular),qn(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,5881)))),(0,dt.U)(()=>(0,Zi.on)(e,s,i)),(0,dt.U)(te=>df(te,s,h,y,b,D,g,x)),dg({bufferSize:1,refCount:!1}));if($o(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{ne.pipe(le()).subscribe();const ze=ne.pipe(qn(Je=>Je.getRedirectResult().then(gt=>gt,()=>null)),wn.iC,dg({bufferSize:1,refCount:!1})),Ke=ne.pipe(qn(Je=>new _i.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Je.onAuthStateChanged(xt=>gt.next(xt),xt=>gt.error(xt),()=>gt.complete()))})))),qe=ne.pipe(qn(Je=>new _i.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Je.onIdTokenChanged(xt=>gt.next(xt),xt=>gt.error(xt),()=>gt.complete()))}))));this.authState=ze.pipe(VC(Ke),(0,UC.R)(c.outsideAngular),(0,nf.Q)(c.insideAngular)),this.user=ze.pipe(VC(qe),(0,UC.R)(c.outsideAngular),(0,nf.Q)(c.insideAngular)),this.idToken=this.user.pipe(qn(Je=>Je?(0,an.D)(Je.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(qn(Je=>Je?(0,an.D)(Je.getIdTokenResult()):ht(null))),this.credential=(0,ug.T)(ze,G,this.authState.pipe(T(Je=>!Je))).pipe((0,dt.U)(Je=>Je?.user?Je:null),(0,UC.R)(c.outsideAngular),(0,nf.Q)(c.insideAngular))}return(0,Zi.pX)(this,ne,s,{spy:{apply:(te,ze,Ke)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&Ke.then(qe=>G.next(qe))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Zi.Dh),l.LFG(Zi.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(Ey,8),l.LFG(Ty,8),l.LFG(od,8),l.LFG(cf,8),l.LFG(ad,8),l.LFG(sI,8),l.LFG(sd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oI=(()=>{class n{constructor(){Tg.Z.registerVersion("angularfire",wn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Dg]}),n})(),ld=(()=>{class n{constructor(e,i){this.afAuth=e,this.router=i}googleLogin(){return this.afAuth.signInWithPopup(new US.Q).then(e=>{localStorage[n.tokenKey]=e.credential.accessToken,localStorage[n.userUidKey]=e?.user?.uid,this.router.navigate([""])}).catch(e=>{this.router.navigate(["/login"])})}logout(){return localStorage.removeItem(n.tokenKey),localStorage.removeItem(n.userUidKey),this.afAuth.signOut()}}return n.tokenKey="userToken",n.userUidKey="userUid",n.\u0275fac=function(e){return new(e||n)(l.LFG(Dg),l.LFG(Ti))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function js(n,t){return{type:7,name:n,definitions:t,options:{}}}function vs(n,t=null){return{type:4,styles:t,timings:n}}function Gs(n){return{type:6,styles:n,offset:null}}function Sy(n,t,e){return{type:0,name:n,styles:t,options:e}}function Ta(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function lI(n,t=null){return{type:8,animation:n,options:t}}function uI(n,t=null){return{type:10,animation:n,options:t}}class bn{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,c,h,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((c=t.length)!=e.length)return!1;for(s=c;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(i!=r)return!1;var g=t instanceof Date,y=e instanceof Date;if(g!=y)return!1;if(g&&y)return t.getTime()==e.getTime();var b=t instanceof RegExp,D=e instanceof RegExp;if(b!=D)return!1;if(b&&D)return t.toString()==e.toString();var x=Object.keys(t);if((c=x.length)!==Object.keys(e).length)return!1;for(s=c;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,x[s]))return!1;for(s=c;0!=s--;)if(!this.equalsByValue(t[h=x[s]],e[h]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let s=0,c=i.length;s<c;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let s=!1;for(let c=0;c<i.length;c++)if(this.findIndexInList(i[c],r)>e){i.splice(c,0,t),s=!0;break}s||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let s=-1;const c=this.isEmpty(t),h=this.isEmpty(e);return s=c&&h?0:c?r:h?-r:"string"==typeof t&&"string"==typeof e?t.localeCompare(e,i,{numeric:!0}):t<e?-1:t>e?1:0,s}static sort(t,e,i=1,r,s=1){return(1===s?i:s)*bn.compare(t,e,r,i)}static merge(t,e){return null!=t&&"object"!=typeof t||null!=e&&"object"!=typeof e?null!=t&&"string"!=typeof t||null!=e&&"string"!=typeof e?e||t:[t||"",e||""].join(" "):{...t||{},...e||{}}}}var xg=0;function cI(){return"pr_id_"+ ++xg}var $s=function Ay(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,c,h)=>{c&&(c.style.zIndex=String(((s,c)=>{let h=n.length>0?n[n.length-1]:{key:s,value:c},g=h.value+(h.key===s?0:c)+1;return n.push({key:s,value:g}),g})(s,h)))},clear:s=>{s&&((s=>{n=n.filter(c=>c.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();const dI=["*"];let vr=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),Vu=(()=>{class n{constructor(){this.filters={startsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=bn.removeAccents(i.toString()).toLocaleLowerCase(r);return bn.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=bn.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==bn.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=bn.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===bn.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=bn.removeAccents(i.toString()).toLocaleLowerCase(r),c=bn.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==c.indexOf(s,c.length-s.length)},equals:(e,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():bn.removeAccents(e.toString()).toLocaleLowerCase(r)==bn.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(e,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():bn.removeAccents(e.toString()).toLocaleLowerCase(r)==bn.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(e,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(bn.equals(e,i[r]))return!0;return!1},between:(e,i)=>null==i||null==i[0]||null==i[1]||null!=e&&(e.getTime?i[0].getTime()<=e.getTime()&&e.getTime()<=i[1].getTime():i[0]<=e&&e<=i[1]),lt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<i.getTime():e<i),lte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<=i.getTime():e<=i),gt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>i.getTime():e>i),gte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>=i.getTime():e>=i),is:(e,i,r)=>this.filters.equals(e,i,r),isNot:(e,i,r)=>this.filters.notEquals(e,i,r),before:(e,i,r)=>this.filters.lt(e,i,r),after:(e,i,r)=>this.filters.gt(e,i,r),dateIs:(e,i)=>null==i||null!=e&&e.toDateString()===i.toDateString(),dateIsNot:(e,i)=>null==i||null!=e&&e.toDateString()!==i.toDateString(),dateBefore:(e,i)=>null==i||null!=e&&e.getTime()<i.getTime(),dateAfter:(e,i)=>null==i||null!=e&&e.getTime()>i.getTime()}}filter(e,i,r,s,c){let h=[];if(e)for(let g of e)for(let y of i){let b=bn.resolveFieldData(g,y);if(this.filters[s](b,r,c)){h.push(g);break}}return h}register(e,i){this.filters[e]=i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ON=(()=>{class n{constructor(){this.messageSource=new Wi.x,this.clearSource=new Wi.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),ud=(()=>{class n{constructor(){this.clickSource=new Wi.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cd=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[vr.STARTS_WITH,vr.CONTAINS,vr.NOT_CONTAINS,vr.ENDS_WITH,vr.EQUALS,vr.NOT_EQUALS],numeric:[vr.EQUALS,vr.NOT_EQUALS,vr.LESS_THAN,vr.LESS_THAN_OR_EQUAL_TO,vr.GREATER_THAN,vr.GREATER_THAN_OR_EQUAL_TO],date:[vr.DATE_IS,vr.DATE_IS_NOT,vr.DATE_BEFORE,vr.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Wi.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),My=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:dI,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},encapsulation:2}),n})(),pA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:dI,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},encapsulation:2}),n})(),Ni=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),Ws=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi]}),n})(),Nn=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})(),be=(()=>{class n{static addClass(e,i){e&&i&&(e.classList?e.classList.add(i):e.className+=" "+i)}static addMultipleClasses(e,i){if(e&&i)if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,i){return!(!e||!i)&&(e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var c=0;c<r.length;c++){if(r[c]==e)return s;r[c].attributes&&r[c].attributes[i]&&1==r[c].nodeType&&s++}return-1}static appendOverlay(e,i,r="self"){"self"!==r&&e&&i&&this.appendChild(e,i)}static alignOverlay(e,i,r="self",s=!0){e&&i&&(s&&(e.style.minWidth||(e.style.minWidth=n.getOuterWidth(i)+"px")),"self"===r?this.relativePosition(e,i):this.absolutePosition(e,i))}static relativePosition(e,i){const r=ne=>{if(ne)return"relative"===getComputedStyle(ne).getPropertyValue("position")?ne:r(ne.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),c=i.offsetHeight,h=i.getBoundingClientRect(),g=this.getWindowScrollTop(),y=this.getWindowScrollLeft(),b=this.getViewport(),x=r(e)?.getBoundingClientRect()||{top:-1*g,left:-1*y};let F,G;h.top+c+s.height>b.height?(F=h.top-x.top-s.height,e.style.transformOrigin="bottom",h.top+F<0&&(F=-1*h.top)):(F=c+h.top-x.top,e.style.transformOrigin="top"),G=s.width>b.width?-1*(h.left-x.left):h.left-x.left+s.width>b.width?-1*(h.left-x.left+s.width-b.width):h.left-x.left,e.style.top=F+"px",e.style.left=G+"px"}static absolutePosition(e,i){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,c=r.width,h=i.offsetHeight,g=i.offsetWidth,y=i.getBoundingClientRect(),b=this.getWindowScrollTop(),D=this.getWindowScrollLeft(),x=this.getViewport();let F,G;y.top+h+s>x.height?(F=y.top+b-s,e.style.transformOrigin="bottom",F<0&&(F=b)):(F=h+y.top+b,e.style.transformOrigin="top"),G=y.left+c>x.width?Math.max(0,y.left+D+g-c):y.left+D,e.style.top=F+"px",e.style.left=G+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,c=h=>{let g=window.getComputedStyle(h,null);return s.test(g.getPropertyValue("overflow"))||s.test(g.getPropertyValue("overflowX"))||s.test(g.getPropertyValue("overflowY"))};for(let h of r){let g=1===h.nodeType&&h.dataset.scrollselectors;if(g){let y=g.split(",");for(let b of y){let D=this.findSingle(h,b);D&&c(D)&&i.push(D)}}9!==h.nodeType&&c(h)&&i.push(h)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,c=getComputedStyle(e).getPropertyValue("paddingTop"),h=c?parseFloat(c):0,g=e.getBoundingClientRect(),b=i.getBoundingClientRect().top+document.body.scrollTop-(g.top+document.body.scrollTop)-s-h,D=e.scrollTop,x=e.clientHeight,F=this.getOuterHeight(i);b<0?e.scrollTop=D+b:b+F>x&&(e.scrollTop=D+b-x+F)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,c=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(c)||setTimeout(c,16))};c()}static fadeOut(e,i){var r=1,h=50/i;let g=setInterval(()=>{(r-=h)<=0&&(r=0,clearInterval(g)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(c){return-1!==[].indexOf.call(document.querySelectorAll(c),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,i){e&&document.activeElement!==e&&e.focus(i)}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,i){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const c=(h=e)&&h.constructor&&h.call&&h.apply?e():e;return c&&9===c.nodeType||this.isExist(c)?c:null}var h}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class Xr{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=be.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let hd=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(be.removeClass(i,"p-ink-active"),!be.getHeight(i)&&!be.getWidth(i)){let h=Math.max(be.getOuterWidth(this.el.nativeElement),be.getOuterHeight(this.el.nativeElement));i.style.height=h+"px",i.style.width=h+"px"}let r=be.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-be.getWidth(i)/2,c=e.pageY-r.top+document.body.scrollLeft-be.getHeight(i)/2;i.style.top=c+"px",i.style.left=s+"px",be.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let h=this.getInk();h&&be.removeClass(h,"p-ink-active")},401)}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&be.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),be.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),be.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(cd,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),hl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi]}),n})();function fd(n,t){if(1&n&&l._UZ(0,"span",11),2&n){const e=l.oxw(2).$implicit;l.Q6J("innerHTML",e.summary,l.oJD)}}function pd(n,t){if(1&n&&l._UZ(0,"span",12),2&n){const e=l.oxw(2).$implicit;l.Q6J("innerHTML",e.detail,l.oJD)}}function gd(n,t){if(1&n&&(l.ynx(0),l.YNc(1,fd,1,1,"span",9),l.YNc(2,pd,1,1,"span",10),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngIf",e.summary),l.xp6(1),l.Q6J("ngIf",e.detail)}}function md(n,t){if(1&n&&(l.TgZ(0,"span",15),l._uU(1),l.qZA()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.summary)}}function _d(n,t){if(1&n&&(l.TgZ(0,"span",16),l._uU(1),l.qZA()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.detail)}}function yd(n,t){if(1&n&&(l.YNc(0,md,2,1,"span",13),l.YNc(1,_d,2,1,"span",14)),2&n){const e=l.oxw().$implicit;l.Q6J("ngIf",e.summary),l.xp6(1),l.Q6J("ngIf",e.detail)}}function vd(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",17),l.NdJ("click",function(){l.CHM(e);const r=l.oxw().index,s=l.oxw(2);return l.KtG(s.removeMessage(r))}),l._UZ(1,"i",18),l.qZA()}}const wd=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},hI=function(n){return{value:"visible",params:n}},fI=function(n,t,e,i){return{"pi-info-circle":n,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":i}};function pI(n,t){if(1&n&&(l.TgZ(0,"div",4)(1,"div",5),l._UZ(2,"span",6),l.YNc(3,gd,3,2,"ng-container",1),l.YNc(4,yd,2,2,"ng-template",null,7,l.W1O),l.YNc(6,vd,2,0,"button",8),l.qZA()()),2&n){const e=t.$implicit,i=l.MAs(5),r=l.oxw(2);l.Tol("p-message p-message-"+e.severity),l.Q6J("@messageAnimation",l.VKq(12,hI,l.WLB(9,wd,r.showTransitionOptions,r.hideTransitionOptions))),l.xp6(2),l.Tol("p-message-icon pi"+(e.icon?" "+e.icon:"")),l.Q6J("ngClass",l.l5B(14,fI,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),l.xp6(1),l.Q6J("ngIf",!r.escape)("ngIfElse",i),l.xp6(3),l.Q6J("ngIf",r.closable)}}function gI(n,t){if(1&n&&(l.ynx(0),l.YNc(1,pI,7,19,"div",3),l.BQk()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.value)}}function mI(n,t){1&n&&l.GkF(0)}function _I(n,t){if(1&n&&(l.TgZ(0,"div",19)(1,"div",5),l.YNc(2,mI,1,0,"ng-container",20),l.qZA()()),2&n){const e=l.oxw();l.Q6J("ngClass","p-message p-message-"+e.severity),l.xp6(2),l.Q6J("ngTemplateOutlet",e.contentTemplate)}}let yI=(()=>{class n{constructor(e,i,r){this.messageService=e,this.el=i,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new l.vpe}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let i=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...i]:[...i]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((i,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ON,8),l.Y36(l.SBq),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-messages"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Ni,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,i){if(1&e&&(l.TgZ(0,"div",0),l.YNc(1,gI,2,1,"ng-container",1),l.YNc(2,_I,3,2,"ng-template",null,2,l.W1O),l.qZA()),2&e){const r=l.MAs(3);l.Tol(i.styleClass),l.Q6J("ngStyle",i.style),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate)("ngIfElse",r)}},dependencies:[Kt,dr,dn,Gi,er,hd],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[js("messageAnimation",[Ta(":enter",[Gs({opacity:0,transform:"translateY(-25%)"}),vs("{{showTransitionParams}}")]),Ta(":leave",[vs("{{hideTransitionParams}}",Gs({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),n})(),vI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,hl]}),n})();function wI(n,t){1&n&&l.GkF(0)}const gA=function(n,t,e,i){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":i}};function mA(n,t){if(1&n&&l._UZ(0,"span",4),2&n){const e=l.oxw();l.Tol(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),l.Q6J("ngClass",l.l5B(4,gA,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),l.uIk("aria-hidden",!0)}}function CI(n,t){if(1&n&&(l.TgZ(0,"span",5),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.uIk("aria-hidden",e.icon&&!e.label),l.xp6(1),l.Oqu(e.label)}}function _A(n,t){if(1&n&&(l.TgZ(0,"span",4),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.Tol(e.badgeClass),l.Q6J("ngClass",e.badgeStyleClass()),l.xp6(1),l.Oqu(e.badge)}}const II=function(n,t,e,i,r){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":t,"p-disabled":e,"p-button-loading":i,"p-button-loading-label-only":r}},ky=["*"];let Mg=(()=>{class n{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){if(this._initialStyleClass=this.el.nativeElement.className,be.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl(),this.label){let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",e.appendChild(document.createTextNode(this.label)),this.el.nativeElement.appendChild(e)}this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&bn.isEmpty(this.el.nativeElement.textContent)&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&be.addClass(e,i);let r=this.getIconClass();r&&be.addMultipleClasses(e,r),this.el.nativeElement.insertBefore(e,this.el.nativeElement.firstChild)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=be.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=be.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(be.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label,(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),Oy=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Ni,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:ky,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"button",0),l.NdJ("click",function(s){return i.onClick.emit(s)})("focus",function(s){return i.onFocus.emit(s)})("blur",function(s){return i.onBlur.emit(s)}),l.Hsn(1),l.YNc(2,wI,1,0,"ng-container",1),l.YNc(3,mA,1,9,"span",2),l.YNc(4,CI,2,2,"span",3),l.YNc(5,_A,2,4,"span",2),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngStyle",i.style)("disabled",i.disabled||i.loading)("ngClass",l.qbA(11,II,i.icon&&!i.label,("top"===i.iconPos||"bottom"===i.iconPos)&&i.label,i.disabled||i.loading,i.loading,i.loading&&!i.icon&&i.label)),l.uIk("type",i.type)("aria-label",i.ariaLabel),l.xp6(2),l.Q6J("ngTemplateOutlet",i.contentTemplate),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&(i.icon||i.loading)),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&i.label),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&i.badge))},dependencies:[Kt,dn,Gi,er,hd],encapsulation:2,changeDetection:0}),n})(),Cd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,hl]}),n})();function kg(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span")(1,"p-messages",8),l.NdJ("valueChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.msgsWarn=r)}),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(1),l.Q6J("value",e.msgsWarn)}}let yA=(()=>{class n{constructor(e,i){this.route=e,this.loginSerice=i,this.error=!1,this.msgs=[],this.msgsWarn=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{1==e.error?(this.error=!0,this.msgsWarn=[LC.warnLogin]):this.error=!1})}loginGoogle(){this.loginSerice.googleLogin().then()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Hl),l.Y36(ld))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","align-items-center"],[1,"padding-login","grid","justify-content-center"],[1,"login-box","login","col-6","justify-content-center"],["src","assets/OrelhaSeca.png",1,"login-logo"],[1,"text-center"],[4,"ngIf"],[3,"value","valueChange"],[1,"login-button"],["type","button","label","Google",1,"",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l._UZ(5,"img",5),l.TgZ(6,"div",6),l.YNc(7,kg,2,1,"span",7),l.TgZ(8,"p-messages",8),l.NdJ("valueChange",function(s){return i.msgs=s}),l.qZA()(),l.TgZ(9,"div",9)(10,"p-button",10),l.NdJ("click",function(){return i.loginGoogle()}),l.qZA()()()()()()()),2&e&&(l.xp6(7),l.Q6J("ngIf",i.error),l.xp6(1),l.Q6J("value",i.msgs))},dependencies:[dn,yI,Oy],styles:[".login-box[_ngcontent-%COMP%]{width:100%;height:100%;max-width:500px;text-align:center}.login[_ngcontent-%COMP%]{background:rgb(255,255,255);justify-content:center;align-items:center;border-left-color:#010c29;border-right-color:#010c29;border-bottom-color:#010c29;border-top-color:#010c29;border-style:solid;border-radius:5px;border-width:2px}.login-logo[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:20px;width:90%;max-width:400px}.padding-login[_ngcontent-%COMP%]{padding-top:100px;align-items:center;align-content:center;align-self:center}.text-center[_ngcontent-%COMP%]{text-align:center}.login-button[_ngcontent-%COMP%]{text-align:center;padding-top:1em;padding-bottom:2em}.login-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em}.menu-container[_ngcontent-%COMP%]{background-color:#fff;max-width:1900px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:1810px;padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;min-height:100%}"]}),n})();const Og=["*"];let Gl=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-template"]],ngContentSelectors:Og,decls:8,vars:0,consts:[[1,"navbar"],["icon","pi pi-home","routerLink","/home",1,"menu-item"],["icon","pi pi-search","routerLink","/search",1,"menu-item"],["icon","pi pi-plus","routerLink","/novo",1,"menu-item"],["icon","pi pi-bell","routerLink","/notific",1,"menu-item"],["icon","pi pi-user","routerLink","/config",1,"menu-item"],[1,"content"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"div",0),l._UZ(1,"p-button",1)(2,"p-button",2)(3,"p-button",3)(4,"p-button",4)(5,"p-button",5),l.qZA(),l.TgZ(6,"div",6),l.Hsn(7),l.qZA())},dependencies:[Yc,Oy],styles:[".navbar[_ngcontent-%COMP%]{overflow:hidden;background-color:#333;position:fixed;bottom:0;width:100%;text-align:center;padding-top:.5em;padding-bottom:.5em;justify-content:space-evenly;display:flex;z-index:999}.content[_ngcontent-%COMP%]{margin-bottom:30px}.menu-item[_ngcontent-%COMP%]{padding-left:.2em;padding-right:.2em}"]}),n})();function Ry(n,t){1&n&&l.GkF(0)}function EI(n,t){if(1&n&&(l.TgZ(0,"div",8),l.Hsn(1,1),l.YNc(2,Ry,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngTemplateOutlet",e.headerTemplate)}}function Ny(n,t){1&n&&l.GkF(0)}function TI(n,t){if(1&n&&(l.TgZ(0,"div",9),l._uU(1),l.YNc(2,Ny,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij(" ",e.header," "),l.xp6(1),l.Q6J("ngTemplateOutlet",e.titleTemplate)}}function DI(n,t){1&n&&l.GkF(0)}function Py(n,t){if(1&n&&(l.TgZ(0,"div",10),l._uU(1),l.YNc(2,DI,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij(" ",e.subheader," "),l.xp6(1),l.Q6J("ngTemplateOutlet",e.subtitleTemplate)}}function SI(n,t){1&n&&l.GkF(0)}function vA(n,t){1&n&&l.GkF(0)}function AI(n,t){if(1&n&&(l.TgZ(0,"div",11),l.Hsn(1,2),l.YNc(2,vA,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const xI=["*",[["p-header"]],[["p-footer"]]],MI=["*","p-header","p-footer"];let kI=(()=>{class n{constructor(e){this.el=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"title":this.titleTemplate=e.template;break;case"subtitle":this.subtitleTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-card"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,My,5),l.Suo(r,pA,5),l.Suo(r,Ni,4)),2&e){let s;l.iGM(s=l.CRH())&&(i.headerFacet=s.first),l.iGM(s=l.CRH())&&(i.footerFacet=s.first),l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:MI,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(e,i){1&e&&(l.F$t(xI),l.TgZ(0,"div",0),l.YNc(1,EI,3,1,"div",1),l.TgZ(2,"div",2),l.YNc(3,TI,3,2,"div",3),l.YNc(4,Py,3,2,"div",4),l.TgZ(5,"div",5),l.Hsn(6),l.YNc(7,SI,1,0,"ng-container",6),l.qZA(),l.YNc(8,AI,3,1,"div",7),l.qZA()()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass","p-card p-component")("ngStyle",i.style),l.xp6(1),l.Q6J("ngIf",i.headerFacet||i.headerTemplate),l.xp6(2),l.Q6J("ngIf",i.header||i.titleTemplate),l.xp6(1),l.Q6J("ngIf",i.subheader||i.subtitleTemplate),l.xp6(3),l.Q6J("ngTemplateOutlet",i.contentTemplate),l.xp6(1),l.Q6J("ngIf",i.footerFacet||i.footerTemplate))},dependencies:[Kt,dn,Gi,er],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),wA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,Ws]}),n})();function OI(n,t){if(1&n&&(l.TgZ(0,"div",8)(1,"div",9),l._UZ(2,"img",10),l.qZA(),l.TgZ(3,"div",11),l._uU(4),l.qZA()()),2&n){const e=l.oxw();l.xp6(2),l.s9C("src",e.profiePic,l.LSH),l.xp6(2),l.hij(" ",e.userName," ")}}function RI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.liked=!r.liked)}),l.qZA()}}function Fy(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",13),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.liked=!r.liked)}),l.qZA()}}let Ly=(()=>{class n{constructor(){this.liked=!1,this.videoSrc="assets/video01.mp4",this.userName="Caesar Zama Altran",this.profiePic="assets/profile-cza.png",this.legenda="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-feed-card"]],inputs:{videoSrc:"videoSrc",userName:"userName",profiePic:"profiePic",legenda:"legenda"},decls:11,vars:5,consts:[["pTemplate","header"],["controls","",2,"max-width","100%",3,"src"],["class","pi pi-heart post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],["class","pi pi-heart-fill post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],[1,"pi","pi-share-alt","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[1,"pi","pi-comments","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[2,"margin-bottom","1em"],[2,"font-weight","bold"],[1,"flex","content-card-header","align-content-center"],[2,"padding-right",".4em"],[1,"profile-img",3,"src"],[1,"align-content-center",2,"padding-top",".28em","font-weight","bold"],[1,"pi","pi-heart","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"],[1,"pi","pi-heart-fill","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"p-card"),l.YNc(1,OI,5,2,"ng-template",0),l._UZ(2,"video",1),l.YNc(3,RI,1,0,"i",2),l.YNc(4,Fy,1,0,"i",3),l._UZ(5,"i",4)(6,"i",5),l.TgZ(7,"div",6)(8,"span",7),l._uU(9),l.qZA(),l._uU(10),l.qZA()()),2&e&&(l.xp6(2),l.s9C("src",i.videoSrc,l.LSH),l.xp6(1),l.Q6J("ngIf",!i.liked),l.xp6(1),l.Q6J("ngIf",i.liked),l.xp6(5),l.hij("",i.userName," "),l.xp6(1),l.hij("",i.legenda," "))},dependencies:[dn,Ni,kI],styles:[".content-card-header[_ngcontent-%COMP%]{padding-top:.5em;padding-left:.5em;padding-bottom:.2em}.post-actions[_ngcontent-%COMP%]{padding:.2em}"]}),n})(),NI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:0,consts:[["profiePic","assets/cza-profile.png","userName","Caesar Zama Altran","videoSrc","assets/video01.mp4","legenda","Ol\xe1 mundo! Primeiro v\xeddeo de teste da plataforma!"],["profiePic","assets/profile-lincoln.jpg","userName","Lincoln Ricardo","videoSrc","assets/video02.mp4","legenda","GO GO GO! Hackathon com @CaesarAltran @GuilhermeNascimento @NathanAlmici e @BrunoRicardo"],["profiePic","assets/profile-gui.jpg","userName","Guilherme Nascimento","videoSrc","assets/video02.mp4"],["profiePic","assets/profile-nathan.jpg","userName","Nathan Almici","videoSrc","assets/video02.mp4"],["profiePic","assets/profile-bruno.jpg","userName","Bruno Ricardo","videoSrc","assets/video02.mp4"]],template:function(e,i){1&e&&(l.TgZ(0,"app-template"),l._UZ(1,"app-feed-card",0)(2,"app-feed-card",1)(3,"app-feed-card",2)(4,"app-feed-card",3)(5,"app-feed-card",4),l.qZA())},dependencies:[Gl,Ly]}),n})(),Id=(()=>{class n{constructor(e){this.router=e}canActivate(e,i){return localStorage,console.log(localStorage[ld.tokenKey]),null==localStorage[ld.tokenKey]?(this.router.navigate(["/login"]),!1):"null"!=localStorage[ld.tokenKey]||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ti))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vy=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),$l=(()=>{class n extends Vy{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Or=new l.OlP("NgValueAccessor"),NN={provide:Or,useExisting:(0,l.Gpc)(()=>hf),multi:!0},IA=new l.OlP("CompositionEventMode");let hf=(()=>{class n extends Vy{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CA(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(IA,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([NN]),l.qOj]}),n})();const wr=new l.OlP("NgValidators"),Wl=new l.OlP("NgAsyncValidators");function Rg(n){return null!=n}function Ng(n){return(0,l.QGY)(n)?(0,an.D)(n):n}function zs(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function HI(n,t){return t.map(e=>e(n))}function Do(n){return n.map(t=>function jI(n){return!n.validate}(t)?t:e=>t.validate(e))}function ws(n){return null!=n?function qs(n){if(!n)return null;const t=n.filter(Rg);return 0==t.length?null:function(e){return zs(HI(e,t))}}(Do(n)):null}function Pg(n){return null!=n?function zy(n){if(!n)return null;const t=n.filter(Rg);return 0==t.length?null:function(e){return function PI(...n){const t=(0,Kr.jO)(n),{args:e,keys:i}=go(n),r=new _i.y(s=>{const{length:c}=e;if(!c)return void s.complete();const h=new Array(c);let g=c,y=c;for(let b=0;b<c;b++){let D=!1;(0,ir.Xf)(e[b]).subscribe((0,Ln.x)(s,x=>{D||(D=!0,y--),h[b]=x},()=>g--,void 0,()=>{(!g||!D)&&(y||s.next(i?nl(i,h):h),s.complete())}))}});return t?r.pipe(Ll(t)):r}(HI(e,t).map(Ng)).pipe((0,dt.U)(zs))}}(Do(n)):null}function GI(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function qy(n){return n?Array.isArray(n)?n:[n]:[]}function bd(n,t){return Array.isArray(n)?n.includes(t):n===t}function Ed(n,t){const e=qy(t);return qy(n).forEach(r=>{bd(e,r)||e.push(r)}),e}function zI(n,t){return qy(t).filter(e=>!bd(n,e))}class Zy{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ws(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Pg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Rr extends Zy{get formDirective(){return null}get path(){return null}}class fl extends Zy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Qy=(()=>{class n extends class Ky{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(fl,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})();const pf="VALID",Lg="INVALID",Hu="PENDING",gf="DISABLED";function YI(n){return Array.isArray(n)?ws(n):n||null}function QI(n){return Array.isArray(n)?Pg(n):n||null}function Vg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Td(n,t){(function rv(n,t){const e=function $I(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(GI(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function WI(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(GI(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();yf(t._rawValidators,r),yf(t._rawAsyncValidators,r)})(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function Dd(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Hg(n,t)})}(n,t),function BN(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function UN(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Hg(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function ju(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function yf(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Hg(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ib(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function av(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Wg={provide:fl,useExisting:(0,l.Gpc)(()=>vf)},uv=(()=>Promise.resolve())();let vf=(()=>{class n extends fl{constructor(e,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new class extends class iv{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=YI(this._rawValidators),this._composedAsyncValidatorFn=QI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===pf}get invalid(){return this.status===Lg}get pending(){return this.status==Hu}get disabled(){return this.status===gf}get enabled(){return this.status!==gf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=YI(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=QI(t)}addValidators(t){this.setValidators(Ed(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ed(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(zI(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(zI(t,this._rawAsyncValidators))}hasValidator(t){return bd(this._rawValidators,t)}hasAsyncValidator(t){return bd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Hu,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=gf,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pf,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pf||this.status===Hu)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gf:pf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Hu,this._hasOwnPendingAsyncValidator=!0;const e=Ng(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?gf:this.errors?Lg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hu)?Hu:this._anyControlsHaveStatus(Lg)?Lg:pf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Vg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,i){super(function ev(n){return(Vg(n)?n.validators:n)||null}(e),function tv(n,t){return(Vg(t)?t.asyncValidators:n)||null}(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=av(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ib(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ib(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){av(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new l.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Ad(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===hf?e=s:function Sd(n){return Object.getPrototypeOf(n.constructor)===$l}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function ov(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Td(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){uv.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,l.D6c)(i);uv.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function mf(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Rr,9),l.Y36(wr,10),l.Y36(Wl,10),l.Y36(Or,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([Wg]),l.qOj,l.TTD]}),n})(),lb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),YA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[lb]}),n})(),QA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[YA]}),n})();const yv=["container"],vv=["inputfield"],Sb=["contentWrapper"];function wv(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",8),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.clear())}),l.qZA()}}function ex(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",9),l.NdJ("click",function(r){l.CHM(e),l.oxw();const s=l.MAs(1),c=l.oxw();return l.KtG(c.onButtonClick(r,s))}),l.qZA()}if(2&n){const e=l.oxw(2);l.Q6J("icon",e.icon)("disabled",e.disabled),l.uIk("aria-label",e.iconAriaLabel)}}function tx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"input",4,5),l.NdJ("focus",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputFocus(r))})("keydown",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputKeydown(r))})("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onInputClick())})("blur",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputBlur(r))})("input",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onUserInput(r))}),l.qZA(),l.YNc(2,wv,1,0,"i",6),l.YNc(3,ex,1,3,"button",7)}if(2&n){const e=l.oxw();l.Tol(e.inputStyleClass),l.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),l.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),l.xp6(2),l.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),l.xp6(1),l.Q6J("ngIf",e.showIcon)}}function Cv(n,t){1&n&&l.GkF(0)}function nx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",30),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onPrevButtonClick(r))}),l._UZ(1,"span",31),l.qZA()}}function Ab(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",32),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.switchToMonthView(r))})("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))}),l._uU(1),l.qZA()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.Q6J("disabled",i.switchViewButtonDisabled()),l.xp6(1),l.hij(" ",i.getMonthName(e.month)," ")}}function Od(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",33),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.switchToYearView(r))})("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))}),l._uU(1),l.qZA()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.Q6J("disabled",i.switchViewButtonDisabled()),l.xp6(1),l.hij(" ",i.getYear(e)," ")}}function xb(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(5);l.xp6(1),l.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function ix(n,t){1&n&&l.GkF(0)}const rx=function(n){return{$implicit:n}};function Mb(n,t){if(1&n&&(l.TgZ(0,"span",34),l.YNc(1,xb,2,2,"ng-container",13),l.YNc(2,ix,1,0,"ng-container",35),l.qZA()),2&n){const e=l.oxw(4);l.xp6(1),l.Q6J("ngIf",!e.decadeTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",l.VKq(3,rx,e.yearPickerValues))}}function Iv(n,t){if(1&n&&(l.TgZ(0,"th",41)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=l.oxw(5);l.xp6(2),l.Oqu(e.getTranslation("weekHeader"))}}function sx(n,t){if(1&n&&(l.TgZ(0,"th",42)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=t.$implicit;l.xp6(2),l.Oqu(e)}}function bv(n,t){if(1&n&&(l.TgZ(0,"td",45)(1,"span",46),l._uU(2),l.qZA()()),2&n){const e=l.oxw().index,i=l.oxw(2).$implicit;l.xp6(2),l.hij(" ",i.weekNumbers[e]," ")}}function ox(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.day)}}function kb(n,t){1&n&&l.GkF(0)}const Kg=function(n,t){return{"p-highlight":n,"p-disabled":t}};function Ob(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"span",48),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw().$implicit,c=l.oxw(6);return l.KtG(c.onDateSelect(r,s))})("keydown",function(r){l.CHM(e);const s=l.oxw().$implicit,c=l.oxw(3).index,h=l.oxw(3);return l.KtG(h.onDateCellKeydown(r,s,c))}),l.YNc(2,ox,2,1,"ng-container",13),l.YNc(3,kb,1,0,"ng-container",35),l.qZA(),l.BQk()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(6);l.xp6(1),l.Q6J("ngClass",l.WLB(4,Kg,i.isSelected(e),!e.selectable)),l.xp6(1),l.Q6J("ngIf",!i.dateTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",l.VKq(7,rx,e))}}const Rb=function(n,t){return{"p-datepicker-other-month":n,"p-datepicker-today":t}};function Nb(n,t){if(1&n&&(l.TgZ(0,"td",47),l.YNc(1,Ob,4,9,"ng-container",13),l.qZA()),2&n){const e=t.$implicit,i=l.oxw(6);l.Q6J("ngClass",l.WLB(2,Rb,e.otherMonth,e.today)),l.xp6(1),l.Q6J("ngIf",!e.otherMonth||i.showOtherMonths)}}function Pb(n,t){if(1&n&&(l.TgZ(0,"tr"),l.YNc(1,bv,3,1,"td",43),l.YNc(2,Nb,2,5,"td",44),l.qZA()),2&n){const e=t.$implicit,i=l.oxw(5);l.xp6(1),l.Q6J("ngIf",i.showWeek),l.xp6(1),l.Q6J("ngForOf",e)}}function ax(n,t){if(1&n&&(l.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),l.YNc(4,Iv,3,1,"th",38),l.YNc(5,sx,3,1,"th",39),l.qZA()(),l.TgZ(6,"tbody"),l.YNc(7,Pb,3,2,"tr",40),l.qZA()()()),2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.xp6(4),l.Q6J("ngIf",i.showWeek),l.xp6(1),l.Q6J("ngForOf",i.weekDays),l.xp6(2),l.Q6J("ngForOf",e.dates)}}function lx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",20)(1,"div",21),l.YNc(2,nx,2,0,"button",22),l.TgZ(3,"div",23),l.YNc(4,Ab,2,2,"button",24),l.YNc(5,Od,2,2,"button",25),l.YNc(6,Mb,3,5,"span",26),l.qZA(),l.TgZ(7,"button",27),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onNextButtonClick(r))}),l._UZ(8,"span",28),l.qZA()(),l.YNc(9,ax,8,3,"div",29),l.qZA()}if(2&n){const e=t.index,i=l.oxw(3);l.xp6(2),l.Q6J("ngIf",0===e),l.xp6(2),l.Q6J("ngIf","date"===i.currentView),l.xp6(1),l.Q6J("ngIf","year"!==i.currentView),l.xp6(1),l.Q6J("ngIf","year"===i.currentView),l.xp6(1),l.Udp("display",1===i.numberOfMonths||e===i.numberOfMonths-1?"inline-flex":"none"),l.xp6(2),l.Q6J("ngIf","date"===i.currentView)}}function ux(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span",51),l.NdJ("click",function(r){const c=l.CHM(e).index,h=l.oxw(4);return l.KtG(h.onMonthSelect(r,c))})("keydown",function(r){const c=l.CHM(e).index,h=l.oxw(4);return l.KtG(h.onMonthCellKeydown(r,c))}),l._uU(1),l.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw(4);l.Q6J("ngClass",l.WLB(2,Kg,r.isMonthSelected(i),r.isMonthDisabled(i))),l.xp6(1),l.hij(" ",e," ")}}function cx(n,t){if(1&n&&(l.TgZ(0,"div",49),l.YNc(1,ux,2,5,"span",50),l.qZA()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.monthPickerValues())}}const Fb=function(n){return{"p-highlight":n}};function sP(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span",54),l.NdJ("click",function(r){const c=l.CHM(e).$implicit,h=l.oxw(4);return l.KtG(h.onYearSelect(r,c))})("keydown",function(r){const c=l.CHM(e).$implicit,h=l.oxw(4);return l.KtG(h.onYearCellKeydown(r,c))}),l._uU(1),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(4);l.Q6J("ngClass",l.VKq(2,Fb,i.isYearSelected(e))),l.xp6(1),l.hij(" ",e," ")}}function Lb(n,t){if(1&n&&(l.TgZ(0,"div",52),l.YNc(1,sP,2,4,"span",53),l.qZA()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.yearPickerValues())}}function dx(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"div",16),l.YNc(2,lx,10,7,"div",17),l.qZA(),l.YNc(3,cx,2,1,"div",18),l.YNc(4,Lb,2,1,"div",19),l.BQk()),2&n){const e=l.oxw(2);l.xp6(2),l.Q6J("ngForOf",e.months),l.xp6(1),l.Q6J("ngIf","month"===e.currentView),l.xp6(1),l.Q6J("ngIf","year"===e.currentView)}}function hx(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function oP(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function aP(n,t){if(1&n&&(l.TgZ(0,"div",60)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=l.oxw(3);l.xp6(2),l.Oqu(e.timeSeparator)}}function fx(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function px(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",65)(1,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.incrementSecond(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.incrementSecond(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(2,"span",58),l.qZA(),l.TgZ(3,"span"),l.YNc(4,fx,2,0,"ng-container",13),l._uU(5),l.qZA(),l.TgZ(6,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.decrementSecond(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.decrementSecond(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(7,"span",59),l.qZA()()}if(2&n){const e=l.oxw(3);l.xp6(4),l.Q6J("ngIf",e.currentSecond<10),l.xp6(1),l.Oqu(e.currentSecond)}}function Vb(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",66)(1,"button",67),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))}),l._UZ(2,"span",58),l.qZA(),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.TgZ(5,"button",67),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))}),l._UZ(6,"span",59),l.qZA()()}if(2&n){const e=l.oxw(3);l.xp6(4),l.Oqu(e.pm?"PM":"AM")}}function Ub(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",55)(1,"div",56)(2,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementHour(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementHour(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(3,"span",58),l.qZA(),l.TgZ(4,"span"),l.YNc(5,hx,2,0,"ng-container",13),l._uU(6),l.qZA(),l.TgZ(7,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementHour(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementHour(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(8,"span",59),l.qZA()(),l.TgZ(9,"div",60)(10,"span"),l._uU(11),l.qZA()(),l.TgZ(12,"div",61)(13,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementMinute(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementMinute(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(14,"span",58),l.qZA(),l.TgZ(15,"span"),l.YNc(16,oP,2,0,"ng-container",13),l._uU(17),l.qZA(),l.TgZ(18,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementMinute(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementMinute(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(19,"span",59),l.qZA()(),l.YNc(20,aP,3,1,"div",62),l.YNc(21,px,8,2,"div",63),l.YNc(22,Vb,7,1,"div",64),l.qZA()}if(2&n){const e=l.oxw(2);l.xp6(5),l.Q6J("ngIf",e.currentHour<10),l.xp6(1),l.Oqu(e.currentHour),l.xp6(5),l.Oqu(e.timeSeparator),l.xp6(5),l.Q6J("ngIf",e.currentMinute<10),l.xp6(1),l.Oqu(e.currentMinute),l.xp6(3),l.Q6J("ngIf",e.showSeconds),l.xp6(1),l.Q6J("ngIf",e.showSeconds),l.xp6(1),l.Q6J("ngIf","12"==e.hourFormat)}}const Ev=function(n){return[n]};function Bb(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",68)(1,"button",69),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTodayButtonClick(r))}),l.qZA(),l.TgZ(2,"button",69),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onClearButtonClick(r))}),l.qZA()()}if(2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("label",e.getTranslation("today"))("ngClass",l.VKq(4,Ev,e.todayButtonStyleClass)),l.xp6(1),l.Q6J("label",e.getTranslation("clear"))("ngClass",l.VKq(6,Ev,e.clearButtonStyleClass))}}function Hb(n,t){1&n&&l.GkF(0)}const jb=function(n,t,e,i,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},Tv=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},gx=function(n){return{value:"visibleTouchUI",params:n}},mx=function(n){return{value:"visible",params:n}};function Gb(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",10,11),l.NdJ("@overlayAnimation.start",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayAnimationDone(r))})("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayClick(r))}),l.Hsn(2),l.YNc(3,Cv,1,0,"ng-container",12),l.YNc(4,dx,5,3,"ng-container",13),l.YNc(5,Ub,23,8,"div",14),l.YNc(6,Bb,3,8,"div",15),l.Hsn(7,1),l.YNc(8,Hb,1,0,"ng-container",12),l.qZA()}if(2&n){const e=l.oxw();l.Tol(e.panelStyleClass),l.Q6J("ngStyle",e.panelStyle)("ngClass",l.HTZ(11,jb,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?l.VKq(21,gx,l.WLB(18,Tv,e.showTransitionOptions,e.hideTransitionOptions)):l.VKq(26,mx,l.WLB(23,Tv,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),l.xp6(3),l.Q6J("ngTemplateOutlet",e.headerTemplate),l.xp6(1),l.Q6J("ngIf",!e.timeOnly),l.xp6(1),l.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),l.xp6(1),l.Q6J("ngIf",e.showButtonBar),l.xp6(2),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const bf=[[["p-header"]],[["p-footer"]]],$b=function(n,t,e,i){return{"p-calendar":!0,"p-calendar-w-btn":n,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":i}},Wb=["p-header","p-footer"],zb={provide:Or,useExisting:(0,l.Gpc)(()=>Dv),multi:!0};let Dv=(()=>{class n{constructor(e,i,r,s,c,h){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.config=c,this.overlayService=h,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onClose=new l.vpe,this.onSelect=new l.vpe,this.onClear=new l.vpe,this.onInput=new l.vpe,this.onTodayClick=new l.vpe,this.onClearClick=new l.vpe,this.onMonthChange=new l.vpe,this.onYearChange=new l.vpe,this.onClickOutside=new l.vpe,this.onShow=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(g,y){return"12"==this.hourFormat?12===g?y?12:0:y?g+12:g:g}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const i=e||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const i=e.split(":"),r=parseInt(i[0]),s=parseInt(i[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=cI();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=be.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,i){this.yearOptions=[];for(let r=e;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),i=this.getTranslation(Nn.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let i=0;i<=11;i++)e.push(this.config.getTranslation("monthNamesShort")[i]);return e}yearPickerValues(){let e=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(i+r);return e}createMonths(e,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,c=i;s>11&&(s=s%11-1,c=i+1),this.months.push(this.createMonth(s,c))}}getWeekNumber(e){let i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(e,i){let r=[],s=this.getFirstDayOfMonthIndex(e,i),c=this.getDaysCountInMonth(e,i),h=this.getDaysCountInPrevMonth(e,i),g=1,y=new Date,b=[],D=Math.ceil((c+s)/7);for(let x=0;x<D;x++){let F=[];if(0==x){for(let ne=h-s+1;ne<=h;ne++){let te=this.getPreviousMonthAndYear(e,i);F.push({day:ne,month:te.month,year:te.year,otherMonth:!0,today:this.isToday(y,ne,te.month,te.year),selectable:this.isSelectable(ne,te.month,te.year,!0)})}let G=7-F.length;for(let ne=0;ne<G;ne++)F.push({day:g,month:e,year:i,today:this.isToday(y,g,e,i),selectable:this.isSelectable(g,e,i,!1)}),g++}else for(let G=0;G<7;G++){if(g>c){let ne=this.getNextMonthAndYear(e,i);F.push({day:g-c,month:ne.month,year:ne.year,otherMonth:!0,today:this.isToday(y,g-c,ne.month,ne.year),selectable:this.isSelectable(g-c,ne.month,ne.year,!0)})}else F.push({day:g,month:e,year:i,today:this.isToday(y,g,e,i),selectable:this.isSelectable(g,e,i,!1)});g++}this.showWeek&&b.push(this.getWeekNumber(new Date(F[0].year,F[0].month,F[0].day))),r.push(F)}return{month:e,year:i,dates:r,weekNumbers:b}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,i){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,i){"year"===this.view?this.onDateSelect(e,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)e+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let i=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?i=this.formatTime(e):(i=this.formatDate(e,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(e)))),i}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let i=new Date(e.year,e.month,e.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&i.getTime()>=r.getTime()?s=i:(r=i,s=null),this.updateModel([r,s])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;this.value&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(e,i){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(i);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,i){return 32-this.daylightSavingAdjust(new Date(i,e,32)).getDate()}getDaysCountInPrevMonth(e,i){let r=this.getPreviousMonthAndYear(e,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,i){let r,s;return 0===e?(r=11,s=i-1):(r=e-1,s=i),{month:r,year:s}}getNextMonthAndYear(e,i){let r,s;return 11===e?(r=0,s=i+1):(r=e+1,s=i),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,e),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){const[i,r]=this.isRangeSelection()?this.value:[this.value,this.value],s=new Date(this.currentYear,e,1);return s>=i&&s<=(r??i)}return!1}isMonthDisabled(e){return!this.isSelectable(1,e,this.currentYear,!1)}isYearSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===e}return!1}isDateEquals(e,i){return!!(e&&e instanceof Date)&&e.getDate()===i.day&&e.getMonth()===i.month&&e.getFullYear()===i.year}isDateBetween(e,i,r){if(e&&i){let c=new Date(r.year,r.month,r.day);return e.getTime()<=c.getTime()&&i.getTime()>=c.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,i,r,s){return e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,i,r,s){let c=!0,h=!0,g=!0,y=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>e))&&(c=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<e))&&(h=!1),this.disabledDates&&(g=!this.isDateDisabled(e,i,r)),this.disabledDays&&(y=!this.isDayDisabled(e,i,r)),c&&h&&g&&y)}isDateDisabled(e,i,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===i&&s.getDate()===e)return!0;return!1}isDayDisabled(e,i,r){if(this.disabledDays){let c=new Date(r,i,e).getDay();return-1!==this.disabledDays.indexOf(c)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(be.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,i,r){const s=e.currentTarget,c=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let h=be.index(c),g=c.parentElement.nextElementSibling;g?be.hasClass(g.children[h].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(g.children[h].children[0].tabIndex="0",g.children[h].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let h=be.index(c),g=c.parentElement.previousElementSibling;if(g){let y=g.children[h].children[0];be.hasClass(y,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(y.tabIndex="0",y.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let h=c.previousElementSibling;if(h){let g=h.children[0];be.hasClass(g,"p-disabled")||be.hasClass(g.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(g.tabIndex="0",g.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let h=c.nextElementSibling;if(h){let g=h.children[0];be.hasClass(g,"p-disabled")?this.navigateToMonth(!1,r):(g.tabIndex="0",g.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,c=be.index(r);let h=s[40===e.which?c+3:c-3];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,i),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,c=be.index(r);let h=s[40===e.which?c+2:c-2];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,i){if(e)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let s=be.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),c=s[s.length-1];c.tabIndex="0",c.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=be.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?be.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():be.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=be.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(e=i[i.length-1])}else e=be.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const e=this.contentViewChild?.nativeElement;let i;if("month"===this.currentView){let r=be.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),s=be.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");r.forEach(c=>c.tabIndex=-1),i=s||r[0],0===r.length&&be.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(h=>h.tabIndex=-1)}else if("year"===this.currentView){let r=be.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),s=be.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");r.forEach(c=>c.tabIndex=-1),i=s||r[0],0===r.length&&be.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(h=>h.tabIndex=-1)}else if(i=be.findSingle(e,"span.p-highlight"),!i){let r=be.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i=r||be.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}i&&(i.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{i.focus()},1),this.preventFocus=!1)}trapFocus(e){let i=be.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,i,r,s){let c=this.value;const h=this.convertTo24Hour(e,s);this.isRangeSelection()&&(c=this.value[1]||this.value[0]),this.isMultipleSelection()&&(c=this.value[this.value.length-1]);const g=c?c.toDateString():null;return!(this.minDate&&g&&this.minDate.toDateString()===g&&(this.minDate.getHours()>h||this.minDate.getHours()===h&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&g&&this.maxDate.toDateString()===g&&(this.maxDate.getHours()<h||this.maxDate.getHours()===h&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,i,r){this.disabled||(this.repeat(e,null,i,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,i,r,s){let c=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},c),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),e.preventDefault()}incrementMinute(e){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}decrementMinute(e){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}incrementSecond(e){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}decrementSecond(e){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let i=e.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(e)}isValidSelection(e){let i=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(i=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=e.length>1&&e[1]>e[0]),i}parseValueFromString(e){if(!e||0===e.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);i=[];for(let s of r)i.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");i=[];for(let s=0;s<r.length;s++)i[s]=this.parseDateTime(r[s].trim())}return i}parseDateTime(e){let i,r=e.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let c="12"==this.hourFormat?r.pop():null,h=r.pop();i=this.parseDate(r.join(" "),s),this.populateTime(i,h,c)}else i=this.parseDate(e,s)}return i}populateTime(e,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(i);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&bn.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?$s.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):$s.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&$s.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):be.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=be.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=be.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=be.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",be.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):be.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),be.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),be.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(be.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let i,e=document.body.children;for(let r=0;r<e.length;r++)if(be.hasClass(e[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||be.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Nn.FIRST_DAY_OF_WEEK)}formatDate(e,i){if(!e)return"";let r;const s=b=>{const D=r+1<i.length&&i.charAt(r+1)===b;return D&&r++,D},c=(b,D,x)=>{let F=""+D;if(s(b))for(;F.length<x;)F="0"+F;return F},h=(b,D,x,F)=>s(b)?F[D]:x[D];let g="",y=!1;if(e)for(r=0;r<i.length;r++)if(y)"'"!==i.charAt(r)||s("'")?g+=i.charAt(r):y=!1;else switch(i.charAt(r)){case"d":g+=c("d",e.getDate(),2);break;case"D":g+=h("D",e.getDay(),this.getTranslation(Nn.DAY_NAMES_SHORT),this.getTranslation(Nn.DAY_NAMES));break;case"o":g+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":g+=c("m",e.getMonth()+1,2);break;case"M":g+=h("M",e.getMonth(),this.getTranslation(Nn.MONTH_NAMES_SHORT),this.getTranslation(Nn.MONTH_NAMES));break;case"y":g+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":g+=e.getTime();break;case"!":g+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?g+="'":y=!0;break;default:g+=i.charAt(r)}return g}formatTime(e){if(!e)return"";let i="",r=e.getHours(),s=e.getMinutes(),c=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=s<10?"0"+s:s,this.showSeconds&&(i+=":",i+=c<10?"0"+c:c),"12"==this.hourFormat&&(i+=e.getHours()>11?" PM":" AM"),i}parseTime(e){let i=e.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(i[0]),c=parseInt(i[1]),h=this.showSeconds?parseInt(i[2]):null;if(isNaN(s)||isNaN(c)||s>23||c>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(h)||h>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:c,second:h}}parseDate(e,i){if(null==i||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,c,G,h=0,g="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),y=-1,b=-1,D=-1,x=-1,F=!1,ne=qe=>{let Je=r+1<i.length&&i.charAt(r+1)===qe;return Je&&r++,Je},te=qe=>{let Je=ne(qe),gt="@"===qe?14:"!"===qe?20:"y"===qe&&Je?4:"o"===qe?3:2,jn=new RegExp("^\\d{"+("y"===qe?gt:1)+","+gt+"}"),Ui=e.substring(h).match(jn);if(!Ui)throw"Missing number at position "+h;return h+=Ui[0].length,parseInt(Ui[0],10)},ze=(qe,Je,gt)=>{let xt=-1,jn=ne(qe)?gt:Je,Ui=[];for(let As=0;As<jn.length;As++)Ui.push([As,jn[As]]);Ui.sort((As,N0)=>-(As[1].length-N0[1].length));for(let As=0;As<Ui.length;As++){let N0=Ui[As][1];if(e.substr(h,N0.length).toLowerCase()===N0.toLowerCase()){xt=Ui[As][0],h+=N0.length;break}}if(-1!==xt)return xt+1;throw"Unknown name at position "+h},Ke=()=>{if(e.charAt(h)!==i.charAt(r))throw"Unexpected literal at position "+h;h++};for("month"===this.view&&(D=1),r=0;r<i.length;r++)if(F)"'"!==i.charAt(r)||ne("'")?Ke():F=!1;else switch(i.charAt(r)){case"d":D=te("d");break;case"D":ze("D",this.getTranslation(Nn.DAY_NAMES_SHORT),this.getTranslation(Nn.DAY_NAMES));break;case"o":x=te("o");break;case"m":b=te("m");break;case"M":b=ze("M",this.getTranslation(Nn.MONTH_NAMES_SHORT),this.getTranslation(Nn.MONTH_NAMES));break;case"y":y=te("y");break;case"@":G=new Date(te("@")),y=G.getFullYear(),b=G.getMonth()+1,D=G.getDate();break;case"!":G=new Date((te("!")-this.ticksTo1970)/1e4),y=G.getFullYear(),b=G.getMonth()+1,D=G.getDate();break;case"'":ne("'")?Ke():F=!0;break;default:Ke()}if(h<e.length&&(c=e.substr(h),!/^\s+/.test(c)))throw"Extra/unparsed characters found in date: "+c;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=g?0:-100)),x>-1)for(b=1,D=x;s=this.getDaysCountInMonth(y,b-1),!(D<=s);)b++,D-=s;if("year"===this.view&&(b=-1===b?1:b,D=-1===D?1:D),G=this.daylightSavingAdjust(new Date(y,b-1,D)),G.getFullYear()!==y||G.getMonth()+1!==b||G.getDate()!==D)throw"Invalid date";return G}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:s,numMonths:c}=i[r],h=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${c}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let g=c;g<this.numberOfMonths;g++)h+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${g+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${h}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Xr(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return be.hasClass(e.target,"p-datepicker-prev")||be.hasClass(e.target,"p-datepicker-prev-icon")||be.hasClass(e.target,"p-datepicker-next")||be.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!be.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&$s.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(cd),l.Y36(ud))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Ni,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(yv,5),l.Gf(vv,5),l.Gf(Sb,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.containerViewChild=r.first),l.iGM(r=l.CRH())&&(i.inputfieldViewChild=r.first),l.iGM(r=l.CRH())&&(i.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[l._Bn([zb])],ngContentSelectors:Wb,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,i){1&e&&(l.F$t(bf),l.TgZ(0,"span",0,1),l.YNc(2,tx,4,17,"ng-template",2),l.YNc(3,Gb,9,28,"div",3),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",l.l5B(6,$b,i.showIcon,i.timeOnly,i.disabled,i.focus))("ngStyle",i.style),l.xp6(2),l.Q6J("ngIf",!i.inline),l.xp6(1),l.Q6J("ngIf",i.inline||i.overlayVisible))},dependencies:[Kt,dr,dn,Gi,er,Mg,hd],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[js("overlayAnimation",[Sy("visibleTouchUI",Gs({transform:"translate(-50%,-50%)",opacity:1})),Ta("void => visible",[Gs({opacity:0,transform:"scaleY(0.8)"}),vs("{{showTransitionParams}}",Gs({opacity:1,transform:"*"}))]),Ta("visible => void",[vs("{{hideTransitionParams}}",Gs({opacity:0}))]),Ta("void => visibleTouchUI",[Gs({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),vs("{{showTransitionParams}}")]),Ta("visibleTouchUI => void",[vs("{{hideTransitionParams}}",Gs({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),n})(),qb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,Cd,Ws,hl,Cd,Ws]}),n})(),_x=(()=>{class n{constructor(e,i,r){this.el=e,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(vf,8),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i.onInput(s)}),2&e&&l.ekj("p-filled",i.filled)}}),n})(),yx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi]}),n})(),vx=(()=>{class n{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=be.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),n})(),Zb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi]}),n})();const wx=["input"];function Cx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",3),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.clear())}),l.qZA()}}const Ix={provide:Or,useExisting:(0,l.Gpc)(()=>Kb),multi:!0};let Kb=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.type="text",this.slotChar="_",this.autoClear=!0,this.showClear=!1,this.characterPattern="[A-Za-z]",this.onComplete=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onInput=new l.vpe,this.onKeydown=new l.vpe,this.onClear=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){let e=be.getUserAgent();this.androidChrome=/chrome/i.test(e)&&/android/i.test(e),this.initMask()}get mask(){return this._mask}set mask(e){this._mask=e,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let e=this.mask.split("");for(let i=0;i<e.length;i++){let r=e[i];"?"==r?(this.len--,this.partialPosition=i):this.defs[r]?(this.tests.push(new RegExp(this.defs[r])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<e.length;i++){let r=e[i];"?"!=r&&this.buffer.push(this.defs[r]?this.getPlaceholder(i):r)}this.defaultBuffer=this.buffer.join("")}writeValue(e){this.value=e,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.value=null==this.value||null==this.value?"":this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value,this.updateFilledState())}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}caret(e,i){let r,s,c;if(this.inputViewChild.nativeElement.offsetParent&&this.inputViewChild.nativeElement===this.inputViewChild.nativeElement.ownerDocument.activeElement){if("number"!=typeof e)return this.inputViewChild.nativeElement.setSelectionRange?(s=this.inputViewChild.nativeElement.selectionStart,c=this.inputViewChild.nativeElement.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),s=0-r.duplicate().moveStart("character",-1e5),c=s+r.text.length),{begin:s,end:c};s=e,c="number"==typeof i?i:s,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(s,c):this.inputViewChild.nativeElement.createTextRange&&(r=this.inputViewChild.nativeElement.createTextRange(),r.collapse(!0),r.moveEnd("character",c),r.moveStart("character",s),r.select())}}isCompleted(){for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(e){return this.slotChar.charAt(e<this.slotChar.length?e:0)}seekNext(e){for(;++e<this.len&&!this.tests[e];);return e}seekPrev(e){for(;--e>=0&&!this.tests[e];);return e}shiftL(e,i){let r,s;if(!(e<0)){for(r=e,s=this.seekNext(i);r<this.len;r++)if(this.tests[r]){if(!(s<this.len&&this.tests[r].test(this.buffer[s])))break;this.buffer[r]=this.buffer[s],this.buffer[s]=this.getPlaceholder(s),s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}}shiftR(e){let i,r,s,c;for(i=e,r=this.getPlaceholder(e);i<this.len;i++)if(this.tests[i]){if(s=this.seekNext(i),c=this.buffer[i],this.buffer[i]=r,!(s<this.len&&this.tests[s].test(c)))break;r=c}}handleAndroidInput(e){var i=this.inputViewChild.nativeElement.value,r=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);r.begin>0&&!this.tests[r.begin-1];)r.begin--;if(0===r.begin)for(;r.begin<this.firstNonMaskPos&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);r.begin<this.len&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(e){if(this.focused=!1,this.onModelTouched(),this.checkVal(),this.updateFilledState(),this.onBlur.emit(e),this.inputViewChild.nativeElement.value!=this.focusText||this.inputViewChild.nativeElement.value!=this.value){this.updateModel(e);let i=document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild.nativeElement.dispatchEvent(i)}}onInputKeydown(e){if(this.readonly)return;let r,s,c,i=e.which||e.keyCode,h=/iphone/i.test(be.getUserAgent());this.oldVal=this.inputViewChild.nativeElement.value,this.onKeydown.emit(e),8===i||46===i||h&&127===i?(r=this.caret(),s=r.begin,c=r.end,c-s==0&&(s=46!==i?this.seekPrev(s):c=this.seekNext(s-1),c=46===i?this.seekNext(c):c),this.clearBuffer(s,c),this.shiftL(s,c-1),this.updateModel(e),this.onInput.emit(e),e.preventDefault()):13===i?(this.onInputBlur(e),this.updateModel(e)):27===i&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(e),e.preventDefault())}onKeyPress(e){if(!this.readonly){var s,c,h,g,i=e.which||e.keyCode,r=this.caret();e.ctrlKey||e.altKey||e.metaKey||i<32||i>34&&i<41||(i&&13!==i&&(r.end-r.begin!=0&&(this.clearBuffer(r.begin,r.end),this.shiftL(r.begin,r.end-1)),(s=this.seekNext(r.begin-1))<this.len&&(c=String.fromCharCode(i),this.tests[s].test(c)&&(this.shiftR(s),this.buffer[s]=c,this.writeBuffer(),h=this.seekNext(s),/android/i.test(be.getUserAgent())?setTimeout(()=>{this.caret(h)},0):this.caret(h),r.begin<=this.lastRequiredNonMaskPos&&(g=this.isCompleted()),this.onInput.emit(e))),e.preventDefault()),this.updateModel(e),this.updateFilledState(),g&&this.onComplete.emit())}}clearBuffer(e,i){let r;for(r=e;r<i&&r<this.len;r++)this.tests[r]&&(this.buffer[r]=this.getPlaceholder(r))}writeBuffer(){this.inputViewChild.nativeElement.value=this.buffer.join("")}checkVal(e){let s,c,h,i=this.inputViewChild.nativeElement.value,r=-1;for(s=0,h=0;s<this.len;s++)if(this.tests[s]){for(this.buffer[s]=this.getPlaceholder(s);h++<i.length;)if(c=i.charAt(h-1),this.tests[s].test(c)){this.buffer[s]=c,r=s;break}if(h>i.length){this.clearBuffer(s+1,this.len);break}}else this.buffer[s]===i.charAt(h)&&h++,s<this.partialPosition&&(r=s);return e?this.writeBuffer():r+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild.nativeElement.value.substring(0,r+1)),this.partialPosition?s:this.firstNonMaskPos}onInputFocus(e){if(this.readonly)return;let i;this.focused=!0,clearTimeout(this.caretTimeoutId),this.focusText=this.inputViewChild.nativeElement.value,i=this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild.nativeElement===this.inputViewChild.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(e)}onInputChange(e){this.androidChrome?this.handleAndroidInput(e):this.handleInputChange(e),this.onInput.emit(e)}handleInputChange(e){this.readonly||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let e=[];for(let i=0;i<this.buffer.length;i++){let r=this.buffer[i];this.tests[i]&&r!=this.getPlaceholder(i)&&e.push(r)}return e.join("")}updateModel(e){const i=this.unmask?this.getUnmaskedValue():e.target.value;(null!==i||void 0!==i)&&(this.value=i,this.onModelChange(this.value))}updateFilledState(){this.filled=this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}focus(){this.inputViewChild.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-inputMask"]],viewQuery:function(e,i){if(1&e&&l.Gf(wx,7),2&e){let r;l.iGM(r=l.CRH())&&(i.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:6,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputmask-clearable",i.showClear&&!i.disabled)},inputs:{type:"type",slotChar:"slotChar",autoClear:"autoClear",showClear:"showClear",style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",disabled:"disabled",readonly:"readonly",unmask:"unmask",name:"name",required:"required",characterPattern:"characterPattern",autoFocus:"autoFocus",autocomplete:"autocomplete",mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},features:[l._Bn([Ix])],decls:3,vars:18,consts:[["pInputText","","pAutoFocus","",1,"p-inputmask",3,"ngStyle","ngClass","disabled","readonly","autofocus","focus","blur","keydown","keypress","input","paste"],["input",""],["class","p-inputmask-clear-icon pi pi-times",3,"click",4,"ngIf"],[1,"p-inputmask-clear-icon","pi","pi-times",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"input",0,1),l.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onInputKeydown(s)})("keypress",function(s){return i.onKeyPress(s)})("input",function(s){return i.onInputChange(s)})("paste",function(s){return i.handleInputChange(s)}),l.qZA(),l.YNc(2,Cx,1,0,"i",2)),2&e&&(l.Q6J("ngStyle",i.style)("ngClass",i.styleClass)("disabled",i.disabled)("readonly",i.readonly)("autofocus",i.autoFocus),l.uIk("id",i.inputId)("type",i.type)("name",i.name)("placeholder",i.placeholder)("title",i.title)("size",i.size)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-label",i.ariaLabel)("aria-required",i.ariaRequired)("required",i.required),l.xp6(2),l.Q6J("ngIf",null!=i.value&&i.filled&&i.showClear&&!i.disabled))},dependencies:[Kt,dn,er,_x,vx],styles:[".p-inputmask-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputmask-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),Ef=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,yx,Zb]}),n})();const bx=["overlay"],Sv=["content"];function Da(n,t){1&n&&l.GkF(0)}const Ex=function(n,t,e){return{showTransitionParams:n,hideTransitionParams:t,transform:e}},Av=function(n){return{value:"visible",params:n}},Tf=function(n){return{mode:n}},Tx=function(n){return{$implicit:n}};function Dx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1,3),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentAnimationDone(r))}),l.Hsn(2),l.YNc(3,Da,1,0,"ng-container",4),l.qZA()}if(2&n){const e=l.oxw(2);l.Tol(e.contentStyleClass),l.Q6J("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",l.VKq(11,Av,l.kEZ(7,Ex,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),l.xp6(3),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.VKq(15,Tx,l.VKq(13,Tf,e.overlayMode)))}}const Sx=function(n,t,e,i,r,s,c,h,g,y,b,D,x,F){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":n,"p-overlay-center":t,"p-overlay-top":e,"p-overlay-top-start":i,"p-overlay-top-end":r,"p-overlay-bottom":s,"p-overlay-bottom-start":c,"p-overlay-bottom-end":h,"p-overlay-left":g,"p-overlay-left-start":y,"p-overlay-left-end":b,"p-overlay-right":D,"p-overlay-right-start":x,"p-overlay-right-end":F}};function Yg(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1,2),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayClick(r))}),l.YNc(2,Dx,4,17,"div",0),l.qZA()}if(2&n){const e=l.oxw();l.Tol(e.styleClass),l.Q6J("ngStyle",e.style)("ngClass",l.rFY(5,Sx,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),l.xp6(2),l.Q6J("ngIf",e.visible)}}const Qg=["*"],Ax={provide:Or,useExisting:(0,l.Gpc)(()=>xv),multi:!0},xx=lI([Gs({transform:"{{transform}}",opacity:0}),vs("{{showTransitionParams}}")]),Yb=lI([vs("{{hideTransitionParams}}",Gs({transform:"{{transform}}",opacity:0}))]);let xv=(()=>{class n{constructor(e,i,r,s,c,h){this.document=e,this.el=i,this.renderer=r,this.config=s,this.overlayService=c,this.cd=h,this.visibleChange=new l.vpe,this.onBeforeShow=new l.vpe,this.onShow=new l.vpe,this.onBeforeHide=new l.vpe,this.onHide=new l.vpe,this.onAnimationStart=new l.vpe,this.onAnimationDone=new l.vpe,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return bn.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return bn.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return bn.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return bn.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}get modal(){return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return be.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,i=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&be.focus(this.targetEl),this.modal&&be.addClass(this.document?.body,"p-overflow-hidden")}hide(e,i=!1){this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&be.focus(this.targetEl),this.modal&&be.removeClass(this.document?.body,"p-overflow-hidden")}alignOverlay(){!this.modal&&be.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&$s.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),be.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),this.modal&&be.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const i=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(i,!0),this.bindListeners();break;case"void":this.hide(i,!0),this.unbindListeners(),$s.clear(i),this.modalVisible=!1}this.handleEvents("onAnimationDone",e)}handleEvents(e,i){this[e].emit(i),this.options&&this.options[e]&&this.options[e](i),this.config?.overlayOptions&&this.config?.overlayOptions[e]&&this.config?.overlayOptions[e](i)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Xr(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen("window","resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!be.isTouchDevice()}):!be.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),$s.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ge),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(cd),l.Y36(ud),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-overlay"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Ni,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(bx,5),l.Gf(Sv,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.overlayViewChild=r.first),l.iGM(r=l.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[l._Bn([Ax])],ngContentSelectors:Qg,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,Yg,3,20,"div",0)),2&e&&l.Q6J("ngIf",i.modalVisible)},dependencies:[Kt,dn,Gi,er],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[js("overlayContentAnimation",[Ta(":enter",[uI(xx)]),Ta(":leave",[uI(Yb)])])]},changeDetection:0}),n})(),Jg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,Ws,Ws]}),n})();const Qb=["element"],Mx=["content"];function kx(n,t){1&n&&l.GkF(0)}const Jb=function(n,t){return{$implicit:n,options:t}};function Mv(n,t){if(1&n&&(l.ynx(0),l.YNc(1,kx,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.WLB(2,Jb,e.loadedItems,e.getContentOptions()))}}function kv(n,t){1&n&&l.GkF(0)}function Xb(n,t){if(1&n&&(l.ynx(0),l.YNc(1,kv,1,0,"ng-container",7),l.BQk()),2&n){const e=t.$implicit,i=t.index,r=l.oxw(3);l.xp6(1),l.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",l.WLB(2,Jb,e,r.getOptions(i)))}}const Ov=function(n){return{"p-scroller-loading":n}};function Rv(n,t){if(1&n&&(l.TgZ(0,"div",8,9),l.YNc(2,Xb,2,5,"ng-container",10),l.qZA()),2&n){const e=l.oxw(2);l.Q6J("ngClass",l.VKq(4,Ov,e.d_loading))("ngStyle",e.contentStyle),l.xp6(2),l.Q6J("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function Ox(n,t){if(1&n&&l._UZ(0,"div",11),2&n){const e=l.oxw(2);l.Q6J("ngStyle",e.spacerStyle)}}function Rx(n,t){1&n&&l.GkF(0)}const Nx=function(n){return{numCols:n}},eE=function(n){return{options:n}};function tE(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Rx,1,0,"ng-container",7),l.BQk()),2&n){const e=t.index,i=l.oxw(4);l.xp6(1),l.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",l.VKq(4,eE,i.getLoaderOptions(e,i.both&&l.VKq(2,Nx,i._numItemsInViewport.cols))))}}function Nv(n,t){if(1&n&&(l.ynx(0),l.YNc(1,tE,2,6,"ng-container",14),l.BQk()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.loaderArr)}}function nE(n,t){1&n&&l.GkF(0)}const iE=function(){return{styleClass:"p-scroller-loading-icon"}};function rE(n,t){if(1&n&&(l.ynx(0),l.YNc(1,nE,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.Q6J("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",l.VKq(3,eE,l.DdM(2,iE)))}}function sE(n,t){1&n&&l._UZ(0,"i",16)}function Px(n,t){if(1&n&&(l.YNc(0,rE,2,5,"ng-container",0),l.YNc(1,sE,1,0,"ng-template",null,15,l.W1O)),2&n){const e=l.MAs(2),i=l.oxw(3);l.Q6J("ngIf",i.loaderIconTemplate)("ngIfElse",e)}}const oE=function(n){return{"p-component-overlay":n}};function aE(n,t){if(1&n&&(l.TgZ(0,"div",12),l.YNc(1,Nv,2,1,"ng-container",0),l.YNc(2,Px,3,2,"ng-template",null,13,l.W1O),l.qZA()),2&n){const e=l.MAs(3),i=l.oxw(2);l.Q6J("ngClass",l.VKq(3,oE,!i.loaderTemplate)),l.xp6(1),l.Q6J("ngIf",i.loaderTemplate)("ngIfElse",e)}}const Fx=function(n,t,e){return{"p-scroller":!0,"p-scroller-inline":n,"p-both-scroll":t,"p-horizontal-scroll":e}};function lE(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"div",2,3),l.NdJ("scroll",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onContainerScroll(r))}),l.YNc(3,Mv,2,5,"ng-container",0),l.YNc(4,Rv,3,6,"ng-template",null,4,l.W1O),l.YNc(6,Ox,1,1,"div",5),l.YNc(7,aE,4,5,"div",6),l.qZA(),l.BQk()}if(2&n){const e=l.MAs(5),i=l.oxw();l.xp6(1),l.Tol(i._styleClass),l.Q6J("ngStyle",i._style)("ngClass",l.kEZ(10,Fx,i.inline,i.both,i.horizontal)),l.uIk("id",i._id)("tabindex",i.tabindex),l.xp6(2),l.Q6J("ngIf",i.contentTemplate)("ngIfElse",e),l.xp6(3),l.Q6J("ngIf",i._showSpacer),l.xp6(1),l.Q6J("ngIf",!i.loaderDisabled&&i._showLoader&&i.d_loading)}}function uE(n,t){1&n&&l.GkF(0)}const Nr=function(n,t){return{rows:n,columns:t}};function Rd(n,t){if(1&n&&(l.ynx(0),l.YNc(1,uE,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.WLB(5,Jb,e.items,l.WLB(2,Nr,e._items,e.loadedColumns)))}}function Lx(n,t){if(1&n&&(l.Hsn(0),l.YNc(1,Rd,2,8,"ng-container",17)),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.contentTemplate)}}const Vx=["*"];let lP=(()=>{class n{constructor(e,i){this.cd=e,this.zone=i,this.onLazyLoad=new l.vpe,this.onScroll=new l.vpe,this.onScrollIndexChange=new l.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([i,r])=>this[`_${i}`]!==r&&(this[`_${i}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(e){let i=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,i=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading,i=!0),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}this.initialized&&!i&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.viewInit()}ngAfterViewChecked(){this.initialized||this.viewInit(),this.calculateAutoSize()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){be.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=be.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=be.getHeight(this.elementViewChild.nativeElement),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||be.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,i="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),c=(y=0,b)=>y<=b?0:y,h=(y,b,D)=>y*b+D,g=(y=0,b=0)=>this.scrollTo({left:y,top:b,behavior:i});this.both?(this.first={rows:c(e[0],r[0]),cols:c(e[1],r[1])},g(h(this.first.cols,this._itemSize[1],s.left),h(this.first.rows,this._itemSize[0],s.top))):(this.first=c(e,r),this.horizontal?g(h(this.first,this._itemSize,s.left),0):g(0,h(this.first,this._itemSize,s.top)))}scrollInView(e,i,r="auto"){if(i){const{first:s,viewport:c}=this.getRenderedRange(),h=(b=0,D=0)=>this.scrollTo({left:b,top:D,behavior:r}),y="to-end"===i;if("to-start"===i){if(this.both)c.first.rows-s.rows>e[0]?h(c.first.cols*this._itemSize[1],(c.first.rows-1)*this._itemSize[0]):c.first.cols-s.cols>e[1]&&h((c.first.cols-1)*this._itemSize[1],c.first.rows*this._itemSize[0]);else if(c.first-s>e){const b=(c.first-1)*this._itemSize;this.horizontal?h(b,0):h(0,b)}}else if(y)if(this.both)c.last.rows-s.rows<=e[0]+1?h(c.first.cols*this._itemSize[1],(c.first.rows+1)*this._itemSize[0]):c.last.cols-s.cols<=e[1]+1&&h((c.first.cols+1)*this._itemSize[1],c.first.rows*this._itemSize[0]);else if(c.last-s<=e+1){const b=(c.first+1)*this._itemSize;this.horizontal?h(b,0):h(0,b)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,c)=>Math.floor(s/(c||s));let i=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:c}=this.elementViewChild.nativeElement;this.both?(i={rows:e(s,this._itemSize[0]),cols:e(c,this._itemSize[1])},r={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols}):(i=e(this.horizontal?c:s,this._itemSize),r=i+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:i,last:r}}}calculateNumItems(){const e=this.getContentPosition(),i=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(y,b)=>Math.ceil(y/(b||y)),c=y=>Math.ceil(y/2),h=this.both?{rows:s(r,this._itemSize[0]),cols:s(i,this._itemSize[1])}:s(this.horizontal?i:r,this._itemSize);return{numItemsInViewport:h,numToleratedItems:this.d_numToleratedItems||(this.both?[c(h.rows),c(h.cols)]:c(h))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:i}=this.calculateNumItems(),r=(h,g,y,b=!1)=>this.getLast(h+g+(h<y?2:3)*y,b),s=this.first,c=this.both?{rows:r(this.first.rows,e.rows,i[0]),cols:r(this.first.cols,e.cols,i[1],!0)}:r(this.first,e,i);this.last=c,this.numItemsInViewport=e,this.d_numToleratedItems=i,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:s.cols}:0:s,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:i}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(i<this.defaultHeight?i:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,i=!1){return this._items?Math.min(i?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),i=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),s=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),c=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:i,right:r,top:s,bottom:c,x:i+r,y:s+c}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,i=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(c,h)=>this.elementViewChild.nativeElement.style[c]=h;this.both||this.horizontal?(s("height",r),s("width",i)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),i=(r,s,c,h=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*c+h+"px"};this.both?(i("height",this._items,this._itemSize[0],e.y),i("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?i("width",this._columns||this._items,this._itemSize,e.x):i("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const i=e?e.first:this.first,r=(c,h)=>c*h,s=(c=0,h=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${c}px, ${h}px, 0)`};if(this.both)s(r(i.cols,this._itemSize[1]),r(i.rows,this._itemSize[0]));else{const c=r(i,this._itemSize);this.horizontal?s(c,0):s(0,c)}}}onScrollPositionChange(e){const i=e.target,r=this.getContentPosition(),s=(te,ze)=>te?te>ze?te-ze:te:0,c=(te,ze)=>Math.floor(te/(ze||te)),h=(te,ze,Ke,qe,Je,gt)=>te<=Je?Je:gt?Ke-qe-Je:ze+Je-1,g=(te,ze,Ke,qe,Je,gt,xt)=>te<=gt?0:Math.max(0,xt?te<ze?Ke:te-gt:te>ze?Ke:te-2*gt),y=(te,ze,Ke,qe,Je,gt=!1)=>{let xt=ze+qe+2*Je;return te>=Je&&(xt+=Je+1),this.getLast(xt,gt)},b=s(i.scrollTop,r.top),D=s(i.scrollLeft,r.left);let x=this.both?{rows:0,cols:0}:0,F=this.last,G=!1,ne=this.lastScrollPos;if(this.both){const te=this.lastScrollPos.top<=b,ze=this.lastScrollPos.left<=D;if(!this._appendOnly||this._appendOnly&&(te||ze)){const Ke={rows:c(b,this._itemSize[0]),cols:c(D,this._itemSize[1])},qe={rows:h(Ke.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],te),cols:h(Ke.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],ze)};x={rows:g(Ke.rows,qe.rows,this.first.rows,0,0,this.d_numToleratedItems[0],te),cols:g(Ke.cols,qe.cols,this.first.cols,0,0,this.d_numToleratedItems[1],ze)},F={rows:y(Ke.rows,x.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:y(Ke.cols,x.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},G=x.rows!==this.first.rows||F.rows!==this.last.rows||x.cols!==this.first.cols||F.cols!==this.last.cols,ne={top:b,left:D}}}else{const te=this.horizontal?D:b,ze=this.lastScrollPos<=te;if(!this._appendOnly||this._appendOnly&&ze){const Ke=c(te,this._itemSize);x=g(Ke,h(Ke,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ze),this.first,0,0,this.d_numToleratedItems,ze),F=y(Ke,x,0,this.numItemsInViewport,this.d_numToleratedItems),G=x!==this.first||F!==this.last,ne=te}}return{first:x,last:F,isRangeChanged:G,scrollPos:ne}}onScrollChange(e){const{first:i,last:r,isRangeChanged:s,scrollPos:c}=this.onScrollPositionChange(e);if(s){const h={first:i,last:r};if(this.setContentPosition(h),this.first=i,this.last=r,this.lastScrollPos=c,this.handleEvents("onScrollIndexChange",h),this._lazy&&this.isPageChanged){const g={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):i,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==g.first||this.lazyLoadState.last!==g.last)&&this.handleEvents("onLazyLoad",g),this.lazyLoadState=g}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:i}=this.onScrollPositionChange(e);(i||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}unbindResizeListener(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(be.isVisible(this.elementViewChild?.nativeElement)){const[e,i]=[be.getWidth(this.elementViewChild.nativeElement),be.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,i!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=i,this.init()})}},this._resizeDelay)}handleEvents(e,i){return this.options&&this.options[e]?this.options[e](i):this[e].emit(i)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,i)=>this.getLoaderOptions(e,i),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const i=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:i,first:0===r,last:r===i-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,i){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...i}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-scroller"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Ni,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(Qb,5),l.Gf(Mx,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.elementViewChild=r.first),l.iGM(r=l.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[l.TTD],ngContentSelectors:Vx,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,i){if(1&e&&(l.F$t(),l.YNc(0,lE,8,14,"ng-container",0),l.YNc(1,Lx,2,1,"ng-template",null,1,l.W1O)),2&e){const r=l.MAs(2);l.Q6J("ngIf",!i._disabled)("ngIfElse",r)}},dependencies:[Kt,dr,dn,Gi,er],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),n})(),Ux=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi]}),n})(),cE=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?be.appendChild(this.container,this.el.nativeElement):be.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),be.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?$s.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&$s.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+be.getWindowScrollLeft(),top:e.top+be.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+be.getOuterWidth(this.el.nativeElement),r=e.top+(be.getOuterHeight(this.el.nativeElement)-be.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-be.getOuterWidth(this.container),r=e.top+(be.getOuterHeight(this.el.nativeElement)-be.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(be.getOuterWidth(this.el.nativeElement)-be.getOuterWidth(this.container))/2,r=e.top-be.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(be.getOuterWidth(this.el.nativeElement)-be.getOuterWidth(this.container))/2,r=e.top+be.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return be.hasClass(e,"p-inputwrapper")?be.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,s=be.getOuterWidth(this.container),c=be.getOuterHeight(this.container),h=be.getViewport();return r+s>h.width||r<0||i<0||i+c>h.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Xr(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):be.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&$s.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(cd))},n.\u0275dir=l.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[l.TTD]}),n})(),dE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi]}),n})();function Df(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.label||"empty")}}function Bx(n,t){1&n&&l.GkF(0)}const $u=function(n){return{height:n}},Hx=function(n,t){return{"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t}},Xg=function(n){return{$implicit:n}},jx=["container"],Gx=["filter"],$x=["in"],Pv=["editableInput"],hE=["items"],fE=["scroller"],em=["overlay"];function Fv(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Oqu(e.label||"empty")}}function uP(n,t){1&n&&l.GkF(0)}const pE=function(n){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":n}};function Wx(n,t){if(1&n&&(l.TgZ(0,"span",14),l.YNc(1,Fv,2,1,"ng-container",15),l.YNc(2,uP,1,0,"ng-container",16),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngClass",l.VKq(9,pE,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),l.uIk("id",e.labelId),l.xp6(1),l.Q6J("ngIf",!e.selectedItemTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",l.VKq(11,Xg,e.selectedOption))}}const gE=function(n){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":n}};function Nd(n,t){if(1&n&&(l.TgZ(0,"span",17),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngClass",l.VKq(2,gE,null==e.placeholder||0===e.placeholder.length)),l.xp6(1),l.Oqu(e.placeholder||"empty")}}function zx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"input",18,19),l.NdJ("input",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onEditableInputChange(r))})("focus",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onEditableInputFocus(r))})("blur",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputBlur(r))}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("disabled",e.disabled),l.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function mE(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",20),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.clear(r))}),l.qZA()}}function Lv(n,t){1&n&&l.GkF(0)}function cP(n,t){1&n&&l.GkF(0)}const _E=function(n){return{options:n}};function dP(n,t){if(1&n&&(l.ynx(0),l.YNc(1,cP,1,0,"ng-container",16),l.BQk()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",l.VKq(2,_E,e.filterOptions))}}function qx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",30)(1,"input",31,32),l.NdJ("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onKeydown(r,!1))})("input",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onFilterInputChange(r))}),l.qZA(),l._UZ(3,"span",33),l.qZA()}if(2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("value",e.filterValue||""),l.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function Zx(n,t){if(1&n&&(l.TgZ(0,"div",27),l.NdJ("click",function(i){return i.stopPropagation()}),l.YNc(1,dP,2,4,"ng-container",28),l.YNc(2,qx,4,4,"ng-template",null,29,l.W1O),l.qZA()),2&n){const e=l.MAs(3),i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",i.filterTemplate)("ngIfElse",e)}}function Kx(n,t){1&n&&l.GkF(0)}const Vv=function(n,t){return{$implicit:n,options:t}};function yE(n,t){if(1&n&&l.YNc(0,Kx,1,0,"ng-container",16),2&n){const e=t.$implicit,i=t.options;l.oxw(2);const r=l.MAs(7);l.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",l.WLB(2,Vv,e,i))}}function Yx(n,t){1&n&&l.GkF(0)}function vE(n,t){if(1&n&&l.YNc(0,Yx,1,0,"ng-container",16),2&n){const e=t.options,i=l.oxw(4);l.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",l.VKq(2,_E,e))}}function wE(n,t){1&n&&(l.ynx(0),l.YNc(1,vE,1,4,"ng-template",36),l.BQk())}function Qx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"p-scroller",34,35),l.NdJ("onLazyLoad",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onLazyLoad.emit(r))}),l.YNc(2,yE,1,5,"ng-template",13),l.YNc(3,wE,2,0,"ng-container",15),l.qZA()}if(2&n){const e=l.oxw(2);l.Akn(l.VKq(8,$u,e.scrollHeight)),l.Q6J("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),l.xp6(3),l.Q6J("ngIf",e.loaderTemplate)}}function Jx(n,t){1&n&&l.GkF(0)}const CE=function(){return{}};function Xx(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Jx,1,0,"ng-container",16),l.BQk()),2&n){l.oxw();const e=l.MAs(7),i=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",l.WLB(3,Vv,i.optionsToDisplay,l.DdM(2,CE)))}}function IE(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,i=l.oxw(4);l.xp6(1),l.Oqu(i.getOptionGroupLabel(e)||"empty")}}function bE(n,t){1&n&&l.GkF(0)}function EE(n,t){1&n&&l.GkF(0)}const Uv=function(n,t){return{$implicit:n,selectedOption:t}};function eM(n,t){if(1&n&&(l.TgZ(0,"li",42),l.YNc(1,IE,2,1,"span",15),l.YNc(2,bE,1,0,"ng-container",16),l.qZA(),l.YNc(3,EE,1,0,"ng-container",16)),2&n){const e=t.$implicit,i=l.oxw(2).options,r=l.MAs(5),s=l.oxw(2);l.Q6J("ngStyle",l.VKq(6,$u,i.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!s.groupTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",l.VKq(8,Xg,e)),l.xp6(1),l.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",l.WLB(10,Uv,s.getOptionGroupChildren(e),s.selectedOption))}}function tM(n,t){if(1&n&&(l.ynx(0),l.YNc(1,eM,4,13,"ng-template",41),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngForOf",e)}}function hP(n,t){1&n&&l.GkF(0)}function TE(n,t){if(1&n&&(l.ynx(0),l.YNc(1,hP,1,0,"ng-container",16),l.BQk()),2&n){const e=l.oxw().$implicit,i=l.MAs(5),r=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",l.WLB(2,Uv,e,r.selectedOption))}}function fP(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"p-dropdownItem",43),l.NdJ("onClick",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onItemClick(r))}),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw().selectedOption,r=l.oxw(3);l.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function pP(n,t){1&n&&l.YNc(0,fP,1,5,"ng-template",41),2&n&&l.Q6J("ngForOf",t.$implicit)}function gP(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.hij(" ",e.emptyFilterMessageLabel," ")}}function mP(n,t){1&n&&l.GkF(0,null,45)}function _P(n,t){if(1&n&&(l.TgZ(0,"li",44),l.YNc(1,gP,2,1,"ng-container",28),l.YNc(2,mP,2,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw().options,i=l.oxw(2);l.Q6J("ngStyle",l.VKq(4,$u,e.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),l.xp6(1),l.Q6J("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function yP(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.hij(" ",e.emptyMessageLabel," ")}}function vP(n,t){1&n&&l.GkF(0,null,46)}function wP(n,t){if(1&n&&(l.TgZ(0,"li",44),l.YNc(1,yP,2,1,"ng-container",28),l.YNc(2,vP,2,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw().options,i=l.oxw(2);l.Q6J("ngStyle",l.VKq(4,$u,e.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),l.xp6(1),l.Q6J("ngTemplateOutlet",i.emptyTemplate)}}function tm(n,t){if(1&n&&(l.TgZ(0,"ul",37,38),l.YNc(2,tM,2,1,"ng-container",15),l.YNc(3,TE,2,5,"ng-container",15),l.YNc(4,pP,1,1,"ng-template",null,39,l.W1O),l.YNc(6,_P,3,6,"li",40),l.YNc(7,wP,3,6,"li",40),l.qZA()),2&n){const e=t.options,i=l.oxw(2);l.Akn(e.contentStyle),l.Q6J("ngClass",e.contentStyleClass),l.uIk("id",i.listId),l.xp6(2),l.Q6J("ngIf",i.group),l.xp6(1),l.Q6J("ngIf",!i.group),l.xp6(3),l.Q6J("ngIf",i.filterValue&&i.isEmpty()),l.xp6(1),l.Q6J("ngIf",!i.filterValue&&i.isEmpty())}}function CP(n,t){1&n&&l.GkF(0)}function DE(n,t){if(1&n&&(l.TgZ(0,"div",21),l.YNc(1,Lv,1,0,"ng-container",22),l.YNc(2,Zx,4,2,"div",23),l.TgZ(3,"div",24),l.YNc(4,Qx,4,10,"p-scroller",25),l.YNc(5,Xx,2,6,"ng-container",15),l.YNc(6,tm,8,8,"ng-template",null,26,l.W1O),l.qZA(),l.YNc(8,CP,1,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw();l.Tol(e.panelStyleClass),l.Q6J("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),l.xp6(1),l.Q6J("ngTemplateOutlet",e.headerTemplate),l.xp6(1),l.Q6J("ngIf",e.filter),l.xp6(1),l.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),l.xp6(1),l.Q6J("ngIf",e.virtualScroll),l.xp6(1),l.Q6J("ngIf",!e.virtualScroll),l.xp6(3),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const nm=function(n,t,e,i){return{"p-dropdown p-component":!0,"p-disabled":n,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":i}},SE={provide:Or,useExisting:(0,l.Gpc)(()=>nM),multi:!0};let AE=(()=>{class n{constructor(){this.onClick=new l.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(l.TgZ(0,"li",0),l.NdJ("click",function(s){return i.onOptionClick(s)}),l.YNc(1,Df,2,1,"span",1),l.YNc(2,Bx,1,0,"ng-container",2),l.qZA()),2&e&&(l.Q6J("ngStyle",l.VKq(8,$u,i.itemSize+"px"))("id",i.selected?"p-highlighted-option":"")("ngClass",l.WLB(10,Hx,i.selected,i.disabled)),l.uIk("aria-label",i.label)("aria-selected",i.selected),l.xp6(1),l.Q6J("ngIf",!i.template),l.xp6(1),l.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",l.VKq(13,Xg,i.option)))},dependencies:[Kt,dn,Gi,er,hd],encapsulation:2}),n})(),nM=(()=>{class n{constructor(e,i,r,s,c,h){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=c,this.config=h,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.overlayDirection="end",this.onChange=new l.vpe,this.onFilter=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onClick=new l.vpe,this.onShow=new l.vpe,this.onHide=new l.vpe,this.onClear=new l.vpe,this.onLazyLoad=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=cI()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&bn.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Nn.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Nn.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?bn.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?bn.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?bn.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?bn.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?bn.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const i=e.option;this.isOptionDisabled(i)||(this.selectItem(e.originalEvent,i),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(e,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(be.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")&&be.scrollInView(this.itemsWrapper,be.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(e){return be.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){if("visible"===e.toState){if(this.itemsWrapper=be.findSingle(this.overlayViewChild.el.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const i=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==i&&this.scroller.scrollToIndex(i)}else{let i=be.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");i&&i.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}"void"===e.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}findNextEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}onKeydown(e,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let c=this.optionsToDisplay[r.groupIndex-1];c&&(this.selectItem(e,this.getOptionGroupChildren(c)[this.getOptionGroupChildren(c).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:i&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:i&&!e.metaKey&&17!==e.which&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,e))),i}searchOptionInRange(e,i){for(let r=e;r<i;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let c=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(c).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(c))return c}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let c=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(c).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(c))return c}}return null}findOptionIndex(e,i){let r=-1;if(i)for(let s=0;s<i.length;s++)if(null==e&&null==this.getOptionValue(i[s])||bn.equals(e,this.getOptionValue(i[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,i){let r,s;if(i)for(let c=0;c<i.length&&(r=c,s=this.findOptionIndex(e,this.getOptionGroupChildren(i[c])),-1===s);c++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,i,r){if(this.group&&!r){let s;if(i&&i.length)for(let c of i)if(s=this.findOption(e,this.getOptionGroupChildren(c),!0),s)break;return s}{let s=this.findOptionIndex(e,i);return-1!=s?i[s]:null}}onFilterInputChange(e){let i=e.target.value;i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?be.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():be.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(Vu),l.Y36(cd))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-dropdown"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Ni,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(jx,5),l.Gf(Gx,5),l.Gf($x,5),l.Gf(Pv,5),l.Gf(hE,5),l.Gf(fE,5),l.Gf(em,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.containerViewChild=r.first),l.iGM(r=l.CRH())&&(i.filterViewChild=r.first),l.iGM(r=l.CRH())&&(i.accessibleViewChild=r.first),l.iGM(r=l.CRH())&&(i.editableInputViewChild=r.first),l.iGM(r=l.CRH())&&(i.itemsViewChild=r.first),l.iGM(r=l.CRH())&&(i.scroller=r.first),l.iGM(r=l.CRH())&&(i.overlayViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",overlayDirection:"overlayDirection",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[l._Bn([SE])],decls:14,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,i){1&e&&(l.TgZ(0,"div",0,1),l.NdJ("click",function(s){return i.onMouseclick(s)}),l.TgZ(2,"div",2)(3,"input",3,4),l.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onKeydown(s,!0)}),l.qZA()(),l.YNc(5,Wx,3,13,"span",5),l.YNc(6,Nd,2,4,"span",6),l.YNc(7,zx,2,4,"input",7),l.YNc(8,mE,1,0,"i",8),l.TgZ(9,"div",9),l._UZ(10,"span",10),l.qZA(),l.TgZ(11,"p-overlay",11,12),l.NdJ("visibleChange",function(s){return i.overlayVisible=s})("onAnimationStart",function(s){return i.onOverlayAnimationStart(s)})("onHide",function(){return i.hide()}),l.YNc(13,DE,9,11,"ng-template",13),l.qZA()()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",l.l5B(27,nm,i.disabled,i.overlayVisible,i.focused,i.showClear&&!i.disabled))("ngStyle",i.style),l.xp6(3),l.Q6J("disabled",i.disabled)("autofocus",i.autofocus),l.uIk("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-expanded",!1)("aria-labelledby",i.ariaLabelledBy)("tabindex",i.tabindex)("aria-activedescendant",i.overlayVisible?i.labelId:null),l.xp6(2),l.Q6J("ngIf",!i.editable&&null!=i.label),l.xp6(1),l.Q6J("ngIf",!i.editable&&null==i.label),l.xp6(1),l.Q6J("ngIf",i.editable),l.xp6(1),l.Q6J("ngIf",i.isVisibleClearIcon),l.xp6(1),l.uIk("aria-expanded",i.overlayVisible),l.xp6(1),l.Q6J("ngClass",i.dropdownIcon),l.xp6(1),l.Q6J("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions))},dependencies:[Kt,dr,dn,Gi,er,xv,Ni,cE,lP,vx,AE],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,changeDetection:0}),n})(),Bv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,Jg,Ws,dE,hl,Ux,Zb,Jg,Ws,Ux]}),n})();const xE=["mask"];function iM(n,t){1&n&&l.GkF(0)}function ME(n,t){if(1&n&&(l.ynx(0),l.YNc(1,iM,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.indicatorTemplate)}}function IP(n,t){1&n&&l._UZ(0,"i",8)}function bP(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",4),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onImageClick())}),l.YNc(1,ME,2,1,"ng-container",5),l.YNc(2,IP,1,0,"ng-template",null,6,l.W1O),l.qZA()}if(2&n){const e=l.MAs(3),i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.indicatorTemplate)("ngIfElse",e)}}const rM=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},sM=function(n){return{value:"visible",params:n}};function im(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div"),l.NdJ("@animation.start",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onAnimationStart(r))})("@animation.done",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onAnimationEnd(r))}),l.TgZ(1,"img",20),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onPreviewImageClick())}),l.qZA()()}if(2&n){const e=l.oxw(2);l.Q6J("@animation",l.VKq(6,sM,l.WLB(3,rM,e.showTransitionOptions,e.hideTransitionOptions))),l.xp6(1),l.Q6J("ngStyle",e.imagePreviewStyle()),l.uIk("src",e.src,l.LSH)}}function oM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",9,10),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onMaskClick())}),l.TgZ(2,"div",11),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.handleToolbarClick(r))}),l.TgZ(3,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateRight())}),l._UZ(4,"i",13),l.qZA(),l.TgZ(5,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateLeft())}),l._UZ(6,"i",14),l.qZA(),l.TgZ(7,"button",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.zoomOut())}),l._UZ(8,"i",16),l.qZA(),l.TgZ(9,"button",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.zoomIn())}),l._UZ(10,"i",17),l.qZA(),l.TgZ(11,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.closePreview())}),l._UZ(12,"i",18),l.qZA()(),l.YNc(13,im,2,8,"div",19),l.qZA()}if(2&n){const e=l.oxw();l.xp6(7),l.Q6J("disabled",e.isZoomOutDisabled),l.xp6(2),l.Q6J("disabled",e.isZoomInDisabled),l.xp6(4),l.Q6J("ngIf",e.previewVisible)}}let EP=(()=>{class n{constructor(e,i){this.config=e,this.cd=i,this.preview=!1,this.showTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.onShow=new l.vpe,this.onHide=new l.vpe,this.onImageError=new l.vpe,this.maskVisible=!1,this.previewVisible=!1,this.rotate=0,this.scale=1,this.previewClick=!1,this.zoomSettings={default:1,step:.1,max:1.5,min:.5}}get isZoomOutDisabled(){return this.scale-this.zoomSettings.step<=this.zoomSettings.min}get isZoomInDisabled(){return this.scale+this.zoomSettings.step>=this.zoomSettings.max}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.indicatorTemplate=e.template})}onImageClick(){this.preview&&(this.maskVisible=!0,this.previewVisible=!0)}onMaskClick(){this.previewClick||this.closePreview(),this.previewClick=!1}onPreviewImageClick(){this.previewClick=!0}rotateRight(){this.rotate+=90,this.previewClick=!0}rotateLeft(){this.rotate-=90,this.previewClick=!0}zoomIn(){this.scale=this.scale+this.zoomSettings.step,this.previewClick=!0}zoomOut(){this.scale=this.scale-this.zoomSettings.step,this.previewClick=!0}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop();break;case"void":be.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":$s.clear(this.wrapper),this.maskVisible=!1,this.container=null,this.wrapper=null,this.cd.markForCheck(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}moveOnTop(){$s.set("modal",this.wrapper,this.config.zIndex.modal)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):be.appendChild(this.wrapper,this.appendTo))}imagePreviewStyle(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}}containerClass(){return{"p-image p-component":!0,"p-image-preview-container":this.preview}}handleToolbarClick(e){e.stopPropagation()}closePreview(){this.previewVisible=!1,this.rotate=0,this.scale=this.zoomSettings.default}imageError(e){this.onImageError.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(cd),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-image"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Ni,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&l.Gf(xE,5),2&e){let r;l.iGM(r=l.CRH())&&(i.mask=r.first)}},hostAttrs:[1,"p-element"],inputs:{imageClass:"imageClass",imageStyle:"imageStyle",styleClass:"styleClass",style:"style",src:"src",alt:"alt",width:"width",height:"height",appendTo:"appendTo",preview:"preview",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide",onImageError:"onImageError"},decls:4,vars:13,consts:[[3,"ngClass","ngStyle"],[3,"ngStyle","error"],["class","p-image-preview-indicator",3,"click",4,"ngIf"],["class","p-image-mask p-component-overlay p-component-overlay-enter",3,"click",4,"ngIf"],[1,"p-image-preview-indicator",3,"click"],[4,"ngIf","ngIfElse"],["defaultTemplate",""],[4,"ngTemplateOutlet"],[1,"p-image-preview-icon","pi","pi-eye"],[1,"p-image-mask","p-component-overlay","p-component-overlay-enter",3,"click"],["mask",""],[1,"p-image-toolbar",3,"click"],["type","button",1,"p-image-action","p-link",3,"click"],[1,"pi","pi-refresh"],[1,"pi","pi-undo"],["type","button",1,"p-image-action","p-link",3,"disabled","click"],[1,"pi","pi-search-minus"],[1,"pi","pi-search-plus"],[1,"pi","pi-times"],[4,"ngIf"],[1,"p-image-preview",3,"ngStyle","click"]],template:function(e,i){1&e&&(l.TgZ(0,"span",0)(1,"img",1),l.NdJ("error",function(s){return i.imageError(s)}),l.qZA(),l.YNc(2,bP,4,2,"div",2),l.YNc(3,oM,14,3,"div",3),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",i.containerClass())("ngStyle",i.style),l.xp6(1),l.Tol(i.imageClass),l.Q6J("ngStyle",i.imageStyle),l.uIk("src",i.src,l.LSH)("alt",i.alt)("width",i.width)("height",i.height),l.xp6(1),l.Q6J("ngIf",i.preview),l.xp6(1),l.Q6J("ngIf",i.maskVisible))},dependencies:[Kt,dn,Gi,er],styles:[".p-image-mask{display:flex;align-items:center;justify-content:center}.p-image-preview-container{position:relative;display:inline-block}.p-image-preview-indicator{position:absolute;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s}.p-image-preview-icon{font-size:1.5rem}.p-image-preview-container:hover>.p-image-preview-indicator{opacity:1;cursor:pointer}.p-image-preview-container>img{cursor:pointer}.p-image-toolbar{position:absolute;top:0;right:0;display:flex;z-index:1}.p-image-action.p-link{display:flex;justify-content:center;align-items:center}.p-image-action.p-link[disabled]{opacity:.5}.p-image-preview{transition:transform .15s;max-width:100vw;max-height:100vh}\n"],encapsulation:2,data:{animation:[js("animation",[Ta("void => visible",[Gs({transform:"scale(0.7)",opacity:0}),vs("{{showTransitionParams}}")]),Ta("visible => void",[vs("{{hideTransitionParams}}",Gs({transform:"scale(0.7)",opacity:0}))])])]},changeDetection:0}),n})(),TP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Oi,Ws]}),n})();const aM=function(){return{width:"100%"}};let lM=(()=>{class n{constructor(){this.states=[{name:"Selecione: "},{name:"Acre"},{name:"Alagoas"},{name:"Amap\xe1"},{name:"Amazonas"},{name:"Bahia"},{name:"Cear\xe1"},{name:"Distrito Federal"},{name:"Esp\xedrito Santo"},{name:"Goi\xe1s"},{name:"Maranh\xe3o"},{name:"Mato Grosso"},{name:"Mato Grosso do Sul"},{name:"Minas Gerais"},{name:"Par\xe1"},{name:"Para\xedba"},{name:"Paran\xe1"},{name:"Pernambuco"},{name:"Piau\xed"},{name:"Rio de Janeiro"},{name:"Rio Grande do Norte"},{name:"Rio Grande do Sul"},{name:"Rond\xf4nia"},{name:"Roraima"},{name:"Santa Catarina"},{name:"S\xe3o Paulo"},{name:"Sergipe"},{name:"Tocantins"}]}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-config-view"]],decls:35,vars:7,consts:[[1,"card"],[1,"fieldPhoto"],["src","assets/galleria1.jpg","alt","Image","width","250"],[1,"findPhoto"],["pButton","","type","button",1,"p-button-raised","p-button-rounded"],[1,"field"],["for","firstname1"],["id","firstname1","type","text","pInputText","",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","lastname1"],["id","lastname1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["optionLabel","name","autoWidth","false",3,"options"],["id","city1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["id","formacaoAcad1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["mask","(99) 9 9999-9999","slotChar"," "]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div",0)(2,"h5"),l._uU(3,"Editar usu\xe1rio"),l.qZA(),l.TgZ(4,"div",1),l._UZ(5,"p-image",2),l.qZA(),l.TgZ(6,"div",3)(7,"button",4),l._uU(8,"Upload da foto"),l.qZA()(),l.TgZ(9,"div",5)(10,"label",6),l._uU(11,"Nome:"),l.qZA(),l._UZ(12,"input",7),l.qZA(),l.TgZ(13,"div",5)(14,"label",8),l._uU(15,"Sobrenome:"),l.qZA(),l._UZ(16,"input",9),l.qZA(),l.TgZ(17,"div",5)(18,"label"),l._uU(19,"Data de nascimento: "),l.qZA(),l._UZ(20,"p-calendar"),l.qZA(),l.TgZ(21,"div",5),l._UZ(22,"p-dropdown",10),l.qZA(),l.TgZ(23,"div",5)(24,"label"),l._uU(25,"Cidade:"),l.qZA(),l._UZ(26,"input",11),l.qZA(),l.TgZ(27,"div",5)(28,"label"),l._uU(29,"Forma\xe7\xe3o acad\xeamica:"),l.qZA(),l._UZ(30,"input",12),l.qZA(),l.TgZ(31,"div",5)(32,"label"),l._uU(33,"Telefone:"),l.qZA(),l._UZ(34,"p-inputMask",13),l.qZA()()()),2&e&&(l.xp6(22),l.Akn(l.DdM(5,aM)),l.Q6J("options",i.states),l.xp6(12),l.Akn(l.DdM(6,aM)))},dependencies:[Mg,Dv,Kb,nM,EP,Gl]}),n})(),uM=(()=>{class n{constructor(){this.profiePic="assets/cza-profile.png",this.userName="Caesar Zama Altran"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-search-entry"]],inputs:{profiePic:"profiePic",userName:"userName"},decls:7,vars:2,consts:[[1,"col-12"],[1,"flex","content-card-header","align-content-center"],[2,"padding-right",".4em","padding-left",".2em"],[1,"profile-img",3,"src"],[1,"align-content-center",2,"padding-top",".30em","font-weight","bold"]],template:function(e,i){1&e&&(l.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2),l._UZ(4,"img",3),l.qZA(),l.TgZ(5,"div",4),l._uU(6),l.qZA()()()()),2&e&&(l.xp6(4),l.s9C("src",i.profiePic,l.LSH),l.xp6(2),l.hij(" ",i.userName," "))}}),n})();function cM(n,t){if(1&n&&l._UZ(0,"app-search-entry",5),2&n){const e=t.$implicit;l.Q6J("userName",e.userName)("profiePic",e.profilePic)}}let DP=(()=>{class n{constructor(){this.searchDataRaw=[{userName:"Caesar Zama Altran",profilePic:"assets/cza-profile.png"},{userName:"Guilherme Nascimento",profilePic:"assets/profile-gui.jpg"},{userName:"Bruno Ricardo",profilePic:"assets/profile-bruno.jpg"},{userName:"Nathan Almici",profilePic:"assets/profile-nathan.jpg"},{userName:"Lincoln Ricardo",profilePic:"assets/profile-lincoln.jpg"}],this.searchData=[],this.query=""}ngOnInit(){}filter(){this.searchData=this.searchDataRaw.filter(e=>e.userName.toUpperCase().includes(this.query.toUpperCase()))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-search-view"]],decls:7,vars:2,consts:[[1,"col-12"],[1,"p-inputgroup"],["type","text","pInputText","",1,"flex-grow-1",3,"ngModel","ngModelChange"],["type","button","pRipple","","icon","pi pi-search","styleClass","p-button-warn"],[3,"userName","profiePic",4,"ngFor","ngForOf"],[3,"userName","profiePic"]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div")(2,"div",0)(3,"div",1)(4,"input",2),l.NdJ("ngModelChange",function(s){return i.query=s})("ngModelChange",function(){return i.filter()}),l.qZA(),l._UZ(5,"p-button",3),l.qZA()()(),l.YNc(6,cM,1,2,"app-search-entry",4),l.qZA()),2&e&&(l.xp6(4),l.Q6J("ngModel",i.query),l.xp6(2),l.Q6J("ngForOf",i.searchData))},dependencies:[dr,Oy,hf,Qy,vf,Gl,uM]}),n})();const dM=["video"],kE=["canvas"];function OE(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",6),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateVideoInput(!0))}),l.qZA()}}class RE{constructor(t,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=t,this._imageData=i}static getDataFromDataUrl(t,e){return t.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=RE.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}let NE=(()=>{class n{constructor(){this.width=640,this.height=480,this.videoOptions=n.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=n.DEFAULT_IMAGE_TYPE,this.imageQuality=n.DEFAULT_IMAGE_QUALITY,this.imageCapture=new l.vpe,this.initError=new l.vpe,this.imageClick=new l.vpe,this.cameraSwitched=new l.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(i=>{"string"==typeof i?this.switchToVideoInput(i):this.rotateVideoInput(!1!==i)})}static getMediaConstraintsForDevice(e,i){const r=i||this.DEFAULT_VIDEO_OPTIONS;return e&&(r.deviceId={exact:e}),r}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const i=e.getConstraints().deviceId;return n.getValueFromConstrainDOMString(i)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const i=e.getConstraints().facingMode;return n.getValueFromConstrainDOMString(i)}}}static isUserFacing(e){const i=n.getFacingModeFromMediaStreamTrack(e);return!!i&&"user"===i.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,i={width:this.width,height:this.height};e.videoWidth&&(i.width=e.videoWidth,i.height=e.videoHeight);const r=this.canvas.nativeElement;r.width=i.width,r.height=i.height;const s=r.getContext("2d");s.drawImage(e,0,0);const c=this.imageType?this.imageType:n.DEFAULT_IMAGE_TYPE,g=r.toDataURL(c,this.imageQuality?this.imageQuality:n.DEFAULT_IMAGE_QUALITY);let y=null;this.captureImageData&&(y=s.getImageData(0,0,r.width,r.height)),this.imageCapture.next(new RE(g,c,y))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,i){const r=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const s=n.getMediaConstraintsForDevice(e,i);navigator.mediaDevices.getUserMedia({video:s}).then(c=>{this.mediaStream=c,r.srcObject=c,r.play(),this.activeVideoSettings=c.getVideoTracks()[0].getSettings();const h=n.getDeviceIdFromMediaStreamTrack(c.getVideoTracks()[0]);this.cameraSwitched.next(h),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=h?this.availableVideoInputs.findIndex(g=>g.deviceId===h):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(c=>{this.initError.next({message:c.message,mediaStreamError:c})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return n.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,i)=>{(class So{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((t,e)=>{navigator.mediaDevices.enumerateDevices().then(i=>{t(i.filter(r=>"videoinput"===r.kind))}).catch(i=>{e(i.message||i)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(r=>{this.availableVideoInputs=r,e(r)}).catch(r=>{this.availableVideoInputs=[],i(r)})})}}return n.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},n.DEFAULT_IMAGE_TYPE="image/jpeg",n.DEFAULT_IMAGE_QUALITY=.92,n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["webcam"]],viewQuery:function(e,i){if(1&e&&(l.Gf(dM,7),l.Gf(kE,7)),2&e){let r;l.iGM(r=l.CRH())&&(i.video=r.first),l.iGM(r=l.CRH())&&(i.canvas=r.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return i.imageClick.next()}),l.TgZ(1,"video",1,2),l.NdJ("resize",function(){return i.videoResize()}),l.qZA(),l.YNc(3,OE,1,0,"div",3),l._UZ(4,"canvas",4,5),l.qZA()),2&e&&(l.xp6(1),l.Tol(i.videoStyleClasses),l.Q6J("width",i.videoWidth)("height",i.videoHeight),l.xp6(2),l.Q6J("ngIf",i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized),l.xp6(1),l.Q6J("width",i.width)("height",i.height))},dependencies:[dn],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),n})(),hM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Oi]]}),n})();const Hv=["webcamComponent"],jv=[{path:"login",component:yA},{path:"home",component:NI,canActivate:[Id]},{path:"search",component:DP,canActivate:[Id]},{path:"novo",component:(()=>{class n{constructor(){}ngOnInit(){}getWidth(){return document.documentElement.clientWidth}getHeight(){return document.documentElement.clientHeight}getPadding(){return(this.getHeight()-30-(this.input?.height??0))/2}debug(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-new-content-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(Hv,5),2&e){let r;l.iGM(r=l.CRH())&&(i.input=r.first)}},decls:4,vars:6,consts:[[3,"allowCameraSwitch","width"],["webcamComponent",""]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div"),l._UZ(2,"webcam",0,1),l.qZA()()),2&e&&(l.xp6(1),l.vpz("background-color: black; width: 100%;height: ",i.getHeight()-30,"px; padding-top:",i.getPadding(),"px"),l.xp6(1),l.Q6J("allowCameraSwitch",!0)("width",i.getWidth()))},dependencies:[NE,Gl],styles:[".findPhoto[_ngcontent-%COMP%]{grid-gap:50px}"]}),n})(),canActivate:[Id]},{path:"notific",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-notification-view"]],decls:3,vars:0,template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"p"),l._uU(2,"notification-view works!"),l.qZA()())},dependencies:[Gl]}),n})(),canActivate:[Id]},{path:"config",component:lM,canActivate:[Id]},{path:"",redirectTo:"/home",pathMatch:"full"}];let FE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[NC.forRoot(jv,{useHash:!0}),NC]}),n})(),LE=(()=>{class n{constructor(){this.title="hacka-sicredi"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[Ru]}),n})();const VE_firebaseConfig={apiKey:"AIzaSyBNnuRVZ0vTs6I6iR_0gMMYWRoeD4HDl4k",authDomain:"hackasic.firebaseapp.com",projectId:"hackasic",storageBucket:"hackasic.appspot.com",messagingSenderId:"807324039482",appId:"1:807324039482:web:cf01e5d1b2a95f48e73803",measurementId:"G-DY0F90L8QH"};var rm=V(4986);function Gv(n,t=mo.y){return n=n??fM,(0,ei.e)((e,i)=>{let r,s=!0;e.subscribe((0,Ln.x)(i,c=>{const h=t(c);(s||!n(r,h))&&(s=!1,r=h,i.next(c))}))})}function fM(n,t){return n===t}var UE=V(5032);V(5881);var sm=V(3942);const om="@firebase/database",Sa="0.13.10";let Wv="";function gM(n){Wv=n}class mM{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class _M{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const BE=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new mM(t)}}catch{}return new _M},zu=BE("localStorage"),am=BE("sessionStorage"),Sf=new Eo.Yd("@firebase/database"),zv=function(){let n=1;return function(){return n++}}(),HE=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},Pd=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Pd.apply(null,i):t+="object"==typeof i?(0,L.Wl)(i):i,t+=" "}return t};let Fd=null,lm=!0;const qv=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Sf.logLevel=Eo.in.VERBOSE,Fd=Sf.log.bind(Sf),t&&am.set("logging_enabled",!0)):"function"==typeof n?Fd=n:(Fd=null,am.remove("logging_enabled"))},Pi=function(...n){if(!0===lm&&(lm=!1,null===Fd&&!0===am.get("logging_enabled")&&qv(!0)),Fd){const t=Pd.apply(null,n);Fd(t)}},Ld=function(n){return function(...t){Pi(n,...t)}},um=function(...n){const t="FIREBASE INTERNAL ERROR: "+Pd(...n);Sf.error(t)},xo=function(...n){const t=`FIREBASE FATAL ERROR: ${Pd(...n)}`;throw Sf.error(t),new Error(t)},Fi=function(...n){const t="FIREBASE WARNING: "+Pd(...n);Sf.warn(t)},Af=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Aa="[MIN_NAME]",Mo="[MAX_NAME]",qu=function(n,t){if(n===t)return 0;if(n===Aa||t===Mo)return-1;if(t===Aa||n===Mo)return 1;{const e=hm(n),i=hm(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},vM=function(n,t){return n===t?0:n<t?-1:1},dm=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(t))},jE=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Wl)(t[i]),e+=":",e+=jE(n[t[i]]);return e+="}",e},Zv=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Ki(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const GE=function(n){(0,L.hu)(!Af(n),"Invalid JSON number");const i=1023;let r,s,c,h,g;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const b=y.join("");let D="";for(g=0;g<64;g+=8){let x=parseInt(b.substr(g,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},OP=new RegExp("^-?(0*)\\d{1,10}$"),CM=-2147483648,$E=2147483647,hm=function(n){if(OP.test(n)){const t=Number(n);if(t>=CM&&t<=$E)return t}return null},pl=function(n){try{n()}catch(t){setTimeout(()=>{throw Fi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},xf=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class WE{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Fi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Zu{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Pi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fi(t)}}let Vd=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Mf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TM="websocket",Kv="long_polling";class Yv{constructor(t,e,i,r,s=!1,c="",h=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zu.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&zu.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ZE(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===TM)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Kv)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function DM(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Ki(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class SM{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const mm={},_m={};function ym(n){const t=n.toString();return mm[t]||(mm[t]=new SM),mm[t]}class xM{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&pl(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class zl{constructor(t,e,i,r,s,c,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ld(t),this.stats_=ym(e),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),ZE(e,Kv,g))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new xM(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JE((...s)=>{const[c,h,g,y,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Mf.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zl.forceAllow_=!0}static forceDisallow(){zl.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!zl.forceAllow_&&(zl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=Zv(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class JE{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=zv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=JE.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Pi("frame writing exception"),h.stack&&Pi(h.stack),Pi(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Pi("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Pi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Xv=null;typeof MozWebSocket<"u"?Xv=MozWebSocket:typeof WebSocket<"u"&&(Xv=WebSocket);let kf=(()=>{class n{constructor(e,i,r,s,c,h,g){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ld(this.connId),this.stats_=ym(i),this.connURL=n.connectionURL_(i,h,g,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const h={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&Mf.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),c&&(h.p=c),ZE(e,TM,h)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zu.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Wv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new Xv(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Xv&&!n.forceDisallow_}static previouslyFailed(){return zu.isInMemoryStorage||!0===zu.get("previous_websocket_failure")}markConnectionHealthy(){zu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Zv(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),PM=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[zl,kf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=kf&&kf.isAvailable();let r=i&&!kf.previouslyFailed();if(e.webSocketOnly&&(i||Fi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[kf];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Te{constructor(t,e,i,r,s,c,h,g,y,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ld("c:"+this.id+":"),this.transportManager_=new PM(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=xf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=dm("t",t),i=dm("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=dm("t",t),i=dm("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=dm("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?um("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):um("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Fi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),xf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class We{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class Qe{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class ft extends Qe{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ft}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Xe{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function yt(){return new Xe("")}function vt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function es(n){return n.pieces_.length-n.pieceNum_}function xn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Xe(n.pieces_,t)}function Of(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ku(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function wm(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Xe(t,0)}function Bn(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Xe)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Xe(e,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function ar(n,t){const e=vt(n),i=vt(t);if(null===e)return t;if(e===i)return ar(xn(n),xn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function tw(n,t){const e=Ku(n,0),i=Ku(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=qu(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function FM(n,t){if(es(n)!==es(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function xa(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(es(n)>es(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class YH{constructor(t,e){this.errorPrefix_=e,this.parts_=Ku(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);HP(this)}}function HP(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rf(n))}function Rf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class LM extends Qe{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new LM}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const nw=1e3;let eT,Nf=(()=>{class n extends We{constructor(e,i,r,s,c,h,g,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Ld("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LM.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ft.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,L.Wl)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new L.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:h=>{const g=h.d;"ok"===h.s?i.resolve(g):i.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,g=>{const y=g.d,b=g.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",g),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Fi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,h=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const h={p:i,d:r};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):um("Unrecognized action received from server: "+(0,L.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=nw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ce.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let g=!1,y=null;const b=function(){y?y.close():(g=!0,s())};e.realtime_={close:b,sendRequest:function(F){(0,L.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(F)}};const x=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[F,G]=yield Promise.all([e.authTokenProvider_.getToken(x),e.appCheckTokenProvider_.getToken(x)]);g?Pi("getToken() completed but was canceled"):(Pi("getToken() completed. Creating connection."),e.authToken_=F&&F.accessToken,e.appCheckToken_=G&&G.token,y=new Te(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,ne=>{Fi(ne+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(F){e.log_("Failed to get token: "+F),g||(e.repoInfo_.nodeAdmin&&Fi(F),b())}}})()}interrupt(e){Pi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=nw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>jE(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Xe(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Pi("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Pi("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+Wv.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ft.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new cn(t,e)}}class XE{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new cn(Aa,t),r=new cn(Aa,e);return 0!==this.compare(i,r)}minPost(){return cn.MIN}}class $P extends XE{static get __EMPTY_NODE(){return eT}static set __EMPTY_NODE(t){eT=t}compare(t,e){return qu(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return cn.MIN}maxPost(){return new cn(Mo,eT)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new cn(t,eT)}toString(){return".key"}}const ql=new $P;class tT{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let UM,gl=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Zs.EMPTY_NODE,this.right=c??Zs.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Zs.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Zs{constructor(t,e=Zs.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Zs(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,gl.BLACK,null,null))}remove(t){return new Zs(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,gl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new tT(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new tT(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new tT(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new tT(this.root_,null,this.comparator_,!0,t)}}function r3(n,t){return qu(n.name,t.name)}function VM(n,t){return qu(n,t)}Zs.EMPTY_NODE=new class i3{copy(t,e,i,r,s){return this}insert(t,e,i){return new gl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const WP=function(n){return"number"==typeof n?"number:"+GE(n):"string:"+n},zP=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===UM||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===UM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qP,ZP,KP,Cm=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zP(this.priorityNode_)}static set __childrenNodeConstructor(e){qP=e}static get __childrenNodeConstructor(){return qP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:".priority"===vt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=vt(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===es(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(xn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+WP(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?GE(this.value_):this.value_,this.lazyHash_=HE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(s>=0,"Unknown leaf type: "+i),(0,L.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ti=new class l3 extends XE{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?qu(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(Mo,new Cm("[PRIORITY-POST]",KP))}makePost(t,e){const i=ZP(t);return new cn(e,new Cm("[PRIORITY-POST]",i))}toString(){return".priority"}},u3=Math.log(2);class c3{constructor(t){this.count=parseInt(Math.log(t+1)/u3,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const nT=function(n,t,e,i){n.sort(t);const r=function(g,y){const b=y-g;let D,x;if(0===b)return null;if(1===b)return D=n[g],x=e?e(D):D,new gl(x,D.node,gl.BLACK,null,null);{const F=parseInt(b/2,10)+g,G=r(g,F),ne=r(F+1,y);return D=n[F],x=e?e(D):D,new gl(x,D.node,gl.BLACK,G,ne)}},h=function(g){let y=null,b=null,D=n.length;const x=function(G,ne){const te=D-G,ze=D;D-=G;const Ke=r(te+1,ze),qe=n[te],Je=e?e(qe):qe;F(new gl(Je,qe.node,ne,null,Ke))},F=function(G){y?(y.left=G,y=G):(b=G,y=G)};for(let G=0;G<g.count;++G){const ne=g.nextBitIsOne(),te=Math.pow(2,g.count-(G+1));ne?x(te,gl.BLACK):(x(te,gl.BLACK),x(te,gl.RED))}return b}(new c3(n.length));return new Zs(i||t,h)};let BM;const Im={};class Yu{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(Im&&ti,"ChildrenNode.ts has not been loaded"),BM=BM||new Yu({".priority":Im},{".priority":ti}),BM}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Zs?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==ql,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(cn.Wrap);let h,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();h=r?nT(i,t.getCompare()):Im;const g=t.toString(),y=Object.assign({},this.indexSet_);y[g]=t;const b=Object.assign({},this.indexes_);return b[g]=h,new Yu(b,y)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,s)=>{const c=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(c,"Missing index implementation for "+s),r===Im){if(c.isDefinedOn(t.node)){const h=[],g=e.getIterator(cn.Wrap);let y=g.getNext();for(;y;)y.name!==t.name&&h.push(y),y=g.getNext();return h.push(t),nT(h,c.getCompare())}return Im}{const h=e.get(t.name);let g=r;return h&&(g=g.remove(new cn(t.name,h))),g.insert(t,t.node)}});return new Yu(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===Im)return r;{const s=e.get(t.name);return s?r.remove(new cn(t.name,s)):r}});return new Yu(i,this.indexSet_)}}let iw,Xt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&zP(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return iw||(iw=new n(new Zs(VM),null,Yu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||iw}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?iw:i}}getChild(e){const i=vt(e);return null===i?this:this.getImmediateChild(i).getChild(xn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new cn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?iw:this.priorityNode_;return new n(s,h,c)}}updateChild(e,i){const r=vt(e);if(null===r)return i;{(0,L.hu)(".priority"!==vt(e)||1===es(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(xn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(ti,(h,g)=>{i[h]=g.val(e),r++,c&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):c=!1}),!e&&c&&s<2*r){const h=[];for(const g in i)h[g]=i[g];return h}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+WP(this.getPriority().val())+":"),this.forEachChild(ti,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":HE(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new cn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new cn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new cn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,cn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,cn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rw?-1:0}withIndex(e){if(e===ql||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===ql||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ti),s=i.getIterator(ti);let c=r.getNext(),h=s.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=r.getNext(),h=s.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(e){return e===ql?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const rw=new class d3 extends Xt{constructor(){super(new Zs(VM),Xt.EMPTY_NODE,Yu.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Xt.EMPTY_NODE}isEmpty(){return!1}};function wi(n,t=null){if(null===n)return Xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Cm(n,wi(t));if(n instanceof Array){let e=Xt.EMPTY_NODE;return Ki(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const s=wi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(wi(t))}{const e=[];let i=!1;if(Ki(n,(c,h)=>{if("."!==c.substring(0,1)){const g=wi(h);g.isEmpty()||(i=i||!g.getPriority().isEmpty(),e.push(new cn(c,g)))}}),0===e.length)return Xt.EMPTY_NODE;const s=nT(e,r3,c=>c.name,VM);if(i){const c=nT(e,ti.getCompare());return new Xt(s,wi(t),new Yu({".priority":c},{".priority":ti}))}return new Xt(s,wi(t),Yu.Default)}}Object.defineProperties(cn,{MIN:{value:new cn(Aa,Xt.EMPTY_NODE)},MAX:{value:new cn(Mo,rw)}}),$P.__EMPTY_NODE=Xt.EMPTY_NODE,Cm.__childrenNodeConstructor=Xt,function s3(n){UM=n}(rw),function a3(n){KP=n}(rw),function o3(n){ZP=n}(wi);class HM extends XE{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!Jt(t)&&".priority"!==vt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?qu(t.name,e.name):s}makePost(t,e){const i=wi(t),r=Xt.EMPTY_NODE.updateChild(this.indexPath_,i);return new cn(e,r)}maxPost(){const t=Xt.EMPTY_NODE.updateChild(this.indexPath_,rw);return new cn(Mo,t)}toString(){return Ku(this.indexPath_,0).join("/")}}const jM=new class f3 extends XE{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?qu(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(t,e){const i=wi(t);return new cn(e,i)}toString(){return".value"}},bm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",p3=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=bm.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=bm.charAt(t[r]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),JP=function(n){if(n===""+$E)return"-";const t=hm(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Mo;const s=bm.charAt(bm.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},XP=function(n){if(n===""+CM)return Aa;const t=hm(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+$E:(delete e[e.length-1],e.join("")):(e[e.length-1]=bm.charAt(bm.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function eF(n){return{type:"value",snapshotNode:n}}function Em(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function sw(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function ow(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class $M{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(sw(e,h)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Em(e,i)):c.trackChildChange(ow(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(ti,(r,s)=>{e.hasChild(r)||i.trackChildChange(sw(r,s))}),e.isLeafNode()||e.forEachChild(ti,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(ow(r,s,c))}else i.trackChildChange(Em(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Xt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class aw{constructor(t){this.indexedFilter_=new $M(t.getIndex()),this.index_=t.getIndex(),this.startPost_=aw.getStartPost_(t),this.endPost_=aw.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new cn(e,i))||(i=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Xt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Xt.EMPTY_NODE);const s=this;return e.forEachChild(ti,(c,h)=>{s.matches(new cn(c,h))||(r=r.updateImmediateChild(c,Xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class m3{constructor(t){this.rangedFilter_=new aw(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new cn(e,i))||(i=Xt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Xt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const h=s.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;r=r.updateImmediateChild(h.name,h.node),c++}}else{let s,c,h,g;if(r=e.withIndex(this.index_),r=r.updatePriority(Xt.EMPTY_NODE),this.reverse_){g=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(x,F)=>D(F,x)}else g=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,b=!1;for(;g.hasNext();){const D=g.getNext();!b&&h(s,D)<=0&&(b=!0),b&&y<this.limit_&&h(D,c)<=0?y++:r=r.updateImmediateChild(D.name,Xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const D=this.index_.getCompare();c=(x,F)=>D(F,x)}else c=this.index_.getCompare();const h=t;(0,L.hu)(h.numChildren()===this.limit_,"");const g=new cn(e,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(g);if(h.hasChild(e)){const D=h.getImmediateChild(e);let x=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===e||h.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const F=null==x?1:c(x,g);if(b&&!i.isEmpty()&&F>=0)return s?.trackChildChange(ow(e,i,D)),h.updateImmediateChild(e,i);{s?.trackChildChange(sw(e,D));const ne=h.updateImmediateChild(e,Xt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(s?.trackChildChange(Em(x.name,x.node)),ne.updateImmediateChild(x.name,x.node)):ne}}return i.isEmpty()?t:b&&c(y,g)>=0?(null!=s&&(s.trackChildChange(sw(y.name,y.node)),s.trackChildChange(Em(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(y.name,Xt.EMPTY_NODE)):t}}class iT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ti}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Aa}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ti}copy(){const t=new iT;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function WM(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function zM(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function rT(n,t){const e=n.copy();return e.index_=t,e}function tF(n){const t={};if(n.isDefault())return t;let e;return n.index_===ti?e="$priority":n.index_===jM?e="$value":n.index_===ql?e="$key":((0,L.hu)(n.index_ instanceof HM,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Wl)(e),n.startSet_&&(t.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function nF(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==ti&&(t.i=n.index_.toString()),t}class sT extends We{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Ld("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=sT.getListenId_(t,i),h={};this.listens_[c]=h;const g=tF(t._queryParams);this.restRequest_(s+".json",g,(y,b)=>{let D=b;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,i),(0,L.DV)(this.listens_,c)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(x,null)}})}unlisten(t,e){const i=sT.getListenId_(t,e);delete this.listens_[i]}get(t){const e=tF(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(s,c)=>{let h=c;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,L.cI)(h.responseText)}catch{Fi("Failed to parse JSON response for "+c+": "+h.responseText)}i(null,g)}else 401!==h.status&&404!==h.status&&Fi("Got unsuccessful REST response for "+c+" Status: "+h.status),i(h.status);i=null}},h.open("GET",c,!0),h.send()})}}class I3{constructor(){this.rootNode_=Xt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function oT(){return{value:null,children:new Map}}function Tm(n,t,e){if(Jt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=vt(t);n.children.has(i)||n.children.set(i,oT()),Tm(n.children.get(i),t=xn(t),e)}}function qM(n,t){if(Jt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(ti,(i,r)=>{Tm(n,new Xe(i),r)}),qM(n,t)}}if(n.children.size>0){const e=vt(t);return t=xn(t),n.children.has(e)&&qM(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function ZM(n,t,e){null!==n.value?e(t,n.value):function b3(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{ZM(r,new Xe(t.toString()+"/"+i),e)})}class E3{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Ki(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class S3{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new E3(t);const i=1e4+2e4*Math.random();xf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Ki(t,(r,s)=>{s>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),xf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ma=(()=>{return(n=Ma||(Ma={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ma;var n})();function QM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aT{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Ma.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Xe(t));return new aT(yt(),e,this.revert)}}return(0,L.hu)(vt(this.path)===t,"operationForChild called for unrelated child."),new aT(xn(this.path),this.affectedTree,this.revert)}}class lw{constructor(t,e){this.source=t,this.path=e,this.type=Ma.LISTEN_COMPLETE}operationForChild(t){return Jt(this.path)?new lw(this.source,yt()):new lw(this.source,xn(this.path))}}class Pf{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Ma.OVERWRITE}operationForChild(t){return Jt(this.path)?new Pf(this.source,yt(),this.snap.getImmediateChild(t)):new Pf(this.source,xn(this.path),this.snap)}}class Dm{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Ma.MERGE}operationForChild(t){if(Jt(this.path)){const e=this.children.subtree(new Xe(t));return e.isEmpty()?null:e.value?new Pf(this.source,yt(),e.value):new Dm(this.source,yt(),e)}return(0,L.hu)(vt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Dm(this.source,xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bd{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Jt(t))return this.isFullyInitialized()&&!this.filtered_;const e=vt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class A3{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function uw(n,t,e,i,r,s){const c=i.filter(h=>h.type===e);c.sort((h,g)=>function k3(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new cn(t.childName,t.snapshotNode),r=new cn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,h,g)),c.forEach(h=>{const g=function M3(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,s);r.forEach(y=>{y.respondsTo(h.type)&&t.push(y.createEvent(g,n.query_))})})}function lT(n,t){return{eventCache:n,serverCache:t}}function cw(n,t,e,i){return lT(new Bd(t,e,i),n.serverCache)}function rF(n,t,e,i){return lT(n.eventCache,new Bd(t,e,i))}function uT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ff(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let JM;class ni{constructor(t,e=(()=>(JM||(JM=new Zs(vM)),JM))()){this.value=t,this.children=e}static fromObject(t){let e=new ni(null);return Ki(t,(i,r)=>{e=e.set(new Xe(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:yt(),value:this.value};if(Jt(t))return null;{const i=vt(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(xn(t),e);return null!=s?{path:Bn(new Xe(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Jt(t))return this;{const e=vt(t),i=this.children.get(e);return null!==i?i.subtree(xn(t)):new ni(null)}}set(t,e){if(Jt(t))return new ni(e,this.children);{const i=vt(t),s=(this.children.get(i)||new ni(null)).set(xn(t),e),c=this.children.insert(i,s);return new ni(this.value,c)}}remove(t){if(Jt(t))return this.children.isEmpty()?new ni(null):new ni(null,this.children);{const e=vt(t),i=this.children.get(e);if(i){const r=i.remove(xn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new ni(null):new ni(this.value,s)}return this}}get(t){if(Jt(t))return this.value;{const e=vt(t),i=this.children.get(e);return i?i.get(xn(t)):null}}setTree(t,e){if(Jt(t))return e;{const i=vt(t),s=(this.children.get(i)||new ni(null)).setTree(xn(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new ni(this.value,c)}}fold(t){return this.fold_(yt(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Bn(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,yt(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(Jt(t))return null;{const s=vt(t),c=this.children.get(s);return c?c.findOnPath_(xn(t),Bn(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,yt(),e)}foreachOnPath_(t,e,i){if(Jt(t))return this;{this.value&&i(e,this.value);const r=vt(t),s=this.children.get(r);return s?s.foreachOnPath_(xn(t),Bn(e,r),i):new ni(null)}}foreach(t){this.foreach_(yt(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Bn(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class ml{constructor(t){this.writeTree_=t}static empty(){return new ml(new ni(null))}}function dw(n,t,e){if(Jt(t))return new ml(new ni(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=ar(r,t);return s=s.updateChild(c,e),new ml(n.writeTree_.set(r,s))}{const r=new ni(e),s=n.writeTree_.setTree(t,r);return new ml(s)}}}function XM(n,t,e){let i=n;return Ki(e,(r,s)=>{i=dw(i,Bn(t,r),s)}),i}function sF(n,t){if(Jt(t))return ml.empty();{const e=n.writeTree_.setTree(t,new ni(null));return new ml(e)}}function ek(n,t){return null!=Lf(n,t)}function Lf(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(ar(e.path,t)):null}function oF(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(ti,(i,r)=>{t.push(new cn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new cn(i,r.value))}),t}function Hd(n,t){if(Jt(t))return n;{const e=Lf(n,t);return new ml(null!=e?new ni(e):n.writeTree_.subtree(t))}}function tk(n){return n.writeTree_.isEmpty()}function Sm(n,t){return aF(yt(),n.writeTree_,t)}function aF(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=aF(Bn(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Bn(n,".priority"),i)),e}}function cT(n,t){return hF(t,n)}function L3(n,t){if(n.snap)return xa(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&xa(Bn(n.path,e),t))return!0;return!1}function U3(n){return n.visible}function lF(n,t,e){let i=ml.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let h;if(s.snap)xa(e,c)?(h=ar(e,c),i=dw(i,h,s.snap)):xa(c,e)&&(h=ar(c,e),i=dw(i,yt(),s.snap.getChild(h)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(xa(e,c))h=ar(e,c),i=XM(i,h,s.children);else if(xa(c,e))if(h=ar(c,e),Jt(h))i=XM(i,yt(),s.children);else{const g=(0,L.DV)(s.children,vt(h));if(g){const y=g.getChild(xn(h));i=dw(i,yt(),y)}}}}}return i}function uF(n,t,e,i,r){if(i||r){const s=Hd(n.visibleWrites,t);return!r&&tk(s)?e:r||null!=e||ek(s,yt())?Sm(lF(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(xa(y.path,t)||xa(t,y.path))},t),e||Xt.EMPTY_NODE):null}{const s=Lf(n.visibleWrites,t);if(null!=s)return s;{const c=Hd(n.visibleWrites,t);return tk(c)?e:null!=e||ek(c,yt())?Sm(c,e||Xt.EMPTY_NODE):null}}}function dT(n,t,e,i){return uF(n.writeTree,n.treePath,t,e,i)}function nk(n,t){return function B3(n,t,e){let i=Xt.EMPTY_NODE;const r=Lf(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ti,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Hd(n.visibleWrites,t);return e.forEachChild(ti,(c,h)=>{const g=Sm(Hd(s,new Xe(c)),h);i=i.updateImmediateChild(c,g)}),oF(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return oF(Hd(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function cF(n,t,e,i){return function H3(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Bn(t,e);if(ek(n.visibleWrites,s))return null;{const c=Hd(n.visibleWrites,s);return tk(c)?r.getChild(e):Sm(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function hT(n,t){return function G3(n,t){return Lf(n.visibleWrites,t)}(n.writeTree,Bn(n.treePath,t))}function ik(n,t,e){return function j3(n,t,e,i){const r=Bn(t,e),s=Lf(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Sm(Hd(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function dF(n,t){return hF(Bn(n.treePath,t),n.writeTree)}function hF(n,t){return{treePath:n,writeTree:t}}class q3{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,ow(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,sw(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Em(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,ow(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const fF=new class Z3{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class rk{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Bd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ik(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ff(this.viewCache_),s=function z3(n,t,e,i,r,s){return function $3(n,t,e,i,r,s,c){let h;const g=Hd(n.visibleWrites,t),y=Lf(g,yt());if(null!=y)h=y;else{if(null==e)return[];h=Sm(g,e)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const b=[],D=c.getCompare(),x=s?h.getReverseIteratorFrom(i,c):h.getIteratorFrom(i,c);let F=x.getNext();for(;F&&b.length<r;)0!==D(F,i)&&b.push(F),F=x.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function pF(n,t,e,i,r,s){const c=t.eventCache;if(null!=hT(i,e))return t;{let h,g;if(Jt(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=Ff(t),D=nk(i,y instanceof Xt?y:Xt.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),D,s)}else{const y=dT(i,Ff(t));h=n.filter.updateFullNode(t.eventCache.getNode(),y,s)}else{const y=vt(e);if(".priority"===y){(0,L.hu)(1===es(e),"Can't have a priority with additional path components");const b=c.getNode();g=t.serverCache.getNode();const D=cF(i,e,b,g);h=null!=D?n.filter.updatePriority(b,D):c.getNode()}else{const b=xn(e);let D;if(c.isCompleteForChild(y)){g=t.serverCache.getNode();const x=cF(i,e,c.getNode(),g);D=null!=x?c.getNode().getImmediateChild(y).updateChild(b,x):c.getNode().getImmediateChild(y)}else D=ik(i,y,t.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),y,D,b,r,s):c.getNode()}}return cw(t,h,c.isFullyInitialized()||Jt(e),n.filter.filtersNodes())}}function fT(n,t,e,i,r,s,c,h){const g=t.serverCache;let y;const b=c?n.filter:n.filter.getIndexedFilter();if(Jt(e))y=b.updateFullNode(g.getNode(),i,null);else if(b.filtersNodes()&&!g.isFiltered()){const F=g.getNode().updateChild(e,i);y=b.updateFullNode(g.getNode(),F,null)}else{const F=vt(e);if(!g.isCompleteForPath(e)&&es(e)>1)return t;const G=xn(e),te=g.getNode().getImmediateChild(F).updateChild(G,i);y=".priority"===F?b.updatePriority(g.getNode(),te):b.updateChild(g.getNode(),F,te,G,fF,null)}const D=rF(t,y,g.isFullyInitialized()||Jt(e),b.filtersNodes());return pF(n,D,e,r,new rk(r,D,s),h)}function sk(n,t,e,i,r,s,c){const h=t.eventCache;let g,y;const b=new rk(r,t,s);if(Jt(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,c),g=cw(t,y,!0,n.filter.filtersNodes());else{const D=vt(e);if(".priority"===D)y=n.filter.updatePriority(t.eventCache.getNode(),i),g=cw(t,y,h.isFullyInitialized(),h.isFiltered());else{const x=xn(e),F=h.getNode().getImmediateChild(D);let G;if(Jt(x))G=i;else{const ne=b.getCompleteChild(D);G=null!=ne?".priority"===Of(x)&&ne.getChild(wm(x)).isEmpty()?ne:ne.updateChild(x,i):Xt.EMPTY_NODE}g=F.equals(G)?t:cw(t,n.filter.updateChild(h.getNode(),D,G,x,b,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function gF(n,t){return n.eventCache.isCompleteForChild(t)}function mF(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function ok(n,t,e,i,r,s,c,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,g=t;y=Jt(e)?i:new ni(null).setTree(e,i);const b=t.serverCache.getNode();return y.children.inorderTraversal((D,x)=>{if(b.hasChild(D)){const G=mF(0,t.serverCache.getNode().getImmediateChild(D),x);g=fT(n,g,new Xe(D),G,r,s,c,h)}}),y.children.inorderTraversal((D,x)=>{const F=!t.serverCache.isCompleteForChild(D)&&null===x.value;if(!b.hasChild(D)&&!F){const ne=mF(0,t.serverCache.getNode().getImmediateChild(D),x);g=fT(n,g,new Xe(D),ne,r,s,c,h)}}),g}class ij{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new $M(i.getIndex()),s=function _3(n){return n.loadsAllData()?new $M(n.getIndex()):n.hasLimit()?new m3(n):new aw(n)}(i);this.processor_=function K3(n){return{filter:n}}(s);const c=e.serverCache,h=e.eventCache,g=r.updateFullNode(Xt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Xt.EMPTY_NODE,h.getNode(),null),b=new Bd(g,c.isFullyInitialized(),r.filtersNodes()),D=new Bd(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=lT(D,b),this.eventGenerator_=new A3(this.query_)}get query(){return this.query_}}function oj(n,t){const e=Ff(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Jt(t)&&!e.getImmediateChild(vt(t)).isEmpty())?e.getChild(t):null}function _F(n){return 0===n.eventRegistrations_.length}function yF(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function vF(n,t,e,i){t.type===Ma.MERGE&&null!==t.source.queryId&&((0,L.hu)(Ff(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(uT(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function Q3(n,t,e,i,r){const s=new q3;let c,h;if(e.type===Ma.OVERWRITE){const y=e;y.source.fromUser?c=sk(n,t,y.path,y.snap,i,r,s):((0,L.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered()&&!Jt(y.path),c=fT(n,t,y.path,y.snap,i,r,h,s))}else if(e.type===Ma.MERGE){const y=e;y.source.fromUser?c=function X3(n,t,e,i,r,s,c){let h=t;return i.foreach((g,y)=>{const b=Bn(e,g);gF(t,vt(b))&&(h=sk(n,h,b,y,r,s,c))}),i.foreach((g,y)=>{const b=Bn(e,g);gF(t,vt(b))||(h=sk(n,h,b,y,r,s,c))}),h}(n,t,y.path,y.children,i,r,s):((0,L.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered(),c=ok(n,t,y.path,y.children,i,r,h,s))}else if(e.type===Ma.ACK_USER_WRITE){const y=e;c=y.revert?function nj(n,t,e,i,r,s){let c;if(null!=hT(i,e))return t;{const h=new rk(i,t,r),g=t.eventCache.getNode();let y;if(Jt(e)||".priority"===vt(e)){let b;if(t.serverCache.isFullyInitialized())b=dT(i,Ff(t));else{const D=t.serverCache.getNode();(0,L.hu)(D instanceof Xt,"serverChildren would be complete if leaf node"),b=nk(i,D)}y=n.filter.updateFullNode(g,b,s)}else{const b=vt(e);let D=ik(i,b,t.serverCache);null==D&&t.serverCache.isCompleteForChild(b)&&(D=g.getImmediateChild(b)),y=null!=D?n.filter.updateChild(g,b,D,xn(e),h,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(g,b,Xt.EMPTY_NODE,xn(e),h,s):g,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=dT(i,Ff(t)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=hT(i,yt()),cw(t,y,c,n.filter.filtersNodes())}}(n,t,y.path,i,r,s):function ej(n,t,e,i,r,s,c){if(null!=hT(r,e))return t;const h=t.serverCache.isFiltered(),g=t.serverCache;if(null!=i.value){if(Jt(e)&&g.isFullyInitialized()||g.isCompleteForPath(e))return fT(n,t,e,g.getNode().getChild(e),r,s,h,c);if(Jt(e)){let y=new ni(null);return g.getNode().forEachChild(ql,(b,D)=>{y=y.set(new Xe(b),D)}),ok(n,t,e,y,r,s,h,c)}return t}{let y=new ni(null);return i.foreach((b,D)=>{const x=Bn(e,b);g.isCompleteForPath(x)&&(y=y.set(b,g.getNode().getChild(x)))}),ok(n,t,e,y,r,s,h,c)}}(n,t,y.path,y.affectedTree,i,r,s)}else{if(e.type!==Ma.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);c=function tj(n,t,e,i,r){const s=t.serverCache;return pF(n,rF(t,s.getNode(),s.isFullyInitialized()||Jt(e),s.isFiltered()),e,i,fF,r)}(n,t,e.path,i,s)}const g=s.getChanges();return function J3(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=uT(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(eF(uT(t)))}}(t,c,g),{viewCache:c,changes:g}}(n.processor_,r,t,e,i);return function Y3(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,wF(n,s.changes,s.viewCache.eventCache.getNode(),null)}function wF(n,t,e,i){return function x3(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function g3(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),uw(n,r,"child_removed",t,i,e),uw(n,r,"child_added",t,i,e),uw(n,r,"child_moved",s,i,e),uw(n,r,"child_changed",t,i,e),uw(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let pT,mT;class CF{constructor(){this.views=new Map}}function ak(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),vF(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(vF(c,t,e,i));return s}}function IF(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let h=dT(e,r?i:null),g=!1;h?g=!0:i instanceof Xt?(h=nk(e,i),g=!1):(h=Xt.EMPTY_NODE,g=!1);const y=lT(new Bd(h,g,!1),new Bd(i,r,!1));return new ij(t,y)}return c}function bF(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function jd(n,t){let e=null;for(const i of n.views.values())e=e||oj(i,t);return e}function EF(n,t){return t._queryParams.loadsAllData()?gT(n):n.views.get(t._queryIdentifier)}function TF(n,t){return null!=EF(n,t)}function Gd(n){return null!=gT(n)}function gT(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let mj=1;class DF{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ni(null),this.pendingWriteTree_=function W3(){return{visibleWrites:ml.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lk(n,t,e,i,r){return function R3(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=dw(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Am(n,new Pf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function $d(n,t,e=!1){const i=function P3(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function F3(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=e&&L3(h,i.path)?r=!1:xa(i.path,h.path)&&(s=!0)),c--}return!!r&&(s?(function V3(n){n.visibleWrites=lF(n.allWrites,U3,yt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=sF(n.visibleWrites,i.path):Ki(i.children,g=>{n.visibleWrites=sF(n.visibleWrites,Bn(i.path,g))}),!0))}(n.pendingWriteTree_,t)){let s=new ni(null);return null!=i.snap?s=s.set(yt(),!0):Ki(i.children,c=>{s=s.set(new Xe(c),!0)}),Am(n,new aT(i.path,s,e))}return[]}function hw(n,t,e){return Am(n,new Pf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function _T(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let h=[];if(c&&("default"===t._queryIdentifier||TF(c,t))){const g=function fj(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const h=Gd(n);if("default"===r)for(const[g,y]of n.views.entries())c=c.concat(yF(y,e,i)),_F(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||s.push(y.query));else{const g=n.views.get(r);g&&(c=c.concat(yF(g,e,i)),_F(g)&&(n.views.delete(r),g.query._queryParams.loadsAllData()||s.push(g.query)))}return h&&!Gd(n)&&s.push(new(function cj(){return(0,L.hu)(pT,"Reference.ts has not been loaded"),pT}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function dj(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=g.removed;if(h=g.events,!r){const b=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(x,F)=>Gd(F));if(b&&!D){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const F=function bj(n){return n.fold((t,e,i)=>{if(e&&Gd(e))return[gT(e)];{let r=[];return e&&(r=bF(e)),Ki(i,(s,c)=>{r=r.concat(c)}),r}})}(x);for(let G=0;G<F.length;++G){const ne=F[G],te=ne.query,ze=MF(n,ne);n.listenProvider_.startListening(pw(te),fw(n,te),ze.hashFn,ze.onComplete)}}}!D&&y.length>0&&!i&&(b?n.listenProvider_.stopListening(pw(t),null):y.forEach(x=>{const F=n.queryToTagMap.get(vT(x));n.listenProvider_.stopListening(pw(x),F)}))}!function Ej(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=vT(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,y)}return h}function SF(n,t,e,i){const r=ck(n,i);if(null!=r){const s=dk(r),c=s.path,h=s.queryId,g=ar(c,t);return hk(n,c,new Pf(QM(h),g,e))}return[]}function uk(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(x,F)=>{const G=ar(x,r);s=s||jd(F,G),c=c||Gd(F)});let g,h=n.syncPointTree_.get(r);h?(c=c||Gd(h),s=s||jd(h,yt())):(h=new CF,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=s?g=!0:(g=!1,s=Xt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((F,G)=>{const ne=jd(G,yt());ne&&(s=s.updateImmediateChild(F,ne))}));const y=TF(h,t);if(!y&&!t._queryParams.loadsAllData()){const x=vT(t);(0,L.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const F=function Tj(){return mj++}();n.queryToTagMap.set(x,F),n.tagToQueryMap.set(F,x)}let D=function hj(n,t,e,i,r,s){const c=IF(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function aj(n,t){n.eventRegistrations_.push(t)}(c,e),function lj(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ti,(s,c)=>{i.push(Em(s,c))}),e.isFullyInitialized()&&i.push(eF(e.getNode())),wF(n,i,e.getNode(),t)}(c,e)}(h,t,e,cT(n.pendingWriteTree_,r),s,g);if(!y&&!c&&!i){const x=EF(h,t);D=D.concat(function Dj(n,t,e){const i=t._path,r=fw(n,t),s=MF(n,e),c=n.listenProvider_.startListening(pw(t),r,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!Gd(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,b,D)=>{if(!Jt(y)&&b&&Gd(b))return[gT(b).query];{let x=[];return b&&(x=x.concat(bF(b).map(F=>F.query))),Ki(D,(F,G)=>{x=x.concat(G)}),x}});for(let y=0;y<g.length;++y){const b=g[y];n.listenProvider_.stopListening(pw(b),fw(n,b))}}return c}(n,t,x))}return D}function yT(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,h)=>{const y=jd(h,ar(c,t));if(y)return y});return uF(r,t,s,e,!0)}function Am(n,t){return AF(t,n.syncPointTree_,null,cT(n.pendingWriteTree_,yt()))}function AF(n,t,e,i){if(Jt(n.path))return xF(n,t,e,i);{const r=t.get(yt());null==e&&null!=r&&(e=jd(r,yt()));let s=[];const c=vt(n.path),h=n.operationForChild(c),g=t.children.get(c);if(g&&h){const y=e?e.getImmediateChild(c):null,b=dF(i,c);s=s.concat(AF(h,g,y,b))}return r&&(s=s.concat(ak(r,n,i,e))),s}}function xF(n,t,e,i){const r=t.get(yt());null==e&&null!=r&&(e=jd(r,yt()));let s=[];return t.children.inorderTraversal((c,h)=>{const g=e?e.getImmediateChild(c):null,y=dF(i,c),b=n.operationForChild(c);b&&(s=s.concat(xF(b,h,g,y)))}),r&&(s=s.concat(ak(r,n,i,e))),s}function MF(n,t){const e=t.query,i=fw(n,e);return{hashFn:()=>(function rj(n){return n.viewCache_.serverCache.getNode()}(t)||Xt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function wj(n,t,e){const i=ck(n,e);if(i){const r=dk(i),s=r.path,c=r.queryId,h=ar(s,t);return hk(n,s,new lw(QM(c),h))}return[]}(n,e._path,i):function vj(n,t){return Am(n,new lw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function kP(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return _T(n,e,null,s)}}}}function fw(n,t){const e=vT(t);return n.queryToTagMap.get(e)}function vT(n){return n._path.toString()+"$"+n._queryIdentifier}function ck(n,t){return n.tagToQueryMap.get(t)}function dk(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Xe(n.substr(0,t))}}function hk(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),ak(i,e,cT(n.pendingWriteTree_,t),null)}function pw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function gj(){return(0,L.hu)(mT,"Reference.ts has not been loaded"),mT}())(n._repo,n._path):n}class fk{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new fk(e)}node(){return this.node_}}class pk{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Bn(this.path_,t);return new pk(this.syncTree_,e)}node(){return yT(this.syncTree_,this.path_)}}const kF=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Aj(n[".sv"],t,e):"object"==typeof n[".sv"]?xj(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Aj=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},xj=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},OF=function(n,t,e,i){return mk(t,new pk(e,n),i)},gk=function(n,t,e){return mk(n,new fk(t),e)};function mk(n,t,e){const i=n.getPriority().val(),r=kF(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,h=kF(c.getValue(),t,e);return h!==c.getValue()||r!==c.getPriority().val()?new Cm(h,wi(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new Cm(r))),c.forEachChild(ti,(h,g)=>{const y=mk(g,t.getImmediateChild(h),e);y!==g&&(s=s.updateImmediateChild(h,y))}),s}}class _k{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function wT(n,t){let e=t instanceof Xe?t:new Xe(t),i=n,r=vt(e);for(;null!==r;){const s=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new _k(r,i,s),e=xn(e),r=vt(e)}return i}function Vf(n){return n.node.value}function yk(n,t){n.node.value=t,vk(n)}function RF(n){return n.node.childCount>0}function CT(n,t){Ki(n.node.children,(e,i)=>{t(new _k(e,n,i))})}function NF(n,t,e,i){e&&!i&&t(n),CT(n,r=>{NF(r,t,!0,i)}),e&&i&&t(n)}function gw(n){return new Xe(null===n.parent?n.name:gw(n.parent)+"/"+n.name)}function vk(n){null!==n.parent&&function Oj(n,t,e){const i=function Mj(n){return void 0===Vf(n)&&!RF(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,vk(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,vk(n))}(n.parent,n.name,n)}const Rj=/[\[\].#$\/\u0000-\u001F\u007F]/,Nj=/[\[\].#$\u0000-\u001F\u007F]/,wk=10485760,IT=function(n){return"string"==typeof n&&0!==n.length&&!Rj.test(n)},PF=function(n){return"string"==typeof n&&0!==n.length&&!Nj.test(n)},mw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Af(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Zl=function(n,t,e,i){i&&void 0===t||_w((0,L.gK)(n,"value"),t,e)},_w=function(n,t,e){const i=e instanceof Xe?new YH(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Rf(i));if("function"==typeof t)throw new Error(n+"contains a function "+Rf(i)+" with contents = "+t.toString());if(Af(t))throw new Error(n+"contains "+t.toString()+" "+Rf(i));if("string"==typeof t&&t.length>wk/3&&(0,L.ug)(t)>wk)throw new Error(n+"contains a string greater than "+wk+" utf8 bytes "+Rf(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(Ki(t,(c,h)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!IT(c)))throw new Error(n+" contains an invalid key ("+c+") "+Rf(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function QH(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),HP(n)})(i,c),_w(n,h,i),function JH(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Rf(i)+" in addition to actual children.")}},FF=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Ki(t,(c,h)=>{const g=new Xe(c);if(_w(r,h,Bn(e,g)),".priority"===Of(g)&&!mw(h))throw new Error(r+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=Ku(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!IT(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(tw);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&xa(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},Ck=function(n,t,e){if(!e||void 0!==t){if(Af(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mw(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yw=function(n,t,e,i){if(!(i&&void 0===e||IT(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vw=function(n,t,e,i){if(!(i&&void 0===e||PF(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ka=function(n,t){if(".info"===vt(t))throw new Error(n+" failed = Can't modify data under /.info/")},LF=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!IT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),PF(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Vj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bT(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!FM(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function VF(n,t,e){bT(n,e),UF(n,i=>FM(i,t))}function ko(n,t,e){bT(n,e),UF(n,i=>xa(i,t)||xa(t,i))}function UF(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(Uj(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Uj(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Fd&&Pi("event: "+e.toString()),pl(i)}}}const BF="repo_interrupt";class Hj{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oT(),this.transactionQueueTree_=new _k,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HF(n){const e=n.infoData_.getNode(new Xe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ww(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:HF(n)})}function jF(n,t,e,i,r){n.dataUpdateCount++;const s=new Xe(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const g=(0,L.UI)(e,y=>wi(y));c=function Cj(n,t,e,i){const r=ck(n,i);if(r){const s=dk(r),c=s.path,h=s.queryId,g=ar(c,t),y=ni.fromObject(e);return hk(n,c,new Dm(QM(h),g,y))}return[]}(n.serverSyncTree_,s,g,r)}else{const g=wi(e);c=SF(n.serverSyncTree_,s,g,r)}else if(i){const g=(0,L.UI)(e,y=>wi(y));c=function yj(n,t,e){const i=ni.fromObject(e);return Am(n,new Dm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,g)}else{const g=wi(e);c=hw(n.serverSyncTree_,s,g)}let h=s;c.length>0&&(h=Mm(n,s)),ko(n.eventQueue_,h,c)}function GF(n,t){Ik(n,"connected",t),!1===t&&function zj(n){xm(n,"onDisconnectEvents");const t=ww(n),e=oT();ZM(n.onDisconnect_,yt(),(r,s)=>{const c=OF(r,s,n.serverSyncTree_,t);Tm(e,r,c)});let i=[];ZM(e,yt(),(r,s)=>{i=i.concat(hw(n.serverSyncTree_,r,s));const c=Dk(n,r);Mm(n,c)}),n.onDisconnect_=oT(),ko(n.eventQueue_,yt(),i)}(n)}function Ik(n,t,e){const i=new Xe("/.info/"+t),r=wi(e);n.infoData_.updateSnapshot(i,r);const s=hw(n.infoSyncTree_,i,r);ko(n.eventQueue_,i,s)}function ET(n){return n.nextWriteId_++}function bk(n,t,e,i,r){xm(n,"set",{path:t.toString(),value:e,priority:i});const s=ww(n),c=wi(e,i),h=yT(n.serverSyncTree_,t),g=gk(c,h,s),y=ET(n),b=lk(n.serverSyncTree_,t,g,y,!0);bT(n.eventQueue_,b),n.server_.put(t.toString(),c.val(!0),(x,F)=>{const G="ok"===x;G||Fi("set at "+t+" failed: "+x);const ne=$d(n.serverSyncTree_,y,!G);ko(n.eventQueue_,t,ne),Wd(0,r,x,F)});const D=Dk(n,t);Mm(n,D),ko(n.eventQueue_,D,[])}function qj(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&qM(n.onDisconnect_,t),Wd(0,e,i,r)})}function $F(n,t,e,i){const r=wi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&Tm(n.onDisconnect_,t,r),Wd(0,i,s,c)})}function Ek(n,t,e){let i;i=".info"===vt(t._path)?_T(n.infoSyncTree_,t,e):_T(n.serverSyncTree_,t,e),VF(n.eventQueue_,t._path,i)}function WF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(BF)}function xm(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Pi(e,...t)}function Wd(n,t,e,i){t&&pl(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function Tk(n,t,e){return yT(n.serverSyncTree_,t,e)||Xt.EMPTY_NODE}function TT(n,t=n.transactionQueueTree_){if(t||DT(n,t),Vf(t)){const e=qF(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function Xj(n,t,e){const i=e.map(y=>y.currentWriteId),r=Tk(n,t,i);let s=r;const c=r.hash();for(let y=0;y<e.length;y++){const b=e[y];(0,L.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const D=ar(t,b.path);s=s.updateChild(D,b.currentOutputSnapshotRaw)}const h=s.val(!0),g=t;n.server_.put(g.toString(),h,y=>{xm(n,"transaction put response",{path:g.toString(),status:y});let b=[];if("ok"===y){const D=[];for(let x=0;x<e.length;x++)e[x].status=2,b=b.concat($d(n.serverSyncTree_,e[x].currentWriteId)),e[x].onComplete&&D.push(()=>e[x].onComplete(null,!0,e[x].currentOutputSnapshotResolved)),e[x].unwatcher();DT(n,wT(n.transactionQueueTree_,t)),TT(n,n.transactionQueueTree_),ko(n.eventQueue_,t,b);for(let x=0;x<D.length;x++)pl(D[x])}else{if("datastale"===y)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{Fi("transaction at "+g.toString()+" failed: "+y);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=y}Mm(n,t)}},c)}(n,gw(t),e)}else RF(t)&&CT(t,e=>{TT(n,e)})}function Mm(n,t){const e=zF(n,t),i=gw(e);return function eG(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const g=t[h],y=ar(e,g.path);let D,b=!1;if((0,L.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)b=!0,D=g.abortReason,r=r.concat($d(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)b=!0,D="maxretry",r=r.concat($d(n.serverSyncTree_,g.currentWriteId,!0));else{const x=Tk(n,g.path,c);g.currentInputSnapshot=x;const F=t[h].update(x.val());if(void 0!==F){_w("transaction failed: Data returned ",F,g.path);let G=wi(F);"object"==typeof F&&null!=F&&(0,L.r3)(F,".priority")||(G=G.updatePriority(x.getPriority()));const te=g.currentWriteId,ze=ww(n),Ke=gk(G,x,ze);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=Ke,g.currentWriteId=ET(n),c.splice(c.indexOf(te),1),r=r.concat(lk(n.serverSyncTree_,g.path,Ke,g.currentWriteId,g.applyLocally)),r=r.concat($d(n.serverSyncTree_,te,!0))}else b=!0,D="nodata",r=r.concat($d(n.serverSyncTree_,g.currentWriteId,!0))}ko(n.eventQueue_,e,r),r=[],b&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&i.push("nodata"===D?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(D),!1,null)))}DT(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)pl(i[h]);TT(n,n.transactionQueueTree_)}(n,qF(n,e),i),i}function zF(n,t){let e,i=n.transactionQueueTree_;for(e=vt(t);null!==e&&void 0===Vf(i);)i=wT(i,e),e=vt(t=xn(t));return i}function qF(n,t){const e=[];return ZF(n,t,e),e.sort((i,r)=>i.order-r.order),e}function ZF(n,t,e){const i=Vf(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);CT(t,r=>{ZF(n,r,e)})}function DT(n,t){const e=Vf(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,yk(t,e.length>0?e:void 0)}CT(t,i=>{DT(n,i)})}function Dk(n,t){const e=gw(zF(n,t)),i=wT(n.transactionQueueTree_,t);return function kj(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{Sk(n,r)}),Sk(n,i),NF(i,r=>{Sk(n,r)}),e}function Sk(n,t){const e=Vf(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,L.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,L.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat($d(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?yk(t,void 0):e.length=s+1,ko(n.eventQueue_,gw(t),r);for(let c=0;c<i.length;c++)pl(i[c])}}const Ak=function(n,t){const e=iG(n),i=e.namespace;return"firebase.com"===e.domain&&xo(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&xo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Yv(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Xe(e.pathString)}},iG=function(n){let t="",e="",i="",r="",s="",c=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(b,D)),b<D&&(r=function tG(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(b,D)));const x=function nG(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Fi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));y=t.indexOf(":"),y>=0?(c="https"===h||"wss"===h,g=parseInt(t.substring(y+1),10)):y=t.length;const F=t.slice(0,y);if("localhost"===F.toLowerCase())e="localhost";else if(F.split(".").length<=2)e=F;else{const G=t.indexOf(".");i=t.substring(0,G).toLowerCase(),e=t.substring(G+1),s=i}"ns"in x&&(s=x.ns)}return{host:t,port:g,domain:e,subdomain:i,secure:c,scheme:h,pathString:r,namespace:s}};class KF{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class YF{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xk{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class QF{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return qj(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ka("OnDisconnect.remove",this._path);const t=new L.BH;return $F(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ka("OnDisconnect.set",this._path),Zl("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return $F(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){ka("OnDisconnect.setWithPriority",this._path),Zl("OnDisconnect.setWithPriority",t,this._path,!1),Ck("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function Zj(n,t,e,i,r){const s=wi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,h)=>{"ok"===c&&Tm(n.onDisconnect_,t,s),Wd(0,r,c,h)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){ka("OnDisconnect.update",this._path),FF("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function Kj(n,t,e,i){if((0,L.xb)(e))return Pi("onDisconnect().update() called with empty data.  Don't do anything."),void Wd(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&Ki(e,(c,h)=>{const g=wi(h);Tm(n.onDisconnect_,Bn(t,c),g)}),Wd(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Ks{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return Jt(this._path)?null:Of(this._path)}get ref(){return new Oa(this._repo,this._path)}get _queryIdentifier(){const t=nF(this._queryParams),e=jE(t);return"{}"===e?"default":e}get _queryObject(){return nF(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Ks))return!1;const e=this._repo===t._repo,i=FM(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ew(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function ST(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function zd(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===ql){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Aa)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Mo)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===ti){if(null!=t&&!mw(t)||null!=e&&!mw(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof HM||n.getIndex()===jM,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function AT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Oa extends Ks{constructor(t,e){super(t,e,new iT,!1)}get parent(){const t=wm(this._path);return null===t?null:new Oa(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Uf{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Xe(t),i=Bf(this.ref,t);return new Uf(this._node.getChild(e),i,ti)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Uf(r,Bf(this.ref,i),ti)))}hasChild(t){const e=new Xe(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function JF(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?Bf(n._root,t):n._root}function XF(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=Ak(t,n._repo.repoInfo_.nodeAdmin);LF("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&xo("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),JF(n,e.path.toString())}function Bf(n,t){return null===vt((n=(0,L.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),vw("child","path",e,!1)):vw("child","path",t,!1),new Oa(n._repo,Bn(n._path,t));var e}function Mk(n,t){n=(0,L.m9)(n),ka("set",n._path),Zl("set",t,n._path,!1);const e=new L.BH;return bk(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function lG(n,t){FF("update",t,n._path,!1);const e=new L.BH;return function Wj(n,t,e,i){xm(n,"update",{path:t.toString(),value:e});let r=!0;const s=ww(n),c={};if(Ki(e,(h,g)=>{r=!1,c[h]=OF(Bn(t,h),wi(g),n.serverSyncTree_,s)}),r)Pi("update() called with empty data.  Don't do anything."),Wd(0,i,"ok",void 0);else{const h=ET(n),g=function _j(n,t,e,i){!function N3(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=XM(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ni.fromObject(e);return Am(n,new Dm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,h);bT(n.eventQueue_,g),n.server_.merge(t.toString(),e,(y,b)=>{const D="ok"===y;D||Fi("update at "+t+" failed: "+y);const x=$d(n.serverSyncTree_,h,!D),F=x.length>0?Mm(n,t):t;ko(n.eventQueue_,F,x),Wd(0,i,y,b)}),Ki(e,y=>{const b=Dk(n,Bn(t,y));Mm(n,b)}),ko(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function uG(n){n=(0,L.m9)(n);const t=new xk(()=>{}),e=new Cw(t);return function $j(n,t,e){const i=function Ij(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,b)=>{const D=ar(y,e);i=i||jd(b,D)});let r=n.syncPointTree_.get(e);r?i=i||jd(r,yt()):(r=new CF,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new Bd(i,!0,!1):null;return function sj(n){return uT(n.viewCache_)}(IF(r,t,cT(n.pendingWriteTree_,t._path),s?c.getNode():Xt.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=wi(r).withIndex(t._queryParams.getIndex());let c;if(uk(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=hw(n.serverSyncTree_,t._path,s);else{const h=fw(n.serverSyncTree_,t);c=SF(n.serverSyncTree_,t._path,s,h)}return ko(n.eventQueue_,t._path,c),_T(n.serverSyncTree_,t,e,null,!0),s},r=>(xm(n,"get for query "+(0,L.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Uf(i,new Oa(n._repo,n._path),n._queryParams.getIndex()))}class Cw{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new KF("value",this,new Uf(t.snapshotNode,new Oa(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new YF(this,t,e):null}matches(t){return t instanceof Cw&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xT{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new YF(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=Bf(new Oa(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new KF(t.type,this,new Uf(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof xT&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Iw(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const g=e,y=(b,D)=>{Ek(n._repo,n,h),g(b,D)};y.userCallback=e.userCallback,y.context=e.context,e=y}const c=new xk(e,s||void 0),h="value"===t?new Cw(c):new xT(t,c);return function Yj(n,t,e){let i;i=".info"===vt(t._path)?uk(n.infoSyncTree_,t,e):uk(n.serverSyncTree_,t,e),VF(n.eventQueue_,t._path,i)}(n._repo,n,h),()=>Ek(n._repo,n,h)}function kk(n,t,e,i){return Iw(n,"value",t,e,i)}function eL(n,t,e,i){return Iw(n,"child_added",t,e,i)}function tL(n,t,e,i){return Iw(n,"child_changed",t,e,i)}function nL(n,t,e,i){return Iw(n,"child_moved",t,e,i)}function iL(n,t,e,i){return Iw(n,"child_removed",t,e,i)}function rL(n,t,e){let i=null;const r=e?new xk(e):null;"value"===t?i=new Cw(r):t&&(i=new xT(t,r)),Ek(n._repo,n,i)}class _l{}class sL extends _l{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Zl("endAt",this._value,t._path,!0);const e=zM(t._queryParams,this._value,this._key);if(AT(e),zd(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class dG extends _l{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Zl("endBefore",this._value,t._path,!1);const e=function C3(n,t,e){let i,r;return n.index_===ql?("string"==typeof t&&(t=XP(t)),r=zM(n,t,e)):(i=null==e?Aa:XP(e),r=zM(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(AT(e),zd(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class oL extends _l{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Zl("startAt",this._value,t._path,!0);const e=WM(t._queryParams,this._value,this._key);if(AT(e),zd(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class pG extends _l{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Zl("startAfter",this._value,t._path,!1);const e=function w3(n,t,e){let i;if(n.index_===ql)"string"==typeof t&&(t=JP(t)),i=WM(n,t,e);else{let r;r=null==e?Mo:JP(e),i=WM(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(AT(e),zd(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ks(t._repo,t._path,e,t._orderByCalled)}}class mG extends _l{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ks(t._repo,t._path,function y3(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class yG extends _l{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ks(t._repo,t._path,function v3(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class wG extends _l{constructor(t){super(),this._path=t}_apply(t){ST(t,"orderByChild");const e=new Xe(this._path);if(Jt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new HM(e),r=rT(t._queryParams,i);return zd(r),new Ks(t._repo,t._path,r,!0)}}class IG extends _l{_apply(t){ST(t,"orderByKey");const e=rT(t._queryParams,ql);return zd(e),new Ks(t._repo,t._path,e,!0)}}class EG extends _l{_apply(t){ST(t,"orderByPriority");const e=rT(t._queryParams,ti);return zd(e),new Ks(t._repo,t._path,e,!0)}}class DG extends _l{_apply(t){ST(t,"orderByValue");const e=rT(t._queryParams,jM);return zd(e),new Ks(t._repo,t._path,e,!0)}}class AG extends _l{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Zl("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sL(this._value,this._key)._apply(new oL(this._value,this._key)._apply(t))}}function yl(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function uj(n){(0,L.hu)(!pT,"__referenceConstructor has already been defined"),pT=n})(Oa),function pj(n){(0,L.hu)(!mT,"__referenceConstructor has already been defined"),mT=n}(Oa);const Ok={};function lL(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||xo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,c=Ak(s,r),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,s=`http://${y}?ns=${h.namespace}`,c=Ak(s,r),h=c.repoInfo):g=!c.repoInfo.secure;const b=r&&g?new Vd(Vd.OWNER):new Zu(n.name,n.options,t);LF("Invalid Firebase Database URL",c),Jt(c.path)||xo("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function RG(n,t,e,i){let r=Ok[t.name];r||(r={},Ok[t.name]=r);let s=r[n.toURLString()];return s&&xo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Hj(n,false,e,i),r[n.toURLString()]=s,s}(h,n,b,new WE(n.name,e));return new PG(D,n)}class PG{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function jj(n,t,e){if(n.stats_=ym(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sT(n.repoInfo_,(i,r,s,c)=>{jF(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>GF(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Nf(n.repoInfo_,t,(i,r,s,c)=>{jF(n,i,r,s,c)},i=>{GF(n,i)},i=>{!function Gj(n,t){Ki(t,(e,i)=>{Ik(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function AM(n,t){const e=n.toString();return _m[e]||(_m[e]=t()),_m[e]}(n.repoInfo_,()=>new S3(n.stats_,n.server_)),n.infoData_=new I3,n.infoSyncTree_=new DF({startListening:(i,r,s,c)=>{let h=[];const g=n.infoData_.getNode(i._path);return g.isEmpty()||(h=hw(n.infoSyncTree_,i._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Ik(n,"connected",!1),n.serverSyncTree_=new DF({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(h,g)=>{const y=c(h,g);ko(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,yt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function OG(n,t){const e=Ok[t];(!e||e[n.key]!==n)&&xo(`Database ${t}(${n.repoInfo_}) has already been deleted.`),WF(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&xo("Cannot call "+t+" on a deleted database.")}}function uL(){PM.IS_TRANSPORT_INITIALIZED&&Fi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function FG(){uL(),zl.forceDisallow()}function LG(){uL(),kf.forceDisallow(),zl.forceAllow()}function BG(n,t){qv(n,t)}const jG={".sv":"timestamp"};class WG{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Nf.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Nf.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function HG(n){gM(kr.SDK_VERSION),(0,kr._registerComponent)(new ba.wA("database",(t,{instanceIdentifier:e})=>lL(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,kr.registerVersion)(om,Sa,n),(0,kr.registerVersion)(om,Sa,"esm2017")}();const KG=new Eo.Yd("@firebase/database-compat"),dL=function(n){KG.warn("FIREBASE WARNING: "+n)};class JG{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,dL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class XG{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class qd{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),vw("DataSnapshot.child","path",t,!1),new qd(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),vw("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new qd(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Oo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Pr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const c=Pr.getCancelAndContextArgs_("Query.on",i,r),h=(y,b)=>{e.call(c.context,new qd(this.database,y),b)};h.userCallback=e,h.context=c.context;const g=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return kk(this._delegate,h,g),e;case"child_added":return eL(this._delegate,h,g),e;case"child_removed":return iL(this._delegate,h,g),e;case"child_changed":return tL(this._delegate,h,g),e;case"child_moved":return nL(this._delegate,h,g),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,rL(this._delegate,t,r)}else rL(this._delegate,t)}get(){return uG(this._delegate).then(t=>new qd(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const s=Pr.getCancelAndContextArgs_("Query.once",i,r),c=new L.BH,h=(y,b)=>{const D=new qd(this.database,y);e&&e.call(s.context,D,b),c.resolve(D)};h.userCallback=e,h.context=s.context;const g=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(t){case"value":kk(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":eL(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":iL(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":tL(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":nL(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Pr(this.database,yl(this._delegate,function _G(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new mG(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Pr(this.database,yl(this._delegate,function vG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yG(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Pr(this.database,yl(this._delegate,function CG(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vw("orderByChild","path",n,!1),new wG(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Pr(this.database,yl(this._delegate,function bG(){return new IG}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Pr(this.database,yl(this._delegate,function TG(){return new EG}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Pr(this.database,yl(this._delegate,function SG(){return new DG}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Pr(this.database,yl(this._delegate,function fG(n=null,t){return yw("startAt","key",t,!0),new oL(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Pr(this.database,yl(this._delegate,function gG(n,t){return yw("startAfter","key",t,!0),new pG(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Pr(this.database,yl(this._delegate,function cG(n,t){return yw("endAt","key",t,!0),new sL(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Pr(this.database,yl(this._delegate,function hG(n,t){return yw("endBefore","key",t,!0),new dG(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Pr(this.database,yl(this._delegate,function xG(n,t){return yw("equalTo","key",t,!0),new AG(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Pr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Oo(this.database,new Oa(this._delegate._repo,this._delegate._path))}}class Oo extends Pr{constructor(t,e){super(t,new Ks(e._repo,e._path,new iT,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Oo(this.database,Bf(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Oo(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Oo(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=Mk(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,dL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ka("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=lG(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function aG(n,t,e){if(ka("setWithPriority",n._path),Zl("setWithPriority",t,n._path,!1),Ck("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return bk(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function sG(n){return ka("remove",n._path),Mk(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function zG(n,t,e){var i;if(n=(0,L.m9)(n),ka("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new L.BH,h=kk(n,()=>{});return function Jj(n,t,e,i,r,s){xm(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:zv(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Tk(n,t,void 0);c.currentInputSnapshot=h;const g=c.update(h.val());if(void 0===g)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{_w("transaction failed: Data returned ",g,c.path),c.status=0;const y=wT(n.transactionQueueTree_,t),b=Vf(y)||[];let D;b.push(c),yk(y,b),"object"==typeof g&&null!==g&&(0,L.r3)(g,".priority")?(D=(0,L.DV)(g,".priority"),(0,L.hu)(mw(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(yT(n.serverSyncTree_,t)||Xt.EMPTY_NODE).getPriority().val();const x=ww(n),F=wi(g,D),G=gk(F,h,x);c.currentOutputSnapshotRaw=F,c.currentOutputSnapshotResolved=G,c.currentWriteId=ET(n);const ne=lk(n.serverSyncTree_,t,G,c.currentWriteId,c.applyLocally);ko(n.eventQueue_,t,ne),TT(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(g,y,b)=>{let D=null;g?s.reject(g):(D=new Uf(b,new Oa(n._repo,n._path),ti),s.resolve(new WG(y,D)))},h,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new XG(s.committed,new qd(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function oG(n,t){n=(0,L.m9)(n),ka("setPriority",n._path),Ck("setPriority",t,!1);const e=new L.BH;return bk(n._repo,Bn(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function rG(n,t){n=(0,L.m9)(n),ka("push",n._path),Zl("push",t,n._path,!0);const e=HF(n._repo),i=p3(e),r=Bf(n,i),s=Bf(n,i);let c;return c=null!=t?Mk(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new Oo(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new Oo(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return ka("Reference.onDisconnect",this._delegate._path),new JG(new QF(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class bw{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:FG,forceLongPolling:LG}}useEmulator(t,e,i={}){!function cL(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&xo("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&xo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vd(Vd.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);s=new Vd(c)}!function kG(n,t,e,i){n.repoInfo_=new Yv(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof Oo){const e=XF(this._delegate,t.toString());return new Oo(this,e)}{const e=JF(this._delegate,t);return new Oo(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=XF(this._delegate,t);return new Oo(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function VG(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),WF(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function UG(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function Qj(n){n.persistentConnection_&&n.persistentConnection_.resume(BF)}(n._repo)}(this._delegate)}}bw.ServerValue={TIMESTAMP:function GG(){return jG}(),increment:n=>function $G(n){return{".sv":{increment:n}}}(n)};var t$=Object.freeze({__proto__:null,initStandalone:function e$({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){gM(e);const c=new ba.zt("auth-internal",new ba.H0("database-standalone"));return c.setComponent(new ba.wA("auth-internal",()=>i,"PRIVATE")),{instance:new bw(lL(n,c,void 0,t,s),n),namespace:r}}});const n$=bw.ServerValue;function hL(n){return null==n}function fL(n){return"function"==typeof n.set}function pL(n,t){return fL(t)?t:n.ref(t)}function gL(n,t){if(function r$(n){return"string"==typeof n}(n))return t.stringCase();if(fL(n))return t.firebaseCase();if(function s$(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Ew(n,t,e="on",i=rm.z){return new _i.y(r=>{let s=null;return s=n[e](t,(c,h)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:h})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,dt.U)(r=>{const{snapshot:s,prevKey:c}=r;let h=null;return s.exists()&&(h=s.key),{type:t,payload:s,prevKey:c,key:h}}),(0,cg.B)())}function mL(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function l$(n,t){const{payload:e,prevKey:i,key:r}=t,s=mL(n,r),c=function a$(n,t){if(hL(t))return 0;{const e=mL(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==i&&(n=n.filter(g=>g.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===r?t:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function _L(n){return(hL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function yL(n,t,e){return function o$(n,t,e){return Ew(n,"value","once",e).pipe(qn(i=>{const r=[ht(i)];return t.forEach(s=>r.push(Ew(n,s,"on",e))),(0,ug.T)(...r).pipe(Ft(l$,[]))}),Gv())}(n,t=_L(t),e)}function vL(n,t,e){const i=(t=_L(t)).map(r=>Ew(n,r,"on",e));return(0,ug.T)(...i)}function wL(n,t){return function(i,r){return gL(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function h$(n){return function(e){return e?gL(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function CL(n,t){return function(){return Ew(n,"value","on",t)}}!function i$(n){n.INTERNAL.registerComponent(new ba.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new bw(r,i)},"PUBLIC").setServiceProps({Reference:Oo,Query:Pr,Database:bw,DataSnapshot:qd,enableLogging:BG,INTERNAL:t$,ServerValue:n$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(sm.Z);const g$=new l.OlP("angularfire2.realtimeDatabaseURL"),m$=new l.OlP("angularfire2.database.use-emulator");let _$=(()=>{class n{constructor(e,i,r,s,c,h,g,y,b,D,x,F,G,ne,te){this.schedulers=h;const ze=g,Ke=(0,Zi.on)(e,c,i);y&&df(Ke,c,b,x,F,G,D,ne),this.database=(0,Zi.cc)(`${Ke.name}.database.${r}`,"AngularFireDatabase",Ke.name,()=>{const qe=c.runOutsideAngular(()=>Ke.database(r||void 0));return ze&&qe.useEmulator(...ze),qe},[ze])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>pL(this.database,e));let s=r;return i&&(s=i(r)),function f$(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:wL(i,"update"),set:wL(i,"set"),push:r=>i.push(r),remove:h$(i),snapshotChanges:r=>yL(n,r,e).pipe(wn.iC),stateChanges:r=>vL(n,r,e).pipe(wn.iC),auditTrail:r=>function u$(n,t,e){return function d$(n,t,e){return function c$(n,t){return Ew(n,"value","on",t).pipe((0,dt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function pM(...n){const t=(0,Kr.jO)(n);return(0,ei.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),h=!1;for(let g=0;g<r;g++)(0,ir.Xf)(n[g]).subscribe((0,Ln.x)(i,y=>{s[g]=y,!h&&!c[g]&&(c[g]=!0,(h=c.every(mo.y))&&(c=null))},UE.Z));e.subscribe((0,Ln.x)(i,g=>{if(h){const y=[g,...s];i.next(t?t(...y):y)}}))})}(t),(0,dt.U)(([r,s])=>{const c=r.lastKeyToLoad,h=s.map(g=>g.key);return{actions:s,lastKeyToLoad:c,loadedKeys:h}}),function $v(n){return(0,ei.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Ln.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,dt.U)(r=>r.actions))}(n,vL(n,t).pipe(Ft((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(wn.iC),valueChanges:(r,s)=>yL(n,r,e).pipe((0,dt.U)(h=>h.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),wn.iC)}}(s,this)}object(e){return function p$(n,t){return{query:n,snapshotChanges:()=>CL(n,t.schedulers.outsideAngular)().pipe(wn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>CL(n,t.schedulers.outsideAngular)().pipe(wn.iC,(0,dt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>pL(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Zi.Dh),l.LFG(Zi.xv,8),l.LFG(g$,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(m$,8),l.LFG(Dg,8),l.LFG(Ey,8),l.LFG(Ty,8),l.LFG(od,8),l.LFG(cf,8),l.LFG(ad,8),l.LFG(sI,8),l.LFG(sd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),y$=(()=>{class n{constructor(){Tg.Z.registerVersion("angularfire",wn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[_$]}),n})();const IL="firebasestorage.googleapis.com",bL="storageBucket";class Ci extends L.ZR{constructor(t,e,i=0){super(Rk(t),`Firebase Storage: ${e} (${Rk(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ci.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Rk(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Rk(n){return"storage/"+n}function Nk(){return new Ci("unknown","An unknown error occurred, please check the error payload for server response.")}function EL(){return new Ci("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function TL(){return new Ci("canceled","User canceled the upload/download.")}function DL(){return new Ci("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function km(n){return new Ci("invalid-argument",n)}function SL(){return new Ci("app-deleted","The Firebase app was deleted.")}function AL(n){return new Ci("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tw(n,t){return new Ci("invalid-format","String does not match format '"+n+"': "+t)}function Dw(n){throw new Ci("internal-error","Internal error: "+n)}class ts{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=ts.makeFromUrl(t,e)}catch{return new ts(t,"")}if(""===i.path)return i;throw function x$(n){return new Ci("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Je){Je.path_=decodeURIComponent(Je.path)}const D=e.replace(/[.]/g,"\\."),qe=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Je){"/"===Je.path.charAt(Je.path.length-1)&&(Je.path_=Je.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===IL?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Je=0;Je<qe.length;Je++){const gt=qe[Je],xt=gt.regex.exec(t);if(xt){let Ui=xt[gt.indices.path];Ui||(Ui=""),i=new ts(xt[gt.indices.bucket],Ui),gt.postModify(i);break}}if(null==i)throw function A$(n){return new Ci("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class N${constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function MT(n){return"string"==typeof n||n instanceof String}function xL(n){return Pk()&&n instanceof Blob}function Pk(){return typeof Blob<"u"&&!(0,L.UG)()}function Fk(n,t,e,i){if(i<t)throw km(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw km(`Invalid value for '${n}'. Expected ${e} or less.`)}function Qu(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function ML(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Zd=(()=>{return(n=Zd||(Zd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Zd;var n})();function kL(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class B${constructor(t,e,i,r,s,c,h,g,y,b,D,x=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=D,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,G)=>{this.resolve_=F,this.reject_=G,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function L$(n){return void 0!==n}(g)?s():s(g)}catch(g){c(g)}else if(null!==h){const g=Nk();g.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,g):g)}else c(r.canceled?this.appDelete_?SL():TL():EL())};this.canceled_?e(0,new kT(!1,null,!0)):this.backoffId_=function P$(n,t,e){let i=1,r=null,s=null,c=!1,h=0;function g(){return 2===h}let y=!1;function b(...te){y||(y=!0,t.apply(null,te))}function D(te){r=setTimeout(()=>{r=null,n(F,g())},te)}function x(){s&&clearTimeout(s)}function F(te,...ze){if(y)return void x();if(te)return x(),void b.call(null,te,...ze);if(g()||c)return x(),void b.call(null,te,...ze);let qe;i<64&&(i*=2),1===h?(h=2,qe=0):qe=1e3*(i+Math.random()),D(qe)}let G=!1;function ne(te){G||(G=!0,x(),!y&&(null!==r?(te||(h=2),clearTimeout(r),D(0)):te||(h=1)))}return D(0),s=setTimeout(()=>{c=!0,ne(!0)},e),ne}((i,r)=>{if(r)return void i(!1,new kT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const h=s.getErrorCode()===Zd.NO_ERROR,g=s.getStatus();if((!h||kL(g,this.additionalRetryCodes_))&&this.retry){const b=s.getErrorCode()===Zd.ABORT;return void i(!1,new kT(!1,null,b))}const y=-1!==this.successCodes_.indexOf(g);i(!0,new kT(y,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function F$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class kT{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function q$(...n){const t=function z$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(Pk())return new Blob(n);throw new Ci("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lk{constructor(t,e){this.data=t,this.contentType=e||null}}function Vk(n,t){switch(n){case Ro.RAW:return new Lk(OL(t));case Ro.BASE64:case Ro.BASE64URL:return new Lk(RL(n,t));case Ro.DATA_URL:return new Lk(function Q$(n){const t=new NL(n);return t.base64?RL(Ro.BASE64,t.rest):function Y$(n){let t;try{t=decodeURIComponent(n)}catch{throw Tw(Ro.DATA_URL,"Malformed data URL.")}return OL(t)}(t.rest)}(t),function J$(n){return new NL(n).contentType}(t))}throw Nk()}function OL(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function RL(n,t){switch(n){case Ro.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw Tw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ro.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw Tw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function K$(n){if(typeof atob>"u")throw function R$(n){return new Ci("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:Tw(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class NL{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Tw(Ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function X$(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Kl{constructor(t,e){let i=0,r="";xL(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(xL(this.data_)){const r=function Z$(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Kl(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Kl(i,!0)}}static getBlob(...t){if(Pk()){const e=t.map(i=>i instanceof Kl?i.data_:i);return new Kl(q$.apply(null,e))}{const e=t.map(c=>MT(c)?Vk(Ro.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let h=0;h<c.length;h++)r[s++]=c[h]}),new Kl(r,!0)}}uploadData(){return this.data_}}function Uk(n){let t;try{t=JSON.parse(n)}catch{return null}return function U$(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function PL(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function n6(n,t){return t}class Cs{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||n6}}let OT=null;function Sw(){if(OT)return OT;const n=[];n.push(new Cs("bucket")),n.push(new Cs("generation")),n.push(new Cs("metageneration")),n.push(new Cs("name","fullPath",!0));const e=new Cs("name");e.xform=function t(s,c){return function i6(n){return!MT(n)||n.length<2?n:PL(n)}(c)},n.push(e);const r=new Cs("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new Cs("timeCreated")),n.push(new Cs("updated")),n.push(new Cs("md5Hash",null,!0)),n.push(new Cs("cacheControl",null,!0)),n.push(new Cs("contentDisposition",null,!0)),n.push(new Cs("contentEncoding",null,!0)),n.push(new Cs("contentLanguage",null,!0)),n.push(new Cs("contentType",null,!0)),n.push(new Cs("metadata","customMetadata",!0)),OT=n,OT}function FL(n,t,e){const i=Uk(t);return null===i?null:function s6(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function r6(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new ts(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function Bk(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const LL="prefixes";class Yl{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ql(n){if(!n)throw Nk()}function RT(n,t){return function e(i,r){const s=FL(n,r,t);return Ql(null!==s),s}}function Om(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function D$(){return new Ci("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function T$(){return new Ci("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function E$(n){return new Ci("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function S$(n){return new Ci("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function Aw(n){const t=Om(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function b$(n){return new Ci("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function UL(n,t,e){const r=Qu(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Yl(r,"GET",RT(n,e),c);return h.errorHandler=Aw(t),h}function d6(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const h=Qu(t.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,b=new Yl(h,"GET",function u6(n,t){return function e(i,r){const s=function l6(n,t,e){const i=Uk(e);return null===i?null:function a6(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[LL])for(const r of e[LL]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new ts(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new ts(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Ql(null!==s),s}}(n,t.bucket),y);return b.urlParams=s,b.errorHandler=Om(t),b}function HL(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function g6(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class NT{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function Hk(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ql(!1)}return Ql(!!e&&-1!==(t||["active"]).indexOf(e)),e}const v6={STATE_CHANGED:"state_changed"},Is={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jk(n){switch(n){case"running":case"pausing":case"canceling":return Is.RUNNING;case"paused":return Is.PAUSED;case"success":return Is.SUCCESS;case"canceled":return Is.CANCELED;default:return Is.ERROR}}class w6{constructor(t,e,i){if(function V$(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Rm(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class I6 extends class C6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zd.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zd.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zd.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw Dw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function vl(){return new I6}class WL{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=Sw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(kL(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=EL()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function m6(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=HL(t,i,r),h={name:c.fullPath},g=Qu(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=Bk(c,e),G=new Yl(g,"POST",function F(ne){let te;Hk(ne);try{te=ne.getResponseHeader("X-Goog-Upload-URL")}catch{Ql(!1)}return Ql(MT(te)),te},n.maxUploadRetryTime);return G.urlParams=h,G.headers=b,G.body=D,G.errorHandler=Om(t),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,vl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function _6(n,t,e,i){const g=new Yl(e,"POST",function s(y){const b=Hk(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ql(!1)}D||Ql(!1);const x=Number(D);return Ql(!isNaN(x)),new NT(x,i.size(),"final"===b)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Om(t),g}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,vl,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new NT(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function y6(n,t,e,i,r,s,c,h){const g=new NT(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=i.size()),i.size()!==g.total)throw function k$(){return new Ci("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let b=y;r>0&&(b=Math.min(b,r));const D=g.current;let F="";F=0===b?"finalize":y===b?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":F,"X-Goog-Upload-Offset":`${g.current}`},ne=i.slice(D,D+b);if(null===ne)throw DL();const qe=new Yl(e,"POST",function te(Je,gt){const xt=Hk(Je,["active","final"]),jn=g.current+b,Ui=i.size();let As;return As="final"===xt?RT(t,s)(Je,gt):null,new NT(jn,Ui,"final"===xt,As)},t.maxUploadRetryTime);return qe.headers=G,qe.body=ne.uploadData(),qe.progressCallback=h||null,qe.errorHandler=Om(n),qe}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(c,vl,r,s,!1);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=UL(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,vl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function jL(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let qe="";for(let Je=0;Je<2;Je++)qe+=Math.random().toString().slice(2);return qe}();c["Content-Type"]="multipart/related; boundary="+g;const y=HL(t,i,r),b=Bk(y,e),F=Kl.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+g+"--");if(null===F)throw DL();const G={name:y.fullPath},ne=Qu(s,n.host,n._protocol),ze=n.maxUploadRetryTime,Ke=new Yl(ne,"POST",RT(n,e),ze);return Ke.urlParams=G,Ke.headers=c,Ke.body=F.uploadData(),Ke.errorHandler=Om(t),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,vl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=TL(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=jk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new w6(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(jk(this._state)){case Is.SUCCESS:Rm(this._resolve.bind(null,this.snapshot))();break;case Is.CANCELED:case Is.ERROR:Rm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(jk(this._state)){case Is.RUNNING:case Is.PAUSED:t.next&&Rm(t.next.bind(t,this.snapshot))();break;case Is.SUCCESS:t.complete&&Rm(t.complete.bind(t))();break;default:t.error&&Rm(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Hf{constructor(t,e){this._service=t,this._location=e instanceof ts?e:ts.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Hf(t,e)}get root(){const t=new ts(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PL(this._location.path)}get storage(){return this._service}get parent(){const t=function e6(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new ts(this._location.bucket,t);return new Hf(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw AL(t)}}function qL(n,t,e){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,Ce.Z)(function*(n,t,e){const r=yield ZL(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield qL(n,t,r.nextPageToken))})).apply(this,arguments)}function ZL(n,t){null!=t&&"number"==typeof t.maxResults&&Fk("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=d6(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,vl)}function N6(n){n._throwIfRoot("getDownloadURL");const t=function h6(n,t,e){const r=Qu(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Yl(r,"GET",function c6(n,t){return function e(i,r){const s=FL(n,r,t);return Ql(null!==s),function o6(n,t,e,i){const r=Uk(t);if(null===r||!MT(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return Qu("/b/"+c(n.bucket)+"/o/"+c(D),e,i)+ML({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return h.errorHandler=Aw(t),h}(n.storage,n._location,Sw());return n.storage.makeRequestWithTokens(t,vl).then(e=>{if(null===e)throw function O$(){return new Ci("no-download-url","The given file does not have any download URLs.")}();return e})}function KL(n,t){const e=function t6(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new ts(n._location.bucket,e);return new Hf(n.storage,i)}function YL(n,t){if(n instanceof $k){const e=n;if(null==e._bucket)throw function M$(){return new Ci("no-default-bucket","No default bucket found. Did you set the '"+bL+"' property when initializing the app?")}();const i=new Hf(e,e._bucket);return null!=t?YL(i,t):i}return void 0!==t?KL(n,t):n}function V6(n,t){if(t&&function F6(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof $k)return function L6(n,t){return new Hf(n,t)}(n,t);throw km("To use ref(service, url), the first argument must be a Storage instance.")}return YL(n,t)}function QL(n,t){const e=t?.[bL];return null==e?null:ts.makeFromBucketSpec(e,n)}class $k{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=IL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ts.makeFromBucketSpec(r,this._host):QL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?ts.makeFromBucketSpec(this._url,t):QL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Fk("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Fk("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ce.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ce.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Hf(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new N$(SL());{const c=function W$(n,t,e,i,r,s,c=!0){const h=ML(n.urlParams),g=n.url+h,y=Object.assign({},n.headers);return function G$(n,t){t&&(n["X-Firebase-GMPID"]=t)}(y,t),function H$(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(y,e),function j$(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(y,s),function $$(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(y,i),new B$(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(t,e){var i=this;return(0,Ce.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const JL="@firebase/storage";function tV(n,t){return V6(n=(0,L.m9)(n),t)}function Z6(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new $k(e,i,r,t,kr.SDK_VERSION)}!function K6(){(0,kr._registerComponent)(new ba.wA("storage",Z6,"PUBLIC").setMultipleInstances(!0)),(0,kr.registerVersion)(JL,"0.9.14",""),(0,kr.registerVersion)(JL,"0.9.14","esm2017")}();class PT{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class iV{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PT(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new PT(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new PT(c,this,this._ref)):{next:e.next?c=>e.next(new PT(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class rV{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Ju(t,this._service))}get items(){return this._delegate.items.map(t=>new Ju(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ju{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function q6(n,t){return KL(n,t)}(this._delegate,t);return new Ju(e,this.storage)}get root(){return new Ju(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Ju(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new iV(function B6(n,t,e){return function x6(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new WL(n,new Kl(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Ro.RAW,i){this._throwIfRoot("putString");const r=Vk(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new iV(new WL(this._delegate,new Kl(r.data,!0),s),this)}listAll(){return function $6(n){return function k6(n){const t={prefixes:[],items:[]};return qL(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new rV(t,this.storage))}list(t){return function G6(n,t){return ZL(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new rV(e,this.storage))}getMetadata(){return function H6(n){return function O6(n){n._throwIfRoot("getMetadata");const t=UL(n.storage,n._location,Sw());return n.storage.makeRequestWithTokens(t,vl)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function j6(n,t){return function R6(n,t){n._throwIfRoot("updateMetadata");const e=function f6(n,t,e,i){const s=Qu(t.fullServerUrl(),n.host,n._protocol),h=Bk(e,i),y=n.maxOperationRetryTime,b=new Yl(s,"PATCH",RT(n,i),y);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=Aw(t),b}(n.storage,n._location,t,Sw());return n.storage.makeRequestWithTokens(e,vl)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function W6(n){return N6(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function z6(n){return function P6(n){n._throwIfRoot("deleteObject");const t=function p6(n,t){const i=Qu(t.fullServerUrl(),n.host,n._protocol),h=new Yl(i,"DELETE",function c(g,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Aw(t),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,vl)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw AL(t)}}class sV{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(oV(t))throw km("ref() expected a child path but got a URL, use refFromURL instead.");return new Ju(tV(this._delegate,t),this)}refFromURL(t){if(!oV(t))throw km("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ts.makeFromUrl(t,this._delegate.host)}catch{throw km("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ju(tV(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function nV(n,t,e,i={}){!function U6(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function oV(n){return/^[A-Za-z]+:\/\//.test(n)}function X6(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new sV(e,i)}function aV(n){const t=function tW(n){return new _i.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(function v$(n,t=rm.z){return(0,ei.e)((e,i)=>{let r=null,s=null,c=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function g(){const y=c+n,b=t.now();if(b<y)return r=this.schedule(void 0,y-b),void i.add(r);h()}e.subscribe((0,Ln.x)(i,y=>{s=y,c=t.now(),r||(r=t.schedule(g,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,dt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function FT(n){return{getDownloadURL:()=>ht(void 0).pipe(wn.fc,qn(()=>n.getDownloadURL()),wn.iC),getMetadata:()=>ht(void 0).pipe(wn.fc,qn(()=>n.getMetadata()),wn.iC),delete:()=>(0,an.D)(n.delete()),child:t=>FT(n.child(t)),updateMetadata:t=>(0,an.D)(n.updateMetadata(t)),put:(t,e)=>aV(n.put(t,e)),putString:(t,e,i)=>aV(n.putString(t,e,i)),list:t=>(0,an.D)(n.list(t)),listAll:()=>(0,an.D)(n.listAll())}}!function eW(n){const t={TaskState:Is,TaskEvent:v6,StringFormat:Ro,Storage:sV,Reference:Ju};n.INTERNAL.registerComponent(new ba.wA("storage-compat",X6,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(sm.Z);const nW=new l.OlP("angularfire2.storageBucket"),iW=new l.OlP("angularfire2.storage.maxUploadRetryTime"),rW=new l.OlP("angularfire2.storage.maxOperationRetryTime"),sW=new l.OlP("angularfire2.storage.use-emulator");let oW=(()=>{class n{constructor(e,i,r,s,c,h,g,y,b,D){const x=(0,Zi.on)(e,c,i);this.storage=(0,Zi.cc)(`${x.name}.storage.${r}`,"AngularFireStorage",x.name,()=>{const F=c.runOutsideAngular(()=>x.storage(r||void 0)),G=b;return G&&F.useEmulator(...G),g&&F.setMaxUploadRetryTime(g),y&&F.setMaxOperationRetryTime(y),F},[g,y])}ref(e){return FT(this.storage.ref(e))}refFromURL(e){return FT(this.storage.refFromURL(e))}upload(e,i,r){return FT(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Zi.Dh),l.LFG(Zi.xv,8),l.LFG(nW,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(iW,8),l.LFG(rW,8),l.LFG(sW,8),l.LFG(sd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),lW=(()=>{class n{constructor(){Tg.Z.registerVersion("angularfire",wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[oW],imports:[aW]}),n})();function Wk(){return(0,ei.e)((n,t)=>{let e,i=!1;n.subscribe((0,Ln.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var Tt,uW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xu={},zk=zk||{},zt=uW||self;function LT(){}function VT(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function xw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var qk="closure_uid_"+(1e9*Math.random()>>>0),dW=0;function hW(n,t,e){return n.call.apply(n.bind,arguments)}function fW(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function ns(n,t,e){return(ns=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hW:fW).apply(null,arguments)}function UT(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Fr(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return t.prototype[r].apply(i,c)}}function Kd(){this.s=this.s,this.o=this.o}Kd.prototype.s=!1,Kd.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function cW(n){Object.prototype.hasOwnProperty.call(n,qk)&&n[qk]||(n[qk]=++dW)}(this)},Kd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lV=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function Zk(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function uV(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(VT(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function is(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}is.prototype.h=function(){this.defaultPrevented=!0};var gW=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",LT,t),zt.removeEventListener("test",LT,t)}catch{}return n}();function BT(n){return/^[\s\xa0]*$/.test(n)}var cV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Kk(n,t){return n<t?-1:n>t?1:0}function HT(){var n=zt.navigator;return n&&(n=n.userAgent)?n:""}function Jl(n){return-1!=HT().indexOf(n)}function Yk(n){return Yk[" "](n),n}Yk[" "]=LT;var jT,n,_W=Jl("Opera"),Nm=Jl("Trident")||Jl("MSIE"),dV=Jl("Edge"),Qk=dV||Nm,hV=Jl("Gecko")&&!(-1!=HT().toLowerCase().indexOf("webkit")&&!Jl("Edge"))&&!(Jl("Trident")||Jl("MSIE"))&&!Jl("Edge"),yW=-1!=HT().toLowerCase().indexOf("webkit")&&!Jl("Edge");function fV(){var n=zt.document;return n?n.documentMode:void 0}e:{var Jk="",Xk=(n=HT(),hV?/rv:([^\);]+)(\)|;)/.exec(n):dV?/Edge\/([\d\.]+)/.exec(n):Nm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yW?/WebKit\/(\S+)/.exec(n):_W?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Xk&&(Jk=Xk?Xk[1]:""),Nm){var e1=fV();if(null!=e1&&e1>parseFloat(Jk)){jT=String(e1);break e}}jT=Jk}var vW={};var CW=zt.document&&Nm&&(fV()||parseInt(jT,10))||void 0;function Mw(n,t){if(is.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(hV){e:{try{Yk(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Mw.X.h.call(this)}}Fr(Mw,is);var IW={2:"touch",3:"pen",4:"mouse"};Mw.prototype.h=function(){Mw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var kw="closure_listenable_"+(1e6*Math.random()|0),bW=0;function EW(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++bW,this.ba=this.ea=!1}function GT(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function n1(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function gV(n){const t={};for(const e in n)t[e]=n[e];return t}const mV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _V(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<mV.length;s++)e=mV[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function $T(n){this.src=n,this.g={},this.h=0}function i1(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=lV(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(GT(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function r1(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return r}return-1}$T.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=r1(n,t,i,r);return-1<c?(t=n[c],e||(t.ea=!1)):((t=new EW(t,this.src,s,!!i,r)).ea=e,n.push(t)),t};var s1="closure_lm_"+(1e6*Math.random()|0),o1={};function yV(n,t,e,i,r){if(i&&i.once)return wV(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)yV(n,t[s],e,i,r);return null}return e=c1(e),n&&n[kw]?n.N(t,e,xw(i)?!!i.capture:!!i,r):vV(n,t,e,!1,i,r)}function vV(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=xw(r)?!!r.capture:!!r,h=l1(n);if(h||(n[s1]=h=new $T(n)),(e=h.add(t,e,i,c,s)).proxy)return e;if(i=function TW(){const t=DW;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)gW||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(IV(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function wV(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)wV(n,t[s],e,i,r);return null}return e=c1(e),n&&n[kw]?n.O(t,e,xw(i)?!!i.capture:!!i,r):vV(n,t,e,!0,i,r)}function CV(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)CV(n,t[s],e,i,r);else i=xw(i)?!!i.capture:!!i,e=c1(e),n&&n[kw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=r1(s=n.g[t],e,i,r))&&(GT(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=l1(n))&&(t=n.g[t.toString()],n=-1,t&&(n=r1(t,e,i,r)),(e=-1<n?t[n]:null)&&a1(e))}function a1(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[kw])i1(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(IV(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=l1(t))?(i1(e,n),0==e.h&&(e.src=null,t[s1]=null)):GT(n)}}}function IV(n){return n in o1?o1[n]:o1[n]="on"+n}function DW(n,t){if(n.ba)n=!0;else{t=new Mw(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&a1(n),n=e.call(i,t)}return n}function l1(n){return(n=n[s1])instanceof $T?n:null}var u1="__closure_events_fn_"+(1e9*Math.random()>>>0);function c1(n){return"function"==typeof n?n:(n[u1]||(n[u1]=function(t){return n.handleEvent(t)}),n[u1])}function Cr(){Kd.call(this),this.i=new $T(this),this.P=this,this.I=null}function Lr(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new is(t,n);else if(t instanceof is)t.target=t.target||n;else{var r=t;_V(t=new is(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=WT(c,i,!0,t)&&r}if(r=WT(c=t.g=n,i,!0,t)&&r,r=WT(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=WT(c=t.g=e[s],i,!1,t)&&r}function WT(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ba&&c.capture==e){var h=c.listener,g=c.ha||c.src;c.ea&&i1(n.i,c),r=!1!==h.call(g,i)&&r}}return r&&!i.defaultPrevented}Fr(Cr,Kd),Cr.prototype[kw]=!0,Cr.prototype.removeEventListener=function(n,t,e,i){CV(this,n,t,e,i)},Cr.prototype.M=function(){if(Cr.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)GT(e[i]);delete n.g[t],n.h--}}this.I=null},Cr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Cr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var d1=zt.JSON.stringify;function SW(){var n=TV;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var h1,bV=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xW,n=>n.reset());class xW{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function MW(n){zt.setTimeout(()=>{throw n},0)}function EV(n,t){h1||function kW(){var n=zt.Promise.resolve(void 0);h1=function(){n.then(OW)}}(),f1||(h1(),f1=!0),TV.add(n,t)}var f1=!1,TV=new class AW{constructor(){this.h=this.g=null}add(t,e){const i=bV.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function OW(){for(var n;n=SW();){try{n.h.call(n.g)}catch(e){MW(e)}var t=bV;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}f1=!1}function zT(n,t){Cr.call(this),this.h=n||1,this.g=t||zt,this.j=ns(this.lb,this),this.l=Date.now()}function p1(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function g1(n,t,e){if("function"==typeof n)e&&(n=ns(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ns(n.handleEvent,n)}return 2147483647<Number(t)?-1:zt.setTimeout(n,t||0)}function DV(n){n.g=g1(()=>{n.g=null,n.i&&(n.i=!1,DV(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Fr(zT,Cr),(Tt=zT.prototype).ca=!1,Tt.R=null,Tt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Lr(this,"tick"),this.ca&&(p1(this),this.start()))}},Tt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){zT.X.M.call(this),p1(this),delete this.g};class RW extends Kd{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:DV(this)}M(){super.M(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ow(n){Kd.call(this),this.h=n,this.g={}}Fr(Ow,Kd);var SV=[];function AV(n,t,e,i){Array.isArray(e)||(e&&(SV[0]=e.toString()),e=SV);for(var r=0;r<e.length;r++){var s=yV(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function xV(n){n1(n.g,function(t,e){this.g.hasOwnProperty(e)&&a1(t)},n),n.g={}}function qT(){this.g=!0}function Pm(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function LW(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return d1(e)}catch{return t}}(n,e)+(i?" "+i:"")})}Ow.prototype.M=function(){Ow.X.M.call(this),xV(this)},Ow.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qT.prototype.Aa=function(){this.g=!1},qT.prototype.info=function(){};var jf={},MV=null;function ZT(){return MV=MV||new Cr}function kV(n){is.call(this,jf.Pa,n)}function Rw(n){const t=ZT();Lr(t,new kV(t))}function OV(n,t){is.call(this,jf.STAT_EVENT,n),this.stat=t}function bs(n){const t=ZT();Lr(t,new OV(t,n))}function RV(n,t){is.call(this,jf.Qa,n),this.size=t}function Nw(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},t)}jf.Pa="serverreachability",Fr(kV,is),jf.STAT_EVENT="statevent",Fr(OV,is),jf.Qa="timingevent",Fr(RV,is);var KT={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},NV={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function m1(){}function FV(){}m1.prototype.h=null;var v1,Pw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _1(){is.call(this,"d")}function y1(){is.call(this,"c")}function YT(){}function Fw(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new Ow(this),this.O=VW,this.T=new zT(n=Qk?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new LV}function LV(){this.i=null,this.g="",this.h=!1}Fr(_1,is),Fr(y1,is),Fr(YT,m1),YT.prototype.g=function(){return new XMLHttpRequest},YT.prototype.i=function(){return{}},v1=new YT;var VW=45e3,w1={},QT={};function C1(n,t,e){n.K=1,n.v=tD(ec(t)),n.s=e,n.P=!0,VV(n,null)}function VV(n,t){n.F=Date.now(),Lw(n),n.A=ec(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),ZV(e.i,"t",i),n.C=0,e=n.l.H,n.h=new LV,n.g=y2(n.l,e?t:null,!n.s),0<n.N&&(n.L=new RW(ns(n.La,n,n.g),n.N)),AV(n.S,n.g,"readystatechange",n.ib),t=n.H?gV(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),Rw(),function NW(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",h=s.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var b=y[0];y=y[1];var D=b.split("_");c=2<=D.length&&"type"==D[1]?c+(b+"=")+y+"&":c+(b+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function UV(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function BV(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=UW(n,e),r==QT){4==t&&(n.o=4,bs(14),i=!1),Pm(n.j,n.m,null,"[Incomplete Response]");break}if(r==w1){n.o=4,bs(15),Pm(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Pm(n.j,n.m,r,null),I1(n,r)}UV(n)&&r!=QT&&r!=w1&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,bs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),M1(t),t.K=!0,bs(11))):(Pm(n.j,n.m,e,"[Invalid Chunked Response]"),Gf(n),Vw(n))}function UW(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?QT:(e=Number(t.substring(e,i)),isNaN(e)?w1:(i+=1)+e>t.length?QT:(t=t.substr(i,e),n.C=i+e,t))}function Lw(n){n.V=Date.now()+n.O,HV(n,n.O)}function HV(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Nw(ns(n.gb,n),t)}function JT(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function Vw(n){0==n.l.G||n.I||p2(n.l,n)}function Gf(n){JT(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,p1(n.T),xV(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function I1(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||b1(e.h,n)))if(!n.J&&b1(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;aD(e),sD(e)}x1(e),bs(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=Nw(ns(e.cb,e),6e3));if(1>=QV(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else Wf(e,11)}else if((n.J||e.g==n)&&aD(e),!BT(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.T=y[0],y=y[1],2==e.G)if("c"==y[0]){e.I=y[1],e.ka=y[2];const b=y[3];null!=b&&(e.ma=b,e.j.info("VER="+e.ma));const D=y[4];null!=D&&(e.Ca=D,e.j.info("SVER="+e.Ca));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(e.J=i=1.5*x,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const F=n.g;if(F){const G=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var s=i.h;s.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(E1(s,s.h),s.h=null))}if(i.D){const ne=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(i.za=ne,hi(i.F,i.D,ne))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var c=n;if((i=e).sa=_2(i,i.H?i.ka:null,i.V),c.J){JV(i.h,c);var h=c,g=i.J;g&&h.setTimeout(g),h.B&&(JT(h),Lw(h)),i.g=c}else h2(i);0<e.i.length&&oD(e)}else"stop"!=y[0]&&"close"!=y[0]||Wf(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Wf(e,7):A1(e):"noop"!=y[0]&&e.l&&e.l.wa(y),e.A=0)}Rw()}catch{}}function jV(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(VT(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function HW(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(VT(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function BW(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(VT(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(Tt=Fw.prototype).setTimeout=function(n){this.O=n},Tt.ib=function(n){n=n.target;const t=this.L;t&&3==tc(n)?t.l():this.La(n)},Tt.La=function(n){try{if(n==this.g)e:{const b=tc(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||Qk||this.g&&(this.h.h||this.g.fa()||o2(this.g)))){this.I||4!=b||7==t||Rw(),JT(this);var e=this.g.aa();this.Y=e;t:if(UV(this)){var i=o2(this.g);n="";var r=i.length,s=4==tc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gf(this),Vw(this);var c="";break t}this.h.i=new zt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==e,function PW(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,b,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!BT(h)){var y=h;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,bs(12),Gf(this),Vw(this);break e}Pm(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,I1(this,e)}this.P?(BV(this,b,c),Qk&&this.i&&3==b&&(AV(this.S,this.T,"tick",this.hb),this.T.start())):(Pm(this.j,this.m,c,null),I1(this,c)),4==b&&Gf(this),this.i&&!this.I&&(4==b?p2(this.l,this):(this.i=!1,Lw(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,bs(12)):(this.o=0,bs(13)),Gf(this),Vw(this)}}}catch{}},Tt.hb=function(){if(this.g){var n=tc(this.g),t=this.g.fa();this.C<t.length&&(JT(this),BV(this,n,t),this.i&&4!=n&&Lw(this))}},Tt.cancel=function(){this.I=!0,Gf(this)},Tt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function FW(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Rw(),bs(17)),Gf(this),this.o=2,Vw(this)):HV(this,this.V-n)};var GV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $f(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof $f){this.h=void 0!==t?t:n.h,XT(this,n.j),this.s=n.s,this.g=n.g,eD(this,n.m),this.l=n.l,t=n.i;var e=new Hw;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),$V(this,e),this.o=n.o}else n&&(e=String(n).match(GV))?(this.h=!!t,XT(this,e[1]||"",!0),this.s=Uw(e[2]||""),this.g=Uw(e[3]||"",!0),eD(this,e[4]),this.l=Uw(e[5]||"",!0),$V(this,e[6]||"",!0),this.o=Uw(e[7]||"")):(this.h=!!t,this.i=new Hw(null,this.h))}function ec(n){return new $f(n)}function XT(n,t,e){n.j=e?Uw(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function eD(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function $V(n,t,e){t instanceof Hw?(n.i=t,function ZW(n,t){t&&!n.j&&(Yd(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(zV(this,i),ZV(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=Bw(t,zW)),n.i=new Hw(t,n.h))}function hi(n,t,e){n.i.set(t,e)}function tD(n){return hi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Uw(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,GW),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function GW(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$f.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Bw(t,WV,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Bw(t,WV,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(Bw(e,"/"==e.charAt(0)?WW:$W,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Bw(e,qW)),n.join("")};var WV=/[#\/\?@]/g,$W=/[#\?:]/g,WW=/[#\?]/g,zW=/[#\?@]/g,qW=/#/g;function Hw(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Yd(n){n.g||(n.g=new Map,n.h=0,n.i&&function jW(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function zV(n,t){Yd(n),t=Fm(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function qV(n,t){return Yd(n),t=Fm(n,t),n.g.has(t)}function ZV(n,t,e){zV(n,t),0<e.length&&(n.i=null,n.g.set(Fm(n,t),Zk(e)),n.h+=e.length)}function Fm(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function KV(n){this.l=n||YW,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ga&&zt.g.Ga()&&zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Tt=Hw.prototype).add=function(n,t){Yd(this),this.i=null,n=Fm(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Tt.forEach=function(n,t){Yd(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},Tt.oa=function(){Yd(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},Tt.W=function(n){Yd(this);let t=[];if("string"==typeof n)qV(this,n)&&(t=t.concat(this.g.get(Fm(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},Tt.set=function(n,t){return Yd(this),this.i=null,qV(this,n=Fm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Tt.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var YW=10;function YV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function QV(n){return n.h?1:n.g?n.g.size:0}function b1(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function E1(n,t){n.g?n.g.add(t):n.h=t}function JV(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function XV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return Zk(n.i)}function T1(){}function QW(){this.g=new T1}function JW(n,t,e){const i=e||"";try{jV(n,function(r,s){let c=r;xw(r)&&(c=d1(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function nD(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function jw(n){this.l=n.ac||null,this.j=n.jb||!1}function iD(n,t){Cr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=D1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}KV.prototype.cancel=function(){if(this.i=XV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},T1.prototype.stringify=function(n){return zt.JSON.stringify(n,void 0)},T1.prototype.parse=function(n){return zt.JSON.parse(n,void 0)},Fr(jw,m1),jw.prototype.g=function(){return new iD(this.l,this.j)},jw.prototype.i=function(n){return function(){return n}}({}),Fr(iD,Cr);var D1=0;function e2(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Gw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$w(n)}function $w(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=iD.prototype).open=function(n,t){if(this.readyState!=D1)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,$w(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||zt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gw(this)),this.readyState=D1},Tt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$w(this)),this.g&&(this.readyState=3,$w(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;e2(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Tt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Gw(this):$w(this),3==this.readyState&&e2(this)}},Tt.Va=function(n){this.g&&(this.response=this.responseText=n,Gw(this))},Tt.Ua=function(n){this.g&&(this.response=n,Gw(this))},Tt.ga=function(){this.g&&Gw(this)},Tt.setRequestHeader=function(n,t){this.v.append(n,t)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(iD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ez=zt.JSON.parse;function Di(n){Cr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=t2,this.K=this.L=!1}Fr(Di,Cr);var t2="",tz=/^https?$/i,nz=["POST","PUT"];function n2(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,i2(n),rD(n)}function i2(n){n.D||(n.D=!0,Lr(n,"complete"),Lr(n,"error"))}function r2(n){if(n.h&&typeof zk<"u"&&(!n.C[1]||4!=tc(n)||2!=n.aa()))if(n.v&&4==tc(n))g1(n.Ha,0,n);else if(Lr(n,"readystatechange"),4==tc(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===h){var r=String(n.H).match(GV)[1]||null;if(!r&&zt.self&&zt.self.location){var s=zt.self.location.protocol;r=s.substr(0,s.length-1)}i=!tz.test(r?r.toLowerCase():"")}e=i}if(e)Lr(n,"complete"),Lr(n,"success");else{n.m=6;try{var c=2<tc(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",i2(n)}}finally{rD(n)}}}function rD(n,t){if(n.g){s2(n);const e=n.g,i=n.C[0]?LT:null;n.g=null,n.C=null,t||Lr(n,"ready");try{e.onreadystatechange=i}catch{}}}function s2(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function tc(n){return n.g?n.g.readyState:0}function o2(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case t2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function a2(n){let t="";return n1(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function S1(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=a2(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):hi(n,t,e))}function Ww(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function l2(n){this.Ca=0,this.i=[],this.j=new qT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ww("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ww("baseRetryDelayMs",5e3,n),this.bb=Ww("retryDelaySeedMs",1e4,n),this.$a=Ww("forwardChannelMaxRetries",2,n),this.ta=Ww("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new KV(n&&n.concurrentRequestLimit),this.Fa=new QW,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function A1(n){if(u2(n),3==n.G){var t=n.U++,e=ec(n.F);hi(e,"SID",n.I),hi(e,"RID",t),hi(e,"TYPE","terminate"),zw(n,e),(t=new Fw(n,n.j,t,void 0)).K=2,t.v=tD(ec(e)),e=!1,zt.navigator&&zt.navigator.sendBeacon&&(e=zt.navigator.sendBeacon(t.v.toString(),"")),!e&&zt.Image&&((new Image).src=t.v,e=!0),e||(t.g=y2(t.l,null),t.g.da(t.v)),t.F=Date.now(),Lw(t)}m2(n)}function sD(n){n.g&&(M1(n),n.g.cancel(),n.g=null)}function u2(n){sD(n),n.u&&(zt.clearTimeout(n.u),n.u=null),aD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function oD(n){YV(n.h)||n.m||(n.m=!0,EV(n.Ja,n),n.C=0)}function c2(n,t){var e;e=t?t.m:n.U++;const i=ec(n.F);hi(i,"SID",n.I),hi(i,"RID",e),hi(i,"AID",n.T),zw(n,i),n.o&&n.s&&S1(i,n.o,n.s),e=new Fw(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=d2(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),E1(n.h,e),C1(e,i,t)}function zw(n,t){n.ia&&n1(n.ia,function(e,i){hi(t,i,e)}),n.l&&jV({},function(e,i){hi(t,i,e)})}function d2(n,t,e){e=Math.min(n.i.length,e);var i=n.l?ns(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let h=!0;for(let g=0;g<e;g++){let y=r[g].h;const b=r[g].g;if(y-=s,0>y)s=Math.max(0,r[g].h-100),h=!1;else try{JW(b,c,"req"+y+"_")}catch{i&&i(b)}}if(h){i=c.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function h2(n){n.g||n.u||(n.Z=1,EV(n.Ia,n),n.A=0)}function x1(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Nw(ns(n.Ia,n),g2(n,n.A)),n.A++,0))}function M1(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function f2(n){n.g=new Fw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=ec(n.sa);hi(t,"RID","rpc"),hi(t,"SID",n.I),hi(t,"CI",n.L?"0":"1"),hi(t,"AID",n.T),hi(t,"TYPE","xmlhttp"),zw(n,t),n.o&&n.s&&S1(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=tD(ec(t)),e.s=null,e.P=!0,VV(e,n)}function aD(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function p2(n,t){var e=null;if(n.g==t){aD(n),M1(n),n.g=null;var i=2}else{if(!b1(n.h,t))return;e=t.D,JV(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;Lr(i=ZT(),new RV(i,e)),oD(n)}else h2(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function rz(n,t){return!(QV(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Nw(ns(n.Ja,n,t),g2(n,n.C)),n.C++,0)))}(n,t)||2==i&&x1(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:Wf(n,5);break;case 4:Wf(n,10);break;case 3:Wf(n,6);break;default:Wf(n,2)}}function g2(n,t){let e=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(e*=2),e*t}function Wf(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=ns(n.kb,n);e||(e=new $f("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||XT(e,"https"),tD(e)),function XW(n,t){const e=new qT;if(zt.Image){const i=new Image;i.onload=UT(nD,e,i,"TestLoadImage: loaded",!0,t),i.onerror=UT(nD,e,i,"TestLoadImage: error",!1,t),i.onabort=UT(nD,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=UT(nD,e,i,"TestLoadImage: timeout",!1,t),zt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else bs(2);n.G=0,n.l&&n.l.va(t),m2(n),u2(n)}function m2(n){if(n.G=0,n.la=[],n.l){const t=XV(n.h);(0!=t.length||0!=n.i.length)&&(uV(n.la,t),uV(n.la,n.i),n.h.i.length=0,Zk(n.i),n.i.length=0),n.l.ua()}}function _2(n,t,e){var i=e instanceof $f?ec(e):new $f(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),eD(i,i.m);else{var r=zt.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new $f(null,void 0);i&&XT(s,i),t&&(s.g=t),r&&eD(s,r),e&&(s.l=e),i=s}return t=n.za,(e=n.D)&&t&&hi(i,e,t),hi(i,"VER",n.ma),zw(n,i),i}function y2(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Di(e&&n.Da&&!n.ra?new jw({jb:!0}):n.ra)).Ka(n.H),t}function v2(){}function lD(){if(Nm&&!(10<=Number(CW)))throw Error("Environmental error: no available transport.")}function No(n,t){Cr.call(this),this.g=new l2(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Yb)&&!BT(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!BT(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Lm(this)}function w2(n){_1.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function C2(){y1.call(this),this.status=1}function Lm(n){this.g=n}(Tt=Di.prototype).Ka=function(n){this.L=n},Tt.da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():v1.g(),this.C=function PV(n){return n.h||(n.h=n.i())}(this.u?this.u:v1),this.g.onreadystatechange=ns(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void n2(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=zt.FormData&&n instanceof zt.FormData,!(0<=lV(nz,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{s2(this),0<this.B&&((this.K=function iz(n){return Nm&&function wW(){return function mW(n){var t=vW;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=cV(String(jT)).split("."),e=cV("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=Kk(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||Kk(0==r[2].length,0==s[2].length)||Kk(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ns(this.qa,this)):this.A=g1(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){n2(this,s)}},Tt.qa=function(){typeof zk<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Lr(this,"complete"),Lr(this,"abort"),rD(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rD(this,!0)),Di.X.M.call(this)},Tt.Ha=function(){this.s||(this.F||this.v||this.l?r2(this):this.fb())},Tt.fb=function(){r2(this)},Tt.aa=function(){try{return 2<tc(this)?this.g.status:-1}catch{return-1}},Tt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Tt.Sa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),ez(t)}},Tt.Ea=function(){return this.m},Tt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=l2.prototype).ma=8,Tt.G=1,Tt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Fw(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=gV(s),_V(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=d2(this,r,t),hi(e=ec(this.F),"RID",n),hi(e,"CVER",22),this.D&&hi(e,"X-HTTP-Session-Id",this.D),zw(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(a2(s)))+"&"+t:this.o&&S1(e,this.o,s)),E1(this.h,r),this.Ya&&hi(e,"TYPE","init"),this.O?(hi(e,"$req",t),hi(e,"SID","null"),r.Z=!0,C1(r,e,null)):C1(r,e,t),this.G=2}}else 3==this.G&&(n?c2(this,n):0==this.i.length||YV(this.h)||c2(this))},Tt.Ia=function(){if(this.u=null,f2(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Nw(ns(this.eb,this),n)}},Tt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bs(10),sD(this),f2(this))},Tt.cb=function(){null!=this.v&&(this.v=null,sD(this),x1(this),bs(19))},Tt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),bs(2)):(this.j.info("Failed to ping google.com"),bs(1))},(Tt=v2.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Ra=function(){},lD.prototype.g=function(n,t){return new No(n,t)},Fr(No,Cr),No.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;bs(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=_2(n,null,n.V),oD(n)},No.prototype.close=function(){A1(this.g)},No.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=d1(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.ab++,n)),3==t.G&&oD(t)},No.prototype.M=function(){this.g.l=null,delete this.j,A1(this.g),delete this.g,No.X.M.call(this)},Fr(w2,_1),Fr(C2,y1),Fr(Lm,v2),Lm.prototype.xa=function(){Lr(this.g,"a")},Lm.prototype.wa=function(n){Lr(this.g,new w2(n))},Lm.prototype.va=function(n){Lr(this.g,new C2)},Lm.prototype.ua=function(){Lr(this.g,"b")},lD.prototype.createWebChannel=lD.prototype.g,No.prototype.send=No.prototype.u,No.prototype.open=No.prototype.m,No.prototype.close=No.prototype.close,KT.NO_ERROR=0,KT.TIMEOUT=8,KT.HTTP_ERROR=6,NV.COMPLETE="complete",FV.EventType=Pw,Pw.OPEN="a",Pw.CLOSE="b",Pw.ERROR="c",Pw.MESSAGE="d",Cr.prototype.listen=Cr.prototype.N,Di.prototype.listenOnce=Di.prototype.O,Di.prototype.getLastError=Di.prototype.Oa,Di.prototype.getLastErrorCode=Di.prototype.Ea,Di.prototype.getStatus=Di.prototype.aa,Di.prototype.getResponseJson=Di.prototype.Sa,Di.prototype.getResponseText=Di.prototype.fa,Di.prototype.send=Di.prototype.da,Di.prototype.setWithCredentials=Di.prototype.Ka;var sz=Xu.createWebChannelTransport=function(){return new lD},oz=Xu.getStatEventTarget=function(){return ZT()},k1=Xu.ErrorCode=KT,az=Xu.EventType=NV,lz=Xu.Event=jf,I2=Xu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},uz=Xu.FetchXmlHttpFactory=jw,uD=Xu.WebChannel=FV,cz=Xu.XhrIo=Di;const b2="@firebase/firestore";class Ir{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let Vm="9.14.0";const Qd=new Eo.Yd("@firebase/firestore");function O1(){return Qd.logLevel}function $e(n,...t){if(Qd.logLevel<=Eo.in.DEBUG){const e=t.map(R1);Qd.debug(`Firestore (${Vm}): ${n}`,...e)}}function Li(n,...t){if(Qd.logLevel<=Eo.in.ERROR){const e=t.map(R1);Qd.error(`Firestore (${Vm}): ${n}`,...e)}}function zf(n,...t){if(Qd.logLevel<=Eo.in.WARN){const e=t.map(R1);Qd.warn(`Firestore (${Vm}): ${n}`,...e)}}function R1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function mt(n="Unexpected state"){const t=`FIRESTORE (${Vm}) INTERNAL ASSERTION FAILED: `+n;throw Li(t),new Error(t)}function Ht(n,t){n||mt()}function rt(n,t){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class E2{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ir.UNAUTHENTICATED))}shutdown(){}}class pz{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class gz{constructor(t){this.t=t,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let c=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new lr,t.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=c;t.enqueueRetryable((0,Ce.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},g=y=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new lr)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ht("string"==typeof i.accessToken),new E2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ht(null===t||"string"==typeof t),new Ir(t)}}class mz{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class _z{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new mz(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T2{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yz{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ht("string"==typeof e.token),this.A=e.token,new T2(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vz(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class D2{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=vz(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function qt(n,t){return n<t?-1:n>t?1:0}function Um(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function S2(n){return n+"\0"}class fi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ve(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return fi.fromMillis(Date.now())}static fromDate(t){return fi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new fi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?qt(this.nanoseconds,t.nanoseconds):qt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class jt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new jt(t)}static min(){return new jt(new fi(0,0))}static max(){return new jt(new fi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qw{constructor(t,e,i){void 0===e?e=0:e>t.length&&mt(),void 0===i?i=t.length-e:i>t.length-e&&mt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===qw.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof qw?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class _n extends qw{construct(t,e,i){return new _n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ve(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new _n(e)}static emptyPath(){return new _n([])}}const wz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Si extends qw{construct(t,e,i){return new Si(t,e,i)}static isValidIdentifier(t){return wz.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Si.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Si(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ve(ye.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const h=t[r];if("\\"===h){if(r+1===t.length)throw new Ve(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[r+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ve(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=g,r+=2}else"`"===h?(c=!c,r++):"."!==h||c?(i+=h,r++):(s(),r++)}if(s(),c)throw new Ve(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Si(e)}static emptyPath(){return new Si([])}}class et{constructor(t){this.path=t}static fromPath(t){return new et(_n.fromString(t))}static fromName(t){return new et(_n.fromString(t).popFirst(5))}static empty(){return new et(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===_n.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return _n.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new _n(t.slice()))}}class cD{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function N1(n){return n.fields.find(t=>2===t.kind)}function qf(n){return n.fields.filter(t=>2!==t.kind)}cD.UNKNOWN_ID=-1;class dD{constructor(t,e){this.fieldPath=t,this.kind=e}}class Zw{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Zw(0,Po.min())}}function A2(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=jt.fromTimestamp(1e9===i?new fi(e+1,0):new fi(e,i));return new Po(r,et.empty(),t)}function x2(n){return new Po(n.readTime,n.key,-1)}class Po{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Po(jt.min(),et.empty(),-1)}static max(){return new Po(jt.max(),et.empty(),-1)}}function P1(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=et.comparator(n.documentKey,t.documentKey),0!==e?e:qt(n.largestBatchId,t.largestBatchId))}const M2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Jd(n){return F1.apply(this,arguments)}function F1(){return F1=(0,Ce.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==M2)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),F1.apply(this,arguments)}class he{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new he((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof he?e:he.resolve(e)}catch(e){return he.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):he.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):he.reject(e)}static resolve(t){return new he((e,i)=>{e(t)})}static reject(t){return new he((e,i)=>{i(t)})}static waitFor(t){return new he((e,i)=>{let r=0,s=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++s,c&&s===r&&e()},g=>i(g))}),c=!0,s===r&&e()})}static or(t){let e=he.resolve(!1);for(const i of t)e=e.next(r=>r?he.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new he((i,r)=>{const s=t.length,c=new Array(s);let h=0;for(let g=0;g<s;g++){const y=g;e(t[y]).next(b=>{c[y]=b,++h,h===s&&i(c)},b=>r(b))}})}static doWhile(t,e){return new he((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class hD{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new lr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new Kw(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=L1(i.target.error);this.P.reject(new Kw(t,r))}}static open(t,e,i,r){try{return new hD(e,t.transaction(r,i))}catch(s){throw new Kw(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||($e("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Ez(e)}}class wl{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===wl.D((0,L.z$)())&&Li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $e("SimpleDb","Removing database:",t),Zf(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(wl.N())return!0;const t=(0,L.z$)(),e=wl.D(t),i=0<e&&e<10,r=wl.k(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,Ce.Z)(function*(){return e.db||($e("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new Kw(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const h=c.target.error;r("VersionError"===h.name?new Ve(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ve(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Kw(t,h))},s.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.S.$(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{$e("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ce.Z)(function*(){const c="readonly"===e;let h=0;for(;;){++h;try{s.db=yield s.F(t);const g=hD.open(s.db,t,c?"readonly":"readwrite",i),y=r(g).next(b=>(g.V(),b)).catch(b=>(g.abort(b),he.reject(b))).toPromise();return y.catch(()=>{}),yield g.v,y}catch(g){const y=g,b="FirebaseError"!==y.name&&h<3;if($e("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),s.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class bz{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return Zf(this.U.delete())}}class Kw extends Ve{constructor(t,e){super(ye.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Xd(n){return"IndexedDbTransactionError"===n.name}class Ez{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($e("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Zf(i)}add(t){return $e("SimpleDb","ADD",this.store.name,t,t),Zf(this.store.add(t))}get(t){return Zf(this.store.get(t)).next(e=>(void 0===e&&(e=null),$e("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $e("SimpleDb","DELETE",this.store.name,t),Zf(this.store.delete(t))}count(){return $e("SimpleDb","COUNT",this.store.name),Zf(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(c,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new he((s,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new he((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(t,e){$e("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(s,c,h)=>h.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new he((i,r)=>{e.onerror=s=>{const c=L1(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(h=>{h?c.continue():i()}):i()}})}H(t,e){const i=[];return new he((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const h=c.target.result;if(!h)return void r();const g=new bz(h),y=e(h.primaryKey,h.value,g);if(y instanceof he){const b=y.catch(D=>(g.done(),he.reject(D)));i.push(b)}g.isDone?r():null===g.G?h.continue():h.continue(g.G)}}).next(()=>he.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Zf(n){return new he((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=L1(i.target.error);e(r)}})}let O2=!1;function L1(n){const t=wl.D((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return O2||(O2=!0,setTimeout(()=>{throw i},0)),i}}return n}class Tz{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;$e("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Ce.Z)(function*(){e.task=null;try{$e("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){Xd(i)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Jd(i)}yield e.nt(6e4)}))}}class Dz{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,Ce.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,s=!0;return he.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return $e("IndexBackiller",`Processing collection: ${c}`),this.rt(t,c,r).next(h=>{r-=h,i.add(c)});s=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.ot(r,s)).next(h=>($e("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(t,e,h))).next(()=>c.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=x2(s);P1(c,i)>0&&(i=c)}),new Po(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Ys{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function R2(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Kf(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function N2(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}Ys.at=-1;class Ai{constructor(t,e){this.comparator=t,this.root=e||Vr.EMPTY}insert(t,e){return new Ai(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(t){return new Ai(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fD(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fD(this.root,t,this.comparator,!1)}getReverseIterator(){return new fD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fD(this.root,t,this.comparator,!0)}}class fD{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Vr{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??Vr.RED,this.left=r??Vr.EMPTY,this.right=s??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Vr(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Vr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Vr(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(t){this.comparator=t,this.data=new Ai(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new P2(this.data.getIterator())}getIteratorFrom(t){return new P2(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Hn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Hn(this.comparator);return e.data=t,e}}class P2{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bm(n){return n.hasNext()?n.getNext():void 0}class Fo{constructor(t){this.fields=t,t.sort(Si.comparator)}static empty(){return new Fo([])}unionWith(t){let e=new Hn(Si.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Fo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Um(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class ur{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new ur(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new ur(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const Az=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eh(n){if(Ht(!!n),"string"==typeof n){let t=0;const e=Az.exec(n);if(Ht(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:xi(n.seconds),nanos:xi(n.nanos)}}function xi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Yf(n){return"string"==typeof n?ur.fromBase64String(n):ur.fromUint8Array(n)}function V1(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function F2(n){const t=n.mapValue.fields.__previous_value__;return V1(t)?F2(t):t}function Yw(n){const t=eh(n.mapValue.fields.__local_write_time__.timestampValue);return new fi(t.seconds,t.nanos)}class xz{constructor(t,e,i,r,s,c,h,g){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class th{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new th("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof th&&t.projectId===this.projectId&&t.database===this.database}}function Qw(n){return null==n}function Jw(n){return 0===n&&1/n==-1/0}function L2(n){return"number"==typeof n&&Number.isInteger(n)&&!Jw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pD={nullValue:"NULL_VALUE"};function Qf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?V1(n)?4:H2(n)?9007199254740991:10:mt()}function Xl(n,t){if(n===t)return!0;const e=Qf(n);if(e!==Qf(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Yw(n).isEqual(Yw(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=eh(i.timestampValue),c=eh(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Yf(n.bytesValue).isEqual(Yf(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return xi(i.geoPointValue.latitude)===xi(r.geoPointValue.latitude)&&xi(i.geoPointValue.longitude)===xi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return xi(i.integerValue)===xi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=xi(i.doubleValue),c=xi(r.doubleValue);return s===c?Jw(s)===Jw(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return Um(n.arrayValue.values||[],t.arrayValue.values||[],Xl);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(R2(s)!==R2(c))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===c[h]||!Xl(s[h],c[h])))return!1;return!0}(n,t);default:return mt()}var r}function Xw(n,t){return void 0!==(n.values||[]).find(e=>Xl(e,t))}function ih(n,t){if(n===t)return 0;const e=Qf(n),i=Qf(t);if(e!==i)return qt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=xi(r.integerValue||r.doubleValue),h=xi(s.integerValue||s.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return V2(n.timestampValue,t.timestampValue);case 4:return V2(Yw(n),Yw(t));case 5:return qt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=Yf(r),h=Yf(s);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),h=s.split("/");for(let g=0;g<c.length&&g<h.length;g++){const y=qt(c[g],h[g]);if(0!==y)return y}return qt(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=qt(xi(r.latitude),xi(s.latitude));return 0!==c?c:qt(xi(r.longitude),xi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],h=s.values||[];for(let g=0;g<c.length&&g<h.length;++g){const y=ih(c[g],h[g]);if(y)return y}return qt(c.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===nh.mapValue&&s===nh.mapValue)return 0;if(r===nh.mapValue)return 1;if(s===nh.mapValue)return-1;const c=r.fields||{},h=Object.keys(c),g=s.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let b=0;b<h.length&&b<y.length;++b){const D=qt(h[b],y[b]);if(0!==D)return D;const x=ih(c[h[b]],g[y[b]]);if(0!==x)return x}return qt(h.length,y.length)}(n.mapValue,t.mapValue);default:throw mt()}}function V2(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return qt(n,t);const e=eh(n),i=eh(t),r=qt(e.seconds,i.seconds);return 0!==r?r:qt(e.nanos,i.nanos)}function Hm(n){return U1(n)}function U1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=eh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Yf(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=U1(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const h of r)c?c=!1:s+=",",s+=`${h}:${U1(i.fields[h])}`;return s+"}"}(n.mapValue):mt();var t}function Jf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function B1(n){return!!n&&"integerValue"in n}function e0(n){return!!n&&"arrayValue"in n}function U2(n){return!!n&&"nullValue"in n}function B2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gD(n){return!!n&&"mapValue"in n}function t0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Kf(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=t0(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=t0(n.arrayValue.values[e]);return t}return Object.assign({},n)}function H2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mz(n){return"nullValue"in n?pD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Jf(th.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function kz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Jf(th.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?nh:mt()}function j2(n,t){const e=ih(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function G2(n,t){const e=ih(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Ur{constructor(t){this.value=t}static empty(){return new Ur({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!gD(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=t0(e)}setAll(t){let e=Si.emptyPath(),i={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const g=this.getFieldsMap(e);this.applyChanges(g,i,r),i={},r=[],e=h.popLast()}c?i[h.lastSegment()]=t0(c):r.push(h.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());gD(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Xl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];gD(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Kf(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Ur(t0(this.value))}}function $2(n){const t=[];return Kf(n.fields,(e,i)=>{const r=new Si([e]);if(gD(i)){const s=$2(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new Fo(t)}class ii{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new ii(t,0,jt.min(),jt.min(),Ur.empty(),0)}static newFoundDocument(t,e,i){return new ii(t,1,e,jt.min(),i,0)}static newNoDocument(t,e){return new ii(t,2,e,jt.min(),Ur.empty(),0)}static newUnknownDocument(t,e){return new ii(t,3,e,jt.min(),Ur.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ii&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oz{constructor(t,e=null,i=[],r=[],s=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=h,this.ht=null}}function W2(n,t=null,e=[],i=[],r=null,s=null,c=null){return new Oz(n,t,e,i,r,s,c)}function Xf(n){const t=rt(n);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Hm(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Qw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Hm(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Hm(i)).join(",")),t.ht=e}return t.ht}function n0(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!Hz(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!Xl(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Y2(n.startAt,t.startAt)&&Y2(n.endAt,t.endAt)}function mD(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _D(n,t){return n.filters.filter(e=>e instanceof Br&&e.field.isEqual(t))}function z2(n,t,e){let i=pD,r=!0;for(const s of _D(n,t)){let c=pD,h=!0;switch(s.op){case"<":case"<=":c=Mz(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,h=!1;break;case"!=":case"not-in":c=pD}j2({value:i,inclusive:r},{value:c,inclusive:h})<0&&(i=c,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];j2({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function q2(n,t,e){let i=nh,r=!0;for(const s of _D(n,t)){let c=nh,h=!0;switch(s.op){case">=":case">":c=kz(s.value),h=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,h=!1;break;case"!=":case"not-in":c=nh}G2({value:i,inclusive:r},{value:c,inclusive:h})>0&&(i=c,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];G2({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class Br extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new Nz(t,e,i):"array-contains"===e?new Lz(t,i):"in"===e?new Vz(t,i):"not-in"===e?new Uz(t,i):"array-contains-any"===e?new Bz(t,i):new Br(t,e,i)}static lt(t,e,i){return"in"===e?new Pz(t,i):new Fz(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(ih(e,this.value)):null!==e&&Qf(this.value)===Qf(e)&&this.ft(ih(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Nz extends Br{constructor(t,e,i){super(t,e,i),this.key=et.fromName(i.referenceValue)}matches(t){const e=et.comparator(t.key,this.key);return this.ft(e)}}class Pz extends Br{constructor(t,e){super(t,"in",e),this.keys=Z2(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Fz extends Br{constructor(t,e){super(t,"not-in",e),this.keys=Z2(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Z2(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>et.fromName(i.referenceValue))}class Lz extends Br{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return e0(e)&&Xw(e.arrayValue,this.value)}}class Vz extends Br{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Xw(this.value.arrayValue,e)}}class Uz extends Br{constructor(t,e){super(t,"not-in",e)}matches(t){if(Xw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Xw(this.value.arrayValue,e)}}class Bz extends Br{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!e0(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Xw(this.value.arrayValue,i))}}class rh{constructor(t,e){this.position=t,this.inclusive=e}}class jm{constructor(t,e="asc"){this.field=t,this.dir=e}}function Hz(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function K2(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?et.comparator(et.fromName(c.referenceValue),e.key):ih(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Y2(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Xl(n.position[e],t.position[e]))return!1;return!0}class nc{constructor(t,e=null,i=[],r=[],s=null,c="F",h=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=h,this.endAt=g,this._t=null,this.wt=null}}function Q2(n,t,e,i,r,s,c,h){return new nc(n,t,e,i,r,s,c,h)}function Gm(n){return new nc(n)}function J2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function H1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function j1(n){for(const t of n.filters)if(t.dt())return t.field;return null}function G1(n){return null!==n.collectionGroup}function $m(n){const t=rt(n);if(null===t._t){t._t=[];const e=j1(t),i=H1(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new jm(e)),t._t.push(new jm(Si.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new jm(Si.keyField(),s))}}}return t._t}function Es(n){const t=rt(n);if(!t.wt)if("F"===t.limitType)t.wt=W2(t.path,t.collectionGroup,$m(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of $m(t))e.push(new jm(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new rh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rh(t.startAt.position,t.startAt.inclusive):null;t.wt=W2(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.wt}function yD(n,t,e){return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function r0(n,t){return n0(Es(n),Es(t))&&n.limitType===t.limitType}function X2(n){return`${Xf(Es(n))}|lt:${n.limitType}`}function $1(n){return`Query(target=${function Rz(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Hm(i.value)}`;var i}).join(", ")}]`),Qw(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Hm(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Hm(e)).join(",")),`Target(${t})`}(Es(n))}; limitType=${n.limitType})`}function W1(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):et.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const h=K2(r,s,c);return r.inclusive?h<=0:h<0}(e.startAt,$m(e),i)||e.endAt&&!function(r,s,c){const h=K2(r,s,c);return r.inclusive?h>=0:h>0}(e.endAt,$m(e),i)));var e,i}function eU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tU(n){return(t,e)=>{let i=!1;for(const r of $m(n)){const s=jz(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function jz(n,t,e){const i=n.field.isKeyField()?et.comparator(t.key,e.key):function(r,s,c){const h=s.data.field(r),g=c.data.field(r);return null!==h&&null!==g?ih(h,g):mt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}function nU(n,t){if(n.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jw(t)?"-0":t}}function iU(n){return{integerValue:""+n}}function rU(n,t){return L2(t)?iU(t):nU(n,t)}class vD{constructor(){this._=void 0}}function Gz(n,t,e){return n instanceof Wm?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof ep?oU(n,t):n instanceof tp?aU(n,t):function(i,r){const s=sU(i,r),c=lU(s)+lU(i.yt);return B1(s)&&B1(i.yt)?iU(c):nU(i.It,c)}(n,t)}function $z(n,t,e){return n instanceof ep?oU(n,t):n instanceof tp?aU(n,t):e}function sU(n,t){return n instanceof zm?B1(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Wm extends vD{}class ep extends vD{constructor(t){super(),this.elements=t}}function oU(n,t){const e=uU(t);for(const i of n.elements)e.some(r=>Xl(r,i))||e.push(i);return{arrayValue:{values:e}}}class tp extends vD{constructor(t){super(),this.elements=t}}function aU(n,t){let e=uU(t);for(const i of n.elements)e=e.filter(r=>!Xl(r,i));return{arrayValue:{values:e}}}class zm extends vD{constructor(t,e){super(),this.It=t,this.yt=e}}function lU(n){return xi(n.integerValue||n.doubleValue)}function uU(n){return e0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class s0{constructor(t,e){this.field=t,this.transform=e}}class zz{constructor(t,e){this.version=t,this.transformResults=e}}class pi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new pi}static exists(t){return new pi(void 0,t)}static updateTime(t){return new pi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wD(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class CD{}function cU(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Zm(n.key,pi.none()):new qm(n.key,n.data,pi.none());{const e=n.data,i=Ur.empty();let r=new Hn(Si.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new ic(n.key,i,new Fo(r.toArray()),pi.none())}}function qz(n,t,e){n instanceof qm?function(i,r,s){const c=i.value.clone(),h=fU(i.fieldTransforms,r,s.transformResults);c.setAll(h),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof ic?function(i,r,s){if(!wD(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=fU(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(hU(i)),h.setAll(c),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function o0(n,t,e,i){return n instanceof qm?function(r,s,c,h){if(!wD(r.precondition,s))return c;const g=r.value.clone(),y=pU(r.fieldTransforms,h,s);return g.setAll(y),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof ic?function(r,s,c,h){if(!wD(r.precondition,s))return c;const g=pU(r.fieldTransforms,h,s),y=s.data;return y.setAll(hU(r)),y.setAll(g),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(c=e,wD(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function Zz(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=sU(i.transform,r||null);null!=s&&(null===e&&(e=Ur.empty()),e.set(i.field,s))}return e||null}function dU(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Um(e,i,(r,s)=>function Wz(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof ep&&i instanceof ep||e instanceof tp&&i instanceof tp?Um(e.elements,i.elements,Xl):e instanceof zm&&i instanceof zm?Xl(e.yt,i.yt):e instanceof Wm&&i instanceof Wm);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class qm extends CD{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ic extends CD{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hU(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function fU(n,t,e){const i=new Map;Ht(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,h=t.data.field(s.field);i.set(s.field,$z(c,h,e[r]))}return i}function pU(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,Gz(s,c,t))}return i}class Zm extends CD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z1 extends CD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kz{constructor(t){this.count=t}}var Yi,yn;function gU(n){switch(n){default:return mt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function mU(n){if(void 0===n)return Li("GRPC error has no .code"),ye.UNKNOWN;switch(n){case Yi.OK:return ye.OK;case Yi.CANCELLED:return ye.CANCELLED;case Yi.UNKNOWN:return ye.UNKNOWN;case Yi.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Yi.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Yi.INTERNAL:return ye.INTERNAL;case Yi.UNAVAILABLE:return ye.UNAVAILABLE;case Yi.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Yi.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Yi.NOT_FOUND:return ye.NOT_FOUND;case Yi.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Yi.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Yi.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Yi.ABORTED:return ye.ABORTED;case Yi.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Yi.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Yi.DATA_LOSS:return ye.DATA_LOSS;default:return mt()}}(yn=Yi||(Yi={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class sh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Kf(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return N2(this.inner)}size(){return this.innerSize}}const Yz=new Ai(et.comparator);function Qs(){return Yz}const _U=new Ai(et.comparator);function a0(...n){let t=_U;for(const e of n)t=t.insert(e.key,e);return t}function yU(n){let t=_U;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function eu(){return l0()}function vU(){return l0()}function l0(){return new sh(n=>n.toString(),(n,t)=>n.isEqual(t))}const Qz=new Ai(et.comparator),Jz=new Hn(et.comparator);function nn(...n){let t=Jz;for(const e of n)t=t.add(e);return t}const Xz=new Hn(qt);function ID(){return Xz}class u0{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,c0.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new u0(jt.min(),r,ID(),Qs(),nn())}}class c0{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new c0(i,e,nn(),nn(),nn())}}class bD{constructor(t,e,i,r){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=r}}class wU{constructor(t,e){this.targetId=t,this.At=e}}class CU{constructor(t,e,i=ur.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class IU{constructor(){this.Rt=0,this.bt=EU(),this.Pt=ur.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=nn(),e=nn(),i=nn();return this.bt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:mt()}}),new c0(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=EU()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Ot(t){this.Vt=!0,this.bt=this.bt.remove(t)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class e4{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=Qs(),this.qt=bU(),this.Kt=new Hn(qt)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:mt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,r)=>{this.Ht(r)&&e(r)})}Yt(t){const e=t.targetId,i=t.At.count,r=this.Xt(e);if(r){const s=r.target;if(mD(s))if(0===i){const c=new et(s.path);this.jt(e,c,ii.newNoDocument(c,jt.min()))}else Ht(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,c)=>{const h=this.Xt(c);if(h){if(s.current&&mD(h.target)){const g=new et(h.target.path);null!==this.Ut.get(g)||this.ee(c,g)||this.jt(c,g,ii.newNoDocument(g,t))}s.Dt&&(e.set(c,s.xt()),s.Nt())}});let i=nn();this.qt.forEach((s,c)=>{let h=!0;c.forEachWhile(g=>{const y=this.Xt(g);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.Ut.forEach((s,c)=>c.setReadTime(t));const r=new u0(t,e,this.Kt,this.Ut,i);return this.Ut=Qs(),this.qt=bU(),this.Kt=new Hn(qt),r}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const r=this.zt(t);this.ee(t,e)?r.kt(e,1):r.Ot(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Mt(t){this.zt(t).Mt()}zt(t){let e=this.Lt.get(t);return e||(e=new IU,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new Hn(qt),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||$e("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new IU),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function bU(){return new Ai(et.comparator)}function EU(){return new Ai(et.comparator)}const t4={asc:"ASCENDING",desc:"DESCENDING"},n4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class i4{constructor(t,e){this.databaseId=t,this.gt=e}}function d0(n,t){return n.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function TU(n,t){return n.gt?t.toBase64():t.toUint8Array()}function r4(n,t){return d0(n,t.toTimestamp())}function br(n){return Ht(!!n),jt.fromTimestamp(function(t){const e=eh(t);return new fi(e.seconds,e.nanos)}(n))}function q1(n,t){return(e=n,new _n(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function DU(n){const t=_n.fromString(n);return Ht(NU(t)),t}function h0(n,t){return q1(n.databaseId,t.path)}function tu(n,t){const e=DU(t);if(e.get(1)!==n.databaseId.projectId)throw new Ve(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ve(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new et(AU(e))}function Z1(n,t){return q1(n.databaseId,t)}function SU(n){const t=DU(n);return 4===t.length?_n.emptyPath():AU(t)}function f0(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AU(n){return Ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xU(n,t,e){return{name:h0(n,t),fields:e.value.mapValue.fields}}function MU(n,t,e){const i=tu(n,t.name),r=br(t.updateTime),s=new Ur({mapValue:{fields:t.fields}}),c=ii.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function p0(n,t){let e;if(t instanceof qm)e={update:xU(n,t.key,t.value)};else if(t instanceof Zm)e={delete:h0(n,t.key)};else if(t instanceof ic)e={update:xU(n,t.key,t.data),updateMask:f4(t.fieldMask)};else{if(!(t instanceof z1))return mt();e={verify:h0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof Wm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ep)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof tp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zm)return{fieldPath:s.field.canonicalString(),increment:c.yt};throw mt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:r4(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:mt()),e;var r}function K1(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?pi.updateTime(br(r.updateTime)):void 0!==r.exists?pi.exists(r.exists):pi.none():pi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let h=null;"setToServerValue"in c?(Ht("REQUEST_TIME"===c.setToServerValue),h=new Wm):"appendMissingElements"in c?h=new ep(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new tp(c.removeAllFromArray.values||[]):"increment"in c?h=new zm(s,c.increment):mt();const g=Si.fromServerFormat(c.fieldPath);return new s0(g,h)}(n,r)):[];var r;if(t.update){const r=tu(n,t.update.name),s=new Ur({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Fo((t.updateMask.fieldPaths||[]).map(y=>Si.fromServerFormat(y)));return new ic(r,s,c,e,i)}return new qm(r,s,e,i)}if(t.delete){const r=tu(n,t.delete);return new Zm(r,e)}if(t.verify){const r=tu(n,t.verify);return new z1(r,e)}return mt()}function kU(n,t){return{documents:[Z1(n,t.path)]}}function Y1(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=Z1(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=Z1(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(g){if(0===g.length)return;const y=g.map(b=>function(D){if("=="===D.op){if(B2(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NAN"}};if(U2(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(B2(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NOT_NAN"}};if(U2(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Km(D.field),op:c4(D.op),value:D.value}}}(b));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(g){if(0!==g.length)return g.map(y=>{return{field:Km((b=y).field),direction:u4(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(y=t.limit,n.gt||Qw(y)?y:{value:y});var y,h,g;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(g=t.endAt).inclusive,values:g.position}),e}function OU(n){let t=SU(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Ht(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=RU(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(b=>{return new jm(Ym((D=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;e.limit&&(h=function(b){let D;return D="object"==typeof b?b.value:b,Qw(D)?null:D}(e.limit));let g=null;var b;e.startAt&&(g=new rh((b=e.startAt).values||[],!!b.before));let y=null;return e.endAt&&(y=function(b){return new rh(b.values||[],!b.before)}(e.endAt)),Q2(t,r,c,s,h,"F",g,y)}function RU(n){return n?void 0!==n.unaryFilter?[h4(n)]:void 0!==n.fieldFilter?[d4(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>RU(t)).reduce((t,e)=>t.concat(e)):mt():[]}function u4(n){return t4[n]}function c4(n){return n4[n]}function Km(n){return{fieldPath:n.canonicalString()}}function Ym(n){return Si.fromServerFormat(n.fieldPath)}function d4(n){return Br.create(Ym(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}function h4(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Ym(n.unaryFilter.field);return Br.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Ym(n.unaryFilter.field);return Br.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ym(n.unaryFilter.field);return Br.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ym(n.unaryFilter.field);return Br.create(r,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}function f4(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function NU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ts(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=PU(t)),t=p4(n.get(e),t);return PU(t)}function p4(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function PU(n){return n+"\x01\x01"}function nu(n){const t=n.length;if(Ht(t>=2),2===t)return Ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_n.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&mt(),n.charAt(c+1)){case"\x01":const h=n.substring(s,c);let g;0===r.length?g=h:(r+=h,g=r,r=""),i.push(g);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:mt()}s=c+2}return new _n(i)}const FU=["userId","batchId"];function ED(n,t){return[n,Ts(t)]}function LU(n,t,e){return[n,Ts(t),e]}const g4={},m4=["prefixPath","collectionGroup","readTime","documentId"],_4=["prefixPath","collectionGroup","documentId"],y4=["collectionGroup","readTime","prefixPath","documentId"],v4=["canonicalId","targetId"],w4=["targetId","path"],C4=["path","targetId"],I4=["collectionId","parent"],b4=["indexId","uid"],E4=["uid","sequenceNumber"],T4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D4=["indexId","uid","orderedDocumentKey"],S4=["userId","collectionPath","documentId"],A4=["userId","collectionPath","largestBatchId"],x4=["userId","collectionGroup","largestBatchId"],VU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M4=[...VU,"documentOverlays"],UU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BU=UU,k4=[...BU,"indexConfiguration","indexState","indexEntries"];class Q1 extends k2{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function Er(n,t){const e=rt(n);return wl.M(e.ie,t)}class J1{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&qz(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=o0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=o0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=vU();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let h=this.applyToLocalView(c,s.mutatedFields);h=e.has(r.key)?null:h;const g=cU(c,h);null!==g&&i.set(r.key,g),c.isValidDocument()||c.convertToNoDocument(jt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),nn())}isEqual(t){return this.batchId===t.batchId&&Um(this.mutations,t.mutations,(e,i)=>dU(e,i))&&Um(this.baseMutations,t.baseMutations,(e,i)=>dU(e,i))}}class X1{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Ht(t.mutations.length===i.length);let r=Qz;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new X1(t,e,i,r)}}class eO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oh{constructor(t,e,i,r,s=jt.min(),c=jt.min(),h=ur.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(t){return new oh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class HU{constructor(t){this.re=t}}function jU(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:TD(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:h0(r=n.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:d0(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:np(t.version)};else{if(!t.isUnknownDocument())return mt();i.unknownDocument={path:e.path.toArray(),version:np(t.version)}}var r,s;return i}function TD(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function np(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ip(n){const t=new fi(n.seconds,n.nanoseconds);return jt.fromTimestamp(t)}function rp(n,t){const e=(t.baseMutations||[]).map(s=>K1(n.re,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>K1(n.re,s)),r=fi.fromMillis(t.localWriteTimeMs);return new J1(t.batchId,r,e,i)}function g0(n){const t=ip(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?ip(n.lastLimboFreeSnapshotVersion):jt.min();let i;var r;return void 0!==n.query.documents?(Ht(1===(r=n.query).documents.length),i=Es(Gm(SU(r.documents[0])))):i=Es(OU(n.query)),new oh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,ur.fromBase64String(n.resumeToken))}function GU(n,t){const e=np(t.snapshotVersion),i=np(t.lastLimboFreeSnapshotVersion);let r;r=mD(t.target)?kU(n.re,t.target):Y1(n.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Xf(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function tO(n){const t=OU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yD(t,t.limit,"L"):t}function nO(n,t){return new eO(t.largestBatchId,K1(n.re,t.overlayMutation))}function $U(n,t){const e=t.path.lastSegment();return[n,Ts(t.path.popLast()),e]}function WU(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:np(i.readTime),documentKey:Ts(i.documentKey.path),largestBatchId:i.largestBatchId}}class R4{getBundleMetadata(t,e){return zU(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:ip(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return zU(t).put({bundleId:(i=e).id,createTime:np(br(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return qU(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:tO(r.bundledQuery),readTime:ip(r.readTime)};var r})}saveNamedQuery(t,e){return qU(t).put({name:(i=e).name,readTime:np(br(i.readTime)),bundledQuery:i.bundledQuery});var i}}function zU(n){return Er(n,"bundles")}function qU(n){return Er(n,"namedQueries")}class DD{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new DD(t,e.uid||"")}getOverlay(t,e){return m0(t).get($U(this.userId,e)).next(i=>i?nO(this.It,i):null)}getOverlays(t,e){const i=eu();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const h=new eO(e,c);r.push(this.ue(t,h))}),he.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Ts(c.getCollectionPath())));const s=[];return r.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(m0(t).Y("collectionPathOverlayIndex",h))}),he.waitFor(s)}getOverlaysForCollection(t,e,i){const r=eu(),s=Ts(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return m0(t).W("collectionPathOverlayIndex",c).next(h=>{for(const g of h){const y=nO(this.It,g);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=eu();let c;const h=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return m0(t).Z({index:"collectionGroupOverlayIndex",range:h},(g,y,b)=>{const D=nO(this.It,y);s.size()<r||D.largestBatchId===c?(s.set(D.getKey(),D),c=D.largestBatchId):b.done()}).next(()=>s)}ue(t,e){return m0(t).put(function(i,r,s){const[c,h,g]=$U(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:p0(i.re,s.mutation)}}(this.It,this.userId,e))}}function m0(n){return Er(n,"documentOverlays")}class sp{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(xi(t.integerValue));else if("doubleValue"in t){const i=xi(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),Jw(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(Yf(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?H2(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):mt()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const r of Object.keys(i))this._e(r,e),this.ae(i[r],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const r of i)this.ae(r,e)}ge(t,e){this.le(e,37),et.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function N4(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function ZU(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=N4(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}sp.Te=new sp;class P4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=e.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(t){const e=this.Ce(t),i=ZU(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Ne(t){const e=this.Ce(t),i=ZU(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Oe(0),this.Oe(255)):255===e?(this.Oe(255),this.Oe(0)):this.Oe(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class F4{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class L4{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Me()}}class _0{constructor(){this.Be=new P4,this.Le=new F4(this.Be),this.Ue=new L4(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class op{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new op(this.indexId,this.documentKey,this.arrayValue,i)}}function ap(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=KU(n.arrayValue,t.arrayValue),0!==e?e:(e=KU(n.directionalValue,t.directionalValue),0!==e?e:et.comparator(n.documentKey,t.documentKey)))}function KU(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class V4{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=N1(t);if(void 0!==e&&!this.ze(e))return!1;const i=qf(t);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const c=i[r];if(!this.He(this.je,c)||!this.Je(this.Ge[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],c))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class U4{constructor(){this.Ye=new iO}addToCollectionParentIndex(t,e){return this.Ye.add(e),he.resolve()}getCollectionParents(t,e){return he.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return he.resolve()}deleteFieldIndex(t,e){return he.resolve()}getDocumentsMatchingTarget(t,e){return he.resolve(null)}getIndexType(t,e){return he.resolve(0)}getFieldIndexes(t,e){return he.resolve([])}getNextCollectionGroupToUpdate(t){return he.resolve(null)}getMinOffset(t,e){return he.resolve(Po.min())}getMinOffsetFromCollectionGroup(t,e){return he.resolve(Po.min())}updateCollectionGroup(t,e,i){return he.resolve()}updateIndexEntries(t,e){return he.resolve()}}class iO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Hn(_n.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Hn(_n.comparator)).toArray()}}const SD=new Uint8Array(0);class B4{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new iO,this.Ze=new sh(i=>Xf(i),(i,r)=>n0(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:Ts(r)};return YU(t).put(s)}return he.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[S2(e),""],!1,!0);return YU(t).W(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(nu(c.parent))}return i})}addFieldIndex(t,e){const i=AD(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=v0(t);return s.next(h=>{c.put(WU(h,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=AD(t),r=v0(t),s=y0(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=y0(t);let r=!0;const s=new Map;return he.forEach(this.tn(e),c=>this.en(t,c).next(h=>{r&&(r=!!h),s.set(c,h)})).next(()=>{if(r){let c=nn();const h=[];return he.forEach(s,(g,y)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=g,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${Xf(e)}`);const D=function(qe,Je){const gt=N1(Je);if(void 0===gt)return null;for(const xt of _D(qe,gt.fieldPath))switch(xt.op){case"array-contains-any":return xt.value.arrayValue.values||[];case"array-contains":return[xt.value]}return null}(y,g),x=function(qe,Je){const gt=new Map;for(const xt of qf(Je))for(const jn of _D(qe,xt.fieldPath))switch(jn.op){case"==":case"in":gt.set(xt.fieldPath.canonicalString(),jn.value);break;case"not-in":case"!=":return gt.set(xt.fieldPath.canonicalString(),jn.value),Array.from(gt.values())}return null}(y,g),F=function(qe,Je){const gt=[];let xt=!0;for(const jn of qf(Je)){const Ui=0===jn.kind?z2(qe,jn.fieldPath,qe.startAt):q2(qe,jn.fieldPath,qe.startAt);gt.push(Ui.value),xt&&(xt=Ui.inclusive)}return new rh(gt,xt)}(y,g),G=function(qe,Je){const gt=[];let xt=!0;for(const jn of qf(Je)){const Ui=0===jn.kind?q2(qe,jn.fieldPath,qe.endAt):z2(qe,jn.fieldPath,qe.endAt);gt.push(Ui.value),xt&&(xt=Ui.inclusive)}return new rh(gt,xt)}(y,g),ne=this.nn(g,y,F),te=this.nn(g,y,G),ze=this.sn(g,y,x),Ke=this.rn(g.indexId,D,ne,F.inclusive,te,G.inclusive,ze);return he.forEach(Ke,qe=>i.J(qe,e.limit).next(Je=>{Je.forEach(gt=>{const xt=et.fromSegments(gt.documentKey);c.has(xt)||(c=c.add(xt),h.push(xt))})}))}).next(()=>h)}return he.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,r,s,c,h){const g=(null!=e?e.length:1)*Math.max(i.length,s.length),y=g/(null!=e?e.length:1),b=[];for(let D=0;D<g;++D){const x=e?this.on(e[D/y]):SD,F=this.un(t,x,i[D%y],r),G=this.cn(t,x,s[D%y],c),ne=h.map(te=>this.un(t,x,te,!0));b.push(...this.createRange(F,G,ne))}return b}un(t,e,i,r){const s=new op(t,et.empty(),e,i);return r?s:s.Ke()}cn(t,e,i,r){const s=new op(t,et.empty(),e,i);return r?s.Ke():s}en(t,e){const i=new V4(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const h of s)i.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(t,e){let i=2;return he.forEach(this.tn(e),r=>this.en(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let h=new Hn(Si.comparator),g=!1;for(const y of c.filters){const b=y;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?g=!0:h=h.add(b.field))}for(const y of c.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(g?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new _0;for(const r of qf(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.qe(r.kind);sp.Te.ce(s,c)}return i.$e()}on(t){const e=new _0;return sp.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new _0;return sp.Te.ce(Jf(this.databaseId,e),i.qe(function(r){const s=qf(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let r=[];r.push(new _0);let s=0;for(const c of qf(t)){const h=i[s++];for(const g of r)if(this.ln(e,c.fieldPath)&&e0(h))r=this.fn(r,c,h);else{const y=g.qe(c.kind);sp.Te.ce(h,y)}}return this.dn(r)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const h of r){const g=new _0;g.seed(h.$e()),sp.Te.ce(c,g.qe(e.kind)),s.push(g)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof Br&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=AD(t),r=v0(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const c=[];return he.forEach(s,h=>r.get([h.indexId,this.uid]).next(g=>{c.push(function(y,b){const D=b?new Zw(b.sequenceNumber,new Po(ip(b.readTime),new et(nu(b.documentKey)),b.largestBatchId)):Zw.empty(),x=y.fields.map(([F,G])=>new dD(Si.fromServerFormat(F),G));return new cD(y.indexId,y.collectionGroup,x,D)}(h,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:qt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=AD(t),s=v0(t);return this._n(t).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>he.forEach(h,g=>s.put(WU(g.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return he.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),he.forEach(h,g=>this.wn(t,r,g).next(y=>{const b=this.mn(s,g);return y.isEqual(b)?he.resolve():this.gn(t,s,g,y,b)}))))})}yn(t,e,i,r){return y0(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,r){return y0(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const r=y0(t);let s=new Hn(ap);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(c,h)=>{s=s.add(new op(i.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>s)}mn(t,e){let i=new Hn(ap);const r=this.an(e,t);if(null==r)return i;const s=N1(e);if(null!=s){const c=t.data.field(s.fieldPath);if(e0(c))for(const h of c.arrayValue.values||[])i=i.add(new op(e.indexId,t.key,this.on(h),r))}else i=i.add(new op(e.indexId,t.key,SD,r));return i}gn(t,e,i,r,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(h,g,y,b,D){const x=h.getIterator(),F=g.getIterator();let G=Bm(x),ne=Bm(F);for(;G||ne;){let te=!1,ze=!1;if(G&&ne){const Ke=y(G,ne);Ke<0?ze=!0:Ke>0&&(te=!0)}else null!=G?ze=!0:te=!0;te?(b(ne),ne=Bm(F)):ze?(D(G),G=Bm(x)):(G=Bm(x),ne=Bm(F))}}(r,s,ap,h=>{c.push(this.yn(t,e,i,h))},h=>{c.push(this.pn(t,e,i,h))}),he.waitFor(c)}_n(t){let e=1;return v0(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,h)=>ap(c,h)).filter((c,h,g)=>!h||0!==ap(c,g[h-1]));const r=[];r.push(t);for(const c of i){const h=ap(c,t),g=ap(c,e);if(0===h)r[0]=t.Ke();else if(h>0&&g<0)r.push(c),r.push(c.Ke());else if(g>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,SD,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,SD,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(QU)}getMinOffset(t,e){return he.mapArray(this.tn(e),i=>this.en(t,i).next(r=>r||mt())).next(QU)}}function YU(n){return Er(n,"collectionParents")}function y0(n){return Er(n,"indexEntries")}function AD(n){return Er(n,"indexConfiguration")}function v0(n){return Er(n,"indexState")}function QU(n){Ht(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;P1(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Po(t.readTime,t.documentKey,e)}const JU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Js{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Js(t,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XU(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let h=0;const g=i.Z({range:c},(b,D,x)=>(h++,x.delete()));s.push(g.next(()=>{Ht(1===h)}));const y=[];for(const b of e.mutations){const D=LU(t,b.key.path,e.batchId);s.push(r.delete(D)),y.push(b.key)}return he.waitFor(s).next(()=>y)}function xD(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw mt();t=n.noDocument}return JSON.stringify(t).length}Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(41943040,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);class MD{constructor(t,e,i,r){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(t,e,i,r){Ht(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new MD(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ah(t).Z({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Qm(t),c=ah(t);return c.add({}).next(h=>{Ht("number"==typeof h);const g=new J1(h,e,i,r),y=function(x,F,G){const ne=G.baseMutations.map(ze=>p0(x.re,ze)),te=G.mutations.map(ze=>p0(x.re,ze));return{userId:F,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ne,mutations:te}}(this.It,this.userId,g),b=[];let D=new Hn((x,F)=>qt(x.canonicalString(),F.canonicalString()));for(const x of r){const F=LU(this.userId,x.key.path,h);D=D.add(x.key.path.popLast()),b.push(c.put(y)),b.push(s.put(F,g4))}return D.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(t,x))}),t.addOnCommittedListener(()=>{this.In[h]=g.keys()}),he.waitFor(b).next(()=>g)})}lookupMutationBatch(t,e){return ah(t).get(e).next(i=>i?(Ht(i.userId===this.userId),rp(this.It,i)):null)}Tn(t,e){return this.In[e]?he.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ah(t).Z({index:"userMutationsIndex",range:r},(c,h,g)=>{h.userId===this.userId&&(Ht(h.batchId>=i),s=rp(this.It,h)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ah(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ah(t).W("userMutationsIndex",e).next(i=>i.map(r=>rp(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=ED(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Qm(t).Z({range:r},(c,h,g)=>{const[y,b,D]=c,x=nu(b);if(y===this.userId&&e.path.isEqual(x))return ah(t).get(D).next(F=>{if(!F)throw mt();Ht(F.userId===this.userId),s.push(rp(this.It,F))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Hn(qt);const r=[];return e.forEach(s=>{const c=ED(this.userId,s.path),h=IDBKeyRange.lowerBound(c),g=Qm(t).Z({range:h},(y,b,D)=>{const[x,F,G]=y,ne=nu(F);x===this.userId&&s.path.isEqual(ne)?i=i.add(G):D.done()});r.push(g)}),he.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=ED(this.userId,i),c=IDBKeyRange.lowerBound(s);let h=new Hn(qt);return Qm(t).Z({range:c},(g,y,b)=>{const[D,x,F]=g,G=nu(x);D===this.userId&&i.isPrefixOf(G)?G.length===r&&(h=h.add(F)):b.done()}).next(()=>this.En(t,h))}En(t,e){const i=[],r=[];return e.forEach(s=>{r.push(ah(t).get(s).next(c=>{if(null===c)throw mt();Ht(c.userId===this.userId),i.push(rp(this.It,c))}))}),he.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return XU(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),he.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return he.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Qm(t).Z({range:i},(s,c,h)=>{if(s[0]===this.userId){const g=nu(s[1]);r.push(g)}else h.done()}).next(()=>{Ht(0===r.length)})})}containsKey(t,e){return eB(t,this.userId,e)}Rn(t){return tB(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function eB(n,t,e){const i=ED(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Qm(n).Z({range:s,X:!0},(h,g,y)=>{const[b,D,x]=h;b===t&&D===r&&(c=!0),y.done()}).next(()=>c)}function ah(n){return Er(n,"mutations")}function Qm(n){return Er(n,"documentMutations")}function tB(n){return Er(n,"mutationQueues")}class lp{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new lp(0)}static vn(){return new lp(-1)}}class H4{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new lp(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>jt.fromTimestamp(new fi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Jm(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Ht(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Jm(t).Z((c,h)=>{const g=g0(h);g.sequenceNumber<=e&&null===i.get(g.targetId)&&(r++,s.push(this.removeTargetData(t,g)))}).next(()=>he.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Jm(t).Z((i,r)=>{const s=g0(r);e(s)})}Vn(t){return nB(t).get("targetGlobalKey").next(e=>(Ht(null!==e),e))}Sn(t,e){return nB(t).put("targetGlobalKey",e)}Dn(t,e){return Jm(t).put(GU(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Xf(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Jm(t).Z({range:r,index:"queryTargetsIndex"},(c,h,g)=>{const y=g0(h);n0(e,y.target)&&(s=y,g.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=lh(t);return e.forEach(c=>{const h=Ts(c.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(t,i,c))}),he.waitFor(r)}removeMatchingKeys(t,e,i){const r=lh(t);return he.forEach(e,s=>{const c=Ts(s.path);return he.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=lh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=lh(t);let s=nn();return r.Z({range:i,X:!0},(c,h,g)=>{const y=nu(c[1]),b=new et(y);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=Ts(e.path),r=IDBKeyRange.bound([i],[S2(i)],!1,!0);let s=0;return lh(t).Z({index:"documentTargetsIndex",X:!0,range:r},([c,h],g,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}se(t,e){return Jm(t).get(e).next(i=>i?g0(i):null)}}function Jm(n){return Er(n,"targets")}function nB(n){return Er(n,"targetGlobal")}function lh(n){return Er(n,"targetDocuments")}function iB([n,t],[e,i]){const r=qt(n,e);return 0===r?qt(t,i):r}class j4{constructor(t){this.xn=t,this.buffer=new Hn(iB),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();iB(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class G4{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Ce.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Xd(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Jd(i)}yield e.Fn(3e5)}))}}class $4{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return he.resolve(Ys.at);const i=new j4(e);return this.$n.forEachTarget(t,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(JU)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JU):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,r,s,c,h,g,y;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,c=Date.now(),this.nthSequenceNumber(t,r))).next(D=>(i=D,h=Date.now(),this.removeTargets(t,i,e))).next(D=>(s=D,g=Date.now(),this.removeOrphanedDocuments(t,i))).next(D=>(y=Date.now(),O1()<=Eo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${r} in `+(h-c)+`ms\n\tRemoved ${s} targets in `+(g-h)+`ms\n\tRemoved ${D} documents in `+(y-g)+`ms\nTotal Duration: ${y-b}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class W4{constructor(t,e){this.db=t,this.garbageCollector=new $4(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return kD(t,i)}removeReference(t,e,i){return kD(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return kD(t,e)}Gn(t,e){return function(i,r){let s=!1;return tB(i).tt(c=>eB(i,c,r).next(h=>(h&&(s=!0),he.resolve(!h)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(t,(c,h)=>{if(h<=e){const g=this.Gn(t,c).next(y=>{if(!y)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,jt.min()),lh(t).delete([0,Ts(c.path)])))});r.push(g)}}).next(()=>he.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return kD(t,e)}Kn(t,e){const i=lh(t);let r,s=Ys.at;return i.Z({index:"documentTargetsIndex"},([c,h],{path:g,sequenceNumber:y})=>{0===c?(s!==Ys.at&&e(new et(nu(r)),s),s=y,r=g):s=Ys.at}).next(()=>{s!==Ys.at&&e(new et(nu(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function kD(n,t){return lh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ts(t.path),sequenceNumber:i}));var i}class rB{constructor(){this.changes=new sh(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ii.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?he.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class z4{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return up(t).put(i)}removeEntry(t,e,i){return up(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],TD(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=ii.newInvalidDocument(e);return up(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(w0(e))},(r,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:ii.newInvalidDocument(e)};return up(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(w0(e))},(r,s)=>{i={document:this.jn(e,s),size:xD(s)}}).next(()=>i)}getEntries(t,e){let i=Qs();return this.zn(t,e,(r,s)=>{const c=this.jn(r,s);i=i.insert(r,c)}).next(()=>i)}Hn(t,e){let i=Qs(),r=new Ai(et.comparator);return this.zn(t,e,(s,c)=>{const h=this.jn(s,c);i=i.insert(s,h),r=r.insert(s,xD(c))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return he.resolve();let r=new Hn(lB);e.forEach(g=>r=r.add(g));const s=IDBKeyRange.bound(w0(r.first()),w0(r.last())),c=r.getIterator();let h=c.getNext();return up(t).Z({index:"documentKeyIndex",range:s},(g,y,b)=>{const D=et.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&lB(h,D)<0;)i(h,null),h=c.getNext();h&&h.isEqual(D)&&(i(h,y),h=c.hasNext()?c.getNext():null),h?b.j(w0(h)):b.done()}).next(()=>{for(;h;)i(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),TD(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return up(t).W(IDBKeyRange.bound(r,s,!0)).next(c=>{let h=Qs();for(const g of c){const y=this.jn(et.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(t,e,i,r){let s=Qs();const c=aB(e,i),h=aB(e,Po.max());return up(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(g,y,b)=>{const D=this.jn(et.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new q4(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return oB(t).get("remoteDocumentGlobalKey").next(e=>(Ht(!!e),e))}Qn(t,e){return oB(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function O4(n,t){let e;if(t.document)e=MU(n.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=et.fromSegments(t.noDocument.path),r=ip(t.noDocument.readTime);e=ii.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return mt();{const i=et.fromSegments(t.unknownDocument.path),r=ip(t.unknownDocument.version);e=ii.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new fi(i[0],i[1]);return jt.fromTimestamp(r)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual(jt.min()))return i}return ii.newInvalidDocument(t)}}function sB(n){return new z4(n)}class q4 extends rB{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new sh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Hn((s,c)=>qt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const h=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,h.readTime)),c.isValidDocument()){const g=jU(this.Yn.It,c);r=r.add(s.path.popLast()),i+=xD(g)-h.size,e.push(this.Yn.addEntry(t,s,g))}else if(i-=h.size,this.trackRemovals){const g=jU(this.Yn.It,c.convertToNoDocument(jt.min()));e.push(this.Yn.addEntry(t,s,g))}}),r.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),he.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function oB(n){return Er(n,"remoteDocumentGlobal")}function up(n){return Er(n,"remoteDocumentsV14")}function w0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function aB(n,t){const e=t.documentKey.path.toArray();return[n,TD(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function lB(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=qt(e[s],i[s]),r)return r;return r=qt(e.length,i.length),r||(r=qt(e[e.length-2],i[i.length-2]),r||qt(e[e.length-1],i[i.length-1]))}class Z4{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class uB{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&o0(i.mutation,r,Fo.empty(),fi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,nn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=nn()){const r=eu();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=a0();return s.forEach((h,g)=>{c=c.insert(h,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=eu();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,nn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,r){let s=Qs();const c=l0(),h=l0();return e.forEach((g,y)=>{const b=i.get(y.key);r.has(y.key)&&(void 0===b||b.mutation instanceof ic)?s=s.insert(y.key,y):void 0!==b&&(c.set(y.key,b.mutation.getFieldMask()),o0(b.mutation,y,b.mutation.getFieldMask(),fi.now()))}),this.recalculateAndSaveOverlays(t,s).next(g=>(g.forEach((y,b)=>c.set(y,b)),e.forEach((y,b)=>{var D;return h.set(y,new Z4(b,null!==(D=c.get(y))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(t,e){const i=l0();let r=new Ai((c,h)=>c-h),s=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(g=>{const y=e.get(g);if(null===y)return;let b=i.get(g)||Fo.empty();b=h.applyToLocalView(y,b),i.set(g,b);const D=(r.get(h.batchId)||nn()).add(g);r=r.insert(h.batchId,D)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),y=g.key,b=g.value,D=vU();b.forEach(x=>{if(!s.has(x)){const F=cU(e.get(x),i.get(x));null!==F&&D.set(x,F),s=s.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(t,y,D))}return he.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return et.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):G1(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):he.resolve(eu());let h=-1,g=s;return c.next(y=>he.forEach(y,(b,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),s.get(b)?he.resolve():this.getBaseDocument(t,b,D).next(x=>{g=g.insert(b,x)}))).next(()=>this.populateOverlays(t,y,s)).next(()=>this.computeViews(t,g,y,nn())).next(b=>({batchId:h,changes:yU(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new et(e)).next(i=>{let r=a0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=a0();return this.indexManager.getCollectionParents(t,r).next(c=>he.forEach(c,h=>{const g=(y=e,b=h.child(r),new nc(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(t,g,i).next(y=>{y.forEach((b,D)=>{s=s.insert(b,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((h,g)=>{const y=g.getKey();null===r.get(y)&&(r=r.insert(y,ii.newInvalidDocument(y)))});let c=a0();return r.forEach((h,g)=>{const y=s.get(h);void 0!==y&&o0(y.mutation,g,Fo.empty(),fi.now()),W1(e,g)&&(c=c.insert(h,g))}),c})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):he.resolve(ii.newInvalidDocument(e))}}class K4{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return he.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:br(i.createTime)}),he.resolve()}getNamedQuery(t,e){return he.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:tO(i.bundledQuery),readTime:br(i.readTime)}),he.resolve();var i}}class Y4{constructor(){this.overlays=new Ai(et.comparator),this.es=new Map}getOverlay(t,e){return he.resolve(this.overlays.get(e))}getOverlays(t,e){const i=eu();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ue(t,e,s)}),he.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),he.resolve()}getOverlaysForCollection(t,e,i){const r=eu(),s=e.length+1,c=new et(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===s&&g.largestBatchId>i&&r.set(g.getKey(),g)}return he.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Ai((y,b)=>y-b);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let b=s.get(y.largestBatchId);null===b&&(b=eu(),s=s.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const h=eu(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,b)=>h.set(y,b)),!(h.size()>=r)););return he.resolve(h)}ue(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new eO(e,i));let s=this.es.get(e);void 0===s&&(s=nn(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class rO{constructor(){this.ns=new Hn(Tr.ss),this.rs=new Hn(Tr.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new Tr(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new Tr(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new et(new _n([])),i=new Tr(e,t),r=new Tr(e,t+1),s=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new et(new _n([])),i=new Tr(e,t),r=new Tr(e,t+1);let s=nn();return this.rs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Tr(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Tr{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return et.comparator(t.key,e.key)||qt(t._s,e._s)}static os(t,e){return qt(t._s,e._s)||et.comparator(t.key,e.key)}}class Q4{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Hn(Tr.ss)}checkEmpty(t){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.ws;this.ws++;const c=new J1(s,e,i,r);this.mutationQueue.push(c);for(const h of r)this.gs=this.gs.add(new Tr(h.key,s)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return he.resolve(c)}lookupMutationBatch(t,e){return he.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),s=r<0?0:r;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Tr(e,0),r=new Tr(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],c=>{const h=this.ys(c._s);s.push(h)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Hn(qt);return e.forEach(r=>{const s=new Tr(r,0),c=new Tr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],h=>{i=i.add(h._s)})}),he.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;et.isDocumentKey(s)||(s=s.child(""));const c=new Tr(new et(s),0);let h=new Hn(qt);return this.gs.forEachWhile(g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(g._s)),!0)},c),he.resolve(this.Is(h))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Ht(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return he.forEach(e.mutations,r=>{const s=new Tr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new Tr(e,0),r=this.gs.firstAfterOrEqual(i);return he.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return he.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class J4{constructor(t){this.Es=t,this.docs=new Ai(et.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return he.resolve(i?i.document.mutableCopy():ii.newInvalidDocument(e))}getEntries(t,e){let i=Qs();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ii.newInvalidDocument(r))}),he.resolve(i)}getAllFromCollection(t,e,i){let r=Qs();const s=new et(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!e.isPrefixOf(h.path))break;h.path.length>e.length+1||P1(x2(g),i)<=0||(r=r.insert(g.key,g.mutableCopy()))}return he.resolve(r)}getAllFromCollectionGroup(t,e,i,r){mt()}As(t,e){return he.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new X4(this)}getSize(t){return he.resolve(this.size)}}class X4 extends rB{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),he.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class eq{constructor(t){this.persistence=t,this.Rs=new sh(e=>Xf(e),n0),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new rO,this.targetCount=0,this.vs=lp.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),he.resolve()}getLastRemoteSnapshotVersion(t){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return he.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),he.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new lp(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,he.resolve()}updateTargetData(t,e){return this.Dn(e),he.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,he.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Rs.forEach((c,h)=>{h.sequenceNumber<=e&&null===i.get(h.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),he.waitFor(s).next(()=>r)}getTargetCount(t){return he.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return he.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),he.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),he.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),he.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return he.resolve(i)}containsKey(t,e){return he.resolve(this.Ps.containsKey(e))}}class cB{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new Ys(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new eq(this),this.indexManager=new U4,this.remoteDocumentCache=new J4(i=>this.referenceDelegate.xs(i)),this.It=new HU(e),this.Ns=new K4(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Y4,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new Q4(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("MemoryPersistence","Starting transaction:",t);const r=new tq(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(t,e){return he.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class tq extends k2{constructor(t){super(),this.currentSequenceNumber=t}}class OD{constructor(t){this.persistence=t,this.Fs=new rO,this.$s=null}static Bs(t){return new OD(t)}get Ls(){if(this.$s)return this.$s;throw mt()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),he.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),he.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),he.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,i=>{const r=et.fromPath(i);return this.Us(t,r).next(s=>{s||e.removeEntry(r,jt.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return he.or([()=>he.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class nq{constructor(t){this.It=t}$(t,e,i,r){const s=new hD("createOrUpgrade",e);var h;i<1&&r>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FU,{unique:!0}),h.createObjectStore("documentMutations"),dB(t),function(h){h.createObjectStore("remoteDocuments")}(t));let c=he.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),dB(t)),c=c.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(h,g){return g.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FU,{unique:!0});const b=g.store("mutations"),D=y.map(x=>b.put(x));return he.waitFor(D)})}(t,s))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.qs(s))),i<6&&r>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(s))),i<8&&r>=8&&(c=c.next(()=>this.Qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.js(s))),i<11&&r>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:S4});g.createIndex("collectionPathOverlayIndex",A4,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",x4,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:m4});g.createIndex("documentKeyIndex",_4),g.createIndex("collectionGroupIndex",y4)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:b4}).createIndex("sequenceNumberIndex",E4,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:T4}).createIndex("documentKeyIndex",D4,{unique:!1})}(t))),c}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=xD(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>he.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(h=>he.forEach(h,g=>{Ht(g.userId===s.userId);const y=rp(this.It,g);return XU(t,s.userId,y).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((c,h)=>{const g=new _n(c),y=[0,Ts(g)];s.push(e.get(y).next(b=>b?he.resolve():e.put({targetId:0,path:Ts(g),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:I4});const i=e.store("collectionParents"),r=new iO,s=c=>{if(r.add(c)){const h=c.lastSegment(),g=c.popLast();return i.put({collectionId:h,parent:Ts(g)})}};return e.store("remoteDocuments").Z({X:!0},(c,h)=>{const g=new _n(c);return s(g.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([c,h,g],y)=>{const b=nu(h);return s(b.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const s=g0(r),c=GU(this.It,s);return e.put(c)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((s,c)=>{const h=e.store("remoteDocumentsV14"),g=(y=c,y.document?new et(_n.fromString(y.document.name).popFirst(5)):y.noDocument?et.fromSegments(y.noDocument.path):y.unknownDocument?et.fromSegments(y.unknownDocument.path):mt()).path.toArray();var y;const b={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(h.put(b))}).next(()=>he.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=sB(this.It),s=new cB(OD.Bs,this.It.re);return i.W().next(c=>{const h=new Map;return c.forEach(g=>{var y;let b=null!==(y=h.get(g.userId))&&void 0!==y?y:nn();rp(this.It,g).keys().forEach(D=>b=b.add(D)),h.set(g.userId,b)}),he.forEach(h,(g,y)=>{const b=new Ir(y),D=DD.oe(this.It,b),x=s.getIndexManager(b),F=MD.oe(b,this.It,x,s.referenceDelegate);return new uB(r,F,D,x).recalculateAndSaveOverlaysForDocumentKeys(new Q1(e,Ys.at),g).next()})})}}function dB(n){n.createObjectStore("targetDocuments",{keyPath:w4}).createIndex("documentTargetsIndex",C4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",v4,{unique:!0}),n.createObjectStore("targetGlobal")}const sO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class oO{constructor(t,e,i,r,s,c,h,g,y,b,D=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=c,this.document=h,this.Js=y,this.Ys=b,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!oO.C())throw new Ve(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new W4(this,r),this.ii=e+"main",this.It=new HU(g),this.ri=new wl(this.ii,this.Xs,new nq(this.It)),this.Cs=new H4(this.referenceDelegate,this.It),this.remoteDocumentCache=sB(this.It),this.Ns=new R4,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&Li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(ye.FAILED_PRECONDITION,sO);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new Ys(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,Ce.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,Ce.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,Ce.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>RD(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(Xd(t))return $e("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return C0(t).get("owner").next(e=>he.resolve(this.mi(e)))}gi(t){return RD(t).delete(this.clientId)}yi(){var t=this;return(0,Ce.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Er(i,"clientMetadata");return r.W().next(s=>{const c=t.Ii(s,18e5),h=s.filter(g=>-1===c.indexOf(g));return he.forEach(h,g=>r.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?he.resolve(!0):C0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Ve(ye.FAILED_PRECONDITION,sO);return!1}}return!(!this.networkEnabled||!this.inForeground)||RD(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&h)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$e("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ce.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new Q1(e,Ys.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>RD(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return MD.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new B4(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return DD.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Xs)?k4:14===c?BU:13===c?UU:12===c?M4:11===c?VU:void mt();var c;let h;return this.ri.runTransaction(t,r,s,g=>(h=new Q1(g,this.Ss?this.Ss.next():Ys.at),"readwrite-primary"===e?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw Li(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ve(ye.FAILED_PRECONDITION,M2);return i(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>i(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Vi(t){return C0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ve(ye.FAILED_PRECONDITION,sO)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return C0(t).put("owner",e)}static C(){return wl.C()}_i(t){const e=C0(t);return e.get("owner").next(i=>this.mi(i)?($e("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):he.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Li(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return $e("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Li("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){Li("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function C0(n){return Er(n,"owner")}function RD(n){return Er(n,"clientMetadata")}function aO(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class lO{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=nn(),r=nn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new lO(t,e.fromCache,i,r)}}class hB{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(s=>s||this.Oi(t,e,r,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if(J2(e))return he.resolve(null);let i=Es(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=yD(e,null,"F"),i=Es(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=nn(...s);return this.Ni.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(g=>{const y=this.Fi(e,h);return this.$i(e,y,c,g.readTime)?this.ki(t,yD(e,null,"F")):this.Bi(t,y,e,g)}))})))}Oi(t,e,i,r){return J2(e)||r.isEqual(jt.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const c=this.Fi(e,s);return this.$i(e,c,i,r)?this.Mi(t,e):(O1()<=Eo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$1(e)),this.Bi(t,c,e,A2(r,-1)))})}Fi(t,e){let i=new Hn(tU(t));return e.forEach((r,s)=>{W1(t,s)&&(i=i.add(s))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(t,e){return O1()<=Eo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",$1(e)),this.Ni.getDocumentsMatchingQuery(t,e,Po.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class iq{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.It=r,this.Ui=new Ai(qt),this.qi=new sh(s=>Xf(s),n0),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new uB(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function fB(n,t,e,i){return new iq(n,t,e,i)}function pB(n,t){return uO.apply(this,arguments)}function uO(){return uO=(0,Ce.Z)(function*(n,t){const e=rt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],h=[];let g=nn();for(const y of r){c.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of s){h.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return e.localDocuments.getDocuments(i,g).next(y=>({ji:y,removedBatchIds:c,addedBatchIds:h}))})})}),uO.apply(this,arguments)}function rq(n,t){const e=rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(c,h,g,y){const b=g.batch,D=b.keys();let x=he.resolve();return D.forEach(F=>{x=x.next(()=>y.getEntry(h,F)).next(G=>{const ne=g.docVersions.get(F);Ht(null!==ne),G.version.compareTo(ne)<0&&(b.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),y.addEntry(G)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let h=nn();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(h=h.add(c.batch.mutations[g].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function gB(n){const t=rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function sq(n,t){const e=rt(n),i=t.snapshotVersion;let r=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.Ui;const h=[];t.targetChanges.forEach((b,D)=>{const x=r.get(D);if(!x)return;h.push(e.Cs.removeMatchingKeys(s,b.removedDocuments,D).next(()=>e.Cs.addMatchingKeys(s,b.addedDocuments,D)));let F=x.withSequenceNumber(s.currentSequenceNumber);var G,ne,te;t.targetMismatches.has(D)?F=F.withResumeToken(ur.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,i)),r=r.insert(D,F),ne=F,te=b,(0===(G=x).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&h.push(e.Cs.updateTargetData(s,F))});let g=Qs(),y=nn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),h.push(mB(s,c,t.documentUpdates).next(b=>{g=b.Wi,y=b.zi})),!i.isEqual(jt.min())){const b=e.Cs.getLastRemoteSnapshotVersion(s).next(D=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(b)}return he.waitFor(h).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,g,y)).next(()=>g)}).then(s=>(e.Ui=r,s))}function mB(n,t,e){let i=nn(),r=nn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=Qs();return e.forEach((h,g)=>{const y=s.get(h);g.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(h)),g.isNoDocument()&&g.version.isEqual(jt.min())?(t.removeEntry(h,g.readTime),c=c.insert(h,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(t.addEntry(g),c=c.insert(h,g)):$e("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",g.version)}),{Wi:c,zi:r}})}function oq(n,t){const e=rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Xm(n,t){const e=rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(s=>s?(r=s,he.resolve(r)):e.Cs.allocateTargetId(i).next(c=>(r=new oh(t,c,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function e_(n,t,e){return cO.apply(this,arguments)}function cO(){return cO=(0,Ce.Z)(function*(n,t,e){const i=rt(n),r=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Xd(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ui=i.Ui.remove(t),i.qi.delete(r.target)}),cO.apply(this,arguments)}function ND(n,t,e){const i=rt(n);let r=jt.min(),s=nn();return i.persistence.runTransaction("Execute query","readonly",c=>function(h,g,y){const b=rt(h),D=b.qi.get(y);return void 0!==D?he.resolve(b.Ui.get(D)):b.Cs.getTargetData(g,y)}(i,c,Es(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,h.targetId).next(g=>{s=g})}).next(()=>i.Li.getDocumentsMatchingQuery(c,t,e?r:jt.min(),e?s:nn())).next(h=>(vB(i,eU(t),h),{documents:h,Hi:s})))}function _B(n,t){const e=rt(n),i=rt(e.Cs),r=e.Ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(c=>c?c.target:null))}function yB(n,t){const e=rt(n),i=e.Ki.get(t)||jt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,A2(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(vB(e,t,r),r))}function vB(n,t,e){let i=n.Ki.get(t)||jt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(t,i)}function dO(){return dO=(0,Ce.Z)(function*(n,t,e,i){const r=rt(n);let s=nn(),c=Qs();for(const y of e){const b=t.Ji(y.metadata.name);y.document&&(s=s.add(b));const D=t.Yi(y);D.setReadTime(t.Xi(y.metadata.readTime)),c=c.insert(b,D)}const h=r.Gi.newChangeBuffer({trackRemovals:!0}),g=yield Xm(r,(y=i,Es(Gm(_n.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>mB(y,h,c).next(b=>(h.apply(y),b)).next(b=>r.Cs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>r.Cs.addMatchingKeys(y,s,g.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,b.Wi,b.zi)).next(()=>b.Wi)))}),dO.apply(this,arguments)}function lq(n,t){return hO.apply(this,arguments)}function hO(){return hO=(0,Ce.Z)(function*(n,t,e=nn()){const i=yield Xm(n,Es(tO(t.bundledQuery))),r=rt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=br(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(s,t);const h=i.withResumeToken(ur.EMPTY_BYTE_STRING,c);return r.Ui=r.Ui.insert(h.targetId,h),r.Cs.updateTargetData(s,h).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,t))})}),hO.apply(this,arguments)}function wB(n,t){return`firestore_clients_${n}_${t}`}function CB(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function fO(n,t){return`firestore_targets_${n}_${t}`}class PD{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ve(r.error.code,r.error.message))),c?new PD(t,e,r.state,s):(Li("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class I0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ve(i.error.code,i.error.message))),s?new I0(t,i.state,r):(Li("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class FD{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=ID();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=L2(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new FD(t,s):(Li("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class pO{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new pO(e.clientId,e.onlineState):(Li("SharedClientState",`Failed to parse online state: ${t}`),null)}}class gO{constructor(){this.activeTargetIds=ID()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mO{constructor(t,e,i,r,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ai(qt),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=wB(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new gO),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ce.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const s=t.getItem(wB(t.persistenceKey,r));if(s){const c=FD.Zi(r,s);c&&(t.ur=t.ur.insert(c.clientId,c))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(fO(this.persistenceKey,t));if(i){const r=I0.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(fO(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $e("SharedClientState","READ",t,e),e}setItem(t,e){$e("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$e("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if($e("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ce.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(s){let c=Ys.at;if(null!=s)try{const h=JSON.parse(s);Ht("number"==typeof h),c=h}catch(h){Li("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(i.newValue);r!==Ys.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new PD(this.currentUser,t,e,i),s=CB(this.persistenceKey,this.currentUser,t);this.setItem(s,r.tr())}Er(t){const e=CB(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=fO(this.persistenceKey,t),s=new I0(t,e,i);this.setItem(r,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return FD.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return PD.Zi(new Ir(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return I0.Zi(r,e)}yr(t){return pO.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,Ce.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);$e("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),s=this.Ir(i),c=[],h=[];return s.forEach(g=>{r.has(g)||c.push(g)}),r.forEach(g=>{s.has(g)||h.push(g)}),this.syncEngine.Br(c,h).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=ID();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class IB{constructor(){this.Lr=new gO,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new gO,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class uq{qr(t){}shutdown(){}}class bB{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dq{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class hq extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,r,s){const c=this.ho(t,e);$e("RestConnection","Sending: ",c,i);const h={};return this.lo(h,r,s),this.fo(t,c,h,i).then(g=>($e("RestConnection","Received: ",g),g),g=>{throw zf("RestConnection",`${t} failed with error: `,g,"url: ",c,"request:",i),g})}_o(t,e,i,r,s,c){return this.ao(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Vm,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.oo}/v1/${e}:${cq[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,c)=>{const h=new cz;h.setWithCredentials(!0),h.listenOnce(az.COMPLETE,()=>{var y;try{switch(h.getLastErrorCode()){case k1.NO_ERROR:const b=h.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),s(b);break;case k1.TIMEOUT:$e("Connection",'RPC "'+t+'" timed out'),c(new Ve(ye.DEADLINE_EXCEEDED,"Request time out"));break;case k1.HTTP_ERROR:const D=h.getStatus();if($e("Connection",'RPC "'+t+'" failed with status:',D,"response text:",h.getResponseText()),D>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const F=null===(y=x)||void 0===y?void 0:y.error;if(F&&F.status&&F.message){const G=function(ne){const te=ne.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(te)>=0?te:ye.UNKNOWN}(F.status);c(new Ve(G,F.message))}else c(new Ve(ye.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Ve(ye.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{$e("Connection",'RPC "'+t+'" completed.')}});const g=JSON.stringify(r);h.send(e,"POST",g,i,15)})}wo(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=sz(),c=oz(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new uz({})),this.lo(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;const g=r.join("");$e("Connection","Creating WebChannel: "+g,h);const y=s.createWebChannel(g,h);let b=!1,D=!1;const x=new dq({Hr:G=>{D?$e("Connection","Not sending because WebChannel is closed:",G):(b||($e("Connection","Opening WebChannel transport."),y.open(),b=!0),$e("Connection","WebChannel sending:",G),y.send(G))},Jr:()=>y.close()}),F=(G,ne,te)=>{G.listen(ne,ze=>{try{te(ze)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return F(y,uD.EventType.OPEN,()=>{D||$e("Connection","WebChannel transport opened.")}),F(y,uD.EventType.CLOSE,()=>{D||(D=!0,$e("Connection","WebChannel transport closed"),x.io())}),F(y,uD.EventType.ERROR,G=>{D||(D=!0,zf("Connection","WebChannel transport errored:",G),x.io(new Ve(ye.UNAVAILABLE,"The operation could not be completed")))}),F(y,uD.EventType.MESSAGE,G=>{var ne;if(!D){const te=G.data[0];Ht(!!te);const ze=te,Ke=ze.error||(null===(ne=ze[0])||void 0===ne?void 0:ne.error);if(Ke){$e("Connection","WebChannel received error:",Ke);const qe=Ke.status;let Je=function(xt){const jn=Yi[xt];if(void 0!==jn)return mU(jn)}(qe),gt=Ke.message;void 0===Je&&(Je=ye.INTERNAL,gt="Unknown error status: "+qe+" with message "+Ke.message),D=!0,x.io(new Ve(Je,gt)),y.close()}else $e("Connection","WebChannel received:",te),x.ro(te)}}),F(c,lz.STAT_EVENT,G=>{G.stat===I2.PROXY?$e("Connection","Detected buffering proxy"):G.stat===I2.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function EB(){return typeof window<"u"?window:null}function LD(){return typeof document<"u"?document:null}function b0(n){return new i4(n,!0)}class _O{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class TB{constructor(t,e,i,r,s,c,h,g){this.Hs=t,this.vo=i,this.Vo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new _O(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Ce.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,Ce.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,Ce.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===ye.RESOURCE_EXHAUSTED?(Li(e.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===ye.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new Ve(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,Ce.Z)(function*(){t.state=0,t.start()}))}Qo(t){return $e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fq extends TB{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.It=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function o4(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(g=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:mt(),r=t.targetChange.targetIds||[],s=function(g,y){return g.gt?(Ht(void 0===y||"string"==typeof y),ur.fromBase64String(y||"")):(Ht(void 0===y||y instanceof Uint8Array),ur.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(g){const y=void 0===g.code?ye.UNKNOWN:mU(g.code);return new Ve(y,g.message||"")}(c);e=new CU(i,r,s,h||null)}else if("documentChange"in t){const i=t.documentChange,r=tu(n,i.document.name),s=br(i.document.updateTime),c=new Ur({mapValue:{fields:i.document.fields}}),h=ii.newFoundDocument(r,s,c);e=new bD(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){const i=t.documentDelete,r=tu(n,i.document),s=i.readTime?br(i.readTime):jt.min(),c=ii.newNoDocument(r,s);e=new bD([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=tu(n,i.document);e=new bD([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return mt();{const i=t.filter,s=new Kz(i.count||0);e=new wU(i.targetId,s)}}var g;return e}(this.It,t),i=function(r){if(!("targetChange"in r))return jt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?jt.min():s.readTime?br(s.readTime):jt.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=f0(this.It),e.addTarget=function(r,s){let c;const h=s.target;return c=mD(h)?{documents:kU(r,h)}:{query:Y1(r,h)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=TU(r,s.resumeToken):s.snapshotVersion.compareTo(jt.min())>0&&(c.readTime=d0(r,s.snapshotVersion.toTimestamp())),c}(this.It,t);const i=function l4(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=f0(this.It),e.removeTarget=t,this.Bo(e)}}class pq extends TB{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(Ht(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function a4(n,t){return n&&n.length>0?(Ht(void 0!==t),n.map(e=>function(i,r){let s=br(i.updateTime?i.updateTime:r);return s.isEqual(jt.min())&&(s=br(r)),new zz(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=br(t.commitTime);return this.listener.Zo(i,e)}return Ht(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=f0(this.It),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>p0(this.It,i))};this.Bo(e)}}class gq extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new Ve(ye.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.ao(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ve(ye.UNKNOWN,r.toString())})}_o(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection._o(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(ye.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class _q{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Li(e),this.ou=!1):$e("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class yq{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(h=>{i.enqueueAndForget((0,Ce.Z)(function*(){var g;rc(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ce.Z)(function*(y){const b=rt(y);b._u.add(4),yield t_(b),b.gu.set("Unknown"),b._u.delete(4),yield E0(b)}),function(y){return g.apply(this,arguments)})(c))}))}),this.gu=new _q(i,r)}}function E0(n){return vO.apply(this,arguments)}function vO(){return vO=(0,Ce.Z)(function*(n){if(rc(n))for(const t of n.wu)yield t(!0)}),vO.apply(this,arguments)}function t_(n){return wO.apply(this,arguments)}function wO(){return wO=(0,Ce.Z)(function*(n){for(const t of n.wu)yield t(!1)}),wO.apply(this,arguments)}function VD(n,t){const e=rt(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),bO(e)?IO(e):i_(e).ko()&&CO(e,t))}function T0(n,t){const e=rt(n),i=i_(e);e.du.delete(t),i.ko()&&DB(e,t),0===e.du.size&&(i.ko()?i.Fo():rc(e)&&e.gu.set("Unknown"))}function CO(n,t){n.yu.Mt(t.targetId),i_(n).zo(t)}function DB(n,t){n.yu.Mt(t),i_(n).Ho(t)}function IO(n){n.yu=new e4({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),se:t=>n.du.get(t)||null}),i_(n).start(),n.gu.uu()}function bO(n){return rc(n)&&!i_(n).No()&&n.du.size>0}function rc(n){return 0===rt(n)._u.size}function SB(n){n.yu=void 0}function vq(n){return EO.apply(this,arguments)}function EO(){return EO=(0,Ce.Z)(function*(n){n.du.forEach((t,e)=>{CO(n,t)})}),EO.apply(this,arguments)}function wq(n,t){return TO.apply(this,arguments)}function TO(){return TO=(0,Ce.Z)(function*(n,t){SB(n),bO(n)?(n.gu.hu(t),IO(n)):n.gu.set("Unknown")}),TO.apply(this,arguments)}function Cq(n,t,e){return DO.apply(this,arguments)}function DO(){return DO=(0,Ce.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof CU&&2===t.state&&t.cause)try{yield(i=(0,Ce.Z)(function*(r,s){const c=s.cause;for(const h of s.targetIds)r.du.has(h)&&(yield r.remoteSyncer.rejectListen(h,c),r.du.delete(h),r.yu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){$e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield UD(n,i)}else if(t instanceof bD?n.yu.Gt(t):t instanceof wU?n.yu.Yt(t):n.yu.Wt(t),!e.isEqual(jt.min()))try{const i=yield gB(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.yu.te(s);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.du.get(g);y&&r.du.set(g,y.withResumeToken(h.resumeToken,s))}}),c.targetMismatches.forEach(h=>{const g=r.du.get(h);if(!g)return;r.du.set(h,g.withResumeToken(ur.EMPTY_BYTE_STRING,g.snapshotVersion)),DB(r,h);const y=new oh(g.target,h,1,g.sequenceNumber);CO(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){$e("RemoteStore","Failed to raise snapshot:",i),yield UD(n,i)}var i}),DO.apply(this,arguments)}function UD(n,t,e){return SO.apply(this,arguments)}function SO(){return SO=(0,Ce.Z)(function*(n,t,e){if(!Xd(t))throw t;n._u.add(1),yield t_(n),n.gu.set("Offline"),e||(e=()=>gB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield E0(n)}))}),SO.apply(this,arguments)}function AB(n,t){return t().catch(e=>UD(n,e,t))}function n_(n){return AO.apply(this,arguments)}function AO(){return AO=(0,Ce.Z)(function*(n){const t=rt(n),e=uh(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;Iq(t);)try{const r=yield oq(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,bq(t,r)}catch(r){yield UD(t,r)}xB(t)&&MB(t)}),AO.apply(this,arguments)}function Iq(n){return rc(n)&&n.fu.length<10}function bq(n,t){n.fu.push(t);const e=uh(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function xB(n){return rc(n)&&!uh(n).No()&&n.fu.length>0}function MB(n){uh(n).start()}function Eq(n){return xO.apply(this,arguments)}function xO(){return xO=(0,Ce.Z)(function*(n){uh(n).eu()}),xO.apply(this,arguments)}function Tq(n){return MO.apply(this,arguments)}function MO(){return MO=(0,Ce.Z)(function*(n){const t=uh(n);for(const e of n.fu)t.Xo(e.mutations)}),MO.apply(this,arguments)}function Dq(n,t,e){return kO.apply(this,arguments)}function kO(){return kO=(0,Ce.Z)(function*(n,t,e){const i=n.fu.shift(),r=X1.from(i,t,e);yield AB(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield n_(n)}),kO.apply(this,arguments)}function Sq(n,t){return OO.apply(this,arguments)}function OO(){return OO=(0,Ce.Z)(function*(n,t){var e;t&&uh(n).Yo&&(yield(e=(0,Ce.Z)(function*(i,r){if(gU(s=r.code)&&s!==ye.ABORTED){const c=i.fu.shift();uh(i).Mo(),yield AB(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield n_(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),xB(n)&&MB(n)}),OO.apply(this,arguments)}function kB(n,t){return RO.apply(this,arguments)}function RO(){return RO=(0,Ce.Z)(function*(n,t){const e=rt(n);e.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const i=rc(e);e._u.add(3),yield t_(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield E0(e)}),RO.apply(this,arguments)}function NO(n,t){return PO.apply(this,arguments)}function PO(){return PO=(0,Ce.Z)(function*(n,t){const e=rt(n);t?(e._u.delete(2),yield E0(e)):t||(e._u.add(2),yield t_(e),e.gu.set("Unknown"))}),PO.apply(this,arguments)}function i_(n){return n.pu||(n.pu=function(t,e,i){const r=rt(t);return r.su(),new fq(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:vq.bind(null,n),Zr:wq.bind(null,n),Wo:Cq.bind(null,n)}),n.wu.push(function(){var t=(0,Ce.Z)(function*(e){e?(n.pu.Mo(),bO(n)?IO(n):n.gu.set("Unknown")):(yield n.pu.stop(),SB(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function uh(n){return n.Iu||(n.Iu=function(t,e,i){const r=rt(t);return r.su(),new pq(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Eq.bind(null,n),Zr:Sq.bind(null,n),tu:Tq.bind(null,n),Zo:Dq.bind(null,n)}),n.wu.push(function(){var t=(0,Ce.Z)(function*(e){e?(n.Iu.Mo(),yield n_(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class FO{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,h=new FO(t,e,c,r,s);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(ye.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(n,t){if(Li("AsyncQueue",`${t}: ${n}`),Xd(n))return new Ve(ye.UNAVAILABLE,`${t}: ${n}`);throw n}class s_{constructor(t){this.comparator=t?(e,i)=>t(e,i)||et.comparator(e.key,i.key):(e,i)=>et.comparator(e.key,i.key),this.keyedMap=a0(),this.sortedSet=new Ai(this.comparator)}static emptySet(t){return new s_(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof s_)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new s_;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class OB{constructor(){this.Tu=new Ai(et.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):mt():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class o_{constructor(t,e,i,r,s,c,h,g,y){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new o_(t,e,s_.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&r0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class Aq{constructor(){this.Au=void 0,this.listeners=[]}}class xq{constructor(){this.queries=new sh(t=>X2(t),r0),this.onlineState="Unknown",this.Ru=new Set}}function LO(n,t){return VO.apply(this,arguments)}function VO(){return VO=(0,Ce.Z)(function*(n,t){const e=rt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new Aq),r)try{s.Au=yield e.onListen(i)}catch(c){const h=r_(c,`Initialization of query '${$1(t.query)}' failed`);return void t.onError(h)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&HO(e)}),VO.apply(this,arguments)}function UO(n,t){return BO.apply(this,arguments)}function BO(){return BO=(0,Ce.Z)(function*(n,t){const e=rt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),BO.apply(this,arguments)}function Mq(n,t){const e=rt(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const h of c.listeners)h.Pu(r)&&(i=!0);c.Au=r}}i&&HO(e)}function kq(n,t,e){const i=rt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function HO(n){n.Ru.forEach(t=>{t.next()})}class jO{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new o_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=o_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class Oq{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class RB{constructor(t){this.It=t}Ji(t){return tu(this.It,t)}Yi(t){return t.metadata.exists?MU(this.It,t.document,!1):ii.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return br(t)}}class Rq{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NB(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=_n.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new RB(this.It);for(const r of t)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const h=(e.get(c)||nn()).add(s);e.set(c,h)}}return e}complete(){var t=this;return(0,Ce.Z)(function*(){const e=yield function aq(n,t,e,i){return dO.apply(this,arguments)}(t.localStore,new RB(t.It),t.documents,t.Mu.id),i=t.$u(t.documents);for(const r of t.queries)yield lq(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function NB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class PB{constructor(t){this.key=t}}class FB{constructor(t){this.key=t}}class LB{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=nn(),this.mutatedKeys=nn(),this.Gu=tU(t),this.Qu=new s_(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new OB,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const g="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,D)=>{const x=r.get(b),F=W1(this.query,D)?D:null,G=!!x&&this.mutatedKeys.has(x.key),ne=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let te=!1;x&&F?x.data.isEqual(F.data)?G!==ne&&(i.track({type:3,doc:F}),te=!0):this.Hu(x,F)||(i.track({type:2,doc:F}),te=!0,(g&&this.Gu(F,g)>0||y&&this.Gu(F,y)<0)&&(h=!0)):!x&&F?(i.track({type:0,doc:F}),te=!0):x&&!F&&(i.track({type:1,doc:x}),te=!0,(g||y)&&(h=!0)),te&&(F?(c=c.add(F),s=ne?s.add(b):s.delete(b)):(c=c.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{Qu:c,zu:i,$i:h,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort((y,b)=>function(D,x){const F=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return F(D)-F(x)}(y.type,b.type)||this.Gu(y.doc,b.doc)),this.Ju(i);const c=e?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,g=h!==this.qu;return this.qu=h,0!==s.length||g?{snapshot:new o_(this.query,t.Qu,r,s,t.mutatedKeys,0===h,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new OB,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=nn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new FB(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new PB(i))}),e}tc(t){this.Uu=t.Hi,this.Ku=nn();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return o_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Nq{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Pq{constructor(t){this.key=t,this.nc=!1}}class Fq{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new sh(h=>X2(h),r0),this.rc=new Map,this.oc=new Set,this.uc=new Ai(et.comparator),this.cc=new Map,this.ac=new rO,this.hc={},this.lc=new Map,this.fc=lp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Lq(n,t){return GO.apply(this,arguments)}function GO(){return GO=(0,Ce.Z)(function*(n,t){const e=hR(n);let i,r;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const c=yield Xm(e.localStore,Es(t));e.isPrimaryClient&&VD(e.remoteStore,c);const h=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield $O(e,t,i,"current"===h,c.resumeToken)}return r}),GO.apply(this,arguments)}function $O(n,t,e,i,r){return WO.apply(this,arguments)}function WO(){return WO=(0,Ce.Z)(function*(n,t,e,i,r){n._c=(D,x,F)=>{return(G=(0,Ce.Z)(function*(ne,te,ze,Ke){let qe=te.view.Wu(ze);qe.$i&&(qe=yield ND(ne.localStore,te.query,!1).then(({documents:xt})=>te.view.Wu(xt,qe)));const Je=Ke&&Ke.targetChanges.get(te.targetId),gt=te.view.applyChanges(qe,ne.isPrimaryClient,Je);return tR(ne,te.targetId,gt.Xu),gt.snapshot}),function(ne,te,ze,Ke){return G.apply(this,arguments)})(n,D,x,F);var G};const s=yield ND(n.localStore,t,!0),c=new LB(t,s.Hi),h=c.Wu(s.documents),g=c0.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),y=c.applyChanges(h,n.isPrimaryClient,g);tR(n,e,y.Xu);const b=new Nq(t,e,c);return n.ic.set(t,b),n.rc.has(e)?n.rc.get(e).push(t):n.rc.set(e,[t]),y.snapshot}),WO.apply(this,arguments)}function Vq(n,t){return zO.apply(this,arguments)}function zO(){return zO=(0,Ce.Z)(function*(n,t){const e=rt(n),i=e.ic.get(t),r=e.rc.get(i.targetId);if(r.length>1)return e.rc.set(i.targetId,r.filter(s=>!r0(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield e_(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),T0(e.remoteStore,i.targetId),a_(e,i.targetId)}).catch(Jd))):(a_(e,i.targetId),yield e_(e.localStore,i.targetId,!0))}),zO.apply(this,arguments)}function qO(){return qO=(0,Ce.Z)(function*(n,t,e){const i=fR(n);try{const r=yield function(s,c){const h=rt(s),g=fi.now(),y=c.reduce((x,F)=>x.add(F.key),nn());let b,D;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let F=Qs(),G=nn();return h.Gi.getEntries(x,y).next(ne=>{F=ne,F.forEach((te,ze)=>{ze.isValidDocument()||(G=G.add(te))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,F)).next(ne=>{b=ne;const te=[];for(const ze of c){const Ke=Zz(ze,b.get(ze.key).overlayedDocument);null!=Ke&&te.push(new ic(ze.key,Ke,$2(Ke.value.mapValue),pi.exists(!0)))}return h.mutationQueue.addMutationBatch(x,g,te,c)}).next(ne=>{D=ne;const te=ne.applyToLocalDocumentSet(b,G);return h.documentOverlayCache.saveOverlays(x,ne.batchId,te)})}).then(()=>({batchId:D.batchId,changes:yU(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,h){let g=s.hc[s.currentUser.toKey()];g||(g=new Ai(qt)),g=g.insert(c,h),s.hc[s.currentUser.toKey()]=g}(i,r.batchId,e),yield sc(i,r.changes),yield n_(i.remoteStore)}catch(r){const s=r_(r,"Failed to persist write");e.reject(s)}}),qO.apply(this,arguments)}function VB(n,t){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,Ce.Z)(function*(n,t){const e=rt(n);try{const i=yield sq(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.cc.get(s);c&&(Ht(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.nc=!0:r.modifiedDocuments.size>0?Ht(c.nc):r.removedDocuments.size>0&&(Ht(c.nc),c.nc=!1))}),yield sc(e,i,t)}catch(i){yield Jd(i)}}),ZO.apply(this,arguments)}function UB(n,t,e){const i=rt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ic.forEach((s,c)=>{const h=c.view.bu(t);h.snapshot&&r.push(h.snapshot)}),function(s,c){const h=rt(s);h.onlineState=c;let g=!1;h.queries.forEach((y,b)=>{for(const D of b.listeners)D.bu(c)&&(g=!0)}),g&&HO(h)}(i.eventManager,t),r.length&&i.sc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Bq(n,t,e){return KO.apply(this,arguments)}function KO(){return KO=(0,Ce.Z)(function*(n,t,e){const i=rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.cc.get(t),s=r&&r.key;if(s){let c=new Ai(et.comparator);c=c.insert(s,ii.newNoDocument(s,jt.min()));const h=nn().add(s),g=new u0(jt.min(),new Map,new Hn(qt),c,h);yield VB(i,g),i.uc=i.uc.remove(s),i.cc.delete(t),nR(i)}else yield e_(i.localStore,t,!1).then(()=>a_(i,t,e)).catch(Jd)}),KO.apply(this,arguments)}function Hq(n,t){return YO.apply(this,arguments)}function YO(){return YO=(0,Ce.Z)(function*(n,t){const e=rt(n),i=t.batch.batchId;try{const r=yield rq(e.localStore,t);eR(e,i,null),XO(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield sc(e,r)}catch(r){yield Jd(r)}}),YO.apply(this,arguments)}function jq(n,t,e){return QO.apply(this,arguments)}function QO(){return QO=(0,Ce.Z)(function*(n,t,e){const i=rt(n);try{const r=yield function(s,c){const h=rt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.mutationQueue.lookupMutationBatch(g,c).next(b=>(Ht(null!==b),y=b.keys(),h.mutationQueue.removeMutationBatch(g,b))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>h.localDocuments.getDocuments(g,y))})}(i.localStore,t);eR(i,t,e),XO(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield sc(i,r)}catch(r){yield Jd(r)}}),QO.apply(this,arguments)}function JO(){return JO=(0,Ce.Z)(function*(n,t){const e=rt(n);rc(e.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=rt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===i)return void t.resolve();const r=e.lc.get(i)||[];r.push(t),e.lc.set(i,r)}catch(i){const r=r_(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),JO.apply(this,arguments)}function XO(n,t){(n.lc.get(t)||[]).forEach(e=>{e.resolve()}),n.lc.delete(t)}function eR(n,t,e){const i=rt(n);let r=i.hc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.hc[i.currentUser.toKey()]=r}}function a_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.rc.get(t))n.ic.delete(i),e&&n.sc.wc(i,e);n.rc.delete(t),n.isPrimaryClient&&n.ac.ls(t).forEach(i=>{n.ac.containsKey(i)||BB(n,i)})}function BB(n,t){n.oc.delete(t.path.canonicalString());const e=n.uc.get(t);null!==e&&(T0(n.remoteStore,e),n.uc=n.uc.remove(t),n.cc.delete(e),nR(n))}function tR(n,t,e){for(const i of e)i instanceof PB?(n.ac.addReference(i.key,t),$q(n,i)):i instanceof FB?($e("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,t),n.ac.containsKey(i.key)||BB(n,i.key)):mt()}function $q(n,t){const e=t.key,i=e.path.canonicalString();n.uc.get(e)||n.oc.has(i)||($e("SyncEngine","New document in limbo: "+e),n.oc.add(i),nR(n))}function nR(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const t=n.oc.values().next().value;n.oc.delete(t);const e=new et(_n.fromString(t)),i=n.fc.next();n.cc.set(i,new Pq(e)),n.uc=n.uc.insert(e,i),VD(n.remoteStore,new oh(Es(Gm(e.path)),i,2,Ys.at))}}function sc(n,t,e){return iR.apply(this,arguments)}function iR(){return iR=(0,Ce.Z)(function*(n,t,e){const i=rt(n),r=[],s=[],c=[];var h;i.ic.isEmpty()||(i.ic.forEach((h,g)=>{c.push(i._c(g,t,e).then(y=>{if((y||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){r.push(y);const b=lO.Ci(g.targetId,y);s.push(b)}}))}),yield Promise.all(c),i.sc.Wo(r),yield(h=(0,Ce.Z)(function*(g,y){const b=rt(g);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>he.forEach(y,x=>he.forEach(x.Si,F=>b.persistence.referenceDelegate.addReference(D,x.targetId,F)).next(()=>he.forEach(x.Di,F=>b.persistence.referenceDelegate.removeReference(D,x.targetId,F)))))}catch(D){if(!Xd(D))throw D;$e("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const x=D.targetId;if(!D.fromCache){const F=b.Ui.get(x),ne=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);b.Ui=b.Ui.insert(x,ne)}}}),function(g,y){return h.apply(this,arguments)})(i.localStore,s))}),iR.apply(this,arguments)}function Wq(n,t){return rR.apply(this,arguments)}function rR(){return rR=(0,Ce.Z)(function*(n,t){const e=rt(n);if(!e.currentUser.isEqual(t)){$e("SyncEngine","User change. New user:",t.toKey());const i=yield pB(e.localStore,t);e.currentUser=t,(r=e).lc.forEach(c=>{c.forEach(h=>{h.reject(new Ve(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield sc(e,i.ji)}var r}),rR.apply(this,arguments)}function zq(n,t){const e=rt(n),i=e.cc.get(t);if(i&&i.nc)return nn().add(i.key);{let r=nn();const s=e.rc.get(t);if(!s)return r;for(const c of s){const h=e.ic.get(c);r=r.unionWith(h.view.ju)}return r}}function qq(n,t){return sR.apply(this,arguments)}function sR(){return sR=(0,Ce.Z)(function*(n,t){const e=rt(n),i=yield ND(e.localStore,t.query,!0),r=t.view.tc(i);return e.isPrimaryClient&&tR(e,t.targetId,r.Xu),r}),sR.apply(this,arguments)}function Zq(n,t){return oR.apply(this,arguments)}function oR(){return oR=(0,Ce.Z)(function*(n,t){const e=rt(n);return yB(e.localStore,t).then(i=>sc(e,i))}),oR.apply(this,arguments)}function Kq(n,t,e,i){return aR.apply(this,arguments)}function aR(){return aR=(0,Ce.Z)(function*(n,t,e,i){const r=rt(n),s=yield function(c,h){const g=rt(c),y=rt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Tn(b,h).next(D=>D?g.localDocuments.getDocuments(b,D):he.resolve(null)))}(r.localStore,t);var h;null!==s?("pending"===e?yield n_(r.remoteStore):"acknowledged"===e||"rejected"===e?(eR(r,t,i||null),XO(r,t),h=t,rt(rt(r.localStore).mutationQueue).An(h)):mt(),yield sc(r,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+t)}),aR.apply(this,arguments)}function lR(){return lR=(0,Ce.Z)(function*(n,t){const e=rt(n);if(hR(e),fR(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield HB(e,i.toArray());e.dc=!0,yield NO(e.remoteStore,!0);for(const s of r)VD(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let r=Promise.resolve();e.rc.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(a_(e,c),e_(e.localStore,c,!0))),T0(e.remoteStore,c)}),yield r,yield HB(e,i),function(s){const c=rt(s);c.cc.forEach((h,g)=>{T0(c.remoteStore,g)}),c.ac.fs(),c.cc=new Map,c.uc=new Ai(et.comparator)}(e),e.dc=!1,yield NO(e.remoteStore,!1)}}),lR.apply(this,arguments)}function HB(n,t,e){return uR.apply(this,arguments)}function uR(){return uR=(0,Ce.Z)(function*(n,t,e){const i=rt(n),r=[],s=[];for(const c of t){let h;const g=i.rc.get(c);if(g&&0!==g.length){h=yield Xm(i.localStore,Es(g[0]));for(const y of g){const b=i.ic.get(y),D=yield qq(i,b);D.snapshot&&s.push(D.snapshot)}}else{const y=yield _B(i.localStore,c);h=yield Xm(i.localStore,y),yield $O(i,jB(y),c,!1,h.resumeToken)}r.push(h)}return i.sc.Wo(s),r}),uR.apply(this,arguments)}function jB(n){return Q2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Qq(n){const t=rt(n);return rt(rt(t.localStore).persistence).vi()}function Jq(n,t,e,i){return cR.apply(this,arguments)}function cR(){return cR=(0,Ce.Z)(function*(n,t,e,i){const r=rt(n);if(r.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield yB(r.localStore,eU(s[0])),h=u0.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,ur.EMPTY_BYTE_STRING);yield sc(r,c,h);break}case"rejected":yield e_(r.localStore,t,!0),a_(r,t,i);break;default:mt()}}),cR.apply(this,arguments)}function Xq(n,t,e){return dR.apply(this,arguments)}function dR(){return dR=(0,Ce.Z)(function*(n,t,e){const i=hR(n);if(i.dc){for(const r of t){if(i.rc.has(r)){$e("SyncEngine","Adding an already active target "+r);continue}const s=yield _B(i.localStore,r),c=yield Xm(i.localStore,s);yield $O(i,jB(s),c.targetId,!1,c.resumeToken),VD(i.remoteStore,c)}for(const r of e)i.rc.has(r)&&(yield e_(i.localStore,r,!1).then(()=>{T0(i.remoteStore,r),a_(i,r)}).catch(Jd))}}),dR.apply(this,arguments)}function hR(n){const t=rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=VB.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zq.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bq.bind(null,t),t.sc.Wo=Mq.bind(null,t.eventManager),t.sc.wc=kq.bind(null,t.eventManager),t}function fR(n){const t=rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hq.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jq.bind(null,t),t}class GB{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ce.Z)(function*(){e.It=b0(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return fB(this.persistence,new hB,t.initialUser,this.It)}yc(t){return new cB(OD.Bs,this.It)}gc(t){return new IB}terminate(){var t=this;return(0,Ce.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class $B extends GB{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield fR(i.Ac.syncEngine),yield n_(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return fB(this.persistence,new hB,t.initialUser,this.It)}Tc(t,e){return new G4(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new Dz(e,this.persistence);return new Tz(t.asyncQueue,i)}yc(t){const e=aO(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Js.withCacheSize(this.cacheSizeBytes):Js.DEFAULT;return new oO(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,EB(),LD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(t){return new IB}}class tZ extends $B{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield e().call(i,t);const r=i.Ac.syncEngine;i.sharedClientState instanceof mO&&(i.sharedClientState.syncEngine={Fr:Kq.bind(null,r),$r:Jq.bind(null,r),Br:Xq.bind(null,r),vi:Qq.bind(null,r),Mr:Zq.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,Ce.Z)(function*(c){yield function Yq(n,t){return lR.apply(this,arguments)}(i.Ac.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}gc(t){const e=EB();if(!mO.C(e))throw new Ve(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=aO(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new mO(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class pR{initialize(t,e){var i=this;return(0,Ce.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>UB(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=Wq.bind(null,i.syncEngine),yield NO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new xq}createDatastore(t){const e=b0(t.databaseInfo.databaseId),i=new hq(t.databaseInfo);return new gq(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=h=>UB(this.syncEngine,h,0),c=bB.C()?new bB:new uq,new yq(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,h,g,y){const b=new Fq(i,r,s,c,h,g);return y&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ce.Z)(function*(e){const i=rt(e);$e("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield t_(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function gR(n,t,e){if(!e)throw new Ve(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function WB(n,t,e,i){if(!0===t&&!0===i)throw new Ve(ye.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function zB(n){if(!et.isDocumentKey(n))throw new Ve(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qB(n){if(et.isDocumentKey(n))throw new Ve(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":mt()}function hn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ve(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=BD(n);throw new Ve(ye.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function ZB(n,t){if(t<=0)throw new Ve(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}const KB=new Map;class YB{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ve(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ve(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,WB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class D0{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ve(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YB(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new fz;switch(e.type){case"gapi":return new _z(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ve(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=KB.get(t);e&&($e("ComponentProvider","Removing Datastore"),KB.delete(t),e.terminate())}(this),Promise.resolve()}}class ui{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ui(this.firestore,t,this._key)}}class rs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new rs(this.firestore,t,this._query)}}class iu extends rs{constructor(t,e,i){super(t,e,Gm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ui(this.firestore,null,new et(t))}withConverter(t){return new iu(this.firestore,t,this._path)}}function JB(n,t,...e){if(n=(0,L.m9)(n),gR("collection","path",t),n instanceof D0){const i=_n.fromString(t,...e);return qB(i),new iu(n,null,i)}{if(!(n instanceof ui||n instanceof iu))throw new Ve(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_n.fromString(t,...e));return qB(i),new iu(n.firestore,null,i)}}function HD(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=D2.R()),gR("doc","path",t),n instanceof D0){const i=_n.fromString(t,...e);return zB(i),new ui(n,null,new et(i))}{if(!(n instanceof ui||n instanceof iu))throw new Ve(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(_n.fromString(t,...e));return zB(i),new ui(n.firestore,n instanceof iu?n.converter:null,new et(i))}}function XB(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof ui||n instanceof iu)&&(t instanceof ui||t instanceof iu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function mR(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof rs&&t instanceof rs&&n.firestore===t.firestore&&r0(n._query,t._query)&&n.converter===t.converter}function eH(n,t=10240){let e=0;return{read:()=>(0,Ce.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class jD{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):Li("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class iZ{constructor(t,e){this.Pc=t,this.It=e,this.metadata=new lr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,Ce.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,Ce.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,Ce.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),r=Number(i);isNaN(r)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(r);return new Oq(JSON.parse(s),e.length+r)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,Ce.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,Ce.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,Ce.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class oZ{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ve(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ce.Z)(function*(s,c){const h=rt(s),g=f0(h.It)+"/documents",y={documents:c.map(F=>h0(h.It,F))},b=yield h._o("BatchGetDocuments",g,y,c.length),D=new Map;b.forEach(F=>{const G=function s4(n,t){return"found"in t?function(e,i){Ht(!!i.found);const r=tu(e,i.found.name),s=br(i.found.updateTime),c=new Ur({mapValue:{fields:i.found.fields}});return ii.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){Ht(!!i.missing),Ht(!!i.readTime);const r=tu(e,i.missing),s=br(i.readTime);return ii.newNoDocument(r,s)}(n,t):mt()}(h.It,F);D.set(G.key.toString(),G)});const x=[];return c.forEach(F=>{const G=D.get(F.toString());Ht(!!G),x.push(G)}),x}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Zm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=et.fromPath(r);t.mutations.push(new z1(s,t.precondition(s)))}),yield(i=(0,Ce.Z)(function*(r,s){const c=rt(r),h=f0(c.It)+"/documents",g={writes:s.map(y=>p0(c.It,y))};yield c.ao("Commit",h,g)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw mt();e=jt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ve(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(jt.min())?pi.exists(!1):pi.updateTime(e):pi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(jt.min()))throw new Ve(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pi.updateTime(e)}return pi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class aZ{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.kc=i.maxAttempts,this.xo=new _O(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,Ce.Z)(function*(){const e=new oZ(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Fc(s)}))}).catch(r=>{t.Fc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!Qw(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!gU(e)}return!1}}class lZ{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Ir.UNAUTHENTICATED,this.clientId=D2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Ce.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Ce.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=r_(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function tH(n,t){return _R.apply(this,arguments)}function _R(){return _R=(0,Ce.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ce.Z)(function*(s){i.isEqual(s)||(yield pB(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),_R.apply(this,arguments)}function nH(n,t){return yR.apply(this,arguments)}function yR(){return yR=(0,Ce.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield vR(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>kB(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>kB(t.remoteStore,s)),n.onlineComponents=t}),yR.apply(this,arguments)}function vR(n){return wR.apply(this,arguments)}function wR(){return wR=(0,Ce.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield tH(n,new GB)),n.offlineComponents}),wR.apply(this,arguments)}function GD(n){return CR.apply(this,arguments)}function CR(){return CR=(0,Ce.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield nH(n,new pR)),n.onlineComponents}),CR.apply(this,arguments)}function iH(n){return vR(n).then(t=>t.persistence)}function $D(n){return vR(n).then(t=>t.localStore)}function IR(n){return GD(n).then(t=>t.remoteStore)}function bR(n){return GD(n).then(t=>t.syncEngine)}function l_(n){return ER.apply(this,arguments)}function ER(){return ER=(0,Ce.Z)(function*(n){const t=yield GD(n),e=t.eventManager;return e.onListen=Lq.bind(null,t.syncEngine),e.onUnlisten=Vq.bind(null,t.syncEngine),e}),ER.apply(this,arguments)}function sH(n,t,e={}){const i=new lr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,c,h,g){const y=new jD({next:D=>{s.enqueueAndForget(()=>UO(r,b));const x=D.docs.has(c);!x&&D.fromCache?g.reject(new Ve(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&h&&"server"===h.source?g.reject(new Ve(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),b=new jO(Gm(c.path),y,{includeMetadataChanges:!0,Nu:!0});return LO(r,b)}(yield l_(n),n.asyncQueue,t,e,i)})),i.promise}function oH(n,t,e={}){const i=new lr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,c,h,g){const y=new jD({next:D=>{s.enqueueAndForget(()=>UO(r,b)),D.fromCache&&"server"===h.source?g.reject(new Ve(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),b=new jO(c,y,{includeMetadataChanges:!0,Nu:!0});return LO(r,b)}(yield l_(n),n.asyncQueue,t,e,i)})),i.promise}class mZ{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new _O(this,"async_queue_retry"),this.Wc=()=>{const e=LD();e&&$e("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=LD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;const e=LD();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.Uc)return new Promise(()=>{});const e=new lr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,Ce.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!Xd(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,Li("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=FO.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.qc.push(r),r}zc(){this.Kc&&mt()}verifyOperationInProgress(){}Xc(){var t=this;return(0,Ce.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.qc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.qc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.qc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.qc.indexOf(t);this.qc.splice(e,1)}}function TR(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class _Z{constructor(){this._progressObserver={},this._taskCompletionResolver=new lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ci extends D0{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new mZ,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aH(this),this._firestoreClient.terminate()}}function Vi(n){return n._firestoreClient||aH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function aH(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new xz(n._databaseId,s,n._persistenceKey,(h=e).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new lZ(n._authCredentials,n._appCheckCredentials,n._queue,i)}function lH(n,t,e){const i=new lr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield tH(n,e),yield nH(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===ye.FAILED_PRECONDITION||c.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;zf("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function uH(n){if(n._initialized||n._terminated)throw new Ve(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ru{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ru(ur.fromBase64String(t))}catch(e){throw new Ve(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ru(ur.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class oc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ve(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Si(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class cp{constructor(t){this._methodName=t}}class WD{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ve(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ve(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return qt(this._lat,t._lat)||qt(this._long,t._long)}}const SZ=/^__.*__$/;class AZ{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new ic(t,this.data,this.fieldMask,e,this.fieldTransforms):new qm(t,this.data,e,this.fieldTransforms)}}class cH{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ic(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function dH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class zD{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new zD(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.ua(t),r}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return KD(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(dH(this.sa)&&SZ.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class xZ{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||b0(t)}da(t,e,i,r=!1){return new zD({sa:t,methodName:e,fa:i,path:Si.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function dp(n){const t=n._freezeSettings(),e=b0(n._databaseId);return new xZ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function qD(n,t,e,i,r,s={}){const c=n.da(s.merge||s.mergeFields?2:0,t,e,r);xR("Data must be an object, but it was:",c,i);const h=pH(i,c);let g,y;if(s.merge)g=new Fo(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const b=[];for(const D of s.mergeFields){const x=MR(t,D,e);if(!c.contains(x))throw new Ve(ye.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);mH(b,x)||b.push(x)}g=new Fo(b),y=c.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,y=c.fieldTransforms;return new AZ(new Ur(h),g,y)}class S0 extends cp{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof S0}}function hH(n,t,e){return new zD({sa:3,fa:t.settings.fa,methodName:n._methodName,oa:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class DR extends cp{_toFieldTransform(t){return new s0(t.path,new Wm)}isEqual(t){return t instanceof DR}}class MZ extends cp{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=hH(this,t,!0),i=this._a.map(s=>hp(s,e)),r=new ep(i);return new s0(t.path,r)}isEqual(t){return this===t}}class kZ extends cp{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=hH(this,t,!0),i=this._a.map(s=>hp(s,e)),r=new tp(i);return new s0(t.path,r)}isEqual(t){return this===t}}class OZ extends cp{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new zm(t.It,rU(t.It,this.wa));return new s0(t.path,e)}isEqual(t){return this===t}}function SR(n,t,e,i){const r=n.da(1,t,e);xR("Data must be an object, but it was:",r,i);const s=[],c=Ur.empty();Kf(i,(g,y)=>{const b=ZD(t,g,e);y=(0,L.m9)(y);const D=r.ca(b);if(y instanceof S0)s.push(b);else{const x=hp(y,D);null!=x&&(s.push(b),c.set(b,x))}});const h=new Fo(s);return new cH(c,h,r.fieldTransforms)}function AR(n,t,e,i,r,s){const c=n.da(1,t,e),h=[MR(t,i,e)],g=[r];if(s.length%2!=0)throw new Ve(ye.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)h.push(MR(t,s[x])),g.push(s[x+1]);const y=[],b=Ur.empty();for(let x=h.length-1;x>=0;--x)if(!mH(y,h[x])){const F=h[x];let G=g[x];G=(0,L.m9)(G);const ne=c.ca(F);if(G instanceof S0)y.push(F);else{const te=hp(G,ne);null!=te&&(y.push(F),b.set(F,te))}}const D=new Fo(y);return new cH(b,D,c.fieldTransforms)}function fH(n,t,e,i=!1){return hp(e,n.da(i?4:3,t))}function hp(n,t){if(gH(n=(0,L.m9)(n)))return xR("Unsupported field value:",t,n),pH(n,t);if(n instanceof cp)return function(e,i){if(!dH(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let h=hp(c,i.aa(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rU(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=fi.fromDate(e);return{timestampValue:d0(i.It,r)}}if(e instanceof fi){const r=new fi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:d0(i.It,r)}}if(e instanceof WD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ru)return{bytesValue:TU(i.It,e._byteString)};if(e instanceof ui){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:q1(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${BD(e)}`)}(n,t)}function pH(n,t){const e={};return N2(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kf(n,(i,r)=>{const s=hp(r,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function gH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fi||n instanceof WD||n instanceof ru||n instanceof ui||n instanceof cp)}function xR(n,t,e){if(!gH(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=BD(e);throw t.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function MR(n,t,e){if((t=(0,L.m9)(t))instanceof oc)return t._internalPath;if("string"==typeof t)return ZD(n,t);throw KD("Field path arguments must be of type string or ",n,!1,void 0,e)}const RZ=new RegExp("[~\\*/\\[\\]]");function ZD(n,t,e){if(t.search(RZ)>=0)throw KD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new oc(...t.split("."))._internalPath}catch{throw KD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function KD(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(s||c)&&(g+=" (found",s&&(g+=` in field ${i}`),c&&(g+=` in document ${r}`),g+=")"),new Ve(ye.INVALID_ARGUMENT,h+n+g)}function mH(n,t){return n.some(e=>e.isEqual(t))}class A0{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new NZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(YD("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class NZ extends A0{data(){return super.data()}}function YD(n,t){return"string"==typeof t?ZD(n,t):t instanceof oc?t._internalPath:t._delegate._internalPath}function _H(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x0{}function ch(n,...t){for(const e of t)n=e._apply(n);return n}class PZ extends x0{constructor(t,e,i){super(),this.ma=t,this.ga=e,this.ya=i,this.type="where"}_apply(t){const e=dp(t.firestore),i=function(r,s,c,h,g,y,b){let D;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ve(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){bH(b,y);const F=[];for(const G of b)F.push(IH(h,r,G));D={arrayValue:{values:F}}}else D=IH(h,r,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||bH(b,y),D=fH(c,"where",b,"in"===y||"not-in"===y);const x=Br.create(g,y,D);return function(F,G){if(G.dt()){const te=j1(F);if(null!==te&&!te.isEqual(G.field))throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${te.toString()}' and '${G.field.toString()}'`);const ze=H1(F);null!==ze&&EH(0,G.field,ze)}const ne=function(te,ze){for(const Ke of te.filters)if(ze.indexOf(Ke.op)>=0)return Ke.op;return null}(F,function(te){switch(te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ne)throw new Ve(ye.INVALID_ARGUMENT,ne===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ne.toString()}' filters.`)}(r,x),x}(t._query,0,e,t.firestore._databaseId,this.ma,this.ga,this.ya);return new rs(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new nc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class LZ extends x0{constructor(t,e){super(),this.ma=t,this.pa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ve(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ve(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new jm(r,s);return function(h,g){if(null===H1(h)){const y=j1(h);null!==y&&EH(0,y,g.field)}}(i,c),c}(t._query,this.ma,this.pa);return new rs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new nc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class yH extends x0{constructor(t,e,i){super(),this.type=t,this.Ia=e,this.Ta=i}_apply(t){return new rs(t.firestore,t.converter,yD(t._query,this.Ia,this.Ta))}}class vH extends x0{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=CH(t,this.type,this.Ea,this.Aa);return new rs(t.firestore,t.converter,(r=e,new nc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class wH extends x0{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=CH(t,this.type,this.Ea,this.Aa);return new rs(t.firestore,t.converter,(r=e,new nc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function CH(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof A0)return function(r,s,c,h,g){if(!h)throw new Ve(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const b of $m(r))if(b.field.isKeyField())y.push(Jf(s,h.key));else{const D=h.data.field(b.field);if(V1(D))throw new Ve(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=b.field.canonicalString();throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(D)}return new rh(y,g)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=dp(n.firestore);return function(s,c,h,g,y,b){const D=s.explicitOrderBy;if(y.length>D.length)throw new Ve(ye.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let F=0;F<y.length;F++){const G=y[F];if(D[F].field.isKeyField()){if("string"!=typeof G)throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!G1(s)&&-1!==G.indexOf("/"))throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const ne=s.path.child(_n.fromString(G));if(!et.isDocumentKey(ne))throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const te=new et(ne);x.push(Jf(c,te))}else{const ne=fH(h,g,G);x.push(ne)}}return new rh(x,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function IH(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Ve(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G1(t)&&-1!==e.indexOf("/"))throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(_n.fromString(e));if(!et.isDocumentKey(i))throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Jf(n,new et(i))}if(e instanceof ui)return Jf(n,e._key);throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BD(e)}.`)}function bH(n,t){if(!Array.isArray(n)||0===n.length)throw new Ve(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ve(ye.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function EH(n,t,e){if(!e.isEqual(t))throw new Ve(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class kR{convertValue(t,e="none"){switch(Qf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Yf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw mt()}}convertObject(t,e){const i={};return Kf(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new WD(xi(t.latitude),xi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=F2(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Yw(t));default:return null}}convertTimestamp(t){const e=eh(t);return new fi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=_n.fromString(t);Ht(NU(i));const r=new th(i.get(1),i.get(3)),s=new et(i.popFirst(5));return r.isEqual(e)||Li(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function QD(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class WZ extends kR{constructor(t){super(),this.firestore=t}convertBytes(t){return new ru(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ui(this.firestore,null,e)}}class fp{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ac extends A0{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new M0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(YD("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class M0 extends ac{data(t={}){return super.data(t)}}class dh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new fp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new M0(this._firestore,this._userDataWriter,i.key,i,new fp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ve(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new M0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const h=new M0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fp(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,y=-1;return 0!==c.type&&(g=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:zZ(c.type),doc:h,oldIndex:g,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function zZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function TH(n,t){return n instanceof ac&&t instanceof ac?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof dh&&t instanceof dh&&n._firestore===t._firestore&&mR(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class hh extends kR{constructor(t){super(),this.firestore=t}convertBytes(t){return new ru(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ui(this.firestore,null,e)}}function DH(n,t,e){n=hn(n,ui);const i=hn(n.firestore,ci),r=QD(n.converter,t,e);return u_(i,[qD(dp(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,pi.none())])}function SH(n,t,e,...i){n=hn(n,ui);const r=hn(n.firestore,ci),s=dp(r);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof oc?AR(s,"updateDoc",n._key,t,e,i):SR(s,"updateDoc",n._key,t),u_(r,[c.toMutation(n._key,pi.exists(!0))])}function AH(n,...t){var e,i,r;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||TR(t[c])||(s=t[c],c++);const h={includeMetadataChanges:s.includeMetadataChanges};if(TR(t[c])){const D=t[c];t[c]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[c+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),t[c+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let g,y,b;if(n instanceof ui)y=hn(n.firestore,ci),b=Gm(n._key.path),g={next:D=>{t[c]&&t[c](OR(y,n,D))},error:t[c+1],complete:t[c+2]};else{const D=hn(n,rs);y=hn(D.firestore,ci),b=D._query;const x=new hh(y);g={next:F=>{t[c]&&t[c](new dh(y,x,D,F))},error:t[c+1],complete:t[c+2]},_H(n._query)}return function(D,x,F,G){const ne=new jD(G),te=new jO(x,ne,F);return D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return LO(yield l_(D),te)})),()=>{ne.bc(),D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return UO(yield l_(D),te)}))}}(Vi(y),b,h,g)}function u_(n,t){return function(e,i){const r=new lr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function Uq(n,t,e){return qO.apply(this,arguments)}(yield bR(e),i,r)})),r.promise}(Vi(n),t)}function OR(n,t,e){const i=e.docs.get(t._key),r=new hh(n);return new ac(n,r,t._key,i,new fp(e.hasPendingWrites,e.fromCache),t.converter)}const nK={maxAttempts:5};class xH{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=dp(t)}set(t,e,i){this._verifyNotCommitted();const r=fh(t,this._firestore),s=QD(r.converter,e,i),c=qD(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,pi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=fh(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof oc?AR(this._dataReader,"WriteBatch.update",s._key,e,i,r):SR(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,pi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=fh(t,this._firestore);return this._mutations=this._mutations.concat(new Zm(e._key,pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fh(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Ve(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class iK extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=dp(t)}get(t){const e=fh(t,this._firestore),i=new WZ(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return mt();const s=r[0];if(s.isFoundDocument())return new A0(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new A0(this._firestore,i,e._key,null,e.converter);throw mt()})}set(t,e,i){const r=fh(t,this._firestore),s=QD(r.converter,e,i),c=qD(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=fh(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof oc?AR(this._dataReader,"Transaction.update",s._key,e,i,r):SR(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=fh(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=fh(t,this._firestore),i=new hh(this._firestore);return super.get(t).then(r=>new ac(this._firestore,i,e._key,r._document,new fp(!1,!1),e.converter))}}function RR(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function kH(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function OH(){if(!function Sz(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Vm=kr.SDK_VERSION,(0,kr._registerComponent)(new ba.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new ci(new gz(e.getProvider("auth-internal")),new yz(e.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ve(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new th(h.options.projectId,g)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,kr.registerVersion)(b2,"3.7.3",n),(0,kr.registerVersion)(b2,"3.7.3","esm2017")}();class k0{constructor(t){this._delegate=t}static fromBase64String(t){return OH(),new k0(ru.fromBase64String(t))}static fromUint8Array(t){return kH(),new k0(ru.fromUint8Array(t))}toBase64(){return OH(),this._delegate.toBase64()}toUint8Array(){return kH(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NR(n){return function hK(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class fK{enableIndexedDbPersistence(t,e){return function vZ(n,t){uH(n=hn(n,ci));const e=Vi(n),i=n._freezeSettings(),r=new pR;return lH(e,r,new $B(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function wZ(n){uH(n=hn(n,ci));const t=Vi(n),e=n._freezeSettings(),i=new pR;return lH(t,i,new tZ(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function CZ(n){if(n._initialized&&!n._terminated)throw new Ve(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(e=(0,Ce.Z)(function*(i){if(!wl.C())return Promise.resolve();const r=i+"main";yield wl.delete(r)}),function(i){return e.apply(this,arguments)})(aO(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class RH{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof th||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&zf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function QB(n,t,e,i={}){var r;const s=(n=hn(n,D0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&zf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,h;if("string"==typeof i.mockUserToken)c=i.mockUserToken,h=Ir.MOCK_USER;else{c=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new Ve(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ir(g)}n._authCredentials=new pz(new E2(c,h))}}(this._delegate,t,e,i)}enableNetwork(){return function bZ(n){return function uZ(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const t=yield iH(n),e=yield IR(n);return t.setNetworkEnabled(!0),function(i){const r=rt(i);return r._u.delete(0),E0(r)}(e)}))}(Vi(n=hn(n,ci)))}(this._delegate)}disableNetwork(){return function EZ(n){return function cZ(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const t=yield iH(n),e=yield IR(n);return t.setNetworkEnabled(!1),(i=(0,Ce.Z)(function*(r){const s=rt(r);s._u.add(0),yield t_(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(Vi(n=hn(n,ci)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,WB("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function IZ(n){return function(t){const e=new lr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function Gq(n,t){return JO.apply(this,arguments)}(yield bR(t),e)})),e.promise}(Vi(n=hn(n,ci)))}(this._delegate)}onSnapshotsInSync(t){return function tK(n,t){return function fZ(n,t){const e=new jD(t);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield l_(n),r=e,rt(i).Ru.add(r),void r.next();var i,r})),()=>{e.bc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield l_(n),r=e,void rt(i).Ru.delete(r);var i,r}))}}(Vi(n=hn(n,ci)),TR(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new c_(this,JB(this._delegate,t))}catch(e){throw Ds(e,"collection()","Firestore.collection()")}}doc(t){try{return new Ra(this,HD(this._delegate,t))}catch(e){throw Ds(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Ss(this,function nZ(n,t){if(n=hn(n,D0),gR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ve(ye.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rs(n,null,(e=t,new nc(_n.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Ds(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function rK(n,t,e){n=hn(n,ci);const i=Object.assign(Object.assign({},nK),e);return function(r){if(r.maxAttempts<1)throw new Ve(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const h=new lr;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const g=yield function rH(n){return GD(n).then(t=>t.datastore)}(r);new aZ(r.asyncQueue,g,c,s,h).run()})),h.promise}(Vi(n),r=>t(new iK(n,r)),i)}(this._delegate,e=>t(new NH(this,e)))}batch(){return Vi(this._delegate),new PH(new xH(this._delegate,t=>u_(this._delegate,t)))}loadBundle(t){return function TZ(n,t){const e=Vi(n=hn(n,ci)),i=new _Z;return function pZ(n,t,e,i){const r=function(s,c){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,g=function(g,y){if(g instanceof Uint8Array)return eH(g,y);if(g instanceof ArrayBuffer)return eH(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new iZ(g,c);var g}(e,b0(t));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function eZ(n,t,e){const i=rt(n);var r;(r=(0,Ce.Z)(function*(s,c,h){try{const g=yield c.getMetadata();if(yield function(x,F){const G=rt(x),ne=br(F.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",te=>G.Ns.getBundleMetadata(te,F.id)).then(te=>!!te&&te.createTime.compareTo(ne)>=0)}(s.localStore,g))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=g).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(NB(g));const y=new Rq(g,s.localStore,c.It);let b=yield c.mc();for(;b;){const x=yield y.Fu(b);x&&h._updateProgress(x),b=yield c.mc()}const D=yield y.complete();return yield sc(s,D.Lu,void 0),yield function(x,F){const G=rt(x);return G.persistence.runTransaction("Save bundle","readwrite",ne=>G.Ns.saveBundleMetadata(ne,F))}(s.localStore,g),h._completeWith(D.progress),Promise.resolve(D.Bu)}catch(g){return zf("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var x}),function(s,c,h){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield bR(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function DZ(n,t){return function gZ(n,t){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(e,i){const r=rt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield $D(n),t)}))}(Vi(n=hn(n,ci)),t).then(e=>e?new rs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Ss(this,e):null)}}class JD extends kR{constructor(t){super(),this.firestore=t}convertBytes(t){return new k0(new ru(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Ra.forKey(e,this.firestore,null)}}class NH{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new JD(t)}get(t){const e=gp(t);return this._delegate.get(e).then(i=>new O0(this._firestore,new ac(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=gp(t);return i?(RR("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=gp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=gp(t);return this._delegate.delete(e),this}}class PH{constructor(t){this._delegate=t}set(t,e,i){const r=gp(t);return i?(RR("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=gp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=gp(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class pp{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new M0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new R0(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=pp.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new pp(t,new JD(t),e),r.set(e,s)),s}}pp.INSTANCES=new WeakMap;class Ra{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new JD(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ra(e,new ui(e._delegate,i,new et(t)))}static forKey(t,e,i){return new Ra(e,new ui(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new c_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new c_(this.firestore,JB(this._delegate,t))}catch(e){throw Ds(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof ui&&XB(this._delegate,t)}set(t,e){e=RR("DocumentReference.set",e);try{return e?DH(this._delegate,t,e):DH(this._delegate,t)}catch(i){throw Ds(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?SH(this._delegate,t):SH(this._delegate,t,e,...i)}catch(r){throw Ds(r,"updateDoc()","DocumentReference.update()")}}delete(){return function XZ(n){return u_(hn(n.firestore,ci),[new Zm(n._key,pi.none())])}(this._delegate)}onSnapshot(...t){const e=FH(t),i=LH(t,r=>new O0(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return AH(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function ZZ(n){n=hn(n,ui);const t=hn(n.firestore,ci),e=Vi(t),i=new hh(t);return function dZ(n,t){const e=new lr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,c){try{const h=yield function(g,y){const b=rt(g);return b.persistence.runTransaction("read document","readonly",D=>b.localDocuments.getDocument(D,y))}(r,s);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ve(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=r_(h,`Failed to get document '${s} from cache`);c.reject(g)}}),function(r,s,c){return i.apply(this,arguments)})(yield $D(n),t,e);var i})),e.promise}(e,n._key).then(r=>new ac(t,i,n._key,r,new fp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function KZ(n){n=hn(n,ui);const t=hn(n.firestore,ci);return sH(Vi(t),n._key,{source:"server"}).then(e=>OR(t,n,e))}(this._delegate):function qZ(n){n=hn(n,ui);const t=hn(n.firestore,ci);return sH(Vi(t),n._key).then(e=>OR(t,n,e))}(this._delegate),e.then(i=>new O0(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Ra(this.firestore,this._delegate.withConverter(t?pp.getInstance(this.firestore,t):null))}}function Ds(n,t,e){return n.message=n.message.replace(t,e),n}function FH(n){for(const t of n)if("object"==typeof t&&!NR(t))return t;return{}}function LH(n,t){var e,i;let r;return r=NR(n[0])?n[0]:NR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class O0{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return TH(this._delegate,t._delegate)}}class R0 extends O0{data(t){const e=this._delegate.data(t);return function hz(n,t){n||mt()}(void 0!==e),e}}class Ss{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new JD(t)}where(t,e,i){try{return new Ss(this.firestore,ch(this._delegate,function FZ(n,t,e){const i=t,r=YD("where",n);return new PZ(r,i,e)}(t,e,i)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Ss(this.firestore,ch(this._delegate,function VZ(n,t="asc"){const e=t,i=YD("orderBy",n);return new LZ(i,e)}(t,e)))}catch(i){throw Ds(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Ss(this.firestore,ch(this._delegate,function UZ(n){return ZB("limit",n),new yH("limit",n,"F")}(t)))}catch(e){throw Ds(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Ss(this.firestore,ch(this._delegate,function BZ(n){return ZB("limitToLast",n),new yH("limitToLast",n,"L")}(t)))}catch(e){throw Ds(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Ss(this.firestore,ch(this._delegate,function HZ(...n){return new vH("startAt",n,!0)}(...t)))}catch(e){throw Ds(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Ss(this.firestore,ch(this._delegate,function jZ(...n){return new vH("startAfter",n,!1)}(...t)))}catch(e){throw Ds(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Ss(this.firestore,ch(this._delegate,function GZ(...n){return new wH("endBefore",n,!1)}(...t)))}catch(e){throw Ds(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Ss(this.firestore,ch(this._delegate,function $Z(...n){return new wH("endAt",n,!0)}(...t)))}catch(e){throw Ds(e,"endAt()","Query.endAt()")}}isEqual(t){return mR(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function QZ(n){n=hn(n,rs);const t=hn(n.firestore,ci),e=Vi(t),i=new hh(t);return function hZ(n,t){const e=new lr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,c){try{const h=yield ND(r,s,!0),g=new LB(s,h.Hi),y=g.Wu(h.documents),b=g.applyChanges(y,!1);c.resolve(b.snapshot)}catch(h){const g=r_(h,`Failed to execute query '${s} against cache`);c.reject(g)}}),function(r,s,c){return i.apply(this,arguments)})(yield $D(n),t,e);var i})),e.promise}(e,n._query).then(r=>new dh(t,i,n,r))}(this._delegate):"server"===t?.source?function JZ(n){n=hn(n,rs);const t=hn(n.firestore,ci),e=Vi(t),i=new hh(t);return oH(e,n._query,{source:"server"}).then(r=>new dh(t,i,n,r))}(this._delegate):function YZ(n){n=hn(n,rs);const t=hn(n.firestore,ci),e=Vi(t),i=new hh(t);return _H(n._query),oH(e,n._query).then(r=>new dh(t,i,n,r))}(this._delegate),e.then(i=>new PR(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=FH(t),i=LH(t,r=>new PR(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return AH(this._delegate,e,i)}withConverter(t){return new Ss(this.firestore,this._delegate.withConverter(t?pp.getInstance(this.firestore,t):null))}}class gK{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new R0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PR{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new R0(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new gK(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new R0(this._firestore,i))})}isEqual(t){return TH(this._delegate,t._delegate)}}class c_ extends Ss{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ra(this.firestore,t):null}doc(t){try{return new Ra(this.firestore,void 0===t?HD(this._delegate):HD(this._delegate,t))}catch(e){throw Ds(e,"doc()","CollectionReference.doc()")}}add(t){return function eK(n,t){const e=hn(n.firestore,ci),i=HD(n),r=QD(n.converter,t);return u_(e,[qD(dp(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,pi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Ra(this.firestore,e))}isEqual(t){return XB(this._delegate,t._delegate)}withConverter(t){return new c_(this.firestore,this._delegate.withConverter(t?pp.getInstance(this.firestore,t):null))}}function gp(n){return hn(n,ui)}class FR{constructor(...t){this._delegate=new oc(...t)}static documentId(){return new FR(Si.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof oc&&this._delegate._internalPath.isEqual(t._internalPath)}}class mp{constructor(t){this._delegate=t}static serverTimestamp(){const t=function oK(){return new DR("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new mp(t)}static delete(){const t=function sK(){return new S0("deleteField")}();return t._methodName="FieldValue.delete",new mp(t)}static arrayUnion(...t){const e=function aK(...n){return new MZ("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new mp(e)}static arrayRemove(...t){const e=function lK(...n){return new kZ("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new mp(e)}static increment(t){const e=function uK(n){return new OZ("increment",n)}(t);return e._methodName="FieldValue.increment",new mp(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const mK={Firestore:RH,GeoPoint:WD,Timestamp:fi,Blob:k0,Transaction:NH,WriteBatch:PH,DocumentReference:Ra,DocumentSnapshot:O0,Query:Ss,QueryDocumentSnapshot:R0,QuerySnapshot:PR,CollectionReference:c_,FieldPath:FR,FieldValue:mp,setLogLevel:function pK(n){!function dz(n){Qd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function VH(n,t){return function vK(n,t=rm.z){return new _i.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function LR(n,t){return VH(n,t).pipe((0,dt.U)(e=>({payload:e,type:"query"})))}function XD(n,t){return LR(n,t).pipe(pa(void 0),Wk(),(0,dt.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,h)=>{const g=r.find(b=>b.doc.ref.isEqual(c.ref)),y=e?.payload.docs.find(b=>b.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),s}))}function UH(n,t,e){return XD(n,e).pipe(Ft((i,r)=>function CK(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function IK(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return VR(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return VR(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return VR(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Gv(),(0,dt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function VR(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function BH(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function yK(n){(function _K(n,t){n.INTERNAL.registerComponent(new ba.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},mK)))})(n,(t,e)=>new RH(t,e,new fK)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(sm.Z);class HH{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=XD(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,dt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(pa(void 0),Wk(),T(([i,r])=>r.length>0||!i),(0,dt.U)(([i,r])=>r),wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ft((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=BH(t);return UH(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return LR(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),wn.iC)}get(t){return(0,an.D)(this.query.get(t)).pipe(wn.iC)}add(t){return this.ref.add(t)}doc(t){return new jH(this.ref.doc(t),this.afs)}}class jH{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=WH(i,e);return new HH(r,s,this.afs)}snapshotChanges(){return function wK(n,t){return VH(n,t).pipe(pa(void 0),Wk(),(0,dt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,an.D)(this.ref.get(t)).pipe(wn.iC)}}class bK{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?XD(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),T(e=>e.length>0),wn.iC):XD(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ft((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=BH(t);return UH(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return LR(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),wn.iC)}get(t){return(0,an.D)(this.query.get(t)).pipe(wn.iC)}}const GH=new l.OlP("angularfire2.enableFirestorePersistence"),$H=new l.OlP("angularfire2.firestore.persistenceSettings"),EK=new l.OlP("angularfire2.firestore.settings"),TK=new l.OlP("angularfire2.firestore.use-emulator");function WH(n,t=(e=>e)){return{query:t(n),ref:n}}let DK=(()=>{class n{constructor(e,i,r,s,c,h,g,y,b,D,x,F,G,ne,te,ze,Ke){this.schedulers=g;const qe=(0,Zi.on)(e,h,i),Je=b;D&&df(qe,h,x,G,ne,te,F,ze),[this.firestore,this.persistenceEnabled$]=(0,Zi.cc)(`${qe.name}.firestore`,"AngularFirestore",qe.name,()=>{const gt=h.runOutsideAngular(()=>qe.firestore());if(s&&gt.settings(s),Je&&gt.useEmulator(...Je),r&&!$o(c)){const xt=()=>{try{return(0,an.D)(gt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(jn){return typeof console<"u"&&console.warn(jn),ht(!1)}};return[gt,h.runOutsideAngular(xt)]}return[gt,ht(!1)]},[s,Je,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=WH(r,i),h=this.schedulers.ngZone.run(()=>s);return new HH(h,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new bK(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new jH(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Zi.Dh),l.LFG(Zi.xv,8),l.LFG(GH,8),l.LFG(EK,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG($H,8),l.LFG(TK,8),l.LFG(Dg,8),l.LFG(Ey,8),l.LFG(Ty,8),l.LFG(od,8),l.LFG(cf,8),l.LFG(ad,8),l.LFG(sI,8),l.LFG(sd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),SK=(()=>{class n{constructor(){Tg.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:GH,useValue:!0},{provide:$H,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[DK]}),n})(),AK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[LE]}),n.\u0275inj=l.cJS({imports:[ia,FE,Zi.hO.initializeApp(VE_firebaseConfig),oI,SK,lW,y$,vI,Cd,qb,Ef,Bv,TP,wA,QA,hM]}),n})();(0,l.G48)(),Ja().bootstrapModule(AK).catch(n=>console.error(n))},5867:(_t,ke,V)=>{V.d(ke,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=V(9681);(0,l.registerVersion)("firebase","9.14.0","app")},127:(_t,ke,V)=>{V.d(ke,{Z:()=>l.Z});var l=V(3942);l.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(_t,ke,V)=>{V.r(ke);var l=V(5861),$=V(3942),N=V(8247),ae=V(2090),ge=(V(9681),V(1877),V(4859));function fe(){return window}function z(){return(z=(0,l.Z)(function*(j,O,B){var re;const{BuildInfo:Fe}=fe();(0,N.ap)(O.sessionId,"AuthEvent did not contain a session ID");const ut=yield me(O.sessionId),ct={};return(0,N.aq)()?ct.ibi=Fe.packageName:(0,N.ar)()?ct.apn=Fe.packageName:(0,N.as)(j,"operation-not-supported-in-this-environment"),Fe.displayName&&(ct.appDisplayName=Fe.displayName),ct.sessionId=ut,(0,N.at)(j,B,O.type,void 0,null!==(re=O.eventId)&&void 0!==re?re:void 0,ct)})).apply(this,arguments)}function Ge(){return(Ge=(0,l.Z)(function*(j){const{BuildInfo:O}=fe(),B={};(0,N.aq)()?B.iosBundleId=O.packageName:(0,N.ar)()?B.androidPackageName=O.packageName:(0,N.as)(j,"operation-not-supported-in-this-environment"),yield(0,N.au)(j,B)})).apply(this,arguments)}function at(){return(at=(0,l.Z)(function*(j,O,B){const{cordova:re}=fe();let Fe=()=>{};try{yield new Promise((ut,ct)=>{let Ae=null;function Ue(){var Ut;ut();const gn=null===(Ut=re.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof gn&&gn(),"function"==typeof B?.close&&B.close()}function Pt(){Ae||(Ae=window.setTimeout(()=>{ct((0,N.aw)(j,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===document?.visibilityState&&Pt()}O.addPassiveListener(Ue),document.addEventListener("resume",Pt,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",pn,!1),Fe=()=>{O.removePassiveListener(Ue),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",pn,!1),Ae&&window.clearTimeout(Ae)}})}finally{Fe()}})).apply(this,arguments)}function me(j){return it.apply(this,arguments)}function it(){return(it=(0,l.Z)(function*(j){const O=tt(j),B=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(B)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function tt(j){if((0,N.ap)(/[0-9a-zA-Z]+/.test(j),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(j);const O=new ArrayBuffer(j.length),B=new Uint8Array(O);for(let re=0;re<j.length;re++)B[re]=j.charCodeAt(re);return B}class Oe extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(O)),super.onEvent(O)}initialized(){var O=this;return(0,l.Z)(function*(){yield O.initPromise})()}}function oe(j){return de.apply(this,arguments)}function de(){return(de=(0,l.Z)(function*(j){const O=yield ee()._get(pe(j));return O&&(yield ee()._remove(pe(j))),O})).apply(this,arguments)}function Q(){const j=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const re=Math.floor(Math.random()*O.length);j.push(O.charAt(re))}return j.join("")}function ee(){return(0,N.az)(N.b)}function pe(j){return(0,N.aA)("authEvent",j.config.apiKey,j.name)}function je(j){if(!j?.includes("?"))return{};const[O,...B]=j.split("?");return(0,ae.zd)(B.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Zt(){var j;return(null===(j=self?.location)||void 0===j?void 0:j.protocol)||null}function Ii(j=(0,ae.z$)()){return!("file:"!==Zt()&&"ionic:"!==Zt()&&"capacitor:"!==Zt()||!j.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gr(){try{const j=self.localStorage,O=N.aI();if(j)return j.setItem(O,"1"),j.removeItem(O),!function jr(j=(0,ae.z$)()){return function Bi(){return(0,ae.w1)()&&11===document?.documentMode}()||function Pn(j=(0,ae.z$)()){return/Edge\/\d+/.test(j)}(j)}()||(0,ae.hl)()}catch{return Hi()&&(0,ae.hl)()}return!1}function Hi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function Gt(){return"http:"===Zt()||"https:"===Zt()}()||(0,ae.ru)()||Ii())&&!function Hr(){return(0,ae.b$)()||(0,ae.UG)()}()&&Gr()&&!Hi()}function Dr(){return Ii()&&typeof document<"u"}function nt(){return(nt=(0,l.Z)(function*(){return!!Dr()&&new Promise(j=>{const O=setTimeout(()=>{j(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),j(!0)})})})).apply(this,arguments)}const Yn={LOCAL:"local",NONE:"none",SESSION:"session"},Cn=N.ax,gi="persistence";function In(j){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,l.Z)(function*(j){yield j._initializationPromise;const O=Ct(),B=N.aA(gi,j.config.apiKey,j.name);O&&O.setItem(B,j._getPersistence())})).apply(this,arguments)}function Ct(){var j;try{return(null===(j=function ri(){return typeof window<"u"?window:null}())||void 0===j?void 0:j.sessionStorage)||null}catch{return null}}const It=N.ax;class Nt{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(class ln{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(O){var B=this;return(0,l.Z)(function*(){const re=O._key();let Fe=B.eventManagers.get(re);return Fe||(Fe=new Oe(O),B.eventManagers.set(re,Fe),B.attachCallbackListeners(O,Fe)),Fe})()}_openPopup(O){(0,N.as)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,B,re,Fe){var ut=this;return(0,l.Z)(function*(){!function Ie(j){var O,B,re,Fe,ut,ct,Ae,Ue,Pt,pn;const Ut=fe();(0,N.ax)("function"==typeof(null===(O=Ut?.universalLinks)||void 0===O?void 0:O.subscribe),j,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(B=Ut?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(ut=null===(Fe=null===(re=Ut?.cordova)||void 0===re?void 0:re.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===ut?void 0:ut.openUrl),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Ue=null===(Ae=null===(ct=Ut?.cordova)||void 0===ct?void 0:ct.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===Ue?void 0:Ue.isAvailable),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(pn=null===(Pt=Ut?.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===pn?void 0:pn.open),j,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const ct=yield ut._initialize(O);yield ct.initialized(),ct.resetRedirect(),(0,N.aD)(),yield ut._originValidation(O);const Ae=function Ee(j,O,B=null){return{type:O,eventId:B,urlResponse:null,sessionId:Q(),postBody:null,tenantId:j.tenantId,error:(0,N.aw)(j,"no-auth-event")}}(O,re,Fe);yield function Ze(j,O){return ee()._set(pe(j),O)}(O,Ae);const Ue=yield function Z(j,O,B){return z.apply(this,arguments)}(O,Ae,B),Pt=yield function Pe(j){const{cordova:O}=fe();return new Promise(B=>{O.plugins.browsertab.isAvailable(re=>{let Fe=null;re?O.plugins.browsertab.openUrl(j):Fe=O.InAppBrowser.open(j,(0,N.av)()?"_blank":"_system","location=yes"),B(Fe)})})}(Ue);return function De(j,O,B){return at.apply(this,arguments)}(O,ct,Pt)})()}_isIframeWebStorageSupported(O,B){throw new Error("Method not implemented.")}_originValidation(O){const B=O._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function J(j){return Ge.apply(this,arguments)}(O)),this.originValidationPromises[B]}attachCallbackListeners(O,B){const{universalLinks:re,handleOpenURL:Fe,BuildInfo:ut}=fe(),ct=setTimeout((0,l.Z)(function*(){yield oe(O),B.onEvent(Ye())}),500),Ae=function(){var pn=(0,l.Z)(function*(Ut){clearTimeout(ct);const gn=yield oe(O);let ss=null;gn&&Ut?.url&&(ss=function we(j,O){var B,re;const Fe=function He(j){const O=je(j),B=O.link?decodeURIComponent(O.link):void 0,re=je(B).link,Fe=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return je(Fe).link||Fe||re||B||j}(O);if(Fe.includes("/__/auth/callback")){const ut=je(Fe),ct=ut.firebaseError?function ue(j){try{return JSON.parse(j)}catch{return null}}(decodeURIComponent(ut.firebaseError)):null,Ae=null===(re=null===(B=ct?.code)||void 0===B?void 0:B.split("auth/"))||void 0===re?void 0:re[1],Ue=Ae?(0,N.aw)(Ae):null;return Ue?{type:j.type,eventId:j.eventId,tenantId:j.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:j.type,eventId:j.eventId,tenantId:j.tenantId,sessionId:j.sessionId,urlResponse:Fe,postBody:null}}return null}(gn,Ut.url)),B.onEvent(ss||Ye())});return function(gn){return pn.apply(this,arguments)}}();typeof re<"u"&&"function"==typeof re.subscribe&&re.subscribe(null,Ae);const Ue=Fe,Pt=`${ut.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var pn=(0,l.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(Pt)&&Ae({url:Ut}),"function"==typeof Ue)try{Ue(Ut)}catch(gn){console.error(gn)}});return function(Ut){return pn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(O){var B=this;return(0,l.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,B,re,Fe){var ut=this;return(0,l.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openPopup(O,B,re,Fe)})()}_openRedirect(O,B,re,Fe){var ut=this;return(0,l.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openRedirect(O,B,re,Fe)})()}_isIframeWebStorageSupported(O,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,B)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return Dr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return It(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,l.Z)(function*(){if(O.underlyingResolver)return;const B=yield function $r(){return nt.apply(this,arguments)}();O.underlyingResolver=B?O.cordovaResolver:O.browserResolver})()}}function ji(j){return j.unwrap()}function Mi(j){return ki(j)}function ki(j){const{_tokenResponse:O}=j instanceof ae.ZR?j.customData:j;if(!O)return null;if(!(j instanceof ae.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return N.P.credentialFromResult(j);const B=O.providerId;if(!B||B===N.o.PASSWORD)return null;let re;switch(B){case N.o.GOOGLE:re=N.Q;break;case N.o.FACEBOOK:re=N.N;break;case N.o.GITHUB:re=N.T;break;case N.o.TWITTER:re=N.W;break;default:const{oauthIdToken:Fe,oauthAccessToken:ut,oauthTokenSecret:ct,pendingToken:Ae,nonce:Ue}=O;return ut||ct||Fe||Ae?Ae?B.startsWith("saml.")?N.aL._create(B,Ae):N.J._fromParams({providerId:B,signInMethod:B,pendingToken:Ae,idToken:Fe,accessToken:ut}):new N.U(B).credential({idToken:Fe,accessToken:ut,rawNonce:Ue}):null}return j instanceof ae.ZR?re.credentialFromError(j):re.credentialFromResult(j)}function Vt(j,O){return O.catch(B=>{throw B instanceof ae.ZR&&function kt(j,O){var B,re;const Fe=null===(B=O.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(re=O)||void 0===re?void 0:re.code))O.resolver=new di(j,N.an(j,O));else if(Fe){const ut=ki(O),ct=O;ut&&(ct.credential=ut,ct.tenantId=Fe.tenantId||void 0,ct.email=Fe.email||void 0,ct.phoneNumber=Fe.phoneNumber||void 0)}}(j,B),B}).then(B=>{const Fe=B.user;return{operationType:B.operationType,credential:Mi(B),additionalUserInfo:N.al(B),user:Mn.getOrCreate(Fe)}})}function Qi(j,O){return en.apply(this,arguments)}function en(){return(en=(0,l.Z)(function*(j,O){const B=yield O;return{verificationId:B.verificationId,confirm:re=>Vt(j,B.confirm(re))}})).apply(this,arguments)}class di{constructor(O,B){this.resolver=B,this.auth=function Qn(j){return j.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return Vt(ji(this.auth),this.resolver.resolveSignIn(O))}}class Mn{constructor(O){this._delegate=O,this.multiFactor=N.ao(O)}static getOrCreate(O){return Mn.USER_MAP.has(O)||Mn.USER_MAP.set(O,new Mn(O)),Mn.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var B=this;return(0,l.Z)(function*(){return Vt(B.auth,N.Z(B._delegate,O))})()}linkWithPhoneNumber(O,B){var re=this;return(0,l.Z)(function*(){return Qi(re.auth,N.l(re._delegate,O,B))})()}linkWithPopup(O){var B=this;return(0,l.Z)(function*(){return Vt(B.auth,N.d(B._delegate,O,Nt))})()}linkWithRedirect(O){var B=this;return(0,l.Z)(function*(){return yield In(N.aE(B.auth)),N.g(B._delegate,O,Nt)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var B=this;return(0,l.Z)(function*(){return Vt(B.auth,N._(B._delegate,O))})()}reauthenticateWithPhoneNumber(O,B){return Qi(this.auth,N.r(this._delegate,O,B))}reauthenticateWithPopup(O){return Vt(this.auth,N.e(this._delegate,O,Nt))}reauthenticateWithRedirect(O){var B=this;return(0,l.Z)(function*(){return yield In(N.aE(B.auth)),N.h(B._delegate,O,Nt)})()}sendEmailVerification(O){return N.ab(this._delegate,O)}unlink(O){var B=this;return(0,l.Z)(function*(){return yield N.ak(B._delegate,O),B})()}updateEmail(O){return N.ag(this._delegate,O)}updatePassword(O){return N.ah(this._delegate,O)}updatePhoneNumber(O){return N.u(this._delegate,O)}updateProfile(O){return N.af(this._delegate,O)}verifyBeforeUpdateEmail(O,B){return N.ac(this._delegate,O,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mn.USER_MAP=new WeakMap;const st=N.ax;let Se=(()=>{class j{constructor(B,re){if(this.app=B,re.isInitialized())return this._delegate=re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=B.options;st(Fe,"invalid-api-key",{appName:B.name}),st(Fe,"invalid-api-key",{appName:B.name});const ut=typeof window<"u"?Nt:void 0;this._delegate=re.initialize({options:{persistence:Dt(Fe,B.name),popupRedirectResolver:ut}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,re){N.G(this._delegate,B,re)}applyActionCode(B){return N.a2(this._delegate,B)}checkActionCode(B){return N.a3(this._delegate,B)}confirmPasswordReset(B,re){return N.a1(this._delegate,B,re)}createUserWithEmailAndPassword(B,re){var Fe=this;return(0,l.Z)(function*(){return Vt(Fe._delegate,N.a5(Fe._delegate,B,re))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return N.aa(this._delegate,B)}isSignInWithEmailLink(B){return N.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,l.Z)(function*(){st(Gn(),B._delegate,"operation-not-supported-in-this-environment");const re=yield N.j(B._delegate,Nt);return re?Vt(B._delegate,Promise.resolve(re)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function fn(j,O){(0,N.aE)(j)._logFramework(O)}(this._delegate,B)}onAuthStateChanged(B,re,Fe){const{next:ut,error:ct,complete:Ae}=ot(B,re,Fe);return this._delegate.onAuthStateChanged(ut,ct,Ae)}onIdTokenChanged(B,re,Fe){const{next:ut,error:ct,complete:Ae}=ot(B,re,Fe);return this._delegate.onIdTokenChanged(ut,ct,Ae)}sendSignInLinkToEmail(B,re){return N.a7(this._delegate,B,re)}sendPasswordResetEmail(B,re){return N.a0(this._delegate,B,re||void 0)}setPersistence(B){var re=this;return(0,l.Z)(function*(){let Fe;switch(function Xs(j,O){Cn(Object.values(Yn).includes(O),j,"invalid-persistence-type"),(0,ae.b$)()?Cn(O!==Yn.SESSION,j,"unsupported-persistence-type"):(0,ae.UG)()?Cn(O===Yn.NONE,j,"unsupported-persistence-type"):Hi()?Cn(O===Yn.NONE||O===Yn.LOCAL&&(0,ae.hl)(),j,"unsupported-persistence-type"):Cn(O===Yn.NONE||Gr(),j,"unsupported-persistence-type")}(re._delegate,B),B){case Yn.SESSION:Fe=N.a;break;case Yn.LOCAL:Fe=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case Yn.NONE:Fe=N.L;break;default:return N.as("argument-error",{appName:re._delegate.name})}return re._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return Vt(this._delegate,N.X(this._delegate))}signInWithCredential(B){return Vt(this._delegate,N.Y(this._delegate,B))}signInWithCustomToken(B){return Vt(this._delegate,N.$(this._delegate,B))}signInWithEmailAndPassword(B,re){return Vt(this._delegate,N.a6(this._delegate,B,re))}signInWithEmailLink(B,re){return Vt(this._delegate,N.a9(this._delegate,B,re))}signInWithPhoneNumber(B,re){return Qi(this._delegate,N.s(this._delegate,B,re))}signInWithPopup(B){var re=this;return(0,l.Z)(function*(){return st(Gn(),re._delegate,"operation-not-supported-in-this-environment"),Vt(re._delegate,N.c(re._delegate,B,Nt))})()}signInWithRedirect(B){var re=this;return(0,l.Z)(function*(){return st(Gn(),re._delegate,"operation-not-supported-in-this-environment"),yield In(re._delegate),N.f(re._delegate,B,Nt)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return N.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return j.Persistence=Yn,j})();function ot(j,O,B){let re=j;"function"!=typeof j&&({next:re,error:O,complete:B}=j);const Fe=re;return{next:ct=>Fe(ct&&Mn.getOrCreate(ct)),error:O,complete:B}}function Dt(j,O){const B=function vn(j,O){const B=Ct();if(!B)return[];const re=N.aA(gi,j,O);switch(B.getItem(re)){case Yn.NONE:return[N.L];case Yn.LOCAL:return[N.i,N.a];case Yn.SESSION:return[N.a];default:return[]}}(j,O);if(typeof self<"u"&&!B.includes(N.i)&&B.push(N.i),typeof window<"u")for(const re of[N.b,N.a])B.includes(re)||B.push(re);return B.includes(N.L)||B.push(N.L),B}class At{constructor(){this.providerId="phone",this._delegate=new N.P(ji($.Z.auth()))}static credential(O,B){return N.P.credential(O,B)}verifyPhoneNumber(O,B){return this._delegate.verifyPhoneNumber(O,B)}unwrap(){return this._delegate}}At.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,At.PROVIDER_ID=N.P.PROVIDER_ID;const rn=N.ax;class q{constructor(O,B,re=$.Z.app()){var Fe;rn(null===(Fe=re.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:re.name}),this._delegate=new N.R(O,B,re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(j){j.INTERNAL.registerComponent(new ge.wA("auth-compat",O=>{const B=O.getProvider("app-compat").getImmediate(),re=O.getProvider("auth");return new Se(B,re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:At,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:q,TwitterAuthProvider:N.W,Auth:Se,AuthCredential:N.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),j.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(_t,ke,V)=>{V.d(ke,{y:()=>fe});var l=V(930),$=V(727),N=V(8822),ae=V(9635),ce=V(2416),_e=V(576),ge=V(2806);let fe=(()=>{class J{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const De=new J;return De.source=this,De.operator=Pe,De}subscribe(Pe,De,at){const Ie=function z(J){return J&&J instanceof l.Lv||function Z(J){return J&&(0,_e.m)(J.next)&&(0,_e.m)(J.error)&&(0,_e.m)(J.complete)}(J)&&(0,$.Nn)(J)}(Pe)?Pe:new l.Hp(Pe,De,at);return(0,ge.x)(()=>{const{operator:me,source:it}=this;Ie.add(me?me.call(Ie,it):it?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(De){Pe.error(De)}}forEach(Pe,De){return new(De=ve(De))((at,Ie)=>{const me=new l.Hp({next:it=>{try{Pe(it)}catch(tt){Ie(tt),me.unsubscribe()}},error:Ie,complete:at});this.subscribe(me)})}_subscribe(Pe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(Pe)}[N.L](){return this}pipe(...Pe){return(0,ae.U)(Pe)(this)}toPromise(Pe){return new(Pe=ve(Pe))((De,at)=>{let Ie;this.subscribe(me=>Ie=me,me=>at(me),()=>De(Ie))})}}return J.create=Ge=>new J(Ge),J})();function ve(J){var Ge;return null!==(Ge=J??ce.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(_t,ke,V)=>{V.d(ke,{x:()=>ge});var l=V(9751),$=V(727);const ae=(0,V(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=V(8737),_e=V(2806);let ge=(()=>{class ve extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new fe(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new ae}next(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:Ge,observers:Pe}=this;return J||Ge?$.Lc:(this.currentObservers=null,Pe.push(z),new $.w0(()=>{this.currentObservers=null,(0,ce.P)(Pe,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:Ge,isStopped:Pe}=this;J?z.error(Ge):Pe&&z.complete()}asObservable(){const z=new l.y;return z.source=this,z}}return ve.create=(Z,z)=>new fe(Z,z),ve})();class fe extends ge{constructor(Z,z){super(),this.destination=Z,this.source=z}next(Z){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,Z)}error(Z){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,Z)}complete(){var Z,z;null===(z=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===z||z.call(Z)}_subscribe(Z){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(Z))&&void 0!==J?J:$.Lc}}},930:(_t,ke,V)=>{V.d(ke,{Hp:()=>at,Lv:()=>J});var l=V(576),$=V(727),N=V(2416),ae=V(7849),ce=V(5032);const _e=ve("C",void 0,void 0);function ve(Le,Oe,Ee){return{kind:Le,value:Oe,error:Ee}}var Z=V(3410),z=V(2806);class J extends $.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,$.Nn)(Oe)&&Oe.add(this)):this.destination=tt}static create(Oe,Ee,Ze){return new at(Oe,Ee,Ze)}next(Oe){this.isStopped?it(function fe(Le){return ve("N",Le,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?it(function ge(Le){return ve("E",void 0,Le)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?it(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Pe(Le,Oe){return Ge.call(Le,Oe)}class De{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Oe)}catch(Ze){Ie(Ze)}}error(Oe){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Oe)}catch(Ze){Ie(Ze)}else Ie(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(Ee){Ie(Ee)}}}class at extends J{constructor(Oe,Ee,Ze){let oe;if(super(),(0,l.m)(Oe)||!Oe)oe={next:Oe??void 0,error:Ee??void 0,complete:Ze??void 0};else{let de;this&&N.v.useDeprecatedNextContext?(de=Object.create(Oe),de.unsubscribe=()=>this.unsubscribe(),oe={next:Oe.next&&Pe(Oe.next,de),error:Oe.error&&Pe(Oe.error,de),complete:Oe.complete&&Pe(Oe.complete,de)}):oe=Oe}this.destination=new De(oe)}}function Ie(Le){N.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Le):(0,ae.h)(Le)}function it(Le,Oe){const{onStoppedNotification:Ee}=N.v;Ee&&Z.z.setTimeout(()=>Ee(Le,Oe))}const tt={closed:!0,next:ce.Z,error:function me(Le){throw Le},complete:ce.Z}},727:(_t,ke,V)=>{V.d(ke,{Lc:()=>_e,w0:()=>ce,Nn:()=>ge});var l=V(576);const N=(0,V(3888).d)(ve=>function(z){ve(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,Ge)=>`${Ge+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ae=V(8737);class ce{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Pe of z)Pe.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,l.m)(J))try{J()}catch(Pe){Z=Pe instanceof N?Pe.errors:[Pe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Pe of Ge)try{fe(Pe)}catch(De){Z=Z??[],De instanceof N?Z=[...Z,...De.errors]:Z.push(De)}}if(Z)throw new N(Z)}}add(Z){var z;if(Z&&Z!==this)if(this.closed)fe(Z);else{if(Z instanceof ce){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(Z)}}_hasParent(Z){const{_parentage:z}=this;return z===Z||Array.isArray(z)&&z.includes(Z)}_addParent(Z){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(Z),z):z?[z,Z]:Z}_removeParent(Z){const{_parentage:z}=this;z===Z?this._parentage=null:Array.isArray(z)&&(0,ae.P)(z,Z)}remove(Z){const{_finalizers:z}=this;z&&(0,ae.P)(z,Z),Z instanceof ce&&Z._removeParent(this)}}ce.EMPTY=(()=>{const ve=new ce;return ve.closed=!0,ve})();const _e=ce.EMPTY;function ge(ve){return ve instanceof ce||ve&&"closed"in ve&&(0,l.m)(ve.remove)&&(0,l.m)(ve.add)&&(0,l.m)(ve.unsubscribe)}function fe(ve){(0,l.m)(ve)?ve():ve.unsubscribe()}},2416:(_t,ke,V)=>{V.d(ke,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,ke,V)=>{V.d(ke,{E:()=>$});const $=new(V(9751).y)(ce=>ce.complete())},8996:(_t,ke,V)=>{V.d(ke,{D:()=>Oe});var l=V(8421),$=V(5363),N=V(9468),_e=V(9751),fe=V(2202),ve=V(576),Z=V(9672);function J(Ee,Ze){if(!Ee)throw new Error("Iterable cannot be null");return new _e.y(oe=>{(0,Z.f)(oe,Ze,()=>{const de=Ee[Symbol.asyncIterator]();(0,Z.f)(oe,Ze,()=>{de.next().then(we=>{we.done?oe.complete():oe.next(we.value)})},0,!0)})})}var Ge=V(3670),Pe=V(8239),De=V(1144),at=V(6495),Ie=V(2206),me=V(4532),it=V(3260);function Oe(Ee,Ze){return Ze?function Le(Ee,Ze){if(null!=Ee){if((0,Ge.c)(Ee))return function ae(Ee,Ze){return(0,l.Xf)(Ee).pipe((0,N.R)(Ze),(0,$.Q)(Ze))}(Ee,Ze);if((0,De.z)(Ee))return function ge(Ee,Ze){return new _e.y(oe=>{let de=0;return Ze.schedule(function(){de===Ee.length?oe.complete():(oe.next(Ee[de++]),oe.closed||this.schedule())})})}(Ee,Ze);if((0,Pe.t)(Ee))return function ce(Ee,Ze){return(0,l.Xf)(Ee).pipe((0,N.R)(Ze),(0,$.Q)(Ze))}(Ee,Ze);if((0,Ie.D)(Ee))return J(Ee,Ze);if((0,at.T)(Ee))return function z(Ee,Ze){return new _e.y(oe=>{let de;return(0,Z.f)(oe,Ze,()=>{de=Ee[fe.h](),(0,Z.f)(oe,Ze,()=>{let we,Q;try{({value:we,done:Q}=de.next())}catch(ee){return void oe.error(ee)}Q?oe.complete():oe.next(we)},0,!0)}),()=>(0,ve.m)(de?.return)&&de.return()})}(Ee,Ze);if((0,it.L)(Ee))return function tt(Ee,Ze){return J((0,it.Q)(Ee),Ze)}(Ee,Ze)}throw(0,me.z)(Ee)}(Ee,Ze):(0,l.Xf)(Ee)}},8421:(_t,ke,V)=>{V.d(ke,{Xf:()=>Ge});var l=V(655),$=V(1144),N=V(8239),ae=V(9751),ce=V(3670),_e=V(2206),ge=V(4532),fe=V(6495),ve=V(3260),Z=V(576),z=V(7849),J=V(8822);function Ge(Le){if(Le instanceof ae.y)return Le;if(null!=Le){if((0,ce.c)(Le))return function Pe(Le){return new ae.y(Oe=>{const Ee=Le[J.L]();if((0,Z.m)(Ee.subscribe))return Ee.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,$.z)(Le))return function De(Le){return new ae.y(Oe=>{for(let Ee=0;Ee<Le.length&&!Oe.closed;Ee++)Oe.next(Le[Ee]);Oe.complete()})}(Le);if((0,N.t)(Le))return function at(Le){return new ae.y(Oe=>{Le.then(Ee=>{Oe.closed||(Oe.next(Ee),Oe.complete())},Ee=>Oe.error(Ee)).then(null,z.h)})}(Le);if((0,_e.D)(Le))return me(Le);if((0,fe.T)(Le))return function Ie(Le){return new ae.y(Oe=>{for(const Ee of Le)if(Oe.next(Ee),Oe.closed)return;Oe.complete()})}(Le);if((0,ve.L)(Le))return function it(Le){return me((0,ve.Q)(Le))}(Le)}throw(0,ge.z)(Le)}function me(Le){return new ae.y(Oe=>{(function tt(Le,Oe){var Ee,Ze,oe,de;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,l.KL)(Le);!(Ze=yield Ee.next()).done;)if(Oe.next(Ze.value),Oe.closed)return}catch(we){oe={error:we}}finally{try{Ze&&!Ze.done&&(de=Ee.return)&&(yield de.call(Ee))}finally{if(oe)throw oe.error}}Oe.complete()})})(Le,Oe).catch(Ee=>Oe.error(Ee))})}},6451:(_t,ke,V)=>{V.d(ke,{T:()=>_e});var l=V(8189),$=V(8421),N=V(515),ae=V(7669),ce=V(8996);function _e(...ge){const fe=(0,ae.yG)(ge),ve=(0,ae._6)(ge,1/0),Z=ge;return Z.length?1===Z.length?(0,$.Xf)(Z[0]):(0,l.J)(ve)((0,ce.D)(Z,fe)):N.E}},5403:(_t,ke,V)=>{V.d(ke,{x:()=>$});var l=V(930);function $(ae,ce,_e,ge,fe){return new N(ae,ce,_e,ge,fe)}class N extends l.Lv{constructor(ce,_e,ge,fe,ve,Z){super(ce),this.onFinalize=ve,this.shouldUnsubscribe=Z,this._next=_e?function(z){try{_e(z)}catch(J){ce.error(J)}}:super._next,this._error=fe?function(z){try{fe(z)}catch(J){ce.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(z){ce.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(_t,ke,V)=>{V.d(ke,{U:()=>N});var l=V(4482),$=V(5403);function N(ae,ce){return(0,l.e)((_e,ge)=>{let fe=0;_e.subscribe((0,$.x)(ge,ve=>{ge.next(ae.call(ce,ve,fe++))}))})}},8189:(_t,ke,V)=>{V.d(ke,{J:()=>N});var l=V(5577),$=V(4671);function N(ae=1/0){return(0,l.z)($.y,ae)}},5577:(_t,ke,V)=>{V.d(ke,{z:()=>fe});var l=V(4004),$=V(8421),N=V(4482),ae=V(9672),ce=V(5403),ge=V(576);function fe(ve,Z,z=1/0){return(0,ge.m)(Z)?fe((J,Ge)=>(0,l.U)((Pe,De)=>Z(J,Pe,Ge,De))((0,$.Xf)(ve(J,Ge))),z):("number"==typeof Z&&(z=Z),(0,N.e)((J,Ge)=>function _e(ve,Z,z,J,Ge,Pe,De,at){const Ie=[];let me=0,it=0,tt=!1;const Le=()=>{tt&&!Ie.length&&!me&&Z.complete()},Oe=Ze=>me<J?Ee(Ze):Ie.push(Ze),Ee=Ze=>{Pe&&Z.next(Ze),me++;let oe=!1;(0,$.Xf)(z(Ze,it++)).subscribe((0,ce.x)(Z,de=>{Ge?.(de),Pe?Oe(de):Z.next(de)},()=>{oe=!0},void 0,()=>{if(oe)try{for(me--;Ie.length&&me<J;){const de=Ie.shift();De?(0,ae.f)(Z,De,()=>Ee(de)):Ee(de)}Le()}catch(de){Z.error(de)}}))};return ve.subscribe((0,ce.x)(Z,Oe,()=>{tt=!0,Le()})),()=>{at?.()}}(J,Ge,ve,z)))}},5363:(_t,ke,V)=>{V.d(ke,{Q:()=>ae});var l=V(9672),$=V(4482),N=V(5403);function ae(ce,_e=0){return(0,$.e)((ge,fe)=>{ge.subscribe((0,N.x)(fe,ve=>(0,l.f)(fe,ce,()=>fe.next(ve),_e),()=>(0,l.f)(fe,ce,()=>fe.complete(),_e),ve=>(0,l.f)(fe,ce,()=>fe.error(ve),_e)))})}},3099:(_t,ke,V)=>{V.d(ke,{B:()=>ce});var l=V(8421),$=V(7579),N=V(930),ae=V(4482);function ce(ge={}){const{connector:fe=(()=>new $.x),resetOnError:ve=!0,resetOnComplete:Z=!0,resetOnRefCountZero:z=!0}=ge;return J=>{let Ge,Pe,De,at=0,Ie=!1,me=!1;const it=()=>{Pe?.unsubscribe(),Pe=void 0},tt=()=>{it(),Ge=De=void 0,Ie=me=!1},Le=()=>{const Oe=Ge;tt(),Oe?.unsubscribe()};return(0,ae.e)((Oe,Ee)=>{at++,!me&&!Ie&&it();const Ze=De=De??fe();Ee.add(()=>{at--,0===at&&!me&&!Ie&&(Pe=_e(Le,z))}),Ze.subscribe(Ee),!Ge&&at>0&&(Ge=new N.Hp({next:oe=>Ze.next(oe),error:oe=>{me=!0,it(),Pe=_e(tt,ve,oe),Ze.error(oe)},complete:()=>{Ie=!0,it(),Pe=_e(tt,Z),Ze.complete()}}),(0,l.Xf)(Oe).subscribe(Ge))})(J)}}function _e(ge,fe,...ve){if(!0===fe)return void ge();if(!1===fe)return;const Z=new N.Hp({next:()=>{Z.unsubscribe(),ge()}});return fe(...ve).subscribe(Z)}},9468:(_t,ke,V)=>{V.d(ke,{R:()=>$});var l=V(4482);function $(N,ae=0){return(0,l.e)((ce,_e)=>{_e.add(N.schedule(()=>ce.subscribe(_e),ae))})}},8505:(_t,ke,V)=>{V.d(ke,{b:()=>ce});var l=V(576),$=V(4482),N=V(5403),ae=V(4671);function ce(_e,ge,fe){const ve=(0,l.m)(_e)||ge||fe?{next:_e,error:ge,complete:fe}:_e;return ve?(0,$.e)((Z,z)=>{var J;null===(J=ve.subscribe)||void 0===J||J.call(ve);let Ge=!0;Z.subscribe((0,N.x)(z,Pe=>{var De;null===(De=ve.next)||void 0===De||De.call(ve,Pe),z.next(Pe)},()=>{var Pe;Ge=!1,null===(Pe=ve.complete)||void 0===Pe||Pe.call(ve),z.complete()},Pe=>{var De;Ge=!1,null===(De=ve.error)||void 0===De||De.call(ve,Pe),z.error(Pe)},()=>{var Pe,De;Ge&&(null===(Pe=ve.unsubscribe)||void 0===Pe||Pe.call(ve)),null===(De=ve.finalize)||void 0===De||De.call(ve)}))}):ae.y}},4408:(_t,ke,V)=>{V.d(ke,{o:()=>ce});var l=V(727);class $ extends l.w0{constructor(ge,fe){super()}schedule(ge,fe=0){return this}}const N={setInterval(_e,ge,...fe){const{delegate:ve}=N;return ve?.setInterval?ve.setInterval(_e,ge,...fe):setInterval(_e,ge,...fe)},clearInterval(_e){const{delegate:ge}=N;return(ge?.clearInterval||clearInterval)(_e)},delegate:void 0};var ae=V(8737);class ce extends ${constructor(ge,fe){super(ge,fe),this.scheduler=ge,this.work=fe,this.pending=!1}schedule(ge,fe=0){var ve;if(this.closed)return this;this.state=ge;const Z=this.id,z=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(z,Z,fe)),this.pending=!0,this.delay=fe,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(z,this.id,fe),this}requestAsyncId(ge,fe,ve=0){return N.setInterval(ge.flush.bind(ge,this),ve)}recycleAsyncId(ge,fe,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return fe;null!=fe&&N.clearInterval(fe)}execute(ge,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ge,fe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,fe){let Z,ve=!1;try{this.work(ge)}catch(z){ve=!0,Z=z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:ge,scheduler:fe}=this,{actions:ve}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=ge&&(this.id=this.recycleAsyncId(fe,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,ke,V)=>{V.d(ke,{v:()=>N});var l=V(6063);class ${constructor(ce,_e=$.now){this.schedulerActionCtor=ce,this.now=_e}schedule(ce,_e=0,ge){return new this.schedulerActionCtor(this,ce).schedule(ge,_e)}}$.now=l.l.now;class N extends ${constructor(ce,_e=$.now){super(ce,_e),this.actions=[],this._active=!1}flush(ce){const{actions:_e}=this;if(this._active)return void _e.push(ce);let ge;this._active=!0;do{if(ge=ce.execute(ce.state,ce.delay))break}while(ce=_e.shift());if(this._active=!1,ge){for(;ce=_e.shift();)ce.unsubscribe();throw ge}}}},4986:(_t,ke,V)=>{V.d(ke,{z:()=>N});var l=V(4408);const N=new(V(7565).v)(l.o)},6063:(_t,ke,V)=>{V.d(ke,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(_t,ke,V)=>{V.d(ke,{z:()=>l});const l={setTimeout($,N,...ae){const{delegate:ce}=l;return ce?.setTimeout?ce.setTimeout($,N,...ae):setTimeout($,N,...ae)},clearTimeout($){const{delegate:N}=l;return(N?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(_t,ke,V)=>{V.d(ke,{h:()=>$});const $=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,ke,V)=>{V.d(ke,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,ke,V)=>{V.d(ke,{_6:()=>_e,jO:()=>ae,yG:()=>ce});var l=V(576);function N(ge){return ge[ge.length-1]}function ae(ge){return(0,l.m)(N(ge))?ge.pop():void 0}function ce(ge){return function $(ge){return ge&&(0,l.m)(ge.schedule)}(N(ge))?ge.pop():void 0}function _e(ge,fe){return"number"==typeof N(ge)?ge.pop():fe}},8737:(_t,ke,V)=>{function l($,N){if($){const ae=$.indexOf(N);0<=ae&&$.splice(ae,1)}}V.d(ke,{P:()=>l})},3888:(_t,ke,V)=>{function l($){const ae=$(ce=>{Error.call(ce),ce.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}V.d(ke,{d:()=>l})},2806:(_t,ke,V)=>{V.d(ke,{O:()=>ae,x:()=>N});var l=V(2416);let $=null;function N(ce){if(l.v.useDeprecatedSynchronousErrorHandling){const _e=!$;if(_e&&($={errorThrown:!1,error:null}),ce(),_e){const{errorThrown:ge,error:fe}=$;if($=null,ge)throw fe}}else ce()}function ae(ce){l.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ce)}},9672:(_t,ke,V)=>{function l($,N,ae,ce=0,_e=!1){const ge=N.schedule(function(){ae(),_e?$.add(this.schedule(null,ce)):this.unsubscribe()},ce);if($.add(ge),!_e)return ge}V.d(ke,{f:()=>l})},4671:(_t,ke,V)=>{function l($){return $}V.d(ke,{y:()=>l})},1144:(_t,ke,V)=>{V.d(ke,{z:()=>l});const l=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(_t,ke,V)=>{V.d(ke,{D:()=>$});var l=V(576);function $(N){return Symbol.asyncIterator&&(0,l.m)(N?.[Symbol.asyncIterator])}},576:(_t,ke,V)=>{function l($){return"function"==typeof $}V.d(ke,{m:()=>l})},3670:(_t,ke,V)=>{V.d(ke,{c:()=>N});var l=V(8822),$=V(576);function N(ae){return(0,$.m)(ae[l.L])}},6495:(_t,ke,V)=>{V.d(ke,{T:()=>N});var l=V(2202),$=V(576);function N(ae){return(0,$.m)(ae?.[l.h])}},8239:(_t,ke,V)=>{V.d(ke,{t:()=>$});var l=V(576);function $(N){return(0,l.m)(N?.then)}},3260:(_t,ke,V)=>{V.d(ke,{L:()=>ae,Q:()=>N});var l=V(655),$=V(576);function N(ce){return(0,l.FC)(this,arguments,function*(){const ge=ce.getReader();try{for(;;){const{value:fe,done:ve}=yield(0,l.qq)(ge.read());if(ve)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(fe)}}finally{ge.releaseLock()}})}function ae(ce){return(0,$.m)(ce?.getReader)}},4482:(_t,ke,V)=>{V.d(ke,{A:()=>$,e:()=>N});var l=V(576);function $(ae){return(0,l.m)(ae?.lift)}function N(ae){return ce=>{if($(ce))return ce.lift(function(_e){try{return ae(_e,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(_t,ke,V)=>{function l(){}V.d(ke,{Z:()=>l})},9635:(_t,ke,V)=>{V.d(ke,{U:()=>N,z:()=>$});var l=V(4671);function $(...ae){return N(ae)}function N(ae){return 0===ae.length?l.y:1===ae.length?ae[0]:function(_e){return ae.reduce((ge,fe)=>fe(ge),_e)}}},7849:(_t,ke,V)=>{V.d(ke,{h:()=>N});var l=V(2416),$=V(3410);function N(ae){$.z.setTimeout(()=>{const{onUnhandledError:ce}=l.v;if(!ce)throw ae;ce(ae)})}},4532:(_t,ke,V)=>{function l($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(ke,{z:()=>l})},655:(_t,ke,V)=>{function ae(Q,ee){var pe={};for(var ue in Q)Object.prototype.hasOwnProperty.call(Q,ue)&&ee.indexOf(ue)<0&&(pe[ue]=Q[ue]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ue=Object.getOwnPropertySymbols(Q);He<ue.length;He++)ee.indexOf(ue[He])<0&&Object.prototype.propertyIsEnumerable.call(Q,ue[He])&&(pe[ue[He]]=Q[ue[He]])}return pe}function fe(Q,ee,pe,ue){return new(pe||(pe=Promise))(function(je,wt){function ln(fn){try{Ye(ue.next(fn))}catch(En){wt(En)}}function $t(fn){try{Ye(ue.throw(fn))}catch(En){wt(En)}}function Ye(fn){fn.done?je(fn.value):function He(je){return je instanceof pe?je:new pe(function(wt){wt(je)})}(fn.value).then(ln,$t)}Ye((ue=ue.apply(Q,ee||[])).next())})}function Ie(Q){return this instanceof Ie?(this.v=Q,this):new Ie(Q)}function me(Q,ee,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ue=pe.apply(Q,ee||[]),je=[];return He={},wt("next"),wt("throw"),wt("return"),He[Symbol.asyncIterator]=function(){return this},He;function wt(sn){ue[sn]&&(He[sn]=function(on){return new Promise(function(Zt,Gt){je.push([sn,on,Zt,Gt])>1||ln(sn,on)})})}function ln(sn,on){try{!function $t(sn){sn.value instanceof Ie?Promise.resolve(sn.value.v).then(Ye,fn):En(je[0][2],sn)}(ue[sn](on))}catch(Zt){En(je[0][3],Zt)}}function Ye(sn){ln("next",sn)}function fn(sn){ln("throw",sn)}function En(sn,on){sn(on),je.shift(),je.length&&ln(je[0][0],je[0][1])}}function tt(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function J(Q){var ee="function"==typeof Symbol&&Symbol.iterator,pe=ee&&Q[ee],ue=0;if(pe)return pe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ue>=Q.length&&(Q=void 0),{value:Q&&Q[ue++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),pe={},ue("next"),ue("throw"),ue("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function ue(je){pe[je]=Q[je]&&function(wt){return new Promise(function(ln,$t){!function He(je,wt,ln,$t){Promise.resolve($t).then(function(Ye){je({value:Ye,done:ln})},wt)}(ln,$t,(wt=Q[je](wt)).done,wt.value)})}}}V.d(ke,{FC:()=>me,KL:()=>tt,_T:()=>ae,mG:()=>fe,qq:()=>Ie})},4650:(_t,ke,V)=>{V.d(ke,{$8M:()=>Pl,$Z:()=>hg,AFp:()=>SE,AaK:()=>fe,Akn:()=>zs,AsE:()=>Jy,BQk:()=>Gl,CHM:()=>_h,CRH:()=>sE,CZH:()=>nm,CqO:()=>DI,D6c:()=>OM,DdM:()=>Vb,EJc:()=>oM,EpF:()=>EI,F$t:()=>OI,F4k:()=>TI,FYo:()=>sS,FiY:()=>Be,G48:()=>vM,Gf:()=>iE,GfV:()=>rC,GkF:()=>Ry,Gpc:()=>z,HTZ:()=>Tv,Hsn:()=>RI,JOm:()=>Ca,KtG:()=>qo,LFG:()=>kn,LSH:()=>Np,Lbi:()=>iM,Lck:()=>ix,MAs:()=>II,MMx:()=>bv,NdJ:()=>Py,OlP:()=>Sn,Oqu:()=>ff,PXZ:()=>_M,Q6J:()=>ky,QGY:()=>Ny,QP$:()=>Fe,Qsj:()=>jR,R0b:()=>Ao,RDi:()=>xp,Rgc:()=>Tf,SBq:()=>Nu,Sil:()=>uM,Suo:()=>rE,TTD:()=>xs,TgZ:()=>Cd,Tol:()=>jI,Udp:()=>Rg,VKq:()=>Ub,W1O:()=>uE,WLB:()=>Ev,X6Q:()=>qu,XFs:()=>nt,Xpm:()=>Se,Xts:()=>C_,Y36:()=>ll,YKP:()=>xb,YNc:()=>CI,Yjl:()=>j,Yz7:()=>on,Z0I:()=>Hr,ZZ4:()=>Jv,_Bn:()=>Ab,_UZ:()=>bI,_Vd:()=>Ru,_c5:()=>MM,_uU:()=>qI,aQg:()=>vm,c2e:()=>rM,cJS:()=>Gt,cg1:()=>Hg,dDg:()=>fM,dqk:()=>Nt,eFA:()=>zv,ekj:()=>Ng,eoX:()=>UE,f3M:()=>T,g9A:()=>xE,h0i:()=>Od,hGG:()=>kM,hij:()=>Bu,iGM:()=>nE,ifc:()=>It,ip1:()=>DE,jDz:()=>kb,kEZ:()=>Bb,kL8:()=>sv,l5B:()=>Hb,lG2:()=>Y,lqb:()=>wa,lri:()=>rm,n5z:()=>Ns,oAB:()=>rn,oJD:()=>Rp,oxw:()=>kI,q4F:()=>sC,qLn:()=>Yh,qOj:()=>xg,qZA:()=>kg,qbA:()=>jb,rFY:()=>Gb,rWj:()=>Gv,s9C:()=>Fy,sBO:()=>Ki,sIi:()=>ud,s_b:()=>Qg,soG:()=>im,tb:()=>ME,tp0:()=>Ot,uIk:()=>hd,vHH:()=>De,vpe:()=>Da,vpz:()=>Hu,wAp:()=>Rt,xp6:()=>PC,ynx:()=>Og,z2F:()=>Fi,zSh:()=>Vp,zs3:()=>Lu});var l=V(7579),$=V(727),N=V(9751),ae=V(6451),ce=V(3099);function _e(o){for(let a in o)if(o[a]===_e)return a;throw Error("Could not find renamed property on target object.")}function ge(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function fe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(fe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Z=_e({__forward_ref__:_e});function z(o){return o.__forward_ref__=z,o.toString=function(){return fe(this())},o}function J(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(Z)&&o.__forward_ref__===z}class De extends Error{constructor(a,u){super(function at(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function Ie(o){return"string"==typeof o?o:null==o?"":String(o)}function Oe(o,a){throw new De(-201,!1)}function $t(o,a){null==o&&function Ye(o,a,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function on(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Gt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ii(o){return Bi(o,Hi)||Bi(o,Dr)}function Hr(o){return null!==Ii(o)}function Bi(o,a){return o.hasOwnProperty(a)?o[a]:null}function Gr(o){return o&&(o.hasOwnProperty(Gn)||o.hasOwnProperty($r))?o[Gn]:null}const Hi=_e({\u0275prov:_e}),Gn=_e({\u0275inj:_e}),Dr=_e({ngInjectableDef:_e}),$r=_e({ngInjectorDef:_e});var nt=(()=>((nt=nt||{})[nt.Default=0]="Default",nt[nt.Host=1]="Host",nt[nt.Self=2]="Self",nt[nt.SkipSelf=4]="SkipSelf",nt[nt.Optional=8]="Optional",nt))();let ri;function Cn(o){const a=ri;return ri=o,a}function gi(o,a,u){const d=Ii(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&nt.Optional?null:void 0!==a?a:void Oe(fe(o))}function In(o){return{toString:o}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),It=(()=>{return(o=It||(It={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",It;var o})();const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mi={},kt=[],ki=_e({\u0275cmp:_e}),Vt=_e({\u0275dir:_e}),Qi=_e({\u0275pipe:_e}),en=_e({\u0275mod:_e}),di=_e({\u0275fac:_e}),Mn=_e({__NG_ELEMENT_ID__:_e});let st=0;function Se(o){return In(()=>{const u=!0===o.standalone,d={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||kt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||It.Emulated,id:"c"+st++,styles:o.styles||kt,_:null,setInput:null,schemas:o.schemas||null,tView:null},p=o.dependencies,v=o.features;return f.inputs=W(o.inputs,d),f.outputs=W(o.outputs),v&&v.forEach(C=>C(f)),f.directiveDefs=p?()=>("function"==typeof p?p():p).map(Dt).filter(At):null,f.pipeDefs=p?()=>("function"==typeof p?p():p).map(re).filter(At):null,f})}function Dt(o){return O(o)||B(o)}function At(o){return null!==o}function rn(o){return In(()=>({type:o.type,bootstrap:o.bootstrap||kt,declarations:o.declarations||kt,imports:o.imports||kt,exports:o.exports||kt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function W(o,a){if(null==o)return Mi;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],p=f;Array.isArray(f)&&(p=f[1],f=f[0]),u[f]=d,a&&(a[f]=p)}return u}const Y=Se;function j(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function O(o){return o[ki]||null}function B(o){return o[Vt]||null}function re(o){return o[Qi]||null}function Fe(o){const a=O(o)||B(o)||re(o);return null!==a&&a.standalone}function ut(o,a){const u=o[en]||null;if(!u&&!0===a)throw new Error(`Type ${fe(o)} does not have '\u0275mod' property.`);return u}function si(o){return Array.isArray(o)&&"object"==typeof o[1]}function hr(o){return Array.isArray(o)&&!0===o[1]}function Vo(o){return 0!=(8&o.flags)}function ou(o){return 2==(2&o.flags)}function Fa(o){return 1==(1&o.flags)}function Xi(o){return null!==o.template}function au(o){return 0!=(256&o[2])}function bi(o,a){return o.hasOwnProperty(di)?o[di]:null}class jo{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function xs(){return fc}function fc(o){return o.type.prototype.ngOnChanges&&(o.setInput=lu),bl}function bl(){const o=Go(this),a=o?.current;if(a){const u=o.previous;if(u===Mi)o.previous=a;else for(let d in a)u[d]=a[d];o.current=null,this.ngOnChanges(a)}}function lu(o,a,u,d){const f=Go(o)||function Oi(o,a){return o[pc]=a}(o,{previous:Mi,current:null}),p=f.current||(f.current={}),v=f.previous,C=this.declaredInputs[u],E=v[C];p[C]=new jo(E&&E.currentValue,a,v===Mi),o[d]=a}xs.ngInherit=!0;const pc="__ngSimpleChanges__";function Go(o){return o[pc]||null}function Fn(o){for(;Array.isArray(o);)o=o[0];return o}function Ar(o,a){return Fn(a[o])}function Ei(o,a){return Fn(a[o.index])}function Wo(o,a){return o.data[a]}function un(o,a){const u=a[o];return si(u)?u:u[0]}function Ms(o){return 64==(64&o[2])}function gr(o,a){return null==a?null:o[a]}function Va(o){o[18]=0}function $n(o,a){o[5]+=a;let u=o,d=o[3];for(;null!==d&&(1===a&&1===u[5]||-1===a&&0===u[5]);)d[5]+=a,u=d,d=d[3]}const Lt={lFrame:Za(null),bindingsEnabled:!0};function lo(){return Lt.bindingsEnabled}function Re(){return Lt.lFrame.lView}function Yt(){return Lt.lFrame.tView}function _h(o){return Lt.lFrame.contextLView=o,o[8]}function qo(o){return Lt.lFrame.contextLView=null,o}function oi(){let o=Zo();for(;null!==o&&64===o.type;)o=o.parent;return o}function Zo(){return Lt.lFrame.currentTNode}function $i(o,a){const u=Lt.lFrame;u.currentTNode=o,u.isParent=a}function Dl(){return Lt.lFrame.isParent}function Ko(){Lt.lFrame.isParent=!1}function ai(){const o=Lt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Wa(){return Lt.lFrame.bindingIndex++}function cs(o){const a=Lt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function yc(o,a){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=o,Yo(a)}function Yo(o){Lt.lFrame.currentDirectiveIndex=o}function za(){return Lt.lFrame.currentQueryIndex}function pu(o){Lt.lFrame.currentQueryIndex=o}function qa(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function vc(o,a,u){if(u&nt.SkipSelf){let f=a,p=o;for(;!(f=f.parent,null!==f||u&nt.Host||(f=qa(p),null===f||(p=p[15],10&f.type))););if(null===f)return!1;a=f,o=p}const d=Lt.lFrame=wh();return d.currentTNode=a,d.lView=o,!0}function Qo(o){const a=wh(),u=o[1];Lt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function wh(){const o=Lt.lFrame,a=null===o?null:o.child;return null===a?Za(o):a}function Za(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Ch(){const o=Lt.lFrame;return Lt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const wc=Ch;function ks(){const o=Ch();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function On(){return Lt.lFrame.selectedIndex}function ds(o){Lt.lFrame.selectedIndex=o}function Rn(){const o=Lt.lFrame;return Wo(o.tView,o.selectedIndex)}function Sl(o,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const p=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:E,ngAfterViewChecked:A,ngOnDestroy:R}=p;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),E&&(o.viewHooks||(o.viewHooks=[])).push(-u,E),A&&((o.viewHooks||(o.viewHooks=[])).push(u,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,A)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(u,R)}}function Jo(o,a,u){ea(o,a,3,u)}function Xo(o,a,u,d){(3&o[2])===u&&ea(o,a,u,d)}function bc(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function ea(o,a,u,d){const p=d??-1,v=a.length-1;let C=0;for(let E=void 0!==d?65535&o[18]:0;E<v;E++)if("number"==typeof a[E+1]){if(C=a[E],null!=d&&C>=d)break}else a[E]<0&&(o[18]+=65536),(C<p||-1==p)&&(Ec(o,u,a,E),o[18]=(4294901760&o[18])+E+2),E++}function Ec(o,a,u,d){const f=u[d]<0,p=u[d+1],C=o[f?-u[d]:u[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class mr{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function hs(o,a,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const p=u[d++],v=u[d++],C=u[d++];o.setAttribute(a,v,C,p)}else{const p=f,v=u[++d];wu(p)?o.setProperty(a,p,v):o.setAttribute(a,p,v),d++}}return d}function Ka(o){return 3===o||4===o||6===o}function wu(o){return 64===o.charCodeAt(0)}function Ya(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?u=f:0===u||Dc(o,u,f,null,-1===u||2===u?a[++d]:null)}}return o}function Dc(o,a,u,d,f){let p=0,v=o.length;if(-1===a)v=-1;else for(;p<o.length;){const C=o[p++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=p-1;break}}}for(;p<o.length;){const C=o[p];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==f&&(o[p+1]=f));if(d===o[p+1])return void(o[p+2]=f)}p++,null!==d&&p++,null!==f&&p++}-1!==v&&(o.splice(v,0,a),p=v+1),o.splice(p++,0,u),null!==d&&o.splice(p++,0,d),null!==f&&o.splice(p++,0,f)}function Eh(o){return-1!==o}function li(o){return 32767&o}function Rs(o,a){let u=function Th(o){return o>>16}(o),d=a;for(;u>0;)d=d[15],u--;return d}let Cu=!0;function Qa(o){const a=Cu;return Cu=o,a}let Sc=0;const nr={};function fs(o,a){const u=Ol(o,a);if(-1!==u)return u;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Iu(d.data,o),Iu(a,null),Iu(d.blueprint,null));const f=Ja(o,a),p=o.injectorIndex;if(Eh(f)){const v=li(f),C=Rs(f,a),E=C[1].data;for(let A=0;A<8;A++)a[p+A]=C[v+A]|E[v+A]}return a[p+8]=f,p}function Iu(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Ol(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Ja(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=a;for(;null!==f;){if(d=la(f),null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function co(o,a,u){!function Ac(o,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Mn)&&(d=u[Mn]),null==d&&(d=u[Mn]=Sc++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function na(o,a,u){if(u&nt.Optional||void 0!==o)return o;Oe()}function ia(o,a,u,d){if(u&nt.Optional&&void 0===d&&(d=null),0==(u&(nt.Self|nt.Host))){const f=o[9],p=Cn(void 0);try{return f?f.get(a,d,u&nt.Optional):gi(a,d,u&nt.Optional)}finally{Cn(p)}}return na(d,0,u)}function ra(o,a,u,d=nt.Default,f){if(null!==o){if(1024&a[2]){const v=function Ah(o,a,u,d,f){let p=o,v=a;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=xc(p,v,u,d|nt.Self,nr);if(C!==nr)return C;let E=p.parent;if(!E){const A=v[21];if(A){const R=A.get(u,nr,d);if(R!==nr)return R}E=la(v),v=v[15]}p=E}return f}(o,a,u,d,nr);if(v!==nr)return v}const p=xc(o,a,u,d,nr);if(p!==nr)return p}return ia(a,u,d,f)}function xc(o,a,u,d,f){const p=function Sh(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Mn)?o[Mn]:void 0;return"number"==typeof a?a>=0?255&a:bu:a}(u);if("function"==typeof p){if(!vc(a,o,d))return d&nt.Host?na(f,0,d):ia(a,u,d,f);try{const v=p(d);if(null!=v||d&nt.Optional)return v;Oe()}finally{wc()}}else if("number"==typeof p){let v=null,C=Ol(o,a),E=-1,A=d&nt.Host?a[16][6]:null;for((-1===C||d&nt.SkipSelf)&&(E=-1===C?Ja(o,a):a[C+8],-1!==E&&Nl(d,!1)?(v=a[1],C=li(E),a=Rs(E,a)):C=-1);-1!==C;){const R=a[1];if(sa(p,C,R.data)){const U=Rl(C,a,u,v,d,A);if(U!==nr)return U}E=a[C+8],-1!==E&&Nl(d,a[1].data[C+8]===A)&&sa(p,C,a)?(v=R,C=li(E),a=Rs(E,a)):C=-1}}return f}function Rl(o,a,u,d,f,p){const v=a[1],C=v.data[o+8],R=el(C,v,u,null==d?ou(C)&&Cu:d!=v&&0!=(3&C.type),f&nt.Host&&p===C);return null!==R?qr(a,v,R,C):nr}function el(o,a,u,d,f){const p=o.providerIndexes,v=a.data,C=1048575&p,E=o.directiveStart,R=p>>20,K=f?C+R:o.directiveEnd;for(let se=d?C:C+R;se<K;se++){const Te=v[se];if(se<E&&u===Te||se>=E&&Te.type===u)return se}if(f){const se=v[E];if(se&&Xi(se)&&se.type===u)return E}return null}function qr(o,a,u,d){let f=o[u];const p=a.data;if(function vu(o){return o instanceof mr}(f)){const v=f;v.resolving&&function it(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new De(-200,`Circular dependency in DI detected for ${o}${u}`)}(function me(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ie(o)}(p[u]));const C=Qa(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?Cn(v.injectImpl):null;vc(o,d,nt.Default);try{f=o[u]=v.factory(void 0,p,o,d),a.firstCreatePass&&u>=d.directiveStart&&function yu(o,a,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:p}=a.type.prototype;if(d){const v=fc(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,p))}(u,p[u],a)}finally{null!==E&&Cn(E),Qa(C),v.resolving=!1,wc()}}return f}function sa(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Nl(o,a){return!(o&nt.Self||o&nt.Host&&a)}class oa{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return ra(this._tNode,this._lView,a,d,u)}}function bu(){return new oa(oi(),Re())}function Ns(o){return In(()=>{const a=o.prototype.constructor,u=a[di]||aa(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const p=f[di]||aa(f);if(p&&p!==u)return p;f=Object.getPrototypeOf(f)}return p=>new p})}function aa(o){return Ge(o)?()=>{const a=aa(J(o));return a&&a()}:bi(o)}function la(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Pl(o){return function Xa(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const p=u[f];if(Ka(p))break;if(0===p)f+=2;else if("number"==typeof p)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(p===a)return u[f+1];f+=2}}}return null}(oi(),o)}const ua="__parameters__";function da(o,a,u){return In(()=>{const d=function Eu(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(a);function f(...p){if(this instanceof f)return d.apply(this,p),this;const v=new f(...p);return C.annotation=v,C;function C(E,A,R){const U=E.hasOwnProperty(ua)?E[ua]:Object.defineProperty(E,ua,{value:[]})[ua];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(v),E}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Sn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=on({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function An(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let d=o[u];Array.isArray(d)?(a===o&&(a=o.slice(0,u)),An(d,a)):a!==o&&a.push(d)}return a}function ps(o,a){o.forEach(u=>Array.isArray(u)?ps(u,a):a(u))}function fo(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function _i(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function po(o,a){const u=[];for(let d=0;d<o;d++)u.push(a);return u}function dt(o,a,u){let d=Yr(o,a);return d>=0?o[1|d]=u:(d=~d,function kh(o,a,u,d){let f=o.length;if(f==a)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=d}}(o,d,a,u)),d}function tl(o,a){const u=Yr(o,a);if(u>=0)return o[1|u]}function Yr(o,a){return function nl(o,a,u){let d=0,f=o.length>>u;for(;f!==d;){const p=d+(f-d>>1),v=o[p<<u];if(a===v)return p<<u;v>a?f=p:d=p+1}return~(f<<u)}(o,a,1)}const _o={},Du="__NG_DI_FLAG__",Ps="ngTempTokenPath",gs=/\n/gm,ei="__source";let yo;function ms(o){const a=yo;return yo=o,a}function qn(o,a=nt.Default){if(void 0===yo)throw new De(-203,!1);return null===yo?gi(o,void 0,a):yo.get(o,a&nt.Optional?null:void 0,a)}function kn(o,a=nt.Default){return(function Yn(){return ri}()||qn)(J(o),a)}function T(o,a=nt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),kn(o,a)}function S(o){const a=[];for(let u=0;u<o.length;u++){const d=J(o[u]);if(Array.isArray(d)){if(0===d.length)throw new De(900,!1);let f,p=nt.Default;for(let v=0;v<d.length;v++){const C=d[v],E=H(C);"number"==typeof E?-1===E?f=C.token:p|=E:f=C}a.push(kn(f,p))}else a.push(kn(d))}return a}function k(o,a){return o[Du]=a,o.prototype[Du]=a,o}function H(o){return o[Du]}const Be=k(da("Optional"),8),Ot=k(da("SkipSelf"),4);let Fh,Su,Fc;function xp(o){Fh=o}function Co(o){return function Pc(){if(void 0===Su&&(Su=null,Nt.trustedTypes))try{Su=Nt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Su}()?.createHTML(o)||o}function Mp(o){return function Io(){if(void 0===Fc&&(Fc=null,Nt.trustedTypes))try{Fc=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Fc}()?.createHTML(o)||o}class kp{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Vs(o){return o instanceof kp?o.changingThisBreaksApplicationSecurity:o}function bo(o,a){const u=function Bh(o){return o instanceof kp&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}class y_{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Co(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class G0{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Co(a),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Co(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const v=u.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function _(o){return(o=String(o)).match(m)?o:"unsafe:"+o}function I(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function M(...o){const a={};for(const u of o)for(const d in u)u.hasOwnProperty(d)&&(a[d]=!0);return a}const P=I("area,br,col,hr,img,wbr"),ie=I("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Me=I("rp,rt"),mn=M(P,M(ie,I("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),M(Me,I("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),M(Me,ie)),zi=I("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Uc=M(zi,I("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),I("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Bc=I("script,style,template");class ol{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!mn.hasOwnProperty(u))return this.sanitizedSomething=!0,!Bc.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=a.attributes;for(let f=0;f<d.length;f++){const p=d.item(f),v=p.name,C=v.toLowerCase();if(!Uc.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let E=p.value;zi[C]&&(E=_(E)),this.buf.push(" ",v,'="',Hc(E),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();mn.hasOwnProperty(u)&&!P.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(Hc(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Op=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gh=/([^\#-~ |!])/g;function Hc(o){return o.replace(/&/g,"&amp;").replace(Op,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Gh,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mu;function _a(o){return"content"in o&&function v_(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Vn=(()=>((Vn=Vn||{})[Vn.NONE=0]="NONE",Vn[Vn.HTML=1]="HTML",Vn[Vn.STYLE=2]="STYLE",Vn[Vn.SCRIPT=3]="SCRIPT",Vn[Vn.URL=4]="URL",Vn[Vn.RESOURCE_URL=5]="RESOURCE_URL",Vn))();function Rp(o){const a=$h();return a?Mp(a.sanitize(Vn.HTML,o)||""):bo(o,"HTML")?Mp(Vs(o)):function ku(o,a){let u=null;try{Mu=Mu||function jh(o){const a=new G0(o);return function w(){try{return!!(new window.DOMParser).parseFromString(Co(""),"text/html")}catch{return!1}}()?new y_(a):a}(o);let d=a?String(a):"";u=Mu.getInertBodyElement(d);let f=5,p=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=p,p=u.innerHTML,u=Mu.getInertBodyElement(d)}while(d!==p);return Co((new ol).sanitizeChildren(_a(u)||u))}finally{if(u){const d=_a(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}(function Nc(){return void 0!==Fh?Fh:typeof document<"u"?document:void 0}(),Ie(o))}function Np(o){const a=$h();return a?a.sanitize(Vn.URL,o)||"":bo(o,"URL")?Vs(o):_(Ie(o))}function $h(){const o=Re();return o&&o[12]}const C_=new Sn("ENVIRONMENT_INITIALIZER"),z0=new Sn("INJECTOR",-1),q0=new Sn("INJECTOR_DEF_TYPES");class Z0{get(a,u=_o){if(u===_o){const d=new Error(`NullInjectorError: No provider for ${fe(a)}!`);throw d.name="NullInjectorError",d}return u}}function tS(...o){return{\u0275providers:K0(0,o)}}function K0(o,...a){const u=[],d=new Set;let f;return ps(a,p=>{const v=p;Fp(v,u,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&Y0(f,u),u}function Y0(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];ps(f,p=>{a.push(p)})}}function Fp(o,a,u,d){if(!(o=J(o)))return!1;let f=null,p=Gr(o);const v=!p&&O(o);if(p||v){if(v&&!v.standalone)return!1;f=o}else{const E=o.ngModule;if(p=Gr(E),!p)return!1;f=E}const C=d.has(f);if(v){if(C)return!1;if(d.add(f),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of E)Fp(A,a,u,d)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let A;d.add(f);try{ps(p.imports,R=>{Fp(R,a,u,d)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&Y0(A,a)}if(!C){const A=bi(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:kt},{provide:q0,useValue:f,multi:!0},{provide:C_,useValue:()=>kn(f),multi:!0})}const E=p.providers;null==E||C||ps(E,R=>{a.push(R)})}}return f!==o&&void 0!==o.providers}const Q0=_e({provide:String,useValue:_e});function Wh(o){return null!==o&&"object"==typeof o&&Q0 in o}function Us(o){return"function"==typeof o}const Vp=new Sn("Set Injector scope."),Up={},Hl={};let Bp;function Hp(){return void 0===Bp&&(Bp=new Z0),Bp}class wa{}class I_ extends wa{constructor(a,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gp(a,v=>this.processProvider(v)),this.records.set(z0,jc(void 0,this)),f.has("environment")&&this.records.set(wa,jc(void 0,this));const p=this.records.get(Vp);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(q0.multi,kt,nt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=ms(this),d=Cn(void 0);try{return a()}finally{ms(u),Cn(d)}}get(a,u=_o,d=nt.Default){this.assertNotDestroyed();const f=ms(this),p=Cn(void 0);try{if(!(d&nt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const E=function iS(o){return"function"==typeof o||"object"==typeof o&&o instanceof Sn}(a)&&Ii(a);C=E&&this.injectableDefInScope(E)?jc(zh(a),Up):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&nt.Self?Hp():this.parent).get(a,u=d&nt.Optional&&u===_o?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Ps]=v[Ps]||[]).unshift(fe(a)),f)throw v;return function X(o,a,u,d){const f=o[Ps];throw a[ei]&&f.unshift(a[ei]),o.message=function le(o,a,u,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=fe(a);if(Array.isArray(a))f=a.map(fe).join(" -> ");else if("object"==typeof a){let p=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):fe(C)))}f=`{${p.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(gs,"\n  ")}`}("\n"+o.message,f,u,d),o.ngTokenPath=f,o[Ps]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Cn(p),ms(f)}}resolveInjectorInitializers(){const a=ms(this),u=Cn(void 0);try{const d=this.get(C_.multi,kt,nt.Self);for(const f of d)f()}finally{ms(a),Cn(u)}}toString(){const a=[],u=this.records;for(const d of u.keys())a.push(fe(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(a){let u=Us(a=J(a))?a:J(a&&a.provide);const d=function b_(o){return Wh(o)?jc(void 0,o.useValue):jc(jp(o),Up)}(a);if(Us(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=jc(void 0,Up,!0),f.factory=()=>S(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,d)}hydrate(a,u){return u.value===Up&&(u.value=Hl,u.value=u.factory()),"object"==typeof u.value&&u.value&&function nS(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=J(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function zh(o){const a=Ii(o),u=null!==a?a.factory:bi(o);if(null!==u)return u;if(o instanceof Sn)throw new De(204,!1);if(o instanceof Function)return function X0(o){const a=o.length;if(a>0)throw po(a,"?"),new De(204,!1);const u=function Pn(o){const a=o&&(o[Hi]||o[Dr]);if(a){const u=function jr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new De(204,!1)}function jp(o,a,u){let d;if(Us(o)){const f=J(o);return bi(f)||zh(f)}if(Wh(o))d=()=>J(o.useValue);else if(function va(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...S(o.deps||[]));else if(function Lp(o){return!(!o||!o.useExisting)}(o))d=()=>kn(J(o.useExisting));else{const f=J(o&&(o.useClass||o.provide));if(!function qh(o){return!!o.deps}(o))return bi(f)||zh(f);d=()=>new f(...S(o.deps))}return d}function jc(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function E_(o){return!!o.\u0275providers}function Gp(o,a){for(const u of o)Array.isArray(u)?Gp(u,a):E_(u)?Gp(u.\u0275providers,a):a(u)}class T_{}class Wp{resolveComponentFactory(a){throw function tC(o){const a=Error(`No component factory found for ${fe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Ru=(()=>{class o{}return o.NULL=new Wp,o})();function rS(){return Gc(oi(),Re())}function Gc(o,a){return new Nu(Ei(o,a))}let Nu=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=rS,o})();function iC(o){return o instanceof Nu?o.nativeElement:o}class sS{}let jR=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function GR(){const o=Re(),u=un(oi().index,o);return(si(u)?u:o)[11]}(),o})(),D_=(()=>{class o{}return o.\u0275prov=on({token:o,providedIn:"root",factory:()=>null}),o})();class rC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const sC=new rC("14.2.10"),S_={};function R_(o){return o.ngOriginalError}class Yh{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&R_(a);for(;u&&R_(u);)u=R_(u);return u||null}}const N_=new Map;let hS=0;const Qp="__ngContext__";function qi(o,a){si(a)?(o[Qp]=a[20],function pS(o){N_.set(o[20],o)}(a)):o[Qp]=a}function al(o){return o instanceof Function?o():o}var Ca=(()=>((Ca=Ca||{})[Ca.Important=1]="Important",Ca[Ca.DashCase=2]="DashCase",Ca))();function U_(o,a){return undefined(o,a)}function Zc(o){const a=o[3];return hr(a)?a[3]:a}function eg(o){return _C(o[13])}function tg(o){return _C(o[4])}function _C(o){for(;null!==o&&!hr(o);)o=o[4];return o}function Kc(o,a,u,d,f){if(null!=d){let p,v=!1;hr(d)?p=d:si(d)&&(v=!0,d=d[0]);const C=Fn(d);0===o&&null!==u?null==f?EC(a,u,C):Ia(a,u,C,f||null,!0):1===o&&null!==u?Ia(a,u,C,f||null,!0):2===o?function AS(o,a,u){const d=rg(o,a);d&&function SS(o,a,u,d){o.removeChild(a,u,d)}(o,d,a,u)}(a,C,v):3===o&&a.destroyNode(C),null!=p&&function XR(o,a,u,d,f){const p=u[7];p!==Fn(u)&&Kc(a,o,d,p,f);for(let C=10;C<u.length;C++){const E=u[C];Pu(E[1],E,o,a,d,p)}}(a,o,p,u,f)}}function ng(o,a,u){return o.createElement(a,u)}function CC(o,a){const u=o[9],d=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,$n(f,-1)),u.splice(d,1)}function G_(o,a){if(o.length<=10)return;const u=10+a,d=o[u];if(d){const f=d[17];null!==f&&f!==o&&CC(f,d),a>0&&(o[u-1][4]=d[4]);const p=_i(o,10+a);!function j_(o,a){Pu(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=p[19];null!==v&&v.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Xh(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&Pu(o,a,u,3,null,null),function QR(o){let a=o[13];if(!a)return ig(o[1],o);for(;a;){let u=null;if(si(a))u=a[13];else{const d=a[10];d&&(u=d)}if(!u){for(;a&&!a[4]&&a!==o;)si(a)&&ig(a[1],a),a=a[3];null===a&&(a=o),si(a)&&ig(a[1],a),u=a&&a[4]}a=u}}(a)}}function ig(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function W_(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=a[u[d]];if(!(f instanceof mr)){const p=u[d+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=f[p[v]],E=p[v+1];try{E.call(C)}finally{}}else try{p.call(f)}finally{}}}}(o,a),function $_(o,a){const u=o.cleanup,d=a[7];let f=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],C="function"==typeof v?v(a):Fn(a[v]),E=d[f=u[p+2]],A=u[p+3];"boolean"==typeof A?C.removeEventListener(u[p],E,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),p+=2}else{const v=d[f=u[p+1]];u[p].call(v)}if(null!==d){for(let p=f+1;p<d.length;p++)(0,d[p])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&hr(a[3])){u!==a[3]&&CC(u,a);const d=a[19];null!==d&&d.detachView(o)}!function gS(o){N_.delete(o[20])}(a)}}function IC(o,a,u){return function bC(o,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===It.None||f===It.Emulated)return null}return Ei(d,u)}(o,a.parent,u)}function Ia(o,a,u,d,f){o.insertBefore(a,u,d,f)}function EC(o,a,u){o.appendChild(a,u)}function TC(o,a,u,d,f){null!==d?Ia(o,a,u,d,f):EC(o,a,u)}function rg(o,a){return o.parentNode(a)}function Ti(o,a,u){return z_(o,a,u)}let z_=function SC(o,a,u){return 40&o.type?Ei(o,u):null};function og(o,a,u,d){const f=IC(o,d,a),p=a[11],C=Ti(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(u))for(let E=0;E<u.length;E++)TC(p,f,u[E],C,!1);else TC(p,f,u,C,!1)}function ag(o,a){if(null!==a){const u=a.type;if(3&u)return Ei(a,o);if(4&u)return AC(-1,o[a.index]);if(8&u){const d=a.child;if(null!==d)return ag(o,d);{const f=o[a.index];return hr(f)?AC(-1,f):Fn(f)}}if(32&u)return U_(a,o)()||Fn(o[a.index]);{const d=q_(o,a);return null!==d?Array.isArray(d)?d[0]:ag(Zc(o[16]),d):ag(o,a.next)}}return null}function q_(o,a){return null!==a?o[16][6].projection[a.projection]:null}function AC(o,a){const u=10+o+1;if(u<a.length){const d=a[u],f=d[1].firstChild;if(null!==f)return ag(d,f)}return a[7]}function Z_(o,a,u,d,f,p,v){for(;null!=u;){const C=d[u.index],E=u.type;if(v&&0===a&&(C&&qi(Fn(C),d),u.flags|=4),64!=(64&u.flags))if(8&E)Z_(o,a,u.child,d,f,p,!1),Kc(a,o,f,C,p);else if(32&E){const A=U_(u,d);let R;for(;R=A();)Kc(a,o,f,R,p);Kc(a,o,f,C,p)}else 16&E?ef(o,a,d,u,f,p):Kc(a,o,f,C,p);u=v?u.projectionNext:u.next}}function Pu(o,a,u,d,f,p){Z_(u,d,o.firstChild,a,f,p,!1)}function ef(o,a,u,d,f,p){const v=u[16],E=v[6].projection[d.projection];if(Array.isArray(E))for(let A=0;A<E.length;A++)Kc(a,o,f,E[A],p);else Z_(o,a,E,v[3],f,p,!0)}function Fu(o,a,u){o.setAttribute(a,"style",u)}function tf(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function xS(o,a,u){let d=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const p=a.length;if(f+p===d||o.charCodeAt(f+p)<=32)return f}u=f+1}}const K_="ng-template";function Y_(o,a,u){let d=0;for(;d<o.length;){let f=o[d++];if(u&&"class"===f){if(f=o[d],-1!==xS(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function kC(o){return 4===o.type&&o.value!==K_}function kS(o,a,u){return a===(4!==o.type||u?o.value:K_)}function OS(o,a,u){let d=4;const f=o.attrs||[],p=function eN(o){for(let a=0;a<o.length;a++)if(Ka(o[a]))return a;return o.length}(f);let v=!1;for(let C=0;C<a.length;C++){const E=a[C];if("number"!=typeof E){if(!v)if(4&d){if(d=2|1&d,""!==E&&!kS(o,E,u)||""===E&&1===a.length){if(Hs(d))return!1;v=!0}}else{const A=8&d?E:a[++C];if(8&d&&null!==o.attrs){if(!Y_(o.attrs,A,u)){if(Hs(d))return!1;v=!0}continue}const U=RS(8&d?"class":E,f,kC(o),u);if(-1===U){if(Hs(d))return!1;v=!0;continue}if(""!==A){let K;K=U>p?"":f[U+1].toLowerCase();const se=8&d?K:null;if(se&&-1!==xS(se,A,0)||2&d&&A!==K){if(Hs(d))return!1;v=!0}}}}else{if(!v&&!Hs(d)&&!Hs(E))return!1;if(v&&Hs(E))continue;v=!1,d=E|1&d}}return Hs(d)||v}function Hs(o){return 0==(1&o)}function RS(o,a,u,d){if(null===a)return-1;let f=0;if(d||!u){let p=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=p?1:2}return-1}return function OC(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,o)}function NS(o,a,u=!1){for(let d=0;d<a.length;d++)if(OS(o,a[d],u))return!0;return!1}function PS(o,a){e:for(let u=0;u<a.length;u++){const d=a[u];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function RC(o,a){return o?":not("+a.trim()+")":a}function NC(o){let a=o[0],u=1,d=2,f="",p=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&d){const C=o[++u];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Hs(v)&&(a+=RC(p,f),f=""),d=v,p=p||!Hs(d);u++}return""!==f&&(a+=RC(p,f)),a}const Wt={};function PC(o){FC(Yt(),Re(),On()+o,!1)}function FC(o,a,u,d){if(!d)if(3==(3&a[2])){const p=o.preOrderCheckHooks;null!==p&&Jo(a,p,u)}else{const p=o.preOrderHooks;null!==p&&Xo(a,p,0,u)}ds(u)}function ug(o,a=null,u=null,d){const f=nf(o,a,u,d);return f.resolveInjectorInitializers(),f}function nf(o,a=null,u=null,d,f=new Set){const p=[u||kt,tS(o)];return d=d||("object"==typeof o?void 0:fe(o)),new I_(p,a||Hp(),d||null,f)}let Lu=(()=>{class o{static create(u,d){if(Array.isArray(u))return ug({name:""},d,u,"");{const f=u.name??"";return ug({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=_o,o.NULL=new Z0,o.\u0275prov=on({token:o,providedIn:"any",factory:()=>kn(z0)}),o.__NG_ELEMENT_ID__=-1,o})();function ll(o,a=nt.Default){const u=Re();return null===u?kn(o,a):ra(oi(),u,J(o),a)}function hg(){throw new Error("invalid")}function fg(o,a){return o<<17|a<<2}function To(o){return o>>17&32767}function ny(o){return 2|o}function ul(o){return(131068&o)>>2}function iy(o,a){return-131069&o|a<<2}function Jc(o){return 1|o}function fy(o,a){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],p=u[d+1];if(-1!==p){const v=o.data[p];pu(f),v.contentQueries(2,a[p],p)}}}function vg(o,a,u,d,f,p,v,C,E,A,R){const U=a.blueprint.slice();return U[0]=f,U[2]=76|d,(null!==R||o&&1024&o[2])&&(U[2]|=1024),Va(U),U[3]=U[15]=o,U[8]=u,U[10]=v||o&&o[10],U[11]=C||o&&o[11],U[12]=E||o&&o[12]||null,U[9]=A||o&&o[9]||null,U[6]=p,U[20]=function fS(){return hS++}(),U[21]=R,U[16]=2==a.type?o[16]:U,U}function id(o,a,u,d,f){let p=o.data[a];if(null===p)p=function py(o,a,u,d,f){const p=Zo(),v=Dl(),E=o.data[a]=function eI(o,a,u,d,f,p){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,a,d,f);return null===o.firstChild&&(o.firstChild=E),null!==p&&(v?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}(o,a,u,d,f),function _c(){return Lt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=d,p.attrs=f;const v=function Tl(){const o=Lt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return $i(p,!0),p}function rd(o,a,u,d){if(0===u)return-1;const f=a.length;for(let p=0;p<u;p++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function gy(o,a,u){Qo(a);try{const d=o.viewQuery;null!==d&&df(1,d,u);const f=o.template;null!==f&&JC(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&fy(o,a),o.staticViewQueries&&df(2,o.viewQuery,u);const p=o.components;null!==p&&function tA(o,a){for(let u=0;u<a.length;u++)Ey(o,a[u])}(a,p)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,ks()}}function wg(o,a,u,d){const f=a[2];if(128!=(128&f)){Qo(a);try{Va(a),function $a(o){return Lt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&JC(o,a,u,2,d);const v=3==(3&f);if(v){const A=o.preOrderCheckHooks;null!==A&&Jo(a,A,null)}else{const A=o.preOrderHooks;null!==A&&Xo(a,A,0,null),bc(a,0)}if(function EN(o){for(let a=eg(o);null!==a;a=tg(a)){if(!a[2])continue;const u=a[9];for(let d=0;d<u.length;d++){const f=u[d],p=f[3];0==(512&f[2])&&$n(p,1),f[2]|=512}}}(a),function bN(o){for(let a=eg(o);null!==a;a=tg(a))for(let u=10;u<a.length;u++){const d=a[u],f=d[1];Ms(d)&&wg(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&fy(o,a),v){const A=o.contentCheckHooks;null!==A&&Jo(a,A)}else{const A=o.contentHooks;null!==A&&Xo(a,A,1),bc(a,1)}!function nd(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)ds(~f);else{const p=f,v=u[++d],C=u[++d];yc(v,p),C(2,a[p])}}}finally{ds(-1)}}(o,a);const C=o.components;null!==C&&function eA(o,a){for(let u=0;u<a.length;u++)Tg(o,a[u])}(a,C);const E=o.viewQuery;if(null!==E&&df(2,E,d),v){const A=o.viewCheckHooks;null!==A&&Jo(a,A)}else{const A=o.viewHooks;null!==A&&Xo(a,A,2),bc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,$n(a[3],-1))}finally{ks()}}}function JC(o,a,u,d,f){const p=On(),v=2&d;try{ds(-1),v&&a.length>22&&FC(o,a,22,!1),u(d,f)}finally{ds(p)}}function uf(o,a,u){if(Vo(a)){const f=a.directiveEnd;for(let p=a.directiveStart;p<f;p++){const v=o.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}function Cg(o,a,u){!lo()||(function nI(o,a,u,d){const f=u.directiveStart,p=u.directiveEnd;o.firstCreatePass||fs(u,a),qi(d,a);const v=u.initialInputs;for(let C=f;C<p;C++){const E=o.data[C],A=Xi(E);A&&aA(a,u,E);const R=qr(a,o,C,u);qi(R,a),null!==v&&lA(0,C-f,R,E,0,v),A&&(un(u.index,a)[8]=R)}}(o,a,u,Ei(u,a)),128==(128&u.flags)&&function Iy(o,a,u){const d=u.directiveStart,f=u.directiveEnd,p=u.index,v=function vh(){return Lt.lFrame.currentDirectiveIndex}();try{ds(p);for(let C=d;C<f;C++){const E=o.data[C],A=a[C];Yo(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&sd(E,A)}}finally{ds(-1),Yo(v)}}(o,a,u))}function Ig(o,a,u=Ei){const d=a.localNames;if(null!==d){let f=a.index+1;for(let p=0;p<d.length;p+=2){const v=d[p+1],C=-1===v?u(a,o):o[v];o[f++]=C}}}function bg(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=my(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function my(o,a,u,d,f,p,v,C,E,A){const R=22+d,U=R+f,K=function nA(o,a){const u=[];for(let d=0;d<a;d++)u.push(d<o?null:Wt);return u}(R,U),se="function"==typeof A?A():A;return K[1]={type:o,blueprint:K,template:u,queries:null,viewQuery:C,declTNode:a,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:se,incompleteFirstPass:!1}}function _y(o,a,u,d){const f=oI(a);null===u?f.push(d):(f.push(u),o.firstCreatePass&&ld(o).push(d,f.length-1))}function yy(o,a,u){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(a,f):u[d]=[a,f]}return u}function vy(o,a){const d=a.directiveEnd,f=o.data,p=a.attrs,v=[];let C=null,E=null;for(let A=a.directiveStart;A<d;A++){const R=f[A],U=R.inputs,K=null===p||kC(a)?null:IN(U,p);v.push(K),C=yy(U,A,C),E=yy(R.outputs,A,E)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=C,a.outputs=E}function ys(o,a,u,d,f,p,v,C){const E=Ei(a,u);let R,A=a.inputs;!C&&null!=A&&(R=A[d])?(aI(o,u,R,d,f),ou(a)&&iA(u,a.index)):3&a.type&&(d=function _N(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,p.setProperty(E,d,f))}function iA(o,a){const u=un(a,o);16&u[2]||(u[2]|=32)}function wy(o,a,u,d){let f=!1;if(lo()){const p=function wN(o,a,u){const d=o.directiveRegistry;let f=null;if(d)for(let p=0;p<d.length;p++){const v=d[p];NS(u,v.selectors,!1)&&(f||(f=[]),co(fs(u,a),o,v.type),Xi(v)?(Eg(o,u),f.unshift(v)):f.push(v))}return f}(o,a,u),v=null===d?null:{"":-1};if(null!==p){f=!0,oA(u,o.data.length,p.length);for(let R=0;R<p.length;R++){const U=p[R];U.providersResolver&&U.providersResolver(U)}let C=!1,E=!1,A=rd(o,a,p.length,null);for(let R=0;R<p.length;R++){const U=p[R];u.mergedAttrs=Ya(u.mergedAttrs,U.hostAttrs),iI(o,u,a,A,U),sA(A,U,v),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const K=U.type.prototype;!C&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!E&&(K.ngOnChanges||K.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),E=!0),A++}vy(o,u)}v&&function CN(o,a,u){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const p=u[a[f+1]];if(null==p)throw new De(-301,!1);d.push(a[f],p)}}}(u,d,v)}return u.mergedAttrs=Ya(u.mergedAttrs,u.attrs),f}function Cy(o,a,u,d,f,p){const v=p.hostBindings;if(v){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const E=~a.index;(function rA(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=E&&C.push(E),C.push(d,f,v)}}function sd(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Eg(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function sA(o,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=o;Xi(a)&&(u[""]=o)}}function oA(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function iI(o,a,u,d,f){o.data[d]=f;const p=f.factory||(f.factory=bi(f.type)),v=new mr(p,Xi(f),ll);o.blueprint[d]=v,u[d]=v,Cy(o,a,0,d,rd(o,u,f.hostVars,Wt),f)}function aA(o,a,u){const d=Ei(a,o),f=bg(u),p=o[10],v=od(o,vg(o,f,null,u.onPush?32:16,d,a,p,p.createRenderer(d,u),null,null,null));o[a.index]=v}function dl(o,a,u,d,f,p){const v=Ei(o,a);!function rI(o,a,u,d,f,p,v){if(null==p)o.removeAttribute(a,f,u);else{const C=null==v?Ie(p):v(p,d||"",f);o.setAttribute(a,f,C,u)}}(a[11],v,p,o.value,u,d,f)}function lA(o,a,u,d,f,p){const v=p[a];if(null!==v){const C=d.setInput;for(let E=0;E<v.length;){const A=v[E++],R=v[E++],U=v[E++];null!==C?d.setInput(u,U,A,R):u[R]=U}}}function IN(o,a){let u=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return u}function uA(o,a,u,d){return new Array(o,!0,!1,a,null,0,d,u,null,null)}function Tg(o,a){const u=un(a,o);if(Ms(u)){const d=u[1];48&u[2]?wg(d,u,d.template,u[8]):u[5]>0&&by(u)}}function by(o){for(let d=eg(o);null!==d;d=tg(d))for(let f=10;f<d.length;f++){const p=d[f];if(Ms(p))if(512&p[2]){const v=p[1];wg(v,p,v.template,p[8])}else p[5]>0&&by(p)}const u=o[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=un(u[d],o);Ms(f)&&f[5]>0&&by(f)}}function Ey(o,a){const u=un(a,o),d=u[1];(function Ty(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(d,u),gy(d,u,u[8])}function od(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function cf(o){for(;o;){o[2]|=32;const a=Zc(o);if(au(o)&&!a)return o;o=a}return null}function ad(o,a,u,d=!0){const f=a[10];f.begin&&f.begin();try{wg(o,a,o.template,u)}catch(v){throw d&&dA(a,v),v}finally{f.end&&f.end()}}function df(o,a,u){pu(0),a(o,u)}function oI(o){return o[7]||(o[7]=[])}function ld(o){return o.cleanup||(o.cleanup=[])}function dA(o,a){const u=o[9],d=u?u.get(Yh,null):null;d&&d.handleError(a)}function aI(o,a,u,d,f){for(let p=0;p<u.length;){const v=u[p++],C=u[p++],E=a[v],A=o.data[v];null!==A.setInput?A.setInput(E,f,d,C):E[C]=f}}function js(o,a,u){const d=Ar(a,o);!function yC(o,a,u){o.setValue(a,u)}(o[11],d,u)}function vs(o,a,u){let d=u?o.styles:null,f=u?o.classes:null,p=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?p=C:1==p?f=ve(f,C):2==p&&(d=ve(d,C+": "+a[++v]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}function Dy(o,a,u,d,f=!1){for(;null!==u;){const p=a[u.index];if(null!==p&&d.push(Fn(p)),hr(p))for(let C=10;C<p.length;C++){const E=p[C],A=E[1].firstChild;null!==A&&Dy(E[1],E,A,d)}const v=u.type;if(8&v)Dy(o,a,u.child,d);else if(32&v){const C=U_(u,a);let E;for(;E=C();)d.push(E)}else if(16&v){const C=q_(a,u);if(Array.isArray(C))d.push(...C);else{const E=Zc(a[16]);Dy(E[1],E,C,d,!0)}}u=f?u.projectionNext:u.next}return d}class Sg{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return Dy(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(hr(a)){const u=a[8],d=u?u.indexOf(this):-1;d>-1&&(G_(a,d),_i(u,d))}this._attachedToViewContainer=!1}Xh(this._lView[1],this._lView)}onDestroy(a){_y(this._lView[1],this._lView,null,a)}markForCheck(){cf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ad(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wC(o,a){Pu(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=a}}class Gs extends Sg{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;ad(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Sy extends Ru{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=O(a);return new Ag(u,this.ngModule)}}function hA(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class lI{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,d){const f=this.injector.get(a,S_,d);return f!==S_||u===S_?f:this.parentInjector.get(a,u,d)}}class Ag extends T_{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function FS(o){return o.map(NC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return hA(this.componentDef.inputs)}get outputs(){return hA(this.componentDef.outputs)}create(a,u,d,f){let p=(f=f||this.ngModule)instanceof wa?f:f?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new lI(a,p):a,C=v.get(sS,null);if(null===C)throw new De(407,!1);const E=v.get(D_,null),A=C.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",U=d?function XC(o,a,u){return o.selectRootElement(a,u===It.ShadowDom)}(A,d,this.componentDef.encapsulation):ng(A,R,function Ta(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(R)),K=this.componentDef.onPush?288:272,se=my(0,null,null,1,0,null,null,null,null,null),Te=vg(null,se,null,K,null,null,C,A,E,v,null);let We,Qe;Qo(Te);try{const ft=function DN(o,a,u,d,f,p){const v=u[1];u[22]=o;const E=id(v,22,2,"#host",null),A=E.mergedAttrs=a.hostAttrs;null!==A&&(vs(E,A,!0),null!==o&&(hs(f,o,A),null!==E.classes&&tf(f,o,E.classes),null!==E.styles&&Fu(f,o,E.styles)));const R=d.createRenderer(o,a),U=vg(u,bg(a),null,a.onPush?32:16,u[22],E,d,R,p||null,null,null);return v.firstCreatePass&&(co(fs(E,u),v,a.type),Eg(v,E),oA(E,u.length,1)),od(u,U),u[22]=U}(U,this.componentDef,Te,C,A);if(U)if(d)hs(A,U,["ng-version",sC.full]);else{const{attrs:Mt,classes:Ne}=function LS(o){const a=[],u=[];let d=1,f=2;for(;d<o.length;){let p=o[d];if("string"==typeof p)2===f?""!==p&&a.push(p,o[++d]):8===f&&u.push(p);else{if(!Hs(f))break;f=p}d++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Mt&&hs(A,U,Mt),Ne&&Ne.length>0&&tf(A,U,Ne.join(" "))}if(Qe=Wo(se,22),void 0!==u){const Mt=Qe.projection=[];for(let Ne=0;Ne<this.ngContentSelectors.length;Ne++){const Xe=u[Ne];Mt.push(null!=Xe?Array.from(Xe):null)}}We=function SN(o,a,u,d){const f=u[1],p=function vN(o,a,u){const d=oi();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),iI(o,d,a,rd(o,a,1,null),u),vy(o,d));const f=qr(a,o,d.directiveStart,d);qi(f,a);const p=Ei(d,a);return p&&qi(p,a),f}(f,u,a);if(o[8]=u[8]=p,null!==d)for(const C of d)C(p,a);if(a.contentQueries){const C=oi();a.contentQueries(1,p,C.directiveStart)}const v=oi();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ds(v.index),Cy(u[1],v,0,v.directiveStart,v.directiveEnd,a),sd(a,p)),p}(ft,this.componentDef,Te,[AN]),gy(se,Te,null)}finally{ks()}return new TN(this.componentType,We,Gc(Qe,Te),Te,Qe)}}class TN extends class eC{}{constructor(a,u,d,f,p){super(),this.location=d,this._rootLView=f,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new Gs(f),this.componentType=a}setInput(a,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const p=this._rootLView;aI(p[1],p,f,a,u),iA(p,this._tNode.index)}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function AN(){const o=oi();Sl(Re()[1],o)}function xg(o){let a=function bn(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;a;){let f;if(Xi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new De(903,!1);f=a.\u0275dir}if(f){if(u){d.push(f);const v=o;v.inputs=Ay(o.inputs),v.declaredInputs=Ay(o.declaredInputs),v.outputs=Ay(o.outputs);const C=f.hostBindings;C&&xN(o,C);const E=f.viewQuery,A=f.contentQueries;if(E&&$s(o,E),A&&dI(o,A),ge(o.inputs,f.inputs),ge(o.declaredInputs,f.declaredInputs),ge(o.outputs,f.outputs),Xi(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const p=f.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(o),C===xg&&(u=!1)}}a=Object.getPrototypeOf(a)}!function cI(o){let a=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Ya(f.hostAttrs,u=Ya(u,f.hostAttrs))}}(d)}function Ay(o){return o===Mi?{}:o===kt?[]:o}function $s(o,a){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{a(d,f),u(d,f)}:a}function dI(o,a){const u=o.contentQueries;o.contentQueries=u?(d,f,p)=>{a(d,f,p),u(d,f,p)}:a}function xN(o,a){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{a(d,f),u(d,f)}:a}let xy=null;function Vu(){if(!xy){const o=Nt.Symbol;if(o&&o.iterator)xy=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const d=a[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(xy=d)}}}return xy}function ud(o){return!!My(o)&&(Array.isArray(o)||!(o instanceof Map)&&Vu()in o)}function My(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ni(o,a,u){return o[a]=u}function Ws(o,a){return o[a]}function Nn(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function dd(o,a,u,d){const f=Nn(o,a,u);return Nn(o,a+1,d)||f}function Xr(o,a,u,d,f,p){const v=dd(o,a,u,d);return dd(o,a+2,f,p)||v}function hd(o,a,u,d){const f=Re();return Nn(f,Wa(),a)&&(Yt(),dl(Rn(),f,o,a,u,d)),hd}function fd(o,a,u,d){return Nn(o,Wa(),u)?a+Ie(u)+d:Wt}function pd(o,a,u,d,f,p){const C=dd(o,function zr(){return Lt.lFrame.bindingIndex}(),u,f);return cs(2),C?a+Ie(u)+d+Ie(f)+p:Wt}function CI(o,a,u,d,f,p,v,C){const E=Re(),A=Yt(),R=o+22,U=A.firstCreatePass?function mA(o,a,u,d,f,p,v,C,E){const A=a.consts,R=id(a,o,4,v||null,gr(A,C));wy(a,u,R,gr(A,E)),Sl(a,R);const U=R.tViews=my(2,R,d,f,p,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,R),U.queries=a.queries.embeddedTView(R)),R}(R,A,E,a,u,d,f,p,v):A.data[R];$i(U,!1);const K=E[11].createComment("");og(A,E,K,U),qi(K,E),od(E,E[R]=uA(K,E,K,U)),Fa(U)&&Cg(A,E,U),null!=v&&Ig(E,U,C)}function II(o){return function Wr(o,a){return o[a]}(function Ga(){return Lt.lFrame.contextLView}(),22+o)}function ky(o,a,u){const d=Re();return Nn(d,Wa(),a)&&ys(Yt(),Rn(),d,o,a,d[11],u,!1),ky}function Mg(o,a,u,d,f){const v=f?"class":"style";aI(o,u,a.inputs[v],v,d)}function Cd(o,a,u,d){const f=Re(),p=Yt(),v=22+o,C=f[11],E=f[v]=ng(C,a,function _u(){return Lt.lFrame.currentNamespace}()),A=p.firstCreatePass?function Oy(o,a,u,d,f,p,v){const C=a.consts,A=id(a,o,2,f,gr(C,p));return wy(a,u,A,gr(C,v)),null!==A.attrs&&vs(A,A.attrs,!1),null!==A.mergedAttrs&&vs(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,p,f,0,a,u,d):p.data[v];$i(A,!0);const R=A.mergedAttrs;null!==R&&hs(C,E,R);const U=A.classes;null!==U&&tf(C,E,U);const K=A.styles;return null!==K&&Fu(C,E,K),64!=(64&A.flags)&&og(p,f,E,A),0===function Ba(){return Lt.lFrame.elementDepthCount}()&&qi(E,f),function mc(){Lt.lFrame.elementDepthCount++}(),Fa(A)&&(Cg(p,f,A),uf(p,A,f)),null!==d&&Ig(f,A),Cd}function kg(){let o=oi();Dl()?Ko():(o=o.parent,$i(o,!1));const a=o;!function Ha(){Lt.lFrame.elementDepthCount--}();const u=Yt();return u.firstCreatePass&&(Sl(u,o),Vo(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function xl(o){return 0!=(16&o.flags)}(a)&&Mg(u,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ml(o){return 0!=(32&o.flags)}(a)&&Mg(u,a,Re(),a.stylesWithoutHost,!1),kg}function bI(o,a,u,d){return Cd(o,a,u,d),kg(),bI}function Og(o,a,u){const d=Re(),f=Yt(),p=o+22,v=f.firstCreatePass?function yA(o,a,u,d,f){const p=a.consts,v=gr(p,d),C=id(a,o,8,"ng-container",v);return null!==v&&vs(C,v,!0),wy(a,u,C,gr(p,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(p,f,d,a,u):f.data[p];$i(v,!0);const C=d[p]=d[11].createComment("");return og(f,d,C,v),qi(C,d),Fa(v)&&(Cg(f,d,v),uf(f,v,d)),null!=u&&Ig(d,v),Og}function Gl(){let o=oi();const a=Yt();return Dl()?Ko():(o=o.parent,$i(o,!1)),a.firstCreatePass&&(Sl(a,o),Vo(o)&&a.queries.elementEnd(o)),Gl}function Ry(o,a,u){return Og(o,a,u),Gl(),Ry}function EI(){return Re()}function Ny(o){return!!o&&"function"==typeof o.then}function TI(o){return!!o&&"function"==typeof o.subscribe}const DI=TI;function Py(o,a,u,d){const f=Re(),p=Yt(),v=oi();return function AI(o,a,u,d,f,p,v,C){const E=Fa(d),R=o.firstCreatePass&&ld(o),U=a[8],K=oI(a);let se=!0;if(3&d.type||C){const Qe=Ei(d,a),ft=C?C(Qe):Qe,Mt=K.length,Ne=C?yt=>C(Fn(yt[d.index])):d.index;let Xe=null;if(!C&&E&&(Xe=function vA(o,a,u,d){const f=o.cleanup;if(null!=f)for(let p=0;p<f.length-1;p+=2){const v=f[p];if(v===u&&f[p+1]===d){const C=a[7],E=f[p+2];return C.length>E?C[E]:null}"string"==typeof v&&(p+=2)}return null}(o,a,f,d.index)),null!==Xe)(Xe.__ngLastListenerFn__||Xe).__ngNextListenerFn__=p,Xe.__ngLastListenerFn__=p,se=!1;else{p=MI(d,a,U,p,!1);const yt=u.listen(ft,f,p);K.push(p,yt),R&&R.push(f,Ne,Mt,Mt+1)}}else p=MI(d,a,U,p,!1);const Te=d.outputs;let We;if(se&&null!==Te&&(We=Te[f])){const Qe=We.length;if(Qe)for(let ft=0;ft<Qe;ft+=2){const vt=a[We[ft]][We[ft+1]].subscribe(p),es=K.length;K.push(p,vt),R&&R.push(f,d.index,es,-(es+1))}}}(p,f,f[11],v,o,a,0,d),Py}function xI(o,a,u,d){try{return!1!==u(d)}catch(f){return dA(o,f),!1}}function MI(o,a,u,d,f){return function p(v){if(v===Function)return d;cf(2&o.flags?un(o.index,a):a);let E=xI(a,0,d,v),A=p.__ngNextListenerFn__;for(;A;)E=xI(a,0,A,v)&&E,A=A.__ngNextListenerFn__;return f&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function kI(o=1){return function Os(o){return(Lt.lFrame.contextLView=function Cc(o,a){for(;o>0;)a=a[15],o--;return a}(o,Lt.lFrame.contextLView))[8]}(o)}function wA(o,a){let u=null;const d=function lg(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const p=a[f];if("*"!==p){if(null===d?NS(o,p,!0):PS(d,p))return f}else u=f}return u}function OI(o){const a=Re()[16][6];if(!a.projection){const d=a.projection=po(o?o.length:1,null),f=d.slice();let p=a.child;for(;null!==p;){const v=o?wA(p,o):0;null!==v&&(f[v]?f[v].projectionNext=p:d[v]=p,f[v]=p),p=p.next}}}function RI(o,a=0,u){const d=Re(),f=Yt(),p=id(f,22+o,16,null,u||null);null===p.projection&&(p.projection=a),Ko(),64!=(64&p.flags)&&function xC(o,a,u){ef(a[11],0,a,u,IC(o,u,a),Ti(u.parent||a[6],u,a))}(f,d,p)}function Fy(o,a,u){return Ly(o,"",a,"",u),Fy}function Ly(o,a,u,d,f){const p=Re(),v=fd(p,a,u,d);return v!==Wt&&ys(Yt(),Rn(),p,o,v,p[11],f,!1),Ly}function hf(o,a,u,d,f){const p=o[u+1],v=null===a;let C=d?To(p):ul(p),E=!1;for(;0!==C&&(!1===E||v);){const R=o[C+1];bA(o[C],a)&&(E=!0,o[C+1]=d?Jc(R):ny(R)),C=d?To(R):ul(R)}E&&(o[u+1]=d?ny(p):Jc(p))}function bA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Yr(o,a)>=0}const Un={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function By(o){return o.substring(Un.key,Un.keyEnd)}function wr(o){return o.substring(Un.value,Un.valueEnd)}function LI(o,a){const u=Un.textEnd;return u===a?-1:(a=Un.keyEnd=function VI(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Un.key=a,u),Uu(o,a,u))}function Hy(o,a){const u=Un.textEnd;let d=Un.key=Uu(o,a,u);return u===d?-1:(d=Un.keyEnd=function UI(o,a,u){let d;for(;a<u&&(45===(d=o.charCodeAt(a))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)a++;return a}(o,d,u),d=Gy(o,d,u),d=Un.value=Uu(o,d,u),d=Un.valueEnd=function BI(o,a,u){let d=-1,f=-1,p=-1,v=a,C=v;for(;v<u;){const E=o.charCodeAt(v++);if(59===E)return C;34===E||39===E?C=v=$y(o,E,v,u):a===v-4&&85===p&&82===f&&76===d&&40===E?C=v=$y(o,41,v,u):E>32&&(C=v),p=f,f=d,d=-33&E}return C}(o,d,u),Gy(o,d,u))}function jy(o){Un.key=0,Un.keyEnd=0,Un.value=0,Un.valueEnd=0,Un.textEnd=o.length}function Uu(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function Gy(o,a,u,d){return(a=Uu(o,a,u))<u&&a++,a}function $y(o,a,u,d){let f=-1,p=u;for(;p<d;){const v=o.charCodeAt(p++);if(v==a&&92!==f)return p;f=92==v&&92===f?0:v}throw new Error}function Rg(o,a,u){return qs(o,a,u,!1),Rg}function Ng(o,a){return qs(o,a,null,!0),Ng}function zs(o){ws(Zy,HI,o,!1)}function HI(o,a){for(let u=function PN(o){return jy(o),Hy(o,Uu(o,0,Un.textEnd))}(a);u>=0;u=Hy(a,u))Zy(o,By(a),wr(a))}function jI(o){ws(dt,Do,o,!0)}function Do(o,a){for(let u=function Wl(o){return jy(o),LI(o,Uu(o,0,Un.textEnd))}(a);u>=0;u=LI(a,u))dt(o,By(a),!0)}function qs(o,a,u,d){const f=Re(),p=Yt(),v=cs(2);p.firstUpdatePass&&Pg(p,o,v,d),a!==Wt&&Nn(f,v,a)&&fl(p,p.data[On()],f,f[11],o,f[v+1]=function FN(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=fe(Vs(o)))),o}(a,u),d,v)}function ws(o,a,u,d){const f=Yt(),p=cs(2);f.firstUpdatePass&&Pg(f,null,p,d);const v=Re();if(u!==Wt&&Nn(v,p,u)){const C=f.data[On()];if(Qy(C,d)&&!zy(f,p)){let E=d?C.classesWithoutHost:C.stylesWithoutHost;null!==E&&(u=ve(E,u||"")),Mg(f,C,v,u,d)}else!function Rr(o,a,u,d,f,p,v,C){f===Wt&&(f=kt);let E=0,A=0,R=0<f.length?f[0]:null,U=0<p.length?p[0]:null;for(;null!==R||null!==U;){const K=E<f.length?f[E+1]:void 0,se=A<p.length?p[A+1]:void 0;let We,Te=null;R===U?(E+=2,A+=2,K!==se&&(Te=U,We=se)):null===U||null!==R&&R<U?(E+=2,Te=R):(A+=2,Te=U,We=se),null!==Te&&fl(o,a,u,d,Te,We,v,C),R=E<f.length?f[E]:null,U=A<p.length?p[A]:null}}(f,C,v,v[11],v[p+1],v[p+1]=function zI(o,a,u){if(null==u||""===u)return kt;const d=[],f=Vs(u);if(Array.isArray(f))for(let p=0;p<f.length;p++)o(d,f[p],!0);else if("object"==typeof f)for(const p in f)f.hasOwnProperty(p)&&o(d,p,f[p]);else"string"==typeof f&&a(d,f);return d}(o,a,u),d,p)}}function zy(o,a){return a>=o.expandoStartIndex}function Pg(o,a,u,d){const f=o.data;if(null===f[u+1]){const p=f[On()],v=zy(o,u);Qy(p,d)&&null===a&&!v&&(a=!1),a=function GI(o,a,u,d){const f=function fu(o){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let p=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(u=Ed(u=bd(null,o,a,u,d),a.attrs,d),p=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(u=bd(f,o,a,u,d),null===p){let E=function $I(o,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==ul(d))return o[To(d)]}(o,a,d);void 0!==E&&Array.isArray(E)&&(E=bd(null,o,a,E[1],d),E=Ed(E,a.attrs,d),function WI(o,a,u,d){o[To(u?a.classBindings:a.styleBindings)]=d}(o,a,d,E))}else p=function qy(o,a,u){let d;const f=a.directiveEnd;for(let p=1+a.directiveStylingLast;p<f;p++)d=Ed(d,o[p].hostAttrs,u);return Ed(d,a.attrs,u)}(o,a,d)}return void 0!==p&&(d?a.residualClasses=p:a.residualStyles=p),u}(f,p,a,d),function CA(o,a,u,d,f,p){let v=p?a.classBindings:a.styleBindings,C=To(v),E=ul(v);o[d]=u;let R,A=!1;if(Array.isArray(u)){const U=u;R=U[1],(null===R||Yr(U,R)>0)&&(A=!0)}else R=u;if(f)if(0!==E){const K=To(o[C+1]);o[d+1]=fg(K,C),0!==K&&(o[K+1]=iy(o[K+1],d)),o[C+1]=function zS(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=fg(C,0),0!==C&&(o[C+1]=iy(o[C+1],d)),C=d;else o[d+1]=fg(E,0),0===C?C=d:o[E+1]=iy(o[E+1],d),E=d;A&&(o[d+1]=ny(o[d+1])),hf(o,R,d,!0),hf(o,R,d,!1),function IA(o,a,u,d,f){const p=f?o.residualClasses:o.residualStyles;null!=p&&"string"==typeof a&&Yr(p,a)>=0&&(u[d+1]=Jc(u[d+1]))}(a,R,o,d,p),v=fg(C,E),p?a.classBindings=v:a.styleBindings=v}(f,p,a,u,v,d)}}function bd(o,a,u,d,f){let p=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(p=a[C],d=Ed(d,p.hostAttrs,f),p!==o);)C++;return null!==o&&(u.directiveStylingLast=C),d}function Ed(o,a,u){const d=u?1:2;let f=-1;if(null!==a)for(let p=0;p<a.length;p++){const v=a[p];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),dt(o,v,!!u||a[++p]))}return void 0===o?null:o}function Zy(o,a,u){dt(o,a,Vs(u))}function fl(o,a,u,d,f,p,v,C){if(!(3&a.type))return;const E=o.data,A=E[C+1];Yy(function yr(o){return 1==(1&o)}(A)?Ky(E,a,u,f,ul(A),v):void 0)||(Yy(p)||function ty(o){return 2==(2&o)}(A)&&(p=Ky(E,null,u,f,C,v)),function MC(o,a,u,d,f){if(a)f?o.addClass(u,d):o.removeClass(u,d);else{let p=-1===d.indexOf("-")?void 0:Ca.DashCase;null==f?o.removeStyle(u,d,p):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),p|=Ca.Important),o.setStyle(u,d,f,p))}}(d,v,Ar(On(),u),f,p))}function Ky(o,a,u,d,f,p){const v=null===a;let C;for(;f>0;){const E=o[f],A=Array.isArray(E),R=A?E[1]:E,U=null===R;let K=u[f+1];K===Wt&&(K=U?kt:void 0);let se=U?tl(K,d):R===d?K:void 0;if(A&&!Yy(se)&&(se=tl(E,d)),Yy(se)&&(C=se,v))return C;const Te=o[f+1];f=v?To(Te):ul(Te)}if(null!==a){let E=p?a.residualClasses:a.residualStyles;null!=E&&(C=tl(E,d))}return C}function Yy(o){return void 0!==o}function Qy(o,a){return 0!=(o.flags&(a?16:32))}function qI(o,a=""){const u=Re(),d=Yt(),f=o+22,p=d.firstCreatePass?id(d,f,1,a,null):d.data[f],v=u[f]=function H_(o,a){return o.createText(a)}(u[11],a);og(d,u,v,p),$i(p,!1)}function ff(o){return Bu("",o,""),ff}function Bu(o,a,u){const d=Re(),f=fd(d,o,a,u);return f!==Wt&&js(d,On(),f),Bu}function Jy(o,a,u,d,f){const p=Re(),v=pd(p,o,a,u,d,f);return v!==Wt&&js(p,On(),v),Jy}function Hu(o,a,u,d,f){zs(pd(Re(),o,a,u,d,f))}const ju=void 0;var Bg=["en",[["a","p"],["AM","PM"],ju],[["AM","PM"],ju,ju],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ju,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ju,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ju,"{1} 'at' {0}",ju],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rv(o){const u=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Dd={};function Hg(o){const a=function tb(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=eb(a);if(u)return u;const d=a.split("-")[0];if(u=eb(d),u)return u;if("en"===d)return Bg;throw new De(701,!1)}function sv(o){return Hg(o)[Rt.PluralCase]}function eb(o){return o in Dd||(Dd[o]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[o]),Dd[o]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const Sd="en-US";let xd=Sd;function yv(o,a,u,d,f){if(o=J(o),Array.isArray(o))for(let p=0;p<o.length;p++)yv(o[p],a,u,d,f);else{const p=Yt(),v=Re();let C=Us(o)?o:J(o.provide),E=jp(o);const A=oi(),R=1048575&A.providerIndexes,U=A.directiveStart,K=A.providerIndexes>>20;if(Us(o)||!o.multi){const se=new mr(E,f,ll),Te=wv(C,a,f?R:R+K,U);-1===Te?(co(fs(A,v),p,C),vv(p,o,a.length),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(se),v.push(se)):(u[Te]=se,v[Te]=se)}else{const se=wv(C,a,R+K,U),Te=wv(C,a,R,R+K),We=se>=0&&u[se],Qe=Te>=0&&u[Te];if(f&&!Qe||!f&&!We){co(fs(A,v),p,C);const ft=function nx(o,a,u,d,f){const p=new mr(o,u,ll);return p.multi=[],p.index=a,p.componentProviders=0,Sb(p,f,d&&!u),p}(f?tx:ex,u.length,f,d,E);!f&&Qe&&(u[Te].providerFactory=ft),vv(p,o,a.length,0),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(ft),v.push(ft)}else vv(p,o,se>-1?se:Te,Sb(u[f?Te:se],E,!f&&d));!f&&d&&Qe&&u[Te].componentProviders++}}}function vv(o,a,u,d){const f=Us(a),p=function J0(o){return!!o.useClass}(a);if(f||p){const E=(p?J(a.useClass):a).prototype.ngOnDestroy;if(E){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=A.indexOf(u);-1===R?A.push(u,[d,E]):A[R+1].push(d,E)}else A.push(u,E)}}}function Sb(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function wv(o,a,u,d){for(let f=u;f<d;f++)if(a[f]===o)return f;return-1}function ex(o,a,u,d){return Cv(this.multi,[])}function tx(o,a,u,d){const f=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=qr(u,u[1],this.providerFactory.index,d);p=C.slice(0,v),Cv(f,p);for(let E=v;E<C.length;E++)p.push(C[E])}else p=[],Cv(f,p);return p}function Cv(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Ab(o,a=[]){return u=>{u.providersResolver=(d,f)=>function rP(o,a,u){const d=Yt();if(d.firstCreatePass){const f=Xi(o);yv(u,d.data,d.blueprint,f,!0),yv(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Od{}class xb{}function ix(o,a){return new Mb(o,a??null)}class Mb extends Od{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Sy(this);const d=ut(a);this._bootstrapComponents=al(d.bootstrap),this._r3Injector=nf(a,u,[{provide:Od,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver}],fe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Iv extends xb{constructor(a){super(),this.moduleType=a}create(a){return new Mb(this.moduleType,a)}}class sx extends Od{constructor(a,u,d){super(),this.componentFactoryResolver=new Sy(this),this.instance=null;const f=new I_([...a,{provide:Od,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver}],u||Hp(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function bv(o,a,u=null){return new sx(o,a,u).injector}let ox=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=K0(0,u.type),f=d.length>0?bv([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=on({token:o,providedIn:"environment",factory:()=>new o(kn(wa))}),o})();function kb(o){o.getStandaloneInjector=a=>a.get(ox).getOrCreateStandaloneInjector(o)}function Vb(o,a,u){const d=ai()+o,f=Re();return f[d]===Wt?Ni(f,d,u?a.call(u):a()):Ws(f,d)}function Ub(o,a,u,d){return function $b(o,a,u,d,f,p){const v=a+u;return Nn(o,v,f)?Ni(o,v+1,p?d.call(p,f):d(f)):bf(o,v+1)}(Re(),ai(),o,a,u,d)}function Ev(o,a,u,d,f){return function Wb(o,a,u,d,f,p,v){const C=a+u;return dd(o,C,f,p)?Ni(o,C+2,v?d.call(v,f,p):d(f,p)):bf(o,C+2)}(Re(),ai(),o,a,u,d,f)}function Bb(o,a,u,d,f,p){return function zb(o,a,u,d,f,p,v,C){const E=a+u;return function be(o,a,u,d,f){const p=dd(o,a,u,d);return Nn(o,a+2,f)||p}(o,E,f,p,v)?Ni(o,E+3,C?d.call(C,f,p,v):d(f,p,v)):bf(o,E+3)}(Re(),ai(),o,a,u,d,f,p)}function Hb(o,a,u,d,f,p,v){return function Dv(o,a,u,d,f,p,v,C,E){const A=a+u;return Xr(o,A,f,p,v,C)?Ni(o,A+4,E?d.call(E,f,p,v,C):d(f,p,v,C)):bf(o,A+4)}(Re(),ai(),o,a,u,d,f,p,v)}function jb(o,a,u,d,f,p,v,C){const E=ai()+o,A=Re(),R=Xr(A,E,u,d,f,p);return Nn(A,E+4,v)||R?Ni(A,E+5,C?a.call(C,u,d,f,p,v):a(u,d,f,p,v)):Ws(A,E+5)}function Tv(o,a,u,d,f,p,v,C,E){const A=ai()+o,R=Re(),U=Xr(R,A,u,d,f,p);return dd(R,A+4,v,C)||U?Ni(R,A+6,E?a.call(E,u,d,f,p,v,C):a(u,d,f,p,v,C)):Ws(R,A+6)}function Gb(o,a,u,d){return function qb(o,a,u,d,f,p){let v=a+u,C=!1;for(let E=0;E<f.length;E++)Nn(o,v++,f[E])&&(C=!0);return C?Ni(o,v,d.apply(p,f)):bf(o,v)}(Re(),ai(),o,a,u,d)}function bf(o,a){const u=o[a];return u===Wt?void 0:u}function Sv(o){return a=>{setTimeout(o,void 0,a)}}const Da=class bx extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){let f=a,p=u||(()=>null),v=d;if(a&&"object"==typeof a){const E=a;f=E.next?.bind(E),p=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(p=Sv(p),f&&(f=Sv(f)),v&&(v=Sv(v)));const C=super.subscribe({next:f,error:p,complete:v});return a instanceof $.w0&&a.add(C),C}};function Ex(){return this._results[Vu()]()}class Av{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Vu(),d=Av.prototype;d[u]||(d[u]=Ex)}get changes(){return this._changes||(this._changes=new Da)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const f=An(a);(this._changesDetected=!function Wi(o,a,u){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],p=a[d];if(u&&(f=u(f),p=u(p)),p!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Tf=(()=>{class o{}return o.__NG_ELEMENT_ID__=Sx,o})();const Tx=Tf,Dx=class extends Tx{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a,u){const d=this._declarationTContainer.tViews,f=vg(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(d)),gy(d,f,a),new Sg(f)}};function Sx(){return Yg(oi(),Re())}function Yg(o,a){return 4&o.type?new Dx(a,o,Gc(o,a)):null}let Qg=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ax,o})();function Ax(){return Qb(oi(),Re())}const xx=Qg,Yb=class extends xx{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return Gc(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ja(this._hostTNode,this._hostLView);if(Eh(a)){const u=Rs(a,this._hostLView),d=li(a);return new oa(u[1].data[d+8],u)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=xv(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,d){let f,p;"number"==typeof d?f=d:null!=d&&(f=d.index,p=d.injector);const v=a.createEmbeddedView(u||{},p);return this.insert(v,f),v}createComponent(a,u,d,f,p){const v=a&&!function Kr(o){return"function"==typeof o}(a);let C;if(v)C=u;else{const U=u||{};C=U.index,d=U.injector,f=U.projectableNodes,p=U.environmentInjector||U.ngModuleRef}const E=v?a:new Ag(O(a)),A=d||this.parentInjector;if(!p&&null==E.ngModule){const K=(v?A:this.parentInjector).get(wa,null);K&&(p=K)}const R=E.create(A,f,void 0,p);return this.insert(R.hostView,C),R}insert(a,u){const d=a._lView,f=d[1];if(function du(o){return hr(o[3])}(d)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const U=d[3],K=new Yb(U,U[6],U[3]);K.detach(K.indexOf(a))}}const p=this._adjustIndex(u),v=this._lContainer;!function TS(o,a,u,d){const f=10+d,p=u.length;d>0&&(u[f-1][4]=a),d<p-10?(a[4]=u[f],fo(u,10+d,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function DS(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,d,v,p);const C=AC(p,v),E=d[11],A=rg(E,v[7]);return null!==A&&function vC(o,a,u,d,f,p){d[0]=f,d[6]=a,Pu(o,d,u,1,f,p)}(f,v[6],E,d,A,C),a.attachToViewContainerRef(),fo(Jg(v),p,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=xv(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=G_(this._lContainer,u);d&&(_i(Jg(this._lContainer),u),Xh(d[1],d))}detach(a){const u=this._adjustIndex(a,-1),d=G_(this._lContainer,u);return d&&null!=_i(Jg(this._lContainer),u)?new Sg(d):null}_adjustIndex(a,u=0){return a??this.length+u}};function xv(o){return o[8]}function Jg(o){return o[8]||(o[8]=[])}function Qb(o,a){let u;const d=a[o.index];if(hr(d))u=d;else{let f;if(8&o.type)f=Fn(d);else{const p=a[11];f=p.createComment("");const v=Ei(o,a);Ia(p,rg(p,v),f,function DC(o,a){return o.nextSibling(a)}(p,v),!1)}a[o.index]=u=uA(d,a,f,o),od(a,u)}return new Yb(u,o,a)}class Mv{constructor(a){this.queryList=a,this.matches=null}clone(){return new Mv(this.queryList)}setDirty(){this.queryList.setDirty()}}class kv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let p=0;p<d;p++){const v=u.getByIndex(p);f.push(this.queries[v.indexInDeclarationView].clone())}return new kv(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==lE(a,u).matches&&this.queries[u].setDirty()}}class Xb{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class Ov{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,p=this.getByIndex(d).embeddedTView(a,f);p&&(p.indexInDeclarationView=d,null!==u?u.push(p):u=[p])}return null!==u?new Ov(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Rv{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Rv(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const p=d[f];this.matchTNodeWithReadOption(a,u,Ox(u,p)),this.matchTNodeWithReadOption(a,u,el(u,a,p,!1,!1))}else d===Tf?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,el(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Nu||f===Qg||f===Tf&&4&u.type)this.addMatch(u.index,-2);else{const p=el(u,a,f,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Ox(o,a){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function Nx(o,a,u,d){return-1===u?function Rx(o,a){return 11&o.type?Gc(o,a):4&o.type?Yg(o,a):null}(a,o):-2===u?function eE(o,a,u){return u===Nu?Gc(a,o):u===Tf?Yg(a,o):u===Qg?Qb(a,o):void 0}(o,a,d):qr(o,o[1],u,a)}function tE(o,a,u,d){const f=a[19].queries[d];if(null===f.matches){const p=o.data,v=u.matches,C=[];for(let E=0;E<v.length;E+=2){const A=v[E];C.push(A<0?null:Nx(a,p[A],v[E+1],u.metadata.read))}f.matches=C}return f.matches}function Nv(o,a,u,d){const f=o.queries.getByIndex(u),p=f.matches;if(null!==p){const v=tE(o,a,f,u);for(let C=0;C<p.length;C+=2){const E=p[C];if(E>0)d.push(v[C/2]);else{const A=p[C+1],R=a[-E];for(let U=10;U<R.length;U++){const K=R[U];K[17]===K[3]&&Nv(K[1],K,A,d)}if(null!==R[9]){const U=R[9];for(let K=0;K<U.length;K++){const se=U[K];Nv(se[1],se,A,d)}}}}}return d}function nE(o){const a=Re(),u=Yt(),d=za();pu(d+1);const f=lE(u,d);if(o.dirty&&function cu(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const p=f.crossesNgTemplate?Nv(u,a,d,[]):tE(u,a,f,d);o.reset(p,iC),o.notifyOnChanges()}return!0}return!1}function iE(o,a,u){const d=Yt();d.firstCreatePass&&(aE(d,new Xb(o,a,u),-1),2==(2&a)&&(d.staticViewQueries=!0)),oE(d,Re(),a)}function rE(o,a,u,d){const f=Yt();if(f.firstCreatePass){const p=oi();aE(f,new Xb(a,u,d),p.index),function Fx(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}oE(f,Re(),u)}function sE(){return function Px(o,a){return o[19].queries[a].queryList}(Re(),za())}function oE(o,a,u){const d=new Av(4==(4&u));_y(o,a,d,d.destroy),null===a[19]&&(a[19]=new kv),a[19].queries.push(new Mv(d))}function aE(o,a,u){null===o.queries&&(o.queries=new Ov),o.queries.track(new Rv(a,u))}function lE(o,a){return o.queries.getByIndex(a)}function uE(o,a){return Yg(o,a)}function tm(...o){}const DE=new Sn("Application Initializer");let nm=(()=>{class o{constructor(u){this.appInits=u,this.resolve=tm,this.reject=tm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const p=this.appInits[f]();if(Ny(p))u.push(p);else if(DI(p)){const v=new Promise((C,E)=>{p.subscribe({complete:C,error:E})});u.push(v)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(kn(DE,8))},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const SE=new Sn("AppId",{providedIn:"root",factory:function AE(){return`${Bv()}${Bv()}${Bv()}`}});function Bv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xE=new Sn("Platform Initializer"),iM=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ME=new Sn("appBootstrapListener");let rM=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const im=new Sn("LocaleId",{providedIn:"root",factory:()=>T(im,nt.Optional|nt.SkipSelf)||function sM(){return typeof $localize<"u"&&$localize.locale||Sd}()}),oM=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class lM{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let uM=(()=>{class o{compileModuleSync(u){return new Iv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),p=al(ut(u).declarations).reduce((v,C)=>{const E=O(C);return E&&v.push(new Ag(E)),v},[]);return new lM(d,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const NE=(()=>Promise.resolve(0))();function PE(o){typeof Zone>"u"?NE.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ao{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function hM(){let o=Nt.requestAnimationFrame,a=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function xP(o){const a=()=>{!function AP(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Nt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,jv(o),o.isCheckStableRunning=!0,Hv(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),jv(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,p,v,C)=>{try{return FE(o),u.invokeTask(f,p,v,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||o.shouldCoalesceRunChangeDetection)&&a(),LE(o)}},onInvoke:(u,d,f,p,v,C,E)=>{try{return FE(o),u.invoke(f,p,v,C,E)}finally{o.shouldCoalesceRunChangeDetection&&a(),LE(o)}},onHasTask:(u,d,f,p)=>{u.hasTask(f,p),d===f&&("microTask"==p.change?(o._hasPendingMicrotasks=p.microTask,jv(o),Hv(o)):"macroTask"==p.change&&(o.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,d,f,p)=>(u.handleError(f,p),o.runOutsideAngular(()=>o.onError.emit(p)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ao.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Ao.isInAngularZone())throw new De(909,!1)}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,f){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+f,a,SP,tm,tm);try{return p.runTask(v,u,d)}finally{p.cancelTask(v)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const SP={};function Hv(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function jv(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function FE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function LE(o){o._nesting--,Hv(o)}class VE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,f){return a.apply(u,d)}}const rm=new Sn(""),Gv=new Sn("");let $v,fM=(()=>{class o{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$v||(function pM(o){$v=o}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ao.assertNotInAngularZone(),PE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())PE(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(kn(Ao),kn(UE),kn(Gv))},o.\u0275prov=on({token:o,factory:o.\u0275fac}),o})(),UE=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return $v?.findTestabilityInTree(this,u,d)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Wu=null;const sm=new Sn("AllowMultipleToken"),om=new Sn("PlatformDestroyListeners");class _M{constructor(a,u){this.name=a,this.token=u}}function zv(o,a,u=[]){const d=`Platform: ${a}`,f=new Sn(d);return(p=[])=>{let v=lm();if(!v||v.injector.get(sm,!1)){const C=[...u,...p,{provide:f,useValue:!0}];o?o(C):function BE(o){if(Wu&&!Wu.get(sm,!1))throw new De(400,!1);Wu=o;const a=o.get(qv);(function am(o){const a=o.get(xE,null);a&&a.forEach(u=>u())})(o)}(function Pd(o=[],a){return Lu.create({name:a,providers:[{provide:Vp,useValue:"platform"},{provide:om,useValue:new Set([()=>Wu=null])},...o]})}(C,d))}return function HE(o){const a=lm();if(!a)throw new De(401,!1);return a}()}}function lm(){return Wu?.get(qv)??null}let qv=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function Ld(o,a){let u;return u="noop"===o?new VE:("zone.js"===o?void 0:o)||new Ao(a),u}(d?.ngZone,function Pi(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),p=[{provide:Ao,useValue:f}];return f.run(()=>{const v=Lu.create({providers:p,parent:this.injector,name:u.moduleType.name}),C=u.create(v),E=C.injector.get(Yh,null);if(!E)throw new De(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:R=>{E.handleError(R)}});C.onDestroy(()=>{cm(this._modules,C),A.unsubscribe()})}),function um(o,a,u){try{const d=u();return Ny(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(E,f,()=>{const A=C.injector.get(nm);return A.runInitializers(),A.donePromise.then(()=>(function Gg(o){$t(o,"Expected localeId to be defined"),"string"==typeof o&&(xd=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(im,Sd)||Sd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,d=[]){const f=xo({},d);return function Wv(o,a,u){const d=new Iv(u);return Promise.resolve(d)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,f))}_moduleDoBootstrap(u){const d=u.injector.get(Fi);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new De(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(om,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(kn(Lu))},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function xo(o,a){return Array.isArray(a)?a.reduce(xo,o):{...o,...a}}let Fi=(()=>{class o{constructor(u,d,f){this._zone=u,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new N.y(C=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ao.assertNotInAngularZone(),PE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Ao.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{E.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(p,v.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const f=u instanceof T_;if(!this._injector.get(nm).done)throw!f&&Fe(u),new De(405,false);let v;v=f?u:this._injector.get(Ru).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const C=function mM(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Od),A=v.create(Lu.NULL,[],d||v.selector,C),R=A.location.nativeElement,U=A.injector.get(rm,null);return U?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),cm(this.components,A),U?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;cm(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ME,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>cm(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new De(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(kn(Ao),kn(wa),kn(Yh))},o.\u0275prov=on({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function cm(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let Aa=!0,Mo=!1;function qu(){return Mo=!0,Aa}function vM(){if(Mo)throw new Error("Cannot enable prod mode after platform setup.");Aa=!1}let Ki=(()=>{class o{}return o.__NG_ELEMENT_ID__=GE,o})();function GE(o){return function wM(o,a,u){if(ou(o)&&!u){const d=un(o.index,a);return new Sg(d,d)}return 47&o.type?new Sg(a[16],a):null}(oi(),Re(),16==(16&o))}class Kv{constructor(){}supports(a){return ud(a)}create(a){return new DM(a)}}const Yv=(o,a)=>a;class DM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Yv}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,f=0,p=null;for(;u||d;){const v=!d||u&&u.currentIndex<_m(d,f,p)?u:d,C=_m(v,f,p),E=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{p||(p=[]);const A=C-f,R=E-f;if(A!=R){for(let K=0;K<A;K++){const se=K<p.length?p[K]:p[K]=0,Te=se+K;R<=Te&&Te<A&&(p[K]=se+1)}p[v.previousIndex]=R-A}}C!==E&&a(v,C,E)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!ud(a))throw new De(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,p,v,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)p=a[C],v=this._trackByFn(C,p),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,p,v,C)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,C),d=!0),u=u._next}else f=0,function cd(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Vu()]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,C=>{v=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,v)?(d&&(u=this._verifyReinsertion(u,C,v,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,f){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,p,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,p,f)):a=this._addAfter(new ZE(u,d),p,f),a}_verifyReinsertion(a,u,d,f){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?a=this._reinsertAfter(p,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,p=a._nextRemoved;return null===f?this._removalsHead=p:f._nextRemoved=p,null===p?this._removalsTail=f:p._prevRemoved=f,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new mm),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mm),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ZE{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SM{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class mm{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new SM,this.map.set(u,d)),d.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _m(o,a,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+a+f}class ym{constructor(){}supports(a){return a instanceof Map||My(a)}create(){return new AM}}class AM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||My(a)))throw new De(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const p=f._prev,v=f._next;return p&&(p._next=v),v&&(v._prev=p),f._next=null,f._prev=null,f}const d=new xM(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class xM{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qv(){return new Jv([new Kv])}let Jv=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||Qv()),deps:[[o,new Ot,new Be]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new De(901,!1)}}return o.\u0275prov=on({token:o,providedIn:"root",factory:Qv}),o})();function KE(){return new vm([new ym])}let vm=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||KE()),deps:[[o,new Ot,new Be]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new De(901,!1)}}return o.\u0275prov=on({token:o,providedIn:"root",factory:KE}),o})();const MM=zv(null,"core",[]);let kM=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(kn(Fi))},o.\u0275mod=rn({type:o}),o.\u0275inj=Gt({}),o})();function OM(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(_t,ke,V)=>{V.d(ke,{Z:()=>De});var l=V(2090),$=V(4859),N=V(9681),ae=V(1877);class ce{constructor(Ie,me){this._delegate=Ie,this.firebase=me,(0,N._addComponent)(Ie,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ie,me=N._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(Ie);return!tt.isInitialized()&&"EXPLICIT"===(null===(it=tt.getComponent())||void 0===it?void 0:it.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:me})}_removeServiceInstance(Ie,me=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(me)}_addComponent(Ie){(0,N._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,N._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ve(){const at=function fe(at){const Ie={},me={__esModule:!0,initializeApp:function Le(oe,de={}){const we=N.initializeApp(oe,de);if((0,l.r3)(Ie,we.name))return Ie[we.name];const Q=new at(we,me);return Ie[we.name]=Q,Q},app:tt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ee(oe){const de=oe.name,we=de.replace("-compat","");if(N._registerComponent(oe)&&"PUBLIC"===oe.type){const Q=(ee=tt())=>{if("function"!=typeof ee[we])throw ge.create("invalid-app-argument",{appName:de});return ee[we]()};void 0!==oe.serviceProps&&(0,l.ZB)(Q,oe.serviceProps),me[we]=Q,at.prototype[we]=function(...ee){return this._getService.bind(this,de).apply(this,oe.multipleInstances?ee:[])}}return"PUBLIC"===oe.type?me[we]:null},removeApp:function it(oe){delete Ie[oe]},useAsService:function Ze(oe,de){return"serverAuth"===de?null:de},modularAPIs:N}};function tt(oe){if(!(0,l.r3)(Ie,oe=oe||N._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:oe});return Ie[oe]}return me.default=me,Object.defineProperty(me,"apps",{get:function Oe(){return Object.keys(Ie).map(oe=>Ie[oe])}}),tt.App=at,me}(ce);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ie(me){(0,l.ZB)(at,me)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),at}(),z=new ae.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=Z;!function Pe(at){(0,N.registerVersion)("@firebase/app-compat","0.1.39",at)}()},9681:(_t,ke,V)=>{V.r(ke),V.d(ke,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>sn,_addOrOverwriteComponent:()=>on,_apps:()=>fn,_clearComponents:()=>Hr,_components:()=>En,_getProvider:()=>Gt,_registerComponent:()=>Zt,_removeServiceInstance:()=>Ii,deleteApp:()=>$r,getApp:()=>Gn,getApps:()=>Dr,initializeApp:()=>Hi,onLog:()=>Yn,registerVersion:()=>ri,setLogLevel:()=>Cn});var l=V(5861),$=V(4859),N=V(1877),ae=V(2090),ce=V(8766);class _e{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function ge(st){return"VERSION"===st.getComponent()?.type}(ot)){const Dt=ot.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(ot=>ot).join(" ")}}const fe="@firebase/app",Z=new N.Yd("@firebase/app"),$t="[DEFAULT]",Ye={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fn=new Map,En=new Map;function sn(st,Se){try{st.container.addComponent(Se)}catch(ot){Z.debug(`Component ${Se.name} failed to register with FirebaseApp ${st.name}`,ot)}}function on(st,Se){st.container.addOrOverwriteComponent(Se)}function Zt(st){const Se=st.name;if(En.has(Se))return Z.debug(`There were multiple attempts to register component ${Se}.`),!1;En.set(Se,st);for(const ot of fn.values())sn(ot,st);return!0}function Gt(st,Se){const ot=st.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),st.container.getProvider(Se)}function Ii(st,Se,ot=$t){Gt(st,Se).clearInstance(ot)}function Hr(){En.clear()}const Pn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class jr{constructor(Se,ot,Dt){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}const Gr="9.14.0";function Hi(st,Se={}){let ot=st;"object"!=typeof Se&&(Se={name:Se});const Dt=Object.assign({name:$t,automaticDataCollectionEnabled:!1},Se),At=Dt.name;if("string"!=typeof At||!At)throw Pn.create("bad-app-name",{appName:String(At)});if(ot||(ot=(0,ae.aH)()),!ot)throw Pn.create("no-options");const rn=fn.get(At);if(rn){if((0,ae.vZ)(ot,rn.options)&&(0,ae.vZ)(Dt,rn.config))return rn;throw Pn.create("duplicate-app",{appName:At})}const q=new $.H0(At);for(const Y of En.values())q.addComponent(Y);const W=new jr(ot,Dt,q);return fn.set(At,W),W}function Gn(st=$t){const Se=fn.get(st);if(!Se&&st===$t)return Hi();if(!Se)throw Pn.create("no-app",{appName:st});return Se}function Dr(){return Array.from(fn.values())}function $r(st){return nt.apply(this,arguments)}function nt(){return(nt=(0,l.Z)(function*(st){const Se=st.name;fn.has(Se)&&(fn.delete(Se),yield Promise.all(st.container.getProviders().map(ot=>ot.delete())),st.isDeleted=!0)})).apply(this,arguments)}function ri(st,Se,ot){var Dt;let At=null!==(Dt=Ye[st])&&void 0!==Dt?Dt:st;ot&&(At+=`-${ot}`);const rn=At.match(/\s|\//),q=Se.match(/\s|\//);if(rn||q){const W=[`Unable to register library "${At}" with version "${Se}":`];return rn&&W.push(`library name "${At}" contains illegal characters (whitespace or "/")`),rn&&q&&W.push("and"),q&&W.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void Z.warn(W.join(" "))}Zt(new $.wA(`${At}-version`,()=>({library:At,version:Se}),"VERSION"))}function Yn(st,Se){if(null!==st&&"function"!=typeof st)throw Pn.create("invalid-log-argument");(0,N.Am)(st,Se)}function Cn(st){(0,N.Ub)(st)}const In="firebase-heartbeat-store";let Tn=null;function vn(){return Tn||(Tn=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(st,Se)=>{0===Se&&st.createObjectStore(In)}}).catch(st=>{throw Pn.create("idb-open",{originalErrorMessage:st.message})})),Tn}function It(){return(It=(0,l.Z)(function*(st){var Se;try{return(yield vn()).transaction(In).objectStore(In).get(Qn(st))}catch(ot){if(ot instanceof ae.ZR)Z.warn(ot.message);else{const Dt=Pn.create("idb-get",{originalErrorMessage:null===(Se=ot)||void 0===Se?void 0:Se.message});Z.warn(Dt.message)}}})).apply(this,arguments)}function Nt(st,Se){return ji.apply(this,arguments)}function ji(){return(ji=(0,l.Z)(function*(st,Se){var ot;try{const At=(yield vn()).transaction(In,"readwrite");return yield At.objectStore(In).put(Se,Qn(st)),At.done}catch(Dt){if(Dt instanceof ae.ZR)Z.warn(Dt.message);else{const At=Pn.create("idb-set",{originalErrorMessage:null===(ot=Dt)||void 0===ot?void 0:ot.message});Z.warn(At.message)}}})).apply(this,arguments)}function Qn(st){return`${st.name}!${st.options.appId}`}class ki{constructor(Se){this.container=Se,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new en(ot),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Se=this;return(0,l.Z)(function*(){const Dt=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=Vt();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==At&&!Se._heartbeatsCache.heartbeats.some(rn=>rn.date===At))return Se._heartbeatsCache.heartbeats.push({date:At,agent:Dt}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(rn=>{const q=new Date(rn.date).valueOf();return Date.now()-q<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,l.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const ot=Vt(),{heartbeatsToSend:Dt,unsentEntries:At}=function Qi(st,Se=1024){const ot=[];let Dt=st.slice();for(const At of st){const rn=ot.find(q=>q.agent===At.agent);if(rn){if(rn.dates.push(At.date),di(ot)>Se){rn.dates.pop();break}}else if(ot.push({agent:At.agent,dates:[At.date]}),di(ot)>Se){ot.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:ot,unsentEntries:Dt}}(Se._heartbeatsCache.heartbeats),rn=(0,ae.L)(JSON.stringify({version:2,heartbeats:Dt}));return Se._heartbeatsCache.lastSentHeartbeatDate=ot,At.length>0?(Se._heartbeatsCache.heartbeats=At,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),rn})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class en{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,l.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function Ct(st){return It.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var ot=this;return(0,l.Z)(function*(){var Dt;if(yield ot._canUseIndexedDBPromise){const rn=yield ot.read();return Nt(ot.app,{lastSentHeartbeatDate:null!==(Dt=Se.lastSentHeartbeatDate)&&void 0!==Dt?Dt:rn.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var ot=this;return(0,l.Z)(function*(){var Dt;if(yield ot._canUseIndexedDBPromise){const rn=yield ot.read();return Nt(ot.app,{lastSentHeartbeatDate:null!==(Dt=Se.lastSentHeartbeatDate)&&void 0!==Dt?Dt:rn.lastSentHeartbeatDate,heartbeats:[...rn.heartbeats,...Se.heartbeats]})}})()}}function di(st){return(0,ae.L)(JSON.stringify({version:2,heartbeats:st})).length}!function Mn(st){Zt(new $.wA("platform-logger",Se=>new _e(Se),"PRIVATE")),Zt(new $.wA("heartbeat",Se=>new ki(Se),"PRIVATE")),ri(fe,"0.8.4",st),ri(fe,"0.8.4","esm2017"),ri("fire-js","")}("")},4859:(_t,ke,V)=>{V.d(ke,{H0:()=>fe,wA:()=>N,zt:()=>ce});var l=V(5861),$=V(2090);class N{constructor(Z,z,J){this.name=Z,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ae="[DEFAULT]";class ce{constructor(Z,z){this.name=Z,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const z=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(z)){const J=new $.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:z});Ge&&J.resolve(Ge)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(Z){var z;const J=this.normalizeInstanceIdentifier(Z?.identifier),Ge=null!==(z=Z?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Pe){if(Ge)return null;throw Pe}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function ge(ve){return"EAGER"===ve.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(z);try{const Pe=this.getOrInitializeService({instanceIdentifier:Ge});J.resolve(Pe)}catch{}}}}clearInstance(Z=ae){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,l.Z)(function*(){const z=Array.from(Z.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ae){return this.instances.has(Z)}getOptions(Z=ae){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:z={}}=Z,J=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[Pe,De]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Pe)&&De.resolve(Ge);return Ge}onInit(Z,z){var J;const Ge=this.normalizeInstanceIdentifier(z),Pe=null!==(J=this.onInitCallbacks.get(Ge))&&void 0!==J?J:new Set;Pe.add(Z),this.onInitCallbacks.set(Ge,Pe);const De=this.instances.get(Ge);return De&&Z(De,Ge),()=>{Pe.delete(Z)}}invokeOnInitCallbacks(Z,z){const J=this.onInitCallbacks.get(z);if(J)for(const Ge of J)try{Ge(Z,z)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:z={}}){let J=this.instances.get(Z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=Z,ve===ae?void 0:ve),options:z}),this.instances.set(Z,J),this.instancesOptions.set(Z,z),this.invokeOnInitCallbacks(J,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,J)}catch{}var ve;return J||null}normalizeInstanceIdentifier(Z=ae){return this.component?this.component.multipleInstances?Z:ae:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const z=this.getProvider(Z.name);if(z.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);z.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const z=new ce(Z,this);return this.providers.set(Z,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,ke,V)=>{V.d(ke,{Am:()=>ve,Ub:()=>fe,Yd:()=>ge,in:()=>$});const l=[];var $=(()=>{return(Z=$||($={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",$;var Z})();const N={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ae=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},_e=(Z,z,...J)=>{if(z<Z.logLevel)return;const Ge=(new Date).toISOString(),Pe=ce[z];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Pe](`[${Ge}]  ${Z.name}:`,...J)};class ge{constructor(z){this.name=z,this._logLevel=ae,this._logHandler=_e,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?N[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function fe(Z){l.forEach(z=>{z.setLogLevel(Z)})}function ve(Z,z){for(const J of l){let Ge=null;z&&z.level&&(Ge=N[z.level]),J.userLogHandler=null===Z?null:(Pe,De,...at)=>{const Ie=at.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");De>=(Ge??Pe.logLevel)&&Z({level:$[De].toLowerCase(),message:Ie,args:at,type:Pe.name})}}}},8766:(_t,ke,V)=>{V.d(ke,{Lj:()=>Le,X3:()=>tt});var l=V(5861);let N,ae;const ge=new WeakMap,fe=new WeakMap,ve=new WeakMap,Z=new WeakMap,z=new WeakMap;let Pe={get(de,we,Q){if(de instanceof IDBTransaction){if("done"===we)return fe.get(de);if("objectStoreNames"===we)return de.objectStoreNames||ve.get(de);if("store"===we)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return me(de[we])},set:(de,we,Q)=>(de[we]=Q,!0),has:(de,we)=>de instanceof IDBTransaction&&("done"===we||"store"===we)||we in de};function Ie(de){return"function"==typeof de?function at(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...we){return de.apply(it(this),we),me(ge.get(this))}:function(...we){return me(de.apply(it(this),we))}:function(we,...Q){const ee=de.call(it(this),we,...Q);return ve.set(ee,we.sort?we.sort():[we]),me(ee)}}(de):(de instanceof IDBTransaction&&function Ge(de){if(fe.has(de))return;const we=new Promise((Q,ee)=>{const pe=()=>{de.removeEventListener("complete",ue),de.removeEventListener("error",He),de.removeEventListener("abort",He)},ue=()=>{Q(),pe()},He=()=>{ee(de.error||new DOMException("AbortError","AbortError")),pe()};de.addEventListener("complete",ue),de.addEventListener("error",He),de.addEventListener("abort",He)});fe.set(de,we)}(de),((de,we)=>we.some(Q=>de instanceof Q))(de,function ce(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,Pe):de)}function me(de){if(de instanceof IDBRequest)return function J(de){const we=new Promise((Q,ee)=>{const pe=()=>{de.removeEventListener("success",ue),de.removeEventListener("error",He)},ue=()=>{Q(me(de.result)),pe()},He=()=>{ee(de.error),pe()};de.addEventListener("success",ue),de.addEventListener("error",He)});return we.then(Q=>{Q instanceof IDBCursor&&ge.set(Q,de)}).catch(()=>{}),z.set(we,de),we}(de);if(Z.has(de))return Z.get(de);const we=Ie(de);return we!==de&&(Z.set(de,we),z.set(we,de)),we}const it=de=>z.get(de);function tt(de,we,{blocked:Q,upgrade:ee,blocking:pe,terminated:ue}={}){const He=indexedDB.open(de,we),je=me(He);return ee&&He.addEventListener("upgradeneeded",wt=>{ee(me(He.result),wt.oldVersion,wt.newVersion,me(He.transaction))}),Q&&He.addEventListener("blocked",()=>Q()),je.then(wt=>{ue&&wt.addEventListener("close",()=>ue()),pe&&wt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),je}function Le(de,{blocked:we}={}){const Q=indexedDB.deleteDatabase(de);return we&&Q.addEventListener("blocked",()=>we()),me(Q).then(()=>{})}const Oe=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ze=new Map;function oe(de,we){if(!(de instanceof IDBDatabase)||we in de||"string"!=typeof we)return;if(Ze.get(we))return Ze.get(we);const Q=we.replace(/FromIndex$/,""),ee=we!==Q,pe=Ee.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!pe&&!Oe.includes(Q))return;const ue=function(){var He=(0,l.Z)(function*(je,...wt){const ln=this.transaction(je,pe?"readwrite":"readonly");let $t=ln.store;return ee&&($t=$t.index(wt.shift())),(yield Promise.all([$t[Q](...wt),pe&&ln.done]))[0]});return function(wt){return He.apply(this,arguments)}}();return Ze.set(we,ue),ue}!function De(de){Pe=de(Pe)}(de=>({...de,get:(we,Q,ee)=>oe(we,Q)||de.get(we,Q,ee),has:(we,Q)=>!!oe(we,Q)||de.has(we,Q)}))},5861:(_t,ke,V)=>{function l(N,ae,ce,_e,ge,fe,ve){try{var Z=N[fe](ve),z=Z.value}catch(J){return void ce(J)}Z.done?ae(z):Promise.resolve(z).then(_e,ge)}function $(N){return function(){var ae=this,ce=arguments;return new Promise(function(_e,ge){var fe=N.apply(ae,ce);function ve(z){l(fe,_e,ge,ve,Z,"next",z)}function Z(z){l(fe,_e,ge,ve,Z,"throw",z)}ve(void 0)})}}V.d(ke,{Z:()=>$})}},_t=>{_t(_t.s=5341)}]);