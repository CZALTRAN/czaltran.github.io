"use strict";(self.webpackChunkhacka_sicredi=self.webpackChunkhacka_sicredi||[]).push([[179],{2011:(gt,xe,F)=>{F.d(xe,{Dh:()=>he,GT:()=>me,cc:()=>Ne,hO:()=>$e,on:()=>K,pX:()=>ue,xv:()=>we});var m=F(4650),$=F(127),k=F(5813);gt=F.hmd(gt);const se=["ngOnDestroy"],ue=(ge,Je,Ye,Le={})=>new Proxy(ge,{get:(Pe,be)=>Ye.runOutsideAngular(()=>{var ze;if(ge[be])return!(null===(ze=Le?.spy)||void 0===ze)&&ze.get&&Le.spy.get(be,ge[be]),ge[be];if(se.indexOf(be)>-1)return()=>{};const ie=Je.toPromise().then(le=>{const Ie=le&&le[be];return"function"==typeof Ie?Ie.bind(le):Ie&&Ie.then?Ie.then(Q=>Ye.run(()=>Q)):Ye.run(()=>Ie)});return new Proxy(()=>{},{get:(le,Ie)=>ie[Ie],apply:(le,Ie,Q)=>ie.then(ee=>{var fe;const ae=ee&&ee(...Q);return!(null===(fe=Le?.spy)||void 0===fe)&&fe.apply&&Le.spy.apply(be,Q,ae),ae})})})}),me=(ge,Je)=>{Je.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Le=>{Object.defineProperty(ge.prototype,Le,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Le))})})};class pe{constructor(Je){return Je}}const he=new m.OlP("angularfire2.app.options"),we=new m.OlP("angularfire2.app.name");function K(ge,Je,Ye){const Pe="object"==typeof Ye&&Ye||{};Pe.name=Pe.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const ze=$.Z.apps.filter(ie=>ie&&ie.name===Pe.name)[0]||Je.runOutsideAngular(()=>$.Z.initializeApp(ge,Pe));try{JSON.stringify(ge)!==JSON.stringify(ze.options)&&z("error",`${ze.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(ze)}const z=(ge,...Je)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Je)},J={provide:pe,useFactory:K,deps:[he,m.R0b,[new m.FiY,we]]};let $e=(()=>{class ge{constructor(Ye){$.Z.registerVersion("angularfire",k.q4.full,"core"),$.Z.registerVersion("angularfire",k.q4.full,"app-compat"),$.Z.registerVersion("angular",m.q4F.full,Ye.toString())}static initializeApp(Ye,Le){return{ngModule:ge,providers:[{provide:he,useValue:Ye},{provide:we,useValue:Le}]}}}return ge.\u0275fac=function(Ye){return new(Ye||ge)(m.LFG(m.Lbi))},ge.\u0275mod=m.oAB({type:ge}),ge.\u0275inj=m.cJS({providers:[J]}),ge})();function Ne(ge,Je,Ye,Le,Pe){const[,be,ze]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===ge)||[];if(be)return function Te(ge,Je){try{return ge.toString()===Je.toString()}catch{return ge===Je}}(Pe,ze)||(Ce("error",`${Je} was already initialized on the ${Ye} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Pe,was:ze})),be;{const ie=Le();return globalThis.\u0275AngularfireInstanceCache.push([ge,ie,Pe]),ie}}const nt=!!gt.hot,Ce=(ge,...Je)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(gt,xe,F)=>{F.d(xe,{q4:()=>ot,iC:()=>hs,fc:()=>Xn,HU:()=>xs,vb:()=>aa,JM:()=>Ya});var m=F(4650),$=F(5867),k=F(5861),se=F(9681),ue=F(2090),me=F(4859),pe=F(1877),he=F(8766);const we="@firebase/installations",K="0.5.16",J=`w:${K}`,$e="FIS_v2",Je=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(b){return b instanceof ue.ZR&&b.code.includes("request-failed")}function Le({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Pe(b){return{token:b.token,requestStatus:2,expiresIn:ee(b.expiresIn),creationTime:Date.now()}}function be(b,D){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(b,D){const j=(yield D.json()).error;return Je.create("request-failed",{requestName:b,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ie({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function le(b,{refreshToken:D}){const x=ie(b);return x.append("Authorization",function fe(b){return`${$e} ${b}`}(D)),x}function Ie(b){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function ee(b){return Number(b.replace("s","000"))}function ae(b,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const j=Le(b),X=ie(b),oe=D.getImmediate({optional:!0});if(oe){const At=yield oe.getHeartbeatsHeader();At&&X.append("x-firebase-client",At)}const Ve={method:"POST",headers:X,body:JSON.stringify({fid:x,authVersion:$e,appId:b.appId,sdkVersion:J})},ct=yield Ie(()=>fetch(j,Ve));if(ct.ok){const At=yield ct.json();return{fid:At.fid||x,registrationStatus:2,refreshToken:At.refreshToken,authToken:Pe(At.authToken)}}throw yield be("Create Installation",ct)})).apply(this,arguments)}function je(b){return new Promise(D=>{setTimeout(D,b)})}const rn=/^[cdef][\w-]{21}$/;function qe(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function ln(b){return function mt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return rn.test(x)?x:""}catch{return""}}function En(b){return`${b.appName}!${b.appId}`}const tn=new Map;function nn(b,D){const x=En(b);vr(x,D),function Li(b,D){const x=function kn(){return!Or&&"BroadcastChannel"in self&&(Or=new BroadcastChannel("[Firebase] FID Change"),Or.onmessage=b=>{vr(b.data.key,b.data.fid)}),Or}();x&&x.postMessage({key:b,fid:D}),function Fi(){0===tn.size&&Or&&(Or.close(),Or=null)}()}(x,D)}function vr(b,D){const x=tn.get(b);if(x)for(const j of x)j(D)}let Or=null;const Vn="firebase-installations-store";let _i=null;function Vi(){return _i||(_i=(0,he.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Vn)}})),_i}function Qe(b,D){return nr.apply(this,arguments)}function nr(){return(nr=(0,k.Z)(function*(b,D){const x=En(b),X=(yield Vi()).transaction(Vn,"readwrite"),oe=X.objectStore(Vn),Ae=yield oe.get(x);return yield oe.put(D,x),yield X.done,(!Ae||Ae.fid!==D.fid)&&nn(b,D.fid),D})).apply(this,arguments)}function Zn(b){return wn.apply(this,arguments)}function wn(){return(wn=(0,k.Z)(function*(b){const D=En(b),j=(yield Vi()).transaction(Vn,"readwrite");yield j.objectStore(Vn).delete(D),yield j.done})).apply(this,arguments)}function pr(b,D){return qs.apply(this,arguments)}function qs(){return(qs=(0,k.Z)(function*(b,D){const x=En(b),X=(yield Vi()).transaction(Vn,"readwrite"),oe=X.objectStore(Vn),Ae=yield oe.get(x),Ve=D(Ae);return void 0===Ve?yield oe.delete(x):yield oe.put(Ve,x),yield X.done,Ve&&(!Ae||Ae.fid!==Ve.fid)&&nn(b,Ve.fid),Ve})).apply(this,arguments)}function In(b){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,k.Z)(function*(b){let D;const x=yield pr(b.appConfig,j=>{const X=gn(j),oe=_t(b,X);return D=oe.registrationPromise,oe.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function gn(b){return St(b||{fid:qe(),registrationStatus:0})}function _t(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Je.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},j=function yt(b,D){return xt.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:j}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Fr(b)}:{installationEntry:D}}function xt(){return(xt=(0,k.Z)(function*(b,D){try{const x=yield ae(b,D);return Qe(b.appConfig,x)}catch(x){throw Ye(x)&&409===x.customData.serverCode?yield Zn(b.appConfig):yield Qe(b.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Fr(b){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,k.Z)(function*(b){let D=yield Ar(b.appConfig);for(;1===D.registrationStatus;)yield je(100),D=yield Ar(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:j}=yield In(b);return j||x}return D})).apply(this,arguments)}function Ar(b){return pr(b,D=>{if(!D)throw Je.create("installation-not-found");return St(D)})}function St(b){return function Rr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Ot(b,D){return $r.apply(this,arguments)}function $r(){return($r=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const j=Yt(b,x),X=le(b,x),oe=D.getImmediate({optional:!0});if(oe){const At=yield oe.getHeartbeatsHeader();At&&X.append("x-firebase-client",At)}const Ve={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:b.appId}})},ct=yield Ie(()=>fetch(j,Ve));if(ct.ok)return Pe(yield ct.json());throw yield be("Generate Auth Token",ct)})).apply(this,arguments)}function Yt(b,{fid:D}){return`${Le(b)}/${D}/authTokens:generate`}function cr(b){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,k.Z)(function*(b,D=!1){let x;const j=yield pr(b.appConfig,oe=>{if(!Xt(oe))throw Je.create("not-registered");const Ae=oe.authToken;if(!D&&q(Ae))return oe;if(1===Ae.requestStatus)return x=et(b,D),oe;{if(!navigator.onLine)throw Je.create("app-offline");const Ve=Y(oe);return x=Ct(b,Ve),Ve}});return x?yield x:j.authToken})).apply(this,arguments)}function et(b,D){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*(b,D){let x=yield tt(b.appConfig);for(;1===x.authToken.requestStatus;)yield je(100),x=yield tt(b.appConfig);const j=x.authToken;return 0===j.requestStatus?cr(b,D):j})).apply(this,arguments)}function tt(b){return pr(b,D=>{if(!Xt(D))throw Je.create("not-registered");return function H(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ct(b,D){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(b,D){try{const x=yield Ot(b,D),j=Object.assign(Object.assign({},D),{authToken:x});return yield Qe(b.appConfig,j),x}catch(x){if(!Ye(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Qe(b.appConfig,j)}else yield Zn(b.appConfig);throw x}})).apply(this,arguments)}function Xt(b){return void 0!==b&&2===b.registrationStatus}function q(b){return 2===b.requestStatus&&!function W(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Y(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function B(){return(B=(0,k.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:j}=yield In(D);return j?j.catch(console.error):cr(D).catch(console.error),x.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,k.Z)(function*(b,D=!1){const x=b;return yield it(x),(yield cr(x,D)).token})).apply(this,arguments)}function it(b){return st.apply(this,arguments)}function st(){return(st=(0,k.Z)(function*(b){const{registrationPromise:D}=yield In(b);D&&(yield D)})).apply(this,arguments)}function Ks(b){return Je.create("missing-app-config-values",{valueName:b})}const xo="installations",Zs=b=>{const D=b.getProvider("app").getImmediate(),x=function bn(b){if(!b||!b.options)throw Ks("App Configuration");if(!b.name)throw Ks("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw Ks(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Ys=b=>{const D=b.getProvider("app").getImmediate(),x=(0,se._getProvider)(D,xo).getImmediate();return{getId:()=>function M(b){return B.apply(this,arguments)}(x),getToken:X=>function re(b){return Oe.apply(this,arguments)}(x,X)}};(function pu(){(0,se._registerComponent)(new me.wA(xo,Zs,"PUBLIC")),(0,se._registerComponent)(new me.wA("installations-internal",Ys,"PRIVATE"))})(),(0,se.registerVersion)(we,K),(0,se.registerVersion)(we,K,"esm2017");const ts="@firebase/remote-config",Jn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ra{constructor(D,x,j,X){this.client=D,this.storage=x,this.storageCache=j,this.logger=X}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-x,X=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${X}.`),X}fetch(D){var x=this;return(0,k.Z)(function*(){const[j,X]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(X&&x.isCachedDataFresh(D.cacheMaxAgeMillis,j))return X;D.eTag=X&&X.eTag;const oe=yield x.client.fetch(D),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ae),oe})()}}function eo(b=navigator){return b.languages&&b.languages[0]||b.language}class to{constructor(D,x,j,X,oe,Ae){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=j,this.projectId=X,this.apiKey=oe,this.appId=Ae}fetch(D){var x=this;return(0,k.Z)(function*(){var j,X,oe;const[Ae,Ve]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),At=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},vt={sdk_version:x.sdkVersion,app_instance_id:Ae,app_instance_id_token:Ve,app_id:x.appId,language_code:eo()},zn={method:"POST",headers:Mt,body:JSON.stringify(vt)},mr=fetch(At,zn),la=new Promise((ca,po)=>{D.signal.addEventListener(()=>{const Yr=new Error("The operation was aborted.");Yr.name="AbortError",po(Yr)})});let Ms;try{yield Promise.race([mr,la]),Ms=yield mr}catch(ca){let po="fetch-client-network";throw"AbortError"===(null===(j=ca)||void 0===j?void 0:j.name)&&(po="fetch-timeout"),Jn.create(po,{originalErrorMessage:null===(X=ca)||void 0===X?void 0:X.message})}let Ft=Ms.status;const Ii=Ms.headers.get("ETag")||void 0;let fs,Gi;if(200===Ms.status){let ca;try{ca=yield Ms.json()}catch(po){throw Jn.create("fetch-client-parse",{originalErrorMessage:null===(oe=po)||void 0===oe?void 0:oe.message})}fs=ca.entries,Gi=ca.state}if("INSTANCE_STATE_UNSPECIFIED"===Gi?Ft=500:"NO_CHANGE"===Gi?Ft=304:("NO_TEMPLATE"===Gi||"EMPTY_CONFIG"===Gi)&&(fs={}),304!==Ft&&200!==Ft)throw Jn.create("fetch-status",{httpStatus:Ft});return{status:Ft,eTag:Ii,config:fs}})()}}class rs{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,k.Z)(function*(){const j=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:j}){var X=this;return(0,k.Z)(function*(){yield function ri(b,D){return new Promise((x,j)=>{const X=Math.max(D-Date.now(),0),oe=setTimeout(x,X);b.addEventListener(()=>{clearTimeout(oe),j(Jn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const oe=yield X.client.fetch(D);return yield X.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function bp(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(oe))throw oe;const Ae={throttleEndTimeMillis:Date.now()+(0,ue.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(Ae),X.attemptFetch(D,Ae)}})()}}class Dp{constructor(D,x,j,X,oe){this.app=D,this._client=x,this._storageCache=j,this._storage=X,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xa(b,D){var x;const j=b.target.error||void 0;return Jn.create(D,{originalErrorMessage:j&&(null===(x=j)||void 0===x?void 0:x.message)})}const Mo="app_namespace_store";class _c{constructor(D,x,j,X=function Ap(){return new Promise((b,D)=>{var x;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{D(xa(X,"storage-open"))},j.onsuccess=X=>{b(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Mo,{keyPath:"compositeKey"})}}catch(j){D(Jn.create("storage-open",{originalErrorMessage:null===(x=j)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,k.Z)(function*(){const j=yield x.openDbPromise;return new Promise((X,oe)=>{var Ae;const ct=j.transaction([Mo],"readonly").objectStore(Mo),At=x.createCompositeKey(D);try{const Mt=ct.get(At);Mt.onerror=vt=>{oe(xa(vt,"storage-get"))},Mt.onsuccess=vt=>{const zn=vt.target.result;X(zn?zn.value:void 0)}}catch(Mt){oe(Jn.create("storage-get",{originalErrorMessage:null===(Ae=Mt)||void 0===Ae?void 0:Ae.message}))}})})()}set(D,x){var j=this;return(0,k.Z)(function*(){const X=yield j.openDbPromise;return new Promise((oe,Ae)=>{var Ve;const At=X.transaction([Mo],"readwrite").objectStore(Mo),Mt=j.createCompositeKey(D);try{const vt=At.put({compositeKey:Mt,value:x});vt.onerror=zn=>{Ae(xa(zn,"storage-set"))},vt.onsuccess=()=>{oe()}}catch(vt){Ae(Jn.create("storage-set",{originalErrorMessage:null===(Ve=vt)||void 0===Ve?void 0:Ve.message}))}})})()}delete(D){var x=this;return(0,k.Z)(function*(){const j=yield x.openDbPromise;return new Promise((X,oe)=>{var Ae;const ct=j.transaction([Mo],"readwrite").objectStore(Mo),At=x.createCompositeKey(D);try{const Mt=ct.delete(At);Mt.onerror=vt=>{oe(xa(vt,"storage-delete"))},Mt.onsuccess=()=>{X()}}catch(Mt){oe(Jn.create("storage-delete",{originalErrorMessage:null===(Ae=Mt)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class No{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const x=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),X=D.storage.getActiveConfig(),oe=yield x;oe&&(D.lastFetchStatus=oe);const Ae=yield j;Ae&&(D.lastSuccessfulFetchTimestampMillis=Ae);const Ve=yield X;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function N_(){return gu.apply(this,arguments)}function gu(){return(gu=(0,k.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function yc(){(0,se._registerComponent)(new me.wA("remote-config",function b(D,{instanceIdentifier:x}){const j=D.getProvider("app").getImmediate(),X=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Jn.create("registration-window");if(!(0,ue.hl)())throw Jn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ae,appId:Ve}=j.options;if(!oe)throw Jn.create("registration-project-id");if(!Ae)throw Jn.create("registration-api-key");if(!Ve)throw Jn.create("registration-app-id");const ct=new _c(Ve,j.name,x=x||"firebase"),At=new No(ct),Mt=new pe.Yd(ts);Mt.logLevel=pe.in.ERROR;const vt=new to(X,se.SDK_VERSION,x,oe,Ae,Ve),zn=new rs(vt,ct),mr=new Ra(zn,ct,At,Mt),la=new Dp(j,mr,At,ct,Mt);return function Bn(b){const D=(0,ue.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(la),la},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(ts,"0.3.15"),(0,se.registerVersion)(ts,"0.3.15","esm2017")}();const wr="/firebase-messaging-sw.js",Oo="/firebase-cloud-messaging-push-scope",Ts="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mu="google.c.a.c_id",dl="google.c.a.c_l",Ic="google.c.a.ts",Lo="google.c.a.e";var ii=(()=>{return(b=ii||(ii={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",ii;var b})();function is(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zr(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(x),X=new Uint8Array(j.length);for(let oe=0;oe<j.length;++oe)X[oe]=j.charCodeAt(oe);return X}const no="fcm_token_details_db",Fo="fcm_token_object_Store";function Rp(b){return fl.apply(this,arguments)}function fl(){return fl=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(no))return null;let D=null;return(yield(0,he.X3)(no,5,{upgrade:(j=(0,k.Z)(function*(X,oe,Ae,Ve){var ct;if(oe<2||!X.objectStoreNames.contains(Fo))return;const At=Ve.objectStore(Fo),Mt=yield At.index("fcmSenderId").get(b);if(yield At.clear(),Mt)if(2===oe){const vt=Mt;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;D={token:vt.fcmToken,createTime:null!==(ct=vt.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:is(vt.vapidKey)}}}else if(3===oe){const vt=Mt;D={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:is(vt.auth),p256dh:is(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:is(vt.vapidKey)}}}else if(4===oe){const vt=Mt;D={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:is(vt.auth),p256dh:is(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:is(vt.vapidKey)}}}}),function(oe,Ae,Ve,ct){return j.apply(this,arguments)})})).close(),yield(0,he.Lj)(no),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),On(D)?D:null;var j}),fl.apply(this,arguments)}function On(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const vi="firebase-messaging-store";let Ir=null;function _u(){return Ir||(Ir=(0,he.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(vi)}})),Ir}function Uo(b){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,k.Z)(function*(b){const D=si(b),j=yield(yield _u()).transaction(vi).objectStore(vi).get(D);if(j)return j;{const X=yield Rp(b.appConfig.senderId);if(X)return yield sn(b,X),X}})).apply(this,arguments)}function sn(b,D){return pl.apply(this,arguments)}function pl(){return(pl=(0,k.Z)(function*(b,D){const x=si(b),X=(yield _u()).transaction(vi,"readwrite");return yield X.objectStore(vi).put(D,x),yield X.done,D})).apply(this,arguments)}function Ds(b){return gl.apply(this,arguments)}function gl(){return(gl=(0,k.Z)(function*(b){const D=si(b),j=(yield _u()).transaction(vi,"readwrite");yield j.objectStore(vi).delete(D),yield j.done})).apply(this,arguments)}function si({appConfig:b}){return b.appId}const jn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function kt(b,D){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*(b,D){var x;const j=yield Oa(b),X=Me(D),oe={method:"POST",headers:j,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(ro(b.appConfig),oe)).json()}catch(Ve){throw jn.create("token-subscribe-failed",{errorInfo:null===(x=Ve)||void 0===x?void 0:x.toString()})}if(Ae.error)throw jn.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw jn.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function xp(b,D){return Na.apply(this,arguments)}function Na(){return(Na=(0,k.Z)(function*(b,D){var x;const j=yield Oa(b),X=Me(D.subscriptionOptions),oe={method:"PATCH",headers:j,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(`${ro(b.appConfig)}/${D.token}`,oe)).json()}catch(Ve){throw jn.create("token-update-failed",{errorInfo:null===(x=Ve)||void 0===x?void 0:x.toString()})}if(Ae.error)throw jn.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw jn.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function Cc(b,D){return ka.apply(this,arguments)}function ka(){return(ka=(0,k.Z)(function*(b,D){var x;const X={method:"DELETE",headers:yield Oa(b)};try{const Ae=yield(yield fetch(`${ro(b.appConfig)}/${D}`,X)).json();if(Ae.error)throw jn.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(oe){throw jn.create("token-unsubscribe-failed",{errorInfo:null===(x=oe)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function ro({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Oa(b){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,k.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Me({p256dh:b,auth:D,endpoint:x,vapidKey:j}){const X={web:{endpoint:x,auth:D,p256dh:b}};return j!==Ts&&(X.web.applicationPubKey=j),X}const Kt=6048e5;function _h(b){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,k.Z)(function*(b){const D=yield yh(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:is(D.getKey("auth")),p256dh:is(D.getKey("p256dh"))},j=yield Uo(b.firebaseDependencies);if(j){if(Pp(j.subscriptionOptions,x))return Date.now()>=j.createTime+Kt?yu(b,{token:j.token,createTime:Date.now(),subscriptionOptions:x}):j.token;try{yield Cc(b.firebaseDependencies,j.token)}catch(X){console.warn(X)}return vu(b.firebaseDependencies,x)}return vu(b.firebaseDependencies,x)})).apply(this,arguments)}function ir(b){return jo.apply(this,arguments)}function jo(){return(jo=(0,k.Z)(function*(b){const D=yield Uo(b.firebaseDependencies);D&&(yield Cc(b.firebaseDependencies,D.token),yield Ds(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function yu(b,D){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,k.Z)(function*(b,D){try{const x=yield xp(b.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield sn(b.firebaseDependencies,j),x}catch(x){throw yield ir(b),x}})).apply(this,arguments)}function vu(b,D){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,k.Z)(function*(b,D){const j={token:yield kt(b,D),createTime:Date.now(),subscriptionOptions:D};return yield sn(b,j),j.token})).apply(this,arguments)}function yh(b,D){return La.apply(this,arguments)}function La(){return(La=(0,k.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zr(D)})})).apply(this,arguments)}function Pp(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function io(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function sr(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const j=D.notification.body;j&&(b.notification.body=j);const X=D.notification.image;X&&(b.notification.image=X);const oe=D.notification.icon;oe&&(b.notification.icon=oe)}(D,b),function ji(b,D){!D.data||(b.data=D.data)}(D,b),function Fa(b,D){var x,j,X,oe,Ae;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Ve=null!==(X=null===(j=D.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(oe=D.notification)||void 0===oe?void 0:oe.click_action;Ve&&(b.fcmOptions.link=Ve);const ct=null===(Ae=D.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;ct&&(b.fcmOptions.analyticsLabel=ct)}(D,b),D}function Ua(b){return"object"==typeof b&&!!b&&mu in b}function ss(b,D){const x=[];for(let j=0;j<b.length;j++)x.push(b.charAt(j)),j<D.length&&x.push(D.charAt(j));return x.join("")}function ml(b){return jn.create("missing-app-config-values",{valueName:b})}ss("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ss("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tc{constructor(D,x,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function bc(b){if(!b||!b.options)throw ml("App Configuration Object");if(!b.name)throw ml("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const j of D)if(!x[j])throw ml(j);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:X,installations:x,analyticsProvider:j}}_delete(){return Promise.resolve()}}function vh(b){return $o.apply(this,arguments)}function $o(){return($o=(0,k.Z)(function*(b){var D;try{b.swRegistration=yield navigator.serviceWorker.register(wr,{scope:Oo}),b.swRegistration.update().catch(()=>{})}catch(x){throw jn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function _l(b,D){return Va.apply(this,arguments)}function Va(){return(Va=(0,k.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield vh(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function yl(b,D){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,k.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Ts)})).apply(this,arguments)}function Wo(){return(Wo=(0,k.Z)(function*(b,D){if(!navigator)throw jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jn.create("permission-blocked");return yield yl(b,D?.vapidKey),yield _l(b,D?.serviceWorkerRegistration),_h(b)})).apply(this,arguments)}function wh(b,D,x){return ja.apply(this,arguments)}function ja(){return(ja=(0,k.Z)(function*(b,D,x){const j=Ih(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:x[mu],message_name:x[dl],message_time:x[Ic],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ih(b){switch(b){case ii.NOTIFICATION_CLICKED:return"notification_open";case ii.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ss(){return(Ss=(0,k.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===ii.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(io(x)):b.onMessageHandler.next(io(x)));const j=x.data;Ua(j)&&"1"===j[Lo]&&(yield wh(b,x.messageType,j))})).apply(this,arguments)}const As="@firebase/messaging",Rn=b=>{const D=new Tc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Sc(b,D){return Ss.apply(this,arguments)}(D,x)),D},os=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:j=>function Dc(b,D){return Wo.apply(this,arguments)}(D,j)}};function Rc(){return vl.apply(this,arguments)}function vl(){return(vl=(0,k.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xn(){(0,se._registerComponent)(new me.wA("messaging",Rn,"PUBLIC")),(0,se._registerComponent)(new me.wA("messaging-internal",os,"PRIVATE")),(0,se.registerVersion)(As,"0.11.0"),(0,se.registerVersion)(As,"0.11.0","esm2017")}();const qo="analytics",Pc="firebase_id",Cl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mc="https://www.googletagmanager.com/gtag/js",Hn=new pe.Yd("@firebase/analytics");function Iu(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Eu(b,D){const x=document.createElement("script");x.src=`${Mc}?l=${b}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Ch(b,D,x,j,X,oe){return bu.apply(this,arguments)}function bu(){return(bu=(0,k.Z)(function*(b,D,x,j,X,oe){const Ae=j[X];try{if(Ae)yield D[Ae];else{const ct=(yield Iu(x)).find(At=>At.measurementId===X);ct&&(yield D[ct.appId])}}catch(Ve){Hn.error(Ve)}b("config",X,oe)})).apply(this,arguments)}function as(b,D,x,j,X){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,k.Z)(function*(b,D,x,j,X){try{let oe=[];if(X&&X.send_to){let Ae=X.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ve=yield Iu(x);for(const ct of Ae){const At=Ve.find(vt=>vt.measurementId===ct),Mt=At&&D[At.appId];if(!Mt){oe=[];break}oe.push(Mt)}}0===oe.length&&(oe=Object.values(D)),yield Promise.all(oe),b("event",j,X||{})}catch(oe){Hn.error(oe)}})).apply(this,arguments)}function Nc(b){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(Mc)&&x.src.includes(b))return x;return null}const or=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wa=new class Tl{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Ko(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Dh(b){return $n.apply(this,arguments)}function $n(){return($n=(0,k.Z)(function*(b){var D;const{appId:x,apiKey:j}=b,X={method:"GET",headers:Ko(j)},oe=Cl.replace("{app-id}",x),Ae=yield fetch(oe,X);if(200!==Ae.status&&304!==Ae.status){let Ve="";try{const ct=yield Ae.json();null!==(D=ct.error)&&void 0!==D&&D.message&&(Ve=ct.error.message)}catch{}throw or.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ve})}return Ae.json()})).apply(this,arguments)}function kc(b){return qr.apply(this,arguments)}function qr(){return(qr=(0,k.Z)(function*(b,D=Wa,x){const{appId:j,apiKey:X,measurementId:oe}=b.options;if(!j)throw or.create("no-app-id");if(!X){if(oe)return{measurementId:oe,appId:j};throw or.create("no-api-key")}const Ae=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Ga;return setTimeout((0,k.Z)(function*(){Ve.abort()}),void 0!==x?x:6e4),Oc({appId:j,apiKey:X,measurementId:oe},Ae,Ve,D)})).apply(this,arguments)}function Oc(b,D,x){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},j,X=Wa){var oe,Ae;const{appId:Ve,measurementId:ct}=b;try{yield Dl(j,D)}catch(At){if(ct)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(oe=At)||void 0===oe?void 0:oe.message}]`),{appId:Ve,measurementId:ct};throw At}try{const At=yield Dh(b);return X.deleteThrottleMetadata(Ve),At}catch(At){const Mt=At;if(!Tu(Mt)){if(X.deleteThrottleMetadata(Ve),ct)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${Mt?.message}]`),{appId:Ve,measurementId:ct};throw At}const vt=503===Number(null===(Ae=Mt?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,ue.$s)(x,X.intervalMillis,30):(0,ue.$s)(x,X.intervalMillis),zn={throttleEndTimeMillis:Date.now()+vt,backoffCount:x+1};return X.setThrottleMetadata(Ve,zn),Hn.debug(`Calling attemptFetch again in ${vt} millis`),Oc(b,zn,j,X)}})).apply(this,arguments)}function Dl(b,D){return new Promise((x,j)=>{const X=Math.max(D-Date.now(),0),oe=setTimeout(x,X);b.addEventListener(()=>{clearTimeout(oe),j(or.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Tu(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ga{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let so,Su;function Zo(){return(Zo=(0,k.Z)(function*(b,D,x,j,X){if(X&&X.global)b("event",x,j);else{const oe=yield D;b("event",x,Object.assign(Object.assign({},j),{send_to:oe}))}})).apply(this,arguments)}function Xo(b){Su=b}function Sl(b){so=b}function oo(){return ea.apply(this,arguments)}function ea(){return(ea=(0,k.Z)(function*(){var b;if(!(0,ue.hl)())return Hn.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(D){return Hn.warn(or.create("indexeddb-unavailable",{errorInfo:null===(b=D)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function ta(){return(ta=(0,k.Z)(function*(b,D,x,j,X,oe,Ae){var Ve;const ct=kc(b);ct.then(mr=>{x[mr.measurementId]=mr.appId,b.options.measurementId&&mr.measurementId!==b.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>Hn.error(mr)),D.push(ct);const At=oo().then(mr=>{if(mr)return j.getId()}),[Mt,vt]=yield Promise.all([ct,At]);Nc(oe)||Eu(oe,Mt.measurementId),Su&&(X("consent","default",Su),Xo(void 0)),X("js",new Date);const zn=null!==(Ve=Ae?.config)&&void 0!==Ve?Ve:{};return zn.origin="firebase",zn.update=!0,null!=vt&&(zn[Pc]=vt),X("config",Mt.measurementId,zn),so&&(X("set",so),Sl(void 0)),Mt.measurementId})).apply(this,arguments)}class Au{constructor(D){this.app=D}_delete(){return delete xr[this.app.options.appId],Promise.resolve()}}let xr={},na=[];const ao={};let ia,$i,ra="dataLayer",Fc=!1;function Rh(b,D,x){!function Mp(){const b=[];if((0,ue.ru)()&&b.push("This is a browser extension environment."),(0,ue.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((j,X)=>`(${X+1}) ${j}`).join(" "),x=or.create("invalid-analytics-context",{errorInfo:D});Hn.warn(x.message)}}();const j=b.options.appId;if(!j)throw or.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw or.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xr[j])throw or.create("already-exists",{id:j});if(!Fc){!function Cu(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(ra);const{wrappedGtag:oe,gtagCore:Ae}=function $a(b,D,x,j,X){let oe=function(...Ae){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(oe=window[X]),window[X]=function bl(b,D,x,j){function oe(){return(oe=(0,k.Z)(function*(Ae,Ve,ct){try{"event"===Ae?yield as(b,D,x,Ve,ct):"config"===Ae?yield Ch(b,D,x,j,Ve,ct):"consent"===Ae?b("consent","update",ct):b("set",Ve)}catch(At){Hn.error(At)}})).apply(this,arguments)}return function X(Ae,Ve,ct){return oe.apply(this,arguments)}}(oe,b,D,x),{gtagCore:oe,wrappedGtag:window[X]}}(xr,na,ao,ra,"gtag");$i=oe,ia=Ae,Fc=!0}return xr[j]=function Ah(b,D,x,j,X,oe,Ae){return ta.apply(this,arguments)}(b,na,ao,D,ia,ra,x),new Au(b)}function O_(){return xh.apply(this,arguments)}function xh(){return(xh=(0,k.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const ut="@firebase/analytics";!function Dn(){(0,se._registerComponent)(new me.wA(qo,(D,{options:x})=>Rh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new me.wA("analytics-internal",function b(D){try{const x=D.getProvider(qo).getImmediate();return{logEvent:(j,X,oe)=>function on(b,D,x,j){b=(0,ue.m9)(b),function za(b,D,x,j,X){return Zo.apply(this,arguments)}($i,xr[b.app.options.appId],D,x,j).catch(X=>Hn.error(X))}(x,j,X,oe)}}catch(x){throw or.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(ut,"0.8.4"),(0,se.registerVersion)(ut,"0.8.4","esm2017")}();var cs=F(4408),Er=F(7565);const Uc=new class lo extends Er.v{}(class uo extends cs.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(D,x,j):(D.flush(this),0)}});var Ph=F(4986),sa=F(8505),Rl=F(5363),co=F(9468);const ot=new m.GfV("7.4.1"),Ka="__angularfire_symbol__analyticsIsSupportedValue",Wi="__angularfire_symbol__analyticsIsSupported",xl="__angularfire_symbol__remoteConfigIsSupportedValue",xu="__angularfire_symbol__remoteConfigIsSupported",Wn="__angularfire_symbol__messagingIsSupportedValue",Za="__angularfire_symbol__messagingIsSupported";function Ya(b,D,x){if(D){if(1===D.length)return D[0];const oe=D.filter(Ae=>Ae.app===x);if(1===oe.length)return oe[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Wi]||(globalThis[Wi]=O_().then(b=>globalThis[Ka]=b).catch(()=>globalThis[Ka]=!1)),globalThis[Za]||(globalThis[Za]=Rc().then(b=>globalThis[Wn]=b).catch(()=>globalThis[Wn]=!1)),globalThis[xu]||(globalThis[xu]=N_().then(b=>globalThis[xl]=b).catch(()=>globalThis[xl]=!1));const aa=(b,D)=>{const x=D?[D]:(0,$.C6)(),j=[];return x.forEach(X=>{X.container.getProvider(b).instances.forEach(Ae=>{j.includes(Ae)||j.push(Ae)})}),j};function ai(){}class ho{constructor(D,x=Uc){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,j){const X=this.zone;return this.delegate.schedule(function(Ae){X.runGuarded(()=>{D.apply(this,[Ae])})},x,j)}}class Pl{constructor(D){this.zone=D,this.task=null}call(D,x){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ai,{},ai,ai)),x.pipe((0,sa.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xs=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ho(Zone.current)),this.insideAngular=x.run(()=>new ho(Zone.current,Ph.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Zr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Xn(b){return b.pipe((0,Rl.Q)(Zr().outsideAngular))}function hs(b){return Zr(),function Gn(b){return function(x){return(x=x.lift(new Pl(b.ngZone))).pipe((0,co.R)(b.outsideAngular),(0,Rl.Q)(b.insideAngular))}}(Zr())(b)}},8247:(gt,xe,F)=>{F.d(xe,{$:()=>ro,A:()=>z,B:()=>Ne,G:()=>Ys,H:()=>Wr,J:()=>rs,L:()=>q,M:()=>gu,N:()=>wc,P:()=>Ph,Q:()=>mu,R:()=>L_,T:()=>dl,U:()=>Ts,V:()=>ii,W:()=>is,X:()=>Rp,Y:()=>Pa,Z:()=>kt,_:()=>xp,a:()=>Rs,a0:()=>_h,a1:()=>ir,a2:()=>yu,a3:()=>vu,a4:()=>yh,a5:()=>Pp,a6:()=>sr,a7:()=>ji,a8:()=>Ua,a9:()=>ss,aA:()=>W,aB:()=>ct,aC:()=>Xn,aD:()=>Ps,aE:()=>It,aI:()=>Ko,aL:()=>Lo,aa:()=>vh,ab:()=>_l,ac:()=>yl,af:()=>wh,ag:()=>Ih,ah:()=>Sc,ak:()=>vi,al:()=>wl,an:()=>Mc,ao:()=>bu,ap:()=>Ie,aq:()=>Ue,ar:()=>it,as:()=>Ye,at:()=>Mu,au:()=>Ii,av:()=>Pt,aw:()=>Le,ax:()=>ie,ay:()=>mr,az:()=>ee,b:()=>or,c:()=>Wn,d:()=>Mh,e:()=>Pu,f:()=>Gn,g:()=>j,h:()=>b,i:()=>ea,j:()=>Ae,k:()=>Uh,l:()=>Kr,m:()=>Ns,o:()=>he,r:()=>cs,s:()=>ls,u:()=>Uc});var m=F(5861),$=F(2090),k=F(9681),se=F(1877),ue=F(655),me=F(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ge=new se.Yd("@firebase/auth");function Je(w,...p){ge.logLevel<=se.in.ERROR&&ge.error(`Auth (${k.SDK_VERSION}): ${w}`,...p)}function Ye(w,...p){throw ze(w,...p)}function Le(w,...p){return ze(w,...p)}function Pe(w,p,_){const E=Object.assign(Object.assign({},Te()),{[p]:_});return new $.LL("auth","Firebase",E).create(p,{appName:w.name})}function be(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Ye(w,"argument-error"),Pe(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(w,...p){if("string"!=typeof w){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return nt.create(w,...p)}function ie(w,p,..._){if(!w)throw ze(p,..._)}function le(w){const p="INTERNAL ASSERTION FAILED: "+w;throw Je(p),new Error(p)}function Ie(w,p){w||le(p)}const Q=new Map;function ee(w){Ie(w instanceof Function,"Expected a class definition");let p=Q.get(w);return p?(Ie(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Q.set(w,p),p)}function Be(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===mt()||"https:"===mt()}function mt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class qe{constructor(p,_){this.shortDelay=p,this.longDelay=_,Ie(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function rn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(w,p){Ie(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class En{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new qe(3e4,6e4);function qt(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Bt(w,p,_,E){return vr.apply(this,arguments)}function vr(){return(vr=(0,m.Z)(function*(w,p,_,E,R={}){return Li(w,R,(0,m.Z)(function*(){let O={},ne={};E&&("GET"===p?ne=E:O={body:JSON.stringify(E)});const Re=(0,$.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),rt=yield w._getAdditionalHeaders();return rt["Content-Type"]="application/json",w.languageCode&&(rt["X-Firebase-Locale"]=w.languageCode),En.fetch()(Ui(w,w.config.apiHost,_,Re),Object.assign({method:p,headers:rt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Li(w,p,_){return Or.apply(this,arguments)}function Or(){return(Or=(0,m.Z)(function*(w,p,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},tn),p);try{const R=new Lr(w),O=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const ne=yield O.json();if("needConfirmation"in ne)throw Vn(w,"account-exists-with-different-credential",ne);if(O.ok&&!("errorMessage"in ne))return ne;{const Re=O.ok?ne.errorMessage:ne.error.message,[rt,bt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw Vn(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===rt)throw Vn(w,"email-already-in-use",ne);if("USER_DISABLED"===rt)throw Vn(w,"user-disabled",ne);const Zt=E[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(bt)throw Pe(w,Zt,bt);Ye(w,Zt)}}catch(R){if(R instanceof $.ZR)throw R;Ye(w,"network-request-failed")}})).apply(this,arguments)}function kn(w,p,_,E){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,m.Z)(function*(w,p,_,E,R={}){const O=yield Bt(w,p,_,E,R);return"mfaPendingCredential"in O&&Ye(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ui(w,p,_,E){const R=`${p}${_}?${E}`;return w.config.emulator?ln(w.config,R):`${w.config.apiScheme}://${R}`}class Lr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Le(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(w,p,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const R=Le(w,p,E);return R.customData._tokenResponse=_,R}function Vi(){return(Vi=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Qe(w,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Zn(w,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function pr(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Cn(){return(Cn=(0,m.Z)(function*(w,p=!1){const _=(0,$.m9)(w),E=yield _.getIdToken(p),R=_t(E);ie(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const O="object"==typeof R.firebase?R.firebase:void 0,ne=O?.sign_in_provider;return{claims:R,token:E,authTime:pr(gn(R.auth_time)),issuedAtTime:pr(gn(R.iat)),expirationTime:pr(gn(R.exp)),signInProvider:ne||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function gn(w){return 1e3*Number(w)}function _t(w){var p;const[_,E,R]=w.split(".");if(void 0===_||void 0===E||void 0===R)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,$.tV)(E);return O?JSON.parse(O):(Je("Failed to decode base64 JWT payload"),null)}catch(O){return Je("Caught error parsing JWT payload as JSON",null===(p=O)||void 0===p?void 0:p.toString()),null}}function xt(w,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof $.ZR&&Yn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Yn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Ar{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,m.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class St{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=pr(this.lastLoginAt),this.creationTime=pr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(w){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,m.Z)(function*(w){var p;const _=w.auth,E=yield w.getIdToken(),R=yield xt(w,Zn(_,{idToken:E}));ie(R?.users.length,_,"internal-error");const O=R.users[0];w._notifyReloadListener(O);const ne=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?Sn(O.providerUserInfo):[],Re=cr(w.providerData,ne),Zt=!!w.isAnonymous&&!(w.email&&O.passwordHash||Re?.length),hn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Re,metadata:new St(O.createdAt,O.lastLoginAt),isAnonymous:Zt};Object.assign(w,hn)})).apply(this,arguments)}function Yt(){return(Yt=(0,m.Z)(function*(w){const p=(0,$.m9)(w);yield Rr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function cr(w,p){return[...w.filter(E=>!p.some(R=>R.providerId===E.providerId)),...p]}function Sn(w){return w.map(p=>{var{providerId:_}=p,E=(0,ue._T)(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function De(){return(De=(0,m.Z)(function*(w,p){const _=yield Li(w,{},(0,m.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:R,apiKey:O}=w.config,ne=Ui(w,R,"/v1/token",`key=${O}`),Re=yield w._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",En.fetch()(ne,{method:"POST",headers:Re,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ie(p.idToken,"internal-error"),ie(typeof p.idToken<"u","internal-error"),ie(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function yt(w){const p=_t(w);return ie(p,"internal-error"),ie(typeof p.exp<"u","internal-error"),ie(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,m.Z)(function*(){return ie(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,m.Z)(function*(){const{accessToken:R,refreshToken:O,expiresIn:ne}=yield function et(w,p){return De.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(R,O,Number(ne))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:R,expirationTime:O}=_,ne=new tt;return E&&(ie("string"==typeof E,"internal-error",{appName:p}),ne.refreshToken=E),R&&(ie("string"==typeof R,"internal-error",{appName:p}),ne.accessToken=R),O&&(ie("number"==typeof O,"internal-error",{appName:p}),ne.expirationTime=O),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return le("not implemented")}}function Ct(w,p){ie("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class Tt{constructor(p){var{uid:_,auth:E,stsTokenManager:R}=p,O=(0,ue._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ar(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new St(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,m.Z)(function*(){const E=yield xt(_,_.stsTokenManager.getToken(_.auth,p));return ie(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function In(w){return Cn.apply(this,arguments)}(this,p)}reload(){return function $r(w){return Yt.apply(this,arguments)}(this)}_assign(p){this!==p&&(ie(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Tt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,m.Z)(function*(){let R=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),R=!0),_&&(yield Rr(E)),yield E.auth._persistUserIfCurrent(E),R&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,m.Z)(function*(){const _=yield p.getIdToken();return yield xt(p,function _i(w,p){return Vi.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,R,O,ne,Re,rt,bt,Zt;const hn=null!==(E=_.displayName)&&void 0!==E?E:void 0,Vr=null!==(R=_.email)&&void 0!==R?R:void 0,zi=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Gc=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,zc=null!==(Re=_.tenantId)&&void 0!==Re?Re:void 0,qc=null!==(rt=_._redirectEventId)&&void 0!==rt?rt:void 0,Ja=null!==(bt=_.createdAt)&&void 0!==bt?bt:void 0,Up=null!==(Zt=_.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:$h,emailVerified:Kc,isAnonymous:Ol,providerData:Ll,stsTokenManager:da}=_;ie($h&&da,p,"internal-error");const j_=tt.fromJSON(this.name,da);ie("string"==typeof $h,p,"internal-error"),Ct(hn,p.name),Ct(Vr,p.name),ie("boolean"==typeof Kc,p,"internal-error"),ie("boolean"==typeof Ol,p,"internal-error"),Ct(zi,p.name),Ct(Gc,p.name),Ct(zc,p.name),Ct(qc,p.name),Ct(Ja,p.name),Ct(Up,p.name);const Ln=new Tt({uid:$h,auth:p,email:Vr,emailVerified:Kc,displayName:hn,isAnonymous:Ol,photoURL:Gc,phoneNumber:zi,tenantId:zc,stsTokenManager:j_,createdAt:Ja,lastLoginAt:Up});return Ll&&Array.isArray(Ll)&&(Ln.providerData=Ll.map(Vp=>Object.assign({},Vp))),qc&&(Ln._redirectEventId=qc),Ln}static _fromIdTokenResponse(p,_,E=!1){return(0,m.Z)(function*(){const R=new tt;R.updateFromServerResponse(_);const O=new Tt({uid:_.localId,auth:p,stsTokenManager:R,isAnonymous:E});return yield Rr(O),O})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,E){var R=this;return(0,m.Z)(function*(){R.storage[_]=E})()}_get(_){var E=this;return(0,m.Z)(function*(){const R=E.storage[_];return void 0===R?null:R})()}_remove(_){var E=this;return(0,m.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function W(w,p,_){return`firebase:${w}:${p}:${_}`}class Y{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:R,name:O}=this.auth;this.fullUserKey=W(this.userKey,R.apiKey,O),this.fullPersistenceKey=W("persistence",R.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,m.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Tt._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,m.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,m.Z)(function*(){if(!_.length)return new Y(ee(q),p,E);const R=(yield Promise.all(_.map(function(){var bt=(0,m.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return bt.apply(this,arguments)}}()))).filter(bt=>bt);let O=R[0]||ee(q);const ne=W(E,p.config.apiKey,p.name);let Re=null;for(const bt of _)try{const Zt=yield bt._get(ne);if(Zt){const hn=Tt._fromJSON(p,Zt);bt!==O&&(Re=hn),O=bt;break}}catch{}const rt=R.filter(bt=>bt._shouldAllowMigration);return O._shouldAllowMigration&&rt.length?(O=rt[0],Re&&(yield O._set(ne,Re.toJSON())),yield Promise.all(_.map(function(){var bt=(0,m.Z)(function*(Zt){if(Zt!==O)try{yield Zt._remove(ne)}catch{}});return function(Zt){return bt.apply(this,arguments)}}())),new Y(O,p,E)):new Y(O,p,E)})()}}function H(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Oe(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(M(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(st(p))return"Blackberry";if(Se(p))return"Webos";if(B(p))return"Safari";if((p.includes("chrome/")||re(p))&&!p.includes("edge/"))return"Chrome";if(it(p))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function M(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function re(w=(0,$.z$)()){return/crios\//i.test(w)}function Oe(w=(0,$.z$)()){return/iemobile/i.test(w)}function it(w=(0,$.z$)()){return/android/i.test(w)}function st(w=(0,$.z$)()){return/blackberry/i.test(w)}function Se(w=(0,$.z$)()){return/webos/i.test(w)}function Ue(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Pt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function dn(w=(0,$.z$)()){return Ue(w)||it(w)||Se(w)||st(w)||/windows phone/i.test(w)||Oe(w)}function bn(w,p=[]){let _;switch(w){case"Browser":_=H((0,$.z$)());break;case"Worker":_=`${H((0,$.z$)())}-${w}`;break;default:_=w}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${E}`}class Ks{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const E=O=>new Promise((ne,Re)=>{try{ne(p(O))}catch(rt){Re(rt)}});E.onAbort=_,this.queue.push(E);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,m.Z)(function*(){var E;if(_.auth.currentUser===p)return;const R=[];try{for(const O of _.queue)yield O(p),O.onAbort&&R.push(O.onAbort)}catch(O){R.reverse();for(const ne of R)try{ne()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class xo{constructor(p,_,E){this.app=p,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zs(this),this.idTokenSubscription=new Zs(this),this.beforeStateQueue=new Ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=ee(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var R,O;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,p),!E._deleted)){if(null!==(R=E._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,m.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,m.Z)(function*(){var E;const R=yield _.assertedPersistence.getCurrentUser();let O=R,ne=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Re=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,rt=O?._redirectEventId,bt=yield _.tryRedirectSignIn(p);(!Re||Re===rt)&&bt?.user&&(O=bt.user,ne=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(O)}catch(Re){O=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Re))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,m.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,m.Z)(function*(){var E;try{yield Rr(p)}catch(R){if("auth/network-request-failed"!==(null===(E=R)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ht(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,m.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,m.Z)(function*(){const E=p?(0,$.m9)(p):null;return E&&ie(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p,_=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return p&&ie(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,m.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(ee(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,m.Z)(function*(){const R=yield E.getOrInitRedirectPersistenceManager(_);return null===p?R.removeCurrentUser():R.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&ee(p)||_._popupRedirectResolver;ie(E,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ee(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,m.Z)(function*(){var E,R;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,m.Z)(function*(){if(p===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,R){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(ne,this,"internal-error"),ne.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,E,R):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,m.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const R=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(E["X-Firebase-Client"]=R),E})()}}function It(w){return(0,$.m9)(w)}class Zs{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ys(w,p,_){const E=It(w);ie(E._canInitEmulator,E,"emulator-config-failed"),ie(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const R=!!_?.disableWarnings,O=pu(p),{host:ne,port:Re}=function ts(w){const p=pu(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(E);if(R){const O=R[1];return{host:O,port:Qn(E.substr(O.length+1))}}{const[O,ne]=E.split(":");return{host:O,port:Qn(ne)}}}(p);E.config.emulator={url:`${O}//${ne}${null===Re?"":`:${Re}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ne,port:Re,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Qs(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function pu(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Qn(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class Wr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return le("not implemented")}_getIdTokenResponse(p){return le("not implemented")}_linkToIdToken(p,_){return le("not implemented")}_getReauthenticationResolver(p){return le("not implemented")}}function ti(w,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:resetPassword",qt(w,p))})).apply(this,arguments)}function ul(w,p){return an.apply(this,arguments)}function an(){return(an=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ph(w,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",qt(w,p))})).apply(this,arguments)}function Js(){return(Js=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signInWithPassword",qt(w,p))})).apply(this,arguments)}function bs(w,p){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:sendOobCode",qt(w,p))})).apply(this,arguments)}function ns(w,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,m.Z)(function*(w,p){return bs(w,p)})).apply(this,arguments)}function gh(w,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(w,p){return bs(w,p)})).apply(this,arguments)}function ni(w,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,m.Z)(function*(w,p){return bs(w,p)})).apply(this,arguments)}function ll(w,p){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,m.Z)(function*(w,p){return bs(w,p)})).apply(this,arguments)}function cl(){return(cl=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,p))})).apply(this,arguments)}function Ra(){return(Ra=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,p))})).apply(this,arguments)}class eo extends Wr{constructor(p,_,E,R=null){super("password",E),this._email=p,this._password=_,this._tenantId=R}static _fromEmailAndPassword(p,_){return new eo(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new eo(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,m.Z)(function*(){switch(_.signInMethod){case"password":return function Sa(w,p){return Js.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Gr(w,p){return cl.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Ye(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return ul(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Cp(w,p){return Ra.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:Ye(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function to(w,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signInWithIdp",qt(w,p))})).apply(this,arguments)}class rs extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new rs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Ye("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:R}=_,O=(0,ue._T)(_,["providerId","signInMethod"]);if(!E||!R)return null;const ne=new rs(E,R);return ne.idToken=O.idToken||void 0,ne.accessToken=O.accessToken||void 0,ne.secret=O.secret,ne.nonce=O.nonce,ne.pendingToken=O.pendingToken||null,ne}_getIdTokenResponse(p){return to(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,to(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,to(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,$.xO)(_)}return p}}function Tp(w,p){return gc.apply(this,arguments)}function gc(){return(gc=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:sendVerificationCode",qt(w,p))})).apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,p))})).apply(this,arguments)}function mc(){return(mc=(0,m.Z)(function*(w,p){const _=yield kn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,p));if(_.temporaryProof)throw Vn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Sp={USER_NOT_FOUND:"user-not-found"};function _c(){return(_c=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Sp)})).apply(this,arguments)}class No extends Wr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new No({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new No({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Dp(w,p){return xa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Mo(w,p){return mc.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ap(w,p){return _c.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:R}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:R}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:O}=p;return E||_||R||O?new No({verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:O}):null}}class ko{constructor(p){var _,E,R,O,ne,Re;const rt=(0,$.zd)((0,$.pd)(p)),bt=null!==(_=rt.apiKey)&&void 0!==_?_:null,Zt=null!==(E=rt.oobCode)&&void 0!==E?E:null,hn=function yc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=rt.mode)&&void 0!==R?R:null);ie(bt&&Zt&&hn,"argument-error"),this.apiKey=bt,this.operation=hn,this.code=Zt,this.continueUrl=null!==(O=rt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ne=rt.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Re=rt.tenantId)&&void 0!==Re?Re:null}static parseLink(p){const _=function vc(w){const p=(0,$.zd)((0,$.pd)(w)).link,_=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||p||w}(p);try{return new ko(_)}catch{return null}}}let gu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return eo._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const R=ko.parseLink(E);return ie(R,"argument-error"),eo._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class wr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Oo extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ts extends Oo{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),rs._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ie(p.idToken||p.accessToken,"argument-error"),rs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ts.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ts.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:O,nonce:ne,providerId:Re}=p;if(!E&&!R&&!_&&!O||!Re)return null;try{return new Ts(Re)._credential({idToken:_,accessToken:E,nonce:ne,pendingToken:O})}catch{return null}}}let wc=(()=>{class w extends Oo{constructor(){super("facebook.com")}static credential(_){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),mu=(()=>{class w extends Oo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:R}=_;if(!E&&!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),dl=(()=>{class w extends Oo{constructor(){super("github.com")}static credential(_){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Lo extends Wr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return to(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,to(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,to(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:R,pendingToken:O}=_;return E&&R&&O&&E===R?new Lo(E,O):null}static _create(p,_){return new Lo(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ii extends wr{constructor(p){ie(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ii.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ii.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Lo.fromJSON(p);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return Lo._create(E,_)}catch{return null}}}let is=(()=>{class w extends Oo{constructor(){super("twitter.com")}static credential(_,E){return rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:R}=_;if(!E||!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function zr(w,p){return no.apply(this,arguments)}function no(){return(no=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signUp",qt(w,p))})).apply(this,arguments)}class yi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,R=!1){return(0,m.Z)(function*(){const O=yield Tt._fromIdTokenResponse(p,E,R),ne=Fo(E);return new yi({user:O,providerId:ne,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,m.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const R=Fo(E);return new yi({user:p,providerId:R,_tokenResponse:E,operationType:_})})()}}function Fo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Rp(w){return fl.apply(this,arguments)}function fl(){return(fl=(0,m.Z)(function*(w){var p;const _=It(w);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new yi({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield zr(_,{returnSecureToken:!0}),R=yield yi._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class On extends $.ZR{constructor(p,_,E,R){var O;super(_.code,_.message),this.operationType=E,this.user=R,Object.setPrototypeOf(this,On.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,R){return new On(p,_,E,R)}}function Ec(w,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?On._fromErrorAndOperation(w,O,p,E):O})}function mh(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function vi(w,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w);yield Bi(!0,_,p);const{providerUserInfo:E}=yield Qe(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),R=mh(E||[]);return _.providerData=_.providerData.filter(O=>R.has(O.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function _u(w,p){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,m.Z)(function*(w,p,_=!1){const E=yield xt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return yi._forOperation(w,"link",E)})).apply(this,arguments)}function Bi(w,p,_){return sn.apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(w,p,_){yield Rr(p);const R=!1===w?"provider-already-linked":"no-such-provider";ie(mh(p.providerData).has(_)===w,p.auth,R)})).apply(this,arguments)}function pl(w,p){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(w,p,_=!1){var E;const{auth:R}=w,O="reauthenticate";try{const ne=yield xt(w,Ec(R,O,p,w),_);ie(ne.idToken,R,"internal-error");const Re=_t(ne.idToken);ie(Re,R,"internal-error");const{sub:rt}=Re;return ie(w.uid===rt,R,"user-mismatch"),yi._forOperation(w,O,ne)}catch(ne){throw"auth/user-not-found"===(null===(E=ne)||void 0===E?void 0:E.code)&&Ye(R,"user-mismatch"),ne}})).apply(this,arguments)}function gl(w,p){return si.apply(this,arguments)}function si(){return(si=(0,m.Z)(function*(w,p,_=!1){const E="signIn",R=yield Ec(w,E,p),O=yield yi._fromIdTokenResponse(w,E,R);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Pa(w,p){return jn.apply(this,arguments)}function jn(){return(jn=(0,m.Z)(function*(w,p){return gl(It(w),p)})).apply(this,arguments)}function kt(w,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w);return yield Bi(!1,_,p.providerId),_u(_,p)})).apply(this,arguments)}function xp(w,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(w,p){return pl((0,$.m9)(w),p)})).apply(this,arguments)}function Cc(w,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(w,p){return kn(w,"POST","/v1/accounts:signInWithCustomToken",qt(w,p))})).apply(this,arguments)}function ro(w,p){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(w,p){const _=It(w),E=yield Cc(_,{token:p,returnSecureToken:!0}),R=yield yi._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Vo{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Me._fromServerResponse(p,_):Ye(p,"internal-error")}}class Me extends Vo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Me(_)}}function Kt(w,p,_){var E;ie((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function _h(w,p,_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R={requestType:"PASSWORD_RESET",email:p};_&&Kt(E,R,_),yield gh(E,R)})).apply(this,arguments)}function ir(w,p,_){return jo.apply(this,arguments)}function jo(){return(jo=(0,m.Z)(function*(w,p,_){yield ti((0,$.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function yu(w,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,m.Z)(function*(w,p){yield ph((0,$.m9)(w),{oobCode:p})})).apply(this,arguments)}function vu(w,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w),E=yield ti(_,{oobCode:p}),R=E.requestType;switch(ie(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(E.mfaInfo,_,"internal-error");default:ie(E.email,_,"internal-error")}let O=null;return E.mfaInfo&&(O=Vo._fromServerResponse(It(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:R}})).apply(this,arguments)}function yh(w,p){return La.apply(this,arguments)}function La(){return(La=(0,m.Z)(function*(w,p){const{data:_}=yield vu((0,$.m9)(w),p);return _.email})).apply(this,arguments)}function Pp(w,p,_){return io.apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(w,p,_){const E=It(w),R=yield zr(E,{returnSecureToken:!0,email:p,password:_}),O=yield yi._fromIdTokenResponse(E,"signIn",R);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function sr(w,p,_){return Pa((0,$.m9)(w),gu.credential(p,_))}function ji(w,p,_){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R={requestType:"EMAIL_SIGNIN",email:p};ie(_.handleCodeInApp,E,"argument-error"),_&&Kt(E,R,_),yield ni(E,R)})).apply(this,arguments)}function Ua(w,p){return"EMAIL_SIGNIN"===ko.parseLink(p)?.operation}function ss(w,p,_){return bc.apply(this,arguments)}function bc(){return(bc=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R=gu.credentialWithLink(p,_||Be());return ie(R._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Pa(E,R)})).apply(this,arguments)}function ml(w,p){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:createAuthUri",qt(w,p))})).apply(this,arguments)}function vh(w,p){return $o.apply(this,arguments)}function $o(){return($o=(0,m.Z)(function*(w,p){const E={identifier:p,continueUri:je()?Be():"http://localhost"},{signinMethods:R}=yield ml((0,$.m9)(w),E);return R||[]})).apply(this,arguments)}function _l(w,p){return Va.apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Kt(_.auth,R,p);const{email:O}=yield ns(_.auth,R);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function yl(w,p,_){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&Kt(E.auth,O,_);const{email:ne}=yield ll(E.auth,O);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function Dc(w,p){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wh(w,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,$.m9)(w),O={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},ne=yield xt(E,Dc(E.auth,O));E.displayName=ne.displayName||null,E.photoURL=ne.photoUrl||null;const Re=E.providerData.find(({providerId:rt})=>"password"===rt);Re&&(Re.displayName=E.displayName,Re.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ne)})).apply(this,arguments)}function Ih(w,p){return Ss((0,$.m9)(w),p,null)}function Sc(w,p){return Ss((0,$.m9)(w),null,p)}function Ss(w,p,_){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(w,p,_){const{auth:E}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const ne=yield xt(w,ul(E,O));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Rn{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class os extends Rn{constructor(p,_,E,R){super(p,_,E),this.username=R}}class xn extends Rn{constructor(p,_){super(p,"facebook.com",_)}}class Rc extends os{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class vl extends Rn{constructor(p,_){super(p,"google.com",_)}}class Eh extends os{constructor(p,_,E){super(p,"twitter.com",_,E)}}function wl(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ac(w){var p,_;if(!w)return null;const{providerId:E}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const ne=null===(_=null===(p=_t(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new Rn(O,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!E)return null;switch(E){case"facebook.com":return new xn(O,R);case"github.com":return new Rc(O,R);case"google.com":return new vl(O,R);case"twitter.com":return new Eh(O,R,w.screenName||null);case"custom":case"anonymous":return new Rn(O,null);default:return new Rn(O,E,R)}}(_)}class oi{constructor(p,_,E){this.type=p,this.credential=_,this.auth=E}static _fromIdtoken(p,_){return new oi("enroll",p,_)}static _fromMfaPendingCredential(p){return new oi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return oi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return oi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Cl{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=It(p),R=_.customData._serverResponse,O=(R.mfaInfo||[]).map(Re=>Vo._fromServerResponse(E,Re));ie(R.mfaPendingCredential,E,"internal-error");const ne=oi._fromMfaPendingCredential(R.mfaPendingCredential);return new Cl(ne,O,function(){var Re=(0,m.Z)(function*(rt){const bt=yield rt._process(E,ne);delete R.mfaInfo,delete R.mfaPendingCredential;const Zt=Object.assign(Object.assign({},R),{idToken:bt.idToken,refreshToken:bt.refreshToken});switch(_.operationType){case"signIn":const hn=yield yi._fromIdTokenResponse(E,_.operationType,Zt);return yield E._updateCurrentUser(hn.user),hn;case"reauthenticate":return ie(_.user,E,"internal-error"),yi._forOperation(_.user,_.operationType,Zt);default:Ye(E,"internal-error")}});return function(rt){return Re.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,m.Z)(function*(){return _.signInResolver(p)})()}}function Mc(w,p){var _;const E=(0,$.m9)(w),R=p;return ie(p.customData.operationType,E,"argument-error"),ie(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Cl._fromError(E,R)}function Hn(w,p){return Bt(w,"POST","/v2/accounts/mfaEnrollment:start",qt(w,p))}class Cu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Vo._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Cu(p)}getSession(){var p=this;return(0,m.Z)(function*(){return oi._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var E=this;return(0,m.Z)(function*(){const R=p,O=yield E.getSession(),ne=yield xt(E.user,R._process(E.user.auth,O,_));return yield E.user._updateTokensIfNecessary(ne),E.user.reload()})()}unenroll(p){var _=this;return(0,m.Z)(function*(){var E;const R="string"==typeof p?p:p.uid,O=yield _.user.getIdToken(),ne=yield xt(_.user,function Eu(w,p){return Bt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(w,p))}(_.user.auth,{idToken:O,mfaEnrollmentId:R}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Re})=>Re!==R),yield _.user._updateTokensIfNecessary(ne);try{yield _.user.reload()}catch(Re){if("auth/user-token-expired"!==(null===(E=Re)||void 0===E?void 0:E.code))throw Re}})()}}const Ch=new WeakMap;function bu(w){const p=(0,$.m9)(w);return Ch.has(p)||Ch.set(p,Cu._fromUser(p)),Ch.get(p)}const as="__sak";class Ha{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(as,"1"),this.storage.removeItem(as),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const or=(()=>{class w extends Ha{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bl(){const w=(0,$.z$)();return B(w)||Ue(w)}()&&function es(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=dn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const R=this.storage.getItem(E),O=this.localCache[E];R!==O&&_(E,O,R)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Re,rt,bt)=>{this.notifyListeners(Re,bt)});const R=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(R);if(_.newValue!==Re)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!E)return}const O=()=>{const Re=this.storage.getItem(R);!E&&this.localCache[R]===Re||this.notifyListeners(R,Re)},ne=this.storage.getItem(R);!function Lt(){return(0,$.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var R=()=>super._set,O=this;return(0,m.Z)(function*(){yield R().call(O,_,E),O.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,R=this;return(0,m.Z)(function*(){const O=yield E().call(R,_);return R.localCache[_]=JSON.stringify(O),O})()}_remove(_){var E=()=>super._remove,R=this;return(0,m.Z)(function*(){yield E().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),Rs=(()=>{class w extends Ha{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let Wa=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(O=>O.isListeningto(_));if(E)return E;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,m.Z)(function*(){const R=_,{eventId:O,eventType:ne,data:Re}=R.data,rt=E.handlersMap[ne];if(!rt?.size)return;R.ports[0].postMessage({status:"ack",eventId:O,eventType:ne});const bt=Array.from(rt).map(function(){var hn=(0,m.Z)(function*(Vr){return Vr(R.origin,Re)});return function(Vr){return hn.apply(this,arguments)}}()),Zt=yield function Tl(w){return Promise.all(w.map(function(){var p=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(bt);R.ports[0].postMessage({status:"done",eventId:O,eventType:ne,response:Zt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ko(w="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return w+_}class Dh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var R=this;return(0,m.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ne,Re;return new Promise((rt,bt)=>{const Zt=Ko("",20);O.port1.start();const hn=setTimeout(()=>{bt(new Error("unsupported_event"))},E);Re={messageChannel:O,onMessage(Vr){const zi=Vr;if(zi.data.eventId===Zt)switch(zi.data.status){case"ack":clearTimeout(hn),ne=setTimeout(()=>{bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),rt(zi.data.response);break;default:clearTimeout(hn),clearTimeout(ne),bt(new Error("invalid_response"))}}},R.handlers.add(Re),O.port1.addEventListener("message",Re.onMessage),R.target.postMessage({eventType:p,eventId:Zt,data:_},[O.port2])}).finally(()=>{Re&&R.removeMessageHandler(Re)})})()}}function $n(){return window}function qr(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function us(){return(us=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ga="firebaseLocalStorageDb",za="firebaseLocalStorage",Zo="fbase_key";class Yo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Qo(w,p){return w.transaction([za],p?"readwrite":"readonly").objectStore(za)}function Du(){const w=indexedDB.open(Ga,1);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(za,{keyPath:Zo})}catch(R){_(R)}}),w.addEventListener("success",(0,m.Z)(function*(){const E=w.result;E.objectStoreNames.contains(za)?p(E):(E.close(),yield function Lc(){const w=indexedDB.deleteDatabase(Ga);return new Yo(w).toPromise()}(),p(yield Du()))}))})}function qa(w,p,_){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(w,p,_){const E=Qo(w,!0).put({[Zo]:p,value:_});return new Yo(E).toPromise()})).apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(w,p){const _=Qo(w,!1).get(p),E=yield new Yo(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Su(w,p){const _=Qo(w,!0).delete(p);return new Yo(_).toPromise()}const ea=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield Du()),_.db})()}_withRetries(_){var E=this;return(0,m.Z)(function*(){let R=0;for(;;)try{const O=yield E._openDb();return yield _(O)}catch(O){if(R++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return qr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=Wa._getInstance(function Tu(){return qr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(R,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(R,O){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(R,O){return["keyChanged"]});return function(R,O){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var E,R;if(_.activeServiceWorker=yield function Oc(){return us.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Dh(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(R=O[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Dl(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Du();return yield qa(_,as,"1"),yield Su(_,as),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var R=this;return(0,m.Z)(function*(){return R._withPendingWrite((0,m.Z)(function*(){return yield R._withRetries(O=>qa(O,_,E)),R.localCache[_]=E,R.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,m.Z)(function*(){const R=yield E._withRetries(O=>function Sh(w,p){return Jo.apply(this,arguments)}(O,_));return E.localCache[_]=R,R})()}_remove(_){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(R=>Su(R,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const E=yield _._withRetries(ne=>{const Re=Qo(ne,!1).getAll();return new Yo(Re).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const R=[],O=new Set;for(const{fbase_key:ne,value:Re}of E)O.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(Re)&&(_.notifyListeners(ne,Re),R.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!O.has(ne)&&(_.notifyListeners(ne,null),R.push(ne));return R})()}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ah(w,p){return Bt(w,"POST","/v2/accounts/mfaSignIn:start",qt(w,p))}function xr(){return(xr=(0,m.Z)(function*(w){return(yield Bt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ao(w){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=p,E.onerror=R=>{const O=Le("internal-error");O.customData=R,_(O)},E.type="text/javascript",E.charset="UTF-8",function na(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(E)})}function ra(w){return`__${w}${Math.floor(1e6*Math.random())}`}const $i=1e12;class Fc{constructor(p){this.auth=p,this.counter=$i,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new Tn(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||$i;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||$i))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,m.Z)(function*(){var E;return null===(E=_._widgets.get(p||$i))||void 0===E||E.execute(),""})()}}class Tn{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof p?document.getElementById(p):p;ie(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Mp(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rh=ra("rcb"),GI=new qe(3e4,6e4);class O_{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=$n().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ie(function xh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($n().grecaptcha):new Promise((E,R)=>{const O=$n().setTimeout(()=>{R(Le(p,"network-request-failed"))},GI.get());$n()[Rh]=()=>{$n().clearTimeout(O),delete $n()[Rh];const Re=$n().grecaptcha;if(!Re)return void R(Le(p,"internal-error"));const rt=Re.render;Re.render=(bt,Zt)=>{const hn=rt(bt,Zt);return this.counter++,hn},this.hostLanguage=_,E(Re)},ao(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Rh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),R(Le(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=$n().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zI{load(p){return(0,m.Z)(function*(){return new Fc(p)})()}clearedOneInstance(){}}const Ru="recaptcha",qI={theme:"light",type:"image"};class L_{constructor(p,_=Object.assign({},qI),E){this.parameters=_,this.type=Ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=It(E),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof p?document.getElementById(p):p;ie(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zI:new O_,this.validateStartingState()}verify(){var p=this;return(0,m.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(O=>{const ne=Re=>{!Re||(p.tokenChangeListeners.delete(ne),O(Re))};p.tokenChangeListeners.add(ne),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=$n()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,m.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,m.Z)(function*(){ie(je()&&!qr(),p.auth,"internal-error"),yield function gr(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Au(w){return xr.apply(this,arguments)}(p.auth);ie(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class on{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=No._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function ls(w,p,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(w,p,_){const E=It(w),R=yield Er(E,p,(0,$.m9)(_));return new on(R,O=>Pa(E,O))})).apply(this,arguments)}function Kr(w,p,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);yield Bi(!1,E,"phone");const R=yield Er(E.auth,p,(0,$.m9)(_));return new on(R,O=>kt(E,O))})).apply(this,arguments)}function cs(w,p,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R=yield Er(E.auth,p,(0,$.m9)(_));return new on(R,O=>xp(E,O))})).apply(this,arguments)}function Er(w,p,_){return lo.apply(this,arguments)}function lo(){return(lo=(0,m.Z)(function*(w,p,_){var E;const R=yield _.verify();try{let O;if(ie("string"==typeof R,w,"argument-error"),ie(_.type===Ru,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const ne=O.session;if("phoneNumber"in O)return ie("enroll"===ne.type,w,"internal-error"),(yield Hn(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ie("signin"===ne.type,w,"internal-error");const Re=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return ie(Re,w,"missing-multi-factor-info"),(yield Ah(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield Tp(w,{phoneNumber:O.phoneNumber,recaptchaToken:R});return ne}}finally{_._reset()}})).apply(this,arguments)}function Uc(w,p){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,m.Z)(function*(w,p){yield _u((0,$.m9)(w),p)})).apply(this,arguments)}let Ph=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=It(_)}verifyPhoneNumber(_,E){return Er(this.auth,_,(0,$.m9)(E))}static credential(_,E){return No._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:R}=_;return E&&R?No._fromTokenResponse(E,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function sa(w,p){return p?ee(p):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Rl extends Wr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return to(p,this._buildIdpRequest())}_linkToIdToken(p,_){return to(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return to(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function co(w){return gl(w.auth,new Rl(w),w.bypassAuthState)}function ot(w){const{auth:p,user:_}=w;return ie(_,p,"internal-error"),pl(_,new Rl(w),w.bypassAuthState)}function Ka(w){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,m.Z)(function*(w){const{auth:p,user:_}=w;return ie(_,p,"internal-error"),_u(_,new Rl(w),w.bypassAuthState)})).apply(this,arguments)}class xl{constructor(p,_,E,R,O=!1){this.auth=p,this.resolver=E,this.user=R,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,m.Z)(function*(E,R){p.pendingPromise={resolve:E,reject:R};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(E,R){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:R,postBody:O,tenantId:ne,error:Re,type:rt}=p;if(Re)return void _.reject(Re);const bt={auth:_.auth,requestUri:E,sessionId:R,tenantId:ne||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(rt)(bt))}catch(Zt){_.reject(Zt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return co;case"linkViaPopup":case"linkViaRedirect":return Ka;case"reauthViaPopup":case"reauthViaRedirect":return ot;default:Ye(this.auth,"internal-error")}}resolve(p){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xu=new qe(2e3,1e4);function Wn(w,p,_){return Za.apply(this,arguments)}function Za(){return(Za=(0,m.Z)(function*(w,p,_){const E=It(w);be(w,p,wr);const R=sa(E,_);return new Ya(E,"signInViaPopup",p,R).executeNotNull()})).apply(this,arguments)}function Pu(w,p,_){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);be(E.auth,p,wr);const R=sa(E.auth,_);return new Ya(E.auth,"reauthViaPopup",p,R,E).executeNotNull()})).apply(this,arguments)}function Mh(w,p,_){return oa.apply(this,arguments)}function oa(){return(oa=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);be(E.auth,p,wr);const R=sa(E.auth,_);return new Ya(E.auth,"linkViaPopup",p,R,E).executeNotNull()})).apply(this,arguments)}let Ya=(()=>{class w extends xl{constructor(_,E,R,O,ne){super(_,E,O,ne),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const E=yield _.execute();return ie(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,m.Z)(function*(){Ie(1===_.filter.length,"Popup operations only handle one event");const E=Ko();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,R;this.pollId=null!==(R=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,xu.get())};_()}}return w.currentPopupAction=null,w})();const ai=new Map;class ho extends xl{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,m.Z)(function*(){let E=ai.get(_.auth._key());if(!E){try{const O=(yield function Pl(w,p){return xs.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(O)}catch(R){E=()=>Promise.reject(R)}ai.set(_.auth._key(),E)}return _.bypassAuthState||ai.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const R=yield E.auth._redirectUserForId(p.eventId);if(R)return E.user=R,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function xs(){return(xs=(0,m.Z)(function*(w,p){const _=hs(p),E=fo(w);if(!(yield E._isAvailable()))return!1;const R="true"===(yield E._get(_));return yield E._remove(_),R})).apply(this,arguments)}function Zr(w,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,m.Z)(function*(w,p){return fo(w)._set(hs(p),"true")})).apply(this,arguments)}function Ps(){ai.clear()}function Xn(w,p){ai.set(w._key(),p)}function fo(w){return ee(w._redirectPersistence)}function hs(w){return W("pendingRedirect",w.config.apiKey,w.name)}function Gn(w,p,_){return function An(w,p,_){return ua.apply(this,arguments)}(w,p,_)}function ua(){return(ua=(0,m.Z)(function*(w,p,_){const E=It(w);be(w,p,wr);const R=sa(E,_);return yield Zr(R,E),R._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function b(w,p,_){return function D(w,p,_){return x.apply(this,arguments)}(w,p,_)}function x(){return(x=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);be(E.auth,p,wr);const R=sa(E.auth,_);yield Zr(R,E.auth);const O=yield Mt(E);return R._openRedirect(E.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function j(w,p,_){return function X(w,p,_){return oe.apply(this,arguments)}(w,p,_)}function oe(){return(oe=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);be(E.auth,p,wr);const R=sa(E.auth,_);yield Bi(!1,E,p.providerId),yield Zr(R,E.auth);const O=yield Mt(E);return R._openRedirect(E.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Ae(w,p){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(w,p){return yield It(w)._initializationPromise,ct(w,p,!1)})).apply(this,arguments)}function ct(w,p){return At.apply(this,arguments)}function At(){return(At=(0,m.Z)(function*(w,p,_=!1){const E=It(w),R=sa(E,p),ne=yield new ho(E,R,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield E._persistUserIfCurrent(ne.user),yield E._setRedirectUser(null,p)),ne})).apply(this,arguments)}function Mt(w){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(w){const p=Ko(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class mr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ft(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ms(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!Ms(p)){const R=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,R))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(la(p))}saveEventToCache(p){this.cachedEventUids.add(la(p)),this.lastProcessedEventTime=Date.now()}}function la(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Ms({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function Ii(w){return fs.apply(this,arguments)}function fs(){return(fs=(0,m.Z)(function*(w,p={}){return Bt(w,"GET","/v1/projects",p)})).apply(this,arguments)}const Gi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ca=/^https?/;function Yr(){return(Yr=(0,m.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Ii(w);for(const _ of p)try{if(F_(_))return}catch{}Ye(w,"unauthorized-domain")})).apply(this,arguments)}function F_(w){const p=Be(),{protocol:_,hostname:E}=new URL(p);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===E}if(!ca.test(_))return!1;if(Gi.test(w))return E===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(E)}const Np=new qe(3e4,6e4);function Nh(){const w=$n().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let qn=null;function go(w){return qn=qn||function KI(w){return new Promise((p,_)=>{var E,R,O;function ne(){Nh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Nh(),_(Le(w,"network-request-failed"))},timeout:Np.get()})}if(null!==(R=null===(E=$n().gapi)||void 0===E?void 0:E.iframes)&&void 0!==R&&R.Iframe)p(gapi.iframes.getContext());else{if(null===(O=$n().gapi)||void 0===O||!O.load){const Re=ra("iframefcb");return $n()[Re]=()=>{gapi.load?ne():_(Le(w,"network-request-failed"))},ao(`https://apis.google.com/js/api.js?onload=${Re}`).catch(rt=>_(rt))}ne()}}).catch(p=>{throw qn=null,p})}(w),qn}const kh=new qe(5e3,15e3),Oh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lh(w){const p=w.config;ie(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?ln(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:w.name,v:k.SDK_VERSION},R=U_.get(w.config.apiHost);R&&(E.eid=R);const O=w._getFrameworks();return O.length&&(E.fw=O.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function jc(){return jc=(0,m.Z)(function*(w){const p=yield go(w),_=$n().gapi;return ie(_,w,"internal-error"),p.open({where:document.body,url:Lh(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oh,dontclear:!0},E=>new Promise(function(){var R=(0,m.Z)(function*(O,ne){yield E.restyle({setHideOnLeave:!1});const Re=Le(w,"network-request-failed"),rt=$n().setTimeout(()=>{ne(Re)},kh.get());function bt(){$n().clearTimeout(rt),O(E)}E.ping(bt).then(bt,()=>{ne(Re)})});return function(O,ne){return R.apply(this,arguments)}}()))}),jc.apply(this,arguments)}const Ml={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mu(w,p,_,E,R,O){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:k.SDK_VERSION,eventId:R};if(p instanceof wr){p.setDefaultLanguage(w.languageCode),ne.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(ne.customParameters=JSON.stringify(p.getCustomParameters()));for(const[rt,bt]of Object.entries(O||{}))ne[rt]=bt}if(p instanceof Oo){const rt=p.getScopes().filter(bt=>""!==bt);rt.length>0&&(ne.scopes=rt.join(","))}w.tenantId&&(ne.tid=w.tenantId);const Re=ne;for(const rt of Object.keys(Re))void 0===Re[rt]&&delete Re[rt];return`${function Fp({config:w}){return w.emulator?ln(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(Re).slice(1)}`}const Nu="webStorageSupport",Uh=class kl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rs,this._completeRedirectFn=ct,this._overrideRedirectResult=Xn}_openPopup(p,_,E,R){var O=this;return(0,m.Z)(function*(){var ne;Ie(null===(ne=O.eventManagers[p._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Re=Mu(p,_,E,Be(),R);return function $c(w,p,_,E=500,R=600){const O=Math.max((window.screen.availHeight-R)/2,0).toString(),ne=Math.max((window.screen.availWidth-E)/2,0).toString();let Re="";const rt=Object.assign(Object.assign({},Ml),{width:E.toString(),height:R.toString(),top:O,left:ne}),bt=(0,$.z$)().toLowerCase();_&&(Re=re(bt)?"_blank":_),M(bt)&&(p=p||"http://localhost",rt.scrollbars="yes");const Zt=Object.entries(rt).reduce((Vr,[zi,Gc])=>`${Vr}${zi}=${Gc},`,"");if(function cn(w=(0,$.z$)()){var p;return Ue(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(bt)&&"_self"!==Re)return function _o(w,p){const _=document.createElement("a");_.href=w,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",Re),new Nl(null);const hn=window.open(p||"",Re,Zt);ie(hn,w,"popup-blocked");try{hn.focus()}catch{}return new Nl(hn)}(p,Re,Ko())})()}_openRedirect(p,_,E,R){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(p),function kc(w){$n().location.href=w}(Mu(p,_,E,Be(),R)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:R,promise:O}=this.eventManagers[_];return R?Promise.resolve(R):(Ie(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,m.Z)(function*(){const E=yield function Op(w){return jc.apply(this,arguments)}(p),R=new mr(p);return E.register("authEvent",O=>(ie(O?.authEvent,p,"invalid-auth-event"),{status:R.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:R},_.iframes[p._key()]=E,R})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Nu,{type:Nu},R=>{var O;const ne=null===(O=R?.[0])||void 0===O?void 0:O[Nu];void 0!==ne&&_(!!ne),Ye(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function po(w){return Yr.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return dn()||B()||Ue()}};class Vh extends class Wc{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return le("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Vh(p)}_finalizeEnroll(p,_,E){return function Iu(w,p){return Bt(w,"POST","/v2/accounts/mfaEnrollment:finalize",qt(w,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function ta(w,p){return Bt(w,"POST","/v2/accounts/mfaSignIn:finalize",qt(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ns=(()=>{class w{constructor(){}static assertion(_){return Vh._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var yo="@firebase/auth",Bh="0.20.11";class V_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{var R;p((null===(R=E)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function QI(w){(0,k._registerComponent)(new me.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),R=p.getProvider("heartbeat"),{apiKey:O,authDomain:ne}=E.options;return((Re,rt)=>{ie(O&&!O.includes(":"),"invalid-api-key",{appName:Re.name}),ie(!ne?.includes(":"),"argument-error",{appName:Re.name});const bt={apiKey:O,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(w)},Zt=new xo(Re,rt,bt);return function ae(w,p){const _=p?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ee);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(E,p?.popupRedirectResolver)}(Zt,_),Zt})(E,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new me.wA("auth-internal",p=>{const _=It(p.getProvider("auth").getImmediate());return new V_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(yo,Bh,function YI(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(yo,Bh,"esm2017")}("Browser")},2090:(gt,xe,F)=>{F.d(xe,{$s:()=>tt,BH:()=>Ht,DV:()=>Vn,Dv:()=>Fr,G6:()=>be,GJ:()=>Ui,L:()=>he,LL:()=>tn,Pz:()=>rn,Sg:()=>qe,UG:()=>Te,UI:()=>Vi,US:()=>me,Wj:()=>St,Wl:()=>vr,Yr:()=>Pe,ZB:()=>z,ZR:()=>En,aH:()=>mt,b$:()=>ge,cI:()=>Bt,dS:()=>Ot,eu:()=>ie,g5:()=>k,gK:()=>Yn,gQ:()=>In,h$:()=>pe,hl:()=>ze,hu:()=>$,jU:()=>nt,lb:()=>Rr,m9:()=>Xt,ne:()=>Cn,p$:()=>K,pd:()=>qs,r3:()=>Lr,ru:()=>Ce,tV:()=>we,uI:()=>Ne,ug:()=>$r,vZ:()=>Qe,w1:()=>Ye,w9:()=>Fi,xO:()=>wn,xb:()=>_i,z$:()=>$e,zI:()=>le,zd:()=>pr});const $=function(q,W){if(!q)throw k(W)},k=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},se=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):55296==(64512&M)&&H+1<q.length&&56320==(64512&q.charCodeAt(H+1))?(M=65536+((1023&M)<<10)+(1023&q.charCodeAt(++H)),W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let M=0;M<q.length;M+=3){const B=q[M],re=M+1<q.length,Oe=re?q[M+1]:0,it=M+2<q.length,st=it?q[M+2]:0;let Pt=(15&Oe)<<2|st>>6,cn=63&st;it||(cn=64,re||(Pt=64)),H.push(Y[B>>2],Y[(3&B)<<4|Oe>>4],Y[Pt],Y[cn])}return H.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(se(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let Y=0,H=0;for(;Y<q.length;){const M=q[Y++];if(M<128)W[H++]=String.fromCharCode(M);else if(M>191&&M<224){const B=q[Y++];W[H++]=String.fromCharCode((31&M)<<6|63&B)}else if(M>239&&M<365){const it=((7&M)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;W[H++]=String.fromCharCode(55296+(it>>10)),W[H++]=String.fromCharCode(56320+(1023&it))}else{const B=q[Y++],re=q[Y++];W[H++]=String.fromCharCode((15&M)<<12|(63&B)<<6|63&re)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const Y=W?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let M=0;M<q.length;){const B=Y[q.charAt(M++)],Oe=M<q.length?Y[q.charAt(M)]:0;++M;const st=M<q.length?Y[q.charAt(M)]:64;++M;const Ue=M<q.length?Y[q.charAt(M)]:64;if(++M,null==B||null==Oe||null==st||null==Ue)throw Error();H.push(B<<2|Oe>>4),64!==st&&(H.push(Oe<<4&240|st>>2),64!==Ue&&H.push(st<<6&192|Ue))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},pe=function(q){const W=se(q);return me.encodeByteArray(W,!0)},he=function(q){return pe(q).replace(/\./g,"")},we=function(q){try{return me.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function K(q){return z(void 0,q)}function z(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const Y in W)!W.hasOwnProperty(Y)||!J(Y)||(q[Y]=z(q[Y],W[Y]));return q}function J(q){return"__proto__"!==q}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nt(){return"object"==typeof self&&self.self===self}function Ce(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ye(){const q=$e();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Pe(){return!1}function be(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){return"object"==typeof indexedDB}function ie(){return new Promise((q,W)=>{try{let Y=!0;const H="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(H);M.onsuccess=()=>{M.result.close(),Y||self.indexedDB.deleteDatabase(H),q(!0)},M.onupgradeneeded=()=>{Y=!1},M.onerror=()=>{var B;W((null===(B=M.error)||void 0===B?void 0:B.message)||"")}}catch(Y){W(Y)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ae=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&we(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},mt=()=>{var q;return null===(q=ae())||void 0===q?void 0:q.config},rn=q=>{var W;return null===(W=ae())||void 0===W?void 0:W[`_${q}`]};class Ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Y)=>{this.resolve=W,this.reject=Y})}wrapCallback(W){return(Y,H)=>{Y?this.reject(Y):this.resolve(H),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Y):W(Y,H))}}}function qe(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=W||"demo-project",M=q.iat||0,B=q.sub||q.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const re=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:M,exp:M+3600,auth_time:M,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},q);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(re)),""].join(".")}class En extends Error{constructor(W,Y,H){super(Y),this.code=W,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}}class tn{constructor(W,Y,H){this.service=W,this.serviceName=Y,this.errors=H}create(W,...Y){const H=Y[0]||{},M=`${this.service}/${W}`,B=this.errors[W],re=B?function nn(q,W){return q.replace(qt,(Y,H)=>{const M=W[H];return null!=M?String(M):`<${H}?>`})}(B,H):"Error";return new En(M,`${this.serviceName}: ${re} (${M}).`,H)}}const qt=/\{\$([^}]+)}/g;function Bt(q){return JSON.parse(q)}function vr(q){return JSON.stringify(q)}const Li=function(q){let W={},Y={},H={},M="";try{const B=q.split(".");W=Bt(we(B[0])||""),Y=Bt(we(B[1])||""),M=B[2],H=Y.d||{},delete Y.d}catch{}return{header:W,claims:Y,data:H,signature:M}},Fi=function(q){const Y=Li(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Ui=function(q){const W=Li(q).claims;return"object"==typeof W&&!0===W.admin};function Lr(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function Vn(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function _i(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function Vi(q,W,Y){const H={};for(const M in q)Object.prototype.hasOwnProperty.call(q,M)&&(H[M]=W.call(Y,q[M],M,q));return H}function Qe(q,W){if(q===W)return!0;const Y=Object.keys(q),H=Object.keys(W);for(const M of Y){if(!H.includes(M))return!1;const B=q[M],re=W[M];if(nr(B)&&nr(re)){if(!Qe(B,re))return!1}else if(B!==re)return!1}for(const M of H)if(!Y.includes(M))return!1;return!0}function nr(q){return null!==q&&"object"==typeof q}function wn(q){const W=[];for(const[Y,H]of Object.entries(q))Array.isArray(H)?H.forEach(M=>{W.push(encodeURIComponent(Y)+"="+encodeURIComponent(M))}):W.push(encodeURIComponent(Y)+"="+encodeURIComponent(H));return W.length?"&"+W.join("&"):""}function pr(q){const W={};return q.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[M,B]=H.split("=");W[decodeURIComponent(M)]=decodeURIComponent(B)}}),W}function qs(q){const W=q.indexOf("?");if(!W)return"";const Y=q.indexOf("#",W);return q.substring(W,Y>0?Y:void 0)}class In{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Y){Y||(Y=0);const H=this.W_;if("string"==typeof W)for(let Ue=0;Ue<16;Ue++)H[Ue]=W.charCodeAt(Y)<<24|W.charCodeAt(Y+1)<<16|W.charCodeAt(Y+2)<<8|W.charCodeAt(Y+3),Y+=4;else for(let Ue=0;Ue<16;Ue++)H[Ue]=W[Y]<<24|W[Y+1]<<16|W[Y+2]<<8|W[Y+3],Y+=4;for(let Ue=16;Ue<80;Ue++){const Pt=H[Ue-3]^H[Ue-8]^H[Ue-14]^H[Ue-16];H[Ue]=4294967295&(Pt<<1|Pt>>>31)}let st,Se,M=this.chain_[0],B=this.chain_[1],re=this.chain_[2],Oe=this.chain_[3],it=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(st=Oe^B&(re^Oe),Se=1518500249):(st=B^re^Oe,Se=1859775393):Ue<60?(st=B&re|Oe&(B|re),Se=2400959708):(st=B^re^Oe,Se=3395469782);const Pt=(M<<5|M>>>27)+st+it+Se+H[Ue]&4294967295;it=Oe,Oe=re,re=4294967295&(B<<30|B>>>2),B=M,M=Pt}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+re&4294967295,this.chain_[3]=this.chain_[3]+Oe&4294967295,this.chain_[4]=this.chain_[4]+it&4294967295}update(W,Y){if(null==W)return;void 0===Y&&(Y=W.length);const H=Y-this.blockSize;let M=0;const B=this.buf_;let re=this.inbuf_;for(;M<Y;){if(0===re)for(;M<=H;)this.compress_(W,M),M+=this.blockSize;if("string"==typeof W){for(;M<Y;)if(B[re]=W.charCodeAt(M),++re,++M,re===this.blockSize){this.compress_(B),re=0;break}}else for(;M<Y;)if(B[re]=W[M],++re,++M,re===this.blockSize){this.compress_(B),re=0;break}}this.inbuf_=re,this.total_+=Y}digest(){const W=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&Y,Y/=256;this.compress_(this.buf_);let H=0;for(let M=0;M<5;M++)for(let B=24;B>=0;B-=8)W[H]=this.chain_[M]>>B&255,++H;return W}}function Cn(q,W){const Y=new gn(q,W);return Y.subscribe.bind(Y)}class gn{constructor(W,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{W(this)}).catch(H=>{this.error(H)})}next(W){this.forEachObserver(Y=>{Y.next(W)})}error(W){this.forEachObserver(Y=>{Y.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Y,H){let M;if(void 0===W&&void 0===Y&&void 0===H)throw new Error("Missing Observer.");M=function yt(q,W){if("object"!=typeof q||null===q)return!1;for(const Y of W)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Y,complete:H},void 0===M.next&&(M.next=xt),void 0===M.error&&(M.error=xt),void 0===M.complete&&(M.complete=xt);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),B}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,W)}sendOne(W,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Y(this.observers[W])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xt(){}const Fr=function(q,W,Y,H){let M;if(H<W?M="at least "+W:H>Y&&(M=0===Y?"none":"no more than "+Y),M)throw new Error(q+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+M+".")};function Yn(q,W){return`${q} failed: ${W} argument `}function St(q,W,Y,H){if((!H||Y)&&"function"!=typeof Y)throw new Error(Yn(q,W)+"must be a valid function.")}function Rr(q,W,Y,H){if((!H||Y)&&("object"!=typeof Y||null===Y))throw new Error(Yn(q,W)+"must be a valid context object.")}const Ot=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);if(M>=55296&&M<=56319){const B=M-55296;H++,$(H<q.length,"Surrogate pair missing trail surrogate."),M=65536+(B<<10)+(q.charCodeAt(H)-56320)}M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):M<65536?(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},$r=function(q){let W=0;for(let Y=0;Y<q.length;Y++){const H=q.charCodeAt(Y);H<128?W++:H<2048?W+=2:H>=55296&&H<=56319?(W+=4,Y++):W+=3}return W};function tt(q,W=1e3,Y=2){const H=W*Math.pow(Y,q),M=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+M)}function Xt(q){return q&&q._delegate?q._delegate:q}},885:(gt,xe,F)=>{var m=F(4650);let $=null;function k(){return $}const pe=new m.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function we(){return(0,m.LFG)(z)}()},providedIn:"platform"}),n})();const K=new m.OlP("Location Initialized");let z=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function $e(){return new z((0,m.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Je)},providedIn:"root"}),n})();const ge=new m.OlP("appBaseHref");let Je=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+nt(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+nt(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ye=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+nt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+nt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Te(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=Ne,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(m.LFG(Ce))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Pe(){return new Le((0,m.LFG)(Ce))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}let an=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Js{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Js(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,l),Xs(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Xs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Xs(n,e){n.context.$implicit=e.item}let Bn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new gh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class gh{constructor(){this.$implicit=null,this.ngIf=null}}function rr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Ra=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),l=-1===i.indexOf("-")?void 0:m.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.aQg),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),eo=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:a,ngTemplateOutletInjector:l}=this;this._viewRef=r.createEmbeddedView(i,a,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.TTD]}),n})(),hl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Fo(n){return"server"===n}let Ec=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new mh((0,m.LFG)(pe),window)}),n})();class mh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ir(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vi(this.window.history)||vi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function vi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ss extends class Sc extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){$||($=n)}(new Ss)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ac(){return As=As||document.querySelector("base"),As?As.getAttribute("href"):null}();return null==t?null:function os(n){Rn=Rn||document.createElement("a"),Rn.setAttribute("href",n);const e=Rn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ul(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Rn,As=null;const xn=new m.OlP("TRANSITION_ID"),vl=[{provide:m.ip1,useFactory:function Rc(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[xn,pe,m.zs3],multi:!0}];let wl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Il=new m.OlP("EventManagerPlugins");let El=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Il),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class wu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Go=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),zo=(()=>{class n extends Go{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(xc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(xc))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function xc(n){k().remove(n)}const qo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pc=/%COMP%/g;function Eu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Eu(n,i,t):(i=i.replace(Pc,n),t.push(i))}return t}function Cu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new as(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Nc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new bh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Eu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(El),m.LFG(zo),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class as{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(qo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){($a(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($a(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=qo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Cu(r)):this.eventManager.addEventListener(e,t,Cu(r))}}function $a(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nc extends as{constructor(e,t,r,i){super(e),this.component=r;const a=Eu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Hn(n){return"_ngcontent-%COMP%".replace(Pc,n)}(i+"-"+r.id),this.hostAttr=function Iu(n){return"_nghost-%COMP%".replace(Pc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class bh extends as{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Eu(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let or=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Th=["alt","control","meta","shift"],Rs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wa=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),Th.forEach(v=>{const T=r.indexOf(v);T>-1&&(r.splice(T,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=Rs[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Th.forEach(l=>{l!==i&&(0,Tl[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ga=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Oc(){Ss.makeCurrent()},multi:!0},{provide:pe,useFactory:function Dl(){return(0,m.RDi)(document),document},deps:[]}]),so=new m.OlP(""),za=[{provide:m.rWj,useClass:class Eh{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Zo=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function us(){return new m.qLn},deps:[]},{provide:Il,useClass:or,multi:!0,deps:[pe,m.R0b,m.Lbi]},{provide:Il,useClass:Wa,multi:!0,deps:[pe]},{provide:bu,useClass:bu,deps:[El,zo,m.AFp]},{provide:m.FYo,useExisting:bu},{provide:Go,useExisting:zo},{provide:zo,useClass:zo,deps:[pe]},{provide:El,useClass:El,deps:[Il,m.R0b]},{provide:class Uo{},useClass:wl,deps:[]},[]];let Yo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:xn,useExisting:m.AFp},vl]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(so,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Zo,...za],imports:[hl,m.hGG]}),n})(),Hi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function qa(){return new Hi((0,m.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var on=F(8996),ls=F(7669);function ut(...n){const e=(0,ls.yG)(n);return(0,on.D)(n,e)}var Kr=F(7579);class Dn extends Kr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const uo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Er=F(9751);const{isArray:lo}=Array,{getPrototypeOf:Uc,prototype:Vc,keys:Ph}=Object;var co=F(4671),ot=F(4004);const{isArray:Ka}=Array;var Wn=F(5403),Za=F(9672);function Pu(...n){const e=(0,ls.yG)(n),t=(0,ls.jO)(n),{args:r,keys:i}=function sa(n){if(1===n.length){const e=n[0];if(lo(e))return{args:e,keys:null};if(function Rl(n){return n&&"object"==typeof n&&Uc(n)===Vc}(e)){const t=Ph(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,on.D)([],e);const a=new Er.y(function Bc(n,e,t=co.y){return r=>{Mh(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let g=0;g<i;g++)Mh(e,()=>{const v=(0,on.D)(n[g],e);let T=!1;v.subscribe((0,Wn.x)(r,S=>{a[g]=S,T||(T=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function xu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):co.y));return t?a.pipe(function xl(n){return(0,ot.U)(e=>function Wi(n,e){return Ka(e)?n(...e):n(e)}(n,e))}(t)):a}function Mh(n,e,t){n?(0,Za.f)(t,n,e):e()}var oa=F(8189);function aa(...n){return function Ya(){return(0,oa.J)(1)}()((0,on.D)(n,(0,ls.yG)(n)))}var ai=F(8421);function ho(n){return new Er.y(e=>{(0,ai.Xf)(n()).subscribe(e)})}var Pl=F(9635),xs=F(576);function Zr(n,e){const t=(0,xs.m)(n)?n:()=>n,r=i=>i.error(t());return new Er.y(e?i=>e.schedule(r,0,i):r)}var ds=F(515),Ps=F(727),Xn=F(4482);function fo(){return(0,Xn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class hs extends Er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ps.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ps.w0.EMPTY)}return e}refCount(){return fo()(this)}}function Gn(n,e){return(0,Xn.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,Wn.x)(r,g=>{i?.unsubscribe();let v=0;const T=a++;(0,ai.Xf)(n(g,T)).subscribe(i=(0,Wn.x)(r,S=>r.next(e?e(g,S,T,v++):S),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function An(n){return n<=0?()=>ds.E:(0,Xn.e)((e,t)=>{let r=0;e.subscribe((0,Wn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ua(...n){const e=(0,ls.yG)(n);return(0,Xn.e)((t,r)=>{(e?aa(n,t,e):aa(n,t)).subscribe(r)})}function b(n,e){return(0,Xn.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var D=F(5577);function x(n){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function j(n=X){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function X(){return new uo}function oe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,a)=>n(i,a,r)):co.y,An(1),t?x(e):j(()=>new uo))}function Ae(n,e){return(0,xs.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Ve=F(8505);function ct(n){return(0,Xn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,l=>{a=(0,ai.Xf)(n(l,ct(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function At(n,e,t,r,i){return(a,l)=>{let d=t,g=e,v=0;a.subscribe((0,Wn.x)(l,T=>{const S=v++;g=d?n(g,T,S):(d=!0,T),r&&l.next(g)},i&&(()=>{d&&l.next(g),l.complete()})))}}function Mt(n,e){return(0,Xn.e)(At(n,e,arguments.length>=2,!0))}function vt(n){return n<=0?()=>ds.E:(0,Xn.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,a)=>n(i,a,r)):co.y,vt(1),t?x(e):j(()=>new uo))}function Ms(n){return(0,Xn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ft="primary",Ii=Symbol("RouteTitle");class fs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gi(n){return new fs(n)}function ca(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!F_(n[i],e[i]))return!1;return!0}function F_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Np(n){return Array.prototype.concat.apply([],n)}function Nh(n){return n.length>0?n[n.length-1]:null}function qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function go(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,on.D)(Promise.resolve(n)):ut(n)}const ZI={exact:function Op(n,e,t){if(!_o(n.segments,e.segments)||!mo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Op(n.children[r],e.children[r],t))return!1;return!0},subset:Ml},Oh={exact:function Lh(n,e){return Yr(n,e)},subset:function jc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>F_(n[t],e[t]))},ignored:()=>!0};function U_(n,e,t){return ZI[t.paths](n.root,e.root,t.matrixParams)&&Oh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ml(n,e,t){return Hc(n,e,e.segments,t)}function Hc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!_o(i,t)||e.hasChildren()||!mo(i,t,r))}if(n.segments.length===t.length){if(!_o(n.segments,t)||!mo(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ml(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(_o(n.segments,i)&&mo(n.segments,i,r)&&n.children[Ft])&&Hc(n.children[Ft],e,a,r)}}function mo(n,e,t){return e.every((r,i)=>Oh[t](n[i].parameters,r.parameters))}class Qa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return Fp.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,qn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nu(this)}}class Nl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gi(this.parameters)),this._parameterMap}toString(){return V_(this)}}function _o(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Fh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new Mu},providedIn:"root"}),n})();class Mu{parse(e){const t=new p(e);return new Qa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${kl(e.root,!0)}`,r=function QI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Wc(t)}=${Wc(i)}`).join("&"):`${Wc(t)}=${Wc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Vh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Fp=new Mu;function Nu(n){return n.segments.map(e=>V_(e)).join("/")}function kl(n,e){if(!n.hasChildren())return Nu(n);if(e){const t=n.children[Ft]?kl(n.children[Ft],!1):"",r=[];return qn(n.children,(i,a)=>{a!==Ft&&r.push(`${a}:${kl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Lp(n,e){let t=[];return qn(n.children,(r,i)=>{i===Ft&&(t=t.concat(e(r,i)))}),qn(n.children,(r,i)=>{i!==Ft&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ft?[kl(n.children[Ft],!1)]:[`${i}:${kl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${Nu(n)}/${t[0]}`:`${Nu(n)}/(${t.join("//")})`}}function Uh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wc(n){return Uh(n).replace(/%3B/gi,";")}function Ns(n){return Uh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yo(n){return decodeURIComponent(n)}function Bh(n){return yo(n.replace(/\+/g,"%20"))}function V_(n){return`${Ns(n.path)}${function YI(n){return Object.keys(n).map(e=>`;${Ns(e)}=${Ns(n[e])}`).join("")}(n.parameters)}`}const JI=/^[^\/()?;=#]+/;function jh(n){const e=n.match(JI);return e?e[0]:""}const Hh=/^[^=?&#]+/,XI=/^[^&#]+/;class p{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new Qt(e,t)),r}parseSegment(){const e=jh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new Nl(yo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=jh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=jh(this.remaining);i&&(r=i,this.capture(r))}e[yo(t)]=yo(r)}parseQueryParam(e){const t=function B_(n){const e=n.match(Hh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function w(n){const e=n.match(XI);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Bh(t),a=Bh(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ft);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Ft]:new Qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function _(n){return n.segments.length>0?new Qt([],{[Ft]:n}):n}function E(n){const e={};for(const r of Object.keys(n.children)){const a=E(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function R(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function O(n){return n instanceof Qa}function Zt(n,e,t,r,i){if(0===t.length)return zi(e.root,e.root,e.root,r,i);const a=function qc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return qn(a.outlets,(g,v)=>{d[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new zc(t,e,r)}(t);return a.toRoot()?zi(e.root,e.root,new Qt([],{}),r,i):function l(g){const v=function $h(n,e,t,r){if(n.isAbsolute)return new Ja(e.root,!0,0);if(-1===r)return new Ja(t,t===e.root,0);return function Kc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new Ja(r,!1,i-a)}(t,r+(hn(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,g),T=v.processChildren?da(v.segmentGroup,v.index,a.commands):Ll(v.segmentGroup,v.index,a.commands);return zi(e.root,v.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function hn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Vr(n){return"object"==typeof n&&null!=n&&n.outlets}function zi(n,e,t,r,i){let l,a={};r&&qn(r,(g,v)=>{a[v]=Array.isArray(g)?g.map(T=>`${T}`):`${g}`}),l=n===e?t:Gc(n,e,t);const d=_(E(l));return new Qa(d,a,i)}function Gc(n,e,t){const r={};return qn(n.children,(i,a)=>{r[a]=i===e?t:Gc(i,e,t)}),new Qt(n.segments,r)}class zc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hn(r[0]))throw new m.vHH(4003,!1);const i=r.find(Vr);if(i&&i!==Nh(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ja{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ll(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return da(n,e,t);const r=function j_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(Vr(d))break;const g=`${d}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!Bp(g,v,l))return a;r+=2}else{if(!Bp(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Qt(n.segments.slice(0,r.pathIndex),{});return a.children[Ft]=new Qt(n.segments.slice(r.pathIndex),n.children),da(a,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?Ln(n,e,t):r.match?da(n,0,i):Ln(n,e,t)}function da(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function Ol(n){return Vr(n[0])?n[0].outlets:{[Ft]:n}}(t),i={};return qn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Ll(n.children[l],e,a))}),qn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Qt(n.segments,i)}}function Ln(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Vr(a)){const g=Vp(a.outlets);return new Qt(r,g)}if(0===i&&hn(t[0])){r.push(new Nl(n.segments[e].path,eE(t[0]))),i++;continue}const l=Vr(a)?a.outlets[Ft]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&hn(d)?(r.push(new Nl(l,eE(d))),i+=2):(r.push(new Nl(l,{})),i++)}return new Qt(r,{})}function Vp(n){const e={};return qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ln(new Qt([],{}),0,t))}),e}function eE(n){const e={};return qn(n,(t,r)=>e[r]=`${t}`),e}function Bp(n,e,t){return n==t.path&&Yr(e,t.parameters)}class ha{constructor(e,t){this.id=e,this.url=t}}class H_ extends ha{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fl extends ha{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jp extends ha{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tE extends ha{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uD extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bM extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TM extends ha{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wh extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $_ extends ha{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sE{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class aE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Gh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$p(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $p(e,this._root).map(t=>t.value)}}function Gh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Gh(n,t);if(r)return r}return null}function $p(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$p(n,t);if(r.length)return r.unshift(e),r}return[]}class fa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ks(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class uE extends aE{constructor(e,t){super(e),this.snapshot=t,zh(this,e)}toString(){return this.snapshot.toString()}}function Wp(n,e){const t=function Gp(n,e){const l=new pa([],{},{},"",{},Ft,e,null,n.root,-1,{});return new W_("",new fa(l,[]))}(n,e),r=new Dn([new Nl("",{})]),i=new Dn({}),a=new Dn({}),l=new Dn({}),d=new Dn(""),g=new ku(r,i,l,d,a,Ft,e,t.root);return g.snapshot=t.root,new uE(new fa(g,[]),t)}class ku{constructor(e,t,r,i,a,l,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,ot.U)(v=>v[Ii]))??ut(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>Gi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>Gi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function qp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class pa{constructor(e,t,r,i,a,l,d,g,v,T,S,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.[Ii],this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=T,this._correctedLastPathIndex=P??T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class W_ extends aE{constructor(e,t){super(t),this.url=e,zh(this,t)}toString(){return lE(this._root)}}function zh(n,e){e.value._routerState=n,e.children.forEach(t=>zh(n,t))}function lE(n){const e=n.children.length>0?` { ${n.children.map(lE).join(", ")} } `:"";return`${n.value}${e}`}function G_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yr(e.params,t.params)||n.params.next(t.params),function po(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Kp(n,e){const t=Yr(n.params,e.params)&&function $c(n,e){return _o(n,e)&&n.every((t,r)=>Yr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Kp(n.parent,e.parent))}function qh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cD(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qh(n,r,i);return qh(n,r)})}(n,e,t);return new fa(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>qh(n,d)),l}}const r=function dD(n){return new ku(new Dn(n.url),new Dn(n.params),new Dn(n.queryParams),new Dn(n.fragment),new Dn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>qh(n,a));return new fa(r,i)}}const z_="ngNavigationCancelingError";function Zp(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=O(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cE(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function cE(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[z_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function q_(n){return dE(n)&&O(n.url)}function dE(n){return n&&n[z_]}class hE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Yp,this.attachRef=null}}let Yp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qp=!1;let Ul=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Qp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Qp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Qp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,Qp);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,g=new hD(t,d,i.injector);if(r&&function Yc(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,g)}else this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Yp),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class hD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ku?this.route:e===Yp?this.childContexts:this.parent.get(e,t)}}let Vl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Ul],encapsulation:2}),n})();function fE(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Y_(n){const e=n.children&&n.children.map(Y_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=Vl),t}function Os(n){return n.outlet||Ft}function Jp(n,e){const t=n.filter(r=>Os(r)===e);return t.push(...n.filter(r=>Os(r)!==e)),t}function Xp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Q_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),G_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ks(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),qn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ks(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ks(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ks(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new oE(a.value.snapshot))}),e.children.length&&this.forwardEvent(new lD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(G_(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),G_(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=Xp(i.snapshot),g=d?.get(m._Vd)??null;l.attachRef=null,l.route=i,l.resolver=g,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class pD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class J_{constructor(e,t){this.component=e,this.route=t}}function xM(n,e,t){const r=n._root;return Zh(r,e?e._root:null,t,[r.value])}function Kh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function Zh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ks(e);return n.children.forEach(l=>{(function mE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function X_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_o(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_o(n.url,e.url)||!Yr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kp(n,e)||!Yr(n.queryParams,e.queryParams);default:return!Kp(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new pD(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Zh(n,e,a.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new J_(d.outlet.component,l))}else l&&Qc(e,d,i),i.canActivateChecks.push(new pD(r)),Zh(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),qn(a,(l,d)=>Qc(l,t.getContext(d),i)),i}function Qc(n,e,t){const r=ks(n),i=n.value;qn(r,(a,l)=>{Qc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new J_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Jc(n){return"function"==typeof n}function eg(n){return n instanceof uo||"EmptyError"===n?.name}const tg=Symbol("INITIAL_VALUE");function Xc(){return Gn(n=>Pu(n.map(e=>e.pipe(An(1),ua(tg)))).pipe((0,ot.U)(e=>{for(const t of e)if(!0!==t){if(t===tg)return tg;if(!1===t||t instanceof Qa)return t}return!0}),b(e=>e!==tg),An(1)))}function ui(n){return(0,Pl.z)((0,Ve.b)(e=>{if(O(e))throw Zp(0,e)}),(0,ot.U)(e=>!0===e))}const ng={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rg(n,e,t,r,i){const a=Br(n,e,t);return a.matched?function ry(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ut(i.map(l=>{const d=Kh(l,n);return go(function mD(n){return n&&Jc(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(Xc(),ui()):ut(!0)}(r=fE(e,r),e,t).pipe((0,ot.U)(l=>!0===l?a:{...ng})):ut(a)}function Br(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ng}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ca)(t,n,e);if(!i)return{...ng};const a={};qn(i.posParams,(d,g)=>{a[g]=d.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ou(n,e,t,r,i="corrected"){if(t.length>0&&function DD(n,e,t){return t.some(r=>ig(n,e,r)&&Os(r)!==Ft)}(n,t,r)){const l=new Qt(e,function TD(n,e,t,r){const i={};i[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Os(a)!==Ft){const l=new Qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Os(a)]=l}return i}(n,e,r,new Qt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function wE(n,e,t){return t.some(r=>ig(n,e,r))}(n,t,r)){const l=new Qt(n.segments,function vE(n,e,t,r,i,a){const l={};for(const d of r)if(ig(n,t,d)&&!i[Os(d)]){const g=new Qt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Os(d)]=g}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Qt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function ig(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function iy(n,e,t,r){return!!(Os(n)===r||r!==Ft&&ig(e,t,n))&&("**"===n.path||Br(e,n,t).matched)}function IE(n,e,t){return 0===e.length&&!n.children[t]}const Qh=!1;class sg{constructor(e){this.segmentGroup=e||null}}class EE{constructor(e){this.urlTree=e}}function Jh(n){return Zr(new sg(n))}function CE(n){return Zr(new EE(n))}class AD{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Ou(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ft).pipe((0,ot.U)(a=>this.createUrlTree(E(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ct(a=>{if(a instanceof EE)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof sg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ft).pipe((0,ot.U)(i=>this.createUrlTree(E(i),e.queryParams,e.fragment))).pipe(ct(i=>{throw i instanceof sg?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,Qh)}createUrlTree(e,t,r){const i=_(e);return new Qa(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ot.U)(a=>new Qt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,on.D)(i).pipe(Ae(a=>{const l=r.children[a],d=Jp(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,ot.U)(g=>({segment:g,outlet:a})))}),Mt((a,l)=>(a[l.outlet]=l.segment,a),{}),zn())}expandSegment(e,t,r,i,a,l){return(0,on.D)(r).pipe(Ae(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(ct(v=>{if(v instanceof sg)return ut(null);throw v}))),oe(d=>!!d),ct((d,g)=>{if(eg(d))return IE(t,i,a)?ut(new Qt([],{})):Jh(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return iy(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Jh(t):Jh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?CE(a):this.lineralizeSegments(r,a).pipe((0,D.z)(l=>{const d=new Qt(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:g,remainingSegments:v,positionalParamSegments:T}=Br(t,i,a);if(!d)return Jh(t);const S=this.applyRedirectCommands(g,i.redirectTo,T);return i.redirectTo.startsWith("/")?CE(S):this.lineralizeSegments(i,S).pipe((0,D.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=fE(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ot.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Qt(i,{})))):ut(new Qt(i,{}))):rg(t,r,i,e).pipe(Gn(({matched:l,consumedSegments:d,remainingSegments:g})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,D.z)(T=>{const S=T.injector??e,P=T.routes,{segmentGroup:V,slicedSegments:G}=Ou(t,d,g,P),ce=new Qt(V.segments,V.children);if(0===G.length&&ce.hasChildren())return this.expandChildren(S,P,ce).pipe((0,ot.U)(lt=>new Qt(d,lt)));if(0===P.length&&0===G.length)return ut(new Qt(d,{}));const ye=Os(r)===a;return this.expandSegment(S,ce,P,G,ye?Ft:a,!0).pipe((0,ot.U)(ht=>new Qt(d.concat(ht.segments),ht.children)))})):Jh(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function bD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ut(!0):ut(i.map(l=>{const d=Kh(l,n);return go(function ey(n){return n&&Jc(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(Xc(),ui())}(e,t,r).pipe((0,D.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ve.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function ed(n){return Zr(cE(Qh,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[Ft])return Zr(new m.vHH(4e3,Qh));i=i.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Qa(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return qn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return qn(t.children,(d,g)=>{l[g]=this.createSegmentGroup(e,d,r,i)}),new Qt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,Qh);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class NM{}class ga{constructor(e,t,r,i,a,l,d,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=g}recognize(){const e=Ou(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ft).pipe((0,ot.U)(t=>{if(null===t)return null;const r=new pa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fa(r,t),a=new W_(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=zp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,on.D)(Object.keys(r.children)).pipe(Ae(i=>{const a=r.children[i],l=Jp(t,i);return this.processSegmentGroup(e,l,a,i)}),Mt((i,a)=>i&&a?(i.push(...a),i):null),function mr(n,e=!1){return(0,Xn.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),x(null),zn(),(0,ot.U)(i=>{if(null===i)return null;const a=uy(i);return function oy(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,on.D)(t).pipe(Ae(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),oe(l=>!!l),ct(l=>{if(eg(l))return IE(r,i,a)?ut([]):ut(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!iy(t,r,i,a))return ut(null);let l;if("**"===t.path){const d=i.length>0?Nh(i).parameters:{},g=TE(r)+i.length;l=ut({snapshot:new pa(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,og(t),Os(t),t.component??t._loadedComponent??null,t,td(r),g,ag(t),g),consumedSegments:[],remainingSegments:[]})}else l=rg(r,t,i,e).pipe((0,ot.U)(({matched:d,consumedSegments:g,remainingSegments:v,parameters:T})=>{if(!d)return null;const S=TE(r)+g.length;return{snapshot:new pa(g,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,og(t),Os(t),t.component??t._loadedComponent??null,t,td(r),S,ag(t),S),consumedSegments:g,remainingSegments:v}}));return l.pipe(Gn(d=>{if(null===d)return ut(null);const{snapshot:g,consumedSegments:v,remainingSegments:T}=d;e=t._injector??e;const S=t._loadedInjector??e,P=function ay(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:G}=Ou(r,v,T,P.filter(ye=>void 0===ye.redirectTo),this.relativeLinkResolution);if(0===G.length&&V.hasChildren())return this.processChildren(S,P,V).pipe((0,ot.U)(ye=>null===ye?null:[new fa(g,ye)]));if(0===P.length&&0===G.length)return ut([new fa(g,[])]);const ce=Os(t)===a;return this.processSegment(S,P,V,G,ce?Ft:a).pipe((0,ot.U)(ye=>null===ye?null:[new fa(g,ye)]))}))}}function xD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uy(n){const e=[],t=new Set;for(const r of n){if(!xD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=uy(r.children);e.push(new fa(r.value,i))}return e.filter(r=>!t.has(r))}function td(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function TE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function og(n){return n.data||{}}function ag(n){return n.resolve||{}}function ug(n){return"string"==typeof n.title||null===n.title}function cy(n){return Gn(e=>{const t=n(e);return t?(0,on.D)(t).pipe((0,ot.U)(()=>e)):ut(e)})}let RE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ft);return r}getResolvedTitleForRoute(t){return t.data[Ii]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(xE)},providedIn:"root"}),n})(),xE=(()=>{class n extends RE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Hi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ND{}class PE extends class kD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Xh=new m.OlP("",{providedIn:"root",factory:()=>({})}),hy=new m.OlP("ROUTES");let fy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=go(t.loadComponent()).pipe((0,Ve.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Ms(()=>{this.componentLoaders.delete(t)})),i=new hs(r,()=>new Kr.x).pipe(fo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ot.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,v,T=!1;Array.isArray(d)?v=d:(g=d.create(t).injector,v=Np(g.get(hy,[],m.XFs.Self|m.XFs.Optional)));return{routes:v.map(Y_),injector:g}}),Ms(()=>{this.childrenLoaders.delete(r)})),l=new hs(a,()=>new Kr.x).pipe(fo());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return go(t()).pipe((0,D.z)(r=>r instanceof m.YKP||Array.isArray(r)?ut(r):(0,on.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ME{}class NE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kE(n){throw n}function OE(n,e,t){return e.parse("/")}const OD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function LE(){const n=(0,m.f3M)(Fh),e=(0,m.f3M)(Yp),t=(0,m.f3M)(Le),r=(0,m.f3M)(m.zs3),i=(0,m.f3M)(m.Sil),a=(0,m.f3M)(hy,{optional:!0})??[],l=(0,m.f3M)(Xh,{optional:!0})??{},d=(0,m.f3M)(xE),g=(0,m.f3M)(RE,{optional:!0}),v=(0,m.f3M)(ME,{optional:!0}),T=(0,m.f3M)(ND,{optional:!0}),S=new Cr(null,n,e,t,r,i,Np(a));return v&&(S.urlHandlingStrategy=v),T&&(S.routeReuseStrategy=T),S.titleStrategy=g??d,function cg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let Cr=(()=>{class n{constructor(t,r,i,a,l,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kr.x,this.errorHandler=kE,this.malformedUriErrorHandler=OE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ut(void 0),this.urlHandlingStrategy=new NE,this.routeReuseStrategy=new PE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(fy),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new rE(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new nE(P)),this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const S=l.get(m.R0b);this.isNgZoneEnabled=S instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function kp(){return new Qa(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Wp(this.currentUrlTree,this.rootComponentType),this.transitions=new Dn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(b(i=>0!==i.id),(0,ot.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Gn(i=>{let a=!1,l=!1;return ut(i).pipe((0,Ve.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Gn(d=>{const g=this.browserUrlTree.toString(),v=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return py(d.source)&&(this.browserUrlTree=d.extractedUrl),ut(d).pipe(Gn(S=>{const P=this.transitions.getValue();return r.next(new H_(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?ds.E:Promise.resolve(S)}),function RD(n,e,t,r){return Gn(i=>function Xa(n,e,t,r,i){return new AD(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ot.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ve.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function SE(n,e,t,r,i,a){return(0,D.z)(l=>function kM(n,e,t,r,i,a,l="emptyOnly",d="legacy"){return new ga(n,e,t,r,i,l,d,a).recognize().pipe(Gn(g=>null===g?function bE(n){return new Er.y(e=>e.error(n))}(new NM):ut(g)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,ot.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ve.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new uD(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:G,restoredState:ce,extras:ye}=d,at=new H_(P,this.serializeUrl(V),G,ce);r.next(at);const ht=Wp(V,this.rootComponentType).snapshot;return ut(i={...d,targetSnapshot:ht,urlAfterRedirects:V,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),ds.E}),(0,Ve.b)(d=>{const g=new bM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,ot.U)(d=>i={...d,guards:xM(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function yD(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ut({...t,guardsResult:!0}):function vD(n,e,t,r){return(0,on.D)(n).pipe((0,D.z)(i=>function CD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ut(a.map(d=>{const g=Xp(e)??i,v=Kh(d,g);return go(function Yh(n){return n&&Jc(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(oe())})).pipe(Xc()):ut(!0)}(i.component,i.route,t,e,r)),oe(i=>!0!==i,!0))}(l,r,i,n).pipe((0,D.z)(d=>d&&function _E(n){return"boolean"==typeof n}(d)?function ny(n,e,t,r){return(0,on.D)(e).pipe(Ae(i=>aa(function ID(n,e){return null!==n&&e&&e(new iE(n)),ut(!0)}(i.route.parent,r),function wD(n,e){return null!==n&&e&&e(new sE(n)),ut(!0)}(i.route,r),function yE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function PM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ho(()=>ut(l.guards.map(g=>{const v=Xp(l.node)??t,T=Kh(g,v);return go(function ty(n){return n&&Jc(n.canActivateChild)}(T)?T.canActivateChild(r,n):v.runInContext(()=>T(r,n))).pipe(oe())})).pipe(Xc())));return ut(a).pipe(Xc())}(n,i.path,t),function ED(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(a=>ho(()=>{const l=Xp(e)??t,d=Kh(a,l);return go(function gD(n){return n&&Jc(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(oe())}));return ut(i).pipe(Xc())}(n,i.route,t))),oe(i=>!0!==i,!0))}(r,a,n,e):ut(d)),(0,ot.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ve.b)(d=>{if(i.guardsResult=d.guardsResult,O(d.guardsResult))throw Zp(0,d.guardsResult);const g=new TM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),b(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),cy(d=>{if(d.guards.canActivateChecks.length)return ut(d).pipe((0,Ve.b)(g=>{const v=new Wh(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),Gn(g=>{let v=!1;return ut(g).pipe(function OM(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let a=0;return(0,on.D)(i).pipe(Ae(l=>function nd(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!ug(i)&&(a[Ii]=i.title),function ly(n,e,t,r){const i=function AE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ut({});const a={};return(0,on.D)(i).pipe((0,D.z)(l=>function MD(n,e,t,r){const i=Xp(e)??r,a=Kh(n,i);return go(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(oe(),(0,Ve.b)(d=>{a[l]=d}))),vt(1),function la(n){return(0,ot.U)(()=>n)}(a),ct(l=>eg(l)?ds.E:Zr(l)))}(a,n,e,r).pipe((0,ot.U)(l=>(n._resolvedData=l,n.data=zp(n,t).resolve,i&&ug(i)&&(n.data[Ii]=i.title),null)))}(l.route,r,n,e)),(0,Ve.b)(()=>a++),vt(1),(0,D.z)(l=>a===i.length?ut(t):ds.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ve.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Ve.b)(g=>{const v=new $_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),cy(d=>{const g=v=>{const T=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Ve.b)(S=>{v.component=S}),(0,ot.U)(()=>{})));for(const S of v.children)T.push(...g(S));return T};return Pu(g(d.targetSnapshot.root)).pipe(x(),An(1))}),cy(()=>this.afterPreactivation()),(0,ot.U)(d=>{const g=function Zc(n,e,t){const r=qh(n,e._root,t?t._root:void 0);return new uE(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:g}}),(0,Ve.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(r=>(new Q_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ve.b)({next(){a=!0},complete(){a=!0}}),Ms(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ct(d=>{if(l=!0,dE(d)){q_(d)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new jp(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(g),q_(d)){const v=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||py(i.source)};this.scheduleNavigation(v,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new tE(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(d))}catch(v){i.reject(v)}}return ds.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Y_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:g}=r,v=i||this.routerState.root,T=g?this.currentUrlTree.fragment:l;let S=null;switch(d){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Zt(v,this.currentUrlTree,t,S,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=O(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function FE(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...OD}:!1===r?{...FM}:r,O(t))return U_(this.currentUrlTree,t,i);const a=this.parseUrl(t);return U_(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Fl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let d,g,v;l?(d=l.resolve,g=l.reject,v=l.promise):v=new Promise((P,V)=>{d=P,g=V});const T=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:T,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new jp(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return LE()},providedIn:"root"}),n})();function py(n){return"imperative"!==n}class gy{}let my=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(b(t=>t instanceof Fl),Ae(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,d=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,on.D)(i).pipe((0,oa.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const a=i.pipe((0,D.z)(l=>null===l?ut(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,on.D)([a,l]).pipe((0,oa.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Cr),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(gy),m.LFG(fy))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bl=new m.OlP("");let VE=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof H_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Hp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function jl(n,e){return{\u0275kind:n,\u0275providers:e}}function nf(n){return[{provide:hy,multi:!0,useValue:n}]}function UD(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Cr),i=n.get(_y);1===n.get(yy)&&r.initialNavigation(),n.get(Ls,null,m.XFs.Optional)?.setUpPreloading(),n.get(Bl,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const _y=new m.OlP("",{factory:()=>new Kr.x}),yy=new m.OlP("",{providedIn:"root",factory:()=>1});const Ls=new m.OlP("");function jD(n){return jl(0,[{provide:Ls,useExisting:my},{provide:gy,useExisting:n}])}const HE=new m.OlP("ROUTER_FORROOT_GUARD"),$D=[Le,{provide:Fh,useClass:Mu},{provide:Cr,useFactory:LE},Yp,{provide:ku,useFactory:function BE(n){return n.routerState.root},deps:[Cr]},fy];function $E(){return new m.PXZ("Router",Cr)}let WE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[$D,[],nf(t),{provide:HE,useFactory:GE,deps:[[Cr,new m.FiY,new m.tp0]]},{provide:Xh,useValue:r||{}},r?.useHash?{provide:Ce,useClass:Ye}:{provide:Ce,useClass:Je},{provide:Bl,useFactory:()=>{const n=(0,m.f3M)(Cr),e=(0,m.f3M)(Ec),t=(0,m.f3M)(Xh);return t.scrollOffset&&e.setOffset(t.scrollOffset),new VE(n,e,t)}},r?.preloadingStrategy?jD(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:$E},r?.initialNavigation?zE(r):[],[{provide:vy,useFactory:UD},{provide:m.tb,multi:!0,useExisting:vy}]]}}static forChild(t){return{ngModule:n,providers:[nf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(HE,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Vl]}),n})();function GE(n){return"guarded"}function zE(n){return["disabled"===n.initialNavigation?jl(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Cr);return()=>{e.setUpLocationChangeListener()}}},{provide:yy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?jl(2,[{provide:yy,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(Cr),d=e.get(_y);(function i(a){e.get(Cr).events.pipe(b(d=>d instanceof Fl||d instanceof jp||d instanceof tE),(0,ot.U)(d=>d instanceof Fl||d instanceof jp&&(0===d.code||1===d.code)&&null),b(d=>null!==d),An(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||d.closed?ut(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const vy=new m.OlP("");let qE={warnLogin:{severity:"warn",summary:"Warn",detail:"Efetue o Login"}};var qD=F(8247),L=F(2090),Ei=F(9681),vo=F(1877),_a=F(4859),gg=F(6451),rf=F(5363),Hl=F(6063);class KD extends Kr.x{constructor(e=1/0,t=1/0,r=Hl.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)d=g;d&&r.splice(0,d+1)}}}var mg=F(3099);function _g(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,mg.B)({connector:()=>new KD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function KE(n,e){return(0,xs.m)(e)?Gn(()=>n,e):Gn(()=>n)}var ZE=F(9468),mn=F(5813),jr=F(2011);F(5867);var Ee=F(5861);const af=new Map,XD={activated:!1,tokenObservers:[]},Ey={initialized:!1,enabled:!1};function Qr(n){return af.get(n)||Object.assign({},XD)}function eu(){return Ey}class by{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function tu(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const li=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tS(n){if(!Qr(n).activated)throw li.create("use-before-activation",{appName:n.name})}function sd(n,e){return od.apply(this,arguments)}function od(){return(od=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const d={method:"POST",body:JSON.stringify(e),headers:a};let g,v;try{g=yield fetch(n,d)}catch(V){throw li.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==g.status)throw li.create("fetch-status-error",{httpStatus:g.status});try{v=yield g.json()}catch(V){throw li.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const T=v.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(T[1]),P=Date.now();return{token:v.token,expireTimeMillis:P+S,issuedAtTimeMillis:P}})).apply(this,arguments)}function Ry(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const uf="firebase-app-check-store";let Ig=null;function xy(){return Ig||(Ig=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(li.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(uf,{keyPath:"compositeKey"})}}catch(r){e(li.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Ig)}function My(){return(My=(0,Ee.Z)(function*(n,e){const r=(yield xy()).transaction(uf,"readwrite"),a=r.objectStore(uf).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var v;d(li.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Cg=new vo.Yd("@firebase/app-check");function r0(n,e){return(0,L.hl)()?function rS(n,e){return function Py(n,e){return My.apply(this,arguments)}(function iS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Cg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sS(){return eu().enabled}function oS(){return ya.apply(this,arguments)}function ya(){return(ya=(0,Ee.Z)(function*(){const n=eu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const aS={error:"UNKNOWN_ERROR"};function o0(n){return L.US.encodeString(JSON.stringify(n),!1)}function ad(n){return bg.apply(this,arguments)}function bg(){return(bg=(0,Ee.Z)(function*(n,e=!1){const t=n.app;tS(t);const r=Qr(t);let a,i=r.token;if(i&&!ud(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(ud(g)?i=g:yield r0(t,void 0))}if(!e&&i&&ud(i))return{token:i.token};let d,l=!1;if(sS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sd(Ry(t,yield oS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield r0(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Qr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?Cg.warn(g.message):Cg.error(g),a=g}return i?a?d=ud(i)?{token:i.token,internalError:a}:Oy(a):(d={token:i.token},r.token=i,yield r0(t,i)):d=Oy(a),l&&u0(t,d),d})).apply(this,arguments)}function ky(n,e){const t=Qr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nu(n){const{app:e}=n,t=Qr(e);let r=t.tokenRefresher;r||(r=function a0(n){const{app:e}=n;return new by((0,Ee.Z)(function*(){let r;if(r=Qr(e).token?yield ad(n,!0):yield ad(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function u0(n,e){const t=Qr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ud(n){return n.expireTimeMillis-Date.now()>0}function Oy(n){return{token:o0(aS),error:n}}class uS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qr(this.app);for(const t of e)ky(this.app,t.next);return Promise.resolve()}}const $y="app-check-internal";!function hS(){(0,Ei._registerComponent)(new _a.wA("app-check",n=>function lS(n,e){return new uS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($y).initialize()})),(0,Ei._registerComponent)(new _a.wA($y,n=>function Tg(n){return{getToken:e=>ad(n,e),addTokenListener:e=>function lf(n,e,t,r){const{app:i}=n,a=Qr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&ud(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),nu(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>nu(n))}(n,"INTERNAL",e),removeTokenListener:e=>ky(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ei.registerVersion)("@firebase/app-check","0.5.17")}();class dd{constructor(){return(0,mn.vb)("app-check")}}typeof window<"u"&&window;var Pg=F(127);const zy=new m.OlP("angularfire2.auth.use-emulator"),qy=new m.OlP("angularfire2.auth.settings"),hd=new m.OlP("angularfire2.auth.tenant-id"),df=new m.OlP("angularfire2.auth.langugage-code"),fd=new m.OlP("angularfire2.auth.use-device-language"),m0=new m.OlP("angularfire.auth.persistence"),hf=(n,e,t,r,i,a,l,d)=>(0,jr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[v,T]of Object.entries(l))g.settings[v]=T;return d&&g.setPersistence(d),g},[t,r,i,a,l,d]);let Mg=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S,P,V){const G=new Kr.x,ce=ut(void 0).pipe((0,rf.Q)(l.outsideAngular),Gn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,ot.U)(()=>(0,jr.on)(t,a,r)),(0,ot.U)(ye=>hf(ye,a,d,v,T,S,g,P)),_g({bufferSize:1,refCount:!1}));if(Fo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{ce.pipe(oe()).subscribe();const at=ce.pipe(Gn(pt=>pt.getRedirectResult().then(Rt=>Rt,()=>null)),mn.iC,_g({bufferSize:1,refCount:!1})),ht=ce.pipe(Gn(pt=>new Er.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>pt.onAuthStateChanged(jt=>Rt.next(jt),jt=>Rt.error(jt),()=>Rt.complete()))})))),lt=ce.pipe(Gn(pt=>new Er.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>pt.onIdTokenChanged(jt=>Rt.next(jt),jt=>Rt.error(jt),()=>Rt.complete()))}))));this.authState=at.pipe(KE(ht),(0,ZE.R)(l.outsideAngular),(0,rf.Q)(l.insideAngular)),this.user=at.pipe(KE(lt),(0,ZE.R)(l.outsideAngular),(0,rf.Q)(l.insideAngular)),this.idToken=this.user.pipe(Gn(pt=>pt?(0,on.D)(pt.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(Gn(pt=>pt?(0,on.D)(pt.getIdTokenResult()):ut(null))),this.credential=(0,gg.T)(at,G,this.authState.pipe(b(pt=>!pt))).pipe((0,ot.U)(pt=>pt?.user?pt:null),(0,ZE.R)(l.outsideAngular),(0,rf.Q)(l.insideAngular))}return(0,jr.pX)(this,ce,a,{spy:{apply:(ye,at,ht)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&ht.then(lt=>G.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(jr.Dh),m.LFG(jr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(zy,8),m.LFG(qy,8),m.LFG(hd,8),m.LFG(df,8),m.LFG(fd,8),m.LFG(m0,8),m.LFG(dd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_0=(()=>{class n{constructor(){Pg.Z.registerVersion("angularfire",mn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Mg]}),n})(),pd=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r}googleLogin(){return this.afAuth.signInWithPopup(new qD.Q).then(t=>{localStorage[n.tokenKey]=t.credential.accessToken,localStorage[n.userUidKey]=t?.user?.uid,this.router.navigate([""])}).catch(t=>{this.router.navigate(["/login"])})}logout(){return localStorage.removeItem(n.tokenKey),localStorage.removeItem(n.userUidKey),this.afAuth.signOut()}}return n.tokenKey="userToken",n.userUidKey="userUid",n.\u0275fac=function(t){return new(t||n)(m.LFG(Mg),m.LFG(Cr))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iu(n,e){return{type:7,name:n,definitions:e,options:{}}}function ff(n,e=null){return{type:4,styles:e,timings:n}}function v0(n){return{type:6,styles:n,offset:null}}function I0(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}let ci=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),bS=(()=>{class n{constructor(){this.messageSource=new Kr.x,this.clearSource=new Kr.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(t){t&&this.messageSource.next(t)}addAll(t){t&&t.length&&this.messageSource.next(t)}clear(t){this.clearSource.next(t||null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Og=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[ci.STARTS_WITH,ci.CONTAINS,ci.NOT_CONTAINS,ci.ENDS_WITH,ci.EQUALS,ci.NOT_EQUALS],numeric:[ci.EQUALS,ci.NOT_EQUALS,ci.LESS_THAN,ci.LESS_THAN_OR_EQUAL_TO,ci.GREATER_THAN,ci.GREATER_THAN_OR_EQUAL_TO],date:[ci.DATE_IS,ci.DATE_IS_NOT,ci.DATE_BEFORE,ci.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Kr.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),md=(()=>{class n{constructor(t){this.template=t}getType(){return this.name}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),qi=(()=>{class n{static addClass(t,r){t&&r&&(t.classList?t.classList.add(r):t.className+=" "+r)}static addMultipleClasses(t,r){if(t&&r)if(t.classList){let i=r.trim().split(" ");for(let a=0;a<i.length;a++)t.classList.add(i[a])}else{let i=r.split(" ");for(let a=0;a<i.length;a++)t.className+=" "+i[a]}}static removeClass(t,r){t&&r&&(t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,r){return!(!t||!r)&&(t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return t?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,i=0;for(var a=0;a<r.length;a++){if(r[a]==t)return i;1==r[a].nodeType&&i++}return-1}static indexWithinGroup(t,r){let i=t.parentNode?t.parentNode.childNodes:[],a=0;for(var l=0;l<i.length;l++){if(i[l]==t)return a;i[l].attributes&&i[l].attributes[r]&&1==i[l].nodeType&&a++}return-1}static appendOverlay(t,r,i="self"){"self"!==i&&t&&r&&this.appendChild(t,r)}static alignOverlay(t,r,i="self",a=!0){t&&r&&(a&&(t.style.minWidth||(t.style.minWidth=n.getOuterWidth(r)+"px")),"self"===i?this.relativePosition(t,r):this.absolutePosition(t,r))}static relativePosition(t,r){const i=ce=>{if(ce)return"relative"===getComputedStyle(ce).getPropertyValue("position")?ce:i(ce.parentElement)},a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),l=r.offsetHeight,d=r.getBoundingClientRect(),g=this.getWindowScrollTop(),v=this.getWindowScrollLeft(),T=this.getViewport(),P=i(t)?.getBoundingClientRect()||{top:-1*g,left:-1*v};let V,G;d.top+l+a.height>T.height?(V=d.top-P.top-a.height,t.style.transformOrigin="bottom",d.top+V<0&&(V=-1*d.top)):(V=l+d.top-P.top,t.style.transformOrigin="top"),G=a.width>T.width?-1*(d.left-P.left):d.left-P.left+a.width>T.width?-1*(d.left-P.left+a.width-T.width):d.left-P.left,t.style.top=V+"px",t.style.left=G+"px"}static absolutePosition(t,r){const i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),a=i.height,l=i.width,d=r.offsetHeight,g=r.offsetWidth,v=r.getBoundingClientRect(),T=this.getWindowScrollTop(),S=this.getWindowScrollLeft(),P=this.getViewport();let V,G;v.top+d+a>P.height?(V=v.top+T-a,t.style.transformOrigin="bottom",V<0&&(V=T)):(V=d+v.top+T,t.style.transformOrigin="top"),G=v.left+l>P.width?Math.max(0,v.left+S+g-l):v.left+S,t.style.top=V+"px",t.style.left=G+"px"}static getParents(t,r=[]){return null===t.parentNode?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let i=this.getParents(t);const a=/(auto|scroll)/,l=d=>{let g=window.getComputedStyle(d,null);return a.test(g.getPropertyValue("overflow"))||a.test(g.getPropertyValue("overflowX"))||a.test(g.getPropertyValue("overflowY"))};for(let d of i){let g=1===d.nodeType&&d.dataset.scrollselectors;if(g){let v=g.split(",");for(let T of v){let S=this.findSingle(d,T);S&&l(S)&&r.push(S)}}9!==d.nodeType&&l(d)&&r.push(d)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let i=getComputedStyle(t).getPropertyValue("borderTopWidth"),a=i?parseFloat(i):0,l=getComputedStyle(t).getPropertyValue("paddingTop"),d=l?parseFloat(l):0,g=t.getBoundingClientRect(),T=r.getBoundingClientRect().top+document.body.scrollTop-(g.top+document.body.scrollTop)-a-d,S=t.scrollTop,P=t.clientHeight,V=this.getOuterHeight(r);T<0?t.scrollTop=S+T:T+V>P&&(t.scrollTop=S+T-P+V)}static fadeIn(t,r){t.style.opacity=0;let i=+new Date,a=0,l=function(){a=+t.style.opacity.replace(",",".")+((new Date).getTime()-i)/r,t.style.opacity=a,i=+new Date,+a<1&&(window.requestAnimationFrame&&requestAnimationFrame(l)||setTimeout(l,16))};l()}static fadeOut(t,r){var i=1,d=50/r;let g=setInterval(()=>{(i-=d)<=0&&(i=0,clearInterval(g)),t.style.opacity=i},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(l){return-1!==[].indexOf.call(document.querySelectorAll(l),this)}).call(t,r)}static getOuterWidth(t,r){let i=t.offsetWidth;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginLeft)+parseFloat(a.marginRight)}return i}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(t,r){let i=t.offsetHeight;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginTop)+parseFloat(a.marginBottom)}return i}static getHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let t=window,r=document,i=r.documentElement,a=r.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||a.clientWidth,height:t.innerHeight||i.clientHeight||a.clientHeight}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let i=t.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot append "+r+" to "+t;r.el.nativeElement.appendChild(t)}}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot remove "+t+" from "+r;r.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,i){t[r].apply(t,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,r){t&&document.activeElement!==t&&t.focus(r)}static getFocusableElements(t){let r=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),i=[];for(let a of r)"none"!=getComputedStyle(a).display&&"hidden"!=getComputedStyle(a).visibility&&i.push(a);return i}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,r){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:const i=typeof t;if("string"===i)return document.querySelector(t);if("object"===i&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const l=(d=t)&&d.constructor&&d.call&&d.apply?t():t;return l&&9===l.nodeType||this.isExist(l)?l:null}var d}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})(),_d=(()=>{class n{constructor(t,r,i){this.el=t,this.zone=r,this.config=i}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let r=this.getInk();if(!r||"none"===getComputedStyle(r,null).display)return;if(qi.removeClass(r,"p-ink-active"),!qi.getHeight(r)&&!qi.getWidth(r)){let d=Math.max(qi.getOuterWidth(this.el.nativeElement),qi.getOuterHeight(this.el.nativeElement));r.style.height=d+"px",r.style.width=d+"px"}let i=qi.getOffset(this.el.nativeElement),a=t.pageX-i.left+document.body.scrollTop-qi.getWidth(r)/2,l=t.pageY-i.top+document.body.scrollLeft-qi.getHeight(r)/2;r.style.top=l+"px",r.style.left=a+"px",qi.addClass(r,"p-ink-active"),this.timeout=setTimeout(()=>{let d=this.getInk();d&&qi.removeClass(d,"p-ink-active")},401)}getInk(){for(let t=0;t<this.el.nativeElement.children.length;t++)if(-1!==this.el.nativeElement.children[t].className.indexOf("p-ink"))return this.el.nativeElement.children[t];return null}resetInk(){let t=this.getInk();t&&qi.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),qi.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),qi.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(Og,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),Jr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[hl]}),n})();function $l(n,e){if(1&n&&m._UZ(0,"span",11),2&n){const t=m.oxw(2).$implicit;m.Q6J("innerHTML",t.summary,m.oJD)}}function Lg(n,e){if(1&n&&m._UZ(0,"span",12),2&n){const t=m.oxw(2).$implicit;m.Q6J("innerHTML",t.detail,m.oJD)}}function Fs(n,e){if(1&n&&(m.ynx(0),m.YNc(1,$l,1,1,"span",9),m.YNc(2,Lg,1,1,"span",10),m.BQk()),2&n){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",t.summary),m.xp6(1),m.Q6J("ngIf",t.detail)}}function Zy(n,e){if(1&n&&(m.TgZ(0,"span",15),m._uU(1),m.qZA()),2&n){const t=m.oxw(2).$implicit;m.xp6(1),m.Oqu(t.summary)}}function yd(n,e){if(1&n&&(m.TgZ(0,"span",16),m._uU(1),m.qZA()),2&n){const t=m.oxw(2).$implicit;m.xp6(1),m.Oqu(t.detail)}}function vd(n,e){if(1&n&&(m.YNc(0,Zy,2,1,"span",13),m.YNc(1,yd,2,1,"span",14)),2&n){const t=m.oxw().$implicit;m.Q6J("ngIf",t.summary),m.xp6(1),m.Q6J("ngIf",t.detail)}}function wd(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"button",17),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().index,a=m.oxw(2);return m.KtG(a.removeMessage(i))}),m._UZ(1,"i",18),m.qZA()}}const Id=function(n,e){return{showTransitionParams:n,hideTransitionParams:e}},Ed=function(n){return{value:"visible",params:n}},Cd=function(n,e,t,r){return{"pi-info-circle":n,"pi-check":e,"pi-exclamation-triangle":t,"pi-times-circle":r}};function bd(n,e){if(1&n&&(m.TgZ(0,"div",4)(1,"div",5),m._UZ(2,"span",6),m.YNc(3,Fs,3,2,"ng-container",1),m.YNc(4,vd,2,2,"ng-template",null,7,m.W1O),m.YNc(6,wd,2,0,"button",8),m.qZA()()),2&n){const t=e.$implicit,r=m.MAs(5),i=m.oxw(2);m.Tol("p-message p-message-"+t.severity),m.Q6J("@messageAnimation",m.VKq(12,Ed,m.WLB(9,Id,i.showTransitionOptions,i.hideTransitionOptions))),m.xp6(2),m.Tol("p-message-icon pi"+(t.icon?" "+t.icon:"")),m.Q6J("ngClass",m.l5B(14,Cd,"info"===t.severity,"success"===t.severity,"warn"===t.severity,"error"===t.severity)),m.xp6(1),m.Q6J("ngIf",!i.escape)("ngIfElse",r),m.xp6(3),m.Q6J("ngIf",i.closable)}}function Td(n,e){if(1&n&&(m.ynx(0),m.YNc(1,bd,7,19,"div",3),m.BQk()),2&n){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.value)}}function Dd(n,e){1&n&&m.GkF(0)}function b0(n,e){if(1&n&&(m.TgZ(0,"div",19)(1,"div",5),m.YNc(2,Dd,1,0,"ng-container",20),m.qZA()()),2&n){const t=m.oxw();m.Q6J("ngClass","p-message p-message-"+t.severity),m.xp6(2),m.Q6J("ngTemplateOutlet",t.contentTemplate)}}let T0=(()=>{class n{constructor(t,r,i){this.messageService=t,this.el=r,this.cd=i,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new m.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(t=>{if(t){if(t instanceof Array){let r=t.filter(i=>this.key===i.key);this.value=this.value?[...this.value,...r]:[...r]}else this.key===t.key&&(this.value=this.value?[...this.value,t]:[t]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(t=>{t?this.key===t&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let t=this.el.nativeElement.parentElement;return!(!t||!t.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(t){this.value=this.value.filter((r,i)=>i!==t),this.valueChange.emit(this.value)}get icon(){const t=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(t){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(bS,8),m.Y36(m.SBq),m.Y36(m.sBO))},n.\u0275cmp=m.Xpm({type:n,selectors:[["p-messages"]],contentQueries:function(t,r,i){if(1&t&&m.Suo(i,md,4),2&t){let a;m.iGM(a=m.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(t,r){if(1&t&&(m.TgZ(0,"div",0),m.YNc(1,Td,2,1,"ng-container",1),m.YNc(2,b0,3,2,"ng-template",null,2,m.W1O),m.qZA()),2&t){const i=m.MAs(3);m.Tol(r.styleClass),m.Q6J("ngStyle",r.style),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate)("ngIfElse",i)}},dependencies:[an,bs,Bn,eo,Ra,_d],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[iu("messageAnimation",[I0(":enter",[v0({opacity:0,transform:"translateY(-25%)"}),ff("{{showTransitionParams}}")]),I0(":leave",[ff("{{hideTransitionParams}}",v0({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),n})(),D0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[hl,Jr]}),n})();function S0(n,e){1&n&&m.GkF(0)}const A0=function(n,e,t,r){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":e,"p-button-icon-top":t,"p-button-icon-bottom":r}};function R0(n,e){if(1&n&&m._UZ(0,"span",4),2&n){const t=m.oxw();m.Tol(t.loading?"p-button-loading-icon "+t.loadingIcon:t.icon),m.Q6J("ngClass",m.l5B(4,A0,"left"===t.iconPos&&t.label,"right"===t.iconPos&&t.label,"top"===t.iconPos&&t.label,"bottom"===t.iconPos&&t.label)),m.uIk("aria-hidden",!0)}}function x0(n,e){if(1&n&&(m.TgZ(0,"span",5),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.uIk("aria-hidden",t.icon&&!t.label),m.xp6(1),m.Oqu(t.label)}}function P0(n,e){if(1&n&&(m.TgZ(0,"span",4),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.Tol(t.badgeClass),m.Q6J("ngClass",t.badgeStyleClass()),m.xp6(1),m.Oqu(t.badge)}}const M0=function(n,e,t,r,i){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":e,"p-disabled":t,"p-button-loading":r,"p-button-loading-label-only":i}},TS=["*"];let N0=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new m.vpe,this.onFocus=new m.vpe,this.onBlur=new m.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(t,r,i){if(1&t&&m.Suo(i,md,4),2&t){let a;m.iGM(a=m.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:TS,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(t,r){1&t&&(m.F$t(),m.TgZ(0,"button",0),m.NdJ("click",function(a){return r.onClick.emit(a)})("focus",function(a){return r.onFocus.emit(a)})("blur",function(a){return r.onBlur.emit(a)}),m.Hsn(1),m.YNc(2,S0,1,0,"ng-container",1),m.YNc(3,R0,1,9,"span",2),m.YNc(4,x0,2,2,"span",3),m.YNc(5,P0,2,4,"span",2),m.qZA()),2&t&&(m.Tol(r.styleClass),m.Q6J("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",m.qbA(11,M0,r.icon&&!r.label,("top"===r.iconPos||"bottom"===r.iconPos)&&r.label,r.disabled||r.loading,r.loading,r.loading&&!r.icon&&r.label)),m.uIk("type",r.type)("aria-label",r.ariaLabel),m.xp6(2),m.Q6J("ngTemplateOutlet",r.contentTemplate),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate&&(r.icon||r.loading)),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate&&r.label),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate&&r.badge))},dependencies:[an,Bn,eo,Ra,_d],encapsulation:2,changeDetection:0}),n})(),DS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[hl,Jr]}),n})();function k0(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"span")(1,"p-messages",8),m.NdJ("valueChange",function(i){m.CHM(t);const a=m.oxw();return m.KtG(a.msgsWarn=i)}),m.qZA()()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("value",t.msgsWarn)}}const Fg=[{path:"login",component:(()=>{class n{constructor(t,r){this.route=t,this.loginSerice=r,this.error=!1,this.msgs=[],this.msgsWarn=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{1==t.error?(this.error=!0,this.msgsWarn=[qE.warnLogin]):this.error=!1})}loginGoogle(){this.loginSerice.googleLogin().then()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ku),m.Y36(pd))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","align-items-center"],[1,"padding-login","grid","justify-content-center"],[1,"login-box","login","col-6","justify-content-center"],["src","assets/OrelhaSeca.png",1,"login-logo"],[1,"text-center"],[4,"ngIf"],[3,"value","valueChange"],[1,"login-button"],["type","button","label","Google",1,"",3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m._UZ(5,"img",5),m.TgZ(6,"div",6),m.YNc(7,k0,2,1,"span",7),m.TgZ(8,"p-messages",8),m.NdJ("valueChange",function(a){return r.msgs=a}),m.qZA()(),m.TgZ(9,"div",9)(10,"p-button",10),m.NdJ("click",function(){return r.loginGoogle()}),m.qZA()()()()()()()),2&t&&(m.xp6(7),m.Q6J("ngIf",r.error),m.xp6(1),m.Q6J("value",r.msgs))},dependencies:[Bn,T0,N0],styles:[".login-box[_ngcontent-%COMP%]{width:100%;height:100%;max-width:500px;text-align:center}.login[_ngcontent-%COMP%]{background:rgb(255,255,255);justify-content:center;align-items:center;border-left-color:#010c29;border-right-color:#010c29;border-bottom-color:#010c29;border-top-color:#010c29;border-style:solid;border-radius:5px;border-width:2px}.login-logo[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:20px;width:90%;max-width:400px}.padding-login[_ngcontent-%COMP%]{padding-top:100px;align-items:center;align-content:center;align-self:center}.text-center[_ngcontent-%COMP%]{text-align:center}.login-button[_ngcontent-%COMP%]{text-align:center;padding-top:1em;padding-bottom:2em}.login-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em}.menu-container[_ngcontent-%COMP%]{background-color:#fff;max-width:1900px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:1810px;padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;min-height:100%}"]}),n})()},{path:"home",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,consts:[[2,"font-size","2px"]],template:function(t,r){1&t&&(m.TgZ(0,"p",0),m._uU(1,"Comi o c\xfa de quem est\xe1 lendo"),m.qZA())}}),n})(),canActivate:[(()=>{class n{constructor(t){this.router=t}canActivate(t,r){return localStorage,console.log(localStorage[pd.tokenKey]),null==localStorage[pd.tokenKey]?(this.router.navigate(["/login"]),!1):"null"!=localStorage[pd.tokenKey]||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Cr))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"",redirectTo:"/home",pathMatch:"full"}];let Qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[WE.forRoot(Fg,{useHash:!0}),WE]}),n})(),SS=(()=>{class n{constructor(){this.title="hacka-sicredi"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Ul]}),n})();const pf_firebaseConfig={apiKey:"AIzaSyBNnuRVZ0vTs6I6iR_0gMMYWRoeD4HDl4k",authDomain:"hackasic.firebaseapp.com",projectId:"hackasic",storageBucket:"hackasic.appspot.com",messagingSenderId:"807324039482",appId:"1:807324039482:web:cf01e5d1b2a95f48e73803",measurementId:"G-DY0F90L8QH"};var Sd=F(4986);function Ug(n,e=co.y){return n=n??F0,(0,Xn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Wn.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function F0(n,e){return n===e}var Jy=F(5032);F(5881);var Vg=F(3942);const j0="@firebase/database",Xy="0.13.10";let Bg="";function ev(n){Bg=n}class H0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class AS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new H0(e)}}catch{}return new AS},Lu=tv("localStorage"),jg=tv("sessionStorage"),Fu=new vo.Yd("@firebase/database"),nv=function(){let n=1;return function(){return n++}}(),rv=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Ad=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ad.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let Uu=null,iv=!0;const sv=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Fu.logLevel=vo.in.VERBOSE,Uu=Fu.log.bind(Fu),e&&jg.set("logging_enabled",!0)):"function"==typeof n?Uu=n:(Uu=null,jg.remove("logging_enabled"))},Pr=function(...n){if(!0===iv&&(iv=!1,null===Uu&&!0===jg.get("logging_enabled")&&sv(!0)),Uu){const e=Ad.apply(null,n);Uu(e)}},Rd=function(n){return function(...e){Pr(n,...e)}},$0=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ad(...n);Fu.error(e)},va=function(...n){const e=`FIREBASE FATAL ERROR: ${Ad(...n)}`;throw Fu.error(e),new Error(e)},di=function(...n){const e="FIREBASE WARNING: "+Ad(...n);Fu.warn(e)},Hg=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},wa="[MIN_NAME]",Ia="[MAX_NAME]",Wl=function(n,e){if(n===e)return 0;if(n===wa||e===Ia)return-1;if(e===wa||n===Ia)return 1;{const t=mf(n),r=mf(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},G0=function(n,e){return n===e?0:n<e?-1:1},gf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},$g=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=$g(n[e[r]]);return t+="}",t},ov=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const z0=function(n){(0,L.hu)(!Hg(n),"Invalid JSON number");const r=1023;let i,a,l,d,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const T=v.join("");let S="";for(g=0;g<64;g+=8){let P=parseInt(T.substr(g,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},K0=new RegExp("^-?(0*)\\d{1,10}$"),PS=-2147483648,Wg=2147483647,mf=function(n){if(K0.test(n)){const e=Number(n);if(e>=PS&&e<=Wg)return e}return null},Ci=function(n){try{n()}catch(e){setTimeout(()=>{throw di("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xd=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Ea{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){di(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Io{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Pr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',di(e)}}let bi=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const J0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lv="websocket",X0="long_polling";class zg{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yf(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===lv)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==X0)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function eC(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ar(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class NS{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const qg={},Kg={};function vf(n){const e=n.toString();return qg[e]||(qg[e]=new NS),qg[e]}class tC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ci(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Vu{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rd(e),this.stats_=vf(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),yf(t,X0,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new tC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gv((...a)=>{const[l,d,g,v,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&J0.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vu.forceAllow_=!0}static forceDisallow(){Vu.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Vu.forceAllow_&&(Vu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=ov(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gv{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=nv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gv.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Pr("frame writing exception"),d.stack&&Pr(d.stack),Pr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Pr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Pr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Zg=null;typeof MozWebSocket<"u"?Zg=MozWebSocket:typeof WebSocket<"u"&&(Zg=WebSocket);let Md=(()=>{class n{constructor(t,r,i,a,l,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rd(this.connId),this.stats_=vf(r),this.connURL=n.connectionURL_(r,d,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&J0.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),yf(t,lv,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lu.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Bg}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new Zg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Zg&&!n.forceDisallow_}static previouslyFailed(){return Lu.isInMemoryStorage||!0===Lu.get("previous_websocket_failure")}markConnectionHealthy(){Lu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=ov(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),aC=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Vu,Md]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Md&&Md.isAvailable();let i=r&&!Md.previouslyFailed();if(t.webSocketOnly&&(r||di("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Md];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class fC{constructor(e,t,r,i,a,l,d,g,v,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rd("c:"+this.id+":"),this.transportManager_=new aC(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=gf("t",e),r=gf("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=gf("t",e),r=gf("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=gf("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?$0("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&di("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Gl{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class zS{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Nd extends zS{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nd}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class _n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new _n("")}function Ge(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ju(n){return n.pieces_.length-n.pieceNum_}function Pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _n(n.pieces_,e)}function Ev(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function wf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function If(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _n(e,0)}function Mn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new _n(t,0)}function wt(n){return n.pieceNum_>=n.pieces_.length}function Ki(n,e){const t=Ge(n),r=Ge(e);if(null===t)return e;if(t===r)return Ki(Pn(n),Pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function pC(n,e){const t=wf(n,0),r=wf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Wl(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Qg(n,e){if(ju(n)!==ju(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Us(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ju(n)>ju(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class gC{constructor(e,t){this.errorPrefix_=t,this.parts_=wf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);Cv(this)}}function Cv(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zl(n))}function zl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class bv extends zS{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new bv}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ef=1e3;let $u,Hu=(()=>{class n extends Gl{constructor(t,r,i,a,l,d,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Rd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ef,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bv.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Nd.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const g=d.d;"ok"===d.s?r.resolve(g):r.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const v=g.d,T=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();di(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):$0("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ef,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ef,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ef),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,v=null;const T=function(){v?v.close():(g=!0,a())};t.realtime_={close:T,sendRequest:function(V){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,G]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);g?Pr("getToken() completed but was canceled"):(Pr("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=G&&G.token,v=new fC(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{di(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(V){t.log_("Failed to get token: "+V),g||(t.repoInfo_.nodeAdmin&&di(V),T())}}})()}interrupt(t){Pr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ef,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>$g(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new _n(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Pr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Pr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Bg.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Nd.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class Xg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new en(wa,e),i=new en(wa,t);return 0!==this.compare(r,i)}minPost(){return en.MIN}}class Od extends Xg{static get __EMPTY_NODE(){return $u}static set __EMPTY_NODE(e){$u=e}compare(e,t){return Wl(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(Ia,$u)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,$u)}toString(){return".key"}}const Ca=new Od;class em{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let tm,Eo=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ti.EMPTY_NODE,this.right=l??Ti.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ti.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ti.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ti{constructor(e,t=Ti.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ti(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Eo.BLACK,null,null))}remove(e){return new Ti(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Eo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new em(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new em(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new em(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new em(this.root_,null,this.comparator_,!0,e)}}function wC(n,e){return Wl(n.name,e.name)}function Dv(n,e){return Wl(n,e)}Ti.EMPTY_NODE=new class vC{copy(e,t,r,i,a){return this}insert(e,t,r){return new Eo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const IC=function(n){return"number"==typeof n?"number:"+z0(n):"string:"+n},QS=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===tm||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===tm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let JS,XS,Sv,bf=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),QS(this.priorityNode_)}static set __childrenNodeConstructor(t){JS=t}static get __childrenNodeConstructor(){return JS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return wt(t)?this:".priority"===Ge(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ge(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===ju(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+IC(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?z0(this.value_):this.value_,this.lazyHash_=rv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Nn=new class tA extends Xg{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Wl(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(Ia,new bf("[PRIORITY-POST]",Sv))}makePost(e,t){const r=XS(e);return new en(t,new bf("[PRIORITY-POST]",r))}toString(){return".priority"}},Tf=Math.log(2);class nA{constructor(e){this.count=parseInt(Math.log(e+1)/Tf,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rm=function(n,e,t,r){n.sort(e);const i=function(g,v){const T=v-g;let S,P;if(0===T)return null;if(1===T)return S=n[g],P=t?t(S):S,new Eo(P,S.node,Eo.BLACK,null,null);{const V=parseInt(T/2,10)+g,G=i(g,V),ce=i(V+1,v);return S=n[V],P=t?t(S):S,new Eo(P,S.node,Eo.BLACK,G,ce)}},d=function(g){let v=null,T=null,S=n.length;const P=function(G,ce){const ye=S-G,at=S;S-=G;const ht=i(ye+1,at),lt=n[ye],pt=t?t(lt):lt;V(new Eo(pt,lt.node,ce,null,ht))},V=function(G){v?(v.left=G,v=G):(T=G,v=G)};for(let G=0;G<g.count;++G){const ce=g.nextBitIsOne(),ye=Math.pow(2,g.count-(G+1));ce?P(ye,Eo.BLACK):(P(ye,Eo.BLACK),P(ye,Eo.RED))}return T}(new nA(n.length));return new Ti(r||e,d)};let Av;const Ld={};class ou{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(Ld&&Nn,"ChildrenNode.ts has not been loaded"),Av=Av||new ou({".priority":Ld},{".priority":Nn}),Av}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ti?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Ca,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(en.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?rm(r,e.getCompare()):Ld;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const T=Object.assign({},this.indexes_);return T[g]=d,new ou(T,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const l=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(l,"Missing index implementation for "+a),i===Ld){if(l.isDefinedOn(e.node)){const d=[],g=t.getIterator(en.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&d.push(v),v=g.getNext();return d.push(e),rm(d,l.getCompare())}return Ld}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new en(e.name,d))),g.insert(e,e.node)}});return new ou(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===Ld)return i;{const a=t.get(e.name);return a?i.remove(new en(e.name,a)):i}});return new ou(r,this.indexSet_)}}let Fd,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&QS(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fd||(Fd=new n(new Ti(Dv),null,ou.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fd}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Fd:r}}getChild(t){const r=Ge(t);return null===r?this:this.getImmediateChild(r).getChild(Pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new en(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?Fd:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=Ge(t);if(null===i)return r;{(0,L.hu)(".priority"!==Ge(t)||1===ju(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Pn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Nn,(d,g)=>{r[d]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+IC(this.getPriority().val())+":"),this.forEachChild(Nn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":rv(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new en(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new en(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new en(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,en.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===au?-1:0}withIndex(t){if(t===Ca||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ca||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Nn),a=r.getIterator(Nn);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ca?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const au=new class rA extends Wt{constructor(){super(new Ti(Dv),Wt.EMPTY_NODE,ou.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function er(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new bf(n,er(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return ar(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=er(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(er(e))}{const t=[];let r=!1;if(ar(n,(l,d)=>{if("."!==l.substring(0,1)){const g=er(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new en(l,g)))}}),0===t.length)return Wt.EMPTY_NODE;const a=rm(t,wC,l=>l.name,Dv);if(r){const l=rm(t,Nn.getCompare());return new Wt(a,er(e),new ou({".priority":l},{".priority":Nn}))}return new Wt(a,er(e),ou.Default)}}Object.defineProperties(en,{MIN:{value:new en(wa,Wt.EMPTY_NODE)},MAX:{value:new en(Ia,au)}}),Od.__EMPTY_NODE=Wt.EMPTY_NODE,bf.__childrenNodeConstructor=Wt,function YS(n){tm=n}(au),function eA(n){Sv=n}(au),function nm(n){XS=n}(er);class Rv extends Xg{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!wt(e)&&".priority"!==Ge(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Wl(e.name,t.name):a}makePost(e,t){const r=er(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new en(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,au);return new en(Ia,e)}toString(){return wf(this.indexPath_,0).join("/")}}const xv=new class EC extends Xg{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Wl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const r=er(e);return new en(t,r)}toString(){return".value"}},ql="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bC=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=ql.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=ql.charAt(e[i]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),Mv=function(n){if(n===""+Wg)return"-";const e=mf(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ia;const a=ql.charAt(ql.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},TC=function(n){if(n===""+PS)return wa;const e=mf(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Wg:(delete t[t.length-1],t.join("")):(t[t.length-1]=ql.charAt(ql.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function DC(n){return{type:"value",snapshotNode:n}}function Ud(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Kl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Df(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Nv{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Kl(t,d)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Ud(t,r)):l.trackChildChange(Df(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Nn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Kl(i,a))}),t.isLeafNode()||t.forEachChild(Nn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Df(i,a,l))}else r.trackChildChange(Ud(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Sf{constructor(e){this.indexedFilter_=new Nv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Sf.getStartPost_(e),this.endPost_=Sf.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new en(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(Nn,(l,d)=>{a.matches(new en(l,d))||(i=i.updateImmediateChild(l,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class sA{constructor(e){this.rangedFilter_=new Sf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new en(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let a,l,d,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();d=(P,V)=>S(V,P)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let v=0,T=!1;for(;g.hasNext();){const S=g.getNext();!T&&d(a,S)<=0&&(T=!0),T&&v<this.limit_&&d(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,V)=>S(V,P)}else l=this.index_.getCompare();const d=e;(0,L.hu)(d.numChildren()===this.limit_,"");const g=new en(t,r),v=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),T=this.rangedFilter_.matches(g);if(d.hasChild(t)){const S=d.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||d.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:l(P,g);if(T&&!r.isEmpty()&&V>=0)return a?.trackChildChange(Df(t,r,S)),d.updateImmediateChild(t,r);{a?.trackChildChange(Kl(t,S));const ce=d.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(Ud(P.name,P.node)),ce.updateImmediateChild(P.name,P.node)):ce}}return r.isEmpty()?e:T&&l(v,g)>=0?(null!=a&&(a.trackChildChange(Kl(v.name,v.node)),a.trackChildChange(Ud(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(v.name,Wt.EMPTY_NODE)):e}}class sm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wa}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ia}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nn}copy(){const e=new sm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kv(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function om(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function am(n,e){const t=n.copy();return t.index_=e,t}function Ov(n){const e={};if(n.isDefault())return e;let t;return n.index_===Nn?t="$priority":n.index_===xv?t="$value":n.index_===Ca?t="$key":((0,L.hu)(n.index_ instanceof Rv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function RC(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Nn&&(e.i=n.index_.toString()),e}class um extends Gl{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Rd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=um.getListenId_(e,r),d={};this.listens_[l]=d;const g=Ov(e._queryParams);this.restRequest_(a+".json",g,(v,T)=>{let S=T;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,l)===d){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=um.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Ov(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,L.cI)(d.responseText)}catch{di("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&di("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class cA{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Vd(){return{value:null,children:new Map}}function Wu(n,e,t){if(wt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ge(e);n.children.has(r)||n.children.set(r,Vd()),Wu(n.children.get(r),e=Pn(e),t)}}function lm(n,e){if(wt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Nn,(r,i)=>{Wu(n,new _n(r),i)}),lm(n,e)}}if(n.children.size>0){const t=Ge(e);return e=Pn(e),n.children.has(t)&&lm(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Af(n,e,t){null!==n.value?t(e,n.value):function dA(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Af(i,new _n(e.toString()+"/"+r),t)})}class hA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ar(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Bd{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hA(e);const r=1e4+2e4*Math.random();xd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ar(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),xd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gs=(()=>{return(n=gs||(gs={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",gs;var n})();function dm(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class jd{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=gs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(wt(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _n(e));return new jd(yn(),t,this.revert)}}return(0,L.hu)(Ge(this.path)===e,"operationForChild called for unrelated child."),new jd(Pn(this.path),this.affectedTree,this.revert)}}class Rf{constructor(e,t){this.source=e,this.path=t,this.type=gs.LISTEN_COMPLETE}operationForChild(e){return wt(this.path)?new Rf(this.source,yn()):new Rf(this.source,Pn(this.path))}}class uu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=gs.OVERWRITE}operationForChild(e){return wt(this.path)?new uu(this.source,yn(),this.snap.getImmediateChild(e)):new uu(this.source,Pn(this.path),this.snap)}}class Hd{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=gs.MERGE}operationForChild(e){if(wt(this.path)){const t=this.children.subtree(new _n(e));return t.isEmpty()?null:t.value?new uu(this.source,yn(),t.value):new Hd(this.source,yn(),t)}return(0,L.hu)(Ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hd(this.source,Pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class lu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(wt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Fv{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $d(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,g)=>function NC(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new en(e.childName,e.snapshotNode),i=new en(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),l.forEach(d=>{const g=function MC(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(v=>{v.respondsTo(d.type)&&e.push(v.createEvent(g,n.query_))})})}function hm(n,e){return{eventCache:n,serverCache:e}}function xf(n,e,t,r){return hm(new lu(e,t,r),n.serverCache)}function kC(n,e,t,r){return hm(n.eventCache,new lu(e,t,r))}function fm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Gu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let OC;class Fn{constructor(e,t=(()=>(OC||(OC=new Ti(G0)),OC))()){this.value=e,this.children=t}static fromObject(e){let t=new Fn(null);return ar(e,(r,i)=>{t=t.set(new _n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(wt(e))return null;{const r=Ge(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Pn(e),t);return null!=a?{path:Mn(new _n(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(wt(e))return this;{const t=Ge(e),r=this.children.get(t);return null!==r?r.subtree(Pn(e)):new Fn(null)}}set(e,t){if(wt(e))return new Fn(t,this.children);{const r=Ge(e),a=(this.children.get(r)||new Fn(null)).set(Pn(e),t),l=this.children.insert(r,a);return new Fn(this.value,l)}}remove(e){if(wt(e))return this.children.isEmpty()?new Fn(null):new Fn(null,this.children);{const t=Ge(e),r=this.children.get(t);if(r){const i=r.remove(Pn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Fn(null):new Fn(this.value,a)}return this}}get(e){if(wt(e))return this.value;{const t=Ge(e),r=this.children.get(t);return r?r.get(Pn(e)):null}}setTree(e,t){if(wt(e))return t;{const r=Ge(e),a=(this.children.get(r)||new Fn(null)).setTree(Pn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Fn(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Mn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(wt(e))return null;{const a=Ge(e),l=this.children.get(a);return l?l.findOnPath_(Pn(e),Mn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(wt(e))return this;{this.value&&r(t,this.value);const i=Ge(e),a=this.children.get(i);return a?a.foreachOnPath_(Pn(e),Mn(t,i),r):new Fn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Mn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Co{constructor(e){this.writeTree_=e}static empty(){return new Co(new Fn(null))}}function pm(n,e,t){if(wt(e))return new Co(new Fn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ki(i,e);return a=a.updateChild(l,t),new Co(n.writeTree_.set(i,a))}{const i=new Fn(t),a=n.writeTree_.setTree(e,i);return new Co(a)}}}function FC(n,e,t){let r=n;return ar(t,(i,a)=>{r=pm(r,Mn(e,i),a)}),r}function UC(n,e){if(wt(e))return Co.empty();{const t=n.writeTree_.setTree(e,new Fn(null));return new Co(t)}}function Uv(n,e){return null!=Zl(n,e)}function Zl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ki(t.path,e)):null}function Vv(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nn,(r,i)=>{e.push(new en(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new en(r,i.value))}),e}function cu(n,e){if(wt(e))return n;{const t=Zl(n,e);return new Co(null!=t?new Fn(t):n.writeTree_.subtree(e))}}function Bv(n){return n.writeTree_.isEmpty()}function Yl(n,e){return jv(yn(),n.writeTree_,e)}function jv(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=jv(Mn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Mn(n,".priority"),r)),t}}function gm(n,e){return ym(e,n)}function VC(n,e){if(n.snap)return Us(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Us(Mn(n.path,t),e))return!0;return!1}function jC(n){return n.visible}function Hv(n,e,t){let r=Co.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)Us(t,l)?(d=Ki(t,l),r=pm(r,d,a.snap)):Us(l,t)&&(d=Ki(l,t),r=pm(r,yn(),a.snap.getChild(d)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Us(t,l))d=Ki(t,l),r=FC(r,d,a.children);else if(Us(l,t))if(d=Ki(l,t),wt(d))r=FC(r,yn(),a.children);else{const g=(0,L.DV)(a.children,Ge(d));if(g){const v=g.getChild(Pn(d));r=pm(r,yn(),v)}}}}}return r}function $v(n,e,t,r,i){if(r||i){const a=cu(n.visibleWrites,e);return!i&&Bv(a)?t:i||null!=t||Uv(a,yn())?Yl(Hv(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Us(v.path,e)||Us(e,v.path))},e),t||Wt.EMPTY_NODE):null}{const a=Zl(n.visibleWrites,e);if(null!=a)return a;{const l=cu(n.visibleWrites,e);return Bv(l)?t:null!=t||Uv(l,yn())?Yl(l,t||Wt.EMPTY_NODE):null}}}function mm(n,e,t,r){return $v(n.writeTree,n.treePath,e,t,r)}function Wv(n,e){return function yA(n,e,t){let r=Wt.EMPTY_NODE;const i=Zl(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Nn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=cu(n.visibleWrites,e);return t.forEachChild(Nn,(l,d)=>{const g=Yl(cu(a,new _n(l)),d);r=r.updateImmediateChild(l,g)}),Vv(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return Vv(cu(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function Wd(n,e,t,r){return function vA(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Mn(e,t);if(Uv(n.visibleWrites,a))return null;{const l=cu(n.visibleWrites,a);return Bv(l)?i.getChild(t):Yl(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function _m(n,e){return function wA(n,e){return Zl(n.visibleWrites,e)}(n.writeTree,Mn(n.treePath,e))}function Vs(n,e,t){return function TN(n,e,t,r){const i=Mn(e,t),a=Zl(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Yl(cu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function HC(n,e){return ym(Mn(n.treePath,e),n.writeTree)}function ym(n,e){return{treePath:n,writeTree:e}}class Mf{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Df(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Kl(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Ud(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Df(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const $C=new class CA{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class zv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new lu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vs(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gu(this.viewCache_),a=function Gv(n,e,t,r,i,a){return function IA(n,e,t,r,i,a,l){let d;const g=cu(n.visibleWrites,e),v=Zl(g,yn());if(null!=v)d=v;else{if(null==t)return[];d=Yl(g,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const T=[],S=l.getCompare(),P=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let V=P.getNext();for(;V&&T.length<i;)0!==S(V,r)&&T.push(V),V=P.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function qv(n,e,t,r,i,a){const l=e.eventCache;if(null!=_m(r,t))return e;{let d,g;if(wt(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Gu(e),S=Wv(r,v instanceof Wt?v:Wt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=mm(r,Gu(e));d=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Ge(t);if(".priority"===v){(0,L.hu)(1===ju(t),"Can't have a priority with additional path components");const T=l.getNode();g=e.serverCache.getNode();const S=Wd(r,t,T,g);d=null!=S?n.filter.updatePriority(T,S):l.getNode()}else{const T=Pn(t);let S;if(l.isCompleteForChild(v)){g=e.serverCache.getNode();const P=Wd(r,t,l.getNode(),g);S=null!=P?l.getNode().getImmediateChild(v).updateChild(T,P):l.getNode().getImmediateChild(v)}else S=Vs(r,v,e.serverCache);d=null!=S?n.filter.updateChild(l.getNode(),v,S,T,i,a):l.getNode()}}return xf(e,d,l.isFullyInitialized()||wt(t),n.filter.filtersNodes())}}function Nf(n,e,t,r,i,a,l,d){const g=e.serverCache;let v;const T=l?n.filter:n.filter.getIndexedFilter();if(wt(t))v=T.updateFullNode(g.getNode(),r,null);else if(T.filtersNodes()&&!g.isFiltered()){const V=g.getNode().updateChild(t,r);v=T.updateFullNode(g.getNode(),V,null)}else{const V=Ge(t);if(!g.isCompleteForPath(t)&&ju(t)>1)return e;const G=Pn(t),ye=g.getNode().getImmediateChild(V).updateChild(G,r);v=".priority"===V?T.updatePriority(g.getNode(),ye):T.updateChild(g.getNode(),V,ye,G,$C,null)}const S=kC(e,v,g.isFullyInitialized()||wt(t),T.filtersNodes());return qv(n,S,t,i,new zv(i,S,a),d)}function kf(n,e,t,r,i,a,l){const d=e.eventCache;let g,v;const T=new zv(i,e,a);if(wt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=xf(e,v,!0,n.filter.filtersNodes());else{const S=Ge(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=xf(e,v,d.isFullyInitialized(),d.isFiltered());else{const P=Pn(t),V=d.getNode().getImmediateChild(S);let G;if(wt(P))G=r;else{const ce=T.getCompleteChild(S);G=null!=ce?".priority"===Ev(P)&&ce.getChild(If(P)).isEmpty()?ce:ce.updateChild(P,r):Wt.EMPTY_NODE}g=V.equals(G)?e:xf(e,n.filter.updateChild(d.getNode(),S,G,P,T,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function Kv(n,e){return n.eventCache.isCompleteForChild(e)}function WC(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function GC(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=wt(t)?r:new Fn(null).setTree(t,r);const T=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(T.hasChild(S)){const G=WC(0,e.serverCache.getNode().getImmediateChild(S),P);g=Nf(n,g,new _n(S),G,i,a,l,d)}}),v.children.inorderTraversal((S,P)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!T.hasChild(S)&&!V){const ce=WC(0,e.serverCache.getNode().getImmediateChild(S),P);g=Nf(n,g,new _n(S),ce,i,a,l,d)}}),g}class Qv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Nv(r.getIndex()),a=function oA(n){return n.loadsAllData()?new Nv(n.getIndex()):n.hasLimit()?new sA(n):new Sf(n)}(r);this.processor_=function vm(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,g=i.updateFullNode(Wt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Wt.EMPTY_NODE,d.getNode(),null),T=new lu(g,l.isFullyInitialized(),i.filtersNodes()),S=new lu(v,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=hm(S,T),this.eventGenerator_=new Fv(this.query_)}get query(){return this.query_}}function AA(n,e){const t=Gu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!wt(e)&&!t.getImmediateChild(Ge(e)).isEmpty())?t.getChild(e):null}function qC(n){return 0===n.eventRegistrations_.length}function Xv(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Im(n,e,t,r){e.type===gs.MERGE&&null!==e.source.queryId&&((0,L.hu)(Gu(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(fm(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function bA(n,e,t,r,i){const a=new Mf;let l,d;if(t.type===gs.OVERWRITE){const v=t;v.source.fromUser?l=kf(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered()&&!wt(v.path),l=Nf(n,e,v.path,v.snap,r,i,d,a))}else if(t.type===gs.MERGE){const v=t;v.source.fromUser?l=function DA(n,e,t,r,i,a,l){let d=e;return r.foreach((g,v)=>{const T=Mn(t,g);Kv(e,Ge(T))&&(d=kf(n,d,T,v,i,a,l))}),r.foreach((g,v)=>{const T=Mn(t,g);Kv(e,Ge(T))||(d=kf(n,d,T,v,i,a,l))}),d}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered(),l=GC(n,e,v.path,v.children,r,i,d,a))}else if(t.type===gs.ACK_USER_WRITE){const v=t;l=v.revert?function zC(n,e,t,r,i,a){let l;if(null!=_m(r,t))return e;{const d=new zv(r,e,i),g=e.eventCache.getNode();let v;if(wt(t)||".priority"===Ge(t)){let T;if(e.serverCache.isFullyInitialized())T=mm(r,Gu(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),T=Wv(r,S)}v=n.filter.updateFullNode(g,T,a)}else{const T=Ge(t);let S=Vs(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=g.getImmediateChild(T)),v=null!=S?n.filter.updateChild(g,T,S,Pn(t),d,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(g,T,Wt.EMPTY_NODE,Pn(t),d,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=mm(r,Gu(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=_m(r,yn()),xf(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Zv(n,e,t,r,i,a,l){if(null!=_m(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(wt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Nf(n,e,t,g.getNode().getChild(t),i,a,d,l);if(wt(t)){let v=new Fn(null);return g.getNode().forEachChild(Ca,(T,S)=>{v=v.set(new _n(T),S)}),GC(n,e,t,v,i,a,d,l)}return e}{let v=new Fn(null);return r.foreach((T,S)=>{const P=Mn(t,T);g.isCompleteForPath(P)&&(v=v.set(T,g.getNode().getChild(P)))}),GC(n,e,t,v,i,a,d,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==gs.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);l=function Yv(n,e,t,r,i){const a=e.serverCache;return qv(n,kC(e,a.getNode(),a.isFullyInitialized()||wt(t),a.isFiltered()),t,r,$C,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function TA(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=fm(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(DC(fm(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function wm(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,ZC(n,a.changes,a.viewCache.eventCache.getNode(),null)}function ZC(n,e,t,r){return function PC(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function SC(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),$d(n,i,"child_removed",e,r,t),$d(n,i,"child_added",e,r,t),$d(n,i,"child_moved",a,r,t),$d(n,i,"child_changed",e,r,t),$d(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Of,Ff;class ew{constructor(){this.views=new Map}}function tw(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Im(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(Im(l,e,t,r));return a}}function nw(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=mm(t,i?r:null),g=!1;d?g=!0:r instanceof Wt?(d=Wv(t,r),g=!1):(d=Wt.EMPTY_NODE,g=!1);const v=hm(new lu(d,g,!1),new lu(r,i,!1));return new Qv(e,v)}return l}function Ql(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zu(n,e){let t=null;for(const r of n.views.values())t=t||AA(r,e);return t}function XC(n,e){return e._queryParams.loadsAllData()?Lf(n):n.views.get(e._queryIdentifier)}function PA(n,e){return null!=XC(n,e)}function Jl(n){return null!=Lf(n)}function Lf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let rw=1;class eb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fn(null),this.pendingWriteTree_=function EA(){return{visibleWrites:Co.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Em(n,e,t,r,i){return function gA(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=pm(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?bo(n,new uu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function qu(n,e,t=!1){const r=function _A(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Pf(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&VC(d,r.path)?i=!1:Us(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function BC(n){n.visibleWrites=Hv(n.allWrites,jC,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=UC(n.visibleWrites,r.path):ar(r.children,g=>{n.visibleWrites=UC(n.visibleWrites,Mn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Fn(null);return null!=r.snap?a=a.set(yn(),!0):ar(r.children,l=>{a=a.set(new _n(l),!0)}),bo(n,new jd(r.path,a,t))}return[]}function Vf(n,e,t){return bo(n,new uu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Xl(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&("default"===e._queryIdentifier||PA(l,e))){const g=function Di(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=Jl(n);if("default"===i)for(const[g,v]of n.views.entries())l=l.concat(Xv(v,t,r)),qC(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||a.push(v.query));else{const g=n.views.get(i);g&&(l=l.concat(Xv(g,t,r)),qC(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return d&&!Jl(n)&&a.push(new(function YC(){return(0,L.hu)(Of,"Reference.ts has not been loaded"),Of}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function QC(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=g.removed;if(d=g.events,!i){const T=-1!==v.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,V)=>Jl(V));if(T&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const V=function kA(n){return n.fold((e,t,r)=>{if(t&&Jl(t))return[Lf(t)];{let i=[];return t&&(i=Ql(t)),ar(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let G=0;G<V.length;++G){const ce=V[G],ye=ce.query,at=Dm(n,ce);n.listenProvider_.startListening(Gd(ye),Sm(n,ye),at.hashFn,at.onComplete)}}}!S&&v.length>0&&!r&&(T?n.listenProvider_.stopListening(Gd(e),null):v.forEach(P=>{const V=n.queryToTagMap.get(Am(P));n.listenProvider_.stopListening(Gd(P),V)}))}!function ob(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Am(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return d}function Cm(n,e,t,r){const i=sb(n,r);if(null!=i){const a=ow(i),l=a.path,d=a.queryId,g=Ki(l,e);return aw(n,l,new uu(dm(d),g,t))}return[]}function bm(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,V)=>{const G=Ki(P,i);a=a||zu(V,G),l=l||Jl(V)});let g,d=n.syncPointTree_.get(i);d?(l=l||Jl(d),a=a||zu(d,yn())):(d=new ew,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?g=!0:(g=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,G)=>{const ce=zu(G,yn());ce&&(a=a.updateImmediateChild(V,ce))}));const v=PA(d,e);if(!v&&!e._queryParams.loadsAllData()){const P=Am(e);(0,L.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const V=function OA(){return rw++}();n.queryToTagMap.set(P,V),n.tagToQueryMap.set(V,P)}let S=function JC(n,e,t,r,i,a){const l=nw(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function RA(n,e){n.eventRegistrations_.push(e)}(l,t),function KC(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Nn,(a,l)=>{r.push(Ud(a,l))}),t.isFullyInitialized()&&r.push(DC(t.getNode())),ZC(n,r,t.getNode(),e)}(l,t)}(d,e,t,gm(n.pendingWriteTree_,i),a,g);if(!v&&!l&&!r){const P=XC(d,e);S=S.concat(function ab(n,e,t){const r=e._path,i=Sm(n,e),a=Dm(n,t),l=n.listenProvider_.startListening(Gd(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Jl(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((v,T,S)=>{if(!wt(v)&&T&&Jl(T))return[Lf(T).query];{let P=[];return T&&(P=P.concat(Ql(T).map(V=>V.query))),ar(S,(V,G)=>{P=P.concat(G)}),P}});for(let v=0;v<g.length;++v){const T=g[v];n.listenProvider_.stopListening(Gd(T),Sm(n,T))}}return l}(n,e,P))}return S}function Tm(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const v=zu(d,Ki(l,e));if(v)return v});return $v(i,e,a,t,!0)}function bo(n,e){return ib(e,n.syncPointTree_,null,gm(n.pendingWriteTree_,yn()))}function ib(n,e,t,r){if(wt(n.path))return sw(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=zu(i,yn()));let a=[];const l=Ge(n.path),d=n.operationForChild(l),g=e.children.get(l);if(g&&d){const v=t?t.getImmediateChild(l):null,T=HC(r,l);a=a.concat(ib(d,g,v,T))}return i&&(a=a.concat(tw(i,n,r,t))),a}}function sw(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=zu(i,yn()));let a=[];return e.children.inorderTraversal((l,d)=>{const g=t?t.getImmediateChild(l):null,v=HC(r,l),T=n.operationForChild(l);T&&(a=a.concat(sw(T,d,g,v)))}),i&&(a=a.concat(tw(i,n,r,t))),a}function Dm(n,e){const t=e.query,r=Sm(n,t);return{hashFn:()=>(function Jv(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function nb(n,e,t){const r=sb(n,t);if(r){const i=ow(r),a=i.path,l=i.queryId,d=Ki(a,e);return aw(n,a,new Rf(dm(l),d))}return[]}(n,t._path,r):function tb(n,e){return bo(n,new Rf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function xS(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Xl(n,t,null,a)}}}}function Sm(n,e){const t=Am(e);return n.queryToTagMap.get(t)}function Am(n){return n._path.toString()+"$"+n._queryIdentifier}function sb(n,e){return n.tagToQueryMap.get(e)}function ow(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _n(n.substr(0,e))}}function aw(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),tw(r,t,gm(n.pendingWriteTree_,e),null)}function Gd(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function MA(){return(0,L.hu)(Ff,"Reference.ts has not been loaded"),Ff}())(n._repo,n._path):n}class Rm{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Rm(t)}node(){return this.node_}}class uw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Mn(this.path_,e);return new uw(this.syncTree_,t)}node(){return Tm(this.syncTree_,this.path_)}}const lw=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?FA(n[".sv"],e,t):"object"==typeof n[".sv"]?ub(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},FA=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},ub=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},cw=function(n,e,t,r){return Pm(e,new uw(t,n),r)},xm=function(n,e,t){return Pm(n,new Rm(e),t)};function Pm(n,e,t){const r=n.getPriority().val(),i=lw(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=lw(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new bf(d,er(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new bf(i))),l.forEachChild(Nn,(d,g)=>{const v=Pm(g,e.getImmediateChild(d),t);v!==g&&(a=a.updateImmediateChild(d,v))}),a}}class dw{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Mm(n,e){let t=e instanceof _n?e:new _n(e),r=n,i=Ge(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new dw(i,r,a),t=Pn(t),i=Ge(t)}return r}function zd(n){return n.node.value}function Nm(n,e){n.node.value=e,lb(n)}function UA(n){return n.node.childCount>0}function hw(n,e){ar(n.node.children,(t,r)=>{e(new dw(t,n,r))})}function VA(n,e,t,r){t&&!r&&e(n),hw(n,i=>{VA(i,e,!0,r)}),t&&r&&e(n)}function km(n){return new _n(null===n.parent?n.name:km(n.parent)+"/"+n.name)}function lb(n){null!==n.parent&&function RN(n,e,t){const r=function SN(n){return void 0===zd(n)&&!UA(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,lb(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,lb(n))}(n.parent,n.name,n)}const Om=/[\[\].#$\/\u0000-\u001F\u007F]/,xN=/[\[\].#$\u0000-\u001F\u007F]/,Lm=10485760,ec=function(n){return"string"==typeof n&&0!==n.length&&!Om.test(n)},fw=function(n){return"string"==typeof n&&0!==n.length&&!xN.test(n)},Fm=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Hg(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Bs=function(n,e,t,r){r&&void 0===e||qd((0,L.gK)(n,"value"),e,t)},qd=function(n,e,t){const r=t instanceof _n?new gC(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+zl(r));if("function"==typeof e)throw new Error(n+"contains a function "+zl(r)+" with contents = "+e.toString());if(Hg(e))throw new Error(n+"contains "+e.toString()+" "+zl(r));if("string"==typeof e&&e.length>Lm/3&&(0,L.ug)(e)>Lm)throw new Error(n+"contains a string greater than "+Lm+" utf8 bytes "+zl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(ar(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!ec(l)))throw new Error(n+" contains an invalid key ("+l+") "+zl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function mC(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),Cv(n)})(r,l),qd(n,d,r),function _C(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+zl(r)+" in addition to actual children.")}},pw=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];ar(e,(l,d)=>{const g=new _n(l);if(qd(i,d,Mn(t,g)),".priority"===Ev(g)&&!Fm(d))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=wf(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!ec(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(pC);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Us(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},db=function(n,e,t){if(!t||void 0!==e){if(Hg(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fm(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Um=function(n,e,t,r){if(!(r&&void 0===t||ec(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Bf=function(n,e,t,r){if(!(r&&void 0===t||fw(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Si=function(n,e){if(".info"===Ge(e))throw new Error(n+" failed = Can't modify data under /.info/")},hb=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ec(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fw(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class PN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gw(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Qg(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function HA(n,e,t){gw(n,t),fb(n,r=>Qg(r,e))}function ms(n,e,t){gw(n,t),fb(n,r=>Us(r,e)||Us(e,r))}function fb(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?($A(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function $A(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Uu&&Pr("event: "+t.toString()),Ci(r)}}}const WA="repo_interrupt";class pb{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vd(),this.transactionQueueTree_=new dw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zA(n){const t=n.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ai(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:zA(n)})}function mb(n,e,t,r,i){n.dataUpdateCount++;const a=new _n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,L.UI)(t,v=>er(v));l=function DN(n,e,t,r){const i=sb(n,r);if(i){const a=ow(i),l=a.path,d=a.queryId,g=Ki(l,e),v=Fn.fromObject(t);return aw(n,l,new Hd(dm(d),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=er(t);l=Cm(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,L.UI)(t,v=>er(v));l=function iw(n,e,t){const r=Fn.fromObject(t);return bo(n,new Hd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=er(t);l=Vf(n.serverSyncTree_,a,g)}let d=a;l.length>0&&(d=Hf(n,a)),ms(n.eventQueue_,d,l)}function Vm(n,e){Zi(n,"connected",e),!1===e&&function yw(n){Ku(n,"onDisconnectEvents");const e=Ai(n),t=Vd();Af(n.onDisconnect_,yn(),(i,a)=>{const l=cw(i,a,n.serverSyncTree_,e);Wu(t,i,l)});let r=[];Af(t,yn(),(i,a)=>{r=r.concat(Vf(n.serverSyncTree_,i,a));const l=bb(n,i);Hf(n,l)}),n.onDisconnect_=Vd(),ms(n.eventQueue_,yn(),r)}(n)}function Zi(n,e,t){const r=new _n("/.info/"+e),i=er(t);n.infoData_.updateSnapshot(r,i);const a=Vf(n.infoSyncTree_,r,i);ms(n.eventQueue_,r,a)}function Bm(n){return n.nextWriteId_++}function _w(n,e,t,r,i){Ku(n,"set",{path:e.toString(),value:t,priority:r});const a=Ai(n),l=er(t,r),d=Tm(n.serverSyncTree_,e),g=xm(l,d,a),v=Bm(n),T=Em(n.serverSyncTree_,e,g,v,!0);gw(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(P,V)=>{const G="ok"===P;G||di("set at "+e+" failed: "+P);const ce=qu(n.serverSyncTree_,v,!G);ms(n.eventQueue_,e,ce),Ri(0,i,P,V)});const S=bb(n,e);Hf(n,S),ms(n.eventQueue_,S,[])}function _b(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&lm(n.onDisconnect_,e),Ri(0,t,r,i)})}function vw(n,e,t,r){const i=er(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Wu(n.onDisconnect_,e,i),Ri(0,r,a,l)})}function ww(n,e,t){let r;r=".info"===Ge(e._path)?Xl(n.infoSyncTree_,e,t):Xl(n.serverSyncTree_,e,t),HA(n.eventQueue_,e._path,r)}function Iw(n){n.persistentConnection_&&n.persistentConnection_.interrupt(WA)}function Ku(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Pr(t,...e)}function Ri(n,e,t,r){e&&Ci(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function jf(n,e,t){return Tm(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function js(n,e=n.transactionQueueTree_){if(e||$f(n,e),zd(e)){const t=Eb(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function QA(n,e,t){const r=t.map(v=>v.currentWriteId),i=jf(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const T=t[v];(0,L.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=Ki(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const d=a.val(!0),g=e;n.server_.put(g.toString(),d,v=>{Ku(n,"transaction put response",{path:g.toString(),status:v});let T=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,T=T.concat(qu(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();$f(n,Mm(n.transactionQueueTree_,e)),js(n,n.transactionQueueTree_),ms(n.eventQueue_,e,T);for(let P=0;P<S.length;P++)Ci(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{di("transaction at "+g.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Hf(n,e)}},l)}(n,km(e),t)}else UA(e)&&hw(e,t=>{js(n,t)})}function Hf(n,e){const t=Ib(n,e),r=km(t);return function JA(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],v=Ki(t,g.path);let S,T=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)T=!0,S=g.abortReason,i=i.concat(qu(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)T=!0,S="maxretry",i=i.concat(qu(n.serverSyncTree_,g.currentWriteId,!0));else{const P=jf(n,g.path,l);g.currentInputSnapshot=P;const V=e[d].update(P.val());if(void 0!==V){qd("transaction failed: Data returned ",V,g.path);let G=er(V);"object"==typeof V&&null!=V&&(0,L.r3)(V,".priority")||(G=G.updatePriority(P.getPriority()));const ye=g.currentWriteId,at=Ai(n),ht=xm(G,P,at);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=ht,g.currentWriteId=Bm(n),l.splice(l.indexOf(ye),1),i=i.concat(Em(n.serverSyncTree_,g.path,ht,g.currentWriteId,g.applyLocally)),i=i.concat(qu(n.serverSyncTree_,ye,!0))}else T=!0,S="nodata",i=i.concat(qu(n.serverSyncTree_,g.currentWriteId,!0))}ms(n.eventQueue_,t,i),i=[],T&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===S?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(S),!1,null)))}$f(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Ci(r[d]);js(n,n.transactionQueueTree_)}(n,Eb(n,t),r),r}function Ib(n,e){let t,r=n.transactionQueueTree_;for(t=Ge(e);null!==t&&void 0===zd(r);)r=Mm(r,t),t=Ge(e=Pn(e));return r}function Eb(n,e){const t=[];return Cb(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Cb(n,e,t){const r=zd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);hw(e,i=>{Cb(n,i,t)})}function $f(n,e){const t=zd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Nm(e,t.length>0?t:void 0)}hw(e,r=>{$f(n,r)})}function bb(n,e){const t=km(Ib(n,e)),r=Mm(n.transactionQueueTree_,e);return function AN(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{jm(n,i)}),jm(n,r),VA(r,i=>{jm(n,i)}),t}function jm(n,e){const t=zd(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,L.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,L.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(qu(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Nm(e,void 0):t.length=a+1,ms(n.eventQueue_,km(e),i);for(let l=0;l<r.length;l++)Ci(r[l])}}const Db=function(n,e){const t=Ew(n),r=t.namespace;return"firebase.com"===t.domain&&va(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&va("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&di("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new zg(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new _n(t.pathString)}},Ew=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(d=n.substring(0,v-1),n=n.substring(v+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function XA(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(T,S)));const P=function Tb(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):di(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===d||"wss"===d,g=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class Cw{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class bw{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Hm{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Tw{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return _b(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Si("OnDisconnect.remove",this._path);const e=new L.BH;return vw(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Si("OnDisconnect.set",this._path),Bs("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return vw(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Si("OnDisconnect.setWithPriority",this._path),Bs("OnDisconnect.setWithPriority",e,this._path,!1),db("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function ZA(n,e,t,r,i){const a=er(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,d)=>{"ok"===l&&Wu(n.onDisconnect_,e,a),Ri(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Si("OnDisconnect.update",this._path),pw("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function yb(n,e,t,r){if((0,L.xb)(t))return Pr("onDisconnect().update() called with empty data.  Don't do anything."),void Ri(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&ar(t,(l,d)=>{const g=er(d);Wu(n.onDisconnect_,Mn(e,l),g)}),Ri(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class xi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return wt(this._path)?null:Ev(this._path)}get ref(){return new Hs(this._repo,this._path)}get _queryIdentifier(){const e=RC(this._queryParams),t=$g(e);return"{}"===t?"default":t}get _queryObject(){return RC(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof xi))return!1;const t=this._repo===e._repo,r=Qg(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function kd(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tc(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function To(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ca){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==wa)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ia)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Nn){if(null!=e&&!Fm(e)||null!=t&&!Fm(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof Rv||n.getIndex()===xv,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Wf(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Hs extends xi{constructor(e,t){super(e,t,new sm,!1)}get parent(){const e=If(this._path);return null===e?null:new Hs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Zu{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new _n(e),r=nc(this.ref,e);return new Zu(this._node.getChild(t),r,Nn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Zu(i,nc(this.ref,r),Nn)))}hasChild(e){const t=new _n(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Dw(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?nc(n._root,e):n._root}function Sb(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=Db(e,n._repo.repoInfo_.nodeAdmin);hb("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&va("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Dw(n,t.path.toString())}function nc(n,e){return null===Ge((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Bf("child","path",t,!1)):Bf("child","path",e,!1),new Hs(n._repo,Mn(n._path,e));var t}function Sw(n,e){n=(0,L.m9)(n),Si("set",n._path),Bs("set",e,n._path,!1);const t=new L.BH;return _w(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function NN(n,e){pw("update",e,n._path,!1);const t=new L.BH;return function KA(n,e,t,r){Ku(n,"update",{path:e.toString(),value:t});let i=!0;const a=Ai(n),l={};if(ar(t,(d,g)=>{i=!1,l[d]=cw(Mn(e,d),er(g),n.serverSyncTree_,a)}),i)Pr("update() called with empty data.  Don't do anything."),Ri(0,r,"ok",void 0);else{const d=Bm(n),g=function NA(n,e,t,r){!function mA(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=FC(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Fn.fromObject(t);return bo(n,new Hd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);gw(n.eventQueue_,g),n.server_.merge(e.toString(),t,(v,T)=>{const S="ok"===v;S||di("update at "+e+" failed: "+v);const P=qu(n.serverSyncTree_,d,!S),V=P.length>0?Hf(n,e):e;ms(n.eventQueue_,V,P),Ri(0,r,v,T)}),ar(t,v=>{const T=bb(n,Mn(e,v));Hf(n,T)}),ms(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function kN(n){n=(0,L.m9)(n);const e=new Hm(()=>{}),t=new $m(e);return function mw(n,e,t){const r=function rb(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,T)=>{const S=Ki(v,t);r=r||zu(T,S)});let i=n.syncPointTree_.get(t);i?r=r||zu(i,yn()):(i=new ew,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new lu(r,!0,!1):null;return function SA(n){return fm(n.viewCache_)}(nw(i,e,gm(n.pendingWriteTree_,e._path),a?l.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=er(i).withIndex(e._queryParams.getIndex());let l;if(bm(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Vf(n.serverSyncTree_,e._path,a);else{const d=Sm(n.serverSyncTree_,e);l=Cm(n.serverSyncTree_,e._path,a,d)}return ms(n.eventQueue_,e._path,l),Xl(n.serverSyncTree_,e,t,null,!0),a},i=>(Ku(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Zu(r,new Hs(n._repo,n._path),n._queryParams.getIndex()))}class $m{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Cw("value",this,new Zu(e.snapshotNode,new Hs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bw(this,e,t):null}matches(e){return e instanceof $m&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Aw{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bw(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=nc(new Hs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Cw(e.type,this,new Zu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Aw&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Wm(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,v=(T,S)=>{ww(n._repo,n,d),g(T,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new Hm(t,a||void 0),d="value"===e?new $m(l):new Aw(e,l);return function vb(n,e,t){let r;r=".info"===Ge(e._path)?bm(n.infoSyncTree_,e,t):bm(n.serverSyncTree_,e,t),HA(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>ww(n._repo,n,d)}function Rw(n,e,t,r){return Wm(n,"value",e,t,r)}function Gf(n,e,t,r){return Wm(n,"child_added",e,t,r)}function Rb(n,e,t,r){return Wm(n,"child_changed",e,t,r)}function xb(n,e,t,r){return Wm(n,"child_moved",e,t,r)}function xw(n,e,t,r){return Wm(n,"child_removed",e,t,r)}function Yu(n,e,t){let r=null;const i=t?new Hm(t):null;"value"===e?r=new $m(i):e&&(r=new Aw(e,i)),ww(n._repo,n,r)}class $s{}class Gm extends $s{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("endAt",this._value,e._path,!0);const t=om(e._queryParams,this._value,this._key);if(Wf(t),To(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xi(e._repo,e._path,t,e._orderByCalled)}}class nR extends $s{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("endBefore",this._value,e._path,!1);const t=function lA(n,e,t){let r,i;return n.index_===Ca?("string"==typeof e&&(e=TC(e)),i=om(n,e,t)):(r=null==t?wa:TC(t),i=om(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Wf(t),To(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xi(e._repo,e._path,t,e._orderByCalled)}}class zm extends $s{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("startAt",this._value,e._path,!0);const t=kv(e._queryParams,this._value,this._key);if(Wf(t),To(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xi(e._repo,e._path,t,e._orderByCalled)}}class ON extends $s{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Bs("startAfter",this._value,e._path,!1);const t=function AC(n,e,t){let r;if(n.index_===Ca)"string"==typeof e&&(e=Mv(e)),r=kv(n,e,t);else{let i;i=null==t?Ia:Mv(t),r=kv(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Wf(t),To(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xi(e._repo,e._path,t,e._orderByCalled)}}class FN extends $s{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xi(e._repo,e._path,function aA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Pb extends $s{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xi(e._repo,e._path,function uA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class iR extends $s{constructor(e){super(),this._path=e}_apply(e){tc(e,"orderByChild");const t=new _n(this._path);if(wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Rv(t),i=am(e._queryParams,r);return To(i),new xi(e._repo,e._path,i,!0)}}class oR extends $s{_apply(e){tc(e,"orderByKey");const t=am(e._queryParams,Ca);return To(t),new xi(e._repo,e._path,t,!0)}}class Nb extends $s{_apply(e){tc(e,"orderByPriority");const t=am(e._queryParams,Nn);return To(t),new xi(e._repo,e._path,t,!0)}}class aR extends $s{_apply(e){tc(e,"orderByValue");const t=am(e._queryParams,xv);return To(t),new xi(e._repo,e._path,t,!0)}}class Ob extends $s{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Bs("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gm(this._value,this._key)._apply(new zm(this._value,this._key)._apply(e))}}function ba(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function xA(n){(0,L.hu)(!Of,"__referenceConstructor has already been defined"),Of=n})(Hs),function Uf(n){(0,L.hu)(!Ff,"__referenceConstructor has already been defined"),Ff=n}(Hs);const zf={};function cR(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||va("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,l=Db(a,i),d=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${d.namespace}`,l=Db(a,i),d=l.repoInfo):g=!l.repoInfo.secure;const T=i&&g?new bi(bi.OWNER):new Io(n.name,n.options,e);hb("Invalid Firebase Database URL",l),wt(l.path)||va("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function dR(n,e,t,r){let i=zf[e.name];i||(i={},zf[e.name]=i);let a=i[n.toURLString()];return a&&va("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new pb(n,false,t,r),i[n.toURLString()]=a,a}(d,n,T,new Ea(n.name,t));return new fR(S,n)}class fR{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function gb(n,e,t){if(n.stats_=vf(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new um(n.repoInfo_,(r,i,a,l)=>{mb(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Vm(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Hu(n.repoInfo_,e,(r,i,a,l)=>{mb(n,r,i,a,l)},r=>{Vm(n,r)},r=>{!function qA(n,e){ar(e,(t,r)=>{Zi(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function cv(n,e){const t=n.toString();return Kg[t]||(Kg[t]=e()),Kg[t]}(n.repoInfo_,()=>new Bd(n.stats_,n.server_)),n.infoData_=new cA,n.infoSyncTree_=new eb({startListening:(r,i,a,l)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=Vf(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),Zi(n,"connected",!1),n.serverSyncTree_=new eb({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,g)=>{const v=l(d,g);ms(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hs(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function VN(n,e){const t=zf[e];(!t||t[n.key]!==n)&&va(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Iw(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&va("Cannot call "+e+" on a deleted database.")}}function pR(){aC.IS_TRANSPORT_INITIALIZED&&di("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function BN(){pR(),Vu.forceDisallow()}function jN(){pR(),Md.forceDisallow(),Vu.forceAllow()}function $N(n,e){sv(n,e)}const GN={".sv":"timestamp"};class s{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Hu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Hu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function WN(n){ev(Ei.SDK_VERSION),(0,Ei._registerComponent)(new _a.wA("database",(e,{instanceIdentifier:t})=>cR(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ei.registerVersion)(j0,Xy,n),(0,Ei.registerVersion)(j0,Xy,"esm2017")}();const y=new vo.Yd("@firebase/database-compat"),I=function(n){y.warn("FIREBASE WARNING: "+n)};class N{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class U{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Z{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Bf("DataSnapshot.child","path",e,!1),new Z(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Bf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Z(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ve(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class te{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const l=te.getCancelAndContextArgs_("Query.on",r,i),d=(v,T)=>{t.call(l.context,new Z(this.database,v),T)};d.userCallback=t,d.context=l.context;const g=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Rw(this._delegate,d,g),t;case"child_added":return Gf(this._delegate,d,g),t;case"child_removed":return xw(this._delegate,d,g),t;case"child_changed":return Rb(this._delegate,d,g),t;case"child_moved":return xb(this._delegate,d,g),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Yu(this._delegate,e,i)}else Yu(this._delegate,e)}get(){return kN(this._delegate).then(e=>new Z(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=te.getCancelAndContextArgs_("Query.once",r,i),l=new L.BH,d=(v,T)=>{const S=new Z(this.database,v);t&&t.call(a.context,S,T),l.resolve(S)};d.userCallback=t,d.context=a.context;const g=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":Rw(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":Gf(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":xw(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":Rb(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":xb(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new te(this.database,ba(this._delegate,function UN(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new FN(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new te(this.database,ba(this._delegate,function rR(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Pb(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new te(this.database,ba(this._delegate,function sR(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Bf("orderByChild","path",n,!1),new iR(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new te(this.database,ba(this._delegate,function Mb(){return new oR}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new te(this.database,ba(this._delegate,function kb(){return new Nb}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new te(this.database,ba(this._delegate,function uR(){return new aR}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new te(this.database,ba(this._delegate,function qm(n=null,e){return Um("startAt","key",e,!0),new zm(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new te(this.database,ba(this._delegate,function LN(n,e){return Um("startAfter","key",e,!0),new ON(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new te(this.database,ba(this._delegate,function Pw(n,e){return Um("endAt","key",e,!0),new Gm(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new te(this.database,ba(this._delegate,function Mw(n,e){return Um("endBefore","key",e,!0),new nR(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new te(this.database,ba(this._delegate,function Nw(n,e){return Um("equalTo","key",e,!0),new Ob(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof te))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ve(this.database,new Hs(this._delegate._repo,this._delegate._path))}}class ve extends te{constructor(e,t){super(e,new xi(t._repo,t._path,new sm,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ve(this.database,nc(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ve(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ve(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=Sw(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Si("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=NN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function tR(n,e,t){if(Si("setWithPriority",n._path),Bs("setWithPriority",e,n._path,!1),db("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return _w(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function Ab(n){return Si("remove",n._path),Sw(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function o(n,e,t){var r;if(n=(0,L.m9)(n),Si("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,d=Rw(n,()=>{});return function wb(n,e,t,r,i,a){Ku(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:nv(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=jf(n,e,void 0);l.currentInputSnapshot=d;const g=l.update(d.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{qd("transaction failed: Data returned ",g,l.path),l.status=0;const v=Mm(n.transactionQueueTree_,e),T=zd(v)||[];let S;T.push(l),Nm(v,T),"object"==typeof g&&null!==g&&(0,L.r3)(g,".priority")?(S=(0,L.DV)(g,".priority"),(0,L.hu)(Fm(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Tm(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const P=Ai(n),V=er(g,S),G=xm(V,d,P);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=G,l.currentWriteId=Bm(n);const ce=Em(n.serverSyncTree_,e,G,l.currentWriteId,l.applyLocally);ms(n.eventQueue_,e,ce),js(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,v,T)=>{let S=null;g?a.reject(g):(S=new Zu(T,new Hs(n._repo,n._path),Nn),a.resolve(new s(v,S)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new U(a.committed,new Z(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function eR(n,e){n=(0,L.m9)(n),Si("setPriority",n._path),db("setPriority",e,!1);const t=new L.BH;return _w(n._repo,Mn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function MN(n,e){n=(0,L.m9)(n),Si("push",n._path),Bs("push",e,n._path,!0);const t=zA(n._repo),r=bC(t),i=nc(n,r),a=nc(n,r);let l;return l=null!=e?Sw(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ve(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new ve(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Si("Reference.onDisconnect",this._delegate._path),new N(new Tw(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class He{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:BN,forceLongPolling:jN}}useEmulator(e,t,r={}){!function gR(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&va("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&va('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new bi(bi.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new bi(l)}!function lR(n,e,t,r){n.repoInfo_=new zg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof ve){const t=Sb(this._delegate,e.toString());return new ve(this,t)}{const t=Dw(this._delegate,e);return new ve(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=Sb(this._delegate,e);return new ve(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function mR(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),Iw(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function HN(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function YA(n){n.persistentConnection_&&n.persistentConnection_.resume(WA)}(n._repo)}(this._delegate)}}He.ServerValue={TIMESTAMP:function zN(){return GN}(),increment:n=>function qN(n){return{".sv":{increment:n}}}(n)};var dt=Object.freeze({__proto__:null,initStandalone:function Ke({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){ev(t);const l=new _a.zt("auth-internal",new _a.H0("database-standalone"));return l.setComponent(new _a.wA("auth-internal",()=>r,"PRIVATE")),{instance:new He(cR(n,l,void 0,e,a),n),namespace:i}}});const Dt=He.ServerValue;function Kn(n){return null==n}function Qu(n){return"function"==typeof n.set}function Km(n,e){return Qu(e)?e:n.ref(e)}function Zm(n,e){if(function Nt(n){return"string"==typeof n}(n))return e.stringCase();if(Qu(n))return e.firebaseCase();if(function vn(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function rc(n,e,t="on",r=Sd.z){return new Er.y(i=>{let a=null;return a=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,ot.U)(i=>{const{snapshot:a,prevKey:l}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:l,key:d}}),(0,mg.B)())}function Ym(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Lw(n,e){const{payload:t,prevKey:r,key:i}=e,a=Ym(n,i),l=function Ow(n,e){if(Kn(e))return 0;{const t=Ym(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function Qm(n){return(Kn(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Jm(n,e,t){return function kw(n,e,t){return rc(n,"value","once",t).pipe(Gn(r=>{const i=[ut(r)];return e.forEach(a=>i.push(rc(n,a,"on",t))),(0,gg.T)(...i).pipe(Mt(Lw,[]))}),Ug())}(n,e=Qm(e),t)}function KN(n,e,t){const r=(e=Qm(e)).map(i=>rc(n,i,"on",t));return(0,gg.T)(...r)}function ZN(n,e){return function(r,i){return Zm(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function xU(n){return function(t){return t?Zm(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function YN(n,e){return function(){return rc(n,"value","on",e)}}!function ke(n){n.INTERNAL.registerComponent(new _a.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new He(i,r)},"PUBLIC").setServiceProps({Reference:ve,Query:te,Database:He,DataSnapshot:Z,enableLogging:$N,INTERNAL:dt,ServerValue:Dt}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Vg.Z);const NU=new m.OlP("angularfire2.realtimeDatabaseURL"),kU=new m.OlP("angularfire2.database.use-emulator");let OU=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S,P,V,G,ce,ye){this.schedulers=d;const at=g,ht=(0,jr.on)(t,l,r);v&&hf(ht,l,T,P,V,G,S,ce),this.database=(0,jr.cc)(`${ht.name}.database.${i}`,"AngularFireDatabase",ht.name,()=>{const lt=l.runOutsideAngular(()=>ht.database(i||void 0));return at&&lt.useEmulator(...at),lt},[at])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Km(this.database,t));let a=i;return r&&(a=r(i)),function PU(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:ZN(r,"update"),set:ZN(r,"set"),push:i=>r.push(i),remove:xU(r),snapshotChanges:i=>Jm(n,i,t).pipe(mn.iC),stateChanges:i=>KN(n,i,t).pipe(mn.iC),auditTrail:i=>function SU(n,e,t){return function RU(n,e,t){return function AU(n,e){return rc(n,"value","on",e).pipe((0,ot.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function U0(...n){const e=(0,ls.jO)(n);return(0,Xn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),d=!1;for(let g=0;g<i;g++)(0,ai.Xf)(n[g]).subscribe((0,Wn.x)(r,v=>{a[g]=v,!d&&!l[g]&&(l[g]=!0,(d=l.every(co.y))&&(l=null))},Jy.Z));t.subscribe((0,Wn.x)(r,g=>{if(d){const v=[g,...a];r.next(e?e(...v):v)}}))})}(e),(0,ot.U)(([i,a])=>{const l=i.lastKeyToLoad,d=a.map(g=>g.key);return{actions:a,lastKeyToLoad:l,loadedKeys:d}}),function V0(n){return(0,Xn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Wn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ot.U)(i=>i.actions))}(n,KN(n,e).pipe(Mt((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(mn.iC),valueChanges:(i,a)=>Jm(n,i,t).pipe((0,ot.U)(d=>d.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),mn.iC)}}(a,this)}object(t){return function MU(n,e){return{query:n,snapshotChanges:()=>YN(n,e.schedulers.outsideAngular)().pipe(mn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>YN(n,e.schedulers.outsideAngular)().pipe(mn.iC,(0,ot.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Km(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(jr.Dh),m.LFG(jr.xv,8),m.LFG(NU,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(kU,8),m.LFG(Mg,8),m.LFG(zy,8),m.LFG(qy,8),m.LFG(hd,8),m.LFG(df,8),m.LFG(fd,8),m.LFG(m0,8),m.LFG(dd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LU=(()=>{class n{constructor(){Pg.Z.registerVersion("angularfire",mn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[OU]}),n})();const QN="firebasestorage.googleapis.com",JN="storageBucket";class _r extends L.ZR{constructor(e,t,r=0){super(_R(e),`Firebase Storage: ${t} (${_R(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _R(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function _R(n){return"storage/"+n}function yR(){return new _r("unknown","An unknown error occurred, please check the error payload for server response.")}function XN(){return new _r("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function ek(){return new _r("canceled","User canceled the upload/download.")}function tk(){return new _r("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xm(n){return new _r("invalid-argument",n)}function nk(){return new _r("app-deleted","The Firebase app was deleted.")}function rk(n){return new _r("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fw(n,e){return new _r("invalid-format","String does not match format '"+n+"': "+e)}function Uw(n){throw new _r("internal-error","Internal error: "+n)}class Yi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Yi.makeFromUrl(e,t)}catch{return new Yi(e,"")}if(""===r.path)return r;throw function qU(n){return new _r("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(pt){pt.path_=decodeURIComponent(pt.path)}const S=t.replace(/[.]/g,"\\."),lt=[{regex:d,indices:{bucket:1,path:3},postModify:function a(pt){"/"===pt.path.charAt(pt.path.length-1)&&(pt.path_=pt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===QN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let pt=0;pt<lt.length;pt++){const Rt=lt[pt],jt=Rt.regex.exec(e);if(jt){let fu=jt[Rt.indices.path];fu||(fu=""),r=new Yi(jt[Rt.indices.bucket],fu),Rt.postModify(r);break}}if(null==r)throw function zU(n){return new _r("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class JU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Ub(n){return"string"==typeof n||n instanceof String}function ik(n){return vR()&&n instanceof Blob}function vR(){return typeof Blob<"u"&&!(0,L.UG)()}function wR(n,e,t,r){if(r<e)throw Xm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Xm(`Invalid value for '${n}'. Expected ${t} or less.`)}function ic(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function sk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Kd=(()=>{return(n=Kd||(Kd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Kd;var n})();function ok(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class iV{constructor(e,t,r,i,a,l,d,g,v,T,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=T,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function tV(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==d){const g=yR();g.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,g):g)}else l(i.canceled?this.appDelete_?nk():ek():XN())};this.canceled_?t(0,new Vb(!1,null,!0)):this.backoffId_=function XU(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function g(){return 2===d}let v=!1;function T(...ye){v||(v=!0,e.apply(null,ye))}function S(ye){i=setTimeout(()=>{i=null,n(V,g())},ye)}function P(){a&&clearTimeout(a)}function V(ye,...at){if(v)return void P();if(ye)return P(),void T.call(null,ye,...at);if(g()||l)return P(),void T.call(null,ye,...at);let lt;r<64&&(r*=2),1===d?(d=2,lt=0):lt=1e3*(r+Math.random()),S(lt)}let G=!1;function ce(ye){G||(G=!0,P(),!v&&(null!==i?(ye||(d=2),clearTimeout(i),S(0)):ye||(d=1)))}return S(0),a=setTimeout(()=>{l=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new Vb(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Kd.NO_ERROR,g=a.getStatus();if((!d||ok(g,this.additionalRetryCodes_))&&this.retry){const T=a.getErrorCode()===Kd.ABORT;return void r(!1,new Vb(!1,null,T))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new Vb(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function eV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Vb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dV(...n){const e=function cV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(vR())return new Blob(n);throw new _r("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Do={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class IR{constructor(e,t){this.data=e,this.contentType=t||null}}function ER(n,e){switch(n){case Do.RAW:return new IR(ak(e));case Do.BASE64:case Do.BASE64URL:return new IR(uk(n,e));case Do.DATA_URL:return new IR(function gV(n){const e=new lk(n);return e.base64?uk(Do.BASE64,e.rest):function pV(n){let e;try{e=decodeURIComponent(n)}catch{throw Fw(Do.DATA_URL,"Malformed data URL.")}return ak(e)}(e.rest)}(e),function mV(n){return new lk(n).contentType}(e))}throw yR()}function ak(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function uk(n,e){switch(n){case Do.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Fw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Do.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Fw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function fV(n){if(typeof atob>"u")throw function QU(n){return new _r("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Fw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class lk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Fw(Do.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function _V(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ju{constructor(e,t){let r=0,i="";ik(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ik(this.data_)){const i=function hV(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ju(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ju(r,!0)}}static getBlob(...e){if(vR()){const t=e.map(r=>r instanceof Ju?r.data_:r);return new Ju(dV.apply(null,t))}{const t=e.map(l=>Ub(l)?ER(Do.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new Ju(i,!0)}}uploadData(){return this.data_}}function CR(n){let e;try{e=JSON.parse(n)}catch{return null}return function rV(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function ck(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function wV(n,e){return e}class _s{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||wV}}let Bb=null;function Vw(){if(Bb)return Bb;const n=[];n.push(new _s("bucket")),n.push(new _s("generation")),n.push(new _s("metageneration")),n.push(new _s("name","fullPath",!0));const t=new _s("name");t.xform=function e(a,l){return function IV(n){return!Ub(n)||n.length<2?n:ck(n)}(l)},n.push(t);const i=new _s("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new _s("timeCreated")),n.push(new _s("updated")),n.push(new _s("md5Hash",null,!0)),n.push(new _s("cacheControl",null,!0)),n.push(new _s("contentDisposition",null,!0)),n.push(new _s("contentEncoding",null,!0)),n.push(new _s("contentLanguage",null,!0)),n.push(new _s("contentType",null,!0)),n.push(new _s("metadata","customMetadata",!0)),Bb=n,Bb}function dk(n,e,t){const r=CR(e);return null===r?null:function CV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function EV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Yi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function bR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const hk="prefixes";class Xu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function el(n){if(!n)throw yR()}function jb(n,e){return function t(r,i){const a=dk(n,i,e);return el(null!==a),a}}function e_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function WU(){return new _r("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function $U(){return new _r("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function HU(n){return new _r("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function GU(n){return new _r("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Bw(n){const e=e_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function jU(n){return new _r("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function pk(n,e,t){const i=ic(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Xu(i,"GET",jb(n,t),l);return d.errorHandler=Bw(e),d}function RV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=ic(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,T=new Xu(d,"GET",function SV(n,e){return function t(r,i){const a=function DV(n,e,t){const r=CR(t);return null===r?null:function TV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[hk])for(const i of t[hk]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Yi(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Yi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return el(null!==a),a}}(n,e.bucket),v);return T.urlParams=a,T.errorHandler=e_(e),T}function mk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function NV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Hb{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function TR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{el(!1)}return el(!!t&&-1!==(e||["active"]).indexOf(t)),t}const FV={STATE_CHANGED:"state_changed"},ys={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function DR(n){switch(n){case"running":case"pausing":case"canceling":return ys.RUNNING;case"paused":return ys.PAUSED;case"success":return ys.SUCCESS;case"canceled":return ys.CANCELED;default:return ys.ERROR}}class UV{constructor(e,t,r){if(function nV(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function t_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class BV extends class VV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Uw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function du(){return new BV}class wk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Vw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(ok(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=XN()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function kV(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=mk(e,r,i),d={name:l.fullPath},g=ic(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=bR(l,t),G=new Xu(g,"POST",function V(ce){let ye;TR(ce);try{ye=ce.getResponseHeader("X-Goog-Upload-URL")}catch{el(!1)}return el(Ub(ye)),ye},n.maxUploadRetryTime);return G.urlParams=d,G.headers=T,G.body=S,G.errorHandler=e_(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,du,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function OV(n,e,t,r){const g=new Xu(t,"POST",function a(v){const T=TR(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{el(!1)}S||el(!1);const P=Number(S);return el(!isNaN(P)),new Hb(P,r.size(),"final"===T)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=e_(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,du,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Hb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function LV(n,e,t,r,i,a,l,d){const g=new Hb(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function ZU(){return new _r("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let T=v;i>0&&(T=Math.min(T,i));const S=g.current;let V="";V=0===T?"finalize":v===T?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${g.current}`},ce=r.slice(S,S+T);if(null===ce)throw tk();const lt=new Xu(t,"POST",function ye(pt,Rt){const jt=TR(pt,["active","final"]),yr=g.current+T,fu=r.size();let CM;return CM="final"===jt?jb(e,a)(pt,Rt):null,new Hb(yr,fu,"final"===jt,CM)},e.maxUploadRetryTime);return lt.headers=G,lt.body=ce.uploadData(),lt.progressCallback=d||null,lt.errorHandler=e_(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const d=this._ref.storage._makeRequest(l,du,i,a,!1);this._request=d,d.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=pk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,du,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function _k(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function d(){let lt="";for(let pt=0;pt<2;pt++)lt+=Math.random().toString().slice(2);return lt}();l["Content-Type"]="multipart/related; boundary="+g;const v=mk(e,r,i),T=bR(v,t),V=Ju.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===V)throw tk();const G={name:v.fullPath},ce=ic(a,n.host,n._protocol),at=n.maxUploadRetryTime,ht=new Xu(ce,"POST",jb(n,t),at);return ht.urlParams=G,ht.headers=l,ht.body=V.uploadData(),ht.errorHandler=e_(e),ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,du,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ek(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=DR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new UV(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(DR(this._state)){case ys.SUCCESS:t_(this._resolve.bind(null,this.snapshot))();break;case ys.CANCELED:case ys.ERROR:t_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(DR(this._state)){case ys.RUNNING:case ys.PAUSED:e.next&&t_(e.next.bind(e,this.snapshot))();break;case ys.SUCCESS:e.complete&&t_(e.complete.bind(e))();break;default:e.error&&t_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class qf{constructor(e,t){this._service=e,this._location=t instanceof Yi?t:Yi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qf(e,t)}get root(){const e=new Yi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ck(this._location.path)}get storage(){return this._service}get parent(){const e=function yV(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Yi(this._location.bucket,e);return new qf(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw rk(e)}}function Ek(n,e,t){return SR.apply(this,arguments)}function SR(){return(SR=(0,Ee.Z)(function*(n,e,t){const i=yield Ck(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Ek(n,e,i.nextPageToken))})).apply(this,arguments)}function Ck(n,e){null!=e&&"number"==typeof e.maxResults&&wR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=RV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,du)}function JV(n){n._throwIfRoot("getDownloadURL");const e=function xV(n,e,t){const i=ic(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Xu(i,"GET",function AV(n,e){return function t(r,i){const a=dk(n,i,e);return el(null!==a),function bV(n,e,t,r){const i=CR(e);if(null===i||!Ub(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return ic("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+sk({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=Bw(e),d}(n.storage,n._location,Vw());return n.storage.makeRequestWithTokens(e,du).then(t=>{if(null===t)throw function YU(){return new _r("no-download-url","The given file does not have any download URLs.")}();return t})}function bk(n,e){const t=function vV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Yi(n._location.bucket,t);return new qf(n.storage,r)}function Tk(n,e){if(n instanceof AR){const t=n;if(null==t._bucket)throw function KU(){return new _r("no-default-bucket","No default bucket found. Did you set the '"+JN+"' property when initializing the app?")}();const r=new qf(t,t._bucket);return null!=e?Tk(r,e):r}return void 0!==e?bk(n,e):n}function nB(n,e){if(e&&function eB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof AR)return function tB(n,e){return new qf(n,e)}(n,e);throw Xm("To use ref(service, url), the first argument must be a Storage instance.")}return Tk(n,e)}function Dk(n,e){const t=e?.[JN];return null==t?null:Yi.makeFromBucketSpec(t,n)}class AR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=QN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Yi.makeFromBucketSpec(i,this._host):Dk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Yi.makeFromBucketSpec(this._url,e):Dk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qf(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new JU(nk());{const l=function lV(n,e,t,r,i,a,l=!0){const d=sk(n.urlParams),g=n.url+d,v=Object.assign({},n.headers);return function aV(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function sV(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function oV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function uV(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new iV(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Sk="@firebase/storage";function xk(n,e){return nB(n=(0,L.m9)(n),e)}function hB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new AR(t,r,i,e,Ei.SDK_VERSION)}!function fB(){(0,Ei._registerComponent)(new _a.wA("storage",hB,"PUBLIC").setMultipleInstances(!0)),(0,Ei.registerVersion)(Sk,"0.9.14",""),(0,Ei.registerVersion)(Sk,"0.9.14","esm2017")}();class $b{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Mk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $b(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new $b(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new $b(l,this,this._ref)):{next:t.next?l=>t.next(new $b(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Nk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sc(e,this._service))}get items(){return this._delegate.items.map(e=>new sc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function dB(n,e){return bk(n,e)}(this._delegate,e);return new sc(t,this.storage)}get root(){return new sc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Mk(function iB(n,e,t){return function qV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new wk(n,new Ju(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Do.RAW,r){this._throwIfRoot("putString");const i=ER(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Mk(new wk(this._delegate,new Ju(i.data,!0),a),this)}listAll(){return function uB(n){return function ZV(n){const e={prefixes:[],items:[]};return Ek(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new Nk(e,this.storage))}list(e){return function aB(n,e){return Ck(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Nk(t,this.storage))}getMetadata(){return function sB(n){return function YV(n){n._throwIfRoot("getMetadata");const e=pk(n.storage,n._location,Vw());return n.storage.makeRequestWithTokens(e,du)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function oB(n,e){return function QV(n,e){n._throwIfRoot("updateMetadata");const t=function PV(n,e,t,r){const a=ic(e.fullServerUrl(),n.host,n._protocol),d=bR(t,r),v=n.maxOperationRetryTime,T=new Xu(a,"PATCH",jb(n,r),v);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=d,T.errorHandler=Bw(e),T}(n.storage,n._location,e,Vw());return n.storage.makeRequestWithTokens(t,du)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function lB(n){return JV(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function cB(n){return function XV(n){n._throwIfRoot("deleteObject");const e=function MV(n,e){const r=ic(e.fullServerUrl(),n.host,n._protocol),d=new Xu(r,"DELETE",function l(g,v){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Bw(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,du)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw rk(e)}}class kk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Ok(e))throw Xm("ref() expected a child path but got a URL, use refFromURL instead.");return new sc(xk(this._delegate,e),this)}refFromURL(e){if(!Ok(e))throw Xm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Yi.makeFromUrl(e,this._delegate.host)}catch{throw Xm("refFromUrl() expected a valid full URL but got an invalid one.")}return new sc(xk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Pk(n,e,t,r={}){!function rB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Ok(n){return/^[A-Za-z]+:\/\//.test(n)}function _B(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new kk(t,r)}function Lk(n){const e=function vB(n){return new Er.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function FU(n,e=Sd.z){return(0,Xn.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function g(){const v=l+n,T=e.now();if(T<v)return i=this.schedule(void 0,v-T),void r.add(i);d()}t.subscribe((0,Wn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ot.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Wb(n){return{getDownloadURL:()=>ut(void 0).pipe(mn.fc,Gn(()=>n.getDownloadURL()),mn.iC),getMetadata:()=>ut(void 0).pipe(mn.fc,Gn(()=>n.getMetadata()),mn.iC),delete:()=>(0,on.D)(n.delete()),child:e=>Wb(n.child(e)),updateMetadata:e=>(0,on.D)(n.updateMetadata(e)),put:(e,t)=>Lk(n.put(e,t)),putString:(e,t,r)=>Lk(n.putString(e,t,r)),list:e=>(0,on.D)(n.list(e)),listAll:()=>(0,on.D)(n.listAll())}}!function yB(n){const e={TaskState:ys,TaskEvent:FV,StringFormat:Do,Storage:kk,Reference:sc};n.INTERNAL.registerComponent(new _a.wA("storage-compat",_B,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Vg.Z);const wB=new m.OlP("angularfire2.storageBucket"),IB=new m.OlP("angularfire2.storage.maxUploadRetryTime"),EB=new m.OlP("angularfire2.storage.maxOperationRetryTime"),CB=new m.OlP("angularfire2.storage.use-emulator");let bB=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S){const P=(0,jr.on)(t,l,r);this.storage=(0,jr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=l.runOutsideAngular(()=>P.storage(i||void 0)),G=T;return G&&V.useEmulator(...G),g&&V.setMaxUploadRetryTime(g),v&&V.setMaxOperationRetryTime(v),V},[g,v])}ref(t){return Wb(this.storage.ref(t))}refFromURL(t){return Wb(this.storage.refFromURL(t))}upload(t,r,i){return Wb(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(jr.Dh),m.LFG(jr.xv,8),m.LFG(wB,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(IB,8),m.LFG(EB,8),m.LFG(CB,8),m.LFG(dd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),DB=(()=>{class n{constructor(){Pg.Z.registerVersion("angularfire",mn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[bB],imports:[TB]}),n})();function RR(){return(0,Xn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Et,SB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oc={},xR=xR||{},Gt=SB||self;function Gb(){}function zb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var PR="closure_uid_"+(1e9*Math.random()>>>0),RB=0;function xB(n,e,t){return n.call.apply(n.bind,arguments)}function PB(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Qi(n,e,t){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xB:PB).apply(null,arguments)}function qb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Zd(){this.s=this.s,this.o=this.o}Zd.prototype.s=!1,Zd.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function AB(n){Object.prototype.hasOwnProperty.call(n,PR)&&n[PR]||(n[PR]=++RB)}(this)},Zd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function MR(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Uk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zb(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ji(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ji.prototype.h=function(){this.defaultPrevented=!0};var NB=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",Gb,e),Gt.removeEventListener("test",Gb,e)}catch{}return n}();function Kb(n){return/^[\s\xa0]*$/.test(n)}var Vk=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function NR(n,e){return n<e?-1:n>e?1:0}function Zb(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function tl(n){return-1!=Zb().indexOf(n)}function kR(n){return kR[" "](n),n}kR[" "]=Gb;var Yb,n,OB=tl("Opera"),n_=tl("Trident")||tl("MSIE"),Bk=tl("Edge"),OR=Bk||n_,jk=tl("Gecko")&&!(-1!=Zb().toLowerCase().indexOf("webkit")&&!tl("Edge"))&&!(tl("Trident")||tl("MSIE"))&&!tl("Edge"),LB=-1!=Zb().toLowerCase().indexOf("webkit")&&!tl("Edge");function Hk(){var n=Gt.document;return n?n.documentMode:void 0}e:{var LR="",FR=(n=Zb(),jk?/rv:([^\);]+)(\)|;)/.exec(n):Bk?/Edge\/([\d\.]+)/.exec(n):n_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):LB?/WebKit\/(\S+)/.exec(n):OB?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(FR&&(LR=FR?FR[1]:""),n_){var UR=Hk();if(null!=UR&&UR>parseFloat(LR)){Yb=String(UR);break e}}Yb=LR}var FB={};var VB=Gt.document&&n_&&(Hk()||parseInt(Yb,10))||void 0;function Hw(n,e){if(Ji.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jk){e:{try{kR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:BB[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hw.X.h.call(this)}}Pi(Hw,Ji);var BB={2:"touch",3:"pen",4:"mouse"};Hw.prototype.h=function(){Hw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $w="closure_listenable_"+(1e6*Math.random()|0),jB=0;function HB(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++jB,this.ba=this.ea=!1}function Qb(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function BR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Wk(n){const e={};for(const t in n)e[t]=n[t];return e}const Gk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zk(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Gk.length;a++)t=Gk[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Jb(n){this.src=n,this.g={},this.h=0}function jR(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Fk(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Qb(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function HR(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Jb.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=HR(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new HB(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var $R="closure_lm_"+(1e6*Math.random()|0),WR={};function qk(n,e,t,r,i){if(r&&r.once)return Zk(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)qk(n,e[a],t,r,i);return null}return t=KR(t),n&&n[$w]?n.N(e,t,jw(r)?!!r.capture:!!r,i):Kk(n,e,t,!1,r,i)}function Kk(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=jw(i)?!!i.capture:!!i,d=zR(n);if(d||(n[$R]=d=new Jb(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function $B(){const e=WB;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)NB||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Qk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Zk(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Zk(n,e[a],t,r,i);return null}return t=KR(t),n&&n[$w]?n.O(e,t,jw(r)?!!r.capture:!!r,i):Kk(n,e,t,!0,r,i)}function Yk(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Yk(n,e[a],t,r,i);else r=jw(r)?!!r.capture:!!r,t=KR(t),n&&n[$w]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=HR(a=n.g[e],t,r,i))&&(Qb(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=zR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=HR(e,t,r,i)),(t=-1<n?e[n]:null)&&GR(t))}function GR(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[$w])jR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Qk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zR(e))?(jR(t,n),0==t.h&&(t.src=null,e[$R]=null)):Qb(n)}}}function Qk(n){return n in WR?WR[n]:WR[n]="on"+n}function WB(n,e){if(n.ba)n=!0;else{e=new Hw(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&GR(n),n=t.call(r,e)}return n}function zR(n){return(n=n[$R])instanceof Jb?n:null}var qR="__closure_events_fn_"+(1e9*Math.random()>>>0);function KR(n){return"function"==typeof n?n:(n[qR]||(n[qR]=function(e){return n.handleEvent(e)}),n[qR])}function hi(){Zd.call(this),this.i=new Jb(this),this.P=this,this.I=null}function Mi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ji(e,n);else if(e instanceof Ji)e.target=e.target||n;else{var i=e;zk(e=new Ji(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Xb(l,r,!0,e)&&i}if(i=Xb(l=e.g=n,r,!0,e)&&i,i=Xb(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Xb(l=e.g=t[a],r,!1,e)&&i}function Xb(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var d=l.listener,g=l.ha||l.src;l.ea&&jR(n.i,l),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}Pi(hi,Zd),hi.prototype[$w]=!0,hi.prototype.removeEventListener=function(n,e,t,r){Yk(this,n,e,t,r)},hi.prototype.M=function(){if(hi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qb(t[r]);delete n.g[e],n.h--}}this.I=null},hi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},hi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ZR=Gt.JSON.stringify;function GB(){var n=eO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var YR,Jk=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qB,n=>n.reset());class qB{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function KB(n){Gt.setTimeout(()=>{throw n},0)}function Xk(n,e){YR||function ZB(){var n=Gt.Promise.resolve(void 0);YR=function(){n.then(YB)}}(),QR||(YR(),QR=!0),eO.add(n,e)}var QR=!1,eO=new class zB{constructor(){this.h=this.g=null}add(e,t){const r=Jk.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function YB(){for(var n;n=GB();){try{n.h.call(n.g)}catch(t){KB(t)}var e=Jk;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}QR=!1}function eT(n,e){hi.call(this),this.h=n||1,this.g=e||Gt,this.j=Qi(this.lb,this),this.l=Date.now()}function JR(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function XR(n,e,t){if("function"==typeof n)t&&(n=Qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function tO(n){n.g=XR(()=>{n.g=null,n.i&&(n.i=!1,tO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(eT,hi),(Et=eT.prototype).ca=!1,Et.R=null,Et.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Mi(this,"tick"),this.ca&&(JR(this),this.start()))}},Et.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){eT.X.M.call(this),JR(this),delete this.g};class QB extends Zd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tO(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ww(n){Zd.call(this),this.h=n,this.g={}}Pi(Ww,Zd);var nO=[];function rO(n,e,t,r){Array.isArray(t)||(t&&(nO[0]=t.toString()),t=nO);for(var i=0;i<t.length;i++){var a=qk(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function iO(n){BR(n.g,function(e,t){this.g.hasOwnProperty(t)&&GR(e)},n),n.g={}}function tT(){this.g=!0}function r_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function t2(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return ZR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ww.prototype.M=function(){Ww.X.M.call(this),iO(this)},Ww.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tT.prototype.Aa=function(){this.g=!1},tT.prototype.info=function(){};var Kf={},sO=null;function nT(){return sO=sO||new hi}function oO(n){Ji.call(this,Kf.Pa,n)}function Gw(n){const e=nT();Mi(e,new oO(e))}function aO(n,e){Ji.call(this,Kf.STAT_EVENT,n),this.stat=e}function vs(n){const e=nT();Mi(e,new aO(e,n))}function uO(n,e){Ji.call(this,Kf.Qa,n),this.size=e}function zw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}Kf.Pa="serverreachability",Pi(oO,Ji),Kf.STAT_EVENT="statevent",Pi(aO,Ji),Kf.Qa="timingevent",Pi(uO,Ji);var rT={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},lO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ex(){}function dO(){}ex.prototype.h=null;var rx,qw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function tx(){Ji.call(this,"d")}function nx(){Ji.call(this,"c")}function iT(){}function Kw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ww(this),this.O=n2,this.T=new eT(n=OR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new hO}function hO(){this.i=null,this.g="",this.h=!1}Pi(tx,Ji),Pi(nx,Ji),Pi(iT,ex),iT.prototype.g=function(){return new XMLHttpRequest},iT.prototype.i=function(){return{}},rx=new iT;var n2=45e3,ix={},sT={};function sx(n,e,t){n.K=1,n.v=lT(ac(e)),n.s=t,n.P=!0,fO(n,null)}function fO(n,e){n.F=Date.now(),Zw(n),n.A=ac(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),CO(t.i,"t",r),n.C=0,t=n.l.H,n.h=new hO,n.g=qO(n.l,t?e:null,!n.s),0<n.N&&(n.L=new QB(Qi(n.La,n,n.g),n.N)),rO(n.S,n.g,"readystatechange",n.ib),e=n.H?Wk(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Gw(),function JB(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),g=0;g<d.length;g++){var v=d[g].split("=");if(1<v.length){var T=v[0];v=v[1];var S=T.split("_");l=2<=S.length&&"type"==S[1]?l+(T+"=")+v+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function pO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function gO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=r2(n,t),i==sT){4==e&&(n.o=4,vs(14),r=!1),r_(n.j,n.m,null,"[Incomplete Response]");break}if(i==ix){n.o=4,vs(15),r_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}r_(n.j,n.m,i,null),ox(n,i)}pO(n)&&i!=sT&&i!=ix&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),px(e),e.K=!0,vs(11))):(r_(n.j,n.m,t,"[Invalid Chunked Response]"),Zf(n),Yw(n))}function r2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sT:(t=Number(e.substring(t,r)),isNaN(t)?ix:(r+=1)+t>e.length?sT:(e=e.substr(r,t),n.C=r+t,e))}function Zw(n){n.V=Date.now()+n.O,mO(n,n.O)}function mO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zw(Qi(n.gb,n),e)}function oT(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Yw(n){0==n.l.G||n.I||$O(n.l,n)}function Zf(n){oT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,JR(n.T),iO(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ox(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ax(t.h,n)))if(!n.J&&ax(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;gT(t),fT(t)}fx(t),vs(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=zw(Qi(t.cb,t),6e3));if(1>=DO(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Qf(t,11)}else if((n.J||t.g==n)&&gT(t),!Kb(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const T=v[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const G=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(ux(a,a.h),a.h=null))}if(r.D){const ce=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,dr(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=zO(r,r.H?r.ka:null,r.V),l.J){SO(r.h,l);var d=l,g=r.J;g&&d.setTimeout(g),d.B&&(oT(d),Zw(d)),r.g=l}else jO(r);0<t.i.length&&pT(t)}else"stop"!=v[0]&&"close"!=v[0]||Qf(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Qf(t,7):hx(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}Gw()}catch{}}function _O(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zb(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function s2(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zb(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function i2(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Et=Kw.prototype).setTimeout=function(n){this.O=n},Et.ib=function(n){n=n.target;const e=this.L;e&&3==uc(n)?e.l():this.La(n)},Et.La=function(n){try{if(n==this.g)e:{const T=uc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||OR||this.g&&(this.h.h||this.g.fa()||OO(this.g)))){this.I||4!=T||7==e||Gw(),oT(this);var t=this.g.aa();this.Y=t;t:if(pO(this)){var r=OO(this.g);n="";var i=r.length,a=4==uc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zf(this),Yw(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function XB(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kb(d)){var v=d;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,vs(12),Zf(this),Yw(this);break e}r_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ox(this,t)}this.P?(gO(this,T,l),OR&&this.i&&3==T&&(rO(this.S,this.T,"tick",this.hb),this.T.start())):(r_(this.j,this.m,l,null),ox(this,l)),4==T&&Zf(this),this.i&&!this.I&&(4==T?$O(this.l,this):(this.i=!1,Zw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,vs(12)):(this.o=0,vs(13)),Zf(this),Yw(this)}}}catch{}},Et.hb=function(){if(this.g){var n=uc(this.g),e=this.g.fa();this.C<e.length&&(oT(this),gO(this,n,e),this.i&&4!=n&&Zw(this))}},Et.cancel=function(){this.I=!0,Zf(this)},Et.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function e2(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Gw(),vs(17)),Zf(this),this.o=2,Yw(this)):mO(this,this.V-n)};var yO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yf(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Yf){this.h=void 0!==e?e:n.h,aT(this,n.j),this.s=n.s,this.g=n.g,uT(this,n.m),this.l=n.l,e=n.i;var t=new Xw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vO(this,t),this.o=n.o}else n&&(t=String(n).match(yO))?(this.h=!!e,aT(this,t[1]||"",!0),this.s=Qw(t[2]||""),this.g=Qw(t[3]||"",!0),uT(this,t[4]),this.l=Qw(t[5]||"",!0),vO(this,t[6]||"",!0),this.o=Qw(t[7]||"")):(this.h=!!e,this.i=new Xw(null,this.h))}function ac(n){return new Yf(n)}function aT(n,e,t){n.j=t?Qw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function vO(n,e,t){e instanceof Xw?(n.i=e,function h2(n,e){e&&!n.j&&(Yd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(IO(this,r),CO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Jw(e,c2)),n.i=new Xw(e,n.h))}function dr(n,e,t){n.i.set(e,t)}function lT(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,a2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function a2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Yf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jw(e,wO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jw(e,wO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jw(t,"/"==t.charAt(0)?l2:u2,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jw(t,d2)),n.join("")};var wO=/[#\/\?@]/g,u2=/[#\?:]/g,l2=/[#\?]/g,c2=/[#\?@]/g,d2=/#/g;function Xw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yd(n){n.g||(n.g=new Map,n.h=0,n.i&&function o2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function IO(n,e){Yd(n),e=i_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function EO(n,e){return Yd(n),e=i_(n,e),n.g.has(e)}function CO(n,e,t){IO(n,e),0<t.length&&(n.i=null,n.g.set(i_(n,e),MR(t)),n.h+=t.length)}function i_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function bO(n){this.l=n||p2,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Et=Xw.prototype).add=function(n,e){Yd(this),this.i=null,n=i_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Et.forEach=function(n,e){Yd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Et.oa=function(){Yd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Et.W=function(n){Yd(this);let e=[];if("string"==typeof n)EO(this,n)&&(e=e.concat(this.g.get(i_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Et.set=function(n,e){return Yd(this),this.i=null,EO(this,n=i_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Et.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var p2=10;function TO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DO(n){return n.h?1:n.g?n.g.size:0}function ax(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ux(n,e){n.g?n.g.add(e):n.h=e}function SO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function AO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return MR(n.i)}function lx(){}function g2(){this.g=new lx}function m2(n,e,t){const r=t||"";try{_O(n,function(i,a){let l=i;jw(i)&&(l=ZR(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function cT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function eI(n){this.l=n.ac||null,this.j=n.jb||!1}function dT(n,e){hi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bO.prototype.cancel=function(){if(this.i=AO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},lx.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},lx.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Pi(eI,ex),eI.prototype.g=function(){return new dT(this.l,this.j)},eI.prototype.i=function(n){return function(){return n}}({}),Pi(dT,hi);var cx=0;function RO(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function tI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,nI(n)}function nI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Et=dT.prototype).open=function(n,e){if(this.readyState!=cx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,nI(this)},Et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tI(this)),this.readyState=cx},Et.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,nI(this)),this.g&&(this.readyState=3,nI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RO(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Et.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?tI(this):nI(this),3==this.readyState&&RO(this)}},Et.Va=function(n){this.g&&(this.response=this.responseText=n,tI(this))},Et.Ua=function(n){this.g&&(this.response=n,tI(this))},Et.ga=function(){this.g&&tI(this)},Et.setRequestHeader=function(n,e){this.v.append(n,e)},Et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var y2=Gt.JSON.parse;function br(n){hi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xO,this.K=this.L=!1}Pi(br,hi);var xO="",v2=/^https?$/i,w2=["POST","PUT"];function PO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,MO(n),hT(n)}function MO(n){n.D||(n.D=!0,Mi(n,"complete"),Mi(n,"error"))}function NO(n){if(n.h&&typeof xR<"u"&&(!n.C[1]||4!=uc(n)||2!=n.aa()))if(n.v&&4==uc(n))XR(n.Ha,0,n);else if(Mi(n,"readystatechange"),4==uc(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(yO)[1]||null;if(!i&&Gt.self&&Gt.self.location){var a=Gt.self.location.protocol;i=a.substr(0,a.length-1)}r=!v2.test(i?i.toLowerCase():"")}t=r}if(t)Mi(n,"complete"),Mi(n,"success");else{n.m=6;try{var l=2<uc(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",MO(n)}}finally{hT(n)}}}function hT(n,e){if(n.g){kO(n);const t=n.g,r=n.C[0]?Gb:null;n.g=null,n.C=null,e||Mi(n,"ready");try{t.onreadystatechange=r}catch{}}}function kO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function uc(n){return n.g?n.g.readyState:0}function OO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function LO(n){let e="";return BR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function dx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=LO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function rI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function FO(n){this.Ca=0,this.i=[],this.j=new tT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=rI("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=rI("baseRetryDelayMs",5e3,n),this.bb=rI("retryDelaySeedMs",1e4,n),this.$a=rI("forwardChannelMaxRetries",2,n),this.ta=rI("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new bO(n&&n.concurrentRequestLimit),this.Fa=new g2,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function hx(n){if(UO(n),3==n.G){var e=n.U++,t=ac(n.F);dr(t,"SID",n.I),dr(t,"RID",e),dr(t,"TYPE","terminate"),iI(n,t),(e=new Kw(n,n.j,e,void 0)).K=2,e.v=lT(ac(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qO(e.l,null),e.g.da(e.v)),e.F=Date.now(),Zw(e)}GO(n)}function fT(n){n.g&&(px(n),n.g.cancel(),n.g=null)}function UO(n){fT(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),gT(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function pT(n){TO(n.h)||n.m||(n.m=!0,Xk(n.Ja,n),n.C=0)}function VO(n,e){var t;t=e?e.m:n.U++;const r=ac(n.F);dr(r,"SID",n.I),dr(r,"RID",t),dr(r,"AID",n.T),iI(n,r),n.o&&n.s&&dx(r,n.o,n.s),t=new Kw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=BO(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ux(n.h,t),sx(t,r,e)}function iI(n,e){n.ia&&BR(n.ia,function(t,r){dr(e,r,t)}),n.l&&_O({},function(t,r){dr(e,r,t)})}function BO(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Qi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let g=0;g<t;g++){let v=i[g].h;const T=i[g].g;if(v-=a,0>v)a=Math.max(0,i[g].h-100),d=!1;else try{m2(T,l,"req"+v+"_")}catch{r&&r(T)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function jO(n){n.g||n.u||(n.Z=1,Xk(n.Ia,n),n.A=0)}function fx(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=zw(Qi(n.Ia,n),WO(n,n.A)),n.A++,0))}function px(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function HO(n){n.g=new Kw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ac(n.sa);dr(e,"RID","rpc"),dr(e,"SID",n.I),dr(e,"CI",n.L?"0":"1"),dr(e,"AID",n.T),dr(e,"TYPE","xmlhttp"),iI(n,e),n.o&&n.s&&dx(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=lT(ac(e)),t.s=null,t.P=!0,fO(t,n)}function gT(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function $O(n,e){var t=null;if(n.g==e){gT(n),px(n),n.g=null;var r=2}else{if(!ax(n.h,e))return;t=e.D,SO(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Mi(r=nT(),new uO(r,t)),pT(n)}else jO(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function E2(n,e){return!(DO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=zw(Qi(n.Ja,n,e),WO(n,n.C)),n.C++,0)))}(n,e)||2==r&&fx(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Qf(n,5);break;case 4:Qf(n,10);break;case 3:Qf(n,6);break;default:Qf(n,2)}}function WO(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Qf(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Qi(n.kb,n);t||(t=new Yf("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||aT(t,"https"),lT(t)),function _2(n,e){const t=new tT;if(Gt.Image){const r=new Image;r.onload=qb(cT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=qb(cT,t,r,"TestLoadImage: error",!1,e),r.onabort=qb(cT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=qb(cT,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else vs(2);n.G=0,n.l&&n.l.va(e),GO(n),UO(n)}function GO(n){if(n.G=0,n.la=[],n.l){const e=AO(n.h);(0!=e.length||0!=n.i.length)&&(Uk(n.la,e),Uk(n.la,n.i),n.h.i.length=0,MR(n.i),n.i.length=0),n.l.ua()}}function zO(n,e,t){var r=t instanceof Yf?ac(t):new Yf(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),uT(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Yf(null,void 0);r&&aT(a,r),e&&(a.g=e),i&&uT(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&dr(r,t,e),dr(r,"VER",n.ma),iI(n,r),r}function qO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new br(t&&n.Da&&!n.ra?new eI({jb:!0}):n.ra)).Ka(n.H),e}function KO(){}function mT(){if(n_&&!(10<=Number(VB)))throw Error("Environmental error: no available transport.")}function So(n,e){hi.call(this),this.g=new FO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Kb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new s_(this)}function ZO(n){tx.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function YO(){nx.call(this),this.status=1}function s_(n){this.g=n}(Et=br.prototype).Ka=function(n){this.L=n},Et.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rx.g(),this.C=function cO(n){return n.h||(n.h=n.i())}(this.u?this.u:rx),this.g.onreadystatechange=Qi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void PO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=Fk(w2,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kO(this),0<this.B&&((this.K=function I2(n){return n_&&function UB(){return function kB(n){var e=FB;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Vk(String(Yb)).split("."),t=Vk("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=NR(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||NR(0==i[2].length,0==a[2].length)||NR(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qi(this.qa,this)):this.A=XR(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){PO(this,a)}},Et.qa=function(){typeof xR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mi(this,"timeout"),this.abort(8))},Et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Mi(this,"complete"),Mi(this,"abort"),hT(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hT(this,!0)),br.X.M.call(this)},Et.Ha=function(){this.s||(this.F||this.v||this.l?NO(this):this.fb())},Et.fb=function(){NO(this)},Et.aa=function(){try{return 2<uc(this)?this.g.status:-1}catch{return-1}},Et.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Et.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),y2(e)}},Et.Ea=function(){return this.m},Et.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Et=FO.prototype).ma=8,Et.G=1,Et.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Kw(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Wk(a),zk(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=BO(this,i,e),dr(t=ac(this.F),"RID",n),dr(t,"CVER",22),this.D&&dr(t,"X-HTTP-Session-Id",this.D),iI(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(LO(a)))+"&"+e:this.o&&dx(t,this.o,a)),ux(this.h,i),this.Ya&&dr(t,"TYPE","init"),this.O?(dr(t,"$req",e),dr(t,"SID","null"),i.Z=!0,sx(i,t,null)):sx(i,t,e),this.G=2}}else 3==this.G&&(n?VO(this,n):0==this.i.length||TO(this.h)||VO(this))},Et.Ia=function(){if(this.u=null,HO(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=zw(Qi(this.eb,this),n)}},Et.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,vs(10),fT(this),HO(this))},Et.cb=function(){null!=this.v&&(this.v=null,fT(this),fx(this),vs(19))},Et.kb=function(n){n?(this.j.info("Successfully pinged google.com"),vs(2)):(this.j.info("Failed to ping google.com"),vs(1))},(Et=KO.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Ra=function(){},mT.prototype.g=function(n,e){return new So(n,e)},Pi(So,hi),So.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;vs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=zO(n,null,n.V),pT(n)},So.prototype.close=function(){hx(this.g)},So.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ZR(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&pT(e)},So.prototype.M=function(){this.g.l=null,delete this.j,hx(this.g),delete this.g,So.X.M.call(this)},Pi(ZO,tx),Pi(YO,nx),Pi(s_,KO),s_.prototype.xa=function(){Mi(this.g,"a")},s_.prototype.wa=function(n){Mi(this.g,new ZO(n))},s_.prototype.va=function(n){Mi(this.g,new YO)},s_.prototype.ua=function(){Mi(this.g,"b")},mT.prototype.createWebChannel=mT.prototype.g,So.prototype.send=So.prototype.u,So.prototype.open=So.prototype.m,So.prototype.close=So.prototype.close,rT.NO_ERROR=0,rT.TIMEOUT=8,rT.HTTP_ERROR=6,lO.COMPLETE="complete",dO.EventType=qw,qw.OPEN="a",qw.CLOSE="b",qw.ERROR="c",qw.MESSAGE="d",hi.prototype.listen=hi.prototype.N,br.prototype.listenOnce=br.prototype.O,br.prototype.getLastError=br.prototype.Oa,br.prototype.getLastErrorCode=br.prototype.Ea,br.prototype.getStatus=br.prototype.aa,br.prototype.getResponseJson=br.prototype.Sa,br.prototype.getResponseText=br.prototype.fa,br.prototype.send=br.prototype.da,br.prototype.setWithCredentials=br.prototype.Ka;var C2=oc.createWebChannelTransport=function(){return new mT},b2=oc.getStatEventTarget=function(){return nT()},gx=oc.ErrorCode=rT,T2=oc.EventType=lO,D2=oc.Event=Kf,QO=oc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},S2=oc.FetchXmlHttpFactory=eI,_T=oc.WebChannel=dO,A2=oc.XhrIo=br;const JO="@firebase/firestore";class fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fi.UNAUTHENTICATED=new fi(null),fi.GOOGLE_CREDENTIALS=new fi("google-credentials-uid"),fi.FIRST_PARTY=new fi("first-party-uid"),fi.MOCK_USER=new fi("mock-user");let o_="9.14.0";const Qd=new vo.Yd("@firebase/firestore");function mx(){return Qd.logLevel}function We(n,...e){if(Qd.logLevel<=vo.in.DEBUG){const t=e.map(_x);Qd.debug(`Firestore (${o_}): ${n}`,...t)}}function Nr(n,...e){if(Qd.logLevel<=vo.in.ERROR){const t=e.map(_x);Qd.error(`Firestore (${o_}): ${n}`,...t)}}function Jf(n,...e){if(Qd.logLevel<=vo.in.WARN){const t=e.map(_x);Qd.warn(`Firestore (${o_}): ${n}`,...t)}}function _x(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${o_}) INTERNAL ASSERTION FAILED: `+n;throw Nr(e),new Error(e)}function Ut(n,e){n||ft()}function Xe(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class XO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fi.UNAUTHENTICATED))}shutdown(){}}class M2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class N2{constructor(e){this.t=e,this.currentUser=fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const v=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut("string"==typeof r.accessToken),new XO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new fi(e)}}class k2{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=fi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ut(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class O2{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new k2(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L2{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,We("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ut("string"==typeof t.token),this.A=t.token,new e1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function F2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class t1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=F2(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function a_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function n1(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new hr(0,0))}static max(){return new Vt(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sI{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===sI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends sI{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const U2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends sI{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return U2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Fe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Fe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Fe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(fn.fromString(e))}static fromName(e){return new Ze(fn.fromString(e).popFirst(5))}static empty(){return new Ze(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new fn(e.slice()))}}class yT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function yx(n){return n.fields.find(e=>2===e.kind)}function Xf(n){return n.fields.filter(e=>2!==e.kind)}yT.UNKNOWN_ID=-1;class vT{constructor(e,t){this.fieldPath=e,this.kind=t}}class oI{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new oI(0,Ao.min())}}function r1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(1e9===r?new hr(t+1,0):new hr(t,r));return new Ao(i,Ze.empty(),e)}function i1(n){return new Ao(n.readTime,n.key,-1)}class Ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ao(Vt.min(),Ze.empty(),-1)}static max(){return new Ao(Vt.max(),Ze.empty(),-1)}}function vx(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const s1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Jd(n){return wx.apply(this,arguments)}function wx(){return wx=(0,Ee.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==s1)throw n;We("LocalStore","Unexpectedly lost primary lease")}),wx.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(T=>{l[v]=T,++d,d===a&&r(l)},T=>i(T))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class wT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Xr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new aI(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Ix(r.target.error);this.P.reject(new aI(e,i))}}static open(e,t,r,i){try{return new wT(t,e.transaction(i,r))}catch(a){throw new aI(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(We("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new H2(t)}}class hu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===hu.D((0,L.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return We("SimpleDb","Removing database:",e),ep(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(hu.N())return!0;const e=(0,L.z$)(),t=hu.D(e),r=0<t&&t<10,i=hu.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(We("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new aI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Fe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Fe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new aI(e,d))},a.onupgradeneeded=l=>{We("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{We("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.F(e);const g=wT.open(a.db,e,l?"readonly":"readwrite",r),v=i(g).next(T=>(g.V(),T)).catch(T=>(g.abort(T),de.reject(T))).toPromise();return v.catch(()=>{}),yield g.v,v}catch(g){const v=g,T="FirebaseError"!==v.name&&d<3;if(We("SimpleDb","Transaction failed with error:",v.message,"Retrying:",T),a.close(),!T)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class j2{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ep(this.U.delete())}}class aI extends Fe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xd(n){return"IndexedDbTransactionError"===n.name}class H2{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(We("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(We("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ep(r)}add(e){return We("SimpleDb","ADD",this.store.name,e,e),ep(this.store.add(e))}get(e){return ep(this.store.get(e)).next(t=>(void 0===t&&(t=null),We("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return We("SimpleDb","DELETE",this.store.name,e),ep(this.store.delete(e))}count(){return We("SimpleDb","COUNT",this.store.name),ep(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){We("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const l=Ix(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const g=new j2(d),v=t(d.primaryKey,d.value,g);if(v instanceof de){const T=v.catch(S=>(g.done(),de.reject(S)));r.push(T)}g.isDone?i():null===g.G?d.continue():d.continue(g.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ep(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ix(r.target.error);t(i)}})}let a1=!1;function Ix(n){const e=hu.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return a1||(a1=!0,setTimeout(()=>{throw r},0)),r}}return n}class $2{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;We("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{We("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Xd(r)?We("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Jd(r)}yield t.nt(6e4)}))}}class W2{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return We("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>(We("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=i1(a);vx(l,r)>0&&(r=l)}),new Ao(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ws{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function u1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function l1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ws.at=-1;class Dr{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new Dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new IT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new IT(this.root,e,this.comparator,!1)}getReverseIterator(){return new IT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new IT(this.root,e,this.comparator,!0)}}class IT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ni.RED,this.left=i??Ni.EMPTY,this.right=a??Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ni(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new c1(this.data.getIterator())}getIteratorFrom(e){return new c1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class c1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function u_(n){return n.hasNext()?n.getNext():void 0}class Ro{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new Ro([])}unionWith(e){let t=new Un(Tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ro(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return a_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eh(n){if(Ut(!!n),"string"==typeof n){let e=0;const t=z2.exec(n);if(Ut(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function np(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function Ex(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function d1(n){const e=n.mapValue.fields.__previous_value__;return Ex(e)?d1(e):e}function uI(n){const e=eh(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}class q2{constructor(e,t,r,i,a,l,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class th{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new th("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof th&&e.projectId===this.projectId&&e.database===this.database}}function lI(n){return null==n}function cI(n){return 0===n&&1/n==-1/0}function h1(n){return"number"==typeof n&&Number.isInteger(n)&&!cI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ET={nullValue:"NULL_VALUE"};function rp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ex(n)?4:m1(n)?9007199254740991:10:ft()}function nl(n,e){if(n===e)return!0;const t=rp(n);if(t!==rp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uI(n).isEqual(uI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=eh(r.timestampValue),l=eh(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,np(n.bytesValue).isEqual(np(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Sr(r.doubleValue),l=Sr(i.doubleValue);return a===l?cI(a)===cI(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return a_(n.arrayValue.values||[],e.arrayValue.values||[],nl);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(u1(a)!==u1(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!nl(a[d],l[d])))return!1;return!0}(n,e);default:return ft()}var i}function dI(n,e){return void 0!==(n.values||[]).find(t=>nl(t,e))}function rh(n,e){if(n===e)return 0;const t=rp(n),r=rp(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Sr(i.integerValue||i.doubleValue),d=Sr(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return f1(n.timestampValue,e.timestampValue);case 4:return f1(uI(n),uI(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=np(i),d=np(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let g=0;g<l.length&&g<d.length;g++){const v=zt(l[g],d[g]);if(0!==v)return v}return zt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=zt(Sr(i.latitude),Sr(a.latitude));return 0!==l?l:zt(Sr(i.longitude),Sr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let g=0;g<l.length&&g<d.length;++g){const v=rh(l[g],d[g]);if(v)return v}return zt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===nh.mapValue&&a===nh.mapValue)return 0;if(i===nh.mapValue)return 1;if(a===nh.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),g=a.fields||{},v=Object.keys(g);d.sort(),v.sort();for(let T=0;T<d.length&&T<v.length;++T){const S=zt(d[T],v[T]);if(0!==S)return S;const P=rh(l[d[T]],g[v[T]]);if(0!==P)return P}return zt(d.length,v.length)}(n.mapValue,e.mapValue);default:throw ft()}}function f1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=eh(n),r=eh(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function l_(n){return Cx(n)}function Cx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=eh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?np(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Cx(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${Cx(r.fields[d])}`;return a+"}"}(n.mapValue):ft();var e}function ip(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bx(n){return!!n&&"integerValue"in n}function hI(n){return!!n&&"arrayValue"in n}function p1(n){return!!n&&"nullValue"in n}function g1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function CT(n){return!!n&&"mapValue"in n}function fI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function m1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function K2(n){return"nullValue"in n?ET:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ip(th.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function Z2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ip(th.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?nh:ft()}function _1(n,e){const t=rh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function y1(n,e){const t=rh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!CT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fI(t)}setAll(e){let t=Tr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=fI(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());CT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];CT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){tp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ki(fI(this.value))}}function v1(n){const e=[];return tp(n.fields,(t,r)=>{const i=new Tr([t]);if(CT(r)){const a=v1(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ro(e)}class tr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new tr(e,0,Vt.min(),Vt.min(),ki.empty(),0)}static newFoundDocument(e,t,r){return new tr(e,1,t,Vt.min(),r,0)}static newNoDocument(e,t){return new tr(e,2,t,Vt.min(),ki.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,Vt.min(),ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Y2{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ht=null}}function w1(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Y2(n,e,t,r,i,a,l)}function sp(n){const e=Xe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+l_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),lI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>l_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>l_(r)).join(",")),e.ht=t}return e.ht}function pI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!sj(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!nl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!T1(n.startAt,e.startAt)&&T1(n.endAt,e.endAt)}function bT(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function TT(n,e){return n.filters.filter(t=>t instanceof Oi&&t.field.isEqual(e))}function I1(n,e,t){let r=ET,i=!0;for(const a of TT(n,e)){let l=ET,d=!0;switch(a.op){case"<":case"<=":l=K2(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=ET}_1({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];_1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function E1(n,e,t){let r=nh,i=!0;for(const a of TT(n,e)){let l=nh,d=!0;switch(a.op){case">=":case">":l=Z2(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=nh}y1({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];y1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Oi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new J2(e,t,r):"array-contains"===t?new tj(e,r):"in"===t?new nj(e,r):"not-in"===t?new rj(e,r):"array-contains-any"===t?new ij(e,r):new Oi(e,t,r)}static lt(e,t,r){return"in"===t?new X2(e,r):new ej(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(rh(t,this.value)):null!==t&&rp(this.value)===rp(t)&&this.ft(rh(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class J2 extends Oi{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.ft(t)}}class X2 extends Oi{constructor(e,t){super(e,"in",t),this.keys=C1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ej extends Oi{constructor(e,t){super(e,"not-in",t),this.keys=C1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function C1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class tj extends Oi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hI(t)&&dI(t.arrayValue,this.value)}}class nj extends Oi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dI(this.value.arrayValue,t)}}class rj extends Oi{constructor(e,t){super(e,"not-in",t)}matches(e){if(dI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dI(this.value.arrayValue,t)}}class ij extends Oi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dI(this.value.arrayValue,r))}}class ih{constructor(e,t){this.position=e,this.inclusive=t}}class c_{constructor(e,t="asc"){this.field=e,this.dir=t}}function sj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function b1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):rh(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function T1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nl(n.position[t],e.position[t]))return!1;return!0}class lc{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=g,this._t=null,this.wt=null}}function D1(n,e,t,r,i,a,l,d){return new lc(n,e,t,r,i,a,l,d)}function d_(n){return new lc(n)}function S1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Tx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Dx(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Sx(n){return null!==n.collectionGroup}function h_(n){const e=Xe(n);if(null===e._t){e._t=[];const t=Dx(e),r=Tx(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new c_(t)),e._t.push(new c_(Tr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new c_(Tr.keyField(),a))}}}return e._t}function ws(n){const e=Xe(n);if(!e.wt)if("F"===e.limitType)e.wt=w1(e.path,e.collectionGroup,h_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of h_(e))t.push(new c_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ih(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ih(e.startAt.position,e.startAt.inclusive):null;e.wt=w1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function DT(n,e,t){return new lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gI(n,e){return pI(ws(n),ws(e))&&n.limitType===e.limitType}function A1(n){return`${sp(ws(n))}|lt:${n.limitType}`}function Ax(n){return`Query(target=${function Q2(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${l_(r.value)}`;var r}).join(", ")}]`),lI(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>l_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>l_(t)).join(",")),`Target(${e})`}(ws(n))}; limitType=${n.limitType})`}function Rx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=b1(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,h_(t),r)||t.endAt&&!function(i,a,l){const d=b1(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,h_(t),r)));var t,r}function R1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function x1(n){return(e,t)=>{let r=!1;for(const i of h_(n)){const a=oj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function oj(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),g=l.data.field(i);return null!==d&&null!==g?rh(d,g):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function P1(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cI(e)?"-0":e}}function M1(n){return{integerValue:""+n}}function N1(n,e){return h1(e)?M1(e):P1(n,e)}class ST{constructor(){this._=void 0}}function aj(n,e,t){return n instanceof f_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof op?O1(n,e):n instanceof ap?L1(n,e):function(r,i){const a=k1(r,i),l=F1(a)+F1(r.yt);return bx(a)&&bx(r.yt)?M1(l):P1(r.It,l)}(n,e)}function uj(n,e,t){return n instanceof op?O1(n,e):n instanceof ap?L1(n,e):t}function k1(n,e){return n instanceof p_?bx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class f_ extends ST{}class op extends ST{constructor(e){super(),this.elements=e}}function O1(n,e){const t=U1(e);for(const r of n.elements)t.some(i=>nl(i,r))||t.push(r);return{arrayValue:{values:t}}}class ap extends ST{constructor(e){super(),this.elements=e}}function L1(n,e){let t=U1(e);for(const r of n.elements)t=t.filter(i=>!nl(i,r));return{arrayValue:{values:t}}}class p_ extends ST{constructor(e,t){super(),this.It=e,this.yt=t}}function F1(n){return Sr(n.integerValue||n.doubleValue)}function U1(n){return hI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mI{constructor(e,t){this.field=e,this.transform=t}}class cj{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function AT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class RT{}function V1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new m_(n.key,fr.none()):new g_(n.key,n.data,fr.none());{const t=n.data,r=ki.empty();let i=new Un(Tr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new cc(n.key,r,new Ro(i.toArray()),fr.none())}}function dj(n,e,t){n instanceof g_?function(r,i,a){const l=r.value.clone(),d=H1(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof cc?function(r,i,a){if(!AT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=H1(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(j1(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _I(n,e,t,r){return n instanceof g_?function(i,a,l,d){if(!AT(i.precondition,a))return l;const g=i.value.clone(),v=$1(i.fieldTransforms,d,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof cc?function(i,a,l,d){if(!AT(i.precondition,a))return l;const g=$1(i.fieldTransforms,d,a),v=a.data;return v.setAll(j1(i)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,AT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function hj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=k1(r.transform,i||null);null!=a&&(null===t&&(t=ki.empty()),t.set(r.field,a))}return t||null}function B1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&a_(t,r,(i,a)=>function lj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof op&&r instanceof op||t instanceof ap&&r instanceof ap?a_(t.elements,r.elements,nl):t instanceof p_&&r instanceof p_?nl(t.yt,r.yt):t instanceof f_&&r instanceof f_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class g_ extends RT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cc extends RT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function j1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function H1(n,e,t){const r=new Map;Ut(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,uj(l,d,t[i]))}return r}function $1(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,aj(a,l,e))}return r}class m_ extends RT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xx extends RT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fj{constructor(e){this.count=e}}var Hr,pn;function W1(n){switch(n){default:return ft();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function G1(n){if(void 0===n)return Nr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Hr.OK:return _e.OK;case Hr.CANCELLED:return _e.CANCELLED;case Hr.UNKNOWN:return _e.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return _e.INTERNAL;case Hr.UNAVAILABLE:return _e.UNAVAILABLE;case Hr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Hr.NOT_FOUND:return _e.NOT_FOUND;case Hr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Hr.ABORTED:return _e.ABORTED;case Hr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Hr.DATA_LOSS:return _e.DATA_LOSS;default:return ft()}}(pn=Hr||(Hr={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class sh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){tp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return l1(this.inner)}size(){return this.innerSize}}const pj=new Dr(Ze.comparator);function Gs(){return pj}const z1=new Dr(Ze.comparator);function yI(...n){let e=z1;for(const t of n)e=e.insert(t.key,t);return e}function q1(n){let e=z1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function rl(){return vI()}function K1(){return vI()}function vI(){return new sh(n=>n.toString(),(n,e)=>n.isEqual(e))}const gj=new Dr(Ze.comparator),mj=new Un(Ze.comparator);function Jt(...n){let e=mj;for(const t of n)e=e.add(t);return e}const _j=new Un(zt);function xT(){return _j}class wI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,II.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wI(Vt.min(),i,xT(),Gs(),Jt())}}class II{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new II(r,t,Jt(),Jt(),Jt())}}class PT{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Z1{constructor(e,t){this.targetId=e,this.At=t}}class Y1{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Q1{constructor(){this.Rt=0,this.bt=X1(),this.Pt=ei.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Jt(),t=Jt(),r=Jt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new II(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=X1()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class yj{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Gs(),this.qt=J1(),this.Kt=new Un(zt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(bT(a))if(0===r){const l=new Ze(a.path);this.jt(t,l,tr.newNoDocument(l,Vt.min()))}else Ut(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&bT(d.target)){const g=new Ze(d.target.path);null!==this.Ut.get(g)||this.ee(l,g)||this.jt(l,g,tr.newNoDocument(g,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Jt();this.qt.forEach((a,l)=>{let d=!0;l.forEachWhile(g=>{const v=this.Xt(g);return!v||2===v.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new wI(e,t,this.Kt,this.Ut,r);return this.Ut=Gs(),this.qt=J1(),this.Kt=new Un(zt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Q1,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Un(zt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||We("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Q1),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function J1(){return new Dr(Ze.comparator)}function X1(){return new Dr(Ze.comparator)}const vj={asc:"ASCENDING",desc:"DESCENDING"},wj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ij{constructor(e,t){this.databaseId=e,this.gt=t}}function EI(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eL(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Ej(n,e){return EI(n,e.toTimestamp())}function pi(n){return Ut(!!n),Vt.fromTimestamp(function(e){const t=eh(e);return new hr(t.seconds,t.nanos)}(n))}function Px(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function tL(n){const e=fn.fromString(n);return Ut(lL(e)),e}function CI(n,e){return Px(n.databaseId,e.path)}function il(n,e){const t=tL(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(rL(t))}function Mx(n,e){return Px(n.databaseId,e)}function nL(n){const e=tL(n);return 4===e.length?fn.emptyPath():rL(e)}function bI(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rL(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iL(n,e,t){return{name:CI(n,e),fields:t.value.mapValue.fields}}function sL(n,e,t){const r=il(n,e.name),i=pi(e.updateTime),a=new ki({mapValue:{fields:e.fields}}),l=tr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function TI(n,e){let t;if(e instanceof g_)t={update:iL(n,e.key,e.value)};else if(e instanceof m_)t={delete:CI(n,e.key)};else if(e instanceof cc)t={update:iL(n,e.key,e.data),updateMask:Pj(e.fieldMask)};else{if(!(e instanceof xx))return ft();t={verify:CI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof f_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof op)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ap)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof p_)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Ej(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function Nx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?fr.updateTime(pi(i.updateTime)):void 0!==i.exists?fr.exists(i.exists):fr.none():fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(Ut("REQUEST_TIME"===l.setToServerValue),d=new f_):"appendMissingElements"in l?d=new op(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new ap(l.removeAllFromArray.values||[]):"increment"in l?d=new p_(a,l.increment):ft();const g=Tr.fromServerFormat(l.fieldPath);return new mI(g,d)}(n,i)):[];var i;if(e.update){const i=il(n,e.update.name),a=new ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ro((e.updateMask.fieldPaths||[]).map(v=>Tr.fromServerFormat(v)));return new cc(i,a,l,t,r)}return new g_(i,a,t,r)}if(e.delete){const i=il(n,e.delete);return new m_(i,t)}if(e.verify){const i=il(n,e.verify);return new xx(i,t)}return ft()}function oL(n,e){return{documents:[Mx(n,e.path)]}}function kx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Mx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Mx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(T=>function(S){if("=="===S.op){if(g1(S.value))return{unaryFilter:{field:__(S.field),op:"IS_NAN"}};if(p1(S.value))return{unaryFilter:{field:__(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(g1(S.value))return{unaryFilter:{field:__(S.field),op:"IS_NOT_NAN"}};if(p1(S.value))return{unaryFilter:{field:__(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__(S.field),op:Aj(S.op),value:S.value}}}(T));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:__((T=v).field),direction:Sj(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.gt||lI(v)?v:{value:v});var v,d,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function aL(n){let e=nL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ut(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=uL(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new c_(y_((S=T).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let d=null;t.limit&&(d=function(T){let S;return S="object"==typeof T?T.value:T,lI(S)?null:S}(t.limit));let g=null;var T;t.startAt&&(g=new ih((T=t.startAt).values||[],!!T.before));let v=null;return t.endAt&&(v=function(T){return new ih(T.values||[],!T.before)}(t.endAt)),D1(e,i,l,a,d,"F",g,v)}function uL(n){return n?void 0!==n.unaryFilter?[xj(n)]:void 0!==n.fieldFilter?[Rj(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>uL(e)).reduce((e,t)=>e.concat(t)):ft():[]}function Sj(n){return vj[n]}function Aj(n){return wj[n]}function __(n){return{fieldPath:n.canonicalString()}}function y_(n){return Tr.fromServerFormat(n.fieldPath)}function Rj(n){return Oi.create(y_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function xj(n){switch(n.unaryFilter.op){case"IS_NAN":const e=y_(n.unaryFilter.field);return Oi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=y_(n.unaryFilter.field);return Oi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=y_(n.unaryFilter.field);return Oi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=y_(n.unaryFilter.field);return Oi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function Pj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Is(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cL(e)),e=Mj(n.get(t),e);return cL(e)}function Mj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function cL(n){return n+"\x01\x01"}function sl(n){const e=n.length;if(Ut(e>=2),2===e)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ft(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ft()}a=l+2}return new fn(r)}const dL=["userId","batchId"];function MT(n,e){return[n,Is(e)]}function hL(n,e,t){return[n,Is(e),t]}const Nj={},kj=["prefixPath","collectionGroup","readTime","documentId"],Oj=["prefixPath","collectionGroup","documentId"],Lj=["collectionGroup","readTime","prefixPath","documentId"],Fj=["canonicalId","targetId"],Uj=["targetId","path"],Vj=["path","targetId"],Bj=["collectionId","parent"],jj=["indexId","uid"],Hj=["uid","sequenceNumber"],$j=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wj=["indexId","uid","orderedDocumentKey"],Gj=["userId","collectionPath","documentId"],zj=["userId","collectionPath","largestBatchId"],qj=["userId","collectionGroup","largestBatchId"],fL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Kj=[...fL,"documentOverlays"],pL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gL=pL,Zj=[...gL,"indexConfiguration","indexState","indexEntries"];class Ox extends o1{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function gi(n,e){const t=Xe(n);return hu.M(t.ie,e)}class Lx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&dj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_I(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_I(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=K1();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const g=V1(l,d);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&a_(this.mutations,e.mutations,(t,r)=>B1(t,r))&&a_(this.baseMutations,e.baseMutations,(t,r)=>B1(t,r))}}class Fx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ut(e.mutations.length===r.length);let i=gj;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Fx(e,t,r,i)}}class Ux{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oh{constructor(e,t,r,i,a=Vt.min(),l=Vt.min(),d=ei.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new oh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class mL{constructor(e){this.re=e}}function _L(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:NT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:CI(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:EI(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:up(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:up(e.version)}}var i,a;return r}function NT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function up(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lp(n){const e=new hr(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function cp(n,e){const t=(e.baseMutations||[]).map(a=>Nx(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Nx(n.re,a)),i=hr.fromMillis(e.localWriteTimeMs);return new Lx(e.batchId,i,t,r)}function DI(n){const e=lp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lp(n.lastLimboFreeSnapshotVersion):Vt.min();let r;var i;return void 0!==n.query.documents?(Ut(1===(i=n.query).documents.length),r=ws(d_(nL(i.documents[0])))):r=ws(aL(n.query)),new oh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function yL(n,e){const t=up(e.snapshotVersion),r=up(e.lastLimboFreeSnapshotVersion);let i;i=bT(e.target)?oL(n.re,e.target):kx(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vx(n){const e=aL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DT(e,e.limit,"L"):e}function Bx(n,e){return new Ux(e.largestBatchId,Nx(n.re,e.overlayMutation))}function vL(n,e){const t=e.path.lastSegment();return[n,Is(e.path.popLast()),t]}function wL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:up(r.readTime),documentKey:Is(r.documentKey.path),largestBatchId:r.largestBatchId}}class Qj{getBundleMetadata(e,t){return IL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:lp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return IL(e).put({bundleId:(r=t).id,createTime:up(pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return EL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Vx(i.bundledQuery),readTime:lp(i.readTime)};var i})}saveNamedQuery(e,t){return EL(e).put({name:(r=t).name,readTime:up(pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function IL(n){return gi(n,"bundles")}function EL(n){return gi(n,"namedQueries")}class kT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new kT(e,t.uid||"")}getOverlay(e,t){return SI(e).get(vL(this.userId,t)).next(r=>r?Bx(this.It,r):null)}getOverlays(e,t){const r=rl();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new Ux(t,l);i.push(this.ue(e,d))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Is(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(SI(e).Y("collectionPathOverlayIndex",d))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=rl(),a=Is(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return SI(e).W("collectionPathOverlayIndex",l).next(d=>{for(const g of d){const v=Bx(this.It,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=rl();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return SI(e).Z({index:"collectionGroupOverlayIndex",range:d},(g,v,T)=>{const S=Bx(this.It,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):T.done()}).next(()=>a)}ue(e,t){return SI(e).put(function(r,i,a){const[l,d,g]=vL(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:TI(r.re,a.mutation)}}(this.It,this.userId,t))}}function SI(n){return gi(n,"documentOverlays")}class dp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),cI(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(np(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?m1(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ft()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Jj(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function CL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Jj(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}dp.Te=new dp;class Xj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=CL(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=CL(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class eH{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class tH{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class AI{constructor(){this.Be=new Xj,this.Le=new eH(this.Be),this.Ue=new tH(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class hp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hp(this.indexId,this.documentKey,this.arrayValue,r)}}function fp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bL(n.arrayValue,e.arrayValue),0!==t?t:(t=bL(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function bL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=yx(e);if(void 0!==t&&!this.ze(t))return!1;const r=Xf(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rH{constructor(){this.Ye=new jx}addToCollectionParentIndex(e,t){return this.Ye.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Ao.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class jx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Un(fn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(fn.comparator)).toArray()}}const OT=new Uint8Array(0);class iH{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new jx,this.Ze=new sh(r=>sp(r),(r,i)=>pI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Is(i)};return TL(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[n1(t),""],!1,!0);return TL(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(sl(l.parent))}return r})}addFieldIndex(e,t){const r=LT(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=xI(e);return a.next(d=>{l.put(wL(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=LT(e),i=xI(e),a=RI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=RI(e);let i=!0;const a=new Map;return de.forEach(this.tn(t),l=>this.en(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=Jt();const d=[];return de.forEach(a,(g,v)=>{var T;We("IndexedDbIndexManager",`Using index ${T=g,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${sp(t)}`);const S=function(lt,pt){const Rt=yx(pt);if(void 0===Rt)return null;for(const jt of TT(lt,Rt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(v,g),P=function(lt,pt){const Rt=new Map;for(const jt of Xf(pt))for(const yr of TT(lt,jt.fieldPath))switch(yr.op){case"==":case"in":Rt.set(jt.fieldPath.canonicalString(),yr.value);break;case"not-in":case"!=":return Rt.set(jt.fieldPath.canonicalString(),yr.value),Array.from(Rt.values())}return null}(v,g),V=function(lt,pt){const Rt=[];let jt=!0;for(const yr of Xf(pt)){const fu=0===yr.kind?I1(lt,yr.fieldPath,lt.startAt):E1(lt,yr.fieldPath,lt.startAt);Rt.push(fu.value),jt&&(jt=fu.inclusive)}return new ih(Rt,jt)}(v,g),G=function(lt,pt){const Rt=[];let jt=!0;for(const yr of Xf(pt)){const fu=0===yr.kind?E1(lt,yr.fieldPath,lt.endAt):I1(lt,yr.fieldPath,lt.endAt);Rt.push(fu.value),jt&&(jt=fu.inclusive)}return new ih(Rt,jt)}(v,g),ce=this.nn(g,v,V),ye=this.nn(g,v,G),at=this.sn(g,v,P),ht=this.rn(g.indexId,S,ce,V.inclusive,ye,G.inclusive,at);return de.forEach(ht,lt=>r.J(lt,t.limit).next(pt=>{pt.forEach(Rt=>{const jt=Ze.fromSegments(Rt.documentKey);l.has(jt)||(l=l.add(jt),d.push(jt))})}))}).next(()=>d)}return de.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,d){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),v=g/(null!=t?t.length:1),T=[];for(let S=0;S<g;++S){const P=t?this.on(t[S/v]):OT,V=this.un(e,P,r[S%v],i),G=this.cn(e,P,a[S%v],l),ce=d.map(ye=>this.un(e,P,ye,!0));T.push(...this.createRange(V,G,ce))}return T}un(e,t,r,i){const a=new hp(e,Ze.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new hp(e,Ze.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new nH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;return de.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let d=new Un(Tr.comparator),g=!1;for(const v of l.filters){const T=v;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?g=!0:d=d.add(T.field))}for(const v of l.orderBy)v.field.isKeyField()||(d=d.add(v.field));return d.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new AI;for(const i of Xf(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);dp.Te.ce(a,l)}return r.$e()}on(e){const t=new AI;return dp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new AI;return dp.Te.ce(ip(this.databaseId,t),r.qe(function(i){const a=Xf(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new AI);let a=0;for(const l of Xf(e)){const d=r[a++];for(const g of i)if(this.ln(t,l.fieldPath)&&hI(d))i=this.fn(i,l,d);else{const v=g.qe(l.kind);dp.Te.ce(d,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const g=new AI;g.seed(d.$e()),dp.Te.ce(l,g.qe(t.kind)),a.push(g)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Oi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=LT(e),i=xI(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return de.forEach(a,d=>i.get([d.indexId,this.uid]).next(g=>{l.push(function(v,T){const S=T?new oI(T.sequenceNumber,new Ao(lp(T.readTime),new Ze(sl(T.documentKey)),T.largestBatchId)):oI.empty(),P=v.fields.map(([V,G])=>new vT(Tr.fromServerFormat(V),G));return new yT(v.indexId,v.collectionGroup,P,S)}(d,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=LT(e),a=xI(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>de.forEach(d,g=>a.put(wL(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,g=>this.wn(e,i,g).next(v=>{const T=this.mn(a,g);return v.isEqual(T)?de.resolve():this.gn(e,a,g,v,T)}))))})}yn(e,t,r,i){return RI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return RI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=RI(e);let a=new Un(fp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,d)=>{a=a.add(new hp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}mn(e,t){let r=new Un(fp);const i=this.an(t,e);if(null==i)return r;const a=yx(t);if(null!=a){const l=e.data.field(a.fieldPath);if(hI(l))for(const d of l.arrayValue.values||[])r=r.add(new hp(t.indexId,e.key,this.on(d),i))}else r=r.add(new hp(t.indexId,e.key,OT,i));return r}gn(e,t,r,i,a){We("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,g,v,T,S){const P=d.getIterator(),V=g.getIterator();let G=u_(P),ce=u_(V);for(;G||ce;){let ye=!1,at=!1;if(G&&ce){const ht=v(G,ce);ht<0?at=!0:ht>0&&(ye=!0)}else null!=G?at=!0:ye=!0;ye?(T(ce),ce=u_(V)):at?(S(G),G=u_(P)):(G=u_(P),ce=u_(V))}}(i,a,fp,d=>{l.push(this.yn(e,t,r,d))},d=>{l.push(this.pn(e,t,r,d))}),de.waitFor(l)}_n(e){let t=1;return xI(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>fp(l,d)).filter((l,d,g)=>!d||0!==fp(l,g[d-1]));const i=[];i.push(e);for(const l of r){const d=fp(l,e),g=fp(l,t);if(0===d)i[0]=e.Ke();else if(d>0&&g<0)i.push(l),i.push(l.Ke());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,OT,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,OT,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(DL)}getMinOffset(e,t){return de.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ft())).next(DL)}}function TL(n){return gi(n,"collectionParents")}function RI(n){return gi(n,"indexEntries")}function LT(n){return gi(n,"indexConfiguration")}function xI(n){return gi(n,"indexState")}function DL(n){Ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;vx(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ao(e.readTime,e.documentKey,t)}const SL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zs(e,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function AL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const g=r.Z({range:l},(T,S,P)=>(d++,P.delete()));a.push(g.next(()=>{Ut(1===d)}));const v=[];for(const T of t.mutations){const S=hL(e,T.key.path,t.batchId);a.push(i.delete(S)),v.push(T.key)}return de.waitFor(a).next(()=>v)}function FT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(41943040,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);class UT{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ut(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new UT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ah(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=v_(e),l=ah(e);return l.add({}).next(d=>{Ut("number"==typeof d);const g=new Lx(d,t,r,i),v=function(P,V,G){const ce=G.baseMutations.map(at=>TI(P.re,at)),ye=G.mutations.map(at=>TI(P.re,at));return{userId:V,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ce,mutations:ye}}(this.It,this.userId,g),T=[];let S=new Un((P,V)=>zt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=hL(this.userId,P.key.path,d);S=S.add(P.key.path.popLast()),T.push(l.put(v)),T.push(a.put(V,Nj))}return S.forEach(P=>{T.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[d]=g.keys()}),de.waitFor(T).next(()=>g)})}lookupMutationBatch(e,t){return ah(e).get(t).next(r=>r?(Ut(r.userId===this.userId),cp(this.It,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ah(e).Z({index:"userMutationsIndex",range:i},(l,d,g)=>{d.userId===this.userId&&(Ut(d.batchId>=r),a=cp(this.It,d)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ah(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ah(e).W("userMutationsIndex",t).next(r=>r.map(i=>cp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=MT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return v_(e).Z({range:i},(l,d,g)=>{const[v,T,S]=l,P=sl(T);if(v===this.userId&&t.path.isEqual(P))return ah(e).get(S).next(V=>{if(!V)throw ft();Ut(V.userId===this.userId),a.push(cp(this.It,V))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(zt);const i=[];return t.forEach(a=>{const l=MT(this.userId,a.path),d=IDBKeyRange.lowerBound(l),g=v_(e).Z({range:d},(v,T,S)=>{const[P,V,G]=v,ce=sl(V);P===this.userId&&a.path.isEqual(ce)?r=r.add(G):S.done()});i.push(g)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=MT(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Un(zt);return v_(e).Z({range:l},(g,v,T)=>{const[S,P,V]=g,G=sl(P);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(d=d.add(V)):T.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ah(e).get(a).next(l=>{if(null===l)throw ft();Ut(l.userId===this.userId),r.push(cp(this.It,l))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return AL(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return v_(e).Z({range:r},(a,l,d)=>{if(a[0]===this.userId){const g=sl(a[1]);i.push(g)}else d.done()}).next(()=>{Ut(0===i.length)})})}containsKey(e,t){return RL(e,this.userId,t)}Rn(e){return xL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function RL(n,e,t){const r=MT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return v_(n).Z({range:a,X:!0},(d,g,v)=>{const[T,S,P]=d;T===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function ah(n){return gi(n,"mutations")}function v_(n){return gi(n,"documentMutations")}function xL(n){return gi(n,"mutationQueues")}class pp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new pp(0)}static vn(){return new pp(-1)}}class sH{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new pp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Vt.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>w_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ut(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return w_(e).Z((l,d)=>{const g=DI(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return w_(e).Z((r,i)=>{const a=DI(i);t(a)})}Vn(e){return PL(e).get("targetGlobalKey").next(t=>(Ut(null!==t),t))}Sn(e,t){return PL(e).put("targetGlobalKey",t)}Dn(e,t){return w_(e).put(yL(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return w_(e).Z({range:i,index:"queryTargetsIndex"},(l,d,g)=>{const v=DI(d);pI(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=uh(e);return t.forEach(l=>{const d=Is(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=uh(e);return de.forEach(t,a=>{const l=Is(a.path);return de.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=uh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=uh(e);let a=Jt();return i.Z({range:r,X:!0},(l,d,g)=>{const v=sl(l[1]),T=new Ze(v);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Is(t.path),i=IDBKeyRange.bound([r],[n1(r)],!1,!0);let a=0;return uh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],g,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}se(e,t){return w_(e).get(t).next(r=>r?DI(r):null)}}function w_(n){return gi(n,"targets")}function PL(n){return gi(n,"targetGlobal")}function uh(n){return gi(n,"targetDocuments")}function ML([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class oH{constructor(e){this.xn=e,this.buffer=new Un(ML),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ML(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;We("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xd(r)?We("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Jd(r)}yield t.Fn(3e5)}))}}class uH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Ws.at);const r=new oH(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(SL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SL):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,d,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,d=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),mx()<=vo.in.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(g-d)+`ms\n\tRemoved ${S} documents in `+(v-g)+`ms\nTotal Duration: ${v-T}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class lH{constructor(e,t){this.db=e,this.garbageCollector=new uH(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return VT(e,r)}removeReference(e,t,r){return VT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return VT(e,t)}Gn(e,t){return function(r,i){let a=!1;return xL(r).tt(l=>RL(r,l,i).next(d=>(d&&(a=!0),de.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,d)=>{if(d<=t){const g=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Vt.min()),uh(e).delete([0,Is(l.path)])))});i.push(g)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return VT(e,t)}Kn(e,t){const r=uh(e);let i,a=Ws.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:g,sequenceNumber:v})=>{0===l?(a!==Ws.at&&t(new Ze(sl(i)),a),a=v,i=g):a=Ws.at}).next(()=>{a!==Ws.at&&t(new Ze(sl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function VT(n,e){return uh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Is(e.path),sequenceNumber:r}));var r}class NL{constructor(){this.changes=new sh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cH{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gp(e).put(r)}removeEntry(e,t,r){return gp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],NT(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return gp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(PI(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return gp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(PI(t))},(i,a)=>{r={document:this.jn(t,a),size:FT(a)}}).next(()=>r)}getEntries(e,t){let r=Gs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Gs(),i=new Dr(Ze.comparator);return this.zn(e,t,(a,l)=>{const d=this.jn(a,l);r=r.insert(a,d),i=i.insert(a,FT(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Un(FL);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(PI(i.first()),PI(i.last())),l=i.getIterator();let d=l.getNext();return gp(e).Z({index:"documentKeyIndex",range:a},(g,v,T)=>{const S=Ze.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&FL(d,S)<0;)r(d,null),d=l.getNext();d&&d.isEqual(S)&&(r(d,v),d=l.hasNext()?l.getNext():null),d?T.j(PI(d)):T.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),NT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gp(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=Gs();for(const g of l){const v=this.jn(Ze.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(v.key,v)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=Gs();const l=LL(t,r),d=LL(t,Ao.max());return gp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(g,v,T)=>{const S=this.jn(Ze.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new dH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return OL(e).get("remoteDocumentGlobalKey").next(t=>(Ut(!!t),t))}Qn(e,t){return OL(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Yj(n,e){let t;if(e.document)t=sL(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=lp(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=Ze.fromSegments(e.unknownDocument.path),i=lp(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new hr(r[0],r[1]);return Vt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Vt.min()))return r}return tr.newInvalidDocument(e)}}function kL(n){return new cH(n)}class dH extends NL{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new sh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Un((a,l)=>zt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const g=_L(this.Yn.It,l);i=i.add(a.path.popLast()),r+=FT(g)-d.size,t.push(this.Yn.addEntry(e,a,g))}else if(r-=d.size,this.trackRemovals){const g=_L(this.Yn.It,l.convertToNoDocument(Vt.min()));t.push(this.Yn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function OL(n){return gi(n,"remoteDocumentGlobal")}function gp(n){return gi(n,"remoteDocumentsV14")}function PI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LL(n,e){const t=e.documentKey.path.toArray();return[n,NT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=zt(t[a],r[a]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class hH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class UL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&_I(r.mutation,i,Ro.empty(),hr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=rl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=yI();return a.forEach((d,g)=>{l=l.insert(d,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=rl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let a=Gs();const l=vI(),d=vI();return t.forEach((g,v)=>{const T=r.get(v.key);i.has(v.key)&&(void 0===T||T.mutation instanceof cc)?a=a.insert(v.key,v):void 0!==T&&(l.set(v.key,T.mutation.getFieldMask()),_I(T.mutation,v,T.mutation.getFieldMask(),hr.now()))}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,T)=>l.set(v,T)),t.forEach((v,T)=>{var S;return d.set(v,new hH(T,null!==(S=l.get(v))&&void 0!==S?S:null))}),d))}recalculateAndSaveOverlays(e,t){const r=vI();let i=new Dr((l,d)=>l-d),a=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let T=r.get(g)||Ro.empty();T=d.applyToLocalView(v,T),r.set(g,T);const S=(i.get(d.batchId)||Jt()).add(g);i=i.insert(d.batchId,S)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),v=g.key,T=g.value,S=K1();T.forEach(P=>{if(!a.has(P)){const V=V1(t.get(P),r.get(P));null!==V&&S.set(P,V),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return de.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Sx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(rl());let d=-1,g=a;return l.next(v=>de.forEach(v,(T,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(T)?de.resolve():this.getBaseDocument(e,T,S).next(P=>{g=g.insert(T,P)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,Jt())).next(T=>({batchId:d,changes:q1(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=yI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=yI();return this.indexManager.getCollectionParents(e,i).next(l=>de.forEach(l,d=>{const g=(v=t,T=d.child(i),new lc(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,T;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,g)=>{const v=g.getKey();null===i.get(v)&&(i=i.insert(v,tr.newInvalidDocument(v)))});let l=yI();return i.forEach((d,g)=>{const v=a.get(d);void 0!==v&&_I(v.mutation,g,Ro.empty(),hr.now()),Rx(t,g)&&(l=l.insert(d,g))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(tr.newInvalidDocument(t))}}class fH{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:pi(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Vx(r.bundledQuery),readTime:pi(r.readTime)}),de.resolve();var r}}class pH{constructor(){this.overlays=new Dr(Ze.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=rl();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=rl(),a=t.length+1,l=new Ze(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const g=d.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Dr((v,T)=>v-T);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=a.get(v.largestBatchId);null===T&&(T=rl(),a=a.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const d=rl(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,T)=>d.set(v,T)),!(d.size()>=i)););return de.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ux(t,r));let a=this.es.get(t);void 0===a&&(a=Jt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class Hx{constructor(){this.ns=new Un(mi.ss),this.rs=new Un(mi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new mi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new mi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ze(new fn([])),r=new mi(t,e),i=new mi(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ze(new fn([])),r=new mi(t,e),i=new mi(t,e+1);let a=Jt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new mi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ze.comparator(e.key,t.key)||zt(e._s,t._s)}static os(e,t){return zt(e._s,t._s)||Ze.comparator(e.key,t.key)}}class gH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Un(mi.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new Lx(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new mi(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),i=new mi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);a.push(d)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(zt);return t.forEach(i=>{const a=new mi(i,0),l=new mi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],d=>{r=r.add(d._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const l=new mi(new Ze(a),0);let d=new Un(zt);return this.gs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(d=d.add(g._s)),!0)},l),de.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ut(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const a=new mi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new mi(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mH{constructor(e){this.Es=e,this.docs=new Dr(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=Gs();const a=new Ze(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:g}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||vx(i1(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _H(this)}getSize(e){return de.resolve(this.size)}}class _H extends NL{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class yH{constructor(e){this.persistence=e,this.Rs=new sh(t=>sp(t),pI),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Hx,this.targetCount=0,this.vs=pp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new pp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class VL{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ws(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new yH(this),this.indexManager=new rH,this.remoteDocumentCache=new mH(r=>this.referenceDelegate.xs(r)),this.It=new mL(t),this.Ns=new fH(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new gH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){We("MemoryPersistence","Starting transaction:",e);const i=new vH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class vH extends o1{constructor(e){super(),this.currentSequenceNumber=e}}class BT{constructor(e){this.persistence=e,this.Fs=new Hx,this.$s=null}static Bs(e){return new BT(e)}get Ls(){if(this.$s)return this.$s;throw ft()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Ze.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class wH{constructor(e){this.It=e}$(e,t,r,i){const a=new wT("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dL,{unique:!0}),d.createObjectStore("documentMutations"),BL(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),BL(e)),l=l.next(()=>function(d){const g=d.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,g){return g.store("mutations").W().next(v=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dL,{unique:!0});const T=g.store("mutations"),S=v.map(P=>T.put(P));return de.waitFor(S)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:Gj});g.createIndex("collectionPathOverlayIndex",zj,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",qj,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:kj});g.createIndex("documentKeyIndex",Oj),g.createIndex("collectionGroupIndex",Lj)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:jj}).createIndex("sequenceNumberIndex",Hj,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:$j}).createIndex("documentKeyIndex",Wj,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=FT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>de.forEach(d,g=>{Ut(g.userId===a.userId);const v=cp(this.It,g);return AL(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,d)=>{const g=new fn(l),v=[0,Is(g)];a.push(t.get(v).next(T=>T?de.resolve():t.put({targetId:0,path:Is(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Bj});const r=t.store("collectionParents"),i=new jx,a=l=>{if(i.add(l)){const d=l.lastSegment(),g=l.popLast();return r.put({collectionId:d,parent:Is(g)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const g=new fn(l);return a(g.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,g],v)=>{const T=sl(d);return a(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=DI(i),l=yL(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const d=t.store("remoteDocumentsV14"),g=(v=l,v.document?new Ze(fn.fromString(v.document.name).popFirst(5)):v.noDocument?Ze.fromSegments(v.noDocument.path):v.unknownDocument?Ze.fromSegments(v.unknownDocument.path):ft()).path.toArray();var v;const T={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(T))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=kL(this.It),a=new VL(BT.Bs,this.It.re);return r.W().next(l=>{const d=new Map;return l.forEach(g=>{var v;let T=null!==(v=d.get(g.userId))&&void 0!==v?v:Jt();cp(this.It,g).keys().forEach(S=>T=T.add(S)),d.set(g.userId,T)}),de.forEach(d,(g,v)=>{const T=new fi(v),S=kT.oe(this.It,T),P=a.getIndexManager(T),V=UT.oe(T,this.It,P,a.referenceDelegate);return new UL(i,V,S,P).recalculateAndSaveOverlaysForDocumentKeys(new Ox(t,Ws.at),g).next()})})}}function BL(n){n.createObjectStore("targetDocuments",{keyPath:Uj}).createIndex("documentTargetsIndex",Vj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fj,{unique:!0}),n.createObjectStore("targetGlobal")}const $x="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wx{constructor(e,t,r,i,a,l,d,g,v,T,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=d,this.Js=v,this.Ys=T,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!Wx.C())throw new Fe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lH(this,i),this.ii=t+"main",this.It=new mL(g),this.ri=new hu(this.ii,this.Xs,new wH(this.It)),this.Cs=new sH(this.referenceDelegate,this.It),this.remoteDocumentCache=kL(this.It),this.Ns=new Qj,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,$x);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ws(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Xd(e))return We("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return We("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return MI(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return jT(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=gi(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),d=a.filter(g=>-1===l.indexOf(g));return de.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):MI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,$x);return!1}}return!(!this.networkEnabled||!this.inForeground)||jT(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&We("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ox(t,Ws.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jT(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return UT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iH(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return kT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){We("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?Zj:14===l?gL:13===l?pL:12===l?Kj:11===l?fL:void ft();var l;let d;return this.ri.runTransaction(e,i,a,g=>(d=new Ox(g,this.Ss?this.Ss.next():Ws.at),"readwrite-primary"===t?this.fi(d).next(v=>!!v||this.di(d)).next(v=>{if(!v)throw Nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(_e.FAILED_PRECONDITION,s1);return r(d)}).next(v=>this.wi(d).next(()=>v)):this.Vi(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}Vi(e){return MI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(_e.FAILED_PRECONDITION,$x)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return MI(e).put("owner",t)}static C(){return hu.C()}_i(e){const t=MI(e);return t.get("owner").next(r=>this.mi(r)?(We("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return We("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function MI(n){return gi(n,"owner")}function jT(n){return gi(n,"clientMetadata")}function Gx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Jt(),i=Jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new zx(e,t.fromCache,r,i)}}class jL{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(S1(t))return de.resolve(null);let r=ws(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=DT(t,null,"F"),r=ws(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Jt(...a);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.Fi(t,d);return this.$i(t,v,l,g.readTime)?this.ki(e,DT(t,null,"F")):this.Bi(e,v,t,g)}))})))}Oi(e,t,r,i){return S1(t)||i.isEqual(Vt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(mx()<=vo.in.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ax(t)),this.Bi(e,l,t,r1(i,-1)))})}Fi(e,t){let r=new Un(x1(e));return t.forEach((i,a)=>{Rx(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return mx()<=vo.in.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",Ax(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ao.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class IH{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Dr(zt),this.qi=new sh(a=>sp(a),pI),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UL(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function HL(n,e,t,r){return new IH(n,e,t,r)}function $L(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,Ee.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let g=Jt();for(const v of i){l.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of a){d.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(r,g).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:d}))})})}),qx.apply(this,arguments)}function EH(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,g,v){const T=g.batch,S=T.keys();let P=de.resolve();return S.forEach(V=>{P=P.next(()=>v.getEntry(d,V)).next(G=>{const ce=g.docVersions.get(V);Ut(null!==ce),G.version.compareTo(ce)<0&&(T.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(d,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=Jt();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(d=d.add(l.batch.mutations[g].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function WL(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function CH(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((T,S)=>{const P=i.get(S);if(!P)return;d.push(t.Cs.removeMatchingKeys(a,T.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,T.addedDocuments,S)));let V=P.withSequenceNumber(a.currentSequenceNumber);var G,ce,ye;e.targetMismatches.has(S)?V=V.withResumeToken(ei.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):T.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(T.resumeToken,r)),i=i.insert(S,V),ce=V,ye=T,(0===(G=P).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,V))});let g=Gs(),v=Jt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),d.push(GL(a,l,e.documentUpdates).next(T=>{g=T.Wi,v=T.zi})),!r.isEqual(Vt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(T)}return de.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ui=i,a))}function GL(n,e,t){let r=Jt(),i=Jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Gs();return t.forEach((d,g)=>{const v=a.get(d);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(d)),g.isNoDocument()&&g.version.isEqual(Vt.min())?(e.removeEntry(d,g.readTime),l=l.insert(d,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),l=l.insert(d,g)):We("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",g.version)}),{Wi:l,zi:i}})}function bH(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function I_(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new oh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function E_(n,e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Xd(l))throw l;We("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Kx.apply(this,arguments)}function HT(n,e,t){const r=Xe(n);let i=Vt.min(),a=Jt();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,g,v){const T=Xe(d),S=T.qi.get(v);return void 0!==S?de.resolve(T.Ui.get(S)):T.Cs.getTargetData(g,v)}(r,l,ws(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(g=>{a=g})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Vt.min(),t?a:Jt())).next(d=>(KL(r,R1(e),d),{documents:d,Hi:a})))}function zL(n,e){const t=Xe(n),r=Xe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function qL(n,e){const t=Xe(n),r=t.Ki.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,r1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(KL(t,e,i),i))}function KL(n,e,t){let r=n.Ki.get(e)||Vt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function Zx(){return Zx=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n);let a=Jt(),l=Gs();for(const v of t){const T=e.Ji(v.metadata.name);v.document&&(a=a.add(T));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(T,S)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),g=yield I_(i,(v=r,ws(d_(fn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>GL(v,d,l).next(T=>(d.apply(v),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Cs.addMatchingKeys(v,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,T.Wi,T.zi)).next(()=>T.Wi)))}),Zx.apply(this,arguments)}function DH(n,e){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,Ee.Z)(function*(n,e,t=Jt()){const r=yield I_(n,ws(Vx(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=pi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const d=r.withResumeToken(ei.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(a,d).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),Yx.apply(this,arguments)}function ZL(n,e){return`firestore_clients_${n}_${e}`}function YL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Qx(n,e){return`firestore_targets_${n}_${e}`}class $T{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new $T(e,t,i.state,a):(Nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class NI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new NI(e,r.state,i):(Nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class WT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=xT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=h1(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new WT(e,a):(Nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Jx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Jx(t.clientId,t.onlineState):(Nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xx{constructor(){this.activeTargetIds=xT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eP{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Dr(zt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=ZL(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Xx),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(ZL(e.persistenceKey,i));if(a){const l=WT.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Qx(this.persistenceKey,e));if(r){const i=NI.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return We("SharedClientState","READ",e,t),t}setItem(e,t){We("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){We("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(We("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Ws.at;if(null!=a)try{const d=JSON.parse(a);Ut("number"==typeof d),l=d}catch(d){Nr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Ws.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new $T(this.currentUser,e,t,r),a=YL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=YL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Qx(this.persistenceKey,e),a=new NI(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return WT.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return $T.Zi(new fi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return NI.Zi(i,t)}yr(e){return Jx.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);We("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],d=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||d.push(g)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=xT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class QL{constructor(){this.Lr=new Xx,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Xx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SH{qr(e){}shutdown(){}}class JL{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){We("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){We("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const AH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class xH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);We("RestConnection","Sending: ",l,r);const d={};return this.lo(d,i,a),this.fo(e,l,d,r).then(g=>(We("RestConnection","Received: ",g),g),g=>{throw Jf("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+o_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${AH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const d=new A2;d.setWithCredentials(!0),d.listenOnce(T2.COMPLETE,()=>{var v;try{switch(d.getLastErrorCode()){case gx.NO_ERROR:const T=d.getResponseJson();We("Connection","XHR received:",JSON.stringify(T)),a(T);break;case gx.TIMEOUT:We("Connection",'RPC "'+e+'" timed out'),l(new Fe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case gx.HTTP_ERROR:const S=d.getStatus();if(We("Connection",'RPC "'+e+'" failed with status:',S,"response text:",d.getResponseText()),S>0){let P=d.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=null===(v=P)||void 0===v?void 0:v.error;if(V&&V.status&&V.message){const G=function(ce){const ye=ce.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(ye)>=0?ye:_e.UNKNOWN}(V.status);l(new Fe(G,V.message))}else l(new Fe(_e.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Fe(_e.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{We("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);d.send(t,"POST",g,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=C2(),l=b2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new S2({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=i.join("");We("Connection","Creating WebChannel: "+g,d);const v=a.createWebChannel(g,d);let T=!1,S=!1;const P=new RH({Hr:G=>{S?We("Connection","Not sending because WebChannel is closed:",G):(T||(We("Connection","Opening WebChannel transport."),v.open(),T=!0),We("Connection","WebChannel sending:",G),v.send(G))},Jr:()=>v.close()}),V=(G,ce,ye)=>{G.listen(ce,at=>{try{ye(at)}catch(ht){setTimeout(()=>{throw ht},0)}})};return V(v,_T.EventType.OPEN,()=>{S||We("Connection","WebChannel transport opened.")}),V(v,_T.EventType.CLOSE,()=>{S||(S=!0,We("Connection","WebChannel transport closed"),P.io())}),V(v,_T.EventType.ERROR,G=>{S||(S=!0,Jf("Connection","WebChannel transport errored:",G),P.io(new Fe(_e.UNAVAILABLE,"The operation could not be completed")))}),V(v,_T.EventType.MESSAGE,G=>{var ce;if(!S){const ye=G.data[0];Ut(!!ye);const at=ye,ht=at.error||(null===(ce=at[0])||void 0===ce?void 0:ce.error);if(ht){We("Connection","WebChannel received error:",ht);const lt=ht.status;let pt=function(jt){const yr=Hr[jt];if(void 0!==yr)return G1(yr)}(lt),Rt=ht.message;void 0===pt&&(pt=_e.INTERNAL,Rt="Unknown error status: "+lt+" with message "+ht.message),S=!0,P.io(new Fe(pt,Rt)),v.close()}else We("Connection","WebChannel received:",ye),P.ro(ye)}}),V(l,D2.STAT_EVENT,G=>{G.stat===QO.PROXY?We("Connection","Detected buffering proxy"):G.stat===QO.NOPROXY&&We("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function XL(){return typeof window<"u"?window:null}function GT(){return typeof document<"u"?document:null}function kI(n){return new Ij(n,!0)}class tP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&We("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class eF{constructor(e,t,r,i,a,l,d,g){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new tP(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return We("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(We("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PH extends eF{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function bj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ft(),i=e.targetChange.targetIds||[],a=function(g,v){return g.gt?(Ut(void 0===v||"string"==typeof v),ei.fromBase64String(v||"")):(Ut(void 0===v||v instanceof Uint8Array),ei.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(g){const v=void 0===g.code?_e.UNKNOWN:G1(g.code);return new Fe(v,g.message||"")}(l);t=new Y1(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=il(n,r.document.name),a=pi(r.document.updateTime),l=new ki({mapValue:{fields:r.document.fields}}),d=tr.newFoundDocument(i,a,l);t=new PT(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=il(n,r.document),a=r.readTime?pi(r.readTime):Vt.min(),l=tr.newNoDocument(i,a);t=new PT([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=il(n,r.document);t=new PT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new fj(r.count||0);t=new Z1(r.targetId,a)}}var g;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Vt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Vt.min():a.readTime?pi(a.readTime):Vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=bI(this.It),t.addTarget=function(i,a){let l;const d=a.target;return l=bT(d)?{documents:oL(i,d)}:{query:kx(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=eL(i,a.resumeToken):a.snapshotVersion.compareTo(Vt.min())>0&&(l.readTime=EI(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Dj(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=bI(this.It),t.removeTarget=e,this.Bo(t)}}class MH extends eF{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Tj(n,e){return n&&n.length>0?(Ut(void 0!==e),n.map(t=>function(r,i){let a=pi(r.updateTime?r.updateTime:i);return a.isEqual(Vt.min())&&(a=pi(i)),new cj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.Zo(r,t)}return Ut(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=bI(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>TI(this.It,r))};this.Bo(t)}}class NH extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(_e.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(_e.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class OH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Nr(t),this.ou=!1):We("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class LH{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget((0,Ee.Z)(function*(){var g;dc(l)&&(We("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ee.Z)(function*(v){const T=Xe(v);T._u.add(4),yield C_(T),T.gu.set("Unknown"),T._u.delete(4),yield OI(T)}),function(v){return g.apply(this,arguments)})(l))}))}),this.gu=new OH(r,i)}}function OI(n){return rP.apply(this,arguments)}function rP(){return rP=(0,Ee.Z)(function*(n){if(dc(n))for(const e of n.wu)yield e(!0)}),rP.apply(this,arguments)}function C_(n){return iP.apply(this,arguments)}function iP(){return iP=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),iP.apply(this,arguments)}function zT(n,e){const t=Xe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),aP(t)?oP(t):T_(t).ko()&&sP(t,e))}function LI(n,e){const t=Xe(n),r=T_(t);t.du.delete(e),r.ko()&&tF(t,e),0===t.du.size&&(r.ko()?r.Fo():dc(t)&&t.gu.set("Unknown"))}function sP(n,e){n.yu.Mt(e.targetId),T_(n).zo(e)}function tF(n,e){n.yu.Mt(e),T_(n).Ho(e)}function oP(n){n.yu=new yj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),T_(n).start(),n.gu.uu()}function aP(n){return dc(n)&&!T_(n).No()&&n.du.size>0}function dc(n){return 0===Xe(n)._u.size}function nF(n){n.yu=void 0}function FH(n){return uP.apply(this,arguments)}function uP(){return uP=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{sP(n,e)})}),uP.apply(this,arguments)}function UH(n,e){return lP.apply(this,arguments)}function lP(){return lP=(0,Ee.Z)(function*(n,e){nF(n),aP(n)?(n.gu.hu(e),oP(n)):n.gu.set("Unknown")}),lP.apply(this,arguments)}function VH(n,e,t){return cP.apply(this,arguments)}function cP(){return cP=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Y1&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){We("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qT(n,r)}else if(e instanceof PT?n.yu.Gt(e):e instanceof Z1?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Vt.min()))try{const r=yield WL(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const v=i.du.get(g);v&&i.du.set(g,v.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const g=i.du.get(d);if(!g)return;i.du.set(d,g.withResumeToken(ei.EMPTY_BYTE_STRING,g.snapshotVersion)),tF(i,d);const v=new oh(g.target,d,1,g.sequenceNumber);sP(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){We("RemoteStore","Failed to raise snapshot:",r),yield qT(n,r)}var r}),cP.apply(this,arguments)}function qT(n,e,t){return dP.apply(this,arguments)}function dP(){return dP=(0,Ee.Z)(function*(n,e,t){if(!Xd(e))throw e;n._u.add(1),yield C_(n),n.gu.set("Offline"),t||(t=()=>WL(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){We("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield OI(n)}))}),dP.apply(this,arguments)}function rF(n,e){return e().catch(t=>qT(n,t,e))}function b_(n){return hP.apply(this,arguments)}function hP(){return hP=(0,Ee.Z)(function*(n){const e=Xe(n),t=lh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;BH(e);)try{const i=yield bH(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,jH(e,i)}catch(i){yield qT(e,i)}iF(e)&&sF(e)}),hP.apply(this,arguments)}function BH(n){return dc(n)&&n.fu.length<10}function jH(n,e){n.fu.push(e);const t=lh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function iF(n){return dc(n)&&!lh(n).No()&&n.fu.length>0}function sF(n){lh(n).start()}function HH(n){return fP.apply(this,arguments)}function fP(){return fP=(0,Ee.Z)(function*(n){lh(n).eu()}),fP.apply(this,arguments)}function $H(n){return pP.apply(this,arguments)}function pP(){return pP=(0,Ee.Z)(function*(n){const e=lh(n);for(const t of n.fu)e.Xo(t.mutations)}),pP.apply(this,arguments)}function WH(n,e,t){return gP.apply(this,arguments)}function gP(){return gP=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=Fx.from(r,e,t);yield rF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield b_(n)}),gP.apply(this,arguments)}function GH(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,Ee.Z)(function*(n,e){var t;e&&lh(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(W1(a=i.code)&&a!==_e.ABORTED){const l=r.fu.shift();lh(r).Mo(),yield rF(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield b_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),iF(n)&&sF(n)}),mP.apply(this,arguments)}function oF(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,Ee.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),We("RemoteStore","RemoteStore received new credentials");const r=dc(t);t._u.add(3),yield C_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield OI(t)}),_P.apply(this,arguments)}function yP(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,Ee.Z)(function*(n,e){const t=Xe(n);e?(t._u.delete(2),yield OI(t)):e||(t._u.add(2),yield C_(t),t.gu.set("Unknown"))}),vP.apply(this,arguments)}function T_(n){return n.pu||(n.pu=function(e,t,r){const i=Xe(e);return i.su(),new PH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:FH.bind(null,n),Zr:UH.bind(null,n),Wo:VH.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),aP(n)?oP(n):n.gu.set("Unknown")):(yield n.pu.stop(),nF(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function lh(n){return n.Iu||(n.Iu=function(e,t,r){const i=Xe(e);return i.su(),new MH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:HH.bind(null,n),Zr:GH.bind(null,n),tu:$H.bind(null,n),Zo:WH.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield b_(n)):(yield n.Iu.stop(),n.fu.length>0&&(We("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class wP{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new wP(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D_(n,e){if(Nr("AsyncQueue",`${e}: ${n}`),Xd(n))return new Fe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class S_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=yI(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new S_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof S_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new S_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aF{constructor(){this.Tu=new Dr(Ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ft():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class A_{constructor(e,t,r,i,a,l,d,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new A_(e,t,S_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zH{constructor(){this.Au=void 0,this.listeners=[]}}class qH{constructor(){this.queries=new sh(e=>A1(e),gI),this.onlineState="Unknown",this.Ru=new Set}}function IP(n,e){return EP.apply(this,arguments)}function EP(){return EP=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new zH),i)try{a.Au=yield t.onListen(r)}catch(l){const d=D_(l,`Initialization of query '${Ax(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&TP(t)}),EP.apply(this,arguments)}function CP(n,e){return bP.apply(this,arguments)}function bP(){return bP=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),bP.apply(this,arguments)}function KH(n,e){const t=Xe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&TP(t)}function ZH(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function TP(n){n.Ru.forEach(e=>{e.next()})}class DP{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new A_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=A_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class YH{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class uF{constructor(e){this.It=e}Ji(e){return il(this.It,e)}Yi(e){return e.metadata.exists?sL(this.It,e.document,!1):tr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return pi(e)}}class QH{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lF(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=fn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new uF(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Jt()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function TH(n,e,t,r){return Zx.apply(this,arguments)}(e.localStore,new uF(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield DH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function lF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cF{constructor(e){this.key=e}}class dF{constructor(e){this.key=e}}class hF{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jt(),this.mutatedKeys=Jt(),this.Gu=x1(e),this.Qu=new S_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new aF,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const P=i.get(T),V=Rx(this.query,S)?S:null,G=!!P&&this.mutatedKeys.has(P.key),ce=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ye=!1;P&&V?P.data.isEqual(V.data)?G!==ce&&(r.track({type:3,doc:V}),ye=!0):this.Hu(P,V)||(r.track({type:2,doc:V}),ye=!0,(g&&this.Gu(V,g)>0||v&&this.Gu(V,v)<0)&&(d=!0)):!P&&V?(r.track({type:0,doc:V}),ye=!0):P&&!V&&(r.track({type:1,doc:P}),ye=!0,(g||v)&&(d=!0)),ye&&(V?(l=l.add(V),a=ce?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Qu:l,zu:r,$i:d,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,T)=>function(S,P){const V=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return V(S)-V(P)}(v.type,T.type)||this.Gu(v.doc,T.doc)),this.Ju(r);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,g=d!==this.qu;return this.qu=d,0!==a.length||g?{snapshot:new A_(this.query,e.Qu,i,a,e.mutatedKeys,0===d,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new aF,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new dF(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new cF(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return A_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class JH{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XH{constructor(e){this.key=e,this.nc=!1}}class e${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new sh(d=>A1(d),gI),this.rc=new Map,this.oc=new Set,this.uc=new Dr(Ze.comparator),this.cc=new Map,this.ac=new Hx,this.hc={},this.lc=new Map,this.fc=pp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function t$(n,e){return SP.apply(this,arguments)}function SP(){return SP=(0,Ee.Z)(function*(n,e){const t=YP(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield I_(t.localStore,ws(e));t.isPrimaryClient&&zT(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield AP(t,e,r,"current"===d,l.resumeToken)}return i}),SP.apply(this,arguments)}function AP(n,e,t,r,i){return RP.apply(this,arguments)}function RP(){return RP=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(S,P,V)=>{return(G=(0,Ee.Z)(function*(ce,ye,at,ht){let lt=ye.view.Wu(at);lt.$i&&(lt=yield HT(ce.localStore,ye.query,!1).then(({documents:jt})=>ye.view.Wu(jt,lt)));const pt=ht&&ht.targetChanges.get(ye.targetId),Rt=ye.view.applyChanges(lt,ce.isPrimaryClient,pt);return VP(ce,ye.targetId,Rt.Xu),Rt.snapshot}),function(ce,ye,at,ht){return G.apply(this,arguments)})(n,S,P,V);var G};const a=yield HT(n.localStore,e,!0),l=new hF(e,a.Hi),d=l.Wu(a.documents),g=II.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(d,n.isPrimaryClient,g);VP(n,t,v.Xu);const T=new JH(e,t,l);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),RP.apply(this,arguments)}function n$(n,e){return xP.apply(this,arguments)}function xP(){return xP=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!gI(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield E_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),LI(t.remoteStore,r.targetId),R_(t,r.targetId)}).catch(Jd))):(R_(t,r.targetId),yield E_(t.localStore,r.targetId,!0))}),xP.apply(this,arguments)}function PP(){return PP=(0,Ee.Z)(function*(n,e,t){const r=QP(n);try{const i=yield function(a,l){const d=Xe(a),g=hr.now(),v=l.reduce((P,V)=>P.add(V.key),Jt());let T,S;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=Gs(),G=Jt();return d.Gi.getEntries(P,v).next(ce=>{V=ce,V.forEach((ye,at)=>{at.isValidDocument()||(G=G.add(ye))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,V)).next(ce=>{T=ce;const ye=[];for(const at of l){const ht=hj(at,T.get(at.key).overlayedDocument);null!=ht&&ye.push(new cc(at.key,ht,v1(ht.value.mapValue),fr.exists(!0)))}return d.mutationQueue.addMutationBatch(P,g,ye,l)}).next(ce=>{S=ce;const ye=ce.applyToLocalDocumentSet(T,G);return d.documentOverlayCache.saveOverlays(P,ce.batchId,ye)})}).then(()=>({batchId:S.batchId,changes:q1(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let g=a.hc[a.currentUser.toKey()];g||(g=new Dr(zt)),g=g.insert(l,d),a.hc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield hc(r,i.changes),yield b_(r.remoteStore)}catch(i){const a=D_(i,"Failed to persist write");t.reject(a)}}),PP.apply(this,arguments)}function fF(n,e){return MP.apply(this,arguments)}function MP(){return MP=(0,Ee.Z)(function*(n,e){const t=Xe(n);try{const r=yield CH(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Ut(l.nc):i.removedDocuments.size>0&&(Ut(l.nc),l.nc=!1))}),yield hc(t,r,e)}catch(r){yield Jd(r)}}),MP.apply(this,arguments)}function pF(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=Xe(a);d.onlineState=l;let g=!1;d.queries.forEach((v,T)=>{for(const S of T.listeners)S.bu(l)&&(g=!0)}),g&&TP(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i$(n,e,t){return NP.apply(this,arguments)}function NP(){return NP=(0,Ee.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Dr(Ze.comparator);l=l.insert(a,tr.newNoDocument(a,Vt.min()));const d=Jt().add(a),g=new wI(Vt.min(),new Map,new Un(zt),l,d);yield fF(r,g),r.uc=r.uc.remove(a),r.cc.delete(e),BP(r)}else yield E_(r.localStore,e,!1).then(()=>R_(r,e,t)).catch(Jd)}),NP.apply(this,arguments)}function s$(n,e){return kP.apply(this,arguments)}function kP(){return kP=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield EH(t.localStore,e);UP(t,r,null),FP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hc(t,i)}catch(i){yield Jd(i)}}),kP.apply(this,arguments)}function o$(n,e,t){return OP.apply(this,arguments)}function OP(){return OP=(0,Ee.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(a,l){const d=Xe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return d.mutationQueue.lookupMutationBatch(g,l).next(T=>(Ut(null!==T),v=T.keys(),d.mutationQueue.removeMutationBatch(g,T))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,v,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>d.localDocuments.getDocuments(g,v))})}(r.localStore,e);UP(r,e,t),FP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hc(r,i)}catch(i){yield Jd(i)}}),OP.apply(this,arguments)}function LP(){return LP=(0,Ee.Z)(function*(n,e){const t=Xe(n);dc(t.remoteStore)||We("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Xe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=D_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),LP.apply(this,arguments)}function FP(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function UP(n,e,t){const r=Xe(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function R_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||gF(n,r)})}function gF(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(LI(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),BP(n))}function VP(n,e,t){for(const r of t)r instanceof cF?(n.ac.addReference(r.key,e),u$(n,r)):r instanceof dF?(We("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||gF(n,r.key)):ft()}function u$(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(We("SyncEngine","New document in limbo: "+t),n.oc.add(r),BP(n))}function BP(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ze(fn.fromString(e)),r=n.fc.next();n.cc.set(r,new XH(t)),n.uc=n.uc.insert(t,r),zT(n.remoteStore,new oh(ws(d_(t.path)),r,2,Ws.at))}}function hc(n,e,t){return jP.apply(this,arguments)}function jP(){return jP=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[],l=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,g)=>{l.push(r._c(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const T=zx.Ci(g.targetId,v);a.push(T)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(d=(0,Ee.Z)(function*(g,v){const T=Xe(g);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(v,P=>de.forEach(P.Si,V=>T.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>de.forEach(P.Di,V=>T.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!Xd(S))throw S;We("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const V=T.Ui.get(P),ce=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);T.Ui=T.Ui.insert(P,ce)}}}),function(g,v){return d.apply(this,arguments)})(r.localStore,a))}),jP.apply(this,arguments)}function l$(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,Ee.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){We("SyncEngine","User change. New user:",e.toKey());const r=yield $L(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new Fe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hc(t,r.ji)}var i}),HP.apply(this,arguments)}function c$(n,e){const t=Xe(n),r=t.cc.get(e);if(r&&r.nc)return Jt().add(r.key);{let i=Jt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const d=t.ic.get(l);i=i.unionWith(d.view.ju)}return i}}function d$(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=yield HT(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&VP(t,e.targetId,i.Xu),i}),$P.apply(this,arguments)}function h$(n,e){return WP.apply(this,arguments)}function WP(){return WP=(0,Ee.Z)(function*(n,e){const t=Xe(n);return qL(t.localStore,e).then(r=>hc(t,r))}),WP.apply(this,arguments)}function f$(n,e,t,r){return GP.apply(this,arguments)}function GP(){return GP=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n),a=yield function(l,d){const g=Xe(l),v=Xe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",T=>v.Tn(T,d).next(S=>S?g.localDocuments.getDocuments(T,S):de.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield b_(i.remoteStore):"acknowledged"===t||"rejected"===t?(UP(i,e,r||null),FP(i,e),d=e,Xe(Xe(i.localStore).mutationQueue).An(d)):ft(),yield hc(i,a)):We("SyncEngine","Cannot apply mutation batch with id: "+e)}),GP.apply(this,arguments)}function zP(){return zP=(0,Ee.Z)(function*(n,e){const t=Xe(n);if(YP(t),QP(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mF(t,r.toArray());t.dc=!0,yield yP(t.remoteStore,!0);for(const a of i)zT(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(R_(t,l),E_(t.localStore,l,!0))),LI(t.remoteStore,l)}),yield i,yield mF(t,r),function(a){const l=Xe(a);l.cc.forEach((d,g)=>{LI(l.remoteStore,g)}),l.ac.fs(),l.cc=new Map,l.uc=new Dr(Ze.comparator)}(t),t.dc=!1,yield yP(t.remoteStore,!1)}}),zP.apply(this,arguments)}function mF(n,e,t){return qP.apply(this,arguments)}function qP(){return qP=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[];for(const l of e){let d;const g=r.rc.get(l);if(g&&0!==g.length){d=yield I_(r.localStore,ws(g[0]));for(const v of g){const T=r.ic.get(v),S=yield d$(r,T);S.snapshot&&a.push(S.snapshot)}}else{const v=yield zL(r.localStore,l);d=yield I_(r.localStore,v),yield AP(r,_F(v),l,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(a),i}),qP.apply(this,arguments)}function _F(n){return D1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g$(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).vi()}function m$(n,e,t,r){return KP.apply(this,arguments)}function KP(){return KP=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n);if(i.dc)return void We("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield qL(i.localStore,R1(a[0])),d=wI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ei.EMPTY_BYTE_STRING);yield hc(i,l,d);break}case"rejected":yield E_(i.localStore,e,!0),R_(i,e,r);break;default:ft()}}),KP.apply(this,arguments)}function _$(n,e,t){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,Ee.Z)(function*(n,e,t){const r=YP(n);if(r.dc){for(const i of e){if(r.rc.has(i)){We("SyncEngine","Adding an already active target "+i);continue}const a=yield zL(r.localStore,i),l=yield I_(r.localStore,a);yield AP(r,_F(a),l.targetId,!1,l.resumeToken),zT(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield E_(r.localStore,i,!1).then(()=>{LI(r.remoteStore,i),R_(r,i)}).catch(Jd))}}),ZP.apply(this,arguments)}function YP(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i$.bind(null,e),e.sc.Wo=KH.bind(null,e.eventManager),e.sc.wc=ZH.bind(null,e.eventManager),e}function QP(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o$.bind(null,e),e}class yF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=kI(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return HL(this.persistence,new jL,e.initialUser,this.It)}yc(e){return new VL(BT.Bs,this.It)}gc(e){return new QL}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vF extends yF{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield QP(r.Ac.syncEngine),yield b_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return HL(this.persistence,new jL,e.initialUser,this.It)}Tc(e,t){return new aH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new W2(t,this.persistence);return new $2(e.asyncQueue,r)}yc(e){const t=Gx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new Wx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,XL(),GT(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new QL}}class v$ extends vF{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof eP&&(r.sharedClientState.syncEngine={Fr:f$.bind(null,i),$r:m$.bind(null,i),Br:_$.bind(null,i),vi:g$.bind(null,i),Mr:h$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ee.Z)(function*(l){yield function p$(n,e){return zP.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=XL();if(!eP.C(t))throw new Fe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Gx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class JP{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>pF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=l$.bind(null,r.syncEngine),yield yP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new qH}createDatastore(e){const t=kI(e.databaseInfo.databaseId),r=new xH(e.databaseInfo);return new NH(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>pF(this.syncEngine,d,0),l=JL.C()?new JL:new SH,new LH(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,g,v){const T=new e$(r,i,a,l,d,g);return v&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Xe(t);We("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield C_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function XP(n,e,t){if(!t)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wF(n,e,t,r){if(!0===e&&!0===r)throw new Fe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IF(n){if(!Ze.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EF(n){if(Ze.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=KT(n);throw new Fe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CF(n,e){if(e<=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const bF=new Map;class TF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class FI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new P2;switch(t.type){case"gapi":return new O2(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bF.get(e);t&&(We("ComponentProvider","Removing Datastore"),bF.delete(e),t.terminate())}(this),Promise.resolve()}}class ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class ol extends Xi{constructor(e,t,r){super(e,t,d_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new Ze(e))}withConverter(e){return new ol(this.firestore,e,this._path)}}function SF(n,e,...t){if(n=(0,L.m9)(n),XP("collection","path",e),n instanceof FI){const r=fn.fromString(e,...t);return EF(r),new ol(n,null,r)}{if(!(n instanceof ur||n instanceof ol))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return EF(r),new ol(n.firestore,null,r)}}function ZT(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=t1.R()),XP("doc","path",e),n instanceof FI){const r=fn.fromString(e,...t);return IF(r),new ur(n,null,new Ze(r))}{if(!(n instanceof ur||n instanceof ol))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return IF(r),new ur(n.firestore,n instanceof ol?n.converter:null,new Ze(r))}}function AF(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof ur||n instanceof ol)&&(e instanceof ur||e instanceof ol)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eM(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&gI(n._query,e._query)&&n.converter===e.converter}function RF(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class YT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class I${constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Xr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new YH(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class b${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,l){const d=Xe(a),g=bI(d.It)+"/documents",v={documents:l.map(V=>CI(d.It,V))},T=yield d._o("BatchGetDocuments",g,v,l.length),S=new Map;T.forEach(V=>{const G=function Cj(n,e){return"found"in e?function(t,r){Ut(!!r.found);const i=il(t,r.found.name),a=pi(r.found.updateTime),l=new ki({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Ut(!!r.missing),Ut(!!r.readTime);const i=il(t,r.missing),a=pi(r.readTime);return tr.newNoDocument(i,a)}(n,e):ft()}(d.It,V);S.set(G.key.toString(),G)});const P=[];return l.forEach(V=>{const G=S.get(V.toString());Ut(!!G),P.push(G)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new m_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ze.fromPath(i);e.mutations.push(new xx(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const l=Xe(i),d=bI(l.It)+"/documents",g={writes:a.map(v=>TI(l.It,v))};yield l.ao("Commit",d,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vt.min())?fr.exists(!1):fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new Fe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class T${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new tP(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new b$(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!lI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!W1(t)}return!1}}class D${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fi.UNAUTHENTICATED,this.clientId=t1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(d){We("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(We("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=D_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function xF(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),We("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield $L(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),tM.apply(this,arguments)}function PF(n,e){return nM.apply(this,arguments)}function nM(){return nM=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rM(n);We("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>oF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>oF(e.remoteStore,a)),n.onlineComponents=e}),nM.apply(this,arguments)}function rM(n){return iM.apply(this,arguments)}function iM(){return iM=(0,Ee.Z)(function*(n){return n.offlineComponents||(We("FirestoreClient","Using default OfflineComponentProvider"),yield xF(n,new yF)),n.offlineComponents}),iM.apply(this,arguments)}function QT(n){return sM.apply(this,arguments)}function sM(){return sM=(0,Ee.Z)(function*(n){return n.onlineComponents||(We("FirestoreClient","Using default OnlineComponentProvider"),yield PF(n,new JP)),n.onlineComponents}),sM.apply(this,arguments)}function MF(n){return rM(n).then(e=>e.persistence)}function JT(n){return rM(n).then(e=>e.localStore)}function oM(n){return QT(n).then(e=>e.remoteStore)}function aM(n){return QT(n).then(e=>e.syncEngine)}function x_(n){return uM.apply(this,arguments)}function uM(){return uM=(0,Ee.Z)(function*(n){const e=yield QT(n),t=e.eventManager;return t.onListen=t$.bind(null,e.syncEngine),t.onUnlisten=n$.bind(null,e.syncEngine),t}),uM.apply(this,arguments)}function kF(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,d,g){const v=new YT({next:S=>{a.enqueueAndForget(()=>CP(i,T));const P=S.docs.has(l);!P&&S.fromCache?g.reject(new Fe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&d&&"server"===d.source?g.reject(new Fe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new DP(d_(l.path),v,{includeMetadataChanges:!0,Nu:!0});return IP(i,T)}(yield x_(n),n.asyncQueue,e,t,r)})),r.promise}function OF(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,d,g){const v=new YT({next:S=>{a.enqueueAndForget(()=>CP(i,T)),S.fromCache&&"server"===d.source?g.reject(new Fe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new DP(l,v,{includeMetadataChanges:!0,Nu:!0});return IP(i,T)}(yield x_(n),n.asyncQueue,e,t,r)})),r.promise}class k${constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new tP(this,"async_queue_retry"),this.Wc=()=>{const t=GT();t&&We("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=GT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=GT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Xr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Xd(t))throw t;We("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=wP.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ft()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function lM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class O${constructor(){this._progressObserver={},this._taskCompletionResolver=new Xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class lr extends FI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new k$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||LF(this),this._firestoreClient.terminate()}}function kr(n){return n._firestoreClient||LF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function LF(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new q2(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new D$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function FF(n,e,t){const r=new Xr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield xF(n,t),yield PF(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===_e.FAILED_PRECONDITION||l.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Jf("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function UF(n){if(n._initialized||n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new al(ei.fromBase64String(e))}catch(t){throw new Fe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new al(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mp{constructor(e){this._methodName=e}}class XT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const G$=/^__.*__$/;class z${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cc(e,this.data,this.fieldMask,t,this.fieldTransforms):new g_(e,this.data,t,this.fieldTransforms)}}class VF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class eD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new eD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return rD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(BF(this.sa)&&G$.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class q${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||kI(e)}da(e,t,r,i=!1){return new eD({sa:e,methodName:t,fa:r,path:Tr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function _p(n){const e=n._freezeSettings(),t=kI(n._databaseId);return new q$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tD(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);fM("Data must be an object, but it was:",l,r);const d=$F(r,l);let g,v;if(a.merge)g=new Ro(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const P=pM(e,S,t);if(!l.contains(P))throw new Fe(_e.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);GF(T,P)||T.push(P)}g=new Ro(T),v=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,v=l.fieldTransforms;return new z$(new ki(d),g,v)}class UI extends mp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof UI}}function jF(n,e,t){return new eD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class cM extends mp{_toFieldTransform(e){return new mI(e.path,new f_)}isEqual(e){return e instanceof cM}}class K$ extends mp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=jF(this,e,!0),r=this._a.map(a=>yp(a,t)),i=new op(r);return new mI(e.path,i)}isEqual(e){return this===e}}class Z$ extends mp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=jF(this,e,!0),r=this._a.map(a=>yp(a,t)),i=new ap(r);return new mI(e.path,i)}isEqual(e){return this===e}}class Y$ extends mp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new p_(e.It,N1(e.It,this.wa));return new mI(e.path,t)}isEqual(e){return this===e}}function dM(n,e,t,r){const i=n.da(1,e,t);fM("Data must be an object, but it was:",i,r);const a=[],l=ki.empty();tp(r,(g,v)=>{const T=nD(e,g,t);v=(0,L.m9)(v);const S=i.ca(T);if(v instanceof UI)a.push(T);else{const P=yp(v,S);null!=P&&(a.push(T),l.set(T,P))}});const d=new Ro(a);return new VF(l,d,i.fieldTransforms)}function hM(n,e,t,r,i,a){const l=n.da(1,e,t),d=[pM(e,r,t)],g=[i];if(a.length%2!=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)d.push(pM(e,a[P])),g.push(a[P+1]);const v=[],T=ki.empty();for(let P=d.length-1;P>=0;--P)if(!GF(v,d[P])){const V=d[P];let G=g[P];G=(0,L.m9)(G);const ce=l.ca(V);if(G instanceof UI)v.push(V);else{const ye=yp(G,ce);null!=ye&&(v.push(V),T.set(V,ye))}}const S=new Ro(v);return new VF(T,S,l.fieldTransforms)}function HF(n,e,t,r=!1){return yp(t,n.da(r?4:3,e))}function yp(n,e){if(WF(n=(0,L.m9)(n)))return fM("Unsupported field value:",e,n),$F(n,e);if(n instanceof mp)return function(t,r){if(!BF(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=yp(l,r.aa(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return N1(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=hr.fromDate(t);return{timestampValue:EI(r.It,i)}}if(t instanceof hr){const i=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:EI(r.It,i)}}if(t instanceof XT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof al)return{bytesValue:eL(r.It,t._byteString)};if(t instanceof ur){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Px(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${KT(t)}`)}(n,e)}function $F(n,e){const t={};return l1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tp(n,(r,i)=>{const a=yp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function WF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof XT||n instanceof al||n instanceof ur||n instanceof mp)}function fM(n,e,t){if(!WF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=KT(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function pM(n,e,t){if((e=(0,L.m9)(e))instanceof fc)return e._internalPath;if("string"==typeof e)return nD(n,e);throw rD("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q$=new RegExp("[~\\*/\\[\\]]");function nD(n,e,t){if(e.search(Q$)>=0)throw rD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fc(...e.split("."))._internalPath}catch{throw rD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Fe(_e.INVALID_ARGUMENT,d+n+g)}function GF(n,e){return n.some(t=>t.isEqual(e))}class VI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new J$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class J$ extends VI{data(){return super.data()}}function iD(n,e){return"string"==typeof e?nD(n,e):e instanceof fc?e._internalPath:e._delegate._internalPath}function zF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BI{}function ch(n,...e){for(const t of e)n=t._apply(n);return n}class X$ extends BI{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=_p(e.firestore),r=function(i,a,l,d,g,v,T){let S;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){JF(T,v);const V=[];for(const G of T)V.push(QF(d,i,G));S={arrayValue:{values:V}}}else S=QF(d,i,T)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||JF(T,v),S=HF(l,"where",T,"in"===v||"not-in"===v);const P=Oi.create(g,v,S);return function(V,G){if(G.dt()){const ye=Dx(V);if(null!==ye&&!ye.isEqual(G.field))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${G.field.toString()}'`);const at=Tx(V);null!==at&&XF(0,G.field,at)}const ce=function(ye,at){for(const ht of ye.filters)if(at.indexOf(ht.op)>=0)return ht.op;return null}(V,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ce)throw new Fe(_e.INVALID_ARGUMENT,ce===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Xi(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new lc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class tW extends BI{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new c_(i,a);return function(d,g){if(null===Tx(d)){const v=Dx(d);null!==v&&XF(0,v,g.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Xi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new lc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qF extends BI{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Xi(e.firestore,e.converter,DT(e._query,this.Ia,this.Ta))}}class KF extends BI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=YF(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new lc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class ZF extends BI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=YF(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new lc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function YF(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof VI)return function(i,a,l,d,g){if(!d)throw new Fe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const T of h_(i))if(T.field.isKeyField())v.push(ip(a,d.key));else{const S=d.data.field(T.field);if(Ex(S))throw new Fe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=T.field.canonicalString();throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new ih(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_p(n.firestore);return function(a,l,d,g,v,T){const S=a.explicitOrderBy;if(v.length>S.length)throw new Fe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<v.length;V++){const G=v[V];if(S[V].field.isKeyField()){if("string"!=typeof G)throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!Sx(a)&&-1!==G.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const ce=a.path.child(fn.fromString(G));if(!Ze.isDocumentKey(ce))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const ye=new Ze(ce);P.push(ip(l,ye))}else{const ce=HF(d,g,G);P.push(ce)}}return new ih(P,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QF(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sx(e)&&-1!==t.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ze.isDocumentKey(r))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ip(n,new Ze(r))}if(t instanceof ur)return ip(n,t._key);throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KT(t)}.`)}function JF(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function XF(n,e,t){if(!t.isEqual(e))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class gM{convertValue(e,t="none"){switch(rp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(np(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return tp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new XT(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=d1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uI(e));default:return null}}convertTimestamp(e){const t=eh(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);Ut(lL(r));const i=new th(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||Nr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function sD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lW extends gM{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}class vp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pc extends VI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jI extends pc{data(e={}){return super.data(e)}}class dh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jI(this._firestore,this._userDataWriter,r.key,r,new vp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new jI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new vp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new jI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new vp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:cW(l.type),doc:d,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function eU(n,e){return n instanceof pc&&e instanceof pc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof dh&&e instanceof dh&&n._firestore===e._firestore&&eM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class hh extends gM{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}function tU(n,e,t){n=un(n,ur);const r=un(n.firestore,lr),i=sD(n.converter,e,t);return P_(r,[tD(_p(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,fr.none())])}function nU(n,e,t,...r){n=un(n,ur);const i=un(n.firestore,lr),a=_p(i);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof fc?hM(a,"updateDoc",n._key,e,t,r):dM(a,"updateDoc",n._key,e),P_(i,[l.toMutation(n._key,fr.exists(!0))])}function rU(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||lM(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(lM(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,v,T;if(n instanceof ur)v=un(n.firestore,lr),T=d_(n._key.path),g={next:S=>{e[l]&&e[l](mM(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=un(n,Xi);v=un(S.firestore,lr),T=S._query;const P=new hh(v);g={next:V=>{e[l]&&e[l](new dh(v,P,S,V))},error:e[l+1],complete:e[l+2]},zF(n._query)}return function(S,P,V,G){const ce=new YT(G),ye=new DP(P,ce,V);return S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return IP(yield x_(S),ye)})),()=>{ce.bc(),S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return CP(yield x_(S),ye)}))}}(kr(v),T,d,g)}function P_(n,e){return function(t,r){const i=new Xr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function r$(n,e,t){return PP.apply(this,arguments)}(yield aM(t),r,i)})),i.promise}(kr(n),e)}function mM(n,e,t){const r=t.docs.get(e._key),i=new hh(n);return new pc(n,i,e._key,r,new vp(t.hasPendingWrites,t.fromCache),e.converter)}const wW={maxAttempts:5};class iU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_p(e)}set(e,t,r){this._verifyNotCommitted();const i=fh(e,this._firestore),a=sD(i.converter,t,r),l=tD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=fh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof fc?hM(this._dataReader,"WriteBatch.update",a._key,t,r,i):dM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fh(e,this._firestore);return this._mutations=this._mutations.concat(new m_(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Fe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class IW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_p(e)}get(e){const t=fh(e,this._firestore),r=new lW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new VI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new VI(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=fh(e,this._firestore),a=sD(i.converter,t,r),l=tD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=fh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof fc?hM(this._dataReader,"Transaction.update",a._key,t,r,i):dM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=fh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fh(e,this._firestore),r=new hh(this._firestore);return super.get(e).then(i=>new pc(this._firestore,r,t._key,i._document,new vp(!1,!1),t.converter))}}function _M(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function oU(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function aU(){if(!function G2(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){o_=Ei.SDK_VERSION,(0,Ei._registerComponent)(new _a.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new lr(new N2(t.getProvider("auth-internal")),new L2(t.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new th(d.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Ei.registerVersion)(JO,"3.7.3",n),(0,Ei.registerVersion)(JO,"3.7.3","esm2017")}();class HI{constructor(e){this._delegate=e}static fromBase64String(e){return aU(),new HI(al.fromBase64String(e))}static fromUint8Array(e){return oU(),new HI(al.fromUint8Array(e))}toBase64(){return aU(),this._delegate.toBase64()}toUint8Array(){return oU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yM(n){return function xW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class PW{enableIndexedDbPersistence(e,t){return function F$(n,e){UF(n=un(n,lr));const t=kr(n),r=n._freezeSettings(),i=new JP;return FF(t,i,new vF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function U$(n){UF(n=un(n,lr));const e=kr(n),t=n._freezeSettings(),r=new JP;return FF(e,r,new v$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function V$(n){if(n._initialized&&!n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!hu.C())return Promise.resolve();const i=r+"main";yield hu.delete(i)}),function(r){return t.apply(this,arguments)})(Gx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class uU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof th||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function DF(n,e,t,r={}){var i;const a=(n=un(n,FI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Jf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=fi.MOCK_USER;else{l=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Fe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new fi(g)}n._authCredentials=new M2(new XO(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function j$(n){return function S$(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield MF(n),t=yield oM(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i._u.delete(0),OI(i)}(t)}))}(kr(n=un(n,lr)))}(this._delegate)}disableNetwork(){return function H$(n){return function A$(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield MF(n),t=yield oM(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=Xe(i);a._u.add(0),yield C_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(kr(n=un(n,lr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function B$(n){return function(e){const t=new Xr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function a$(n,e){return LP.apply(this,arguments)}(yield aM(e),t)})),t.promise}(kr(n=un(n,lr)))}(this._delegate)}onSnapshotsInSync(e){return function vW(n,e){return function P$(n,e){const t=new YT(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield x_(n),i=t,Xe(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield x_(n),i=t,void Xe(r).Ru.delete(i);var r,i}))}}(kr(n=un(n,lr)),lM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new M_(this,SF(this._delegate,e))}catch(t){throw Es(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ta(this,ZT(this._delegate,e))}catch(t){throw Es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cs(this,function w$(n,e){if(n=un(n,FI),XP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(t=e,new lc(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function EW(n,e,t){n=un(n,lr);const r=Object.assign(Object.assign({},wW),t);return function(i){if(i.maxAttempts<1)throw new Fe(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new Xr;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const g=yield function NF(n){return QT(n).then(e=>e.datastore)}(i);new T$(i.asyncQueue,g,l,a,d).run()})),d.promise}(kr(n),i=>e(new IW(n,i)),r)}(this._delegate,t=>e(new lU(this,t)))}batch(){return kr(this._delegate),new cU(new iU(this._delegate,e=>P_(this._delegate,e)))}loadBundle(e){return function $$(n,e){const t=kr(n=un(n,lr)),r=new O$;return function M$(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return RF(g,v);if(g instanceof ArrayBuffer)return RF(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new I$(g,l);var g}(t,kI(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function y$(n,e,t){const r=Xe(n);var i;(i=(0,Ee.Z)(function*(a,l,d){try{const g=yield l.getMetadata();if(yield function(P,V){const G=Xe(P),ce=pi(V.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",ye=>G.Ns.getBundleMetadata(ye,V.id)).then(ye=>!!ye&&ye.createTime.compareTo(ce)>=0)}(a.localStore,g))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=g).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress(lF(g));const v=new QH(g,a.localStore,l.It);let T=yield l.mc();for(;T;){const P=yield v.Fu(T);P&&d._updateProgress(P),T=yield l.mc()}const S=yield v.complete();return yield hc(a,S.Lu,void 0),yield function(P,V){const G=Xe(P);return G.persistence.runTransaction("Save bundle","readwrite",ce=>G.Ns.saveBundleMetadata(ce,V))}(a.localStore,g),d._completeWith(S.progress),Promise.resolve(S.Bu)}catch(g){return Jf("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var P}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield aM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function W$(n,e){return function N$(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield JT(n),e)}))}(kr(n=un(n,lr)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cs(this,t):null)}}class oD extends gM{constructor(e){super(),this.firestore=e}convertBytes(e){return new HI(new al(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ta.forKey(t,this.firestore,null)}}class lU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}get(e){const t=Ip(e);return this._delegate.get(t).then(r=>new $I(this._firestore,new pc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ip(e);return r?(_M("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ip(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ip(e);return this._delegate.delete(t),this}}class cU{constructor(e){this._delegate=e}set(e,t,r){const i=Ip(e);return r?(_M("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ip(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ip(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new jI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new WI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new wp(e,new oD(e),t),i.set(t,a)),a}}wp.INSTANCES=new WeakMap;class Ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ta(t,new ur(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new Ta(t,new ur(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new M_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new M_(this.firestore,SF(this._delegate,e))}catch(t){throw Es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof ur&&AF(this._delegate,e)}set(e,t){t=_M("DocumentReference.set",t);try{return t?tU(this._delegate,e,t):tU(this._delegate,e)}catch(r){throw Es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?nU(this._delegate,e):nU(this._delegate,e,t,...r)}catch(i){throw Es(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _W(n){return P_(un(n.firestore,lr),[new m_(n._key,fr.none())])}(this._delegate)}onSnapshot(...e){const t=dU(e),r=hU(e,i=>new $I(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function hW(n){n=un(n,ur);const e=un(n.firestore,lr),t=kr(e),r=new hh(e);return function R$(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const d=yield function(g,v){const T=Xe(g);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,v))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Fe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=D_(d,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield JT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new pc(e,r,n._key,i,new vp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function fW(n){n=un(n,ur);const e=un(n.firestore,lr);return kF(kr(e),n._key,{source:"server"}).then(t=>mM(e,n,t))}(this._delegate):function dW(n){n=un(n,ur);const e=un(n.firestore,lr);return kF(kr(e),n._key).then(t=>mM(e,n,t))}(this._delegate),t.then(r=>new $I(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ta(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}function Es(n,e,t){return n.message=n.message.replace(e,t),n}function dU(n){for(const e of n)if("object"==typeof e&&!yM(e))return e;return{}}function hU(n,e){var t,r;let i;return i=yM(n[0])?n[0]:yM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $I{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eU(this._delegate,e._delegate)}}class WI extends $I{data(e){const t=this._delegate.data(e);return function x2(n,e){n||ft()}(void 0!==t),t}}class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}where(e,t,r){try{return new Cs(this.firestore,ch(this._delegate,function eW(n,e,t){const r=e,i=iD("where",n);return new X$(i,r,t)}(e,t,r)))}catch(i){throw Es(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cs(this.firestore,ch(this._delegate,function nW(n,e="asc"){const t=e,r=iD("orderBy",n);return new tW(r,t)}(e,t)))}catch(r){throw Es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cs(this.firestore,ch(this._delegate,function rW(n){return CF("limit",n),new qF("limit",n,"F")}(e)))}catch(t){throw Es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cs(this.firestore,ch(this._delegate,function iW(n){return CF("limitToLast",n),new qF("limitToLast",n,"L")}(e)))}catch(t){throw Es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cs(this.firestore,ch(this._delegate,function sW(...n){return new KF("startAt",n,!0)}(...e)))}catch(t){throw Es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cs(this.firestore,ch(this._delegate,function oW(...n){return new KF("startAfter",n,!1)}(...e)))}catch(t){throw Es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cs(this.firestore,ch(this._delegate,function aW(...n){return new ZF("endBefore",n,!1)}(...e)))}catch(t){throw Es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cs(this.firestore,ch(this._delegate,function uW(...n){return new ZF("endAt",n,!0)}(...e)))}catch(t){throw Es(t,"endAt()","Query.endAt()")}}isEqual(e){return eM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gW(n){n=un(n,Xi);const e=un(n.firestore,lr),t=kr(e),r=new hh(e);return function x$(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const d=yield HT(i,a,!0),g=new hF(a,d.Hi),v=g.Wu(d.documents),T=g.applyChanges(v,!1);l.resolve(T.snapshot)}catch(d){const g=D_(d,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield JT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new dh(e,r,n,i))}(this._delegate):"server"===e?.source?function mW(n){n=un(n,Xi);const e=un(n.firestore,lr),t=kr(e),r=new hh(e);return OF(t,n._query,{source:"server"}).then(i=>new dh(e,r,n,i))}(this._delegate):function pW(n){n=un(n,Xi);const e=un(n.firestore,lr),t=kr(e),r=new hh(e);return zF(n._query),OF(t,n._query).then(i=>new dh(e,r,n,i))}(this._delegate),t.then(r=>new vM(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dU(e),r=hU(e,i=>new vM(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rU(this._delegate,t,r)}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}class NW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new WI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new WI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new NW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new WI(this._firestore,r))})}isEqual(e){return eU(this._delegate,e._delegate)}}class M_ extends Cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ta(this.firestore,e):null}doc(e){try{return new Ta(this.firestore,void 0===e?ZT(this._delegate):ZT(this._delegate,e))}catch(t){throw Es(t,"doc()","CollectionReference.doc()")}}add(e){return function yW(n,e){const t=un(n.firestore,lr),r=ZT(n),i=sD(n.converter,e);return P_(t,[tD(_p(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ta(this.firestore,t))}isEqual(e){return AF(this._delegate,e._delegate)}withConverter(e){return new M_(this.firestore,this._delegate.withConverter(e?wp.getInstance(this.firestore,e):null))}}function Ip(n){return un(n,ur)}class wM{constructor(...e){this._delegate=new fc(...e)}static documentId(){return new wM(Tr.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof fc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._delegate=e}static serverTimestamp(){const e=function bW(){return new cM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ep(e)}static delete(){const e=function CW(){return new UI("deleteField")}();return e._methodName="FieldValue.delete",new Ep(e)}static arrayUnion(...e){const t=function TW(...n){return new K$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ep(t)}static arrayRemove(...e){const t=function DW(...n){return new Z$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ep(t)}static increment(e){const t=function SW(n){return new Y$("increment",n)}(e);return t._methodName="FieldValue.increment",new Ep(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const kW={Firestore:uU,GeoPoint:XT,Timestamp:hr,Blob:HI,Transaction:lU,WriteBatch:cU,DocumentReference:Ta,DocumentSnapshot:$I,Query:Cs,QueryDocumentSnapshot:WI,QuerySnapshot:vM,CollectionReference:M_,FieldPath:wM,FieldValue:Ep,setLogLevel:function MW(n){!function R2(n){Qd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function fU(n,e){return function FW(n,e=Sd.z){return new Er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function IM(n,e){return fU(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function aD(n,e){return IM(n,e).pipe(ua(void 0),RR(),(0,ot.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const g=i.find(T=>T.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function pU(n,e,t){return aD(n,t).pipe(Mt((r,i)=>function VW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function BW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return EM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return EM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return EM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Ug(),(0,ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function EM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function gU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function LW(n){(function OW(n,e){n.INTERNAL.registerComponent(new _a.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},kW)))})(n,(e,t)=>new uU(e,t,new PW)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Vg.Z);class mU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ua(void 0),RR(),b(([r,i])=>i.length>0||!r),(0,ot.U)(([r,i])=>i),mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gU(e);return pU(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return IM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),mn.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(mn.iC)}add(e){return this.ref.add(e)}doc(e){return new _U(this.ref.doc(e),this.afs)}}class _U{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=wU(r,t);return new mU(i,a,this.afs)}snapshotChanges(){return function UW(n,e){return fU(n,e).pipe(ua(void 0),RR(),(0,ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,on.D)(this.ref.get(e)).pipe(mn.iC)}}class jW{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),b(t=>t.length>0),mn.iC):aD(this.query,this.afs.schedulers.outsideAngular).pipe(mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gU(e);return pU(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return IM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),mn.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(mn.iC)}}const yU=new m.OlP("angularfire2.enableFirestorePersistence"),vU=new m.OlP("angularfire2.firestore.persistenceSettings"),HW=new m.OlP("angularfire2.firestore.settings"),$W=new m.OlP("angularfire2.firestore.use-emulator");function wU(n,e=(t=>t)){return{query:e(n),ref:n}}let WW=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S,P,V,G,ce,ye,at,ht){this.schedulers=g;const lt=(0,jr.on)(t,d,r),pt=T;S&&hf(lt,d,P,G,ce,ye,V,at),[this.firestore,this.persistenceEnabled$]=(0,jr.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Rt=d.runOutsideAngular(()=>lt.firestore());if(a&&Rt.settings(a),pt&&Rt.useEmulator(...pt),i&&!Fo(l)){const jt=()=>{try{return(0,on.D)(Rt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(yr){return typeof console<"u"&&console.warn(yr),ut(!1)}};return[Rt,d.runOutsideAngular(jt)]}return[Rt,ut(!1)]},[a,pt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=wU(i,r),d=this.schedulers.ngZone.run(()=>a);return new mU(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new jW(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new _U(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(jr.Dh),m.LFG(jr.xv,8),m.LFG(yU,8),m.LFG(HW,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(mn.HU),m.LFG(vU,8),m.LFG($W,8),m.LFG(Mg,8),m.LFG(zy,8),m.LFG(qy,8),m.LFG(hd,8),m.LFG(df,8),m.LFG(fd,8),m.LFG(m0,8),m.LFG(dd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GW=(()=>{class n{constructor(){Pg.Z.registerVersion("angularfire",mn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yU,useValue:!0},{provide:vU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[WW]}),n})(),zW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[SS]}),n.\u0275inj=m.cJS({imports:[Yo,Qy,jr.hO.initializeApp(pf_firebaseConfig),_0,GW,DB,LU,D0,DS]}),n})();(0,m.G48)(),Ga().bootstrapModule(zW).catch(n=>console.error(n))},5867:(gt,xe,F)=>{F.d(xe,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=F(9681);(0,m.registerVersion)("firebase","9.14.0","app")},127:(gt,xe,F)=>{F.d(xe,{Z:()=>m.Z});var m=F(3942);m.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(gt,xe,F)=>{F.r(xe);var m=F(5861),$=F(3942),k=F(8247),se=F(2090),pe=(F(9681),F(1877),F(4859));function he(){return window}function z(){return(z=(0,m.Z)(function*(H,M,B){var re;const{BuildInfo:Oe}=he();(0,k.ap)(M.sessionId,"AuthEvent did not contain a session ID");const it=yield ge(M.sessionId),st={};return(0,k.aq)()?st.ibi=Oe.packageName:(0,k.ar)()?st.apn=Oe.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),Oe.displayName&&(st.appDisplayName=Oe.displayName),st.sessionId=it,(0,k.at)(H,B,M.type,void 0,null!==(re=M.eventId)&&void 0!==re?re:void 0,st)})).apply(this,arguments)}function $e(){return($e=(0,m.Z)(function*(H){const{BuildInfo:M}=he(),B={};(0,k.aq)()?B.iosBundleId=M.packageName:(0,k.ar)()?B.androidPackageName=M.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),yield(0,k.au)(H,B)})).apply(this,arguments)}function nt(){return(nt=(0,m.Z)(function*(H,M,B){const{cordova:re}=he();let Oe=()=>{};try{yield new Promise((it,st)=>{let Se=null;function Ue(){var Lt;it();const dn=null===(Lt=re.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof dn&&dn(),"function"==typeof B?.close&&B.close()}function Pt(){Se||(Se=window.setTimeout(()=>{st((0,k.aw)(H,"redirect-cancelled-by-user"))},2e3))}function cn(){"visible"===document?.visibilityState&&Pt()}M.addPassiveListener(Ue),document.addEventListener("resume",Pt,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",cn,!1),Oe=()=>{M.removePassiveListener(Ue),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",cn,!1),Se&&window.clearTimeout(Se)}})}finally{Oe()}})).apply(this,arguments)}function ge(H){return Je.apply(this,arguments)}function Je(){return(Je=(0,m.Z)(function*(H){const M=Ye(H),B=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(B)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ye(H){if((0,k.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(H);const M=new ArrayBuffer(H.length),B=new Uint8Array(M);for(let re=0;re<H.length;re++)B[re]=H.charCodeAt(re);return B}class Pe extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(M)),super.onEvent(M)}initialized(){var M=this;return(0,m.Z)(function*(){yield M.initPromise})()}}function ie(H){return le.apply(this,arguments)}function le(){return(le=(0,m.Z)(function*(H){const M=yield ee()._get(fe(H));return M&&(yield ee()._remove(fe(H))),M})).apply(this,arguments)}function Q(){const H=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const re=Math.floor(Math.random()*M.length);H.push(M.charAt(re))}return H.join("")}function ee(){return(0,k.az)(k.b)}function fe(H){return(0,k.aA)("authEvent",H.config.apiKey,H.name)}function je(H){if(!H?.includes("?"))return{};const[M,...B]=H.split("?");return(0,se.zd)(B.join("?"))}function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function qt(){var H;return(null===(H=self?.location)||void 0===H?void 0:H.protocol)||null}function vr(H=(0,se.z$)()){return!("file:"!==qt()&&"ionic:"!==qt()&&"capacitor:"!==qt()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ui(){try{const H=self.localStorage,M=k.aI();if(H)return H.setItem(M,"1"),H.removeItem(M),!function Fi(H=(0,se.z$)()){return function Or(){return(0,se.w1)()&&11===document?.documentMode}()||function kn(H=(0,se.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,se.hl)()}catch{return Lr()&&(0,se.hl)()}return!1}function Lr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function Bt(){return"http:"===qt()||"https:"===qt()}()||(0,se.ru)()||vr())&&!function Li(){return(0,se.b$)()||(0,se.UG)()}()&&Ui()&&!Lr()}function _i(){return vr()&&typeof document<"u"}function Qe(){return(Qe=(0,m.Z)(function*(){return!!_i()&&new Promise(H=>{const M=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),H(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},wn=k.ax,pr="persistence";function In(H){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,m.Z)(function*(H){yield H._initializationPromise;const M=_t(),B=k.aA(pr,H.config.apiKey,H.name);M&&M.setItem(B,H._getPersistence())})).apply(this,arguments)}function _t(){var H;try{return(null===(H=function nr(){return typeof window<"u"?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch{return null}}const yt=k.ax;class xt{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(class rn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,m.Z)(function*(){const re=M._key();let Oe=B.eventManagers.get(re);return Oe||(Oe=new Pe(M),B.eventManagers.set(re,Oe),B.attachCallbackListeners(M,Oe)),Oe})()}_openPopup(M){(0,k.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,B,re,Oe){var it=this;return(0,m.Z)(function*(){!function Ce(H){var M,B,re,Oe,it,st,Se,Ue,Pt,cn;const Lt=he();(0,k.ax)("function"==typeof(null===(M=Lt?.universalLinks)||void 0===M?void 0:M.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(B=Lt?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(it=null===(Oe=null===(re=Lt?.cordova)||void 0===re?void 0:re.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===it?void 0:it.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Ue=null===(Se=null===(st=Lt?.cordova)||void 0===st?void 0:st.plugins)||void 0===Se?void 0:Se.browsertab)||void 0===Ue?void 0:Ue.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(cn=null===(Pt=Lt?.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===cn?void 0:cn.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const st=yield it._initialize(M);yield st.initialized(),st.resetRedirect(),(0,k.aD)(),yield it._originValidation(M);const Se=function be(H,M,B=null){return{type:M,eventId:B,urlResponse:null,sessionId:Q(),postBody:null,tenantId:H.tenantId,error:(0,k.aw)(H,"no-auth-event")}}(M,re,Oe);yield function ze(H,M){return ee()._set(fe(H),M)}(M,Se);const Ue=yield function K(H,M,B){return z.apply(this,arguments)}(M,Se,B),Pt=yield function Ne(H){const{cordova:M}=he();return new Promise(B=>{M.plugins.browsertab.isAvailable(re=>{let Oe=null;re?M.plugins.browsertab.openUrl(H):Oe=M.InAppBrowser.open(H,(0,k.av)()?"_blank":"_system","location=yes"),B(Oe)})})}(Ue);return function Te(H,M,B){return nt.apply(this,arguments)}(M,st,Pt)})()}_isIframeWebStorageSupported(M,B){throw new Error("Method not implemented.")}_originValidation(M){const B=M._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function J(H){return $e.apply(this,arguments)}(M)),this.originValidationPromises[B]}attachCallbackListeners(M,B){const{universalLinks:re,handleOpenURL:Oe,BuildInfo:it}=he(),st=setTimeout((0,m.Z)(function*(){yield ie(M),B.onEvent(qe())}),500),Se=function(){var cn=(0,m.Z)(function*(Lt){clearTimeout(st);const dn=yield ie(M);let es=null;dn&&Lt?.url&&(es=function Ie(H,M){var B,re;const Oe=function Be(H){const M=je(H),B=M.link?decodeURIComponent(M.link):void 0,re=je(B).link,Oe=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return je(Oe).link||Oe||re||B||H}(M);if(Oe.includes("/__/auth/callback")){const it=je(Oe),st=it.firebaseError?function ae(H){try{return JSON.parse(H)}catch{return null}}(decodeURIComponent(it.firebaseError)):null,Se=null===(re=null===(B=st?.code)||void 0===B?void 0:B.split("auth/"))||void 0===re?void 0:re[1],Ue=Se?(0,k.aw)(Se):null;return Ue?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Oe,postBody:null}}return null}(dn,Lt.url)),B.onEvent(es||qe())});return function(dn){return cn.apply(this,arguments)}}();typeof re<"u"&&"function"==typeof re.subscribe&&re.subscribe(null,Se);const Ue=Oe,Pt=`${it.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var cn=(0,m.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(Pt)&&Se({url:Lt}),"function"==typeof Ue)try{Ue(Lt)}catch(dn){console.error(dn)}});return function(Lt){return cn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,m.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,B,re,Oe){var it=this;return(0,m.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openPopup(M,B,re,Oe)})()}_openRedirect(M,B,re,Oe){var it=this;return(0,m.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openRedirect(M,B,re,Oe)})()}_isIframeWebStorageSupported(M,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,B)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return _i()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,m.Z)(function*(){if(M.underlyingResolver)return;const B=yield function Vi(){return Qe.apply(this,arguments)}();M.underlyingResolver=B?M.cordovaResolver:M.browserResolver})()}}function Fr(H){return H.unwrap()}function Ar(H){return Rr(H)}function Rr(H){const{_tokenResponse:M}=H instanceof se.ZR?H.customData:H;if(!M)return null;if(!(H instanceof se.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return k.P.credentialFromResult(H);const B=M.providerId;if(!B||B===k.o.PASSWORD)return null;let re;switch(B){case k.o.GOOGLE:re=k.Q;break;case k.o.FACEBOOK:re=k.N;break;case k.o.GITHUB:re=k.T;break;case k.o.TWITTER:re=k.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:it,oauthTokenSecret:st,pendingToken:Se,nonce:Ue}=M;return it||st||Oe||Se?Se?B.startsWith("saml.")?k.aL._create(B,Se):k.J._fromParams({providerId:B,signInMethod:B,pendingToken:Se,idToken:Oe,accessToken:it}):new k.U(B).credential({idToken:Oe,accessToken:it,rawNonce:Ue}):null}return H instanceof se.ZR?re.credentialFromError(H):re.credentialFromResult(H)}function Ot(H,M){return M.catch(B=>{throw B instanceof se.ZR&&function St(H,M){var B,re;const Oe=null===(B=M.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(re=M)||void 0===re?void 0:re.code))M.resolver=new cr(H,k.an(H,M));else if(Oe){const it=Rr(M),st=M;it&&(st.credential=it,st.tenantId=Oe.tenantId||void 0,st.email=Oe.email||void 0,st.phoneNumber=Oe.phoneNumber||void 0)}}(H,B),B}).then(B=>{const Oe=B.user;return{operationType:B.operationType,credential:Ar(B),additionalUserInfo:k.al(B),user:Sn.getOrCreate(Oe)}})}function $r(H,M){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,m.Z)(function*(H,M){const B=yield M;return{verificationId:B.verificationId,confirm:re=>Ot(H,B.confirm(re))}})).apply(this,arguments)}class cr{constructor(M,B){this.resolver=B,this.auth=function Yn(H){return H.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return Ot(Fr(this.auth),this.resolver.resolveSignIn(M))}}class Sn{constructor(M){this._delegate=M,this.multiFactor=k.ao(M)}static getOrCreate(M){return Sn.USER_MAP.has(M)||Sn.USER_MAP.set(M,new Sn(M)),Sn.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var B=this;return(0,m.Z)(function*(){return Ot(B.auth,k.Z(B._delegate,M))})()}linkWithPhoneNumber(M,B){var re=this;return(0,m.Z)(function*(){return $r(re.auth,k.l(re._delegate,M,B))})()}linkWithPopup(M){var B=this;return(0,m.Z)(function*(){return Ot(B.auth,k.d(B._delegate,M,xt))})()}linkWithRedirect(M){var B=this;return(0,m.Z)(function*(){return yield In(k.aE(B.auth)),k.g(B._delegate,M,xt)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var B=this;return(0,m.Z)(function*(){return Ot(B.auth,k._(B._delegate,M))})()}reauthenticateWithPhoneNumber(M,B){return $r(this.auth,k.r(this._delegate,M,B))}reauthenticateWithPopup(M){return Ot(this.auth,k.e(this._delegate,M,xt))}reauthenticateWithRedirect(M){var B=this;return(0,m.Z)(function*(){return yield In(k.aE(B.auth)),k.h(B._delegate,M,xt)})()}sendEmailVerification(M){return k.ab(this._delegate,M)}unlink(M){var B=this;return(0,m.Z)(function*(){return yield k.ak(B._delegate,M),B})()}updateEmail(M){return k.ag(this._delegate,M)}updatePassword(M){return k.ah(this._delegate,M)}updatePhoneNumber(M){return k.u(this._delegate,M)}updateProfile(M){return k.af(this._delegate,M)}verifyBeforeUpdateEmail(M,B){return k.ac(this._delegate,M,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sn.USER_MAP=new WeakMap;const et=k.ax;let De=(()=>{class H{constructor(B,re){if(this.app=B,re.isInitialized())return this._delegate=re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=B.options;et(Oe,"invalid-api-key",{appName:B.name}),et(Oe,"invalid-api-key",{appName:B.name});const it=typeof window<"u"?xt:void 0;this._delegate=re.initialize({options:{persistence:Ct(Oe,B.name),popupRedirectResolver:it}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,re){k.G(this._delegate,B,re)}applyActionCode(B){return k.a2(this._delegate,B)}checkActionCode(B){return k.a3(this._delegate,B)}confirmPasswordReset(B,re){return k.a1(this._delegate,B,re)}createUserWithEmailAndPassword(B,re){var Oe=this;return(0,m.Z)(function*(){return Ot(Oe._delegate,k.a5(Oe._delegate,B,re))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return k.aa(this._delegate,B)}isSignInWithEmailLink(B){return k.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,m.Z)(function*(){et(Vn(),B._delegate,"operation-not-supported-in-this-environment");const re=yield k.j(B._delegate,xt);return re?Ot(B._delegate,Promise.resolve(re)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function ln(H,M){(0,k.aE)(H)._logFramework(M)}(this._delegate,B)}onAuthStateChanged(B,re,Oe){const{next:it,error:st,complete:Se}=tt(B,re,Oe);return this._delegate.onAuthStateChanged(it,st,Se)}onIdTokenChanged(B,re,Oe){const{next:it,error:st,complete:Se}=tt(B,re,Oe);return this._delegate.onIdTokenChanged(it,st,Se)}sendSignInLinkToEmail(B,re){return k.a7(this._delegate,B,re)}sendPasswordResetEmail(B,re){return k.a0(this._delegate,B,re||void 0)}setPersistence(B){var re=this;return(0,m.Z)(function*(){let Oe;switch(function qs(H,M){wn(Object.values(Zn).includes(M),H,"invalid-persistence-type"),(0,se.b$)()?wn(M!==Zn.SESSION,H,"unsupported-persistence-type"):(0,se.UG)()?wn(M===Zn.NONE,H,"unsupported-persistence-type"):Lr()?wn(M===Zn.NONE||M===Zn.LOCAL&&(0,se.hl)(),H,"unsupported-persistence-type"):wn(M===Zn.NONE||Ui(),H,"unsupported-persistence-type")}(re._delegate,B),B){case Zn.SESSION:Oe=k.a;break;case Zn.LOCAL:Oe=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case Zn.NONE:Oe=k.L;break;default:return k.as("argument-error",{appName:re._delegate.name})}return re._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return Ot(this._delegate,k.X(this._delegate))}signInWithCredential(B){return Ot(this._delegate,k.Y(this._delegate,B))}signInWithCustomToken(B){return Ot(this._delegate,k.$(this._delegate,B))}signInWithEmailAndPassword(B,re){return Ot(this._delegate,k.a6(this._delegate,B,re))}signInWithEmailLink(B,re){return Ot(this._delegate,k.a9(this._delegate,B,re))}signInWithPhoneNumber(B,re){return $r(this._delegate,k.s(this._delegate,B,re))}signInWithPopup(B){var re=this;return(0,m.Z)(function*(){return et(Vn(),re._delegate,"operation-not-supported-in-this-environment"),Ot(re._delegate,k.c(re._delegate,B,xt))})()}signInWithRedirect(B){var re=this;return(0,m.Z)(function*(){return et(Vn(),re._delegate,"operation-not-supported-in-this-environment"),yield In(re._delegate),k.f(re._delegate,B,xt)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return k.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=Zn,H})();function tt(H,M,B){let re=H;"function"!=typeof H&&({next:re,error:M,complete:B}=H);const Oe=re;return{next:st=>Oe(st&&Sn.getOrCreate(st)),error:M,complete:B}}function Ct(H,M){const B=function gn(H,M){const B=_t();if(!B)return[];const re=k.aA(pr,H,M);switch(B.getItem(re)){case Zn.NONE:return[k.L];case Zn.LOCAL:return[k.i,k.a];case Zn.SESSION:return[k.a];default:return[]}}(H,M);if(typeof self<"u"&&!B.includes(k.i)&&B.push(k.i),typeof window<"u")for(const re of[k.b,k.a])B.includes(re)||B.push(re);return B.includes(k.L)||B.push(k.L),B}class Tt{constructor(){this.providerId="phone",this._delegate=new k.P(Fr($.Z.auth()))}static credential(M,B){return k.P.credential(M,B)}verifyPhoneNumber(M,B){return this._delegate.verifyPhoneNumber(M,B)}unwrap(){return this._delegate}}Tt.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Tt.PROVIDER_ID=k.P.PROVIDER_ID;const Xt=k.ax;class q{constructor(M,B,re=$.Z.app()){var Oe;Xt(null===(Oe=re.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:re.name}),this._delegate=new k.R(M,B,re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(H){H.INTERNAL.registerComponent(new pe.wA("auth-compat",M=>{const B=M.getProvider("app-compat").getImmediate(),re=M.getProvider("auth");return new De(B,re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Tt,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:q,TwitterAuthProvider:k.W,Auth:De,AuthCredential:k.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(gt,xe,F)=>{F.d(xe,{y:()=>he});var m=F(930),$=F(727),k=F(8822),se=F(9635),ue=F(2416),me=F(576),pe=F(2806);let he=(()=>{class J{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Te=new J;return Te.source=this,Te.operator=Ne,Te}subscribe(Ne,Te,nt){const Ce=function z(J){return J&&J instanceof m.Lv||function K(J){return J&&(0,me.m)(J.next)&&(0,me.m)(J.error)&&(0,me.m)(J.complete)}(J)&&(0,$.Nn)(J)}(Ne)?Ne:new m.Hp(Ne,Te,nt);return(0,pe.x)(()=>{const{operator:ge,source:Je}=this;Ce.add(ge?ge.call(Ce,Je):Je?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Te){Ne.error(Te)}}forEach(Ne,Te){return new(Te=we(Te))((nt,Ce)=>{const ge=new m.Hp({next:Je=>{try{Ne(Je)}catch(Ye){Ce(Ye),ge.unsubscribe()}},error:Ce,complete:nt});this.subscribe(ge)})}_subscribe(Ne){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Ne)}[k.L](){return this}pipe(...Ne){return(0,se.U)(Ne)(this)}toPromise(Ne){return new(Ne=we(Ne))((Te,nt)=>{let Ce;this.subscribe(ge=>Ce=ge,ge=>nt(ge),()=>Te(Ce))})}}return J.create=$e=>new J($e),J})();function we(J){var $e;return null!==($e=J??ue.v.Promise)&&void 0!==$e?$e:Promise}},7579:(gt,xe,F)=>{F.d(xe,{x:()=>pe});var m=F(9751),$=F(727);const se=(0,F(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=F(8737),me=F(2806);let pe=(()=>{class we extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new he(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new se}next(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:$e,observers:Ne}=this;return J||$e?$.Lc:(this.currentObservers=null,Ne.push(z),new $.w0(()=>{this.currentObservers=null,(0,ue.P)(Ne,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:$e,isStopped:Ne}=this;J?z.error($e):Ne&&z.complete()}asObservable(){const z=new m.y;return z.source=this,z}}return we.create=(K,z)=>new he(K,z),we})();class he extends pe{constructor(K,z){super(),this.destination=K,this.source=z}next(K){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,K)}error(K){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,K)}complete(){var K,z;null===(z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===z||z.call(K)}_subscribe(K){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(K))&&void 0!==J?J:$.Lc}}},930:(gt,xe,F)=>{F.d(xe,{Hp:()=>nt,Lv:()=>J});var m=F(576),$=F(727),k=F(2416),se=F(7849),ue=F(5032);const me=we("C",void 0,void 0);function we(Le,Pe,be){return{kind:Le,value:Pe,error:be}}var K=F(3410),z=F(2806);class J extends $.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,$.Nn)(Pe)&&Pe.add(this)):this.destination=Ye}static create(Pe,be,ze){return new nt(Pe,be,ze)}next(Pe){this.isStopped?Je(function he(Le){return we("N",Le,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Je(function pe(Le){return we("E",void 0,Le)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Je(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Ne(Le,Pe){return $e.call(Le,Pe)}class Te{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:be}=this;if(be.next)try{be.next(Pe)}catch(ze){Ce(ze)}}error(Pe){const{partialObserver:be}=this;if(be.error)try{be.error(Pe)}catch(ze){Ce(ze)}else Ce(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(be){Ce(be)}}}class nt extends J{constructor(Pe,be,ze){let ie;if(super(),(0,m.m)(Pe)||!Pe)ie={next:Pe??void 0,error:be??void 0,complete:ze??void 0};else{let le;this&&k.v.useDeprecatedNextContext?(le=Object.create(Pe),le.unsubscribe=()=>this.unsubscribe(),ie={next:Pe.next&&Ne(Pe.next,le),error:Pe.error&&Ne(Pe.error,le),complete:Pe.complete&&Ne(Pe.complete,le)}):ie=Pe}this.destination=new Te(ie)}}function Ce(Le){k.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Le):(0,se.h)(Le)}function Je(Le,Pe){const{onStoppedNotification:be}=k.v;be&&K.z.setTimeout(()=>be(Le,Pe))}const Ye={closed:!0,next:ue.Z,error:function ge(Le){throw Le},complete:ue.Z}},727:(gt,xe,F)=>{F.d(xe,{Lc:()=>me,w0:()=>ue,Nn:()=>pe});var m=F(576);const k=(0,F(3888).d)(we=>function(z){we(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,$e)=>`${$e+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var se=F(8737);class ue{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ne of z)Ne.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,m.m)(J))try{J()}catch(Ne){K=Ne instanceof k?Ne.errors:[Ne]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Ne of $e)try{he(Ne)}catch(Te){K=K??[],Te instanceof k?K=[...K,...Te.errors]:K.push(Te)}}if(K)throw new k(K)}}add(K){var z;if(K&&K!==this)if(this.closed)he(K);else{if(K instanceof ue){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(K)}}_hasParent(K){const{_parentage:z}=this;return z===K||Array.isArray(z)&&z.includes(K)}_addParent(K){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(K),z):z?[z,K]:K}_removeParent(K){const{_parentage:z}=this;z===K?this._parentage=null:Array.isArray(z)&&(0,se.P)(z,K)}remove(K){const{_finalizers:z}=this;z&&(0,se.P)(z,K),K instanceof ue&&K._removeParent(this)}}ue.EMPTY=(()=>{const we=new ue;return we.closed=!0,we})();const me=ue.EMPTY;function pe(we){return we instanceof ue||we&&"closed"in we&&(0,m.m)(we.remove)&&(0,m.m)(we.add)&&(0,m.m)(we.unsubscribe)}function he(we){(0,m.m)(we)?we():we.unsubscribe()}},2416:(gt,xe,F)=>{F.d(xe,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,xe,F)=>{F.d(xe,{E:()=>$});const $=new(F(9751).y)(ue=>ue.complete())},8996:(gt,xe,F)=>{F.d(xe,{D:()=>Pe});var m=F(8421),$=F(5363),k=F(9468),me=F(9751),he=F(2202),we=F(576),K=F(9672);function J(be,ze){if(!be)throw new Error("Iterable cannot be null");return new me.y(ie=>{(0,K.f)(ie,ze,()=>{const le=be[Symbol.asyncIterator]();(0,K.f)(ie,ze,()=>{le.next().then(Ie=>{Ie.done?ie.complete():ie.next(Ie.value)})},0,!0)})})}var $e=F(3670),Ne=F(8239),Te=F(1144),nt=F(6495),Ce=F(2206),ge=F(4532),Je=F(3260);function Pe(be,ze){return ze?function Le(be,ze){if(null!=be){if((0,$e.c)(be))return function se(be,ze){return(0,m.Xf)(be).pipe((0,k.R)(ze),(0,$.Q)(ze))}(be,ze);if((0,Te.z)(be))return function pe(be,ze){return new me.y(ie=>{let le=0;return ze.schedule(function(){le===be.length?ie.complete():(ie.next(be[le++]),ie.closed||this.schedule())})})}(be,ze);if((0,Ne.t)(be))return function ue(be,ze){return(0,m.Xf)(be).pipe((0,k.R)(ze),(0,$.Q)(ze))}(be,ze);if((0,Ce.D)(be))return J(be,ze);if((0,nt.T)(be))return function z(be,ze){return new me.y(ie=>{let le;return(0,K.f)(ie,ze,()=>{le=be[he.h](),(0,K.f)(ie,ze,()=>{let Ie,Q;try{({value:Ie,done:Q}=le.next())}catch(ee){return void ie.error(ee)}Q?ie.complete():ie.next(Ie)},0,!0)}),()=>(0,we.m)(le?.return)&&le.return()})}(be,ze);if((0,Je.L)(be))return function Ye(be,ze){return J((0,Je.Q)(be),ze)}(be,ze)}throw(0,ge.z)(be)}(be,ze):(0,m.Xf)(be)}},8421:(gt,xe,F)=>{F.d(xe,{Xf:()=>$e});var m=F(655),$=F(1144),k=F(8239),se=F(9751),ue=F(3670),me=F(2206),pe=F(4532),he=F(6495),we=F(3260),K=F(576),z=F(7849),J=F(8822);function $e(Le){if(Le instanceof se.y)return Le;if(null!=Le){if((0,ue.c)(Le))return function Ne(Le){return new se.y(Pe=>{const be=Le[J.L]();if((0,K.m)(be.subscribe))return be.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,$.z)(Le))return function Te(Le){return new se.y(Pe=>{for(let be=0;be<Le.length&&!Pe.closed;be++)Pe.next(Le[be]);Pe.complete()})}(Le);if((0,k.t)(Le))return function nt(Le){return new se.y(Pe=>{Le.then(be=>{Pe.closed||(Pe.next(be),Pe.complete())},be=>Pe.error(be)).then(null,z.h)})}(Le);if((0,me.D)(Le))return ge(Le);if((0,he.T)(Le))return function Ce(Le){return new se.y(Pe=>{for(const be of Le)if(Pe.next(be),Pe.closed)return;Pe.complete()})}(Le);if((0,we.L)(Le))return function Je(Le){return ge((0,we.Q)(Le))}(Le)}throw(0,pe.z)(Le)}function ge(Le){return new se.y(Pe=>{(function Ye(Le,Pe){var be,ze,ie,le;return(0,m.mG)(this,void 0,void 0,function*(){try{for(be=(0,m.KL)(Le);!(ze=yield be.next()).done;)if(Pe.next(ze.value),Pe.closed)return}catch(Ie){ie={error:Ie}}finally{try{ze&&!ze.done&&(le=be.return)&&(yield le.call(be))}finally{if(ie)throw ie.error}}Pe.complete()})})(Le,Pe).catch(be=>Pe.error(be))})}},6451:(gt,xe,F)=>{F.d(xe,{T:()=>me});var m=F(8189),$=F(8421),k=F(515),se=F(7669),ue=F(8996);function me(...pe){const he=(0,se.yG)(pe),we=(0,se._6)(pe,1/0),K=pe;return K.length?1===K.length?(0,$.Xf)(K[0]):(0,m.J)(we)((0,ue.D)(K,he)):k.E}},5403:(gt,xe,F)=>{F.d(xe,{x:()=>$});var m=F(930);function $(se,ue,me,pe,he){return new k(se,ue,me,pe,he)}class k extends m.Lv{constructor(ue,me,pe,he,we,K){super(ue),this.onFinalize=we,this.shouldUnsubscribe=K,this._next=me?function(z){try{me(z)}catch(J){ue.error(J)}}:super._next,this._error=he?function(z){try{he(z)}catch(J){ue.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(z){ue.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(gt,xe,F)=>{F.d(xe,{U:()=>k});var m=F(4482),$=F(5403);function k(se,ue){return(0,m.e)((me,pe)=>{let he=0;me.subscribe((0,$.x)(pe,we=>{pe.next(se.call(ue,we,he++))}))})}},8189:(gt,xe,F)=>{F.d(xe,{J:()=>k});var m=F(5577),$=F(4671);function k(se=1/0){return(0,m.z)($.y,se)}},5577:(gt,xe,F)=>{F.d(xe,{z:()=>he});var m=F(4004),$=F(8421),k=F(4482),se=F(9672),ue=F(5403),pe=F(576);function he(we,K,z=1/0){return(0,pe.m)(K)?he((J,$e)=>(0,m.U)((Ne,Te)=>K(J,Ne,$e,Te))((0,$.Xf)(we(J,$e))),z):("number"==typeof K&&(z=K),(0,k.e)((J,$e)=>function me(we,K,z,J,$e,Ne,Te,nt){const Ce=[];let ge=0,Je=0,Ye=!1;const Le=()=>{Ye&&!Ce.length&&!ge&&K.complete()},Pe=ze=>ge<J?be(ze):Ce.push(ze),be=ze=>{Ne&&K.next(ze),ge++;let ie=!1;(0,$.Xf)(z(ze,Je++)).subscribe((0,ue.x)(K,le=>{$e?.(le),Ne?Pe(le):K.next(le)},()=>{ie=!0},void 0,()=>{if(ie)try{for(ge--;Ce.length&&ge<J;){const le=Ce.shift();Te?(0,se.f)(K,Te,()=>be(le)):be(le)}Le()}catch(le){K.error(le)}}))};return we.subscribe((0,ue.x)(K,Pe,()=>{Ye=!0,Le()})),()=>{nt?.()}}(J,$e,we,z)))}},5363:(gt,xe,F)=>{F.d(xe,{Q:()=>se});var m=F(9672),$=F(4482),k=F(5403);function se(ue,me=0){return(0,$.e)((pe,he)=>{pe.subscribe((0,k.x)(he,we=>(0,m.f)(he,ue,()=>he.next(we),me),()=>(0,m.f)(he,ue,()=>he.complete(),me),we=>(0,m.f)(he,ue,()=>he.error(we),me)))})}},3099:(gt,xe,F)=>{F.d(xe,{B:()=>ue});var m=F(8421),$=F(7579),k=F(930),se=F(4482);function ue(pe={}){const{connector:he=(()=>new $.x),resetOnError:we=!0,resetOnComplete:K=!0,resetOnRefCountZero:z=!0}=pe;return J=>{let $e,Ne,Te,nt=0,Ce=!1,ge=!1;const Je=()=>{Ne?.unsubscribe(),Ne=void 0},Ye=()=>{Je(),$e=Te=void 0,Ce=ge=!1},Le=()=>{const Pe=$e;Ye(),Pe?.unsubscribe()};return(0,se.e)((Pe,be)=>{nt++,!ge&&!Ce&&Je();const ze=Te=Te??he();be.add(()=>{nt--,0===nt&&!ge&&!Ce&&(Ne=me(Le,z))}),ze.subscribe(be),!$e&&nt>0&&($e=new k.Hp({next:ie=>ze.next(ie),error:ie=>{ge=!0,Je(),Ne=me(Ye,we,ie),ze.error(ie)},complete:()=>{Ce=!0,Je(),Ne=me(Ye,K),ze.complete()}}),(0,m.Xf)(Pe).subscribe($e))})(J)}}function me(pe,he,...we){if(!0===he)return void pe();if(!1===he)return;const K=new k.Hp({next:()=>{K.unsubscribe(),pe()}});return he(...we).subscribe(K)}},9468:(gt,xe,F)=>{F.d(xe,{R:()=>$});var m=F(4482);function $(k,se=0){return(0,m.e)((ue,me)=>{me.add(k.schedule(()=>ue.subscribe(me),se))})}},8505:(gt,xe,F)=>{F.d(xe,{b:()=>ue});var m=F(576),$=F(4482),k=F(5403),se=F(4671);function ue(me,pe,he){const we=(0,m.m)(me)||pe||he?{next:me,error:pe,complete:he}:me;return we?(0,$.e)((K,z)=>{var J;null===(J=we.subscribe)||void 0===J||J.call(we);let $e=!0;K.subscribe((0,k.x)(z,Ne=>{var Te;null===(Te=we.next)||void 0===Te||Te.call(we,Ne),z.next(Ne)},()=>{var Ne;$e=!1,null===(Ne=we.complete)||void 0===Ne||Ne.call(we),z.complete()},Ne=>{var Te;$e=!1,null===(Te=we.error)||void 0===Te||Te.call(we,Ne),z.error(Ne)},()=>{var Ne,Te;$e&&(null===(Ne=we.unsubscribe)||void 0===Ne||Ne.call(we)),null===(Te=we.finalize)||void 0===Te||Te.call(we)}))}):se.y}},4408:(gt,xe,F)=>{F.d(xe,{o:()=>ue});var m=F(727);class $ extends m.w0{constructor(pe,he){super()}schedule(pe,he=0){return this}}const k={setInterval(me,pe,...he){const{delegate:we}=k;return we?.setInterval?we.setInterval(me,pe,...he):setInterval(me,pe,...he)},clearInterval(me){const{delegate:pe}=k;return(pe?.clearInterval||clearInterval)(me)},delegate:void 0};var se=F(8737);class ue extends ${constructor(pe,he){super(pe,he),this.scheduler=pe,this.work=he,this.pending=!1}schedule(pe,he=0){var we;if(this.closed)return this;this.state=pe;const K=this.id,z=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(z,K,he)),this.pending=!0,this.delay=he,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(z,this.id,he),this}requestAsyncId(pe,he,we=0){return k.setInterval(pe.flush.bind(pe,this),we)}recycleAsyncId(pe,he,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return he;null!=he&&k.clearInterval(he)}execute(pe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(pe,he);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,he){let K,we=!1;try{this.work(pe)}catch(z){we=!0,K=z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:pe,scheduler:he}=this,{actions:we}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(we,this),null!=pe&&(this.id=this.recycleAsyncId(he,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,xe,F)=>{F.d(xe,{v:()=>k});var m=F(6063);class ${constructor(ue,me=$.now){this.schedulerActionCtor=ue,this.now=me}schedule(ue,me=0,pe){return new this.schedulerActionCtor(this,ue).schedule(pe,me)}}$.now=m.l.now;class k extends ${constructor(ue,me=$.now){super(ue,me),this.actions=[],this._active=!1}flush(ue){const{actions:me}=this;if(this._active)return void me.push(ue);let pe;this._active=!0;do{if(pe=ue.execute(ue.state,ue.delay))break}while(ue=me.shift());if(this._active=!1,pe){for(;ue=me.shift();)ue.unsubscribe();throw pe}}}},4986:(gt,xe,F)=>{F.d(xe,{z:()=>k});var m=F(4408);const k=new(F(7565).v)(m.o)},6063:(gt,xe,F)=>{F.d(xe,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(gt,xe,F)=>{F.d(xe,{z:()=>m});const m={setTimeout($,k,...se){const{delegate:ue}=m;return ue?.setTimeout?ue.setTimeout($,k,...se):setTimeout($,k,...se)},clearTimeout($){const{delegate:k}=m;return(k?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(gt,xe,F)=>{F.d(xe,{h:()=>$});const $=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,xe,F)=>{F.d(xe,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,xe,F)=>{F.d(xe,{_6:()=>me,jO:()=>se,yG:()=>ue});var m=F(576);function k(pe){return pe[pe.length-1]}function se(pe){return(0,m.m)(k(pe))?pe.pop():void 0}function ue(pe){return function $(pe){return pe&&(0,m.m)(pe.schedule)}(k(pe))?pe.pop():void 0}function me(pe,he){return"number"==typeof k(pe)?pe.pop():he}},8737:(gt,xe,F)=>{function m($,k){if($){const se=$.indexOf(k);0<=se&&$.splice(se,1)}}F.d(xe,{P:()=>m})},3888:(gt,xe,F)=>{function m($){const se=$(ue=>{Error.call(ue),ue.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(xe,{d:()=>m})},2806:(gt,xe,F)=>{F.d(xe,{O:()=>se,x:()=>k});var m=F(2416);let $=null;function k(ue){if(m.v.useDeprecatedSynchronousErrorHandling){const me=!$;if(me&&($={errorThrown:!1,error:null}),ue(),me){const{errorThrown:pe,error:he}=$;if($=null,pe)throw he}}else ue()}function se(ue){m.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ue)}},9672:(gt,xe,F)=>{function m($,k,se,ue=0,me=!1){const pe=k.schedule(function(){se(),me?$.add(this.schedule(null,ue)):this.unsubscribe()},ue);if($.add(pe),!me)return pe}F.d(xe,{f:()=>m})},4671:(gt,xe,F)=>{function m($){return $}F.d(xe,{y:()=>m})},1144:(gt,xe,F)=>{F.d(xe,{z:()=>m});const m=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(gt,xe,F)=>{F.d(xe,{D:()=>$});var m=F(576);function $(k){return Symbol.asyncIterator&&(0,m.m)(k?.[Symbol.asyncIterator])}},576:(gt,xe,F)=>{function m($){return"function"==typeof $}F.d(xe,{m:()=>m})},3670:(gt,xe,F)=>{F.d(xe,{c:()=>k});var m=F(8822),$=F(576);function k(se){return(0,$.m)(se[m.L])}},6495:(gt,xe,F)=>{F.d(xe,{T:()=>k});var m=F(2202),$=F(576);function k(se){return(0,$.m)(se?.[m.h])}},8239:(gt,xe,F)=>{F.d(xe,{t:()=>$});var m=F(576);function $(k){return(0,m.m)(k?.then)}},3260:(gt,xe,F)=>{F.d(xe,{L:()=>se,Q:()=>k});var m=F(655),$=F(576);function k(ue){return(0,m.FC)(this,arguments,function*(){const pe=ue.getReader();try{for(;;){const{value:he,done:we}=yield(0,m.qq)(pe.read());if(we)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(he)}}finally{pe.releaseLock()}})}function se(ue){return(0,$.m)(ue?.getReader)}},4482:(gt,xe,F)=>{F.d(xe,{A:()=>$,e:()=>k});var m=F(576);function $(se){return(0,m.m)(se?.lift)}function k(se){return ue=>{if($(ue))return ue.lift(function(me){try{return se(me,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,xe,F)=>{function m(){}F.d(xe,{Z:()=>m})},9635:(gt,xe,F)=>{F.d(xe,{U:()=>k,z:()=>$});var m=F(4671);function $(...se){return k(se)}function k(se){return 0===se.length?m.y:1===se.length?se[0]:function(me){return se.reduce((pe,he)=>he(pe),me)}}},7849:(gt,xe,F)=>{F.d(xe,{h:()=>k});var m=F(2416),$=F(3410);function k(se){$.z.setTimeout(()=>{const{onUnhandledError:ue}=m.v;if(!ue)throw se;ue(se)})}},4532:(gt,xe,F)=>{function m($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(xe,{z:()=>m})},655:(gt,xe,F)=>{function se(Q,ee){var fe={};for(var ae in Q)Object.prototype.hasOwnProperty.call(Q,ae)&&ee.indexOf(ae)<0&&(fe[ae]=Q[ae]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(Q);Be<ae.length;Be++)ee.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(Q,ae[Be])&&(fe[ae[Be]]=Q[ae[Be]])}return fe}function he(Q,ee,fe,ae){return new(fe||(fe=Promise))(function(je,mt){function rn(ln){try{qe(ae.next(ln))}catch(En){mt(En)}}function Ht(ln){try{qe(ae.throw(ln))}catch(En){mt(En)}}function qe(ln){ln.done?je(ln.value):function Be(je){return je instanceof fe?je:new fe(function(mt){mt(je)})}(ln.value).then(rn,Ht)}qe((ae=ae.apply(Q,ee||[])).next())})}function Ce(Q){return this instanceof Ce?(this.v=Q,this):new Ce(Q)}function ge(Q,ee,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=fe.apply(Q,ee||[]),je=[];return Be={},mt("next"),mt("throw"),mt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function mt(tn){ae[tn]&&(Be[tn]=function(nn){return new Promise(function(qt,Bt){je.push([tn,nn,qt,Bt])>1||rn(tn,nn)})})}function rn(tn,nn){try{!function Ht(tn){tn.value instanceof Ce?Promise.resolve(tn.value.v).then(qe,ln):En(je[0][2],tn)}(ae[tn](nn))}catch(qt){En(je[0][3],qt)}}function qe(tn){rn("next",tn)}function ln(tn){rn("throw",tn)}function En(tn,nn){tn(nn),je.shift(),je.length&&rn(je[0][0],je[0][1])}}function Ye(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function J(Q){var ee="function"==typeof Symbol&&Symbol.iterator,fe=ee&&Q[ee],ae=0;if(fe)return fe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ae>=Q.length&&(Q=void 0),{value:Q&&Q[ae++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),fe={},ae("next"),ae("throw"),ae("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ae(je){fe[je]=Q[je]&&function(mt){return new Promise(function(rn,Ht){!function Be(je,mt,rn,Ht){Promise.resolve(Ht).then(function(qe){je({value:qe,done:rn})},mt)}(rn,Ht,(mt=Q[je](mt)).done,mt.value)})}}}F.d(xe,{FC:()=>ge,KL:()=>Ye,_T:()=>se,mG:()=>he,qq:()=>Ce})},4650:(gt,xe,F)=>{F.d(xe,{$8M:()=>Au,$Z:()=>yg,AFp:()=>fw,AaK:()=>he,BQk:()=>Sd,CHM:()=>_h,CRH:()=>ew,CZH:()=>ec,CqO:()=>V0,D6c:()=>fR,EJc:()=>hb,EpF:()=>F0,F$t:()=>tv,F4k:()=>U0,FYo:()=>fD,FiY:()=>Ve,G48:()=>nc,GfV:()=>pE,GkF:()=>Ug,Hsn:()=>Lu,JOm:()=>ga,KtG:()=>Bo,LFG:()=>An,LSH:()=>Bp,Lbi:()=>BA,Lck:()=>Lv,MAs:()=>k0,MMx:()=>uu,NdJ:()=>B0,OlP:()=>Tn,Oqu:()=>vf,PXZ:()=>Ib,Q6J:()=>O0,QGY:()=>Jy,QP$:()=>Oe,Qsj:()=>SM,R0b:()=>Zi,RDi:()=>Op,Rgc:()=>Mf,SBq:()=>Vl,Sil:()=>fb,Suo:()=>Of,TTD:()=>Ts,TgZ:()=>Yy,Tol:()=>xd,VKq:()=>Vv,W1O:()=>JC,WLB:()=>cu,X6Q:()=>Sb,XFs:()=>Qe,Xpm:()=>De,Xts:()=>$_,Y36:()=>eu,YKP:()=>gs,YNc:()=>N0,Yjl:()=>H,Yz7:()=>nn,Z0I:()=>Li,ZZ4:()=>Nw,_UZ:()=>Qy,_Vd:()=>Ul,_c5:()=>dR,_uU:()=>Kg,aQg:()=>zf,c2e:()=>Bf,cJS:()=>Bt,cg1:()=>Nd,dDg:()=>ww,dqk:()=>xt,eFA:()=>jm,eoX:()=>Iw,f3M:()=>b,g9A:()=>qd,h0i:()=>Bd,hGG:()=>hR,iGM:()=>KC,ifc:()=>yt,ip1:()=>Lm,jDz:()=>lu,kL8:()=>Iv,l5B:()=>Yl,lG2:()=>Y,lqb:()=>pa,lri:()=>yb,oAB:()=>Xt,oJD:()=>Vp,oxw:()=>H0,q4F:()=>gE,qLn:()=>Yh,qZA:()=>Fg,qbA:()=>jv,rWj:()=>vb,sBO:()=>Sw,sIi:()=>md,s_b:()=>wm,soG:()=>Si,tb:()=>pw,tp0:()=>At,uIk:()=>Zy,vHH:()=>Te,vpe:()=>Vs,wAp:()=>Ge,xp6:()=>GE,ynx:()=>pf,z2F:()=>tc,zSh:()=>Wp,zs3:()=>Hl});var m=F(7579),$=F(727),k=F(9751),se=F(6451),ue=F(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=me({__forward_ref__:me});function z(s){return s.__forward_ref__=z,s.toString=function(){return he(this())},s}function J(s){return function $e(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===z}(s)?s():s}class Te extends Error{constructor(o,u){super(function nt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Pe(s,o){throw new Te(-201,!1)}function Ht(s,o){null==s&&function qe(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Bt(s){return{providers:s.providers||[],imports:s.imports||[]}}function vr(s){return Or(s,Lr)||Or(s,_i)}function Li(s){return null!==vr(s)}function Or(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ui(s){return s&&(s.hasOwnProperty(Vn)||s.hasOwnProperty(Vi))?s[Vn]:null}const Lr=me({\u0275prov:me}),Vn=me({\u0275inj:me}),_i=me({ngInjectableDef:me}),Vi=me({ngInjectorDef:me});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let nr;function wn(s){const o=nr;return nr=s,o}function pr(s,o,u){const c=vr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Qe.Optional?null:void 0!==o?o:void Pe(he(s))}function In(s){return{toString:s}.toString()}var Cn=(()=>((Cn=Cn||{})[Cn.OnPush=0]="OnPush",Cn[Cn.Default=1]="Default",Cn))(),yt=(()=>{return(s=yt||(yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",yt;var s})();const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ar={},St=[],Rr=me({\u0275cmp:me}),Ot=me({\u0275dir:me}),$r=me({\u0275pipe:me}),Yt=me({\u0275mod:me}),cr=me({\u0275fac:me}),Sn=me({__NG_ELEMENT_ID__:me});let et=0;function De(s){return In(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Cn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||yt.Emulated,id:"c"+et++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,y=s.features;return h.inputs=W(s.inputs,c),h.outputs=W(s.outputs),y&&y.forEach(I=>I(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ct).filter(Tt):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(re).filter(Tt):null,h})}function Ct(s){return M(s)||B(s)}function Tt(s){return null!==s}function Xt(s){return In(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function W(s,o){if(null==s)return Ar;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),u[h]=c,o&&(o[h]=f)}return u}const Y=De;function H(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function M(s){return s[Rr]||null}function B(s){return s[Ot]||null}function re(s){return s[$r]||null}function Oe(s){const o=M(s)||B(s)||re(s);return null!==o&&o.standalone}function it(s,o){const u=s[Yt]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function rr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ni(s){return Array.isArray(s)&&!0===s[1]}function Po(s){return 0!=(8&s.flags)}function ll(s){return 2==(2&s.flags)}function Aa(s){return 1==(1&s.flags)}function Gr(s){return null!==s.template}function cl(s){return 0!=(256&s[2])}function wr(s,o){return s.hasOwnProperty(cr)?s[cr]:null}class Oo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ts(){return wc}function wc(s){return s.type.prototype.ngOnChanges&&(s.setInput=dl),mu}function mu(){const s=Lo(this),o=s?.current;if(o){const u=s.previous;if(u===Ar)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function dl(s,o,u,c){const h=Lo(s)||function hl(s,o){return s[Ic]=o}(s,{previous:Ar,current:null}),f=h.current||(h.current={}),y=h.previous,I=this.declaredInputs[u],C=y[I];f[I]=new Oo(C&&C.currentValue,o,y===Ar),s[c]=o}Ts.ngInherit=!0;const Ic="__ngSimpleChanges__";function Lo(s){return s[Ic]||null}function On(s){for(;Array.isArray(s);)s=s[0];return s}function vi(s,o){return On(o[s])}function Ir(s,o){return On(o[s.index])}function Uo(s,o){return s.data[o]}function sn(s,o){const u=o[s];return rr(u)?u:u[0]}function Ds(s){return 64==(64&s[2])}function si(s,o){return null==o?null:s[o]}function Pa(s){s[18]=0}function jn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const kt={lFrame:ja(null),bindingsEnabled:!0};function ro(){return kt.bindingsEnabled}function Me(){return kt.lFrame.lView}function Kt(){return kt.lFrame.tView}function _h(s){return kt.lFrame.contextLView=s,s[8]}function Bo(s){return kt.lFrame.contextLView=null,s}function ir(){let s=jo();for(;null!==s&&64===s.type;)s=s.parent;return s}function jo(){return kt.lFrame.currentTNode}function Ur(s,o){const u=kt.lFrame;u.currentTNode=s,u.isParent=o}function vu(){return kt.lFrame.isParent}function Ho(){kt.lFrame.isParent=!1}function sr(){const s=kt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ua(){return kt.lFrame.bindingIndex++}function Tc(s,o){const u=kt.lFrame;u.bindingIndex=u.bindingRootIndex=s,$o(o)}function $o(s){kt.lFrame.currentDirectiveIndex=s}function Va(){return kt.lFrame.currentQueryIndex}function yl(s){kt.lFrame.currentQueryIndex=s}function Ba(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Dc(s,o,u){if(u&Qe.SkipSelf){let h=o,f=s;for(;!(h=h.parent,null!==h||u&Qe.Host||(h=Ba(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,s=f}const c=kt.lFrame=wh();return c.currentTNode=o,c.lView=s,!0}function Wo(s){const o=wh(),u=s[1];kt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function wh(){const s=kt.lFrame,o=null===s?null:s.child;return null===o?ja(s):o}function ja(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ih(){const s=kt.lFrame;return kt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Sc=Ih;function Ss(){const s=Ih();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Rn(){return kt.lFrame.selectedIndex}function os(s){kt.lFrame.selectedIndex=s}function xn(){const s=kt.lFrame;return Uo(s.tView,s.selectedIndex)}function wu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function Go(s,o,u){qo(s,o,3,u)}function zo(s,o,u,c){(3&s[2])===u&&qo(s,o,u,c)}function xc(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function qo(s,o,u,c){const f=c??-1,y=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<f||-1==f)&&(Pc(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Pc(s,o,u,c){const h=u[c]<0,f=u[c+1],I=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class oi{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function as(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const f=u[c++],y=u[c++],I=u[c++];s.setAttribute(o,y,I,f)}else{const f=h,y=u[++c];bl(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),c++}}return c}function Ha(s){return 3===s||4===s||6===s}function bl(s){return 64===s.charCodeAt(0)}function $a(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Nc(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Nc(s,o,u,c,h){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const I=s[f++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=f-1;break}}}for(;f<s.length;){const I=s[f];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==h&&(s[f+1]=h));if(c===s[f+1])return void(s[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==h&&s.splice(f++,0,h)}function bh(s){return-1!==s}function or(s){return 32767&s}function Rs(s,o){let u=function Th(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Tl=!0;function Wa(s){const o=Tl;return Tl=s,o}let kc=0;const qr={};function us(s,o){const u=Tu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Dl(c.data,s),Dl(o,null),Dl(c.blueprint,null));const h=Ga(s,o),f=s.injectorIndex;if(bh(h)){const y=or(h),I=Rs(h,o),C=I[1].data;for(let A=0;A<8;A++)o[f+A]=I[y+A]|C[y+A]}return o[f+8]=h,f}function Dl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Tu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ga(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=ta(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function so(s,o,u){!function Oc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Sn)&&(c=u[Sn]),null==c&&(c=u[Sn]=kc++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Zo(s,o,u){if(u&Qe.Optional||void 0!==s)return s;Pe()}function Yo(s,o,u,c){if(u&Qe.Optional&&void 0===c&&(c=null),0==(u&(Qe.Self|Qe.Host))){const h=s[9],f=wn(void 0);try{return h?h.get(o,c,u&Qe.Optional):pr(o,c,u&Qe.Optional)}finally{wn(f)}}return Zo(c,0,u)}function Qo(s,o,u,c=Qe.Default,h){if(null!==s){if(1024&o[2]){const y=function Ah(s,o,u,c,h){let f=s,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Lc(f,y,u,c|Qe.Self,qr);if(I!==qr)return I;let C=f.parent;if(!C){const A=y[21];if(A){const N=A.get(u,qr,c);if(N!==qr)return N}C=ta(y),y=y[15]}f=C}return h}(s,o,u,c,qr);if(y!==qr)return y}const f=Lc(s,o,u,c,qr);if(f!==qr)return f}return Yo(o,u,c,h)}function Lc(s,o,u,c,h){const f=function Sh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Sn)?s[Sn]:void 0;return"number"==typeof o?o>=0?255&o:Sl:o}(u);if("function"==typeof f){if(!Dc(o,s,c))return c&Qe.Host?Zo(h,0,c):Yo(o,u,c,h);try{const y=f(c);if(null!=y||c&Qe.Optional)return y;Pe()}finally{Sc()}}else if("number"==typeof f){let y=null,I=Tu(s,o),C=-1,A=c&Qe.Host?o[16][6]:null;for((-1===I||c&Qe.SkipSelf)&&(C=-1===I?Ga(s,o):o[I+8],-1!==C&&Su(c,!1)?(y=o[1],I=or(C),o=Rs(C,o)):I=-1);-1!==I;){const N=o[1];if(Jo(f,I,N.data)){const U=Du(I,o,u,y,c,A);if(U!==qr)return U}C=o[I+8],-1!==C&&Su(c,o[1].data[I+8]===A)&&Jo(f,I,o)?(y=N,I=or(C),o=Rs(C,o)):I=-1}}return h}function Du(s,o,u,c,h,f){const y=o[1],I=y.data[s+8],N=qa(I,y,u,null==c?ll(I)&&Tl:c!=y&&0!=(3&I.type),h&Qe.Host&&f===I);return null!==N?Hi(o,y,N,I):qr}function qa(s,o,u,c,h){const f=s.providerIndexes,y=o.data,I=1048575&f,C=s.directiveStart,N=f>>20,Z=h?I+N:s.directiveEnd;for(let te=c?I:I+N;te<Z;te++){const ve=y[te];if(te<C&&u===ve||te>=C&&ve.type===u)return te}if(h){const te=y[C];if(te&&Gr(te)&&te.type===u)return C}return null}function Hi(s,o,u,c){let h=s[u];const f=o.data;if(function Cl(s){return s instanceof oi}(h)){const y=h;y.resolving&&function Je(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Te(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(f[u]));const I=Wa(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?wn(y.injectImpl):null;Dc(s,c,Qe.Default);try{h=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function El(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=wc(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==C&&wn(C),Wa(I),y.resolving=!1,Sc()}}return h}function Jo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Su(s,o){return!(s&Qe.Self||s&Qe.Host&&o)}class Xo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Qo(this._tNode,this._lView,o,c,u)}}function Sl(){return new Xo(ir(),Me())}function ta(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Au(s){return function za(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const f=u[h];if(Ha(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(f===o)return u[h+1];h+=2}}}return null}(ir(),s)}const na="__parameters__";function ia(s,o,u){return In(()=>{const c=function Al(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return I.annotation=y,I;function I(C,A,N){const U=C.hasOwnProperty(na)?C[na]:Object.defineProperty(C,na,{value:[]})[na];for(;U.length<=N;)U.push(null);return(U[N]=U[N]||[]).push(y),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Tn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Dn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Dn(c,o)):o!==s&&o.push(c)}return o}function cs(s,o){s.forEach(u=>Array.isArray(u)?cs(u,o):o(u))}function uo(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Er(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function lo(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function ot(s,o,u){let c=Wi(s,o);return c>=0?s[1|c]=u:(c=~c,function Ph(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Ka(s,o){const u=Wi(s,o);if(u>=0)return s[1|u]}function Wi(s,o){return function xu(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const f=c+(h-c>>1),y=s[f<<u];if(o===y)return f<<u;y>o?h=f:c=f+1}return~(h<<u)}(s,o,1)}const ho={},Pl="__NG_DI_FLAG__",xs="ngTempTokenPath",ds=/\n/gm,Xn="__source";let fo;function hs(s){const o=fo;return fo=s,o}function Gn(s,o=Qe.Default){if(void 0===fo)throw new Te(-203,!1);return null===fo?pr(s,void 0,o):fo.get(s,o&Qe.Optional?null:void 0,o)}function An(s,o=Qe.Default){return(function Zn(){return nr}()||Gn)(J(s),o)}function b(s,o=Qe.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),An(s,o)}function D(s){const o=[];for(let u=0;u<s.length;u++){const c=J(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Te(900,!1);let h,f=Qe.Default;for(let y=0;y<c.length;y++){const I=c[y],C=j(I);"number"==typeof C?-1===C?h=I.token:f|=C:h=I}o.push(An(h,f))}else o.push(An(c))}return o}function x(s,o){return s[Pl]=o,s.prototype[Pl]=o,s}function j(s){return s[Pl]}const Ve=x(ia("Optional"),8),At=x(ia("SkipSelf"),4);let Lh,Ml,$c;function Op(s){Lh=s}function mo(s){return function Hc(){if(void 0===Ml&&(Ml=null,xt.trustedTypes))try{Ml=xt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ml}()?.createHTML(s)||s}function Lp(s){return function _o(){if(void 0===$c&&($c=null,xt.trustedTypes))try{$c=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return $c}()?.createHTML(s)||s}class Fp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ns(s){return s instanceof Fp?s.changingThisBreaksApplicationSecurity:s}function yo(s,o){const u=function Bh(s){return s instanceof Fp&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}class B_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(mo(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class XI{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=mo(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=mo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const y=u.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function _(s){return(s=String(s)).match(p)?s:"unsafe:"+s}function E(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function R(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const O=E("area,br,col,hr,img,wbr"),ne=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Re=E("rp,rt"),hn=R(O,R(ne,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),R(Re,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),R(Re,ne)),Vr=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zc=R(Vr,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qc=E("script,style,template");class Ja{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!hn.hasOwnProperty(u))return this.sanitizedSomething=!0,!qc.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const f=c.item(h),y=f.name,I=y.toLowerCase();if(!zc.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let C=f.value;Vr[I]&&(C=_(C)),this.buf.push(" ",y,'="',Kc(C),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();hn.hasOwnProperty(u)&&!O.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Kc(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const Up=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$h=/([^\#-~ |!])/g;function Kc(s){return s.replace(/&/g,"&amp;").replace(Up,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace($h,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ol;function da(s){return"content"in s&&function j_(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Ln=(()=>((Ln=Ln||{})[Ln.NONE=0]="NONE",Ln[Ln.HTML=1]="HTML",Ln[Ln.STYLE=2]="STYLE",Ln[Ln.SCRIPT=3]="SCRIPT",Ln[Ln.URL=4]="URL",Ln[Ln.RESOURCE_URL=5]="RESOURCE_URL",Ln))();function Vp(s){const o=Wh();return o?Lp(o.sanitize(Ln.HTML,s)||""):yo(s,"HTML")?Lp(Ns(s)):function Ll(s,o){let u=null;try{Ol=Ol||function Hh(s){const o=new XI(s);return function w(){try{return!!(new window.DOMParser).parseFromString(mo(""),"text/html")}catch{return!1}}()?new B_(o):o}(s);let c=o?String(o):"";u=Ol.getInertBodyElement(c);let h=5,f=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=f,f=u.innerHTML,u=Ol.getInertBodyElement(c)}while(c!==f);return mo((new Ja).sanitizeChildren(da(u)||u))}finally{if(u){const c=da(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(function jc(){return void 0!==Lh?Lh:typeof document<"u"?document:void 0}(),Ce(s))}function Bp(s){const o=Wh();return o?o.sanitize(Ln.URL,s)||"":yo(s,"URL")?Ns(s):_(Ce(s))}function Wh(){const s=Me();return s&&s[12]}const $_=new Tn("ENVIRONMENT_INITIALIZER"),nE=new Tn("INJECTOR",-1),rE=new Tn("INJECTOR_DEF_TYPES");class iE{get(o,u=ho){if(u===ho){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}function lD(...s){return{\u0275providers:sE(0,s)}}function sE(s,...o){const u=[],c=new Set;let h;return cs(o,f=>{const y=f;Hp(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&oE(h,u),u}function oE(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];cs(h,f=>{o.push(f)})}}function Hp(s,o,u,c){if(!(s=J(s)))return!1;let h=null,f=Ui(s);const y=!f&&M(s);if(f||y){if(y&&!y.standalone)return!1;h=s}else{const C=s.ngModule;if(f=Ui(C),!f)return!1;h=C}const I=c.has(h);if(y){if(I)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)Hp(A,o,u,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let A;c.add(h);try{cs(f.imports,N=>{Hp(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&oE(A,o)}if(!I){const A=wr(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:St},{provide:rE,useValue:h,multi:!0},{provide:$_,useValue:()=>An(h),multi:!0})}const C=f.providers;null==C||I||cs(C,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const aE=me({provide:String,useValue:me});function Gh(s){return null!==s&&"object"==typeof s&&aE in s}function ks(s){return"function"==typeof s}const Wp=new Tn("Set Injector scope."),Gp={},ku={};let zp;function qp(){return void 0===zp&&(zp=new iE),zp}class pa{}class W_ extends pa{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zp(o,y=>this.processProvider(y)),this.records.set(nE,Zc(void 0,this)),h.has("environment")&&this.records.set(pa,Zc(void 0,this));const f=this.records.get(Wp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(rE.multi,St,Qe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=hs(this),c=wn(void 0);try{return o()}finally{hs(u),wn(c)}}get(o,u=ho,c=Qe.Default){this.assertNotDestroyed();const h=hs(this),f=wn(void 0);try{if(!(c&Qe.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function dD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Tn}(o)&&vr(o);I=C&&this.injectableDefInScope(C)?Zc(zh(o),Gp):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Qe.Self?qp():this.parent).get(o,u=c&Qe.Optional&&u===ho?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[xs]=y[xs]||[]).unshift(he(o)),h)throw y;return function X(s,o,u,c){const h=s[xs];throw o[Xn]&&h.unshift(o[Xn]),s.message=function oe(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];f.push(y+":"+("string"==typeof I?JSON.stringify(I):he(I)))}h=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(ds,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[xs]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{wn(f),hs(h)}}resolveInjectorInitializers(){const o=hs(this),u=wn(void 0);try{const c=this.get($_.multi,St,Qe.Self);for(const h of c)h()}finally{hs(o),wn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(o){let u=ks(o=J(o))?o:J(o&&o.provide);const c=function G_(s){return Gh(s)?Zc(void 0,s.useValue):Zc(function Kp(s,o,u){let c;if(ks(s)){const h=J(s);return wr(h)||zh(h)}if(Gh(s))c=()=>J(s.useValue);else if(function fa(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...D(s.deps||[]));else if(function $p(s){return!(!s||!s.useExisting)}(s))c=()=>An(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function qh(s){return!!s.deps}(s))return wr(h)||zh(h);c=()=>new h(...D(s.deps))}return c}(s),Gp)}(o);if(ks(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Zc(void 0,Gp,!0),h.factory=()=>D(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Gp&&(u.value=ku,u.value=u.factory()),"object"==typeof u.value&&u.value&&function cD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=J(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function zh(s){const o=vr(s),u=null!==o?o.factory:wr(s);if(null!==u)return u;if(s instanceof Tn)throw new Te(204,!1);if(s instanceof Function)return function lE(s){const o=s.length;if(o>0)throw lo(o,"?"),new Te(204,!1);const u=function kn(s){const o=s&&(s[Lr]||s[_i]);if(o){const u=function Fi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Te(204,!1)}function Zc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function z_(s){return!!s.\u0275providers}function Zp(s,o){for(const u of s)Array.isArray(u)?Zp(u,o):z_(u)?Zp(u.\u0275providers,o):o(u)}class q_{}class Qp{resolveComponentFactory(o){throw function dE(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ul=(()=>{class s{}return s.NULL=new Qp,s})();function hD(){return Yc(ir(),Me())}function Yc(s,o){return new Vl(Ir(s,o))}let Vl=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=hD,s})();function fE(s){return s instanceof Vl?s.nativeElement:s}class fD{}let SM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function AM(){const s=Me(),u=sn(ir().index,s);return(rr(u)?u:s)[11]}(),s})(),K_=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class pE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const gE=new pE("14.2.10"),Z_={};function ty(s){return s.ngOriginalError}class Yh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ty(o);for(;u&&ty(u);)u=ty(u);return u||null}}const ny=new Map;let wD=0;const rg="__ngContext__";function Br(s,o){rr(o)?(s[rg]=o[20],function ED(s){ny.set(s[20],s)}(o)):s[rg]=o}function Xa(s){return s instanceof Function?s():s}var ga=(()=>((ga=ga||{})[ga.Important=1]="Important",ga[ga.DashCase=2]="DashCase",ga))();function ay(s,o){return undefined(s,o)}function td(s){const o=s[3];return ni(o)?o[3]:o}function og(s){return SE(s[13])}function ag(s){return SE(s[4])}function SE(s){for(;null!==s&&!ni(s);)s=s[4];return s}function nd(s,o,u,c,h){if(null!=c){let f,y=!1;ni(c)?f=c:rr(c)&&(y=!0,c=c[0]);const I=On(c);0===s&&null!==u?null==h?kE(o,u,I):ma(o,u,I,h||null,!0):1===s&&null!==u?ma(o,u,I,h||null,!0):2===s?function LD(s,o,u){const c=cg(s,o);c&&function OD(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,y):3===s&&o.destroyNode(I),null!=f&&function UM(s,o,u,c,h){const f=u[7];f!==On(u)&&nd(o,s,c,f,h);for(let I=10;I<u.length;I++){const C=u[I];Bl(C[1],C,s,o,c,f)}}(o,s,f,u,h)}}function ug(s,o,u){return s.createElement(o,u)}function PE(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,jn(h,-1)),u.splice(c,1)}function dy(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&PE(h,c),o>0&&(s[u-1][4]=c[4]);const f=Er(s,10+o);!function cy(s,o){Bl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Xh(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Bl(s,o,u,3,null,null),function LM(s){let o=s[13];if(!o)return lg(s[1],s);for(;o;){let u=null;if(rr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)rr(o)&&lg(o[1],o),o=o[3];null===o&&(o=s),rr(o)&&lg(o[1],o),u=o&&o[4]}o=u}}(o)}}function lg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function fy(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof oi)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const I=h[f[y]],C=f[y+1];try{C.call(I)}finally{}}else try{f.call(h)}finally{}}}}(s,o),function hy(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],I="function"==typeof y?y(o):On(o[y]),C=c[h=u[f+2]],A=u[f+3];"boolean"==typeof A?I.removeEventListener(u[f],C,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),f+=2}else{const y=c[h=u[f+1]];u[f].call(y)}if(null!==c){for(let f=h+1;f<c.length;f++)(0,c[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&ni(o[3])){u!==o[3]&&PE(u,o);const c=o[19];null!==c&&c.detachView(s)}!function CD(s){ny.delete(s[20])}(o)}}function ME(s,o,u){return function NE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===yt.None||h===yt.Emulated)return null}return Ir(c,u)}(s,o.parent,u)}function ma(s,o,u,c,h){s.insertBefore(o,u,c,h)}function kE(s,o,u){s.appendChild(o,u)}function OE(s,o,u,c,h){null!==c?ma(s,o,u,c,h):kE(s,o,u)}function cg(s,o){return s.parentNode(o)}function Cr(s,o,u){return py(s,o,u)}let py=function FE(s,o,u){return 40&s.type?Ir(s,u):null};function hg(s,o,u,c){const h=ME(s,c,o),f=o[11],I=Cr(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)OE(f,h,u[C],I,!1);else OE(f,h,u,I,!1)}function fg(s,o){if(null!==o){const u=o.type;if(3&u)return Ir(o,s);if(4&u)return UE(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return fg(s,c);{const h=s[o.index];return ni(h)?UE(-1,h):On(h)}}if(32&u)return ay(o,s)()||On(s[o.index]);{const c=gy(s,o);return null!==c?Array.isArray(c)?c[0]:fg(td(s[16]),c):fg(s,o.next)}}return null}function gy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function UE(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return fg(c,h)}return o[7]}function my(s,o,u,c,h,f,y){for(;null!=u;){const I=c[u.index],C=u.type;if(y&&0===o&&(I&&Br(On(I),c),u.flags|=4),64!=(64&u.flags))if(8&C)my(s,o,u.child,c,h,f,!1),nd(o,s,h,I,f);else if(32&C){const A=ay(u,c);let N;for(;N=A();)nd(o,s,h,N,f);nd(o,s,h,I,f)}else 16&C?tf(s,o,c,u,h,f):nd(o,s,h,I,f);u=y?u.projectionNext:u.next}}function Bl(s,o,u,c,h,f){my(u,c,s.firstChild,o,h,f,!1)}function tf(s,o,u,c,h,f){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)nd(o,s,h,C[A],f);else my(s,o,C,y[3],h,f,!0)}function jl(s,o,u){s.setAttribute(o,"style",u)}function nf(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function FD(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||s.charCodeAt(h+f)<=32)return h}u=h+1}}const _y="ng-template";function yy(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==FD(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function jE(s){return 4===s.type&&s.value!==_y}function VD(s,o,u){return o===(4!==s.type||u?s.value:_y)}function BD(s,o,u){let c=4;const h=s.attrs||[],f=function VM(s){for(let o=0;o<s.length;o++)if(Ha(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!VD(s,C,u)||""===C&&1===o.length){if(Ls(c))return!1;y=!0}}else{const A=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!yy(s.attrs,A,u)){if(Ls(c))return!1;y=!0}continue}const U=jD(8&c?"class":C,h,jE(s),u);if(-1===U){if(Ls(c))return!1;y=!0;continue}if(""!==A){let Z;Z=U>f?"":h[U+1].toLowerCase();const te=8&c?Z:null;if(te&&-1!==FD(te,A,0)||2&c&&A!==Z){if(Ls(c))return!1;y=!0}}}}else{if(!y&&!Ls(c)&&!Ls(C))return!1;if(y&&Ls(C))continue;y=!1,c=C|1&c}}return Ls(c)||y}function Ls(s){return 0==(1&s)}function jD(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let f=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function HE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function HD(s,o,u=!1){for(let c=0;c<o.length;c++)if(BD(s,o[c],u))return!0;return!1}function $D(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function $E(s,o){return s?":not("+o.trim()+")":o}function WE(s){let o=s[0],u=1,c=2,h="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const I=s[++u];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Ls(y)&&(o+=$E(f,h),h=""),c=y,f=f||!Ls(c);u++}return""!==h&&(o+=$E(f,h)),o}const $t={};function GE(s){zE(Kt(),Me(),Rn()+s,!1)}function zE(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Go(o,f,u)}else{const f=s.preOrderHooks;null!==f&&zo(o,f,0,u)}os(u)}function gg(s,o=null,u=null,c){const h=rf(s,o,u,c);return h.resolveInjectorInitializers(),h}function rf(s,o=null,u=null,c,h=new Set){const f=[u||St,lD(s)];return c=c||("object"==typeof s?void 0:he(s)),new W_(f,o||qp(),c||null,h)}let Hl=(()=>{class s{static create(u,c){if(Array.isArray(u))return gg({name:""},c,u,"");{const h=u.name??"";return gg({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=ho,s.NULL=new iE,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>An(nE)}),s.__NG_ELEMENT_ID__=-1,s})();function eu(s,o=Qe.Default){const u=Me();return null===u?An(s,o):Qo(ir(),u,J(s),o)}function yg(){throw new Error("invalid")}function vg(s,o){return s<<17|o<<2}function wo(s){return s>>17&32767}function by(s){return 2|s}function tu(s){return(131068&s)>>2}function Ty(s,o){return-131069&s|o<<2}function id(s){return 1|s}function Oy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];yl(h),y.contentQueries(2,o[f],f)}}}function Tg(s,o,u,c,h,f,y,I,C,A,N){const U=o.blueprint.slice();return U[0]=h,U[2]=76|c,(null!==N||s&&1024&s[2])&&(U[2]|=1024),Pa(U),U[3]=U[15]=s,U[8]=u,U[10]=y||s&&s[10],U[11]=I||s&&s[11],U[12]=C||s&&s[12]||null,U[9]=A||s&&s[9]||null,U[6]=f,U[20]=function ID(){return wD++}(),U[21]=N,U[16]=2==o.type?s[16]:U,U}function ld(s,o,u,c,h){let f=s.data[o];if(null===f)f=function Ly(s,o,u,c,h){const f=jo(),y=vu(),C=s.data[o]=function d0(s,o,u,c,h,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,u,c,h),function bc(){return kt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=h;const y=function yu(){const s=kt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ur(f,!0),f}function cd(s,o,u,c){if(0===u)return-1;const h=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Fy(s,o,u){Wo(o);try{const c=s.viewQuery;null!==c&&hf(1,c,u);const h=s.template;null!==h&&l0(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Oy(s,o),s.staticViewQueries&&hf(2,s.viewQuery,u);const f=s.components;null!==f&&function lS(s,o){for(let u=0;u<o.length;u++)zy(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ss()}}function Dg(s,o,u,c){const h=o[2];if(128!=(128&h)){Wo(o);try{Pa(o),function Fa(s){return kt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&l0(s,o,u,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&Go(o,A,null)}else{const A=s.preOrderHooks;null!==A&&zo(o,A,0,null),xc(o,0)}if(function lN(s){for(let o=og(s);null!==o;o=ag(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],f=h[3];0==(512&h[2])&&jn(f,1),h[2]|=512}}}(o),function uN(s){for(let o=og(s);null!==o;o=ag(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Ds(c)&&Dg(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Oy(s,o),y){const A=s.contentCheckHooks;null!==A&&Go(o,A)}else{const A=s.contentHooks;null!==A&&zo(o,A,1),xc(o,1)}!function ud(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)os(~h);else{const f=h,y=u[++c],I=u[++c];Tc(y,f),I(2,o[f])}}}finally{os(-1)}}(s,o);const I=s.components;null!==I&&function uS(s,o){for(let u=0;u<o.length;u++)Pg(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&hf(2,C,c),y){const A=s.viewCheckHooks;null!==A&&Go(o,A)}else{const A=s.viewHooks;null!==A&&zo(o,A,2),xc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,jn(o[3],-1))}finally{Ss()}}}function l0(s,o,u,c,h){const f=Rn(),y=2&c;try{os(-1),y&&o.length>22&&zE(s,o,22,!1),u(c,h)}finally{os(f)}}function cf(s,o,u){if(Po(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}function Sg(s,o,u){!ro()||(function f0(s,o,u,c){const h=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||us(u,o),Br(c,o);const y=u.initialInputs;for(let I=h;I<f;I++){const C=s.data[I],A=Gr(C);A&&gS(o,u,C);const N=Hi(o,s,I,u);Br(N,o),null!==y&&mS(0,I-h,N,C,0,y),A&&(sn(u.index,o)[8]=N)}}(s,o,u,Ir(u,o)),128==(128&u.flags)&&function Wy(s,o,u){const c=u.directiveStart,h=u.directiveEnd,f=u.index,y=function vh(){return kt.lFrame.currentDirectiveIndex}();try{os(f);for(let I=c;I<h;I++){const C=s.data[I],A=o[I];$o(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&dd(C,A)}}finally{os(-1),$o(y)}}(s,o,u))}function Ag(s,o,u=Ir){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],I=-1===y?u(o,s):s[y];s[h++]=I}}}function Rg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Uy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Uy(s,o,u,c,h,f,y,I,C,A){const N=22+c,U=N+h,Z=function cS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:$t);return u}(N,U),te="function"==typeof A?A():A;return Z[1]={type:s,blueprint:Z,template:u,queries:null,viewQuery:I,declTNode:o,data:Z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:te,incompleteFirstPass:!1}}function Vy(s,o,u,c){const h=_0(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&pd(s).push(c,h.length-1))}function By(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function jy(s,o){const c=o.directiveEnd,h=s.data,f=o.attrs,y=[];let I=null,C=null;for(let A=o.directiveStart;A<c;A++){const N=h[A],U=N.inputs,Z=null===f||jE(o)?null:aN(U,f);y.push(Z),I=By(U,A,I),C=By(N.outputs,A,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=I,o.outputs=C}function dS(s,o){const u=sn(o,s);16&u[2]||(u[2]|=32)}function Hy(s,o,u,c){let h=!1;if(ro()){const f=function sN(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];HD(u,y.selectors,!1)&&(h||(h=[]),so(us(u,o),s,y.type),Gr(y)?(xg(s,u),h.unshift(y)):h.push(y))}return h}(s,o,u),y=null===c?null:{"":-1};if(null!==f){h=!0,pS(u,s.data.length,f.length);for(let N=0;N<f.length;N++){const U=f[N];U.providersResolver&&U.providersResolver(U)}let I=!1,C=!1,A=cd(s,o,f.length,null);for(let N=0;N<f.length;N++){const U=f[N];u.mergedAttrs=$a(u.mergedAttrs,U.hostAttrs),p0(s,u,o,A,U),fS(A,U,y),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const Z=U.type.prototype;!I&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!C&&(Z.ngOnChanges||Z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}jy(s,u)}y&&function oN(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const f=u[o[h+1]];if(null==f)throw new Te(-301,!1);c.push(o[h],f)}}}(u,c,y)}return u.mergedAttrs=$a(u.mergedAttrs,u.attrs),h}function $y(s,o,u,c,h,f){const y=f.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const C=~o.index;(function hS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=C&&I.push(C),I.push(c,h,y)}}function dd(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function xg(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function fS(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Gr(o)&&(u[""]=s)}}function pS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function p0(s,o,u,c,h){s.data[c]=h;const f=h.factory||(h.factory=wr(h.type)),y=new oi(f,Gr(h),eu);s.blueprint[c]=y,u[c]=y,$y(s,o,0,c,cd(s,u,h.hostVars,$t),h)}function gS(s,o,u){const c=Ir(o,s),h=Rg(u),f=s[10],y=hd(s,Tg(s,h,null,u.onPush?32:16,c,o,f,f.createRenderer(c,u),null,null,null));s[o.index]=y}function ru(s,o,u,c,h,f){const y=Ir(s,o);!function g0(s,o,u,c,h,f,y){if(null==f)s.removeAttribute(o,h,u);else{const I=null==y?Ce(f):y(f,c||"",h);s.setAttribute(o,h,I,u)}}(o[11],y,f,s.value,u,c,h)}function mS(s,o,u,c,h,f){const y=f[o];if(null!==y){const I=c.setInput;for(let C=0;C<y.length;){const A=y[C++],N=y[C++],U=y[C++];null!==I?c.setInput(u,U,A,N):u[N]=U}}}function aN(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function _S(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Pg(s,o){const u=sn(o,s);if(Ds(u)){const c=u[1];48&u[2]?Dg(c,u,c.template,u[8]):u[5]>0&&Gy(u)}}function Gy(s){for(let c=og(s);null!==c;c=ag(c))for(let h=10;h<c.length;h++){const f=c[h];if(Ds(f))if(512&f[2]){const y=f[1];Dg(y,f,y.template,f[8])}else f[5]>0&&Gy(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=sn(u[c],s);Ds(h)&&h[5]>0&&Gy(h)}}function zy(s,o){const u=sn(o,s),c=u[1];(function qy(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Fy(c,u,u[8])}function hd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function df(s){for(;s;){s[2]|=32;const o=td(s);if(cl(s)&&!o)return s;s=o}return null}function fd(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{Dg(s,o,s.template,u)}catch(y){throw c&&vS(o,y),y}finally{h.end&&h.end()}}function hf(s,o,u){yl(0),o(s,u)}function _0(s){return s[7]||(s[7]=[])}function pd(s){return s.cleanup||(s.cleanup=[])}function vS(s,o){const u=s[9],c=u?u.get(Yh,null):null;c&&c.handleError(o)}function y0(s,o,u,c,h){for(let f=0;f<u.length;){const y=u[f++],I=u[f++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,h,c,I):C[I]=h}}function ff(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?f=I:1==f?h=we(h,I):2==f&&(c=we(c,I+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Ky(s,o,u,c,h=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(On(f)),ni(f))for(let I=10;I<f.length;I++){const C=f[I],A=C[1].firstChild;null!==A&&Ky(C[1],C,A,c)}const y=u.type;if(8&y)Ky(s,o,u.child,c);else if(32&y){const I=ay(u,o);let C;for(;C=I();)c.push(C)}else if(16&y){const I=gy(o,u);if(Array.isArray(I))c.push(...I);else{const C=td(o[16]);Ky(C[1],C,I,c,!0)}}u=h?u.projectionNext:u.next}return c}class Ng{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Ky(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ni(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(dy(o,c),Er(u,c))}this._attachedToViewContainer=!1}Xh(this._lView[1],this._lView)}onDestroy(o){Vy(this._lView[1],this._lView,null,o)}markForCheck(){df(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){fd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xE(s,o){Bl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=o}}class v0 extends Ng{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;fd(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class w0 extends Ul{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=M(o);return new kg(u,this.ngModule)}}function wS(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class cN{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,Z_,c);return h!==Z_||u===Z_?h:this.parentInjector.get(o,u,c)}}class kg extends q_{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function WD(s){return s.map(WE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return wS(this.componentDef.inputs)}get outputs(){return wS(this.componentDef.outputs)}create(o,u,c,h){let f=(h=h||this.ngModule)instanceof pa?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new cN(o,f):o,I=y.get(fD,null);if(null===I)throw new Te(407,!1);const C=y.get(K_,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",U=c?function c0(s,o,u){return s.selectRootElement(o,u===yt.ShadowDom)}(A,c,this.componentDef.encapsulation):ug(A,N,function I0(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),Z=this.componentDef.onPush?288:272,te=Uy(0,null,null,1,0,null,null,null,null,null),ve=Tg(null,te,null,Z,null,null,I,A,C,y,null);let He,Ke;Wo(ve);try{const dt=function fN(s,o,u,c,h,f){const y=u[1];u[22]=s;const C=ld(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(ff(C,A,!0),null!==s&&(as(h,s,A),null!==C.classes&&nf(h,s,C.classes),null!==C.styles&&jl(h,s,C.styles)));const N=c.createRenderer(s,o),U=Tg(u,Rg(o),null,o.onPush?32:16,u[22],C,c,N,f||null,null,null);return y.firstCreatePass&&(so(us(C,u),y,o.type),xg(y,C),pS(C,u.length,1)),hd(u,U),u[22]=U}(U,this.componentDef,ve,I,A);if(U)if(c)as(A,U,["ng-version",gE.full]);else{const{attrs:Dt,classes:ke}=function GD(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===h?""!==f&&o.push(f,s[++c]):8===h&&u.push(f);else{if(!Ls(h))break;h=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Dt&&as(A,U,Dt),ke&&ke.length>0&&nf(A,U,ke.join(" "))}if(Ke=Uo(te,22),void 0!==u){const Dt=Ke.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const Nt=u[ke];Dt.push(null!=Nt?Array.from(Nt):null)}}He=function pN(s,o,u,c){const h=u[1],f=function iN(s,o,u){const c=ir();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),p0(s,c,o,cd(s,o,1,null),u),jy(s,c));const h=Hi(o,s,c.directiveStart,c);Br(h,o);const f=Ir(c,o);return f&&Br(f,o),h}(h,u,o);if(s[8]=u[8]=f,null!==c)for(const I of c)I(f,o);if(o.contentQueries){const I=ir();o.contentQueries(1,f,I.directiveStart)}const y=ir();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(os(y.index),$y(u[1],y,0,y.directiveStart,y.directiveEnd,o),dd(o,f)),f}(dt,this.componentDef,ve,[gN]),Fy(te,ve,null)}finally{Ss()}return new hN(this.componentType,He,Yc(Ke,ve),ve,Ke)}}class hN extends class cE{}{constructor(o,u,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new v0(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const f=this._rootLView;y0(f[1],f,h,o,u),dS(f,this._tNode.index)}}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function gN(){const s=ir();wu(Me()[1],s)}let Og=null;function gd(){if(!Og){const s=xt.Symbol;if(s&&s.iterator)Og=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Og=c)}}}return Og}function md(s){return!!C0(s)&&(Array.isArray(s)||!(s instanceof Map)&&gd()in s)}function C0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function su(s,o,u){return s[o]=u}function Jr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function $l(s,o,u,c){const h=Jr(s,o,u);return Jr(s,o+1,c)||h}function Fs(s,o,u,c,h,f){const y=$l(s,o,u,c);return $l(s,o+2,h,f)||y}function Zy(s,o,u,c){const h=Me();return Jr(h,Ua(),o)&&(Kt(),ru(xn(),h,s,o,u,c)),Zy}function N0(s,o,u,c,h,f,y,I){const C=Me(),A=Kt(),N=s+22,U=A.firstCreatePass?function CN(s,o,u,c,h,f,y,I,C){const A=o.consts,N=ld(o,s,4,y||null,si(A,I));Hy(o,u,N,si(A,C)),wu(o,N);const U=N.tViews=Uy(2,N,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),U.queries=o.queries.embeddedTView(N)),N}(N,A,C,o,u,c,h,f,y):A.data[N];Ur(U,!1);const Z=C[11].createComment("");hg(A,C,Z,U),Br(Z,C),hd(C,C[N]=_S(Z,C,Z,U)),Aa(U)&&Sg(A,C,U),null!=y&&Ag(C,U,I)}function k0(s){return function Bi(s,o){return s[o]}(function La(){return kt.lFrame.contextLView}(),22+s)}function O0(s,o,u){const c=Me();return Jr(c,Ua(),o)&&function ps(s,o,u,c,h,f,y,I){const C=Ir(o,u);let N,A=o.inputs;!I&&null!=A&&(N=A[c])?(y0(s,u,N,c,h),ll(o)&&dS(u,o.index)):3&o.type&&(c=function nN(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}(Kt(),xn(),c,s,o,c[11],u,!1),O0}function L0(s,o,u,c,h){const y=h?"class":"style";y0(s,u,o.inputs[y],y,c)}function Yy(s,o,u,c){const h=Me(),f=Kt(),y=22+s,I=h[11],C=h[y]=ug(I,o,function Il(){return kt.lFrame.currentNamespace}()),A=f.firstCreatePass?function bN(s,o,u,c,h,f,y){const I=o.consts,A=ld(o,s,2,h,si(I,f));return Hy(o,u,A,si(I,y)),null!==A.attrs&&ff(A,A.attrs,!1),null!==A.mergedAttrs&&ff(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,h,0,o,u,c):f.data[y];Ur(A,!0);const N=A.mergedAttrs;null!==N&&as(I,C,N);const U=A.classes;null!==U&&nf(I,C,U);const Z=A.styles;return null!==Z&&jl(I,C,Z),64!=(64&A.flags)&&hg(f,h,C,A),0===function Na(){return kt.lFrame.elementDepthCount}()&&Br(C,h),function Cc(){kt.lFrame.elementDepthCount++}(),Aa(A)&&(Sg(f,h,A),cf(f,A,h)),null!==c&&Ag(h,A),Yy}function Fg(){let s=ir();vu()?Ho():(s=s.parent,Ur(s,!1));const o=s;!function ka(){kt.lFrame.elementDepthCount--}();const u=Kt();return u.firstCreatePass&&(wu(u,s),Po(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Eu(s){return 0!=(16&s.flags)}(o)&&L0(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Cu(s){return 0!=(32&s.flags)}(o)&&L0(u,o,Me(),o.stylesWithoutHost,!1),Fg}function Qy(s,o,u,c){return Yy(s,o,u,c),Fg(),Qy}function pf(s,o,u){const c=Me(),h=Kt(),f=s+22,y=h.firstCreatePass?function SS(s,o,u,c,h){const f=o.consts,y=si(f,c),I=ld(o,s,8,"ng-container",y);return null!==y&&ff(I,y,!0),Hy(o,u,I,si(f,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(f,h,c,o,u):h.data[f];Ur(y,!0);const I=c[f]=c[11].createComment("");return hg(h,c,I,y),Br(I,c),Aa(y)&&(Sg(h,c,y),cf(h,y,c)),null!=u&&Ag(c,y),pf}function Sd(){let s=ir();const o=Kt();return vu()?Ho():(s=s.parent,Ur(s,!1)),o.firstCreatePass&&(wu(o,s),Po(s)&&o.queries.elementEnd(s)),Sd}function Ug(s,o,u){return pf(s,o,u),Sd(),Ug}function F0(){return Me()}function Jy(s){return!!s&&"function"==typeof s.then}function U0(s){return!!s&&"function"==typeof s.subscribe}const V0=U0;function B0(s,o,u,c){const h=Me(),f=Kt(),y=ir();return function Xy(s,o,u,c,h,f,y,I){const C=Aa(c),N=s.firstCreatePass&&pd(s),U=o[8],Z=_0(o);let te=!0;if(3&c.type||I){const Ke=Ir(c,o),dt=I?I(Ke):Ke,Dt=Z.length,ke=I?vn=>I(On(vn[c.index])):c.index;let Nt=null;if(!I&&C&&(Nt=function j0(s,o,u,c){const h=s.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===u&&h[f+1]===c){const I=o[7],C=h[f+2];return I.length>C?I[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,h,c.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=f,Nt.__ngLastListenerFn__=f,te=!1;else{f=ev(c,o,U,f,!1);const vn=u.listen(dt,h,f);Z.push(f,vn),N&&N.push(h,ke,Dt,Dt+1)}}else f=ev(c,o,U,f,!1);const ve=c.outputs;let He;if(te&&null!==ve&&(He=ve[h])){const Ke=He.length;if(Ke)for(let dt=0;dt<Ke;dt+=2){const Kn=o[He[dt]][He[dt+1]].subscribe(f),Qu=Z.length;Z.push(f,Kn),N&&N.push(h,c.index,Qu,-(Qu+1))}}}(f,h,h[11],y,s,o,0,c),B0}function Bg(s,o,u,c){try{return!1!==u(c)}catch(h){return vS(s,h),!1}}function ev(s,o,u,c,h){return function f(y){if(y===Function)return c;df(2&s.flags?sn(s.index,o):o);let C=Bg(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)C=Bg(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function H0(s=1){return function As(s){return(kt.lFrame.contextLView=function Ac(s,o){for(;s>0;)o=o[15],s--;return o}(s,kt.lFrame.contextLView))[8]}(s)}function AS(s,o){let u=null;const c=function pg(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const f=o[h];if("*"!==f){if(null===c?HD(s,f,!0):$D(c,f))return h}else u=h}return u}function tv(s){const o=Me()[16][6];if(!o.projection){const c=o.projection=lo(s?s.length:1,null),h=c.slice();let f=o.child;for(;null!==f;){const y=s?AS(f,s):0;null!==y&&(h[y]?h[y].projectionNext=f:c[y]=f,h[y]=f),f=f.next}}}function Lu(s,o=0,u){const c=Me(),h=Kt(),f=ld(h,22+s,16,null,u||null);null===f.projection&&(f.projection=o),Ho(),64!=(64&f.flags)&&function VE(s,o,u){tf(o[11],0,o,u,ME(s,u,o),Cr(u.parent||o[6],u,o))}(h,c,f)}function W0(s,o,u,c,h){const f=s[u+1],y=null===o;let I=c?wo(f):tu(f),C=!1;for(;0!==I&&(!1===C||y);){const N=s[I+1];Hg(s[I],o)&&(C=!0,s[I+1]=c?id(N):by(N)),I=c?wo(N):tu(N)}C&&(s[u+1]=c?by(f):id(f))}function Hg(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Wi(s,o)>=0}const Mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wa(s){return s.substring(Mr.key,Mr.keyEnd)}function G0(s,o){const u=Mr.textEnd;return u===o?-1:(o=Mr.keyEnd=function z0(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Mr.key=o,u),ar(s,o,u))}function ar(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function xd(s){!function bi(s,o,u,c){const h=Kt(),f=function ss(s){const o=kt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);h.firstUpdatePass&&function av(s,o,u,c){const h=s.data;if(null===h[u+1]){const f=h[Rn()],y=_f(s,u);qg(f,c)&&null===o&&!y&&(o=!1),o=function Z0(s,o,u,c){const h=function _l(s){const o=kt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Pd(u=Gg(null,s,o,u,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Gg(h,s,o,u,c),null===f){let C=function Y0(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==tu(c))return s[wo(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Gg(null,s,o,C[1],c),C=Pd(C,o.attrs,c),function Q0(s,o,u,c){s[wo(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else f=function J0(s,o,u){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=Pd(c,s[f].hostAttrs,u);return Pd(c,o.attrs,u)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),u}(h,f,o,c),function va(s,o,u,c,h,f){let y=f?o.classBindings:o.styleBindings,I=wo(y),C=tu(y);s[c]=u;let N,A=!1;if(Array.isArray(u)){const U=u;N=U[1],(null===N||Wi(U,N)>0)&&(A=!0)}else N=u;if(h)if(0!==C){const Z=wo(s[I+1]);s[c+1]=vg(Z,I),0!==Z&&(s[Z+1]=Ty(s[Z+1],c)),s[I+1]=function eS(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=vg(I,0),0!==I&&(s[I+1]=Ty(s[I+1],c)),I=c;else s[c+1]=vg(C,0),0===I?I=c:s[C+1]=Ty(s[C+1],c),C=c;A&&(s[c+1]=by(s[c+1])),W0(s,N,c,!0),W0(s,N,c,!1),function di(s,o,u,c,h){const f=h?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&Wi(f,o)>=0&&(u[c+1]=id(u[c+1]))}(o,N,s,c,f),y=vg(I,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,u,y,c)}}(h,null,f,c);const y=Me();if(u!==$t&&Jr(y,f,u)){const I=h.data[Rn()];if(qg(I,c)&&!_f(h,f)){let C=c?I.classesWithoutHost:I.stylesWithoutHost;null!==C&&(u=we(C,u||"")),L0(h,I,y,u,c)}else!function X0(s,o,u,c,h,f,y,I){h===$t&&(h=St);let C=0,A=0,N=0<h.length?h[0]:null,U=0<f.length?f[0]:null;for(;null!==N||null!==U;){const Z=C<h.length?h[C+1]:void 0,te=A<f.length?f[A+1]:void 0;let He,ve=null;N===U?(C+=2,A+=2,Z!==te&&(ve=U,He=te)):null===U||null!==N&&N<U?(C+=2,ve=N):(A+=2,ve=U,He=te),null!==ve&&zg(s,o,u,c,ve,He,y,I),N=C<h.length?h[C]:null,U=A<f.length?f[A]:null}}(h,I,y,y[11],y[f+1],y[f+1]=function uv(s,o,u){if(null==u||""===u)return St;const c=[],h=Ns(u);if(Array.isArray(h))for(let f=0;f<h.length;f++)s(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&s(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,f)}}(ot,Ea,s,!0)}function Ea(s,o){for(let u=function Wl(s){return function ov(s){Mr.key=0,Mr.keyEnd=0,Mr.value=0,Mr.valueEnd=0,Mr.textEnd=s.length}(s),G0(s,ar(s,0,Mr.textEnd))}(o);u>=0;u=G0(o,u))ot(s,wa(o),!0)}function _f(s,o){return o>=s.expandoStartIndex}function Gg(s,o,u,c,h){let f=null;const y=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<y&&(f=o[I],c=Pd(c,f.hostAttrs,h),f!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Pd(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ot(s,y,!!u||o[++f]))}return void 0===s?null:s}function zg(s,o,u,c,h,f,y,I){if(!(3&o.type))return;const C=s.data,A=C[I+1];yf(function li(s){return 1==(1&s)}(A)?eC(C,o,u,h,tu(A),y):void 0)||(yf(f)||function Cy(s){return 2==(2&s)}(A)&&(f=eC(C,null,u,h,I,y)),function BE(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let f=-1===c.indexOf("-")?void 0:ga.DashCase;null==h?s.removeStyle(u,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=ga.Important),s.setStyle(u,c,h,f))}}(c,y,vi(Rn(),u),h,f))}function eC(s,o,u,c,h,f){const y=null===o;let I;for(;h>0;){const C=s[h],A=Array.isArray(C),N=A?C[1]:C,U=null===N;let Z=u[h+1];Z===$t&&(Z=U?St:void 0);let te=U?Ka(Z,c):N===c?Z:void 0;if(A&&!yf(te)&&(te=Ka(C,c)),yf(te)&&(I=te,y))return I;const ve=s[h+1];h=y?wo(ve):tu(ve)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(I=Ka(C,c))}return I}function yf(s){return void 0!==s}function qg(s,o){return 0!=(s.flags&(o?16:32))}function Kg(s,o=""){const u=Me(),c=Kt(),h=s+22,f=c.firstCreatePass?ld(c,h,1,o,null):c.data[h],y=u[h]=function ly(s,o){return s.createText(o)}(u[11],o);hg(c,u,y,f),Ur(f,!1)}function vf(s){return cv("",s,""),vf}function cv(s,o,u){const c=Me(),h=function vd(s,o,u,c){return Jr(s,Ua(),u)?o+Ce(u)+c:$t}(c,s,o,u);return h!==$t&&function iu(s,o,u){const c=vi(o,s);!function AE(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,Rn(),h),cv}const Bu=void 0;var fC=["en",[["a","p"],["AM","PM"],Bu],[["AM","PM"],Bu,Bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bu,"{1} 'at' {0}",Bu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function GS(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Gl={};function Nd(s){const o=function ju(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=_n(o);if(u)return u;const c=o.split("-")[0];if(u=_n(c),u)return u;if("en"===c)return fC;throw new Te(701,!1)}function Iv(s){return Nd(s)[Ge.PluralCase]}function _n(s){return s in Gl||(Gl[s]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[s]),Gl[s]}var Ge=(()=>((Ge=Ge||{})[Ge.LocaleId=0]="LocaleId",Ge[Ge.DayPeriodsFormat=1]="DayPeriodsFormat",Ge[Ge.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ge[Ge.DaysFormat=3]="DaysFormat",Ge[Ge.DaysStandalone=4]="DaysStandalone",Ge[Ge.MonthsFormat=5]="MonthsFormat",Ge[Ge.MonthsStandalone=6]="MonthsStandalone",Ge[Ge.Eras=7]="Eras",Ge[Ge.FirstDayOfWeek=8]="FirstDayOfWeek",Ge[Ge.WeekendRange=9]="WeekendRange",Ge[Ge.DateFormat=10]="DateFormat",Ge[Ge.TimeFormat=11]="TimeFormat",Ge[Ge.DateTimeFormat=12]="DateTimeFormat",Ge[Ge.NumberSymbols=13]="NumberSymbols",Ge[Ge.NumberFormats=14]="NumberFormats",Ge[Ge.CurrencyCode=15]="CurrencyCode",Ge[Ge.CurrencySymbol=16]="CurrencySymbol",Ge[Ge.CurrencyName=17]="CurrencyName",Ge[Ge.Currencies=18]="Currencies",Ge[Ge.Directionality=19]="Directionality",Ge[Ge.PluralCase=20]="PluralCase",Ge[Ge.ExtraData=21]="ExtraData",Ge))();const kd="en-US";let pC=kd;class Bd{}class gs{}function Lv(s,o){return new dm(s,o??null)}class dm extends Bd{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new w0(this);const c=it(o);this._bootstrapComponents=Xa(c.bootstrap),this._r3Injector=rf(o,u,[{provide:Bd,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jd extends gs{constructor(o){super(),this.moduleType=o}create(o){return new dm(this.moduleType,o)}}class Rf extends Bd{constructor(o,u,c){super(),this.componentFactoryResolver=new w0(this),this.instance=null;const h=new W_([...o,{provide:Bd,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],u||qp(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function uu(s,o,u=null){return new Rf(s,o,u).injector}let Hd=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=sE(0,u.type),h=c.length>0?uu([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s(An(pa))}),s})();function lu(s){s.getStandaloneInjector=o=>o.get(Hd).getOrCreateStandaloneInjector(s)}function Vv(s,o,u,c){return function VC(s,o,u,c,h,f){const y=o+u;return Jr(s,y,h)?su(s,y+1,f?c.call(f,h):c(h)):Pf(s,y+1)}(Me(),sr(),s,o,u,c)}function cu(s,o,u,c,h){return function BC(s,o,u,c,h,f,y){const I=o+u;return $l(s,I,h,f)?su(s,I+2,y?c.call(y,h,f):c(h,f)):Pf(s,I+2)}(Me(),sr(),s,o,u,c,h)}function Yl(s,o,u,c,h,f,y){return function Hv(s,o,u,c,h,f,y,I,C){const A=o+u;return Fs(s,A,h,f,y,I)?su(s,A+4,C?c.call(C,h,f,y,I):c(h,f,y,I)):Pf(s,A+4)}(Me(),sr(),s,o,u,c,h,f,y)}function jv(s,o,u,c,h,f,y,I){const C=sr()+s,A=Me(),N=Fs(A,C,u,c,h,f);return Jr(A,C+4,y)||N?su(A,C+5,I?o.call(I,u,c,h,f,y):o(u,c,h,f,y)):function _d(s,o){return s[o]}(A,C+5)}function Pf(s,o){const u=s[o];return u===$t?void 0:u}function Gv(s){return o=>{setTimeout(s,void 0,o)}}const Vs=class _m extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,f=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=Gv(f),h&&(h=Gv(h)),y&&(y=Gv(y)));const I=super.subscribe({next:h,error:f,complete:y});return o instanceof $.w0&&o.add(I),I}};function HC(){return this._results[gd()]()}class ym{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=gd(),c=ym.prototype;c[u]||(c[u]=HC)}get changes(){return this._changes||(this._changes=new Vs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Dn(o);(this._changesDetected=!function Kr(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],f=o[c];if(u&&(h=u(h),f=u(f)),f!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Mf=(()=>{class s{}return s.__NG_ELEMENT_ID__=zv,s})();const CA=Mf,$C=class extends CA{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=Tg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),Fy(c,h,o),new Ng(h)}};function zv(){return vm(ir(),Me())}function vm(s,o){return 4&s.type?new $C(o,s,Yc(s,o)):null}let wm=(()=>{class s{}return s.__NG_ELEMENT_ID__=bA,s})();function bA(){return Kv(ir(),Me())}const TA=wm,qv=class extends TA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Yc(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ga(this._hostTNode,this._hostLView);if(bh(o)){const u=Rs(o,this._hostLView),c=or(o);return new Xo(u[1].data[c+8],u)}return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Nf(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const y=o.createEmbeddedView(u||{},f);return this.insert(y,h),y}createComponent(o,u,c,h,f){const y=o&&!function ls(s){return"function"==typeof s}(o);let I;if(y)I=u;else{const U=u||{};I=U.index,c=U.injector,h=U.projectableNodes,f=U.environmentInjector||U.ngModuleRef}const C=y?o:new kg(M(o)),A=c||this.parentInjector;if(!f&&null==C.ngModule){const Z=(y?A:this.parentInjector).get(pa,null);Z&&(f=Z)}const N=C.create(A,h,void 0,f);return this.insert(N.hostView,I),N}insert(o,u){const c=o._lView,h=c[1];if(function gl(s){return ni(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const U=c[3],Z=new qv(U,U[6],U[3]);Z.detach(Z.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function ND(s,o,u,c){const h=10+c,f=u.length;c>0&&(u[h-1][4]=o),c<f-10?(o[4]=u[h],uo(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function kD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(h,c,y,f);const I=UE(f,y),C=c[11],A=cg(C,y[7]);return null!==A&&function RE(s,o,u,c,h,f){c[0]=h,c[6]=o,Bl(s,c,u,1,h,f)}(h,y[6],C,c,A,I),o.attachToViewContainerRef(),uo(kf(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Nf(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=dy(this._lContainer,u);c&&(Er(kf(this._lContainer),u),Xh(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=dy(this._lContainer,u);return c&&null!=Er(kf(this._lContainer),u)?new Ng(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Nf(s){return s[8]}function kf(s){return s[8]||(s[8]=[])}function Kv(s,o){let u;const c=o[s.index];if(ni(c))u=c;else{let h;if(8&s.type)h=On(c);else{const f=o[11];h=f.createComment("");const y=Ir(s,o);ma(f,cg(f,y),h,function LE(s,o){return s.nextSibling(o)}(f,y),!1)}o[s.index]=u=_S(c,o,h,s),hd(o,u)}return new qv(u,s,o)}class Zv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Zv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new Yv(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==nw(o,u).matches&&this.queries[u].setDirty()}}class zC{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Qv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Qv(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Jv{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Jv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,u,SA(u,f)),this.matchTNodeWithReadOption(o,u,qa(u,o,f,!1,!1))}else c===Mf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,qa(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Vl||h===wm||h===Mf&&4&u.type)this.addMatch(u.index,-2);else{const f=qa(u,o,h,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function SA(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function qC(s,o,u,c){return-1===u?function AA(s,o){return 11&s.type?Yc(s,o):4&s.type?vm(s,o):null}(o,s):-2===u?function RA(s,o,u){return u===Vl?Yc(o,s):u===Mf?vm(o,s):u===wm?Kv(o,s):void 0}(s,o,c):Hi(s,s[1],u,o)}function Xv(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const f=s.data,y=u.matches,I=[];for(let C=0;C<y.length;C+=2){const A=y[C];I.push(A<0?null:qC(o,f[A],y[C+1],u.metadata.read))}h.matches=I}return h.matches}function Im(s,o,u,c){const h=s.queries.getByIndex(u),f=h.matches;if(null!==f){const y=Xv(s,o,h,u);for(let I=0;I<f.length;I+=2){const C=f[I];if(C>0)c.push(y[I/2]);else{const A=f[I+1],N=o[-C];for(let U=10;U<N.length;U++){const Z=N[U];Z[17]===Z[3]&&Im(Z[1],Z,A,c)}if(null!==N[9]){const U=N[9];for(let Z=0;Z<U.length;Z++){const te=U[Z];Im(te[1],te,A,c)}}}}}return c}function KC(s){const o=Me(),u=Kt(),c=Va();yl(c+1);const h=nw(u,c);if(s.dirty&&function pl(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const f=h.crossesNgTemplate?Im(u,o,c,[]):Xv(u,o,h,c);s.reset(f,fE),s.notifyOnChanges()}return!0}return!1}function Of(s,o,u,c){const h=Kt();if(h.firstCreatePass){const f=ir();(function QC(s,o,u){null===s.queries&&(s.queries=new Qv),s.queries.track(new Jv(o,u))})(h,new zC(o,u,c),f.index),function tw(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function YC(s,o,u){const c=new ym(4==(4&u));Vy(s,o,c,c.destroy),null===o[19]&&(o[19]=new Yv),o[19].queries.push(new Zv(c))}(h,Me(),u)}function ew(){return function xA(s,o){return s[19].queries[o].queryList}(Me(),Va())}function nw(s,o){return s.queries.getByIndex(o)}function JC(s,o){return vm(s,o)}function Om(...s){}const Lm=new Tn("Application Initializer");let ec=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Om,this.reject=Om,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(Jy(f))u.push(f);else if(V0(f)){const y=new Promise((I,C)=>{f.subscribe({complete:I,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(An(Lm,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const fw=new Tn("AppId",{providedIn:"root",factory:function cb(){return`${Bs()}${Bs()}${Bs()}`}});function Bs(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qd=new Tn("Platform Initializer"),BA=new Tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pw=new Tn("appBootstrapListener");let Bf=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Si=new Tn("LocaleId",{providedIn:"root",factory:()=>b(Si,Qe.Optional|Qe.SkipSelf)||function jA(){return typeof $localize<"u"&&$localize.locale||kd}()}),hb=new Tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ms{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let fb=(()=>{class s{compileModuleSync(u){return new jd(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=Xa(it(u).declarations).reduce((y,I)=>{const C=M(I);return C&&y.push(new kg(C)),y},[]);return new ms(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const mb=(()=>Promise.resolve(0))();function Vm(s){typeof Zone>"u"?mb.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Zi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vs(!1),this.onMicrotaskEmpty=new Vs(!1),this.onStable=new Vs(!1),this.onError=new Vs(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function qA(){let s=xt.requestAnimationFrame,o=xt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function KA(s){const o=()=>{!function _w(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,yw(s),s.isCheckStableRunning=!0,mw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),yw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,f,y,I)=>{try{return _b(s),u.invokeTask(h,f,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),vw(s)}},onInvoke:(u,c,h,f,y,I,C)=>{try{return _b(s),u.invoke(h,f,y,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),vw(s)}},onHasTask:(u,c,h,f)=>{u.hasTask(h,f),c===h&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,yw(s),mw(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,h,f)=>(u.handleError(h,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zi.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(Zi.isInAngularZone())throw new Te(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,Bm,Om,Om);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Bm={};function mw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function yw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function _b(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function vw(s){s._nesting--,mw(s)}class ZA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vs,this.onMicrotaskEmpty=new Vs,this.onStable=new Vs,this.onError=new Vs}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const yb=new Tn(""),vb=new Tn("");let Ku,ww=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ku||(function YA(s){Ku=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zi.assertNotInAngularZone(),Vm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(An(Zi),An(Iw),An(vb))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),Iw=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Ku?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ri=null;const wb=new Tn("AllowMultipleToken"),jf=new Tn("PlatformDestroyListeners");class Ib{constructor(o,u){this.name=o,this.token=u}}function jm(s,o,u=[]){const c=`Platform: ${o}`,h=new Tn(c);return(f=[])=>{let y=Ew();if(!y||y.injector.get(wb,!1)){const I=[...u,...f,{provide:h,useValue:!0}];s?s(I):function Eb(s){if(Ri&&!Ri.get(wb,!1))throw new Te(400,!1);Ri=s;const o=s.get(Cw);(function $f(s){const o=s.get(qd,null);o&&o.forEach(u=>u())})(s)}(function Tb(s=[],o){return Hl.create({name:o,providers:[{provide:Wp,useValue:"platform"},{provide:jf,useValue:new Set([()=>Ri=null])},...s]})}(I,c))}return function XA(s){const o=Ew();if(!o)throw new Te(401,!1);return o}()}}function Ew(){return Ri?.get(Cw)??null}let Cw=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function Hm(s,o){let u;return u="noop"===s?new ZA:("zone.js"===s?void 0:s)||new Zi(o),u}(c?.ngZone,function bw(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Zi,useValue:h}];return h.run(()=>{const y=Hl.create({providers:f,parent:this.injector,name:u.moduleType.name}),I=u.create(y),C=I.injector.get(Yh,null);if(!C)throw new Te(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:N=>{C.handleError(N)}});I.onDestroy(()=>{To(this._modules,I),A.unsubscribe()})}),function Tw(s,o,u){try{const c=u();return Jy(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,h,()=>{const A=I.injector.get(ec);return A.runInitializers(),A.donePromise.then(()=>(function Qg(s){Ht(s,"Expected localeId to be defined"),"string"==typeof s&&(pC=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Si,kd)||kd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const h=xi({},c);return function QA(s,o,u){const c=new jd(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(u){const c=u.injector.get(tc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(jf,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(An(Hl))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function xi(s,o){return Array.isArray(o)?o.reduce(xi,s):{...s,...o}}let tc=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new k.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Zi.assertNotInAngularZone(),Vm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Zi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(f,y.pipe((0,ue.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof q_;if(!this._injector.get(ec).done)throw!h&&Oe(u),new Te(405,false);let y;y=h?u:this._injector.get(Ul).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const I=function JA(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Bd),A=y.create(Hl.NULL,[],c||y.selector,I),N=A.location.nativeElement,U=A.injector.get(yb,null);return U?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),To(this.components,A),U?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;To(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(pw,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>To(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(An(Zi),An(pa),An(Yh))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function To(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Zu=!0,Dw=!1;function Sb(){return Dw=!0,Zu}function nc(){if(Dw)throw new Error("Cannot enable prod mode after platform setup.");Zu=!1}let Sw=(()=>{class s{}return s.__NG_ELEMENT_ID__=eR,s})();function eR(s){return function tR(s,o,u){if(ll(s)&&!u){const c=sn(s.index,o);return new Ng(c,c)}return 47&s.type?new Ng(o[16],o):null}(ir(),Me(),16==(16&s))}class Pb{constructor(){}supports(o){return md(o)}create(o){return new iR(o)}}const rR=(s,o)=>o;class iR{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||rR}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<Nb(c,h,f)?u:c,I=Nb(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{f||(f=[]);const A=I-h,N=C-h;if(A!=N){for(let Z=0;Z<A;Z++){const te=Z<f.length?f[Z]:f[Z]=0,ve=te+Z;N<=ve&&ve<A&&(f[Z]=te+1)}f[y.previousIndex]=N-A}}I!==C&&o(y,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!md(o))throw new Te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)f=o[I],y=this._trackByFn(I,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,I)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,I),c=!0),u=u._next}else h=0,function EN(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[gd()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(h,I),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,I,y,h)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,h)):o=this._addAfter(new sR(u,c),f,h),o}_verifyReinsertion(o,u,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Mb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class sR{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oR{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Mb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new oR,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nb(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class kb{constructor(){}supports(o){return o instanceof Map||C0(o)}create(){return new aR}}class aR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||C0(o)))throw new Te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new uR(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class uR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ob(){return new Nw([new Pb])}let Nw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ob()),deps:[[s,new At,new Ve]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Te(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Ob}),s})();function Lb(){return new zf([new kb])}let zf=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Lb()),deps:[[s,new At,new Ve]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Te(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Lb}),s})();const dR=jm(null,"core",[]);let hR=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(An(tc))},s.\u0275mod=Xt({type:s}),s.\u0275inj=Bt({}),s})();function fR(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(gt,xe,F)=>{F.d(xe,{Z:()=>Te});var m=F(2090),$=F(4859),k=F(9681),se=F(1877);class ue{constructor(Ce,ge){this._delegate=Ce,this.firebase=ge,(0,k._addComponent)(Ce,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Ce,ge=k._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(Ce);return!Ye.isInitialized()&&"EXPLICIT"===(null===(Je=Ye.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:ge})}_removeServiceInstance(Ce,ge=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(ge)}_addComponent(Ce){(0,k._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,k._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function we(){const nt=function he(nt){const Ce={},ge={__esModule:!0,initializeApp:function Le(ie,le={}){const Ie=k.initializeApp(ie,le);if((0,m.r3)(Ce,Ie.name))return Ce[Ie.name];const Q=new nt(Ie,ge);return Ce[Ie.name]=Q,Q},app:Ye,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function be(ie){const le=ie.name,Ie=le.replace("-compat","");if(k._registerComponent(ie)&&"PUBLIC"===ie.type){const Q=(ee=Ye())=>{if("function"!=typeof ee[Ie])throw pe.create("invalid-app-argument",{appName:le});return ee[Ie]()};void 0!==ie.serviceProps&&(0,m.ZB)(Q,ie.serviceProps),ge[Ie]=Q,nt.prototype[Ie]=function(...ee){return this._getService.bind(this,le).apply(this,ie.multipleInstances?ee:[])}}return"PUBLIC"===ie.type?ge[Ie]:null},removeApp:function Je(ie){delete Ce[ie]},useAsService:function ze(ie,le){return"serverAuth"===le?null:le},modularAPIs:k}};function Ye(ie){if(!(0,m.r3)(Ce,ie=ie||k._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ie});return Ce[ie]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function Pe(){return Object.keys(Ce).map(ie=>Ce[ie])}}),Ye.App=nt,ge}(ue);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ce(ge){(0,m.ZB)(nt,ge)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),nt}(),z=new se.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=K;!function Ne(nt){(0,k.registerVersion)("@firebase/app-compat","0.1.39",nt)}()},9681:(gt,xe,F)=>{F.r(xe),F.d(xe,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Ui,_DEFAULT_ENTRY_NAME:()=>Ht,_addComponent:()=>tn,_addOrOverwriteComponent:()=>nn,_apps:()=>ln,_clearComponents:()=>Li,_components:()=>En,_getProvider:()=>Bt,_registerComponent:()=>qt,_removeServiceInstance:()=>vr,deleteApp:()=>Vi,getApp:()=>Vn,getApps:()=>_i,initializeApp:()=>Lr,onLog:()=>Zn,registerVersion:()=>nr,setLogLevel:()=>wn});var m=F(5861),$=F(4859),k=F(1877),se=F(2090),ue=F(8766);class me{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function pe(et){return"VERSION"===et.getComponent()?.type}(tt)){const Ct=tt.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(tt=>tt).join(" ")}}const he="@firebase/app",K=new k.Yd("@firebase/app"),Ht="[DEFAULT]",qe={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,En=new Map;function tn(et,De){try{et.container.addComponent(De)}catch(tt){K.debug(`Component ${De.name} failed to register with FirebaseApp ${et.name}`,tt)}}function nn(et,De){et.container.addOrOverwriteComponent(De)}function qt(et){const De=et.name;if(En.has(De))return K.debug(`There were multiple attempts to register component ${De}.`),!1;En.set(De,et);for(const tt of ln.values())tn(tt,et);return!0}function Bt(et,De){const tt=et.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),et.container.getProvider(De)}function vr(et,De,tt=Ht){Bt(et,De).clearInstance(tt)}function Li(){En.clear()}const kn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fi{constructor(De,tt,Ct){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}const Ui="9.14.0";function Lr(et,De={}){let tt=et;"object"!=typeof De&&(De={name:De});const Ct=Object.assign({name:Ht,automaticDataCollectionEnabled:!1},De),Tt=Ct.name;if("string"!=typeof Tt||!Tt)throw kn.create("bad-app-name",{appName:String(Tt)});if(tt||(tt=(0,se.aH)()),!tt)throw kn.create("no-options");const Xt=ln.get(Tt);if(Xt){if((0,se.vZ)(tt,Xt.options)&&(0,se.vZ)(Ct,Xt.config))return Xt;throw kn.create("duplicate-app",{appName:Tt})}const q=new $.H0(Tt);for(const Y of En.values())q.addComponent(Y);const W=new Fi(tt,Ct,q);return ln.set(Tt,W),W}function Vn(et=Ht){const De=ln.get(et);if(!De&&et===Ht)return Lr();if(!De)throw kn.create("no-app",{appName:et});return De}function _i(){return Array.from(ln.values())}function Vi(et){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,m.Z)(function*(et){const De=et.name;ln.has(De)&&(ln.delete(De),yield Promise.all(et.container.getProviders().map(tt=>tt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function nr(et,De,tt){var Ct;let Tt=null!==(Ct=qe[et])&&void 0!==Ct?Ct:et;tt&&(Tt+=`-${tt}`);const Xt=Tt.match(/\s|\//),q=De.match(/\s|\//);if(Xt||q){const W=[`Unable to register library "${Tt}" with version "${De}":`];return Xt&&W.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Xt&&q&&W.push("and"),q&&W.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void K.warn(W.join(" "))}qt(new $.wA(`${Tt}-version`,()=>({library:Tt,version:De}),"VERSION"))}function Zn(et,De){if(null!==et&&"function"!=typeof et)throw kn.create("invalid-log-argument");(0,k.Am)(et,De)}function wn(et){(0,k.Ub)(et)}const In="firebase-heartbeat-store";let Cn=null;function gn(){return Cn||(Cn=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(et,De)=>{0===De&&et.createObjectStore(In)}}).catch(et=>{throw kn.create("idb-open",{originalErrorMessage:et.message})})),Cn}function yt(){return(yt=(0,m.Z)(function*(et){var De;try{return(yield gn()).transaction(In).objectStore(In).get(Yn(et))}catch(tt){if(tt instanceof se.ZR)K.warn(tt.message);else{const Ct=kn.create("idb-get",{originalErrorMessage:null===(De=tt)||void 0===De?void 0:De.message});K.warn(Ct.message)}}})).apply(this,arguments)}function xt(et,De){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(et,De){var tt;try{const Tt=(yield gn()).transaction(In,"readwrite");return yield Tt.objectStore(In).put(De,Yn(et)),Tt.done}catch(Ct){if(Ct instanceof se.ZR)K.warn(Ct.message);else{const Tt=kn.create("idb-set",{originalErrorMessage:null===(tt=Ct)||void 0===tt?void 0:tt.message});K.warn(Tt.message)}}})).apply(this,arguments)}function Yn(et){return`${et.name}!${et.options.appId}`}class Rr{constructor(De){this.container=De,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Yt(tt),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var De=this;return(0,m.Z)(function*(){const Ct=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Ot();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!De._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Tt))return De._heartbeatsCache.heartbeats.push({date:Tt,agent:Ct}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Xt=>{const q=new Date(Xt.date).valueOf();return Date.now()-q<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,m.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const tt=Ot(),{heartbeatsToSend:Ct,unsentEntries:Tt}=function $r(et,De=1024){const tt=[];let Ct=et.slice();for(const Tt of et){const Xt=tt.find(q=>q.agent===Tt.agent);if(Xt){if(Xt.dates.push(Tt.date),cr(tt)>De){Xt.dates.pop();break}}else if(tt.push({agent:Tt.agent,dates:[Tt.date]}),cr(tt)>De){tt.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:tt,unsentEntries:Ct}}(De._heartbeatsCache.heartbeats),Xt=(0,se.L)(JSON.stringify({version:2,heartbeats:Ct}));return De._heartbeatsCache.lastSentHeartbeatDate=tt,Tt.length>0?(De._heartbeatsCache.heartbeats=Tt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Xt})()}}function Ot(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,m.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function _t(et){return yt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var tt=this;return(0,m.Z)(function*(){var Ct;if(yield tt._canUseIndexedDBPromise){const Xt=yield tt.read();return xt(tt.app,{lastSentHeartbeatDate:null!==(Ct=De.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Xt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var tt=this;return(0,m.Z)(function*(){var Ct;if(yield tt._canUseIndexedDBPromise){const Xt=yield tt.read();return xt(tt.app,{lastSentHeartbeatDate:null!==(Ct=De.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...De.heartbeats]})}})()}}function cr(et){return(0,se.L)(JSON.stringify({version:2,heartbeats:et})).length}!function Sn(et){qt(new $.wA("platform-logger",De=>new me(De),"PRIVATE")),qt(new $.wA("heartbeat",De=>new Rr(De),"PRIVATE")),nr(he,"0.8.4",et),nr(he,"0.8.4","esm2017"),nr("fire-js","")}("")},4859:(gt,xe,F)=>{F.d(xe,{H0:()=>he,wA:()=>k,zt:()=>ue});var m=F(5861),$=F(2090);class k{constructor(K,z,J){this.name=K,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const se="[DEFAULT]";class ue{constructor(K,z){this.name=K,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(z)){const J=new $.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:z});$e&&J.resolve($e)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(K){var z;const J=this.normalizeInstanceIdentifier(K?.identifier),$e=null!==(z=K?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ne){if($e)return null;throw Ne}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function pe(we){return"EAGER"===we.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(z);try{const Ne=this.getOrInitializeService({instanceIdentifier:$e});J.resolve(Ne)}catch{}}}}clearInstance(K=se){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,m.Z)(function*(){const z=Array.from(K.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=se){return this.instances.has(K)}getOptions(K=se){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:z={}}=K,J=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[Ne,Te]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ne)&&Te.resolve($e);return $e}onInit(K,z){var J;const $e=this.normalizeInstanceIdentifier(z),Ne=null!==(J=this.onInitCallbacks.get($e))&&void 0!==J?J:new Set;Ne.add(K),this.onInitCallbacks.set($e,Ne);const Te=this.instances.get($e);return Te&&K(Te,$e),()=>{Ne.delete(K)}}invokeOnInitCallbacks(K,z){const J=this.onInitCallbacks.get(z);if(J)for(const $e of J)try{$e(K,z)}catch{}}getOrInitializeService({instanceIdentifier:K,options:z={}}){let J=this.instances.get(K);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(we=K,we===se?void 0:we),options:z}),this.instances.set(K,J),this.instancesOptions.set(K,z),this.invokeOnInitCallbacks(J,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,J)}catch{}var we;return J||null}normalizeInstanceIdentifier(K=se){return this.component?this.component.multipleInstances?K:se:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const z=this.getProvider(K.name);if(z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const z=new ue(K,this);return this.providers.set(K,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,xe,F)=>{F.d(xe,{Am:()=>we,Ub:()=>he,Yd:()=>pe,in:()=>$});const m=[];var $=(()=>{return(K=$||($={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",$;var K})();const k={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,ue={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},me=(K,z,...J)=>{if(z<K.logLevel)return;const $e=(new Date).toISOString(),Ne=ue[z];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ne](`[${$e}]  ${K.name}:`,...J)};class pe{constructor(z){this.name=z,this._logLevel=se,this._logHandler=me,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function he(K){m.forEach(z=>{z.setLogLevel(K)})}function we(K,z){for(const J of m){let $e=null;z&&z.level&&($e=k[z.level]),J.userLogHandler=null===K?null:(Ne,Te,...nt)=>{const Ce=nt.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");Te>=($e??Ne.logLevel)&&K({level:$[Te].toLowerCase(),message:Ce,args:nt,type:Ne.name})}}}},8766:(gt,xe,F)=>{F.d(xe,{Lj:()=>Le,X3:()=>Ye});var m=F(5861);let k,se;const pe=new WeakMap,he=new WeakMap,we=new WeakMap,K=new WeakMap,z=new WeakMap;let Ne={get(le,Ie,Q){if(le instanceof IDBTransaction){if("done"===Ie)return he.get(le);if("objectStoreNames"===Ie)return le.objectStoreNames||we.get(le);if("store"===Ie)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return ge(le[Ie])},set:(le,Ie,Q)=>(le[Ie]=Q,!0),has:(le,Ie)=>le instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in le};function Ce(le){return"function"==typeof le?function nt(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...Ie){return le.apply(Je(this),Ie),ge(pe.get(this))}:function(...Ie){return ge(le.apply(Je(this),Ie))}:function(Ie,...Q){const ee=le.call(Je(this),Ie,...Q);return we.set(ee,Ie.sort?Ie.sort():[Ie]),ge(ee)}}(le):(le instanceof IDBTransaction&&function $e(le){if(he.has(le))return;const Ie=new Promise((Q,ee)=>{const fe=()=>{le.removeEventListener("complete",ae),le.removeEventListener("error",Be),le.removeEventListener("abort",Be)},ae=()=>{Q(),fe()},Be=()=>{ee(le.error||new DOMException("AbortError","AbortError")),fe()};le.addEventListener("complete",ae),le.addEventListener("error",Be),le.addEventListener("abort",Be)});he.set(le,Ie)}(le),((le,Ie)=>Ie.some(Q=>le instanceof Q))(le,function ue(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,Ne):le)}function ge(le){if(le instanceof IDBRequest)return function J(le){const Ie=new Promise((Q,ee)=>{const fe=()=>{le.removeEventListener("success",ae),le.removeEventListener("error",Be)},ae=()=>{Q(ge(le.result)),fe()},Be=()=>{ee(le.error),fe()};le.addEventListener("success",ae),le.addEventListener("error",Be)});return Ie.then(Q=>{Q instanceof IDBCursor&&pe.set(Q,le)}).catch(()=>{}),z.set(Ie,le),Ie}(le);if(K.has(le))return K.get(le);const Ie=Ce(le);return Ie!==le&&(K.set(le,Ie),z.set(Ie,le)),Ie}const Je=le=>z.get(le);function Ye(le,Ie,{blocked:Q,upgrade:ee,blocking:fe,terminated:ae}={}){const Be=indexedDB.open(le,Ie),je=ge(Be);return ee&&Be.addEventListener("upgradeneeded",mt=>{ee(ge(Be.result),mt.oldVersion,mt.newVersion,ge(Be.transaction))}),Q&&Be.addEventListener("blocked",()=>Q()),je.then(mt=>{ae&&mt.addEventListener("close",()=>ae()),fe&&mt.addEventListener("versionchange",()=>fe())}).catch(()=>{}),je}function Le(le,{blocked:Ie}={}){const Q=indexedDB.deleteDatabase(le);return Ie&&Q.addEventListener("blocked",()=>Ie()),ge(Q).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],ze=new Map;function ie(le,Ie){if(!(le instanceof IDBDatabase)||Ie in le||"string"!=typeof Ie)return;if(ze.get(Ie))return ze.get(Ie);const Q=Ie.replace(/FromIndex$/,""),ee=Ie!==Q,fe=be.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!fe&&!Pe.includes(Q))return;const ae=function(){var Be=(0,m.Z)(function*(je,...mt){const rn=this.transaction(je,fe?"readwrite":"readonly");let Ht=rn.store;return ee&&(Ht=Ht.index(mt.shift())),(yield Promise.all([Ht[Q](...mt),fe&&rn.done]))[0]});return function(mt){return Be.apply(this,arguments)}}();return ze.set(Ie,ae),ae}!function Te(le){Ne=le(Ne)}(le=>({...le,get:(Ie,Q,ee)=>ie(Ie,Q)||le.get(Ie,Q,ee),has:(Ie,Q)=>!!ie(Ie,Q)||le.has(Ie,Q)}))},5861:(gt,xe,F)=>{function m(k,se,ue,me,pe,he,we){try{var K=k[he](we),z=K.value}catch(J){return void ue(J)}K.done?se(z):Promise.resolve(z).then(me,pe)}function $(k){return function(){var se=this,ue=arguments;return new Promise(function(me,pe){var he=k.apply(se,ue);function we(z){m(he,me,pe,we,K,"next",z)}function K(z){m(he,me,pe,we,K,"throw",z)}we(void 0)})}}F.d(xe,{Z:()=>$})}},gt=>{gt(gt.s=885)}]);