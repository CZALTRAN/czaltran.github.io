"use strict";(self.webpackChunkhacka_sicredi=self.webpackChunkhacka_sicredi||[]).push([[179],{2011:(yt,Oe,U)=>{U.d(Oe,{Dh:()=>fe,GT:()=>_e,cc:()=>Fe,hO:()=>qe,on:()=>K,pX:()=>ce,xv:()=>ve});var l=U(4650),$=U(127),P=U(5813);yt=U.hmd(yt);const ae=["ngOnDestroy"],ce=(me,it,tt,Ve={})=>new Proxy(me,{get:(Re,Ie)=>tt.runOutsideAngular(()=>{var Ye;if(me[Ie])return!(null===(Ye=Ve?.spy)||void 0===Ye)&&Ye.get&&Ve.spy.get(Ie,me[Ie]),me[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const oe=it.toPromise().then(de=>{const we=de&&de[Ie];return"function"==typeof we?we.bind(de):we&&we.then?we.then(X=>tt.run(()=>X)):tt.run(()=>we)});return new Proxy(()=>{},{get:(de,we)=>oe[we],apply:(de,we,X)=>oe.then(ne=>{var pe;const ue=ne&&ne(...X);return!(null===(pe=Ve?.spy)||void 0===pe)&&pe.apply&&Ve.spy.apply(Ie,X,ue),ue})})})}),_e=(me,it)=>{it.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(Ve=>{Object.defineProperty(me.prototype,Ve,Object.getOwnPropertyDescriptor(tt.prototype||tt,Ve))})})};class ge{constructor(it){return it}}const fe=new l.OlP("angularfire2.app.options"),ve=new l.OlP("angularfire2.app.name");function K(me,it,tt){const Re="object"==typeof tt&&tt||{};Re.name=Re.name||"string"==typeof tt&&tt||"[DEFAULT]";const Ye=$.Z.apps.filter(oe=>oe&&oe.name===Re.name)[0]||it.runOutsideAngular(()=>$.Z.initializeApp(me,Re));try{JSON.stringify(me)!==JSON.stringify(Ye.options)&&W("error",`${Ye.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(Ye)}const W=(me,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[me](...it)},ee={provide:ge,useFactory:K,deps:[fe,l.R0b,[new l.FiY,ve]]};let qe=(()=>{class me{constructor(tt){$.Z.registerVersion("angularfire",P.q4.full,"core"),$.Z.registerVersion("angularfire",P.q4.full,"app-compat"),$.Z.registerVersion("angular",l.q4F.full,tt.toString())}static initializeApp(tt,Ve){return{ngModule:me,providers:[{provide:fe,useValue:tt},{provide:ve,useValue:Ve}]}}}return me.\u0275fac=function(tt){return new(tt||me)(l.LFG(l.Lbi))},me.\u0275mod=l.oAB({type:me}),me.\u0275inj=l.cJS({providers:[ee]}),me})();function Fe(me,it,tt,Ve,Re){const[,Ie,Ye]=globalThis.\u0275AngularfireInstanceCache.find(oe=>oe[0]===me)||[];if(Ie)return function Se(me,it){try{return me.toString()===it.toString()}catch{return me===it}}(Re,Ye)||(Ce("error",`${it} was already initialized on the ${tt} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Re,was:Ye})),Ie;{const oe=Ve();return globalThis.\u0275AngularfireInstanceCache.push([me,oe,Re]),oe}}const at=!!yt.hot,Ce=(me,...it)=>{(0,l.X6Q)()&&typeof console<"u"&&console[me](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(yt,Oe,U)=>{U.d(Oe,{q4:()=>ht,iC:()=>Ts,fc:()=>si,HU:()=>$s,vb:()=>Ta,JM:()=>wl});var l=U(4650),$=U(5867),P=U(5861),ae=U(9681),ce=U(2090),_e=U(4859),ge=U(1877),fe=U(8766);const ve="@firebase/installations",K="0.5.16",ee=`w:${K}`,qe="FIS_v2",it=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(S){return S instanceof ce.ZR&&S.code.includes("request-failed")}function Ve({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Re(S){return{token:S.token,requestStatus:2,expiresIn:ne(S.expiresIn),creationTime:Date.now()}}function Ie(S,D){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,P.Z)(function*(S,D){const j=(yield D.json()).error;return it.create("request-failed",{requestName:S,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function oe({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function de(S,{refreshToken:D}){const k=oe(S);return k.append("Authorization",function pe(S){return`${qe} ${S}`}(D)),k}function we(S){return X.apply(this,arguments)}function X(){return(X=(0,P.Z)(function*(S){const D=yield S();return D.status>=500&&D.status<600?S():D})).apply(this,arguments)}function ne(S){return Number(S.replace("s","000"))}function ue(S,D){return $e.apply(this,arguments)}function $e(){return($e=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:D},{fid:k}){const j=Ve(S),te=oe(S),le=D.getImmediate({optional:!0});if(le){const Rt=yield le.getHeartbeatsHeader();Rt&&te.append("x-firebase-client",Rt)}const Ge={method:"POST",headers:te,body:JSON.stringify({fid:k,authVersion:qe,appId:S.appId,sdkVersion:ee})},mt=yield we(()=>fetch(j,Ge));if(mt.ok){const Rt=yield mt.json();return{fid:Rt.fid||k,registrationStatus:2,refreshToken:Rt.refreshToken,authToken:Re(Rt.authToken)}}throw yield Ie("Create Installation",mt)})).apply(this,arguments)}function ze(S){return new Promise(D=>{setTimeout(D,S)})}const hn=/^[cdef][\w-]{21}$/;function Qe(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const k=function _n(S){return function Et(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return hn.test(k)?k:""}catch{return""}}function xn(S){return`${S.appName}!${S.appId}`}const un=new Map;function cn(S,D){const k=xn(S);xi(k,D),function Kr(S,D){const k=function Hn(){return!Wi&&"BroadcastChannel"in self&&(Wi=new BroadcastChannel("[Firebase] FID Change"),Wi.onmessage=S=>{xi(S.data.key,S.data.fid)}),Wi}();k&&k.postMessage({key:S,fid:D}),function Zr(){0===un.size&&Wi&&(Wi.close(),Wi=null)}()}(k,D)}function xi(S,D){const k=un.get(S);if(k)for(const j of k)j(D)}let Wi=null;const Kn="firebase-installations-store";let Rr=null;function Qr(){return Rr||(Rr=(0,fe.X3)("firebase-installations-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(Kn)}})),Rr}function nt(S,D){return ui.apply(this,arguments)}function ui(){return(ui=(0,P.Z)(function*(S,D){const k=xn(S),te=(yield Qr()).transaction(Kn,"readwrite"),le=te.objectStore(Kn),Me=yield le.get(k);return yield le.put(D,k),yield te.done,(!Me||Me.fid!==D.fid)&&cn(S,D.fid),D})).apply(this,arguments)}function ti(S){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,P.Z)(function*(S){const D=xn(S),j=(yield Qr()).transaction(Kn,"readwrite");yield j.objectStore(Kn).delete(D),yield j.done})).apply(this,arguments)}function Ei(S,D){return ao.apply(this,arguments)}function ao(){return(ao=(0,P.Z)(function*(S,D){const k=xn(S),te=(yield Qr()).transaction(Kn,"readwrite"),le=te.objectStore(Kn),Me=yield le.get(k),Ge=D(Me);return void 0===Ge?yield le.delete(k):yield le.put(Ge,k),yield te.done,Ge&&(!Me||Me.fid!==Ge.fid)&&cn(S,Ge.fid),Ge})).apply(this,arguments)}function Dn(S){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,P.Z)(function*(S){let D;const k=yield Ei(S.appConfig,j=>{const te=bn(j),le=Ct(S,te);return D=le.registrationPromise,le.installationEntry});return""===k.fid?{installationEntry:yield D}:{installationEntry:k,registrationPromise:D}})).apply(this,arguments)}function bn(S){return Ot(S||{fid:Qe(),registrationStatus:0})}function Ct(S,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(it.create("app-offline"))};const k={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},j=function bt(S,D){return Ft.apply(this,arguments)}(S,k);return{installationEntry:k,registrationPromise:j}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ki(S)}:{installationEntry:D}}function Ft(){return(Ft=(0,P.Z)(function*(S,D){try{const k=yield ue(S,D);return nt(S.appConfig,k)}catch(k){throw tt(k)&&409===k.customData.serverCode?yield ti(S.appConfig):yield nt(S.appConfig,{fid:D.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Ki(S){return ni.apply(this,arguments)}function ni(){return(ni=(0,P.Z)(function*(S){let D=yield Li(S.appConfig);for(;1===D.registrationStatus;)yield ze(100),D=yield Li(S.appConfig);if(0===D.registrationStatus){const{installationEntry:k,registrationPromise:j}=yield Dn(S);return j||k}return D})).apply(this,arguments)}function Li(S){return Ei(S,D=>{if(!D)throw it.create("installation-not-found");return Ot(D)})}function Ot(S){return function Vi(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Bt(S,D){return ir.apply(this,arguments)}function ir(){return(ir=(0,P.Z)(function*({appConfig:S,heartbeatServiceProvider:D},k){const j=sn(S,k),te=de(S,k),le=D.getImmediate({optional:!0});if(le){const Rt=yield le.getHeartbeatsHeader();Rt&&te.append("x-firebase-client",Rt)}const Ge={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:ee,appId:S.appId}})},mt=yield we(()=>fetch(j,Ge));if(mt.ok)return Re(yield mt.json());throw yield Ie("Generate Auth Token",mt)})).apply(this,arguments)}function sn(S,{fid:D}){return`${Ve(S)}/${D}/authTokens:generate`}function _i(S){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,P.Z)(function*(S,D=!1){let k;const j=yield Ei(S.appConfig,le=>{if(!ln(le))throw it.create("not-registered");const Me=le.authToken;if(!D&&q(Me))return le;if(1===Me.requestStatus)return k=st(S,D),le;{if(!navigator.onLine)throw it.create("app-offline");const Ge=J(le);return k=At(S,Ge),Ge}});return k?yield k:j.authToken})).apply(this,arguments)}function st(S,D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(S,D){let k=yield ot(S.appConfig);for(;1===k.authToken.requestStatus;)yield ze(100),k=yield ot(S.appConfig);const j=k.authToken;return 0===j.requestStatus?_i(S,D):j})).apply(this,arguments)}function ot(S){return Ei(S,D=>{if(!ln(D))throw it.create("not-registered");return function G(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function At(S,D){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(S,D){try{const k=yield Bt(S,D),j=Object.assign(Object.assign({},D),{authToken:k});return yield nt(S.appConfig,j),k}catch(k){if(!tt(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield nt(S.appConfig,j)}else yield ti(S.appConfig);throw k}})).apply(this,arguments)}function ln(S){return void 0!==S&&2===S.registrationStatus}function q(S){return 2===S.requestStatus&&!function z(S){const D=Date.now();return D<S.creationTime||S.creationTime+S.expiresIn<D+36e5}(S)}function J(S){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:D})}function H(){return(H=(0,P.Z)(function*(S){const D=S,{installationEntry:k,registrationPromise:j}=yield Dn(D);return j?j.catch(console.error):_i(D).catch(console.error),k.fid})).apply(this,arguments)}function Le(){return(Le=(0,P.Z)(function*(S,D=!1){const k=S;return yield ut(k),(yield _i(k,D)).token})).apply(this,arguments)}function ut(S){return dt.apply(this,arguments)}function dt(){return(dt=(0,P.Z)(function*(S){const{registrationPromise:D}=yield Dn(S);D&&(yield D)})).apply(this,arguments)}function lo(S){return it.create("missing-app-config-values",{valueName:S})}const Yo="installations",uo=S=>{const D=S.getProvider("app").getImmediate(),k=function kn(S){if(!S||!S.options)throw lo("App Configuration");if(!S.name)throw lo("App Name");const D=["projectId","apiKey","appId"];for(const k of D)if(!S.options[k])throw lo(k);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(D);return{app:D,appConfig:k,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},co=S=>{const D=S.getProvider("app").getImmediate(),k=(0,ae._getProvider)(D,Yo).getImmediate();return{getId:()=>function O(S){return H.apply(this,arguments)}(k),getToken:te=>function re(S){return Le.apply(this,arguments)}(k,te)}};(function Ll(){(0,ae._registerComponent)(new _e.wA(Yo,uo,"PUBLIC")),(0,ae._registerComponent)(new _e.wA("installations-internal",co,"PRIVATE"))})(),(0,ae.registerVersion)(ve,K),(0,ae.registerVersion)(ve,K,"esm2017");const gs="@firebase/remote-config",ri=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class or{constructor(D,k,j,te){this.client=D,this.storage=k,this.storageCache=j,this.logger=te}isCachedDataFresh(D,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-k,te=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${te}.`),te}fetch(D){var k=this;return(0,P.Z)(function*(){const[j,te]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(te&&k.isCachedDataFresh(D.cacheMaxAgeMillis,j))return te;D.eTag=te&&te.eTag;const le=yield k.client.fetch(D),Me=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Me.push(k.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Me),le})()}}function Zi(S=navigator){return S.languages&&S.languages[0]||S.language}class go{constructor(D,k,j,te,le,Me){this.firebaseInstallations=D,this.sdkVersion=k,this.namespace=j,this.projectId=te,this.apiKey=le,this.appId=Me}fetch(D){var k=this;return(0,P.Z)(function*(){var j,te,le;const[Me,Ge]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Vt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},It={sdk_version:k.sdkVersion,app_instance_id:Me,app_instance_id_token:Ge,app_id:k.appId,language_code:Zi()},Xn={method:"POST",headers:Vt,body:JSON.stringify(It)},Ii=fetch(Rt,Xn),Da=new Promise((Aa,Ao)=>{D.signal.addEventListener(()=>{const dr=new Error("The operation was aborted.");dr.name="AbortError",Ao(dr)})});let Ws;try{yield Promise.race([Ii,Da]),Ws=yield Ii}catch(Aa){let Ao="fetch-client-network";throw"AbortError"===(null===(j=Aa)||void 0===j?void 0:j.name)&&(Ao="fetch-timeout"),ri.create(Ao,{originalErrorMessage:null===(te=Aa)||void 0===te?void 0:te.message})}let jt=Ws.status;const Lr=Ws.headers.get("ETag")||void 0;let Ss,rs;if(200===Ws.status){let Aa;try{Aa=yield Ws.json()}catch(Ao){throw ri.create("fetch-client-parse",{originalErrorMessage:null===(le=Ao)||void 0===le?void 0:le.message})}Ss=Aa.entries,rs=Aa.state}if("INSTANCE_STATE_UNSPECIFIED"===rs?jt=500:"NO_CHANGE"===rs?jt=304:("NO_TEMPLATE"===rs||"EMPTY_CONFIG"===rs)&&(Ss={}),304!==jt&&200!==jt)throw ri.create("fetch-status",{httpStatus:jt});return{status:jt,eTag:Lr,config:Ss}})()}}class _s{constructor(D,k){this.client=D,this.storage=k}fetch(D){var k=this;return(0,P.Z)(function*(){const j=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:k,backoffCount:j}){var te=this;return(0,P.Z)(function*(){yield function vr(S,D){return new Promise((k,j)=>{const te=Math.max(D-Date.now(),0),le=setTimeout(k,te);S.addEventListener(()=>{clearTimeout(le),j(ri.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,k);try{const le=yield te.client.fetch(D);return yield te.storage.deleteThrottleMetadata(),le}catch(le){if(!function Wp(S){if(!(S instanceof ce.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}(le))throw le;const Me={throttleEndTimeMillis:Date.now()+(0,ce.$s)(j),backoffCount:j+1};return yield te.storage.setThrottleMetadata(Me),te.attemptFetch(D,Me)}})()}}class Kp{constructor(D,k,j,te,le){this.app=D,this._client=k,this._storageCache=j,this._storage=te,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ja(S,D){var k;const j=S.target.error||void 0;return ri.create(D,{originalErrorMessage:j&&(null===(k=j)||void 0===k?void 0:k.message)})}const Jo="app_namespace_store";class Ac{constructor(D,k,j,te=function Yp(){return new Promise((S,D)=>{var k;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=te=>{D(Ja(te,"storage-open"))},j.onsuccess=te=>{S(te.target.result)},j.onupgradeneeded=te=>{0===te.oldVersion&&te.target.result.createObjectStore(Jo,{keyPath:"compositeKey"})}}catch(j){D(ri.create("storage-open",{originalErrorMessage:null===(k=j)||void 0===k?void 0:k.message}))}})}()){this.appId=D,this.appName=k,this.namespace=j,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var k=this;return(0,P.Z)(function*(){const j=yield k.openDbPromise;return new Promise((te,le)=>{var Me;const mt=j.transaction([Jo],"readonly").objectStore(Jo),Rt=k.createCompositeKey(D);try{const Vt=mt.get(Rt);Vt.onerror=It=>{le(Ja(It,"storage-get"))},Vt.onsuccess=It=>{const Xn=It.target.result;te(Xn?Xn.value:void 0)}}catch(Vt){le(ri.create("storage-get",{originalErrorMessage:null===(Me=Vt)||void 0===Me?void 0:Me.message}))}})})()}set(D,k){var j=this;return(0,P.Z)(function*(){const te=yield j.openDbPromise;return new Promise((le,Me)=>{var Ge;const Rt=te.transaction([Jo],"readwrite").objectStore(Jo),Vt=j.createCompositeKey(D);try{const It=Rt.put({compositeKey:Vt,value:k});It.onerror=Xn=>{Me(Ja(Xn,"storage-set"))},It.onsuccess=()=>{le()}}catch(It){Me(ri.create("storage-set",{originalErrorMessage:null===(Ge=It)||void 0===Ge?void 0:Ge.message}))}})})()}delete(D){var k=this;return(0,P.Z)(function*(){const j=yield k.openDbPromise;return new Promise((te,le)=>{var Me;const mt=j.transaction([Jo],"readwrite").objectStore(Jo),Rt=k.createCompositeKey(D);try{const Vt=mt.delete(Rt);Vt.onerror=It=>{le(Ja(It,"storage-delete"))},Vt.onsuccess=()=>{te()}}catch(Vt){le(ri.create("storage-delete",{originalErrorMessage:null===(Me=Vt)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Xo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const k=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),te=D.storage.getActiveConfig(),le=yield k;le&&(D.lastFetchStatus=le);const Me=yield j;Me&&(D.lastSuccessfulFetchTimestampMillis=Me);const Ge=yield te;Ge&&(D.activeConfig=Ge)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function B_(){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,P.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function xc(){(0,ae._registerComponent)(new _e.wA("remote-config",function S(D,{instanceIdentifier:k}){const j=D.getProvider("app").getImmediate(),te=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ri.create("registration-window");if(!(0,ce.hl)())throw ri.create("indexed-db-unavailable");const{projectId:le,apiKey:Me,appId:Ge}=j.options;if(!le)throw ri.create("registration-project-id");if(!Me)throw ri.create("registration-api-key");if(!Ge)throw ri.create("registration-app-id");const mt=new Ac(Ge,j.name,k=k||"firebase"),Rt=new Xo(mt),Vt=new ge.Yd(gs);Vt.logLevel=ge.in.ERROR;const It=new go(te,ae.SDK_VERSION,k,le,Me,Ge),Xn=new _s(It,mt),Ii=new or(Xn,mt,Rt,Vt),Da=new Kp(j,Ii,Rt,mt,Vt);return function gn(S){const D=(0,ce.m9)(S);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Da),Da},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(gs,"0.3.15"),(0,ae.registerVersion)(gs,"0.3.15","esm2017")}();const Mi="/firebase-messaging-sw.js",ta="/firebase-cloud-messaging-push-scope",Vs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ul="google.c.a.c_id",Tu="google.c.a.c_l",Oc="google.c.a.ts",na="google.c.a.e";var wr=(()=>{return(S=wr||(wr={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",wr;var S})();function ys(S){const D=new Uint8Array(S);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ar(S){const k=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(k),te=new Uint8Array(j.length);for(let le=0;le<j.length;++le)te[le]=j.charCodeAt(le);return te}const mo="fcm_token_details_db",ia="fcm_token_object_Store";function Qp(S){return Su.apply(this,arguments)}function Su(){return Su=(0,P.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(mo))return null;let D=null;return(yield(0,fe.X3)(mo,5,{upgrade:(j=(0,P.Z)(function*(te,le,Me,Ge){var mt;if(le<2||!te.objectStoreNames.contains(ia))return;const Rt=Ge.objectStore(ia),Vt=yield Rt.index("fcmSenderId").get(S);if(yield Rt.clear(),Vt)if(2===le){const It=Vt;if(!It.auth||!It.p256dh||!It.endpoint)return;D={token:It.fcmToken,createTime:null!==(mt=It.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:ys(It.vapidKey)}}}else if(3===le){const It=Vt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:ys(It.auth),p256dh:ys(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:ys(It.vapidKey)}}}else if(4===le){const It=Vt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:ys(It.auth),p256dh:ys(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:ys(It.vapidKey)}}}}),function(le,Me,Ge,mt){return j.apply(this,arguments)})})).close(),yield(0,fe.Lj)(mo),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),jn(D)?D:null;var j}),Su.apply(this,arguments)}function jn(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:D}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Pr="firebase-messaging-store";let ki=null;function Bl(){return ki||(ki=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(Pr)}})),ki}function ra(S){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*(S){const D=Er(S),j=yield(yield Bl()).transaction(Pr).objectStore(Pr).get(D);if(j)return j;{const te=yield Qp(S.appConfig.senderId);if(te)return yield fn(S,te),te}})).apply(this,arguments)}function fn(S,D){return Du.apply(this,arguments)}function Du(){return(Du=(0,P.Z)(function*(S,D){const k=Er(S),te=(yield Bl()).transaction(Pr,"readwrite");return yield te.objectStore(Pr).put(D,k),yield te.done,D})).apply(this,arguments)}function Us(S){return Au.apply(this,arguments)}function Au(){return(Au=(0,P.Z)(function*(S){const D=Er(S),j=(yield Bl()).transaction(Pr,"readwrite");yield j.objectStore(Pr).delete(D),yield j.done})).apply(this,arguments)}function Er({appConfig:S}){return S.appId}const Zn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ut(S,D){return el.apply(this,arguments)}function el(){return(el=(0,P.Z)(function*(S,D){var k;const j=yield il(S),te=Ne(D),le={method:"POST",headers:j,body:JSON.stringify(te)};let Me;try{Me=yield(yield fetch(_o(S.appConfig),le)).json()}catch(Ge){throw Zn.create("token-subscribe-failed",{errorInfo:null===(k=Ge)||void 0===k?void 0:k.toString()})}if(Me.error)throw Zn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Zn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Jp(S,D){return tl.apply(this,arguments)}function tl(){return(tl=(0,P.Z)(function*(S,D){var k;const j=yield il(S),te=Ne(D.subscriptionOptions),le={method:"PATCH",headers:j,body:JSON.stringify(te)};let Me;try{Me=yield(yield fetch(`${_o(S.appConfig)}/${D.token}`,le)).json()}catch(Ge){throw Zn.create("token-update-failed",{errorInfo:null===(k=Ge)||void 0===k?void 0:k.toString()})}if(Me.error)throw Zn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Zn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function Nc(S,D){return nl.apply(this,arguments)}function nl(){return(nl=(0,P.Z)(function*(S,D){var k;const te={method:"DELETE",headers:yield il(S)};try{const Me=yield(yield fetch(`${_o(S.appConfig)}/${D}`,te)).json();if(Me.error)throw Zn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(le){throw Zn.create("token-unsubscribe-failed",{errorInfo:null===(k=le)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function _o({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function il(S){return sa.apply(this,arguments)}function sa(){return(sa=(0,P.Z)(function*({appConfig:S,installations:D}){const k=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Ne({p256dh:S,auth:D,endpoint:k,vapidKey:j}){const te={web:{endpoint:k,auth:D,p256dh:S}};return j!==Vs&&(te.web.applicationPubKey=j),te}const en=6048e5;function Bh(S){return oa.apply(this,arguments)}function oa(){return(oa=(0,P.Z)(function*(S){const D=yield Hh(S.swRegistration,S.vapidKey),k={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:D.endpoint,auth:ys(D.getKey("auth")),p256dh:ys(D.getKey("p256dh"))},j=yield ra(S.firebaseDependencies);if(j){if(Xp(j.subscriptionOptions,k))return Date.now()>=j.createTime+en?Hl(S,{token:j.token,createTime:Date.now(),subscriptionOptions:k}):j.token;try{yield Nc(S.firebaseDependencies,j.token)}catch(te){console.warn(te)}return jl(S.firebaseDependencies,k)}return jl(S.firebaseDependencies,k)})).apply(this,arguments)}function di(S){return aa.apply(this,arguments)}function aa(){return(aa=(0,P.Z)(function*(S){const D=yield ra(S.firebaseDependencies);D&&(yield Nc(S.firebaseDependencies,D.token),yield Us(S.firebaseDependencies));const k=yield S.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Hl(S,D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,P.Z)(function*(S,D){try{const k=yield Jp(S.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:k,createTime:Date.now()});return yield fn(S.firebaseDependencies,j),k}catch(k){throw yield di(S),k}})).apply(this,arguments)}function jl(S,D){return la.apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(S,D){const j={token:yield Ut(S,D),createTime:Date.now(),subscriptionOptions:D};return yield fn(S,j),j.token})).apply(this,arguments)}function Hh(S,D){return rl.apply(this,arguments)}function rl(){return(rl=(0,P.Z)(function*(S,D){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ar(D)})})).apply(this,arguments)}function Xp(S,D){return D.vapidKey===S.vapidKey&&D.endpoint===S.endpoint&&D.auth===S.auth&&D.p256dh===S.p256dh}function yo(S){const D={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function hi(S,D){if(!D.notification)return;S.notification={};const k=D.notification.title;k&&(S.notification.title=k);const j=D.notification.body;j&&(S.notification.body=j);const te=D.notification.image;te&&(S.notification.image=te);const le=D.notification.icon;le&&(S.notification.icon=le)}(D,S),function Xr(S,D){!D.data||(S.data=D.data)}(D,S),function sl(S,D){var k,j,te,le,Me;if(!(D.fcmOptions||null!==(k=D.notification)&&void 0!==k&&k.click_action))return;S.fcmOptions={};const Ge=null!==(te=null===(j=D.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==te?te:null===(le=D.notification)||void 0===le?void 0:le.click_action;Ge&&(S.fcmOptions.link=Ge);const mt=null===(Me=D.fcmOptions)||void 0===Me?void 0:Me.analytics_label;mt&&(S.fcmOptions.analyticsLabel=mt)}(D,S),D}function ol(S){return"object"==typeof S&&!!S&&Ul in S}function vs(S,D){const k=[];for(let j=0;j<S.length;j++)k.push(S.charAt(j)),j<D.length&&k.push(D.charAt(j));return k.join("")}function xu(S){return Zn.create("missing-app-config-values",{valueName:S})}vs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Fc{constructor(D,k,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function Pc(S){if(!S||!S.options)throw xu("App Configuration Object");if(!S.name)throw xu("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:k}=S;for(const j of D)if(!k[j])throw xu(j);return{appName:S.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:te,installations:k,analyticsProvider:j}}_delete(){return Promise.resolve()}}function jh(S){return ua.apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(S){var D;try{S.swRegistration=yield navigator.serviceWorker.register(Mi,{scope:ta}),S.swRegistration.update().catch(()=>{})}catch(k){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=k)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Mu(S,D){return al.apply(this,arguments)}function al(){return(al=(0,P.Z)(function*(S,D){if(!D&&!S.swRegistration&&(yield jh(S)),D||!S.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");S.swRegistration=D}})).apply(this,arguments)}function ku(S,D){return ll.apply(this,arguments)}function ll(){return(ll=(0,P.Z)(function*(S,D){D?S.vapidKey=D:S.vapidKey||(S.vapidKey=Vs)})).apply(this,arguments)}function ca(){return(ca=(0,P.Z)(function*(S,D){if(!navigator)throw Zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zn.create("permission-blocked");return yield ku(S,D?.vapidKey),yield Mu(S,D?.serviceWorkerRegistration),Bh(S)})).apply(this,arguments)}function Gh(S,D,k){return ul.apply(this,arguments)}function ul(){return(ul=(0,P.Z)(function*(S,D,k){const j=$h(D);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:k[Ul],message_name:k[Tu],message_time:k[Oc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $h(S){switch(S){case wr.NOTIFICATION_CLICKED:return"notification_open";case wr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bs(){return(Bs=(0,P.Z)(function*(S,D){const k=D.data;if(!k.isFirebaseMessaging)return;S.onMessageHandler&&k.messageType===wr.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(yo(k)):S.onMessageHandler.next(yo(k)));const j=k.data;ol(j)&&"1"===j[na]&&(yield Gh(S,k.messageType,j))})).apply(this,arguments)}const Hs="@firebase/messaging",Vn=S=>{const D=new Fc(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Vc(S,D){return Bs.apply(this,arguments)}(D,k)),D},ws=S=>{const D=S.getProvider("messaging").getImmediate();return{getToken:j=>function Lc(S,D){return ca.apply(this,arguments)}(D,j)}};function Bc(){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,P.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Un(){(0,ae._registerComponent)(new _e.wA("messaging",Vn,"PUBLIC")),(0,ae._registerComponent)(new _e.wA("messaging-internal",ws,"PRIVATE")),(0,ae.registerVersion)(Hs,"0.11.0"),(0,ae.registerVersion)(Hs,"0.11.0","esm2017")}();const fa="analytics",jc="firebase_id",Fu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gc="https://www.googletagmanager.com/gtag/js",Yn=new ge.Yd("@firebase/analytics");function $l(S){return Promise.all(S.map(D=>D.catch(k=>k)))}function zl(S,D){const k=document.createElement("script");k.src=`${Gc}?l=${S}&id=${D}`,k.async=!0,document.head.appendChild(k)}function Wh(S,D,k,j,te,le){return cl.apply(this,arguments)}function cl(){return(cl=(0,P.Z)(function*(S,D,k,j,te,le){const Me=j[te];try{if(Me)yield D[Me];else{const mt=(yield $l(k)).find(Rt=>Rt.measurementId===te);mt&&(yield D[mt.appId])}}catch(Ge){Yn.error(Ge)}S("config",te,le)})).apply(this,arguments)}function Es(S,D,k,j,te){return dl.apply(this,arguments)}function dl(){return(dl=(0,P.Z)(function*(S,D,k,j,te){try{let le=[];if(te&&te.send_to){let Me=te.send_to;Array.isArray(Me)||(Me=[Me]);const Ge=yield $l(k);for(const mt of Me){const Rt=Ge.find(It=>It.measurementId===mt),Vt=Rt&&D[Rt.appId];if(!Vt){le=[];break}le.push(Vt)}}0===le.length&&(le=Object.values(D)),yield Promise.all(le),S("event",j,te||{})}catch(le){Yn.error(le)}})).apply(this,arguments)}function $c(S){const D=window.document.getElementsByTagName("script");for(const k of Object.values(D))if(k.src&&k.src.includes(Gc)&&k.src.includes(S))return k;return null}const fi=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fl=new class Vu{constructor(D={},k=1e3){this.throttleMetadata=D,this.intervalMillis=k}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,k){this.throttleMetadata[D]=k}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function pa(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Zh(S){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,P.Z)(function*(S){var D;const{appId:k,apiKey:j}=S,te={method:"GET",headers:pa(j)},le=Fu.replace("{app-id}",k),Me=yield fetch(le,te);if(200!==Me.status&&304!==Me.status){let Ge="";try{const mt=yield Me.json();null!==(D=mt.error)&&void 0!==D&&D.message&&(Ge=mt.error.message)}catch{}throw fi.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Ge})}return Me.json()})).apply(this,arguments)}function zc(S){return lr.apply(this,arguments)}function lr(){return(lr=(0,P.Z)(function*(S,D=fl,k){const{appId:j,apiKey:te,measurementId:le}=S.options;if(!j)throw fi.create("no-app-id");if(!te){if(le)return{measurementId:le,appId:j};throw fi.create("no-api-key")}const Me=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new pl;return setTimeout((0,P.Z)(function*(){Ge.abort()}),void 0!==k?k:6e4),Wc({appId:j,apiKey:te,measurementId:le},Me,Ge,D)})).apply(this,arguments)}function Wc(S,D,k){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(S,{throttleEndTimeMillis:D,backoffCount:k},j,te=fl){var le,Me;const{appId:Ge,measurementId:mt}=S;try{yield Uu(j,D)}catch(Rt){if(mt)return Yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${null===(le=Rt)||void 0===le?void 0:le.message}]`),{appId:Ge,measurementId:mt};throw Rt}try{const Rt=yield Zh(S);return te.deleteThrottleMetadata(Ge),Rt}catch(Rt){const Vt=Rt;if(!ql(Vt)){if(te.deleteThrottleMetadata(Ge),mt)return Yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Vt?.message}]`),{appId:Ge,measurementId:mt};throw Rt}const It=503===Number(null===(Me=Vt?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,ce.$s)(k,te.intervalMillis,30):(0,ce.$s)(k,te.intervalMillis),Xn={throttleEndTimeMillis:Date.now()+It,backoffCount:k+1};return te.setThrottleMetadata(Ge,Xn),Yn.debug(`Calling attemptFetch again in ${It} millis`),Wc(S,Xn,j,te)}})).apply(this,arguments)}function Uu(S,D){return new Promise((k,j)=>{const te=Math.max(D-Date.now(),0),le=setTimeout(k,te);S.addEventListener(()=>{clearTimeout(le),j(fi.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function ql(S){if(!(S instanceof ce.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}class pl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let vo,Zl;function ga(){return(ga=(0,P.Z)(function*(S,D,k,j,te){if(te&&te.global)S("event",k,j);else{const le=yield D;S("event",k,Object.assign(Object.assign({},j),{send_to:le}))}})).apply(this,arguments)}function ya(S){Zl=S}function Bu(S){vo=S}function Gs(){return va.apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(){var S;if(!(0,ce.hl)())return Yn.warn(fi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(D){return Yn.warn(fi.create("indexeddb-unavailable",{errorInfo:null===(S=D)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function wa(){return(wa=(0,P.Z)(function*(S,D,k,j,te,le,Me){var Ge;const mt=zc(S);mt.then(Ii=>{k[Ii.measurementId]=Ii.appId,S.options.measurementId&&Ii.measurementId!==S.options.measurementId&&Yn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Ii.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ii=>Yn.error(Ii)),D.push(mt);const Rt=Gs().then(Ii=>{if(Ii)return j.getId()}),[Vt,It]=yield Promise.all([mt,Rt]);$c(le)||zl(le,Vt.measurementId),Zl&&(te("consent","default",Zl),ya(void 0)),te("js",new Date);const Xn=null!==(Ge=Me?.config)&&void 0!==Ge?Ge:{};return Xn.origin="firebase",Xn.update=!0,null!=It&&(Xn[jc]=It),te("config",Vt.measurementId,Xn),vo&&(te("set",vo),Bu(void 0)),Vt.measurementId})).apply(this,arguments)}class Yl{constructor(D){this.app=D}_delete(){return delete Bi[this.app.options.appId],Promise.resolve()}}let Bi={},Ea=[];const Eo={};let ba,ts,Ca="dataLayer",Kc=!1;function Jh(S,D,k){!function eg(){const S=[];if((0,ce.ru)()&&S.push("This is a browser extension environment."),(0,ce.zI)()||S.push("Cookies are not available."),S.length>0){const D=S.map((j,te)=>`(${te+1}) ${j}`).join(" "),k=fi.create("invalid-analytics-context",{errorInfo:D});Yn.warn(k.message)}}();const j=S.options.appId;if(!j)throw fi.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw fi.create("no-api-key");Yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Bi[j])throw fi.create("already-exists",{id:j});if(!Kc){!function Wl(S){let D=[];Array.isArray(window[S])?D=window[S]:window[S]=D}(Ca);const{wrappedGtag:le,gtagCore:Me}=function hl(S,D,k,j,te){let le=function(...Me){window[j].push(arguments)};return window[te]&&"function"==typeof window[te]&&(le=window[te]),window[te]=function Lu(S,D,k,j){function le(){return(le=(0,P.Z)(function*(Me,Ge,mt){try{"event"===Me?yield Es(S,D,k,Ge,mt):"config"===Me?yield Wh(S,D,k,j,Ge,mt):"consent"===Me?S("consent","update",mt):S("set",Ge)}catch(Rt){Yn.error(Rt)}})).apply(this,arguments)}return function te(Me,Ge,mt){return le.apply(this,arguments)}}(le,S,D,k),{gtagCore:le,wrappedGtag:window[te]}}(Bi,Ea,Eo,Ca,"gtag");ts=le,ba=Me,Kc=!0}return Bi[j]=function Qh(S,D,k,j,te,le,Me){return wa.apply(this,arguments)}(S,Ea,Eo,D,ba,Ca,k),new Yl(S)}function j_(){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,P.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const ft="@firebase/analytics";!function Rn(){(0,ae._registerComponent)(new _e.wA(fa,(D,{options:k})=>Jh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ae._registerComponent)(new _e.wA("analytics-internal",function S(D){try{const k=D.getProvider(fa).getImmediate();return{logEvent:(j,te,le)=>function dn(S,D,k,j){S=(0,ce.m9)(S),function gl(S,D,k,j,te){return ga.apply(this,arguments)}(ts,Bi[S.app.options.appId],D,k,j).catch(te=>Yn.error(te))}(k,j,te,le)}}catch(k){throw fi.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ae.registerVersion)(ft,"0.8.4"),(0,ae.registerVersion)(ft,"0.8.4","esm2017")}();var bs=U(4408),bi=U(7565);const Zc=new class bo extends bi.v{}(class Co extends bs.o{constructor(D,k){super(D,k),this.scheduler=D,this.work=k}schedule(D,k=0){return k>0?super.schedule(D,k):(this.delay=k,this.state=D,this.scheduler.flush(this),this)}execute(D,k){return k>0||this.closed?super.execute(D,k):this._execute(D,k)}requestAsyncId(D,k,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(D,k,j):(D.flush(this),0)}});var ef=U(4986),Io=U(8505),ju=U(5363),To=U(9468);const ht=new l.GfV("7.4.1"),_l="__angularfire_symbol__analyticsIsSupportedValue",is="__angularfire_symbol__analyticsIsSupported",Jl="__angularfire_symbol__remoteConfigIsSupportedValue",yl="__angularfire_symbol__remoteConfigIsSupported",Gn="__angularfire_symbol__messagingIsSupportedValue",vl="__angularfire_symbol__messagingIsSupported";function wl(S,D,k){if(D){if(1===D.length)return D[0];const le=D.filter(Me=>Me.app===k);if(1===le.length)return le[0]}return k.container.getProvider(S).getImmediate({optional:!0})}globalThis[is]||(globalThis[is]=j_().then(S=>globalThis[_l]=S).catch(()=>globalThis[_l]=!1)),globalThis[vl]||(globalThis[vl]=Bc().then(S=>globalThis[Gn]=S).catch(()=>globalThis[Gn]=!1)),globalThis[yl]||(globalThis[yl]=B_().then(S=>globalThis[Jl]=S).catch(()=>globalThis[Jl]=!1));const Ta=(S,D)=>{const k=D?[D]:(0,$.C6)(),j=[];return k.forEach(te=>{te.container.getProvider(S).instances.forEach(Me=>{j.includes(Me)||j.push(Me)})}),j};function ur(){}class So{constructor(D,k=Zc){this.zone=D,this.delegate=k}now(){return this.delegate.now()}schedule(D,k,j){const te=this.zone;return this.delegate.schedule(function(Me){te.runGuarded(()=>{D.apply(this,[Me])})},k,j)}}class Gu{constructor(D){this.zone=D,this.task=null}call(D,k){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ur,{},ur,ur)),k.pipe((0,Io.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $s=(()=>{class S{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new So(Zone.current)),this.insideAngular=k.run(()=>new So(Zone.current,ef.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(k){return new(k||S)(l.LFG(l.R0b))},S.\u0275prov=l.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function cr(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function si(S){return S.pipe((0,ju.Q)(cr().outsideAngular))}function Ts(S){return cr(),function Jn(S){return function(k){return(k=k.lift(new Gu(S.ngZone))).pipe((0,To.R)(S.outsideAngular),(0,ju.Q)(S.insideAngular))}}(cr())(S)}},8247:(yt,Oe,U)=>{U.d(Oe,{$:()=>_o,A:()=>W,B:()=>Fe,G:()=>co,H:()=>rr,J:()=>_s,L:()=>q,M:()=>Vl,N:()=>kc,P:()=>ef,Q:()=>Ul,R:()=>G_,T:()=>Tu,U:()=>Vs,V:()=>wr,W:()=>ys,X:()=>Qp,Y:()=>Xa,Z:()=>Ut,_:()=>Jp,a:()=>js,a0:()=>Bh,a1:()=>di,a2:()=>Hl,a3:()=>jl,a4:()=>Hh,a5:()=>Xp,a6:()=>hi,a7:()=>Xr,a8:()=>ol,a9:()=>vs,aA:()=>z,aB:()=>mt,aC:()=>si,aD:()=>zs,aE:()=>St,aI:()=>pa,aL:()=>na,aa:()=>jh,ab:()=>Mu,ac:()=>ku,af:()=>Gh,ag:()=>$h,ah:()=>Vc,ak:()=>Pr,al:()=>Ru,an:()=>Gc,ao:()=>cl,ap:()=>we,aq:()=>je,ar:()=>ut,as:()=>tt,at:()=>eu,au:()=>Lr,av:()=>Lt,aw:()=>Ve,ax:()=>oe,ay:()=>Ii,az:()=>ne,b:()=>fi,c:()=>Gn,d:()=>tf,e:()=>Xl,f:()=>Jn,g:()=>j,h:()=>S,i:()=>va,j:()=>Me,k:()=>uf,l:()=>Qi,m:()=>qs,o:()=>fe,r:()=>bs,s:()=>ns,u:()=>Zc});var l=U(5861),$=U(2090),P=U(9681),ae=U(1877),ce=U(655),_e=U(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Se=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new ae.Yd("@firebase/auth");function it(w,...m){me.logLevel<=ae.in.ERROR&&me.error(`Auth (${P.SDK_VERSION}): ${w}`,...m)}function tt(w,...m){throw Ye(w,...m)}function Ve(w,...m){return Ye(w,...m)}function Re(w,m,y){const b=Object.assign(Object.assign({},Se()),{[m]:y});return new $.LL("auth","Firebase",b).create(m,{appName:w.name})}function Ie(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&tt(w,"argument-error"),Re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(w,...m){if("string"!=typeof w){const y=m[0],b=[...m.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(y,...b)}return at.create(w,...m)}function oe(w,m,...y){if(!w)throw Ye(m,...y)}function de(w){const m="INTERNAL ASSERTION FAILED: "+w;throw it(m),new Error(m)}function we(w,m){w||de(m)}const X=new Map;function ne(w){we(w instanceof Function,"Expected a class definition");let m=X.get(w);return m?(we(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,X.set(w,m),m)}function $e(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function ze(){return"http:"===Et()||"https:"===Et()}function Et(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Qe{constructor(m,y){this.shortDelay=m,this.longDelay=y,we(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function hn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ze()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _n(w,m){we(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class xn{static initialize(m,y,b){this.fetchImpl=m,y&&(this.headersImpl=y),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cn=new Qe(3e4,6e4);function Qt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function zt(w,m,y,b){return xi.apply(this,arguments)}function xi(){return(xi=(0,l.Z)(function*(w,m,y,b,M={}){return Kr(w,M,(0,l.Z)(function*(){let F={},ie={};b&&("GET"===m?ie=b:F={body:JSON.stringify(b)});const ke=(0,$.xO)(Object.assign({key:w.config.apiKey},ie)).slice(1),lt=yield w._getAdditionalHeaders();return lt["Content-Type"]="application/json",w.languageCode&&(lt["X-Firebase-Locale"]=w.languageCode),xn.fetch()(Yr(w,w.config.apiHost,y,ke),Object.assign({method:m,headers:lt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Kr(w,m,y){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,l.Z)(function*(w,m,y){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},un),m);try{const M=new qi(w),F=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const ie=yield F.json();if("needConfirmation"in ie)throw Kn(w,"account-exists-with-different-credential",ie);if(F.ok&&!("errorMessage"in ie))return ie;{const ke=F.ok?ie.errorMessage:ie.error.message,[lt,xt]=ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===lt)throw Kn(w,"credential-already-in-use",ie);if("EMAIL_EXISTS"===lt)throw Kn(w,"email-already-in-use",ie);if("USER_DISABLED"===lt)throw Kn(w,"user-disabled",ie);const tn=b[lt]||lt.toLowerCase().replace(/[_\s]+/g,"-");if(xt)throw Re(w,tn,xt);tt(w,tn)}}catch(M){if(M instanceof $.ZR)throw M;tt(w,"network-request-failed")}})).apply(this,arguments)}function Hn(w,m,y,b){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,l.Z)(function*(w,m,y,b,M={}){const F=yield zt(w,m,y,b,M);return"mfaPendingCredential"in F&&tt(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Yr(w,m,y,b){const M=`${m}${y}?${b}`;return w.config.emulator?_n(w.config,M):`${w.config.apiScheme}://${M}`}class qi{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,b)=>{this.timer=setTimeout(()=>b(Ve(this.auth,"network-request-failed")),cn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(w,m,y){const b={appName:w.name};y.email&&(b.email=y.email),y.phoneNumber&&(b.phoneNumber=y.phoneNumber);const M=Ve(w,m,b);return M.customData._tokenResponse=y,M}function Qr(){return(Qr=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function nt(w,m){return ui.apply(this,arguments)}function ui(){return(ui=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ti(w,m){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ei(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Mn(){return(Mn=(0,l.Z)(function*(w,m=!1){const y=(0,$.m9)(w),b=yield y.getIdToken(m),M=Ct(b);oe(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,ie=F?.sign_in_provider;return{claims:M,token:b,authTime:Ei(bn(M.auth_time)),issuedAtTime:Ei(bn(M.iat)),expirationTime:Ei(bn(M.exp)),signInProvider:ie||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function bn(w){return 1e3*Number(w)}function Ct(w){var m;const[y,b,M]=w.split(".");if(void 0===y||void 0===b||void 0===M)return it("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,$.tV)(b);return F?JSON.parse(F):(it("Failed to decode base64 JWT payload"),null)}catch(F){return it("Caught error parsing JWT payload as JSON",null===(m=F)||void 0===m?void 0:m.toString()),null}}function Ft(w,m){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,l.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(b){throw b instanceof $.ZR&&ni(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}function ni({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Li{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const b=this.getInterval(m);this.timerId=setTimeout((0,l.Z)(function*(){yield y.iteration()}),b)}iteration(){var m=this;return(0,l.Z)(function*(){var y;try{yield m.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(y=b)||void 0===y?void 0:y.code)&&m.schedule(!0))}m.schedule()})()}}class Ot{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vi(w){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,l.Z)(function*(w){var m;const y=w.auth,b=yield w.getIdToken(),M=yield Ft(w,ti(y,{idToken:b}));oe(M?.users.length,y,"internal-error");const F=M.users[0];w._notifyReloadListener(F);const ie=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?Fn(F.providerUserInfo):[],ke=_i(w.providerData,ie),tn=!!w.isAnonymous&&!(w.email&&F.passwordHash||ke?.length),wn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ke,metadata:new Ot(F.createdAt,F.lastLoginAt),isAnonymous:tn};Object.assign(w,wn)})).apply(this,arguments)}function sn(){return(sn=(0,l.Z)(function*(w){const m=(0,$.m9)(w);yield Vi(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function _i(w,m){return[...w.filter(b=>!m.some(M=>M.providerId===b.providerId)),...m]}function Fn(w){return w.map(m=>{var{providerId:y}=m,b=(0,ce._T)(m,["providerId"]);return{providerId:y,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function De(){return(De=(0,l.Z)(function*(w,m){const y=yield Kr(w,{},(0,l.Z)(function*(){const b=(0,$.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:F}=w.config,ie=Yr(w,M,"/v1/token",`key=${F}`),ke=yield w._getAdditionalHeaders();return ke["Content-Type"]="application/x-www-form-urlencoded",xn.fetch()(ie,{method:"POST",headers:ke,body:b})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){oe(m.idToken,"internal-error"),oe(typeof m.idToken<"u","internal-error"),oe(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function bt(w){const m=Ct(w);return oe(m,"internal-error"),oe(typeof m.exp<"u","internal-error"),oe(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var b=this;return(0,l.Z)(function*(){return oe(!b.accessToken||b.refreshToken,m,"user-token-expired"),y||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(m,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var b=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:ie}=yield function st(w,m){return De.apply(this,arguments)}(m,y);b.updateTokensAndExpiration(M,F,Number(ie))})()}updateTokensAndExpiration(m,y,b){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(m,y){const{refreshToken:b,accessToken:M,expirationTime:F}=y,ie=new ot;return b&&(oe("string"==typeof b,"internal-error",{appName:m}),ie.refreshToken=b),M&&(oe("string"==typeof M,"internal-error",{appName:m}),ie.accessToken=M),F&&(oe("number"==typeof F,"internal-error",{appName:m}),ie.expirationTime=F),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ot,this.toJSON())}_performRefresh(){return de("not implemented")}}function At(w,m){oe("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class Mt{constructor(m){var{uid:y,auth:b,stsTokenManager:M}=m,F=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Ot(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,l.Z)(function*(){const b=yield Ft(y,y.stsTokenManager.getToken(y.auth,m));return oe(b,y.auth,"internal-error"),y.accessToken!==b&&(y.accessToken=b,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),b})()}getIdTokenResult(m){return function Dn(w){return Mn.apply(this,arguments)}(this,m)}reload(){return function ir(w){return sn.apply(this,arguments)}(this)}_assign(m){this!==m&&(oe(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Mt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var b=this;return(0,l.Z)(function*(){let M=!1;m.idToken&&m.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(m),M=!0),y&&(yield Vi(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var m=this;return(0,l.Z)(function*(){const y=yield m.getIdToken();return yield Ft(m,function Rr(w,m){return Qr.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var b,M,F,ie,ke,lt,xt,tn;const wn=null!==(b=y.displayName)&&void 0!==b?b:void 0,Ji=null!==(M=y.email)&&void 0!==M?M:void 0,ss=null!==(F=y.phoneNumber)&&void 0!==F?F:void 0,nd=null!==(ie=y.photoURL)&&void 0!==ie?ie:void 0,id=null!==(ke=y.tenantId)&&void 0!==ke?ke:void 0,rd=null!==(lt=y._redirectEventId)&&void 0!==lt?lt:void 0,Cl=null!==(xt=y.createdAt)&&void 0!==xt?xt:void 0,og=null!==(tn=y.lastLoginAt)&&void 0!==tn?tn:void 0,{uid:pf,emailVerified:sd,isAnonymous:qu,providerData:Ku,stsTokenManager:xa}=y;oe(pf&&xa,m,"internal-error");const K_=ot.fromJSON(this.name,xa);oe("string"==typeof pf,m,"internal-error"),At(wn,m.name),At(Ji,m.name),oe("boolean"==typeof sd,m,"internal-error"),oe("boolean"==typeof qu,m,"internal-error"),At(ss,m.name),At(nd,m.name),At(id,m.name),At(rd,m.name),At(Cl,m.name),At(og,m.name);const $n=new Mt({uid:pf,auth:m,email:Ji,emailVerified:sd,displayName:wn,isAnonymous:qu,photoURL:nd,phoneNumber:ss,tenantId:id,stsTokenManager:K_,createdAt:Cl,lastLoginAt:og});return Ku&&Array.isArray(Ku)&&($n.providerData=Ku.map(ag=>Object.assign({},ag))),rd&&($n._redirectEventId=rd),$n}static _fromIdTokenResponse(m,y,b=!1){return(0,l.Z)(function*(){const M=new ot;M.updateFromServerResponse(y);const F=new Mt({uid:y.localId,auth:m,stsTokenManager:M,isAnonymous:b});return yield Vi(F),F})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(y,b){var M=this;return(0,l.Z)(function*(){M.storage[y]=b})()}_get(y){var b=this;return(0,l.Z)(function*(){const M=b.storage[y];return void 0===M?null:M})()}_remove(y){var b=this;return(0,l.Z)(function*(){delete b.storage[y]})()}_addListener(y,b){}_removeListener(y,b){}}return w.type="NONE",w})();function z(w,m,y){return`firebase:${w}:${m}:${y}`}class J{constructor(m,y,b){this.persistence=m,this.auth=y,this.userKey=b;const{config:M,name:F}=this.auth;this.fullUserKey=z(this.userKey,M.apiKey,F),this.fullPersistenceKey=z("persistence",M.apiKey,F),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,l.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?Mt._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,l.Z)(function*(){if(y.persistence===m)return;const b=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,b?y.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,b="authUser"){return(0,l.Z)(function*(){if(!y.length)return new J(ne(q),m,b);const M=(yield Promise.all(y.map(function(){var xt=(0,l.Z)(function*(tn){if(yield tn._isAvailable())return tn});return function(tn){return xt.apply(this,arguments)}}()))).filter(xt=>xt);let F=M[0]||ne(q);const ie=z(b,m.config.apiKey,m.name);let ke=null;for(const xt of y)try{const tn=yield xt._get(ie);if(tn){const wn=Mt._fromJSON(m,tn);xt!==F&&(ke=wn),F=xt;break}}catch{}const lt=M.filter(xt=>xt._shouldAllowMigration);return F._shouldAllowMigration&&lt.length?(F=lt[0],ke&&(yield F._set(ie,ke.toJSON())),yield Promise.all(y.map(function(){var xt=(0,l.Z)(function*(tn){if(tn!==F)try{yield tn._remove(ie)}catch{}});return function(tn){return xt.apply(this,arguments)}}())),new J(F,m,b)):new J(F,m,b)})()}}function G(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Le(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(dt(m))return"Blackberry";if(xe(m))return"Webos";if(H(m))return"Safari";if((m.includes("chrome/")||re(m))&&!m.includes("edge/"))return"Chrome";if(ut(m))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function O(w=(0,$.z$)()){return/firefox\//i.test(w)}function H(w=(0,$.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function re(w=(0,$.z$)()){return/crios\//i.test(w)}function Le(w=(0,$.z$)()){return/iemobile/i.test(w)}function ut(w=(0,$.z$)()){return/android/i.test(w)}function dt(w=(0,$.z$)()){return/blackberry/i.test(w)}function xe(w=(0,$.z$)()){return/webos/i.test(w)}function je(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Lt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function vn(w=(0,$.z$)()){return je(w)||ut(w)||xe(w)||dt(w)||/windows phone/i.test(w)||Le(w)}function kn(w,m=[]){let y;switch(w){case"Browser":y=G((0,$.z$)());break;case"Worker":y=`${G((0,$.z$)())}-${w}`;break;default:y=w}const b=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${P.SDK_VERSION}/${b}`}class lo{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const b=F=>new Promise((ie,ke)=>{try{ie(m(F))}catch(lt){ke(lt)}});b.onAbort=y,this.queue.push(b);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,l.Z)(function*(){var b;if(y.auth.currentUser===m)return;const M=[];try{for(const F of y.queue)yield F(m),F.onAbort&&M.push(F.onAbort)}catch(F){M.reverse();for(const ie of M)try{ie()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=F)||void 0===b?void 0:b.message})}})()}}class Yo{constructor(m,y,b){this.app=m,this.heartbeatServiceProvider=y,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uo(this),this.idTokenSubscription=new uo(this),this.beforeStateQueue=new lo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(m,y){var b=this;return y&&(this._popupRedirectResolver=ne(y)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,F;if(!b._deleted&&(b.persistenceManager=yield J.create(b,m),!b._deleted)){if(null!==(M=b._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(y),b.lastNotifiedUid=(null===(F=b.currentUser)||void 0===F?void 0:F.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,l.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,l.Z)(function*(){var b;const M=yield y.assertedPersistence.getCurrentUser();let F=M,ie=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const ke=null===(b=y.redirectUser)||void 0===b?void 0:b._redirectEventId,lt=F?._redirectEventId,xt=yield y.tryRedirectSignIn(m);(!ke||ke===lt)&&xt?.user&&(F=xt.user,ie=!0)}if(!F)return y.directlySetCurrentUser(null);if(!F._redirectEventId){if(ie)try{yield y.beforeStateQueue.runMiddleware(F)}catch(ke){F=M,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(ke))}return F?y.reloadAndSetCurrentUserOrClear(F):y.directlySetCurrentUser(null)}return oe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===F._redirectEventId?y.directlySetCurrentUser(F):y.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var y=this;return(0,l.Z)(function*(){let b=null;try{b=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,l.Z)(function*(){var b;try{yield Vi(m)}catch(M){if("auth/network-request-failed"!==(null===(b=M)||void 0===b?void 0:b.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function qt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,l.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,l.Z)(function*(){const b=m?(0,$.m9)(m):null;return b&&oe(b.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(b&&b._clone(y))})()}_updateCurrentUser(m,y=!1){var b=this;return(0,l.Z)(function*(){if(!b._deleted)return m&&oe(b.tenantId===m.tenantId,b,"tenant-id-mismatch"),y||(yield b.beforeStateQueue.runMiddleware(m)),b.queue((0,l.Z)(function*(){yield b.directlySetCurrentUser(m),b.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,l.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,l.Z)(function*(){yield y.assertedPersistence.setPersistence(ne(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new $.LL("auth","Firebase",m())}onAuthStateChanged(m,y,b){return this.registerStateListener(this.authStateSubscription,m,y,b)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,b){return this.registerStateListener(this.idTokenSubscription,m,y,b)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var b=this;return(0,l.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(y);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,l.Z)(function*(){if(!y.redirectPersistenceManager){const b=m&&ne(m)||y._popupRedirectResolver;oe(b,y,"argument-error"),y.redirectPersistenceManager=yield J.create(y,[ne(b._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,l.Z)(function*(){var b,M;return y._isInitialized&&(yield y.queue((0,l.Z)(function*(){}))),(null===(b=y._currentUser)||void 0===b?void 0:b._redirectEventId)===m?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,l.Z)(function*(){if(m===y.currentUser)return y.queue((0,l.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,b,M){if(this._deleted)return()=>{};const F="function"==typeof y?y:y.next.bind(y),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(ie,this,"internal-error"),ie.then(()=>F(this.currentUser)),"function"==typeof y?m.addObserver(y,b,M):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,l.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=kn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,l.Z)(function*(){var y;const b={"X-Client-Version":m.clientVersion};m.app.options.appId&&(b["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return M&&(b["X-Firebase-Client"]=M),b})()}}function St(w){return(0,$.m9)(w)}class uo{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,$.ne)(y=>this.observer=y)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function co(w,m,y){const b=St(w);oe(b._canInitEmulator,b,"emulator-config-failed"),oe(/^https?:\/\//.test(m),b,"invalid-emulator-scheme");const M=!!y?.disableWarnings,F=Ll(m),{host:ie,port:ke}=function gs(w){const m=Ll(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const b=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const F=M[1];return{host:F,port:ii(b.substr(F.length+1))}}{const[F,ie]=b.split(":");return{host:F,port:ii(ie)}}}(m);b.config.emulator={url:`${F}//${ie}${null===ke?"":`:${ke}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ie,port:ke,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function ho(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Ll(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function ii(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class rr{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return de("not implemented")}_getIdTokenResponse(m){return de("not implemented")}_linkToIdToken(m,y){return de("not implemented")}_getReauthenticationResolver(m){return de("not implemented")}}function mr(w,m){return ri.apply(this,arguments)}function ri(){return(ri=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:resetPassword",Qt(w,m))})).apply(this,arguments)}function Cu(w,m){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Lh(w,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:update",Qt(w,m))})).apply(this,arguments)}function fo(){return(fo=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signInWithPassword",Qt(w,m))})).apply(this,arguments)}function _r(w,m){return po.apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:sendOobCode",Qt(w,m))})).apply(this,arguments)}function ms(w,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,l.Z)(function*(w,m){return _r(w,m)})).apply(this,arguments)}function Vh(w,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,l.Z)(function*(w,m){return _r(w,m)})).apply(this,arguments)}function yr(w,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(w,m){return _r(w,m)})).apply(this,arguments)}function bu(w,m){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,l.Z)(function*(w,m){return _r(w,m)})).apply(this,arguments)}function Iu(){return(Iu=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signInWithEmailLink",Qt(w,m))})).apply(this,arguments)}function or(){return(or=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signInWithEmailLink",Qt(w,m))})).apply(this,arguments)}class Zi extends rr{constructor(m,y,b,M=null){super("password",b),this._email=m,this._password=y,this._tenantId=M}static _fromEmailAndPassword(m,y){return new Zi(m,y,"password")}static _fromEmailAndCode(m,y,b=null){return new Zi(m,y,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,l.Z)(function*(){switch(y.signInMethod){case"password":return function Ya(w,m){return fo.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function sr(w,m){return Iu.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:tt(m,"internal-error")}})()}_linkToIdToken(m,y){var b=this;return(0,l.Z)(function*(){switch(b.signInMethod){case"password":return Cu(m,{idToken:y,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function zp(w,m){return or.apply(this,arguments)}(m,{idToken:y,email:b._email,oobCode:b._password});default:tt(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function go(w,m){return vr.apply(this,arguments)}function vr(){return(vr=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signInWithIdp",Qt(w,m))})).apply(this,arguments)}class _s extends rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new _s(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):tt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:M}=y,F=(0,ce._T)(y,["providerId","signInMethod"]);if(!b||!M)return null;const ie=new _s(b,M);return ie.idToken=F.idToken||void 0,ie.accessToken=F.accessToken||void 0,ie.secret=F.secret,ie.nonce=F.nonce,ie.pendingToken=F.pendingToken||null,ie}_getIdTokenResponse(m){return go(m,this.buildRequest())}_linkToIdToken(m,y){const b=this.buildRequest();return b.idToken=y,go(m,b)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,go(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,$.xO)(y)}return m}}function qp(w,m){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:sendVerificationCode",Qt(w,m))})).apply(this,arguments)}function Ja(){return(Ja=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signInWithPhoneNumber",Qt(w,m))})).apply(this,arguments)}function Dc(){return(Dc=(0,l.Z)(function*(w,m){const y=yield Hn(w,"POST","/v1/accounts:signInWithPhoneNumber",Qt(w,m));if(y.temporaryProof)throw Kn(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Zp={USER_NOT_FOUND:"user-not-found"};function Ac(){return(Ac=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signInWithPhoneNumber",Qt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Zp)})).apply(this,arguments)}class Xo extends rr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new Xo({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new Xo({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function Kp(w,m){return Ja.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function Jo(w,m){return Dc.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Yp(w,m){return Ac.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:b,verificationCode:M}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:b,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:b,phoneNumber:M,temporaryProof:F}=m;return b||y||M||F?new Xo({verificationId:y,verificationCode:b,phoneNumber:M,temporaryProof:F}):null}}class ea{constructor(m){var y,b,M,F,ie,ke;const lt=(0,$.zd)((0,$.pd)(m)),xt=null!==(y=lt.apiKey)&&void 0!==y?y:null,tn=null!==(b=lt.oobCode)&&void 0!==b?b:null,wn=function xc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=lt.mode)&&void 0!==M?M:null);oe(xt&&tn&&wn,"argument-error"),this.apiKey=xt,this.operation=wn,this.code=tn,this.continueUrl=null!==(F=lt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ie=lt.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(ke=lt.tenantId)&&void 0!==ke?ke:null}static parseLink(m){const y=function Mc(w){const m=(0,$.zd)((0,$.pd)(w)).link,y=m?(0,$.zd)((0,$.pd)(m)).deep_link_id:null,b=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(b?(0,$.zd)((0,$.pd)(b)).link:null)||b||y||m||w}(m);try{return new ea(y)}catch{return null}}}let Vl=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,b){return Zi._fromEmailAndPassword(y,b)}static credentialWithLink(y,b){const M=ea.parseLink(b);return oe(M,"argument-error"),Zi._fromEmailAndCode(y,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Mi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class ta extends Mi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Vs extends ta{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return oe("providerId"in y&&"signInMethod"in y,"argument-error"),_s._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return oe(m.idToken||m.accessToken,"argument-error"),_s._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Vs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Vs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:F,nonce:ie,providerId:ke}=m;if(!b&&!M&&!y&&!F||!ke)return null;try{return new Vs(ke)._credential({idToken:y,accessToken:b,nonce:ie,pendingToken:F})}catch{return null}}}let kc=(()=>{class w extends ta{constructor(){super("facebook.com")}static credential(y){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ul=(()=>{class w extends ta{constructor(){super("google.com"),this.addScope("profile")}static credential(y,b){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:b})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:b,oauthAccessToken:M}=y;if(!b&&!M)return null;try{return w.credential(b,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Tu=(()=>{class w extends ta{constructor(){super("github.com")}static credential(y){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class na extends rr{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return go(m,this.buildRequest())}_linkToIdToken(m,y){const b=this.buildRequest();return b.idToken=y,go(m,b)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,go(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:M,pendingToken:F}=y;return b&&M&&F&&b===M?new na(b,F):null}static _create(m,y){return new na(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wr extends Mi{constructor(m){oe(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return wr.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return wr.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=na.fromJSON(m);return oe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:b}=m;if(!y||!b)return null;try{return na._create(b,y)}catch{return null}}}let ys=(()=>{class w extends ta{constructor(){super("twitter.com")}static credential(y,b){return _s._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:b})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=y;if(!b||!M)return null;try{return w.credential(b,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ar(w,m){return mo.apply(this,arguments)}function mo(){return(mo=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signUp",Qt(w,m))})).apply(this,arguments)}class Nr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,b,M=!1){return(0,l.Z)(function*(){const F=yield Mt._fromIdTokenResponse(m,b,M),ie=ia(b);return new Nr({user:F,providerId:ie,_tokenResponse:b,operationType:y})})()}static _forOperation(m,y,b){return(0,l.Z)(function*(){yield m._updateTokensIfNecessary(b,!0);const M=ia(b);return new Nr({user:m,providerId:M,_tokenResponse:b,operationType:y})})()}}function ia(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Qp(w){return Su.apply(this,arguments)}function Su(){return(Su=(0,l.Z)(function*(w){var m;const y=St(w);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new Nr({user:y.currentUser,providerId:null,operationType:"signIn"});const b=yield ar(y,{returnSecureToken:!0}),M=yield Nr._fromIdTokenResponse(y,"signIn",b,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class jn extends $.ZR{constructor(m,y,b,M){var F;super(y.code,y.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,jn.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:y.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(m,y,b,M){return new jn(m,y,b,M)}}function Rc(w,m,y,b){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?jn._fromErrorAndOperation(w,F,m,b):F})}function Uh(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Pr(w,m){return ki.apply(this,arguments)}function ki(){return(ki=(0,l.Z)(function*(w,m){const y=(0,$.m9)(w);yield Jr(!0,y,m);const{providerUserInfo:b}=yield nt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),M=Uh(b||[]);return y.providerData=y.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Bl(w,m){return ra.apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(w,m,y=!1){const b=yield Ft(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return Nr._forOperation(w,"link",b)})).apply(this,arguments)}function Jr(w,m,y){return fn.apply(this,arguments)}function fn(){return(fn=(0,l.Z)(function*(w,m,y){yield Vi(m);const M=!1===w?"provider-already-linked":"no-such-provider";oe(Uh(m.providerData).has(y)===w,m.auth,M)})).apply(this,arguments)}function Du(w,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,l.Z)(function*(w,m,y=!1){var b;const{auth:M}=w,F="reauthenticate";try{const ie=yield Ft(w,Rc(M,F,m,w),y);oe(ie.idToken,M,"internal-error");const ke=Ct(ie.idToken);oe(ke,M,"internal-error");const{sub:lt}=ke;return oe(w.uid===lt,M,"user-mismatch"),Nr._forOperation(w,F,ie)}catch(ie){throw"auth/user-not-found"===(null===(b=ie)||void 0===b?void 0:b.code)&&tt(M,"user-mismatch"),ie}})).apply(this,arguments)}function Au(w,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,l.Z)(function*(w,m,y=!1){const b="signIn",M=yield Rc(w,b,m),F=yield Nr._fromIdTokenResponse(w,b,M);return y||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Xa(w,m){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,l.Z)(function*(w,m){return Au(St(w),m)})).apply(this,arguments)}function Ut(w,m){return el.apply(this,arguments)}function el(){return(el=(0,l.Z)(function*(w,m){const y=(0,$.m9)(w);return yield Jr(!1,y,m.providerId),Bl(y,m)})).apply(this,arguments)}function Jp(w,m){return tl.apply(this,arguments)}function tl(){return(tl=(0,l.Z)(function*(w,m){return Du((0,$.m9)(w),m)})).apply(this,arguments)}function Nc(w,m){return nl.apply(this,arguments)}function nl(){return(nl=(0,l.Z)(function*(w,m){return Hn(w,"POST","/v1/accounts:signInWithCustomToken",Qt(w,m))})).apply(this,arguments)}function _o(w,m){return il.apply(this,arguments)}function il(){return(il=(0,l.Z)(function*(w,m){const y=St(w),b=yield Nc(y,{token:m,returnSecureToken:!0}),M=yield Nr._fromIdTokenResponse(y,"signIn",b);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class sa{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Ne._fromServerResponse(m,y):tt(m,"internal-error")}}class Ne extends sa{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Ne(y)}}function en(w,m,y){var b;oe((null===(b=y.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),oe(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(oe(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(oe(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function Bh(w,m,y){return oa.apply(this,arguments)}function oa(){return(oa=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w),M={requestType:"PASSWORD_RESET",email:m};y&&en(b,M,y),yield Vh(b,M)})).apply(this,arguments)}function di(w,m,y){return aa.apply(this,arguments)}function aa(){return(aa=(0,l.Z)(function*(w,m,y){yield mr((0,$.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function Hl(w,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,l.Z)(function*(w,m){yield Lh((0,$.m9)(w),{oobCode:m})})).apply(this,arguments)}function jl(w,m){return la.apply(this,arguments)}function la(){return(la=(0,l.Z)(function*(w,m){const y=(0,$.m9)(w),b=yield mr(y,{oobCode:m}),M=b.requestType;switch(oe(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(b.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(b.mfaInfo,y,"internal-error");default:oe(b.email,y,"internal-error")}let F=null;return b.mfaInfo&&(F=sa._fromServerResponse(St(y),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function Hh(w,m){return rl.apply(this,arguments)}function rl(){return(rl=(0,l.Z)(function*(w,m){const{data:y}=yield jl((0,$.m9)(w),m);return y.email})).apply(this,arguments)}function Xp(w,m,y){return yo.apply(this,arguments)}function yo(){return(yo=(0,l.Z)(function*(w,m,y){const b=St(w),M=yield ar(b,{returnSecureToken:!0,email:m,password:y}),F=yield Nr._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(F.user),F})).apply(this,arguments)}function hi(w,m,y){return Xa((0,$.m9)(w),Vl.credential(m,y))}function Xr(w,m,y){return sl.apply(this,arguments)}function sl(){return(sl=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w),M={requestType:"EMAIL_SIGNIN",email:m};oe(y.handleCodeInApp,b,"argument-error"),y&&en(b,M,y),yield yr(b,M)})).apply(this,arguments)}function ol(w,m){return"EMAIL_SIGNIN"===ea.parseLink(m)?.operation}function vs(w,m,y){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w),M=Vl.credentialWithLink(m,y||$e());return oe(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Xa(b,M)})).apply(this,arguments)}function xu(w,m){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:createAuthUri",Qt(w,m))})).apply(this,arguments)}function jh(w,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,l.Z)(function*(w,m){const b={identifier:m,continueUri:ze()?$e():"http://localhost"},{signinMethods:M}=yield xu((0,$.m9)(w),b);return M||[]})).apply(this,arguments)}function Mu(w,m){return al.apply(this,arguments)}function al(){return(al=(0,l.Z)(function*(w,m){const y=(0,$.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&en(y.auth,M,m);const{email:F}=yield ms(y.auth,M);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function ku(w,m,y){return ll.apply(this,arguments)}function ll(){return(ll=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&en(b.auth,F,y);const{email:ie}=yield bu(b.auth,F);ie!==w.email&&(yield w.reload())})).apply(this,arguments)}function Lc(w,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,l.Z)(function*(w,m){return zt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Gh(w,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,l.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const b=(0,$.m9)(w),F={idToken:yield b.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},ie=yield Ft(b,Lc(b.auth,F));b.displayName=ie.displayName||null,b.photoURL=ie.photoUrl||null;const ke=b.providerData.find(({providerId:lt})=>"password"===lt);ke&&(ke.displayName=b.displayName,ke.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ie)})).apply(this,arguments)}function $h(w,m){return Bs((0,$.m9)(w),m,null)}function Vc(w,m){return Bs((0,$.m9)(w),null,m)}function Bs(w,m,y){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,l.Z)(function*(w,m,y){const{auth:b}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(F.email=m),y&&(F.password=y);const ie=yield Ft(w,Cu(b,F));yield w._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class Vn{constructor(m,y,b={}){this.isNewUser=m,this.providerId=y,this.profile=b}}class ws extends Vn{constructor(m,y,b,M){super(m,y,b),this.username=M}}class Un extends Vn{constructor(m,y){super(m,"facebook.com",y)}}class Bc extends ws{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Ou extends Vn{constructor(m,y){super(m,"google.com",y)}}class zh extends ws{constructor(m,y,b){super(m,"twitter.com",y,b)}}function Ru(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Uc(w){var m,y;if(!w)return null;const{providerId:b}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&w?.idToken){const ie=null===(y=null===(m=Ct(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(ie)return new Vn(F,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!b)return null;switch(b){case"facebook.com":return new Un(F,M);case"github.com":return new Bc(F,M);case"google.com":return new Ou(F,M);case"twitter.com":return new zh(F,M,w.screenName||null);case"custom":case"anonymous":return new Vn(F,null);default:return new Vn(F,b,M)}}(y)}class Cr{constructor(m,y,b){this.type=m,this.credential=y,this.auth=b}static _fromIdtoken(m,y){return new Cr("enroll",m,y)}static _fromMfaPendingCredential(m){return new Cr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,b;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Cr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(b=m.multiFactorSession)&&void 0!==b&&b.idToken)return Cr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Fu{constructor(m,y,b){this.session=m,this.hints=y,this.signInResolver=b}static _fromError(m,y){const b=St(m),M=y.customData._serverResponse,F=(M.mfaInfo||[]).map(ke=>sa._fromServerResponse(b,ke));oe(M.mfaPendingCredential,b,"internal-error");const ie=Cr._fromMfaPendingCredential(M.mfaPendingCredential);return new Fu(ie,F,function(){var ke=(0,l.Z)(function*(lt){const xt=yield lt._process(b,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const tn=Object.assign(Object.assign({},M),{idToken:xt.idToken,refreshToken:xt.refreshToken});switch(y.operationType){case"signIn":const wn=yield Nr._fromIdTokenResponse(b,y.operationType,tn);return yield b._updateCurrentUser(wn.user),wn;case"reauthenticate":return oe(y.user,b,"internal-error"),Nr._forOperation(y.user,y.operationType,tn);default:tt(b,"internal-error")}});return function(lt){return ke.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,l.Z)(function*(){return y.signInResolver(m)})()}}function Gc(w,m){var y;const b=(0,$.m9)(w),M=m;return oe(m.customData.operationType,b,"argument-error"),oe(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,b,"argument-error"),Fu._fromError(b,M)}function Yn(w,m){return zt(w,"POST","/v2/accounts/mfaEnrollment:start",Qt(w,m))}class Wl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(b=>sa._fromServerResponse(m.auth,b)))})}static _fromUser(m){return new Wl(m)}getSession(){var m=this;return(0,l.Z)(function*(){return Cr._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,y){var b=this;return(0,l.Z)(function*(){const M=m,F=yield b.getSession(),ie=yield Ft(b.user,M._process(b.user.auth,F,y));return yield b.user._updateTokensIfNecessary(ie),b.user.reload()})()}unenroll(m){var y=this;return(0,l.Z)(function*(){var b;const M="string"==typeof m?m:m.uid,F=yield y.user.getIdToken(),ie=yield Ft(y.user,function zl(w,m){return zt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(w,m))}(y.user.auth,{idToken:F,mfaEnrollmentId:M}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ke})=>ke!==M),yield y.user._updateTokensIfNecessary(ie);try{yield y.user.reload()}catch(ke){if("auth/user-token-expired"!==(null===(b=ke)||void 0===b?void 0:b.code))throw ke}})()}}const Wh=new WeakMap;function cl(w){const m=(0,$.m9)(w);return Wh.has(m)||Wh.set(m,Wl._fromUser(m)),Wh.get(m)}const Es="__sak";class dl{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const fi=(()=>{class w extends dl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,b)=>this.onStorageEvent(y,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Lu(){const w=(0,$.z$)();return H(w)||je(w)}()&&function ps(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),F=this.localCache[b];M!==F&&y(b,F,M)}}onStorageEvent(y,b=!1){if(!y.key)return void this.forAllChangedKeys((ke,lt,xt)=>{this.notifyListeners(ke,xt)});const M=y.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ke=this.storage.getItem(M);if(y.newValue!==ke)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!b)return}const F=()=>{const ke=this.storage.getItem(M);!b&&this.localCache[M]===ke||this.notifyListeners(M,ke)},ie=this.storage.getItem(M);!function Ht(){return(0,$.w1)()&&10===document.documentMode}()||ie===y.newValue||y.newValue===y.oldValue?F():setTimeout(F,10)}notifyListeners(y,b){this.localCache[y]=b;const M=this.listeners[y];if(M)for(const F of Array.from(M))F(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,b){var M=()=>super._set,F=this;return(0,l.Z)(function*(){yield M().call(F,y,b),F.localCache[y]=JSON.stringify(b)})()}_get(y){var b=()=>super._get,M=this;return(0,l.Z)(function*(){const F=yield b().call(M,y);return M.localCache[y]=JSON.stringify(F),F})()}_remove(y){var b=()=>super._remove,M=this;return(0,l.Z)(function*(){yield b().call(M,y),delete M.localCache[y]})()}}return w.type="LOCAL",w})(),js=(()=>{class w extends dl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,b){}_removeListener(y,b){}}return w.type="SESSION",w})();let fl=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const b=this.receivers.find(F=>F.isListeningto(y));if(b)return b;const M=new w(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var b=this;return(0,l.Z)(function*(){const M=y,{eventId:F,eventType:ie,data:ke}=M.data,lt=b.handlersMap[ie];if(!lt?.size)return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:ie});const xt=Array.from(lt).map(function(){var wn=(0,l.Z)(function*(Ji){return Ji(M.origin,ke)});return function(Ji){return wn.apply(this,arguments)}}()),tn=yield function Vu(w){return Promise.all(w.map(function(){var m=(0,l.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(b){return{fulfilled:!1,reason:b}}});return function(y){return m.apply(this,arguments)}}()))}(xt);M.ports[0].postMessage({status:"done",eventId:F,eventType:ie,response:tn})})()}_subscribe(y,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(b)}_unsubscribe(y,b){this.handlersMap[y]&&b&&this.handlersMap[y].delete(b),(!b||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function pa(w="",m=10){let y="";for(let b=0;b<m;b++)y+=Math.floor(10*Math.random());return w+y}class Zh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,b=50){var M=this;return(0,l.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ie,ke;return new Promise((lt,xt)=>{const tn=pa("",20);F.port1.start();const wn=setTimeout(()=>{xt(new Error("unsupported_event"))},b);ke={messageChannel:F,onMessage(Ji){const ss=Ji;if(ss.data.eventId===tn)switch(ss.data.status){case"ack":clearTimeout(wn),ie=setTimeout(()=>{xt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),lt(ss.data.response);break;default:clearTimeout(wn),clearTimeout(ie),xt(new Error("invalid_response"))}}},M.handlers.add(ke),F.port1.addEventListener("message",ke.onMessage),M.target.postMessage({eventType:m,eventId:tn,data:y},[F.port2])}).finally(()=>{ke&&M.removeMessageHandler(ke)})})()}}function Qn(){return window}function lr(){return typeof Qn().WorkerGlobalScope<"u"&&"function"==typeof Qn().importScripts}function Cs(){return(Cs=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pl="firebaseLocalStorageDb",gl="firebaseLocalStorage",ga="fbase_key";class wo{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function ma(w,m){return w.transaction([gl],m?"readwrite":"readonly").objectStore(gl)}function Kl(){const w=indexedDB.open(pl,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(gl,{keyPath:ga})}catch(M){y(M)}}),w.addEventListener("success",(0,l.Z)(function*(){const b=w.result;b.objectStoreNames.contains(gl)?m(b):(b.close(),yield function qc(){const w=indexedDB.deleteDatabase(pl);return new wo(w).toPromise()}(),m(yield Kl()))}))})}function ml(w,m,y){return es.apply(this,arguments)}function es(){return(es=(0,l.Z)(function*(w,m,y){const b=ma(w,!0).put({[ga]:m,value:y});return new wo(b).toPromise()})).apply(this,arguments)}function _a(){return(_a=(0,l.Z)(function*(w,m){const y=ma(w,!1).get(m),b=yield new wo(y).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Zl(w,m){const y=ma(w,!0).delete(m);return new wo(y).toPromise()}const va=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,l.Z)(function*(){return y.db||(y.db=yield Kl()),y.db})()}_withRetries(y){var b=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const F=yield b._openDb();return yield y(F)}catch(F){if(M++>3)throw F;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,l.Z)(function*(){return lr()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,l.Z)(function*(){y.receiver=fl._getInstance(function ql(){return lr()?self:null}()),y.receiver._subscribe("keyChanged",function(){var b=(0,l.Z)(function*(M,F){return{keyProcessed:(yield y._poll()).includes(F.key)}});return function(M,F){return b.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var b=(0,l.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return b.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,l.Z)(function*(){var b,M;if(y.activeServiceWorker=yield function Wc(){return Cs.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Zh(y.activeServiceWorker);const F=yield y.sender._send("ping",{},800);!F||(null===(b=F[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=F[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var b=this;return(0,l.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Uu(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:y},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Kl();return yield ml(y,Es,"1"),yield Zl(y,Es),!0}catch{}return!1})()}_withPendingWrite(y){var b=this;return(0,l.Z)(function*(){b.pendingWrites++;try{yield y()}finally{b.pendingWrites--}})()}_set(y,b){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(F=>ml(F,y,b)),M.localCache[y]=b,M.notifyServiceWorker(y)}))})()}_get(y){var b=this;return(0,l.Z)(function*(){const M=yield b._withRetries(F=>function Yh(w,m){return _a.apply(this,arguments)}(F,y));return b.localCache[y]=M,M})()}_remove(y){var b=this;return(0,l.Z)(function*(){return b._withPendingWrite((0,l.Z)(function*(){return yield b._withRetries(M=>Zl(M,y)),delete b.localCache[y],b.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,l.Z)(function*(){const b=yield y._withRetries(ie=>{const ke=ma(ie,!1).getAll();return new wo(ke).toPromise()});if(!b)return[];if(0!==y.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:ie,value:ke}of b)F.add(ie),JSON.stringify(y.localCache[ie])!==JSON.stringify(ke)&&(y.notifyListeners(ie,ke),M.push(ie));for(const ie of Object.keys(y.localCache))y.localCache[ie]&&!F.has(ie)&&(y.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(y,b){this.localCache[y]=b;const M=this.listeners[y];if(M)for(const F of Array.from(M))F(b)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(b)}_removeListener(y,b){this.listeners[y]&&(this.listeners[y].delete(b),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Qh(w,m){return zt(w,"POST","/v2/accounts/mfaSignIn:start",Qt(w,m))}function Bi(){return(Bi=(0,l.Z)(function*(w){return(yield zt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Eo(w){return new Promise((m,y)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=m,b.onerror=M=>{const F=Ve("internal-error");F.customData=M,y(F)},b.type="text/javascript",b.charset="UTF-8",function Ea(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(b)})}function Ca(w){return`__${w}${Math.floor(1e6*Math.random())}`}const ts=1e12;class Kc{constructor(m){this.auth=m,this.counter=ts,this._widgets=new Map}render(m,y){const b=this.counter;return this._widgets.set(b,new On(m,this.auth.name,y||{})),this.counter++,b}reset(m){var y;const b=m||ts;null===(y=this._widgets.get(b))||void 0===y||y.delete(),this._widgets.delete(b)}getResponse(m){var y;return(null===(y=this._widgets.get(m||ts))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,l.Z)(function*(){var b;return null===(b=y._widgets.get(m||ts))||void 0===b||b.execute(),""})()}}class On{constructor(m,y,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;oe(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eg(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jh=Ca("rcb"),_E=new Qe(3e4,6e4);class j_{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Qn().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return oe(function Xh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Qn().grecaptcha):new Promise((b,M)=>{const F=Qn().setTimeout(()=>{M(Ve(m,"network-request-failed"))},_E.get());Qn()[Jh]=()=>{Qn().clearTimeout(F),delete Qn()[Jh];const ke=Qn().grecaptcha;if(!ke)return void M(Ve(m,"internal-error"));const lt=ke.render;ke.render=(xt,tn)=>{const wn=lt(xt,tn);return this.counter++,wn},this.hostLanguage=y,b(ke)},Eo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Jh,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(F),M(Ve(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=Qn().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class yE{load(m){return(0,l.Z)(function*(){return new Kc(m)})()}clearedOneInstance(){}}const Ql="recaptcha",vE={theme:"light",type:"image"};class G_{constructor(m,y=Object.assign({},vE),b){this.parameters=y,this.type=Ql,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=St(b),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;oe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new yE:new j_,this.validateStartingState()}verify(){var m=this;return(0,l.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),b=m.getAssertedRecaptcha();return b.getResponse(y)||new Promise(F=>{const ie=ke=>{!ke||(m.tokenChangeListeners.delete(ie),F(ke))};m.tokenChangeListeners.add(ie),m.isInvisible&&b.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(b=>b(y)),"function"==typeof m)m(y);else if("string"==typeof m){const b=Qn()[m];"function"==typeof b&&b(y)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,l.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const b=document.createElement("div");y.appendChild(b),y=b}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,l.Z)(function*(){oe(ze()&&!lr(),m.auth,"internal-error"),yield function Ci(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function Yl(w){return Bi.apply(this,arguments)}(m.auth);oe(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class dn{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=Xo._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function ns(w,m,y){return ft.apply(this,arguments)}function ft(){return(ft=(0,l.Z)(function*(w,m,y){const b=St(w),M=yield bi(b,m,(0,$.m9)(y));return new dn(M,F=>Xa(b,F))})).apply(this,arguments)}function Qi(w,m,y){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w);yield Jr(!1,b,"phone");const M=yield bi(b.auth,m,(0,$.m9)(y));return new dn(M,F=>Ut(b,F))})).apply(this,arguments)}function bs(w,m,y){return Co.apply(this,arguments)}function Co(){return(Co=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w),M=yield bi(b.auth,m,(0,$.m9)(y));return new dn(M,F=>Jp(b,F))})).apply(this,arguments)}function bi(w,m,y){return bo.apply(this,arguments)}function bo(){return(bo=(0,l.Z)(function*(w,m,y){var b;const M=yield y.verify();try{let F;if(oe("string"==typeof M,w,"argument-error"),oe(y.type===Ql,w,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const ie=F.session;if("phoneNumber"in F)return oe("enroll"===ie.type,w,"internal-error"),(yield Yn(w,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{oe("signin"===ie.type,w,"internal-error");const ke=(null===(b=F.multiFactorHint)||void 0===b?void 0:b.uid)||F.multiFactorUid;return oe(ke,w,"missing-multi-factor-info"),(yield Qh(w,{mfaPendingCredential:ie.credential,mfaEnrollmentId:ke,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield qp(w,{phoneNumber:F.phoneNumber,recaptchaToken:M});return ie}}finally{y._reset()}})).apply(this,arguments)}function Zc(w,m){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,l.Z)(function*(w,m){yield Bl((0,$.m9)(w),m)})).apply(this,arguments)}let ef=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=St(y)}verifyPhoneNumber(y,b){return bi(this.auth,y,(0,$.m9)(b))}static credential(y,b){return Xo._fromVerification(y,b)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:b,temporaryProof:M}=y;return b&&M?Xo._fromTokenResponse(b,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Io(w,m){return m?ne(m):(oe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ju extends rr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return go(m,this._buildIdpRequest())}_linkToIdToken(m,y){return go(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return go(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function To(w){return Au(w.auth,new ju(w),w.bypassAuthState)}function ht(w){const{auth:m,user:y}=w;return oe(y,m,"internal-error"),Du(y,new ju(w),w.bypassAuthState)}function _l(w){return is.apply(this,arguments)}function is(){return(is=(0,l.Z)(function*(w){const{auth:m,user:y}=w;return oe(y,m,"internal-error"),Bl(y,new ju(w),w.bypassAuthState)})).apply(this,arguments)}class Jl{constructor(m,y,b,M,F=!1){this.auth=m,this.resolver=b,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,l.Z)(function*(b,M){m.pendingPromise={resolve:b,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(b,M){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,l.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:F,tenantId:ie,error:ke,type:lt}=m;if(ke)return void y.reject(ke);const xt={auth:y.auth,requestUri:b,sessionId:M,tenantId:ie||void 0,postBody:F||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(lt)(xt))}catch(tn){y.reject(tn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return To;case"linkViaPopup":case"linkViaRedirect":return _l;case"reauthViaPopup":case"reauthViaRedirect":return ht;default:tt(this.auth,"internal-error")}}resolve(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yl=new Qe(2e3,1e4);function Gn(w,m,y){return vl.apply(this,arguments)}function vl(){return(vl=(0,l.Z)(function*(w,m,y){const b=St(w);Ie(w,m,Mi);const M=Io(b,y);return new wl(b,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function Xl(w,m,y){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w);Ie(b.auth,m,Mi);const M=Io(b.auth,y);return new wl(b.auth,"reauthViaPopup",m,M,b).executeNotNull()})).apply(this,arguments)}function tf(w,m,y){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w);Ie(b.auth,m,Mi);const M=Io(b.auth,y);return new wl(b.auth,"linkViaPopup",m,M,b).executeNotNull()})).apply(this,arguments)}let wl=(()=>{class w extends Jl{constructor(y,b,M,F,ie){super(y,b,F,ie),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,l.Z)(function*(){const b=yield y.execute();return oe(b,y.auth,"internal-error"),b})()}onExecution(){var y=this;return(0,l.Z)(function*(){we(1===y.filter.length,"Popup operations only handle one event");const b=pa();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],b),y.authWindow.associatedEvent=b,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(Ve(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var b,M;this.pollId=null!==(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,yl.get())};y()}}return w.currentPopupAction=null,w})();const ur=new Map;class So extends Jl{constructor(m,y,b=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,b),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,l.Z)(function*(){let b=ur.get(y.auth._key());if(!b){try{const F=(yield function Gu(w,m){return $s.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;b=()=>Promise.resolve(F)}catch(M){b=()=>Promise.reject(M)}ur.set(y.auth._key(),b)}return y.bypassAuthState||ur.set(y.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,b=this;return(0,l.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(b,m);if("unknown"!==m.type){if(m.eventId){const M=yield b.auth._redirectUserForId(m.eventId);if(M)return b.user=M,y().call(b,m);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function $s(){return($s=(0,l.Z)(function*(w,m){const y=Ts(m),b=Do(w);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(y));return yield b._remove(y),M})).apply(this,arguments)}function cr(w,m){return Is.apply(this,arguments)}function Is(){return(Is=(0,l.Z)(function*(w,m){return Do(w)._set(Ts(m),"true")})).apply(this,arguments)}function zs(){ur.clear()}function si(w,m){ur.set(w._key(),m)}function Do(w){return ne(w._redirectPersistence)}function Ts(w){return z("pendingRedirect",w.config.apiKey,w.name)}function Jn(w,m,y){return function Ln(w,m,y){return Sa.apply(this,arguments)}(w,m,y)}function Sa(){return(Sa=(0,l.Z)(function*(w,m,y){const b=St(w);Ie(w,m,Mi);const M=Io(b,y);return yield cr(M,b),M._openRedirect(b,m,"signInViaRedirect")})).apply(this,arguments)}function S(w,m,y){return function D(w,m,y){return k.apply(this,arguments)}(w,m,y)}function k(){return(k=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w);Ie(b.auth,m,Mi);const M=Io(b.auth,y);yield cr(M,b.auth);const F=yield Vt(b);return M._openRedirect(b.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function j(w,m,y){return function te(w,m,y){return le.apply(this,arguments)}(w,m,y)}function le(){return(le=(0,l.Z)(function*(w,m,y){const b=(0,$.m9)(w);Ie(b.auth,m,Mi);const M=Io(b.auth,y);yield Jr(!1,b,m.providerId),yield cr(M,b.auth);const F=yield Vt(b);return M._openRedirect(b.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function Me(w,m){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,l.Z)(function*(w,m){return yield St(w)._initializationPromise,mt(w,m,!1)})).apply(this,arguments)}function mt(w,m){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,l.Z)(function*(w,m,y=!1){const b=St(w),M=Io(b,m),ie=yield new So(b,M,y).execute();return ie&&!y&&(delete ie.user._redirectEventId,yield b._persistUserIfCurrent(ie.user),yield b._setRedirectUser(null,m)),ie})).apply(this,arguments)}function Vt(w){return It.apply(this,arguments)}function It(){return(It=(0,l.Z)(function*(w){const m=pa(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Ii{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(m,b)&&(y=!0,this.sendToConsumer(m,b),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function jt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ws(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var b;if(m.error&&!Ws(m)){const M=(null===(b=m.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";y.onError(Ve(this.auth,M))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const b=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&b}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Da(m))}saveEventToCache(m){this.cachedEventUids.add(Da(m)),this.lastProcessedEventTime=Date.now()}}function Da(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Ws({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Lr(w){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,l.Z)(function*(w,m={}){return zt(w,"GET","/v1/projects",m)})).apply(this,arguments)}const rs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Aa=/^https?/;function dr(){return(dr=(0,l.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Lr(w);for(const y of m)try{if($_(y))return}catch{}tt(w,"unauthorized-domain")})).apply(this,arguments)}function $_(w){const m=$e(),{protocol:y,hostname:b}=new URL(m);if(w.startsWith("chrome-extension://")){const ie=new URL(w);return""===ie.hostname&&""===b?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&ie.hostname===b}if(!Aa.test(y))return!1;if(rs.test(w))return b===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const tg=new Qe(3e4,6e4);function nf(){const w=Qn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let ei=null;function xo(w){return ei=ei||function wE(w){return new Promise((m,y)=>{var b,M,F;function ie(){nf(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{nf(),y(Ve(w,"network-request-failed"))},timeout:tg.get()})}if(null!==(M=null===(b=Qn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(F=Qn().gapi)||void 0===F||!F.load){const ke=Ca("iframefcb");return Qn()[ke]=()=>{gapi.load?ie():y(Ve(w,"network-request-failed"))},Eo(`https://apis.google.com/js/api.js?onload=${ke}`).catch(lt=>y(lt))}ie()}}).catch(m=>{throw ei=null,m})}(w),ei}const rf=new Qe(5e3,15e3),sf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function af(w){const m=w.config;oe(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?_n(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,b={apiKey:m.apiKey,appName:w.name,v:P.SDK_VERSION},M=z_.get(w.config.apiHost);M&&(b.eid=M);const F=w._getFrameworks();return F.length&&(b.fw=F.join(",")),`${y}?${(0,$.xO)(b).slice(1)}`}function Jc(){return Jc=(0,l.Z)(function*(w){const m=yield xo(w),y=Qn().gapi;return oe(y,w,"internal-error"),m.open({where:document.body,url:af(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sf,dontclear:!0},b=>new Promise(function(){var M=(0,l.Z)(function*(F,ie){yield b.restyle({setHideOnLeave:!1});const ke=Ve(w,"network-request-failed"),lt=Qn().setTimeout(()=>{ie(ke)},rf.get());function xt(){Qn().clearTimeout(lt),F(b)}b.ping(xt).then(xt,()=>{ie(ke)})});return function(F,ie){return M.apply(this,arguments)}}()))}),Jc.apply(this,arguments)}const $u={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zu{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eu(w,m,y,b,M,F){oe(w.config.authDomain,w,"auth-domain-config-required"),oe(w.config.apiKey,w,"invalid-api-key");const ie={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:b,v:P.SDK_VERSION,eventId:M};if(m instanceof Mi){m.setDefaultLanguage(w.languageCode),ie.providerId=m.providerId||"",(0,$.xb)(m.getCustomParameters())||(ie.customParameters=JSON.stringify(m.getCustomParameters()));for(const[lt,xt]of Object.entries(F||{}))ie[lt]=xt}if(m instanceof ta){const lt=m.getScopes().filter(xt=>""!==xt);lt.length>0&&(ie.scopes=lt.join(","))}w.tenantId&&(ie.tid=w.tenantId);const ke=ie;for(const lt of Object.keys(ke))void 0===ke[lt]&&delete ke[lt];return`${function sg({config:w}){return w.emulator?_n(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(ke).slice(1)}`}const tu="webStorageSupport",uf=class Wu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=js,this._completeRedirectFn=mt,this._overrideRedirectResult=si}_openPopup(m,y,b,M){var F=this;return(0,l.Z)(function*(){var ie;we(null===(ie=F.eventManagers[m._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const ke=eu(m,y,b,$e(),M);return function ed(w,m,y,b=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-b)/2,0).toString();let ke="";const lt=Object.assign(Object.assign({},$u),{width:b.toString(),height:M.toString(),top:F,left:ie}),xt=(0,$.z$)().toLowerCase();y&&(ke=re(xt)?"_blank":y),O(xt)&&(m=m||"http://localhost",lt.scrollbars="yes");const tn=Object.entries(lt).reduce((Ji,[ss,nd])=>`${Ji}${ss}=${nd},`,"");if(function yn(w=(0,$.z$)()){var m;return je(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(xt)&&"_self"!==ke)return function ko(w,m){const y=document.createElement("a");y.href=w,y.target=m;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(b)}(m||"",ke),new zu(null);const wn=window.open(m||"",ke,tn);oe(wn,w,"popup-blocked");try{wn.focus()}catch{}return new zu(wn)}(m,ke,pa())})()}_openRedirect(m,y,b,M){var F=this;return(0,l.Z)(function*(){return yield F._originValidation(m),function zc(w){Qn().location.href=w}(eu(m,y,b,$e(),M)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:M,promise:F}=this.eventManagers[y];return M?Promise.resolve(M):(we(F,"If manager is not set, promise should be"),F)}const b=this.initAndGetManager(m);return this.eventManagers[y]={promise:b},b.catch(()=>{delete this.eventManagers[y]}),b}initAndGetManager(m){var y=this;return(0,l.Z)(function*(){const b=yield function ig(w){return Jc.apply(this,arguments)}(m),M=new Ii(m);return b.register("authEvent",F=>(oe(F?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:M},y.iframes[m._key()]=b,M})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(tu,{type:tu},M=>{var F;const ie=null===(F=M?.[0])||void 0===F?void 0:F[tu];void 0!==ie&&y(!!ie),tt(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ao(w){return dr.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return vn()||H()||je()}};class cf extends class td{constructor(m){this.factorId=m}_process(m,y,b){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,b);case"signin":return this._finalizeSignIn(m,y.credential);default:return de("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new cf(m)}_finalizeEnroll(m,y,b){return function $l(w,m){return zt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(w,m))}(m,{idToken:y,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function wa(w,m){return zt(w,"POST","/v2/accounts/mfaSignIn:finalize",Qt(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qs=(()=>{class w{constructor(){}static assertion(y){return cf._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var Oo="@firebase/auth",df="0.20.11";class W_{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,l.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(b=>{var M;m((null===(M=b)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function bE(w){(0,P._registerComponent)(new _e.wA("auth",(m,{options:y})=>{const b=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:F,authDomain:ie}=b.options;return((ke,lt)=>{oe(F&&!F.includes(":"),"invalid-api-key",{appName:ke.name}),oe(!ie?.includes(":"),"argument-error",{appName:ke.name});const xt={apiKey:F,authDomain:ie,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kn(w)},tn=new Yo(ke,lt,xt);return function ue(w,m){const y=m?.persistence||[],b=(Array.isArray(y)?y:[y]).map(ne);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(b,m?.popupRedirectResolver)}(tn,y),tn})(b,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,b)=>{m.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new _e.wA("auth-internal",m=>{const y=St(m.getProvider("auth").getImmediate());return new W_(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Oo,df,function CE(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(Oo,df,"esm2017")}("Browser")},2090:(yt,Oe,U)=>{U.d(Oe,{$s:()=>ot,BH:()=>qt,DV:()=>Kn,Dv:()=>Ki,G6:()=>Ie,GJ:()=>Yr,L:()=>fe,LL:()=>un,Pz:()=>hn,Sg:()=>Qe,UG:()=>Se,UI:()=>Qr,US:()=>_e,Wj:()=>Ot,Wl:()=>xi,Yr:()=>Re,ZB:()=>W,ZR:()=>xn,aH:()=>Et,b$:()=>me,cI:()=>zt,dS:()=>Bt,eu:()=>oe,g5:()=>P,gK:()=>ni,gQ:()=>Dn,h$:()=>ge,hl:()=>Ye,hu:()=>$,jU:()=>at,lb:()=>Vi,m9:()=>ln,ne:()=>Mn,p$:()=>K,pd:()=>ao,r3:()=>qi,ru:()=>Ce,tV:()=>ve,uI:()=>Fe,ug:()=>ir,vZ:()=>nt,w1:()=>tt,w9:()=>Zr,xO:()=>Sn,xb:()=>Rr,z$:()=>qe,zI:()=>de,zd:()=>Ei});const $=function(q,z){if(!q)throw P(z)},P=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},ae=function(q){const z=[];let J=0;for(let G=0;G<q.length;G++){let O=q.charCodeAt(G);O<128?z[J++]=O:O<2048?(z[J++]=O>>6|192,z[J++]=63&O|128):55296==(64512&O)&&G+1<q.length&&56320==(64512&q.charCodeAt(G+1))?(O=65536+((1023&O)<<10)+(1023&q.charCodeAt(++G)),z[J++]=O>>18|240,z[J++]=O>>12&63|128,z[J++]=O>>6&63|128,z[J++]=63&O|128):(z[J++]=O>>12|224,z[J++]=O>>6&63|128,z[J++]=63&O|128)}return z},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,z){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let O=0;O<q.length;O+=3){const H=q[O],re=O+1<q.length,Le=re?q[O+1]:0,ut=O+2<q.length,dt=ut?q[O+2]:0;let Lt=(15&Le)<<2|dt>>6,yn=63&dt;ut||(yn=64,re||(Lt=64)),G.push(J[H>>2],J[(3&H)<<4|Le>>4],J[Lt],J[yn])}return G.join("")},encodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(q):this.encodeByteArray(ae(q),z)},decodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(q):function(q){const z=[];let J=0,G=0;for(;J<q.length;){const O=q[J++];if(O<128)z[G++]=String.fromCharCode(O);else if(O>191&&O<224){const H=q[J++];z[G++]=String.fromCharCode((31&O)<<6|63&H)}else if(O>239&&O<365){const ut=((7&O)<<18|(63&q[J++])<<12|(63&q[J++])<<6|63&q[J++])-65536;z[G++]=String.fromCharCode(55296+(ut>>10)),z[G++]=String.fromCharCode(56320+(1023&ut))}else{const H=q[J++],re=q[J++];z[G++]=String.fromCharCode((15&O)<<12|(63&H)<<6|63&re)}}return z.join("")}(this.decodeStringToByteArray(q,z))},decodeStringToByteArray(q,z){this.init_();const J=z?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let O=0;O<q.length;){const H=J[q.charAt(O++)],Le=O<q.length?J[q.charAt(O)]:0;++O;const dt=O<q.length?J[q.charAt(O)]:64;++O;const je=O<q.length?J[q.charAt(O)]:64;if(++O,null==H||null==Le||null==dt||null==je)throw Error();G.push(H<<2|Le>>4),64!==dt&&(G.push(Le<<4&240|dt>>2),64!==je&&G.push(dt<<6&192|je))}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},ge=function(q){const z=ae(q);return _e.encodeByteArray(z,!0)},fe=function(q){return ge(q).replace(/\./g,"")},ve=function(q){try{return _e.decodeString(q,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function K(q){return W(void 0,q)}function W(q,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return z}for(const J in z)!z.hasOwnProperty(J)||!ee(J)||(q[J]=W(q[J],z[J]));return q}function ee(q){return"__proto__"!==q}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function Se(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function at(){return"object"==typeof self&&self.self===self}function Ce(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function tt(){const q=qe();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Re(){return!1}function Ie(){return!Se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){return"object"==typeof indexedDB}function oe(){return new Promise((q,z)=>{try{let J=!0;const G="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(G);O.onsuccess=()=>{O.result.close(),J||self.indexedDB.deleteDatabase(G),q(!0)},O.onupgradeneeded=()=>{J=!1},O.onerror=()=>{var H;z((null===(H=O.error)||void 0===H?void 0:H.message)||"")}}catch(J){z(J)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ue=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=q&&ve(q[1]);return z&&JSON.parse(z)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},Et=()=>{var q;return null===(q=ue())||void 0===q?void 0:q.config},hn=q=>{var z;return null===(z=ue())||void 0===z?void 0:z[`_${q}`]};class qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,J)=>{this.resolve=z,this.reject=J})}wrapCallback(z){return(J,G)=>{J?this.reject(J):this.resolve(G),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(J):z(J,G))}}}function Qe(q,z){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const G=z||"demo-project",O=q.iat||0,H=q.sub||q.user_id;if(!H)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const re=Object.assign({iss:`https://securetoken.google.com/${G}`,aud:G,iat:O,exp:O+3600,auth_time:O,sub:H,user_id:H,firebase:{sign_in_provider:"custom",identities:{}}},q);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(re)),""].join(".")}class xn extends Error{constructor(z,J,G){super(J),this.code=z,this.customData=G,this.name="FirebaseError",Object.setPrototypeOf(this,xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}}class un{constructor(z,J,G){this.service=z,this.serviceName=J,this.errors=G}create(z,...J){const G=J[0]||{},O=`${this.service}/${z}`,H=this.errors[z],re=H?function cn(q,z){return q.replace(Qt,(J,G)=>{const O=z[G];return null!=O?String(O):`<${G}?>`})}(H,G):"Error";return new xn(O,`${this.serviceName}: ${re} (${O}).`,G)}}const Qt=/\{\$([^}]+)}/g;function zt(q){return JSON.parse(q)}function xi(q){return JSON.stringify(q)}const Kr=function(q){let z={},J={},G={},O="";try{const H=q.split(".");z=zt(ve(H[0])||""),J=zt(ve(H[1])||""),O=H[2],G=J.d||{},delete J.d}catch{}return{header:z,claims:J,data:G,signature:O}},Zr=function(q){const J=Kr(q).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Yr=function(q){const z=Kr(q).claims;return"object"==typeof z&&!0===z.admin};function qi(q,z){return Object.prototype.hasOwnProperty.call(q,z)}function Kn(q,z){if(Object.prototype.hasOwnProperty.call(q,z))return q[z]}function Rr(q){for(const z in q)if(Object.prototype.hasOwnProperty.call(q,z))return!1;return!0}function Qr(q,z,J){const G={};for(const O in q)Object.prototype.hasOwnProperty.call(q,O)&&(G[O]=z.call(J,q[O],O,q));return G}function nt(q,z){if(q===z)return!0;const J=Object.keys(q),G=Object.keys(z);for(const O of J){if(!G.includes(O))return!1;const H=q[O],re=z[O];if(ui(H)&&ui(re)){if(!nt(H,re))return!1}else if(H!==re)return!1}for(const O of G)if(!J.includes(O))return!1;return!0}function ui(q){return null!==q&&"object"==typeof q}function Sn(q){const z=[];for(const[J,G]of Object.entries(q))Array.isArray(G)?G.forEach(O=>{z.push(encodeURIComponent(J)+"="+encodeURIComponent(O))}):z.push(encodeURIComponent(J)+"="+encodeURIComponent(G));return z.length?"&"+z.join("&"):""}function Ei(q){const z={};return q.replace(/^\?/,"").split("&").forEach(G=>{if(G){const[O,H]=G.split("=");z[decodeURIComponent(O)]=decodeURIComponent(H)}}),z}function ao(q){const z=q.indexOf("?");if(!z)return"";const J=q.indexOf("#",z);return q.substring(z,J>0?J:void 0)}class Dn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,J){J||(J=0);const G=this.W_;if("string"==typeof z)for(let je=0;je<16;je++)G[je]=z.charCodeAt(J)<<24|z.charCodeAt(J+1)<<16|z.charCodeAt(J+2)<<8|z.charCodeAt(J+3),J+=4;else for(let je=0;je<16;je++)G[je]=z[J]<<24|z[J+1]<<16|z[J+2]<<8|z[J+3],J+=4;for(let je=16;je<80;je++){const Lt=G[je-3]^G[je-8]^G[je-14]^G[je-16];G[je]=4294967295&(Lt<<1|Lt>>>31)}let dt,xe,O=this.chain_[0],H=this.chain_[1],re=this.chain_[2],Le=this.chain_[3],ut=this.chain_[4];for(let je=0;je<80;je++){je<40?je<20?(dt=Le^H&(re^Le),xe=1518500249):(dt=H^re^Le,xe=1859775393):je<60?(dt=H&re|Le&(H|re),xe=2400959708):(dt=H^re^Le,xe=3395469782);const Lt=(O<<5|O>>>27)+dt+ut+xe+G[je]&4294967295;ut=Le,Le=re,re=4294967295&(H<<30|H>>>2),H=O,O=Lt}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+H&4294967295,this.chain_[2]=this.chain_[2]+re&4294967295,this.chain_[3]=this.chain_[3]+Le&4294967295,this.chain_[4]=this.chain_[4]+ut&4294967295}update(z,J){if(null==z)return;void 0===J&&(J=z.length);const G=J-this.blockSize;let O=0;const H=this.buf_;let re=this.inbuf_;for(;O<J;){if(0===re)for(;O<=G;)this.compress_(z,O),O+=this.blockSize;if("string"==typeof z){for(;O<J;)if(H[re]=z.charCodeAt(O),++re,++O,re===this.blockSize){this.compress_(H),re=0;break}}else for(;O<J;)if(H[re]=z[O],++re,++O,re===this.blockSize){this.compress_(H),re=0;break}}this.inbuf_=re,this.total_+=J}digest(){const z=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&J,J/=256;this.compress_(this.buf_);let G=0;for(let O=0;O<5;O++)for(let H=24;H>=0;H-=8)z[G]=this.chain_[O]>>H&255,++G;return z}}function Mn(q,z){const J=new bn(q,z);return J.subscribe.bind(J)}class bn{constructor(z,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{z(this)}).catch(G=>{this.error(G)})}next(z){this.forEachObserver(J=>{J.next(z)})}error(z){this.forEachObserver(J=>{J.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,J,G){let O;if(void 0===z&&void 0===J&&void 0===G)throw new Error("Missing Observer.");O=function bt(q,z){if("object"!=typeof q||null===q)return!1;for(const J of z)if(J in q&&"function"==typeof q[J])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:J,complete:G},void 0===O.next&&(O.next=Ft),void 0===O.error&&(O.error=Ft),void 0===O.complete&&(O.complete=Ft);const H=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),H}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,z)}sendOne(z,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{J(this.observers[z])}catch(G){typeof console<"u"&&console.error&&console.error(G)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ft(){}const Ki=function(q,z,J,G){let O;if(G<z?O="at least "+z:G>J&&(O=0===J?"none":"no more than "+J),O)throw new Error(q+" failed: Was called with "+G+(1===G?" argument.":" arguments.")+" Expects "+O+".")};function ni(q,z){return`${q} failed: ${z} argument `}function Ot(q,z,J,G){if((!G||J)&&"function"!=typeof J)throw new Error(ni(q,z)+"must be a valid function.")}function Vi(q,z,J,G){if((!G||J)&&("object"!=typeof J||null===J))throw new Error(ni(q,z)+"must be a valid context object.")}const Bt=function(q){const z=[];let J=0;for(let G=0;G<q.length;G++){let O=q.charCodeAt(G);if(O>=55296&&O<=56319){const H=O-55296;G++,$(G<q.length,"Surrogate pair missing trail surrogate."),O=65536+(H<<10)+(q.charCodeAt(G)-56320)}O<128?z[J++]=O:O<2048?(z[J++]=O>>6|192,z[J++]=63&O|128):O<65536?(z[J++]=O>>12|224,z[J++]=O>>6&63|128,z[J++]=63&O|128):(z[J++]=O>>18|240,z[J++]=O>>12&63|128,z[J++]=O>>6&63|128,z[J++]=63&O|128)}return z},ir=function(q){let z=0;for(let J=0;J<q.length;J++){const G=q.charCodeAt(J);G<128?z++:G<2048?z+=2:G>=55296&&G<=56319?(z+=4,J++):z+=3}return z};function ot(q,z=1e3,J=2){const G=z*Math.pow(J,q),O=Math.round(.5*G*(Math.random()-.5)*2);return Math.min(144e5,G+O)}function ln(q){return q&&q._delegate?q._delegate:q}},7336:(yt,Oe,U)=>{var l=U(4650);let $=null;function P(){return $}const ge=new l.OlP("DocumentToken");let fe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ve(){return(0,l.LFG)(W)}()},providedIn:"platform"}),n})();const K=new l.OlP("Location Initialized");let W=(()=>{class n extends fe{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ee()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ee()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function qe(){return new W((0,l.LFG)(ge))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Fe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Se(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(it)},providedIn:"root"}),n})();const me=new l.OlP("appBaseHref");let it=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Fe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+at(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const u=this.prepareExternalUrl(r+at(s));this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,s){const u=this.prepareExternalUrl(r+at(s));this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fe),l.LFG(me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tt=(()=>{class n extends Ce{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Fe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let u=this.prepareExternalUrl(r+at(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,s){let u=this.prepareExternalUrl(r+at(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(fe),l.LFG(me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Se(Ye(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+at(i))}normalize(e){return n.stripTrailingSlash(function Ie(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ye(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=at,n.joinWithSlash=Fe,n.stripTrailingSlash=Se,n.\u0275fac=function(e){return new(e||n)(l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Re(){return new Ve((0,l.LFG)(Ce))}()},providedIn:"root"}),n})();function Ye(n){return n.replace(/\/index.html$/,"")}let Jt=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class fo{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _r=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new fo(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,u),po(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{po(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function po(n,t){n.context.$implicit=t.item}let gn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Vh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ci("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ci("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Vh{constructor(){this.$implicit=null,this.ngIf=null}}function ci(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}let or=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),u=-1===r.indexOf("-")?void 0:l.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,u):this._renderer.removeStyle(this._ngEl.nativeElement,r,u)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Zi=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:u}=this;this._viewRef=i.createEmbeddedView(r,s,u?{injector:u}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.TTD]}),n})(),Ui=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function ia(n){return"server"===n}let Rc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Uh((0,l.LFG)(ge),window)}),n})();class Uh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ki(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const u=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Pr(this.window.history)||Pr(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Pr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Bs extends class Vc extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){$||($=n)}(new Bs)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Uc(){return Hs=Hs||document.querySelector("base"),Hs?Hs.getAttribute("href"):null}();return null==e?null:function ws(n){Vn=Vn||document.createElement("a"),Vn.setAttribute("href",n);const t=Vn.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Cu(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Vn,Hs=null;const Un=new l.OlP("TRANSITION_ID"),Ou=[{provide:l.ip1,useFactory:function Bc(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=P(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Un,ge,l.zs3],multi:!0}];let Ru=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Nu=new l.OlP("EventManagerPlugins");let Pu=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const u=r[s];if(u.supports(e))return this._eventNameToPlugin.set(e,u),u}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Nu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Gl{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=P().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let da=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),ha=(()=>{class n extends da{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,r.push(i.appendChild(u))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Hc),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Hc))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Hc(n){P().remove(n)}const fa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jc=/%COMP%/g;function zl(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?zl(n,r,e):(r=r.replace(jc,n),e.push(r))}return e}function Wl(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let cl=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Es(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new $c(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new qh(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=zl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Pu),l.LFG(ha),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Es{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(fa[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(hl(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(hl(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=fa[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=fa[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Wl(i)):this.eventManager.addEventListener(t,e,Wl(i))}}function hl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $c extends Es{constructor(t,e,i,r){super(t),this.component=i;const s=zl(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function Yn(n){return"_ngcontent-%COMP%".replace(jc,n)}(r+"-"+i.id),this.hostAttr=function $l(n){return"_nghost-%COMP%".replace(jc,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class qh extends Es{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=zl(r.id,r.styles,[]);for(let u=0;u<s.length;u++){const d=document.createElement("style");d.textContent=s[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let fi=(()=>{class n extends Gl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Kh=["alt","control","meta","shift"],js={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fl=(()=>{class n extends Gl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),u=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(e,s.domEventName,u))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let u="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),u="code."),Kh.forEach(_=>{const E=i.indexOf(_);E>-1&&(i.splice(E,1),u+=_+".")}),u+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=u,p}static matchEventFullKeyCode(e,i){let r=js[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Kh.forEach(u=>{u!==r&&(0,Vu[u])(e)&&(s+=u+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const pl=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Wc(){Bs.makeCurrent()},multi:!0},{provide:ge,useFactory:function Uu(){return(0,l.RDi)(document),document},deps:[]}]),vo=new l.OlP(""),gl=[{provide:l.rWj,useClass:class zh{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,u=!1;const d=function(p){u=u||p,s--,0==s&&i(u)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?P().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],ga=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Cs(){return new l.qLn},deps:[]},{provide:Nu,useClass:fi,multi:!0,deps:[ge,l.R0b,l.Lbi]},{provide:Nu,useClass:fl,multi:!0,deps:[ge]},{provide:cl,useClass:cl,deps:[Pu,ha,l.AFp]},{provide:l.FYo,useExisting:cl},{provide:da,useExisting:ha},{provide:ha,useClass:ha,deps:[ge]},{provide:Pu,useClass:Pu,deps:[Nu,l.R0b]},{provide:class ra{},useClass:Ru,deps:[]},[]];let wo=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:Un,useExisting:l.AFp},Ou]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vo,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...ga,...gl],imports:[Ui,l.hGG]}),n})(),es=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function ml(){return new es((0,l.LFG)(ge))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var dn=U(8996),ns=U(7669);function ft(...n){const t=(0,ns.yG)(n);return(0,dn.D)(n,t)}var Qi=U(7579);class Rn extends Qi.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const Co=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var bi=U(9751);const{isArray:bo}=Array,{getPrototypeOf:Zc,prototype:Yc,keys:ef}=Object;function Io(n){if(1===n.length){const t=n[0];if(bo(t))return{args:t,keys:null};if(function ju(n){return n&&"object"==typeof n&&Zc(n)===Yc}(t)){const e=ef(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var To=U(4671),ht=U(4004);const{isArray:_l}=Array;function Jl(n){return(0,ht.U)(t=>function is(n,t){return _l(t)?n(...t):n(t)}(n,t))}function yl(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var Gn=U(5403),vl=U(9672);function Xl(...n){const t=(0,ns.yG)(n),e=(0,ns.jO)(n),{args:i,keys:r}=Io(n);if(0===i.length)return(0,dn.D)([],t);const s=new bi.y(function Qc(n,t,e=To.y){return i=>{tf(t,()=>{const{length:r}=n,s=new Array(r);let u=r,d=r;for(let p=0;p<r;p++)tf(t,()=>{const _=(0,dn.D)(n[p],t);let E=!1;_.subscribe((0,Gn.x)(i,T=>{s[p]=T,E||(E=!0,d--),d||i.next(e(s.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,t,r?u=>yl(r,u):To.y));return e?s.pipe(Jl(e)):s}function tf(n,t,e){n?(0,vl.f)(e,n,t):t()}var Ia=U(8189);function Ta(...n){return function wl(){return(0,Ia.J)(1)}()((0,dn.D)(n,(0,ns.yG)(n)))}var ur=U(8421);function So(n){return new bi.y(t=>{(0,ur.Xf)(n()).subscribe(t)})}var Gu=U(9635),$s=U(576);function cr(n,t){const e=(0,$s.m)(n)?n:()=>n,i=r=>r.error(e());return new bi.y(t?r=>t.schedule(i,0,r):i)}var Is=U(515),zs=U(727),si=U(4482);function Do(){return(0,si.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Gn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Ts extends bi.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,si.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new zs.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Gn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=zs.w0.EMPTY)}return t}refCount(){return Do()(this)}}function Jn(n,t){return(0,si.e)((e,i)=>{let r=null,s=0,u=!1;const d=()=>u&&!r&&i.complete();e.subscribe((0,Gn.x)(i,p=>{r?.unsubscribe();let _=0;const E=s++;(0,ur.Xf)(n(p,E)).subscribe(r=(0,Gn.x)(i,T=>i.next(t?t(p,T,E,_++):T),()=>{r=null,d()}))},()=>{u=!0,d()}))})}function Ln(n){return n<=0?()=>Is.E:(0,si.e)((t,e)=>{let i=0;t.subscribe((0,Gn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Sa(...n){const t=(0,ns.yG)(n);return(0,si.e)((e,i)=>{(t?Ta(n,e,t):Ta(n,e)).subscribe(i)})}function S(n,t){return(0,si.e)((e,i)=>{let r=0;e.subscribe((0,Gn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var D=U(5577);function k(n){return(0,si.e)((t,e)=>{let i=!1;t.subscribe((0,Gn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function j(n=te){return(0,si.e)((t,e)=>{let i=!1;t.subscribe((0,Gn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function te(){return new Co}function le(n,t){const e=arguments.length>=2;return i=>i.pipe(n?S((r,s)=>n(r,s,i)):To.y,Ln(1),e?k(t):j(()=>new Co))}function Me(n,t){return(0,$s.m)(t)?(0,D.z)(n,t,1):(0,D.z)(n,1)}var Ge=U(8505);function mt(n){return(0,si.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Gn.x)(e,void 0,void 0,u=>{s=(0,ur.Xf)(n(u,mt(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Rt(n,t,e,i,r){return(s,u)=>{let d=e,p=t,_=0;s.subscribe((0,Gn.x)(u,E=>{const T=_++;p=d?n(p,E,T):(d=!0,E),i&&u.next(p)},r&&(()=>{d&&u.next(p),u.complete()})))}}function Vt(n,t){return(0,si.e)(Rt(n,t,arguments.length>=2,!0))}function It(n){return n<=0?()=>Is.E:(0,si.e)((t,e)=>{let i=[];t.subscribe((0,Gn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Xn(n,t){const e=arguments.length>=2;return i=>i.pipe(n?S((r,s)=>n(r,s,i)):To.y,It(1),e?k(t):j(()=>new Co))}function Ws(n){return(0,si.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const jt="primary",Lr=Symbol("RouteTitle");class Ss{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function rs(n){return new Ss(n)}function Aa(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const u=i[s],d=n[s];if(u.startsWith(":"))r[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function dr(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!$_(n[r],t[r]))return!1;return!0}function $_(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function tg(n){return Array.prototype.concat.apply([],n)}function nf(n){return n.length>0?n[n.length-1]:null}function ei(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function xo(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,dn.D)(Promise.resolve(n)):ft(n)}const EE={exact:function ig(n,t,e){if(!ko(n.segments,t.segments)||!Mo(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!ig(n.children[i],t.children[i],e))return!1;return!0},subset:$u},sf={exact:function af(n,t){return dr(n,t)},subset:function Jc(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>$_(n[e],t[e]))},ignored:()=>!0};function z_(n,t,e){return EE[e.paths](n.root,t.root,e.matrixParams)&&sf[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function $u(n,t,e){return Xc(n,t,t.segments,e)}function Xc(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!ko(r,e)||t.hasChildren()||!Mo(r,e,i))}if(n.segments.length===e.length){if(!ko(n.segments,e)||!Mo(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!$u(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(ko(n.segments,r)&&Mo(n.segments,r,i)&&n.children[jt])&&Xc(n.children[jt],t,s,i)}}function Mo(n,t,e){return t.every((i,r)=>sf[e](n[r].parameters,i.parameters))}class El{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rs(this.queryParams)),this._queryParamMap}toString(){return sg.serialize(this)}}class on{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ei(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tu(this)}}class zu{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=rs(this.parameters)),this._parameterMap}toString(){return W_(this)}}function ko(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let lf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new eu},providedIn:"root"}),n})();class eu{parse(t){const e=new m(t);return new El(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Wu(t.root,!0)}`,i=function bE(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${td(e)}=${td(r)}`).join("&"):`${td(e)}=${td(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function cf(n){return encodeURI(n)}(t.fragment)}`:""}`}}const sg=new eu;function tu(n){return n.segments.map(t=>W_(t)).join("/")}function Wu(n,t){if(!n.hasChildren())return tu(n);if(t){const e=n.children[jt]?Wu(n.children[jt],!1):"",i=[];return ei(n.children,(r,s)=>{s!==jt&&i.push(`${s}:${Wu(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function rg(n,t){let e=[];return ei(n.children,(i,r)=>{r===jt&&(e=e.concat(t(i,r)))}),ei(n.children,(i,r)=>{r!==jt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===jt?[Wu(n.children[jt],!1)]:[`${r}:${Wu(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${tu(n)}/${e[0]}`:`${tu(n)}/(${e.join("//")})`}}function uf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function td(n){return uf(n).replace(/%3B/gi,";")}function qs(n){return uf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oo(n){return decodeURIComponent(n)}function df(n){return Oo(n.replace(/\+/g,"%20"))}function W_(n){return`${qs(n.path)}${function CE(n){return Object.keys(n).map(t=>`;${qs(t)}=${qs(n[t])}`).join("")}(n.parameters)}`}const IE=/^[^\/()?;=#]+/;function hf(n){const t=n.match(IE);return t?t[0]:""}const ff=/^[^=?&#]+/,TE=/^[^&#]+/;class m{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[jt]=new on(t,e)),i}parseSegment(){const t=hf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new zu(Oo(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=hf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=hf(this.remaining);r&&(i=r,this.capture(i))}t[Oo(e)]=Oo(i)}parseQueryParam(t){const e=function q_(n){const t=n.match(ff);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const u=function w(n){const t=n.match(TE);return t?t[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=df(e),s=df(i);if(t.hasOwnProperty(r)){let u=t[r];Array.isArray(u)||(u=[u],t[r]=u),u.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=hf(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=jt);const u=this.parseChildren();e[s]=1===Object.keys(u).length?u[jt]:new on([],u),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function y(n){return n.segments.length>0?new on([],{[jt]:n}):n}function b(n){const t={};for(const i of Object.keys(n.children)){const s=b(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function M(n){if(1===n.numberOfChildren&&n.children[jt]){const t=n.children[jt];return new on(n.segments.concat(t.segments),t.children)}return n}(new on(n.segments,t))}function F(n){return n instanceof El}function tn(n,t,e,i,r){if(0===e.length)return ss(t.root,t.root,t.root,i,r);const s=function rd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new id(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return ei(s.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===u?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new id(e,t,i)}(e);return s.toRoot()?ss(t.root,t.root,new on([],{}),i,r):function u(p){const _=function pf(n,t,e,i){if(n.isAbsolute)return new Cl(t.root,!0,0);if(-1===i)return new Cl(e,e===t.root,0);return function sd(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new Cl(i,!1,r-s)}(e,i+(wn(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,p),E=_.processChildren?xa(_.segmentGroup,_.index,s.commands):Ku(_.segmentGroup,_.index,s.commands);return ss(t.root,_.segmentGroup,E,i,r)}(n.snapshot?._lastPathIndex)}function wn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ji(n){return"object"==typeof n&&null!=n&&n.outlets}function ss(n,t,e,i,r){let u,s={};i&&ei(i,(p,_)=>{s[_]=Array.isArray(p)?p.map(E=>`${E}`):`${p}`}),u=n===t?e:nd(n,t,e);const d=y(b(u));return new El(d,s,r)}function nd(n,t,e){const i={};return ei(n.children,(r,s)=>{i[s]=r===t?e:nd(r,t,e)}),new on(n.segments,i)}class id{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&wn(i[0]))throw new l.vHH(4003,!1);const r=i.find(Ji);if(r&&r!==nf(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cl{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Ku(n,t,e){if(n||(n=new on([],{})),0===n.segments.length&&n.hasChildren())return xa(n,t,e);const i=function K_(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const u=n.segments[r],d=e[i];if(Ji(d))break;const p=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!lg(p,_,u))return s;i+=2}else{if(!lg(p,{},u))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new on(n.segments.slice(0,i.pathIndex),{});return s.children[jt]=new on(n.segments.slice(i.pathIndex),n.children),xa(s,0,r)}return i.match&&0===r.length?new on(n.segments,{}):i.match&&!n.hasChildren()?$n(n,t,e):i.match?xa(n,0,r):$n(n,t,e)}function xa(n,t,e){if(0===e.length)return new on(n.segments,{});{const i=function qu(n){return Ji(n[0])?n[0].outlets:{[jt]:n}}(e),r={};return ei(i,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[u]=Ku(n.children[u],t,s))}),ei(n.children,(s,u)=>{void 0===i[u]&&(r[u]=s)}),new on(n.segments,r)}}function $n(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Ji(s)){const p=ag(s.outlets);return new on(i,p)}if(0===r&&wn(e[0])){i.push(new zu(n.segments[t].path,SE(e[0]))),r++;continue}const u=Ji(s)?s.outlets[jt]:`${s}`,d=r<e.length-1?e[r+1]:null;u&&d&&wn(d)?(i.push(new zu(u,SE(d))),r+=2):(i.push(new zu(u,{})),r++)}return new on(i,{})}function ag(n){const t={};return ei(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=$n(new on([],{}),0,e))}),t}function SE(n){const t={};return ei(n,(e,i)=>t[i]=`${e}`),t}function lg(n,t,e){return n==e.path&&dr(t,e.parameters)}class Ma{constructor(t,e){this.id=t,this.url=e}}class Z_ extends Ma{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zu extends Ma{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ug extends Ma{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class DE extends Ma{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class XD extends Ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aP extends Ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lP extends Ma{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gf extends Ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y_ extends Ma{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AE{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xE{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ME{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eA{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kE{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OE{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cg{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class RE{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=mf(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=mf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=dg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return dg(t,this._root).map(e=>e.value)}}function mf(n,t){if(n===t.value)return t;for(const e of t.children){const i=mf(n,e);if(i)return i}return null}function dg(n,t){if(n===t.value)return[t];for(const e of t.children){const i=dg(n,e);if(i.length)return i.unshift(t),i}return[]}class ka{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ks(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class NE extends RE{constructor(t,e){super(t),this.snapshot=e,_f(this,t)}toString(){return this.snapshot.toString()}}function hg(n,t){const e=function fg(n,t){const u=new Oa([],{},{},"",{},jt,t,null,n.root,-1,{});return new Q_("",new ka(u,[]))}(n,t),i=new Rn([new zu("",{})]),r=new Rn({}),s=new Rn({}),u=new Rn({}),d=new Rn(""),p=new nu(i,r,u,d,s,jt,t,e.root);return p.snapshot=e.root,new NE(new ka(p,[]),e)}class nu{constructor(t,e,i,r,s,u,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.pipe((0,ht.U)(_=>_[Lr]))??ft(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(t=>rs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(t=>rs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pg(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function gg(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Oa{constructor(t,e,i,r,s,u,d,p,_,E,T,x){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.[Lr],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=E,this._correctedLastPathIndex=x??E,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q_ extends RE{constructor(t,e){super(e),this.url=t,_f(this,e)}toString(){return PE(this._root)}}function _f(n,t){t.value._routerState=n,t.children.forEach(e=>_f(n,e))}function PE(n){const t=n.children.length>0?` { ${n.children.map(PE).join(", ")} } `:"";return`${n.value}${t}`}function J_(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,dr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),dr(t.params,e.params)||n.params.next(e.params),function Ao(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!dr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),dr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mg(n,t){const e=dr(n.params,t.params)&&function ed(n,t){return ko(n,t)&&n.every((e,i)=>dr(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||mg(n.parent,t.parent))}function yf(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function tA(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return yf(n,i,r);return yf(n,i)})}(n,t,e);return new ka(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=t.value,u.children=t.children.map(d=>yf(n,d)),u}}const i=function nA(n){return new nu(new Rn(n.url),new Rn(n.params),new Rn(n.queryParams),new Rn(n.fragment),new Rn(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>yf(n,s));return new ka(i,r)}}const X_="ngNavigationCancelingError";function _g(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=F(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=FE(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function FE(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[X_]=!0,i.cancellationCode=t,e&&(i.url=e),i}function ey(n){return LE(n)&&F(n.url)}function LE(n){return n&&n[X_]}class VE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new yg,this.attachRef=null}}let yg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new VE,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vg=!1;let Yu=(()=>{class n{constructor(e,i,r,s,u){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||jt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,vg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,vg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,vg);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,vg);this._activatedRoute=e;const r=this.location,u=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new iA(e,d,r.injector);if(i&&function ad(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(u);this.activated=r.createComponent(_,r.length,p)}else this.activated=r.createComponent(u,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(yg),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class iA{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===nu?this.route:t===yg?this.childContexts:this.parent.get(t,e)}}let Qu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[Yu],encapsulation:2}),n})();function UE(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function iy(n){const t=n.children&&n.children.map(iy),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==jt&&(e.component=Qu),e}function Zs(n){return n.outlet||jt}function wg(n,t){const e=n.filter(i=>Zs(i)===t);return e.push(...n.filter(i=>Zs(i)!==t)),e}function Eg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class ry{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),J_(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Ks(e);t.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,r[u],i),delete r[u]}),ei(r,(s,u)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(t,e,u.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ks(t);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);if(i&&i.outlet){const u=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:u,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ks(t);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Ks(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new OE(s.value.snapshot))}),t.children.length&&this.forwardEvent(new eA(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(J_(r),r===s)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,u.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),J_(d.route.value),this.activateChildRoutes(t,null,u.children)}else{const d=Eg(r.snapshot),p=d?.get(l._Vd)??null;u.attachRef=null,u.route=r,u.resolver=p,u.injector=d,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,i)}}class sA{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class sy{constructor(t,e){this.component=t,this.route=e}}function fP(n,t,e){const i=n._root;return wf(i,t?t._root:null,e,[i.value])}function vf(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,l.Z0I)(n)?t.get(n):n:i}function wf(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ks(t);return n.children.forEach(u=>{(function jE(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function oy(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!ko(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ko(n.url,t.url)||!dr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mg(n,t)||!dr(n.queryParams,t.queryParams);default:return!mg(n,t)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new sA(i)):(s.data=u.data,s._resolvedData=u._resolvedData),wf(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new sy(d.outlet.component,u))}else u&&ld(t,d,r),r.canActivateChecks.push(new sA(i)),wf(n,null,s.component?d?d.children:null:e,i,r)})(u,s[u.value.outlet],e,i.concat([u.value]),r),delete s[u.value.outlet]}),ei(s,(u,d)=>ld(u,e.getContext(d),r)),r}function ld(n,t,e){const i=Ks(n),r=n.value;ei(i,(s,u)=>{ld(s,r.component?t?t.children.getContext(u):null:t,e)}),e.canDeactivateChecks.push(new sy(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function ud(n){return"function"==typeof n}function Cg(n){return n instanceof Co||"EmptyError"===n?.name}const bg=Symbol("INITIAL_VALUE");function cd(){return Jn(n=>Xl(n.map(t=>t.pipe(Ln(1),Sa(bg)))).pipe((0,ht.U)(t=>{for(const e of t)if(!0!==e){if(e===bg)return bg;if(!1===e||e instanceof El)return e}return!0}),S(t=>t!==bg),Ln(1)))}function br(n){return(0,Gu.z)((0,Ge.b)(t=>{if(F(t))throw _g(0,t)}),(0,ht.U)(t=>!0===t))}const Ig={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tg(n,t,e,i,r){const s=Xi(n,t,e);return s.matched?function cy(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ft(r.map(u=>{const d=vf(u,n);return xo(function aA(n){return n&&ud(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(cd(),br()):ft(!0)}(i=UE(t,i),t,e).pipe((0,ht.U)(u=>!0===u?s:{...Ig})):ft(s)}function Xi(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...Ig}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||Aa)(e,n,t);if(!r)return{...Ig};const s={};ei(r.posParams,(d,p)=>{s[p]=d.path});const u=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function iu(n,t,e,i,r="corrected"){if(e.length>0&&function _A(n,t,e){return e.some(i=>Sg(n,t,i)&&Zs(i)!==jt)}(n,e,i)){const u=new on(t,function mA(n,t,e,i){const r={};r[jt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Zs(s)!==jt){const u=new on([],{});u._sourceSegment=n,u._segmentIndexShift=t.length,r[Zs(s)]=u}return r}(n,t,i,new on(e,n.children)));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&function WE(n,t,e){return e.some(i=>Sg(n,t,i))}(n,e,i)){const u=new on(n.segments,function zE(n,t,e,i,r,s){const u={};for(const d of i)if(Sg(n,e,d)&&!r[Zs(d)]){const p=new on([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,u[Zs(d)]=p}return{...r,...u}}(n,t,e,i,n.children,r));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}const s=new on(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Sg(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function dy(n,t,e,i){return!!(Zs(n)===i||i!==jt&&Sg(t,e,n))&&("**"===n.path||Xi(t,n,e).matched)}function qE(n,t,e){return 0===t.length&&!n.children[e]}const Cf=!1;class Dg{constructor(t){this.segmentGroup=t||null}}class KE{constructor(t){this.urlTree=t}}function bf(n){return cr(new Dg(n))}function ZE(n){return cr(new KE(n))}class vA{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=iu(this.urlTree.root,[],[],this.config).segmentGroup,e=new on(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,jt).pipe((0,ht.U)(s=>this.createUrlTree(b(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mt(s=>{if(s instanceof KE)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Dg?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,jt).pipe((0,ht.U)(r=>this.createUrlTree(b(r),t.queryParams,t.fragment))).pipe(mt(r=>{throw r instanceof Dg?this.noMatchError(r):r}))}noMatchError(t){return new l.vHH(4002,Cf)}createUrlTree(t,e,i){const r=y(t);return new El(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,ht.U)(s=>new on([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,dn.D)(r).pipe(Me(s=>{const u=i.children[s],d=wg(e,s);return this.expandSegmentGroup(t,d,u,s).pipe((0,ht.U)(p=>({segment:p,outlet:s})))}),Vt((s,u)=>(s[u.outlet]=u.segment,s),{}),Xn())}expandSegment(t,e,i,r,s,u){return(0,dn.D)(i).pipe(Me(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,u).pipe(mt(_=>{if(_ instanceof Dg)return ft(null);throw _}))),le(d=>!!d),mt((d,p)=>{if(Cg(d))return qE(e,r,s)?ft(new on([],{})):bf(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,u,d){return dy(r,e,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u):bf(e):bf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?ZE(s):this.lineralizeSegments(i,s).pipe((0,D.z)(u=>{const d=new on(u,{});return this.expandSegment(t,d,e,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u){const{matched:d,consumedSegments:p,remainingSegments:_,positionalParamSegments:E}=Xi(e,r,s);if(!d)return bf(e);const T=this.applyRedirectCommands(p,r.redirectTo,E);return r.redirectTo.startsWith("/")?ZE(T):this.lineralizeSegments(r,T).pipe((0,D.z)(x=>this.expandSegment(t,e,i,x.concat(_),u,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=UE(i,t),i.loadChildren?(i._loadedRoutes?ft({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,ht.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new on(r,{})))):ft(new on(r,{}))):Tg(e,i,r,t).pipe(Jn(({matched:u,consumedSegments:d,remainingSegments:p})=>u?this.getChildConfig(t=i._injector??t,i,r).pipe((0,D.z)(E=>{const T=E.injector??t,x=E.routes,{segmentGroup:N,slicedSegments:V}=iu(e,d,p,x),Z=new on(N.segments,N.children);if(0===V.length&&Z.hasChildren())return this.expandChildren(T,x,Z).pipe((0,ht.U)(He=>new on(d,He)));if(0===x.length&&0===V.length)return ft(new on(d,{}));const Q=Zs(i)===s;return this.expandSegment(T,Z,x,V,Q?jt:s,!0).pipe((0,ht.U)(Be=>new on(d.concat(Be.segments),Be.children)))})):bf(e)))}getChildConfig(t,e,i){return e.children?ft({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ft({routes:e._loadedRoutes,injector:e._loadedInjector}):function gA(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ft(!0):ft(r.map(u=>{const d=vf(u,n);return xo(function ay(n){return n&&ud(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(cd(),br())}(t,e,i).pipe((0,D.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Ge.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function dd(n){return cr(FE(Cf,3))}())):ft({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ft(i);if(r.numberOfChildren>1||!r.children[jt])return cr(new l.vHH(4e3,Cf));r=r.children[jt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new El(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return ei(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let u={};return ei(e.children,(d,p)=>{u[p]=this.createSegmentGroup(t,d,i,r)}),new on(s,u)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,Cf);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class mP{}class Ra{constructor(t,e,i,r,s,u,d,p){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const t=iu(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,jt).pipe((0,ht.U)(e=>{if(null===e)return null;const i=new Oa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ka(i,e),s=new Q_(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=pg(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,dn.D)(Object.keys(i.children)).pipe(Me(r=>{const s=i.children[r],u=wg(e,r);return this.processSegmentGroup(t,u,s,r)}),Vt((r,s)=>r&&s?(r.push(...s),r):null),function Ii(n,t=!1){return(0,si.e)((e,i)=>{let r=0;e.subscribe((0,Gn.x)(i,s=>{const u=n(s,r++);(u||t)&&i.next(s),!u&&i.complete()}))})}(r=>null!==r),k(null),Xn(),(0,ht.U)(r=>{if(null===r)return null;const s=gy(r);return function fy(n){n.sort((t,e)=>t.value.outlet===jt?-1:e.value.outlet===jt?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,dn.D)(e).pipe(Me(u=>this.processSegmentAgainstRoute(u._injector??t,u,i,r,s)),le(u=>!!u),mt(u=>{if(Cg(u))return qE(i,r,s)?ft([]):ft(null);throw u}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!dy(e,i,r,s))return ft(null);let u;if("**"===e.path){const d=r.length>0?nf(r).parameters:{},p=QE(i)+r.length;u=ft({snapshot:new Oa(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ag(e),Zs(e),e.component??e._loadedComponent??null,e,hd(i),p,xg(e),p),consumedSegments:[],remainingSegments:[]})}else u=Tg(i,e,r,t).pipe((0,ht.U)(({matched:d,consumedSegments:p,remainingSegments:_,parameters:E})=>{if(!d)return null;const T=QE(i)+p.length;return{snapshot:new Oa(p,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ag(e),Zs(e),e.component??e._loadedComponent??null,e,hd(i),T,xg(e),T),consumedSegments:p,remainingSegments:_}}));return u.pipe(Jn(d=>{if(null===d)return ft(null);const{snapshot:p,consumedSegments:_,remainingSegments:E}=d;t=e._injector??t;const T=e._loadedInjector??t,x=function py(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:N,slicedSegments:V}=iu(i,_,E,x.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===V.length&&N.hasChildren())return this.processChildren(T,x,N).pipe((0,ht.U)(Q=>null===Q?null:[new ka(p,Q)]));if(0===x.length&&0===V.length)return ft([new ka(p,[])]);const Z=Zs(e)===s;return this.processSegment(T,x,N,V,Z?jt:s).pipe((0,ht.U)(Q=>null===Q?null:[new ka(p,Q)]))}))}}function EA(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function gy(n){const t=[],e=new Set;for(const i of n){if(!EA(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=gy(i.children);t.push(new ka(i.value,r))}return t.filter(i=>!e.has(i))}function hd(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function QE(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function Ag(n){return n.data||{}}function xg(n){return n.resolve||{}}function Mg(n){return"string"==typeof n.title||null===n.title}function _y(n){return Jn(t=>{const e=n(t);return e?(0,dn.D)(e).pipe((0,ht.U)(()=>t)):ft(t)})}let tC=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===jt);return i}getResolvedTitleForRoute(e){return e.data[Lr]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(nC)},providedIn:"root"}),n})(),nC=(()=>{class n extends tC{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(es))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class IA{}class iC extends class TA{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const If=new l.OlP("",{providedIn:"root",factory:()=>({})}),vy=new l.OlP("ROUTES");let wy=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ft(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=xo(e.loadComponent()).pipe((0,Ge.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Ws(()=>{this.componentLoaders.delete(e)})),r=new Ts(i,()=>new Qi.x).pipe(Do());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ft({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,ht.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,_,E=!1;Array.isArray(d)?_=d:(p=d.create(e).injector,_=tg(p.get(vy,[],l.XFs.Self|l.XFs.Optional)));return{routes:_.map(iy),injector:p}}),Ws(()=>{this.childrenLoaders.delete(i)})),u=new Ts(s,()=>new Qi.x).pipe(Do());return this.childrenLoaders.set(i,u),u}loadModuleFactoryOrRoutes(e){return xo(e()).pipe((0,D.z)(i=>i instanceof l.YKP||Array.isArray(i)?ft(i):(0,dn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rC{}class sC{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function oC(n){throw n}function aC(n,t,e){return t.parse("/")}const SA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function lC(){const n=(0,l.f3M)(lf),t=(0,l.f3M)(yg),e=(0,l.f3M)(Ve),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),s=(0,l.f3M)(vy,{optional:!0})??[],u=(0,l.f3M)(If,{optional:!0})??{},d=(0,l.f3M)(nC),p=(0,l.f3M)(tC,{optional:!0}),_=(0,l.f3M)(rC,{optional:!0}),E=(0,l.f3M)(IA,{optional:!0}),T=new Oi(null,n,t,e,i,r,tg(s));return _&&(T.urlHandlingStrategy=_),E&&(T.routeReuseStrategy=E),T.titleStrategy=p??d,function Og(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(u,T),T}let Oi=(()=>{class n{constructor(e,i,r,s,u,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qi.x,this.errorHandler=oC,this.malformedUriErrorHandler=aC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ft(void 0),this.urlHandlingStrategy=new sC,this.routeReuseStrategy=new iC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(wy),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new xE(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new AE(x)),this.ngModule=u.get(l.h0i),this.console=u.get(l.c2e);const T=u.get(l.R0b);this.isNgZoneEnabled=T instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function ng(){return new El(new on([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=hg(this.currentUrlTree,this.rootComponentType),this.transitions=new Rn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(S(r=>0!==r.id),(0,ht.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Jn(r=>{let s=!1,u=!1;return ft(r).pipe((0,Ge.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Jn(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Ey(d.source)&&(this.browserUrlTree=d.extractedUrl),ft(d).pipe(Jn(T=>{const x=this.transitions.getValue();return i.next(new Z_(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?Is.E:Promise.resolve(T)}),function wA(n,t,e,i){return Jn(r=>function bl(n,t,e,i,r){return new vA(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,ht.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ge.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function XE(n,t,e,i,r,s){return(0,D.z)(u=>function _P(n,t,e,i,r,s,u="emptyOnly",d="legacy"){return new Ra(n,t,e,i,r,u,d,s).recognize().pipe(Jn(p=>null===p?function YE(n){return new bi.y(t=>t.error(n))}(new mP):ft(p)))}(n,t,e,u.urlAfterRedirects,i.serialize(u.urlAfterRedirects),i,r,s).pipe((0,ht.U)(d=>({...u,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ge.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(N,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new XD(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);i.next(x)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:N,source:V,restoredState:Z,extras:Q}=d,Ae=new Z_(x,this.serializeUrl(N),V,Z);i.next(Ae);const Be=hg(N,this.rootComponentType).snapshot;return ft(r={...d,targetSnapshot:Be,urlAfterRedirects:N,extras:{...Q,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Is.E}),(0,Ge.b)(d=>{const p=new aP(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ht.U)(d=>r={...d,guards:fP(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function uA(n,t){return(0,D.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:u}}=e;return 0===u.length&&0===s.length?ft({...e,guardsResult:!0}):function cA(n,t,e,i){return(0,dn.D)(n).pipe((0,D.z)(r=>function pA(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ft(s.map(d=>{const p=Eg(t)??r,_=vf(d,p);return xo(function Ef(n){return n&&ud(n.canDeactivate)}(_)?_.canDeactivate(n,t,e,i):p.runInContext(()=>_(n,t,e,i))).pipe(le())})).pipe(cd()):ft(!0)}(r.component,r.route,e,t,i)),le(r=>!0!==r,!0))}(u,i,r,n).pipe((0,D.z)(d=>d&&function GE(n){return"boolean"==typeof n}(d)?function uy(n,t,e,i){return(0,dn.D)(t).pipe(Me(r=>Ta(function hA(n,t){return null!==n&&t&&t(new ME(n)),ft(!0)}(r.route.parent,i),function dA(n,t){return null!==n&&t&&t(new kE(n)),ft(!0)}(r.route,i),function $E(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(u=>function pP(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(u)).filter(u=>null!==u).map(u=>So(()=>ft(u.guards.map(p=>{const _=Eg(u.node)??e,E=vf(p,_);return xo(function ly(n){return n&&ud(n.canActivateChild)}(E)?E.canActivateChild(i,n):_.runInContext(()=>E(i,n))).pipe(le())})).pipe(cd())));return ft(s).pipe(cd())}(n,r.path,e),function fA(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ft(!0);const r=i.map(s=>So(()=>{const u=Eg(t)??e,d=vf(s,u);return xo(function oA(n){return n&&ud(n.canActivate)}(d)?d.canActivate(t,n):u.runInContext(()=>d(t,n))).pipe(le())}));return ft(r).pipe(cd())}(n,r.route,e))),le(r=>!0!==r,!0))}(i,s,n,t):ft(d)),(0,ht.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ge.b)(d=>{if(r.guardsResult=d.guardsResult,F(d.guardsResult))throw _g(0,d.guardsResult);const p=new lP(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),S(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),_y(d=>{if(d.guards.canActivateChecks.length)return ft(d).pipe((0,Ge.b)(p=>{const _=new gf(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),Jn(p=>{let _=!1;return ft(p).pipe(function yP(n,t){return(0,D.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ft(e);let s=0;return(0,dn.D)(r).pipe(Me(u=>function fd(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Mg(r)&&(s[Lr]=r.title),function my(n,t,e,i){const r=function eC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ft({});const s={};return(0,dn.D)(r).pipe((0,D.z)(u=>function bA(n,t,e,i){const r=Eg(t)??i,s=vf(n,r);return xo(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[u],t,e,i).pipe(le(),(0,Ge.b)(d=>{s[u]=d}))),It(1),function Da(n){return(0,ht.U)(()=>n)}(s),mt(u=>Cg(u)?Is.E:cr(u)))}(s,n,t,i).pipe((0,ht.U)(u=>(n._resolvedData=u,n.data=pg(n,e).resolve,r&&Mg(r)&&(n.data[Lr]=r.title),null)))}(u.route,i,n,t)),(0,Ge.b)(()=>s++),It(1),(0,D.z)(u=>s===r.length?ft(e):Is.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ge.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,Ge.b)(p=>{const _=new Y_(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),_y(d=>{const p=_=>{const E=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Ge.b)(T=>{_.component=T}),(0,ht.U)(()=>{})));for(const T of _.children)E.push(...p(T));return E};return Xl(p(d.targetSnapshot.root)).pipe(k(),Ln(1))}),_y(()=>this.afterPreactivation()),(0,ht.U)(d=>{const p=function od(n,t,e){const i=yf(n,t._root,e?e._root:void 0);return new NE(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:p}}),(0,Ge.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,ht.U)(i=>(new ry(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ge.b)({next(){s=!0},complete(){s=!0}}),Ws(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),mt(d=>{if(u=!0,LE(d)){ey(d)||(this.navigated=!0,this.restoreHistory(r,!0));const p=new ug(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(p),ey(d)){const _=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),E={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ey(r.source)};this.scheduleNavigation(_,"imperative",null,E,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new DE(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(p);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return Is.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const u=this.parseUrl(e.url);this.scheduleNavigation(u,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(iy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:u,queryParamsHandling:d,preserveFragment:p}=i,_=r||this.routerState.root,E=p?this.currentUrlTree.fragment:u;let T=null;switch(d){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),tn(_,this.currentUrlTree,e,T,E??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=F(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function uC(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new l.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...SA}:!1===i?{...wP}:i,F(e))return z_(this.currentUrlTree,e,r);const s=this.parseUrl(e);return z_(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Zu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,u){if(this.disposed)return Promise.resolve(!1);let d,p,_;u?(d=u.resolve,p=u.reject,_=u.promise):_=new Promise((x,N)=>{d=x,p=N});const E=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),T=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:E,targetPageId:T,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(x=>Promise.reject(x))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new ug(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return lC()},providedIn:"root"}),n})();function Ey(n){return"imperative"!==n}let pd=(()=>{class n{constructor(e,i,r,s,u){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Qi.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Oi),l.Y36(nu),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class Cy{}let by=(()=>{class n{constructor(e,i,r,s,u){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(S(e=>e instanceof Zu),Me(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const u=s._injector??e,d=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,dn.D)(r).pipe((0,Ia.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ft(null);const s=r.pipe((0,D.z)(u=>null===u?ft(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??e,u.routes))));if(i.loadComponent&&!i._loadedComponent){const u=this.loader.loadComponent(i);return(0,dn.D)([s,u]).pipe((0,Ia.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Oi),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(Cy),l.LFG(wy))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ju=new l.OlP("");let dC=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Z_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Zu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof cg&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new cg(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Xu(n,t){return{\u0275kind:n,\u0275providers:t}}function Sf(n){return[{provide:vy,multi:!0,useValue:n}]}function xA(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(Oi),r=n.get(Iy);1===n.get(Ty)&&i.initialNavigation(),n.get(Ys,null,l.XFs.Optional)?.setUpPreloading(),n.get(Ju,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const Iy=new l.OlP("",{factory:()=>new Qi.x}),Ty=new l.OlP("",{providedIn:"root",factory:()=>1});const Ys=new l.OlP("");function OA(n){return Xu(0,[{provide:Ys,useExisting:by},{provide:Cy,useExisting:n}])}const pC=new l.OlP("ROUTER_FORROOT_GUARD"),NA=[Ve,{provide:lf,useClass:eu},{provide:Oi,useFactory:lC},yg,{provide:nu,useFactory:function hC(n){return n.routerState.root},deps:[Oi]},wy];function gC(){return new l.PXZ("Router",Oi)}let mC=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[NA,[],Sf(e),{provide:pC,useFactory:_C,deps:[[Oi,new l.FiY,new l.tp0]]},{provide:If,useValue:i||{}},i?.useHash?{provide:Ce,useClass:tt}:{provide:Ce,useClass:it},{provide:Ju,useFactory:()=>{const n=(0,l.f3M)(Oi),t=(0,l.f3M)(Rc),e=(0,l.f3M)(If);return e.scrollOffset&&t.setOffset(e.scrollOffset),new dC(n,t,e)}},i?.preloadingStrategy?OA(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:gC},i?.initialNavigation?yC(i):[],[{provide:Sy,useFactory:xA},{provide:l.tb,multi:!0,useExisting:Sy}]]}}static forChild(e){return{ngModule:n,providers:[Sf(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(pC,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Qu]}),n})();function _C(n){return"guarded"}function yC(n){return["disabled"===n.initialNavigation?Xu(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const t=(0,l.f3M)(Oi);return()=>{t.setUpLocationChangeListener()}}},{provide:Ty,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Xu(2,[{provide:Ty,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:t=>{const e=t.get(K,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const u=t.get(Oi),d=t.get(Iy);(function r(s){t.get(Oi).events.pipe(S(d=>d instanceof Zu||d instanceof ug||d instanceof DE),(0,ht.U)(d=>d instanceof Zu||d instanceof ug&&(0===d.code||1===d.code)&&null),S(d=>null!==d),Ln(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),u.afterPreactivation=()=>(s(!0),i||d.closed?ft(void 0):d),u.initialNavigation()}))}}]).\u0275providers:[]]}const Sy=new l.OlP("");let vC={warnLogin:{severity:"warn",summary:"Warn",detail:"Efetue o Login"}};var VA=U(8247),L=U(2090),Vr=U(9681),Ro=U(1877),Pa=U(4859),Lg=U(6451),Df=U(5363),ec=U(6063);class UA extends Qi.x{constructor(t=1/0,e=1/0,i=ec.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:u}=this;e||(i.push(t),!r&&i.push(s.now()+u)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let u=0;u<s.length&&!t.closed;u+=i?1:2)t.next(s[u]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const u=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=u;p+=2)d=p;d&&i.splice(0,d+1)}}}var Vg=U(3099);function Ug(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,Vg.B)({connector:()=>new UA(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function wC(n,t){return(0,$s.m)(t)?Jn(()=>n,t):Jn(()=>n)}var EC=U(9468),In=U(5813),er=U(2011);U(5867);var Ee=U(5861);const xf=new Map,$A={activated:!1,tokenObservers:[]},xy={initialized:!1,enabled:!1};function hr(n){return xf.get(n)||Object.assign({},$A)}function Il(){return xy}class ky{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ee.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function Tl(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Ir=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function WA(n){if(!hr(n).activated)throw Ir.create("use-before-activation",{appName:n.name})}function _d(n,t){return yd.apply(this,arguments)}function yd(){return(yd=(0,Ee.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},u=e.getImmediate({optional:!0});if(u){const N=yield u.getHeartbeatsHeader();N&&(s["X-Firebase-Client"]=N)}const d={method:"POST",body:JSON.stringify(t),headers:s};let p,_;try{p=yield fetch(n,d)}catch(N){throw Ir.create("fetch-network-error",{originalErrorMessage:null===(i=N)||void 0===i?void 0:i.message})}if(200!==p.status)throw Ir.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(N){throw Ir.create("fetch-parse-error",{originalErrorMessage:null===(r=N)||void 0===r?void 0:r.message})}const E=_.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const T=1e3*Number(E[1]),x=Date.now();return{token:_.token,expireTimeMillis:x+T,issuedAtTimeMillis:x}})).apply(this,arguments)}function Fy(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Mf="firebase-app-check-store";let Gg=null;function Ly(){return Gg||(Gg=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(Ir.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Mf,{keyPath:"compositeKey"})}}catch(i){t(Ir.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),Gg)}function Uy(){return(Uy=(0,Ee.Z)(function*(n,t){const i=(yield Ly()).transaction(Mf,"readwrite"),s=i.objectStore(Mf).put({compositeKey:n,value:t});return new Promise((u,d)=>{s.onsuccess=p=>{u()},i.onerror=p=>{var _;d(Ir.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const zg=new Ro.Yd("@firebase/app-check");function xC(n,t){return(0,L.hl)()?function KA(n,t){return function Vy(n,t){return Uy.apply(this,arguments)}(function ZA(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{zg.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function YA(){return Il().enabled}function QA(){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,Ee.Z)(function*(){const n=Il();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const JA={error:"UNKNOWN_ERROR"};function kC(n){return L.US.encodeString(JSON.stringify(n),!1)}function vd(n){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,Ee.Z)(function*(n,t=!1){const e=n.app;WA(e);const i=hr(e);let s,r=i.token;if(r&&!wd(r)&&(i.token=void 0,r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(wd(p)?r=p:yield xC(e,void 0))}if(!t&&r&&wd(r))return{token:r.token};let d,u=!1;if(YA()){i.exchangeTokenPromise||(i.exchangeTokenPromise=_d(Fy(e,yield QA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);const p=yield i.exchangeTokenPromise;return yield xC(e,p),i.token=p,{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),r=yield hr(e).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?zg.warn(p.message):zg.error(p),s=p}return r?s?d=wd(r)?{token:r.token,internalError:s}:jy(s):(d={token:r.token},i.token=r,yield xC(e,r)):d=jy(s),u&&RC(e,d),d})).apply(this,arguments)}function Hy(n,t){const e=hr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function Sl(n){const{app:t}=n,e=hr(t);let i=e.tokenRefresher;i||(i=function OC(n){const{app:t}=n;return new ky((0,Ee.Z)(function*(){let i;if(i=hr(t).token?yield vd(n,!0):yield vd(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=hr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function RC(n,t){const e=hr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function wd(n){return n.expireTimeMillis-Date.now()>0}function jy(n){return{token:kC(JA),error:n}}class XA{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=hr(this.app);for(const e of t)Hy(this.app,e.next);return Promise.resolve()}}const Yy="app-check-internal";!function ix(){(0,Vr._registerComponent)(new Pa.wA("app-check",n=>function ex(n,t){return new XA(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Yy).initialize()})),(0,Vr._registerComponent)(new Pa.wA(Yy,n=>function qg(n){return{getToken:t=>vd(n,t),addTokenListener:t=>function kf(n,t,e,i){const{app:r}=n,s=hr(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&wd(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),Sl(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Sl(n))}(n,"INTERNAL",t),removeTokenListener:t=>Hy(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vr.registerVersion)("@firebase/app-check","0.5.17")}();class bd{constructor(){return(0,In.vb)("app-check")}}typeof window<"u"&&window;var Xg=U(127);const Xy=new l.OlP("angularfire2.auth.use-emulator"),ev=new l.OlP("angularfire2.auth.settings"),Id=new l.OlP("angularfire2.auth.tenant-id"),Rf=new l.OlP("angularfire2.auth.langugage-code"),Td=new l.OlP("angularfire2.auth.use-device-language"),HC=new l.OlP("angularfire.auth.persistence"),Nf=(n,t,e,i,r,s,u,d)=>(0,er.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),u)for(const[_,E]of Object.entries(u))p.settings[_]=E;return d&&p.setPersistence(d),p},[e,i,r,s,u,d]);let em=(()=>{class n{constructor(e,i,r,s,u,d,p,_,E,T,x,N){const V=new Qi.x,Z=ft(void 0).pipe((0,Df.Q)(u.outsideAngular),Jn(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,ht.U)(()=>(0,er.on)(e,s,i)),(0,ht.U)(Q=>Nf(Q,s,d,_,E,T,p,x)),Ug({bufferSize:1,refCount:!1}));if(ia(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{Z.pipe(le()).subscribe();const Ae=Z.pipe(Jn(We=>We.getRedirectResult().then(ct=>ct,()=>null)),In.iC,Ug({bufferSize:1,refCount:!1})),Be=Z.pipe(Jn(We=>new bi.y(ct=>({unsubscribe:s.runOutsideAngular(()=>We.onAuthStateChanged(gt=>ct.next(gt),gt=>ct.error(gt),()=>ct.complete()))})))),He=Z.pipe(Jn(We=>new bi.y(ct=>({unsubscribe:s.runOutsideAngular(()=>We.onIdTokenChanged(gt=>ct.next(gt),gt=>ct.error(gt),()=>ct.complete()))}))));this.authState=Ae.pipe(wC(Be),(0,EC.R)(u.outsideAngular),(0,Df.Q)(u.insideAngular)),this.user=Ae.pipe(wC(He),(0,EC.R)(u.outsideAngular),(0,Df.Q)(u.insideAngular)),this.idToken=this.user.pipe(Jn(We=>We?(0,dn.D)(We.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Jn(We=>We?(0,dn.D)(We.getIdTokenResult()):ft(null))),this.credential=(0,Lg.T)(Ae,V,this.authState.pipe(S(We=>!We))).pipe((0,ht.U)(We=>We?.user?We:null),(0,EC.R)(u.outsideAngular),(0,Df.Q)(u.insideAngular))}return(0,er.pX)(this,Z,s,{spy:{apply:(Q,Ae,Be)=>{(Q.startsWith("signIn")||Q.startsWith("createUser"))&&Be.then(He=>V.next(He))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(er.Dh),l.LFG(er.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(In.HU),l.LFG(Xy,8),l.LFG(ev,8),l.LFG(Id,8),l.LFG(Rf,8),l.LFG(Td,8),l.LFG(HC,8),l.LFG(bd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jC=(()=>{class n{constructor(){Xg.Z.registerVersion("angularfire",In.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[em]}),n})(),Sd=(()=>{class n{constructor(e,i){this.afAuth=e,this.router=i}googleLogin(){return this.afAuth.signInWithPopup(new VA.Q).then(e=>{localStorage[n.tokenKey]=e.credential.accessToken,localStorage[n.userUidKey]=e?.user?.uid,this.router.navigate([""])}).catch(e=>{this.router.navigate(["/login"])})}logout(){return localStorage.removeItem(n.tokenKey),localStorage.removeItem(n.userUidKey),this.afAuth.signOut()}}return n.tokenKey="userToken",n.userUidKey="userUid",n.\u0275fac=function(e){return new(e||n)(l.LFG(em),l.LFG(Oi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tv{}const Po="*";function Qs(n,t){return{type:7,name:n,definitions:t,options:{}}}function As(n,t=null){return{type:4,styles:t,timings:n}}function Dd(n,t=null){return{type:2,steps:n,options:t}}function os(n){return{type:6,styles:n,offset:null}}function iv(n,t,e){return{type:0,name:n,styles:t,options:e}}function La(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function $C(n,t=null){return{type:8,animation:n,options:t}}function zC(n,t=null){return{type:10,animation:n,options:t}}function cx(n){Promise.resolve().then(n)}class Pf{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cx(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class WC{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?cx(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==s&&this._onFinish()}),u.onDestroy(()=>{++i==s&&this._onDestroy()}),u.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class An{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,u,d,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((u=t.length)!=e.length)return!1;for(s=u;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(i!=r)return!1;var p=t instanceof Date,_=e instanceof Date;if(p!=_)return!1;if(p&&_)return t.getTime()==e.getTime();var E=t instanceof RegExp,T=e instanceof RegExp;if(E!=T)return!1;if(E&&T)return t.toString()==e.toString();var x=Object.keys(t);if((u=x.length)!==Object.keys(e).length)return!1;for(s=u;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,x[s]))return!1;for(s=u;0!=s--;)if(!this.equalsByValue(t[d=x[s]],e[d]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let s=0,u=i.length;s<u;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let s=!1;for(let u=0;u<i.length;u++)if(this.findIndexInList(i[u],r)>e){i.splice(u,0,t),s=!0;break}s||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let s=-1;const u=this.isEmpty(t),d=this.isEmpty(e);return s=u&&d?0:u?r:d?-r:"string"==typeof t&&"string"==typeof e?t.localeCompare(e,i,{numeric:!0}):t<e?-1:t>e?1:0,s}static sort(t,e,i=1,r,s=1){return(1===s?i:s)*An.compare(t,e,r,i)}static merge(t,e){return null!=t&&"object"!=typeof t||null!=e&&"object"!=typeof e?null!=t&&"string"!=typeof t||null!=e&&"string"!=typeof e?e||t:[t||"",e||""].join(" "):{...t||{},...e||{}}}}var nm=0;function qC(){return"pr_id_"+ ++nm}var Js=function sv(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,u,d)=>{u&&(u.style.zIndex=String(((s,u)=>{let d=n.length>0?n[n.length-1]:{key:s,value:u},p=d.value+(d.key===s?0:u)+1;return n.push({key:s,value:p}),p})(s,d)))},clear:s=>{s&&((s=>{n=n.filter(u=>u.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();const KC=["*"];let Tr=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),tc=(()=>{class n{constructor(){this.filters={startsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=An.removeAccents(i.toString()).toLocaleLowerCase(r);return An.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=An.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==An.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=An.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===An.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=An.removeAccents(i.toString()).toLocaleLowerCase(r),u=An.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==u.indexOf(s,u.length-s.length)},equals:(e,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():An.removeAccents(e.toString()).toLocaleLowerCase(r)==An.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(e,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():An.removeAccents(e.toString()).toLocaleLowerCase(r)==An.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(e,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(An.equals(e,i[r]))return!0;return!1},between:(e,i)=>null==i||null==i[0]||null==i[1]||null!=e&&(e.getTime?i[0].getTime()<=e.getTime()&&e.getTime()<=i[1].getTime():i[0]<=e&&e<=i[1]),lt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<i.getTime():e<i),lte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<=i.getTime():e<=i),gt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>i.getTime():e>i),gte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>=i.getTime():e>=i),is:(e,i,r)=>this.filters.equals(e,i,r),isNot:(e,i,r)=>this.filters.notEquals(e,i,r),before:(e,i,r)=>this.filters.lt(e,i,r),after:(e,i,r)=>this.filters.gt(e,i,r),dateIs:(e,i)=>null==i||null!=e&&e.toDateString()===i.toDateString(),dateIsNot:(e,i)=>null==i||null!=e&&e.toDateString()!==i.toDateString(),dateBefore:(e,i)=>null==i||null!=e&&e.getTime()<i.getTime(),dateAfter:(e,i)=>null==i||null!=e&&e.getTime()>i.getTime()}}filter(e,i,r,s,u){let d=[];if(e)for(let p of e)for(let _ of i){let E=An.resolveFieldData(p,_);if(this.filters[s](E,r,u)){d.push(p);break}}return d}register(e,i){this.filters[e]=i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QP=(()=>{class n{constructor(){this.messageSource=new Qi.x,this.clearSource=new Qi.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ad=(()=>{class n{constructor(){this.clickSource=new Qi.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xd=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[Tr.STARTS_WITH,Tr.CONTAINS,Tr.NOT_CONTAINS,Tr.ENDS_WITH,Tr.EQUALS,Tr.NOT_EQUALS],numeric:[Tr.EQUALS,Tr.NOT_EQUALS,Tr.LESS_THAN,Tr.LESS_THAN_OR_EQUAL_TO,Tr.GREATER_THAN,Tr.GREATER_THAN_OR_EQUAL_TO],date:[Tr.DATE_IS,Tr.DATE_IS_NOT,Tr.DATE_BEFORE,Tr.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Qi.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),av=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:KC,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},encapsulation:2}),n})(),dx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:KC,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},encapsulation:2}),n})(),Hi=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),Xs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})(),Bn=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})(),be=(()=>{class n{static addClass(e,i){e&&i&&(e.classList?e.classList.add(i):e.className+=" "+i)}static addMultipleClasses(e,i){if(e&&i)if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,i){return!(!e||!i)&&(e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var u=0;u<r.length;u++){if(r[u]==e)return s;r[u].attributes&&r[u].attributes[i]&&1==r[u].nodeType&&s++}return-1}static appendOverlay(e,i,r="self"){"self"!==r&&e&&i&&this.appendChild(e,i)}static alignOverlay(e,i,r="self",s=!0){e&&i&&(s&&(e.style.minWidth||(e.style.minWidth=n.getOuterWidth(i)+"px")),"self"===r?this.relativePosition(e,i):this.absolutePosition(e,i))}static relativePosition(e,i){const r=Z=>{if(Z)return"relative"===getComputedStyle(Z).getPropertyValue("position")?Z:r(Z.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),u=i.offsetHeight,d=i.getBoundingClientRect(),p=this.getWindowScrollTop(),_=this.getWindowScrollLeft(),E=this.getViewport(),x=r(e)?.getBoundingClientRect()||{top:-1*p,left:-1*_};let N,V;d.top+u+s.height>E.height?(N=d.top-x.top-s.height,e.style.transformOrigin="bottom",d.top+N<0&&(N=-1*d.top)):(N=u+d.top-x.top,e.style.transformOrigin="top"),V=s.width>E.width?-1*(d.left-x.left):d.left-x.left+s.width>E.width?-1*(d.left-x.left+s.width-E.width):d.left-x.left,e.style.top=N+"px",e.style.left=V+"px"}static absolutePosition(e,i){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,u=r.width,d=i.offsetHeight,p=i.offsetWidth,_=i.getBoundingClientRect(),E=this.getWindowScrollTop(),T=this.getWindowScrollLeft(),x=this.getViewport();let N,V;_.top+d+s>x.height?(N=_.top+E-s,e.style.transformOrigin="bottom",N<0&&(N=E)):(N=d+_.top+E,e.style.transformOrigin="top"),V=_.left+u>x.width?Math.max(0,_.left+T+p-u):_.left+T,e.style.top=N+"px",e.style.left=V+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,u=d=>{let p=window.getComputedStyle(d,null);return s.test(p.getPropertyValue("overflow"))||s.test(p.getPropertyValue("overflowX"))||s.test(p.getPropertyValue("overflowY"))};for(let d of r){let p=1===d.nodeType&&d.dataset.scrollselectors;if(p){let _=p.split(",");for(let E of _){let T=this.findSingle(d,E);T&&u(T)&&i.push(T)}}9!==d.nodeType&&u(d)&&i.push(d)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,u=getComputedStyle(e).getPropertyValue("paddingTop"),d=u?parseFloat(u):0,p=e.getBoundingClientRect(),E=i.getBoundingClientRect().top+document.body.scrollTop-(p.top+document.body.scrollTop)-s-d,T=e.scrollTop,x=e.clientHeight,N=this.getOuterHeight(i);E<0?e.scrollTop=T+E:E+N>x&&(e.scrollTop=T+E-x+N)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,u=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}static fadeOut(e,i){var r=1,d=50/i;let p=setInterval(()=>{(r-=d)<=0&&(r=0,clearInterval(p)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(u){return-1!==[].indexOf.call(document.querySelectorAll(u),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,i){e&&document.activeElement!==e&&e.focus(i)}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,i){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const u=(d=e)&&d.constructor&&d.call&&d.apply?e():e;return u&&9===u.nodeType||this.isExist(u)?u:null}var d}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class as{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=be.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let kd=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(be.removeClass(i,"p-ink-active"),!be.getHeight(i)&&!be.getWidth(i)){let d=Math.max(be.getOuterWidth(this.el.nativeElement),be.getOuterHeight(this.el.nativeElement));i.style.height=d+"px",i.style.width=d+"px"}let r=be.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-be.getWidth(i)/2,u=e.pageY-r.top+document.body.scrollLeft-be.getHeight(i)/2;i.style.top=u+"px",i.style.left=s+"px",be.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let d=this.getInk();d&&be.removeClass(d,"p-ink-active")},401)}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&be.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),be.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),be.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(xd,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),Al=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})();function Od(n,t){if(1&n&&l._UZ(0,"span",11),2&n){const e=l.oxw(2).$implicit;l.Q6J("innerHTML",e.summary,l.oJD)}}function Rd(n,t){if(1&n&&l._UZ(0,"span",12),2&n){const e=l.oxw(2).$implicit;l.Q6J("innerHTML",e.detail,l.oJD)}}function Nd(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Od,1,1,"span",9),l.YNc(2,Rd,1,1,"span",10),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngIf",e.summary),l.xp6(1),l.Q6J("ngIf",e.detail)}}function Pd(n,t){if(1&n&&(l.TgZ(0,"span",15),l._uU(1),l.qZA()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.summary)}}function Fd(n,t){if(1&n&&(l.TgZ(0,"span",16),l._uU(1),l.qZA()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.detail)}}function Ld(n,t){if(1&n&&(l.YNc(0,Pd,2,1,"span",13),l.YNc(1,Fd,2,1,"span",14)),2&n){const e=l.oxw().$implicit;l.Q6J("ngIf",e.summary),l.xp6(1),l.Q6J("ngIf",e.detail)}}function Vd(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",17),l.NdJ("click",function(){l.CHM(e);const r=l.oxw().index,s=l.oxw(2);return l.KtG(s.removeMessage(r))}),l._UZ(1,"i",18),l.qZA()}}const Ud=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},ZC=function(n){return{value:"visible",params:n}},YC=function(n,t,e,i){return{"pi-info-circle":n,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":i}};function QC(n,t){if(1&n&&(l.TgZ(0,"div",4)(1,"div",5),l._UZ(2,"span",6),l.YNc(3,Nd,3,2,"ng-container",1),l.YNc(4,Ld,2,2,"ng-template",null,7,l.W1O),l.YNc(6,Vd,2,0,"button",8),l.qZA()()),2&n){const e=t.$implicit,i=l.MAs(5),r=l.oxw(2);l.Tol("p-message p-message-"+e.severity),l.Q6J("@messageAnimation",l.VKq(12,ZC,l.WLB(9,Ud,r.showTransitionOptions,r.hideTransitionOptions))),l.xp6(2),l.Tol("p-message-icon pi"+(e.icon?" "+e.icon:"")),l.Q6J("ngClass",l.l5B(14,YC,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),l.xp6(1),l.Q6J("ngIf",!r.escape)("ngIfElse",i),l.xp6(3),l.Q6J("ngIf",r.closable)}}function JC(n,t){if(1&n&&(l.ynx(0),l.YNc(1,QC,7,19,"div",3),l.BQk()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.value)}}function XC(n,t){1&n&&l.GkF(0)}function eb(n,t){if(1&n&&(l.TgZ(0,"div",19)(1,"div",5),l.YNc(2,XC,1,0,"ng-container",20),l.qZA()()),2&n){const e=l.oxw();l.Q6J("ngClass","p-message p-message-"+e.severity),l.xp6(2),l.Q6J("ngTemplateOutlet",e.contentTemplate)}}let tb=(()=>{class n{constructor(e,i,r){this.messageService=e,this.el=i,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new l.vpe}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let i=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...i]:[...i]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((i,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(QP,8),l.Y36(l.SBq),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-messages"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Hi,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,i){if(1&e&&(l.TgZ(0,"div",0),l.YNc(1,JC,2,1,"ng-container",1),l.YNc(2,eb,3,2,"ng-template",null,2,l.W1O),l.qZA()),2&e){const r=l.MAs(3);l.Tol(i.styleClass),l.Q6J("ngStyle",i.style),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate)("ngIfElse",r)}},dependencies:[Jt,_r,gn,Zi,or,kd],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[Qs("messageAnimation",[La(":enter",[os({opacity:0,transform:"translateY(-25%)"}),As("{{showTransitionParams}}")]),La(":leave",[As("{{hideTransitionParams}}",os({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),n})(),nb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Al]}),n})();function ib(n,t){1&n&&l.GkF(0)}const hx=function(n,t,e,i){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":i}};function fx(n,t){if(1&n&&l._UZ(0,"span",4),2&n){const e=l.oxw();l.Tol(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),l.Q6J("ngClass",l.l5B(4,hx,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),l.uIk("aria-hidden",!0)}}function rb(n,t){if(1&n&&(l.TgZ(0,"span",5),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.uIk("aria-hidden",e.icon&&!e.label),l.xp6(1),l.Oqu(e.label)}}function px(n,t){if(1&n&&(l.TgZ(0,"span",4),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.Tol(e.badgeClass),l.Q6J("ngClass",e.badgeStyleClass()),l.xp6(1),l.Oqu(e.badge)}}const sb=function(n,t,e,i,r){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":t,"p-disabled":e,"p-button-loading":i,"p-button-loading-label-only":r}},lv=["*"];let im=(()=>{class n{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){if(this._initialStyleClass=this.el.nativeElement.className,be.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl(),this.label){let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",e.appendChild(document.createTextNode(this.label)),this.el.nativeElement.appendChild(e)}this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&An.isEmpty(this.el.nativeElement.textContent)&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&be.addClass(e,i);let r=this.getIconClass();r&&be.addMultipleClasses(e,r),this.el.nativeElement.insertBefore(e,this.el.nativeElement.firstChild)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=be.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=be.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(be.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label,(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),uv=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Hi,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:lv,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"button",0),l.NdJ("click",function(s){return i.onClick.emit(s)})("focus",function(s){return i.onFocus.emit(s)})("blur",function(s){return i.onBlur.emit(s)}),l.Hsn(1),l.YNc(2,ib,1,0,"ng-container",1),l.YNc(3,fx,1,9,"span",2),l.YNc(4,rb,2,2,"span",3),l.YNc(5,px,2,4,"span",2),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngStyle",i.style)("disabled",i.disabled||i.loading)("ngClass",l.qbA(11,sb,i.icon&&!i.label,("top"===i.iconPos||"bottom"===i.iconPos)&&i.label,i.disabled||i.loading,i.loading,i.loading&&!i.icon&&i.label)),l.uIk("type",i.type)("aria-label",i.ariaLabel),l.xp6(2),l.Q6J("ngTemplateOutlet",i.contentTemplate),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&(i.icon||i.loading)),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&i.label),l.xp6(1),l.Q6J("ngIf",!i.contentTemplate&&i.badge))},dependencies:[Jt,gn,Zi,or,kd],encapsulation:2,changeDetection:0}),n})(),Bd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Al]}),n})();function rm(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span")(1,"p-messages",8),l.NdJ("valueChange",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.msgsWarn=r)}),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(1),l.Q6J("value",e.msgsWarn)}}let gx=(()=>{class n{constructor(e,i){this.route=e,this.loginSerice=i,this.error=!1,this.msgs=[],this.msgsWarn=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{1==e.error?(this.error=!0,this.msgsWarn=[vC.warnLogin]):this.error=!1})}loginGoogle(){this.loginSerice.googleLogin().then()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(nu),l.Y36(Sd))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","align-items-center"],[1,"padding-login","grid","justify-content-center"],[1,"login-box","login","col-6","justify-content-center"],["src","assets/OrelhaSeca.png",1,"login-logo"],[1,"text-center"],[4,"ngIf"],[3,"value","valueChange"],[1,"login-button"],["type","button","label","Google",1,"",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l._UZ(5,"img",5),l.TgZ(6,"div",6),l.YNc(7,rm,2,1,"span",7),l.TgZ(8,"p-messages",8),l.NdJ("valueChange",function(s){return i.msgs=s}),l.qZA()(),l.TgZ(9,"div",9)(10,"p-button",10),l.NdJ("click",function(){return i.loginGoogle()}),l.qZA()()()()()()()),2&e&&(l.xp6(7),l.Q6J("ngIf",i.error),l.xp6(1),l.Q6J("value",i.msgs))},dependencies:[gn,tb,uv],styles:[".login-box[_ngcontent-%COMP%]{width:100%;height:100%;max-width:500px;text-align:center}.login[_ngcontent-%COMP%]{background:rgb(255,255,255);justify-content:center;align-items:center;border-left-color:#010c29;border-right-color:#010c29;border-bottom-color:#010c29;border-top-color:#010c29;border-style:solid;border-radius:5px;border-width:2px}.login-logo[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:20px;width:90%;max-width:400px}.padding-login[_ngcontent-%COMP%]{padding-top:100px;align-items:center;align-content:center;align-self:center}.text-center[_ngcontent-%COMP%]{text-align:center}.login-button[_ngcontent-%COMP%]{text-align:center;padding-top:1em;padding-bottom:2em}.login-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em}.menu-container[_ngcontent-%COMP%]{background-color:#fff;max-width:1900px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:1810px;padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;min-height:100%}"]}),n})();const sm=["*"];let ru=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-template"]],ngContentSelectors:sm,decls:8,vars:0,consts:[[1,"navbar"],["icon","pi pi-home","routerLink","/home",1,"menu-item"],["icon","pi pi-search","routerLink","/search",1,"menu-item"],["icon","pi pi-plus","routerLink","/novo",1,"menu-item"],["icon","pi pi-bell","routerLink","/notific",1,"menu-item"],["icon","pi pi-user","routerLink","/config",1,"menu-item"],[1,"content"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"div",0),l._UZ(1,"p-button",1)(2,"p-button",2)(3,"p-button",3)(4,"p-button",4)(5,"p-button",5),l.qZA(),l.TgZ(6,"div",6),l.Hsn(7),l.qZA())},dependencies:[pd,uv],styles:[".navbar[_ngcontent-%COMP%]{overflow:hidden;background-color:#333;position:fixed;bottom:0;width:100%;text-align:center;padding-top:.5em;padding-bottom:.5em;justify-content:space-evenly;display:flex;z-index:999}.content[_ngcontent-%COMP%]{margin-bottom:30px}.menu-item[_ngcontent-%COMP%]{padding-left:.2em;padding-right:.2em}"]}),n})();function cv(n,t){1&n&&l.GkF(0)}function ab(n,t){if(1&n&&(l.TgZ(0,"div",8),l.Hsn(1,1),l.YNc(2,cv,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngTemplateOutlet",e.headerTemplate)}}function dv(n,t){1&n&&l.GkF(0)}function lb(n,t){if(1&n&&(l.TgZ(0,"div",9),l._uU(1),l.YNc(2,dv,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij(" ",e.header," "),l.xp6(1),l.Q6J("ngTemplateOutlet",e.titleTemplate)}}function ub(n,t){1&n&&l.GkF(0)}function hv(n,t){if(1&n&&(l.TgZ(0,"div",10),l._uU(1),l.YNc(2,ub,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.hij(" ",e.subheader," "),l.xp6(1),l.Q6J("ngTemplateOutlet",e.subtitleTemplate)}}function cb(n,t){1&n&&l.GkF(0)}function mx(n,t){1&n&&l.GkF(0)}function db(n,t){if(1&n&&(l.TgZ(0,"div",11),l.Hsn(1,2),l.YNc(2,mx,1,0,"ng-container",6),l.qZA()),2&n){const e=l.oxw();l.xp6(2),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const hb=["*",[["p-header"]],[["p-footer"]]],fb=["*","p-header","p-footer"];let fv=(()=>{class n{constructor(e){this.el=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"title":this.titleTemplate=e.template;break;case"subtitle":this.subtitleTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-card"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,av,5),l.Suo(r,dx,5),l.Suo(r,Hi,4)),2&e){let s;l.iGM(s=l.CRH())&&(i.headerFacet=s.first),l.iGM(s=l.CRH())&&(i.footerFacet=s.first),l.iGM(s=l.CRH())&&(i.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:fb,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(e,i){1&e&&(l.F$t(hb),l.TgZ(0,"div",0),l.YNc(1,ab,3,1,"div",1),l.TgZ(2,"div",2),l.YNc(3,lb,3,2,"div",3),l.YNc(4,hv,3,2,"div",4),l.TgZ(5,"div",5),l.Hsn(6),l.YNc(7,cb,1,0,"ng-container",6),l.qZA(),l.YNc(8,db,3,1,"div",7),l.qZA()()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass","p-card p-component")("ngStyle",i.style),l.xp6(1),l.Q6J("ngIf",i.headerFacet||i.headerTemplate),l.xp6(2),l.Q6J("ngIf",i.header||i.titleTemplate),l.xp6(1),l.Q6J("ngIf",i.subheader||i.subtitleTemplate),l.xp6(3),l.Q6J("ngTemplateOutlet",i.contentTemplate),l.xp6(1),l.Q6J("ngIf",i.footerFacet||i.footerTemplate))},dependencies:[Jt,gn,Zi,or],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),_x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Xs]}),n})();function pb(n,t){if(1&n&&(l.TgZ(0,"div",8)(1,"div",9),l._UZ(2,"img",10),l.qZA(),l.TgZ(3,"div",11),l._uU(4),l.qZA()()),2&n){const e=l.oxw();l.xp6(2),l.s9C("src",e.profiePic,l.LSH),l.xp6(2),l.hij(" ",e.userName," ")}}function gb(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.liked=!r.liked)}),l.qZA()}}function pv(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",13),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.liked=!r.liked)}),l.qZA()}}let gv=(()=>{class n{constructor(){this.liked=!1,this.videoSrc="assets/video01.mp4",this.userName="Caesar Zama Altran",this.profiePic="assets/profile-cza.png",this.legenda="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-feed-card"]],inputs:{videoSrc:"videoSrc",userName:"userName",profiePic:"profiePic",legenda:"legenda"},decls:11,vars:5,consts:[["pTemplate","header"],["controls","",2,"width","100%",3,"src"],["class","pi pi-heart post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],["class","pi pi-heart-fill post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],[1,"pi","pi-share-alt","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[1,"pi","pi-comments","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[2,"margin-bottom","1em"],[2,"font-weight","bold"],[1,"flex","content-card-header","align-content-center"],[2,"padding-right",".4em"],[1,"profile-img",3,"src"],[1,"align-content-center",2,"padding-top",".28em","font-weight","bold"],[1,"pi","pi-heart","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"],[1,"pi","pi-heart-fill","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"p-card"),l.YNc(1,pb,5,2,"ng-template",0),l._UZ(2,"video",1),l.YNc(3,gb,1,0,"i",2),l.YNc(4,pv,1,0,"i",3),l._UZ(5,"i",4)(6,"i",5),l.TgZ(7,"div",6)(8,"span",7),l._uU(9),l.qZA(),l._uU(10),l.qZA()()),2&e&&(l.xp6(2),l.s9C("src",i.videoSrc,l.LSH),l.xp6(1),l.Q6J("ngIf",!i.liked),l.xp6(1),l.Q6J("ngIf",i.liked),l.xp6(5),l.hij("",i.userName," "),l.xp6(1),l.hij("",i.legenda," "))},dependencies:[gn,Hi,fv],styles:[".content-card-header[_ngcontent-%COMP%]{padding-top:.5em;padding-left:.5em;padding-bottom:.2em}.post-actions[_ngcontent-%COMP%]{padding:.2em}"]}),n})(),mb=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:0,consts:[["profiePic","assets/profile-lincoln.jpg","userName","Lincoln Ricardo","videoSrc","assets/video02.mp4","legenda","GO GO GO! Hackathon com @CaesarAltran @GuilhermeNascimento @NathanAlmici e @BrunoRicardo"],["profiePic","assets/profile-elisa.jpeg","userName","Elisa \xc1tkinson","videoSrc","assets/video04.mp4"],["profiePic","assets/cza-profile.png","userName","Caesar Zama Altran","videoSrc","assets/video03.mp4","legenda","Ol\xe1 mundo! Estamos na Hakathon!!!1! #dev"],["profiePic","assets/profile-nathan.jpg","userName","Nathan Almici","videoSrc","assets/video06.mp4"],["profiePic","assets/profile-bruno.jpg","userName","Bruno Ricardo","videoSrc","assets/video05.mp4"]],template:function(e,i){1&e&&(l.TgZ(0,"app-template"),l._UZ(1,"app-feed-card",0)(2,"app-feed-card",1)(3,"app-feed-card",2)(4,"app-feed-card",3)(5,"app-feed-card",4),l.qZA())},dependencies:[ru,gv]}),n})(),Hd=(()=>{class n{constructor(e){this.router=e}canActivate(e,i){return localStorage,console.log(localStorage[Sd.tokenKey]),null==localStorage[Sd.tokenKey]?(this.router.navigate(["/login"]),!1):"null"!=localStorage[Sd.tokenKey]||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Oi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mv=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),su=(()=>{class n extends mv{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Ur=new l.OlP("NgValueAccessor"),XP={provide:Ur,useExisting:(0,l.Gpc)(()=>Ff),multi:!0},vx=new l.OlP("CompositionEventMode");let Ff=(()=>{class n extends mv{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yx(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(vx,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([XP]),l.qOj]}),n})();const Sr=new l.OlP("NgValidators"),ou=new l.OlP("NgAsyncValidators");function om(n){return null!=n}function am(n){return(0,l.QGY)(n)?(0,dn.D)(n):n}function eo(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function bb(n,t){return t.map(e=>e(n))}function Fo(n){return n.map(t=>function Ib(n){return!n.validate}(t)?t:e=>t.validate(e))}function xs(n){return null!=n?function to(n){if(!n)return null;const t=n.filter(om);return 0==t.length?null:function(e){return eo(bb(e,t))}}(Fo(n)):null}function lm(n){return null!=n?function Iv(n){if(!n)return null;const t=n.filter(om);return 0==t.length?null:function(e){return function _b(...n){const t=(0,ns.jO)(n),{args:e,keys:i}=Io(n),r=new bi.y(s=>{const{length:u}=e;if(!u)return void s.complete();const d=new Array(u);let p=u,_=u;for(let E=0;E<u;E++){let T=!1;(0,ur.Xf)(e[E]).subscribe((0,Gn.x)(s,x=>{T||(T=!0,_--),d[E]=x},()=>p--,void 0,()=>{(!p||!T)&&(_||s.next(i?yl(i,d):d),s.complete())}))}});return t?r.pipe(Jl(t)):r}(bb(e,t).map(am)).pipe((0,ht.U)(eo))}}(Fo(n)):null}function Tb(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Tv(n){return n?Array.isArray(n)?n:[n]:[]}function jd(n,t){return Array.isArray(n)?n.includes(t):n===t}function Gd(n,t){const e=Tv(t);return Tv(n).forEach(r=>{jd(e,r)||e.push(r)}),e}function Ab(n,t){return Tv(t).filter(e=>!jd(n,e))}class Sv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=xs(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=lm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Br extends Sv{get formDirective(){return null}get path(){return null}}class xl extends Sv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let um=(()=>{class n extends class Dv{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xl,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})();const Vf="VALID",dm="INVALID",rc="PENDING",Uf="DISABLED";function Ob(n){return Array.isArray(n)?xs(n):n||null}function Rb(n){return Array.isArray(n)?lm(n):n||null}function hm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function $d(n,t){(function Pv(n,t){const e=function Sb(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(Tb(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function Db(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(Tb(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();jf(t._rawValidators,r),jf(t._rawAsyncValidators,r)})(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function zd(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gm(n,t)})}(n,t),function sF(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function rF(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gm(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function sc(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function jf(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function gm(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ub(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Vv(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vm={provide:xl,useExisting:(0,l.Gpc)(()=>Zd)},Bv=(()=>Promise.resolve())();let Zd=(()=>{class n extends xl{constructor(e,i,r,s,u){super(),this._changeDetectorRef=u,this.control=new class extends class Nv{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Ob(this._rawValidators),this._composedAsyncValidatorFn=Rb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Vf}get invalid(){return this.status===dm}get pending(){return this.status==rc}get disabled(){return this.status===Uf}get enabled(){return this.status!==Uf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Ob(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Rb(t)}addValidators(t){this.setValidators(Gd(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Gd(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Ab(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Ab(t,this._rawAsyncValidators))}hasValidator(t){return jd(this._rawValidators,t)}hasAsyncValidator(t){return jd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=rc,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Uf,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Vf,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vf||this.status===rc)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uf:Vf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=rc,this._hasOwnPendingAsyncValidator=!0;const e=am(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Uf:this.errors?dm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rc)?rc:this._anyControlsHaveStatus(dm)?dm:Vf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hm(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,i){super(function kv(n){return(hm(n)?n.validators:n)||null}(e),function Ov(n,t){return(hm(t)?t.asyncValidators:n)||null}(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hm(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Vv(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ub(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ub(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Vv(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new l.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function qd(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Ff?e=s:function Wd(n){return Object.getPrototypeOf(n.constructor)===su}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function Lv(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$d(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Bv.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,l.D6c)(i);Bv.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function Bf(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Br,9),l.Y36(Sr,10),l.Y36(ou,10),l.Y36(Ur,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([vm]),l.qOj,l.TTD]}),n})(),$b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),qx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[$b]}),n})(),Kx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[qx]}),n})();const Zv=["container"],Yv=["inputfield"],uI=["contentWrapper"];function Qv(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",8),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.clear())}),l.qZA()}}function Qx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",9),l.NdJ("click",function(r){l.CHM(e),l.oxw();const s=l.MAs(1),u=l.oxw();return l.KtG(u.onButtonClick(r,s))}),l.qZA()}if(2&n){const e=l.oxw(2);l.Q6J("icon",e.icon)("disabled",e.disabled),l.uIk("aria-label",e.iconAriaLabel)}}function Jx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"input",4,5),l.NdJ("focus",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputFocus(r))})("keydown",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputKeydown(r))})("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onInputClick())})("blur",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputBlur(r))})("input",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onUserInput(r))}),l.qZA(),l.YNc(2,Qv,1,0,"i",6),l.YNc(3,Qx,1,3,"button",7)}if(2&n){const e=l.oxw();l.Tol(e.inputStyleClass),l.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),l.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),l.xp6(2),l.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),l.xp6(1),l.Q6J("ngIf",e.showIcon)}}function Jv(n,t){1&n&&l.GkF(0)}function Xx(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",30),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onPrevButtonClick(r))}),l._UZ(1,"span",31),l.qZA()}}function cI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",32),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.switchToMonthView(r))})("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))}),l._uU(1),l.qZA()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.Q6J("disabled",i.switchViewButtonDisabled()),l.xp6(1),l.hij(" ",i.getMonthName(e.month)," ")}}function Jd(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"button",33),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.switchToYearView(r))})("keydown",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onContainerButtonKeydown(r))}),l._uU(1),l.qZA()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.Q6J("disabled",i.switchViewButtonDisabled()),l.xp6(1),l.hij(" ",i.getYear(e)," ")}}function dI(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(5);l.xp6(1),l.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function eM(n,t){1&n&&l.GkF(0)}const tM=function(n){return{$implicit:n}};function hI(n,t){if(1&n&&(l.TgZ(0,"span",34),l.YNc(1,dI,2,2,"ng-container",13),l.YNc(2,eM,1,0,"ng-container",35),l.qZA()),2&n){const e=l.oxw(4);l.xp6(1),l.Q6J("ngIf",!e.decadeTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",l.VKq(3,tM,e.yearPickerValues))}}function Xv(n,t){if(1&n&&(l.TgZ(0,"th",41)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=l.oxw(5);l.xp6(2),l.Oqu(e.getTranslation("weekHeader"))}}function nM(n,t){if(1&n&&(l.TgZ(0,"th",42)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=t.$implicit;l.xp6(2),l.Oqu(e)}}function ew(n,t){if(1&n&&(l.TgZ(0,"td",45)(1,"span",46),l._uU(2),l.qZA()()),2&n){const e=l.oxw().index,i=l.oxw(2).$implicit;l.xp6(2),l.hij(" ",i.weekNumbers[e]," ")}}function iM(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.day)}}function fI(n,t){1&n&&l.GkF(0)}const bm=function(n,t){return{"p-highlight":n,"p-disabled":t}};function pI(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"span",48),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw().$implicit,u=l.oxw(6);return l.KtG(u.onDateSelect(r,s))})("keydown",function(r){l.CHM(e);const s=l.oxw().$implicit,u=l.oxw(3).index,d=l.oxw(3);return l.KtG(d.onDateCellKeydown(r,s,u))}),l.YNc(2,iM,2,1,"ng-container",13),l.YNc(3,fI,1,0,"ng-container",35),l.qZA(),l.BQk()}if(2&n){const e=l.oxw().$implicit,i=l.oxw(6);l.xp6(1),l.Q6J("ngClass",l.WLB(4,bm,i.isSelected(e),!e.selectable)),l.xp6(1),l.Q6J("ngIf",!i.dateTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",l.VKq(7,tM,e))}}const gI=function(n,t){return{"p-datepicker-other-month":n,"p-datepicker-today":t}};function mI(n,t){if(1&n&&(l.TgZ(0,"td",47),l.YNc(1,pI,4,9,"ng-container",13),l.qZA()),2&n){const e=t.$implicit,i=l.oxw(6);l.Q6J("ngClass",l.WLB(2,gI,e.otherMonth,e.today)),l.xp6(1),l.Q6J("ngIf",!e.otherMonth||i.showOtherMonths)}}function _I(n,t){if(1&n&&(l.TgZ(0,"tr"),l.YNc(1,ew,3,1,"td",43),l.YNc(2,mI,2,5,"td",44),l.qZA()),2&n){const e=t.$implicit,i=l.oxw(5);l.xp6(1),l.Q6J("ngIf",i.showWeek),l.xp6(1),l.Q6J("ngForOf",e)}}function rM(n,t){if(1&n&&(l.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),l.YNc(4,Xv,3,1,"th",38),l.YNc(5,nM,3,1,"th",39),l.qZA()(),l.TgZ(6,"tbody"),l.YNc(7,_I,3,2,"tr",40),l.qZA()()()),2&n){const e=l.oxw().$implicit,i=l.oxw(3);l.xp6(4),l.Q6J("ngIf",i.showWeek),l.xp6(1),l.Q6J("ngForOf",i.weekDays),l.xp6(2),l.Q6J("ngForOf",e.dates)}}function sM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",20)(1,"div",21),l.YNc(2,Xx,2,0,"button",22),l.TgZ(3,"div",23),l.YNc(4,cI,2,2,"button",24),l.YNc(5,Jd,2,2,"button",25),l.YNc(6,hI,3,5,"span",26),l.qZA(),l.TgZ(7,"button",27),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onNextButtonClick(r))}),l._UZ(8,"span",28),l.qZA()(),l.YNc(9,rM,8,3,"div",29),l.qZA()}if(2&n){const e=t.index,i=l.oxw(3);l.xp6(2),l.Q6J("ngIf",0===e),l.xp6(2),l.Q6J("ngIf","date"===i.currentView),l.xp6(1),l.Q6J("ngIf","year"!==i.currentView),l.xp6(1),l.Q6J("ngIf","year"===i.currentView),l.xp6(1),l.Udp("display",1===i.numberOfMonths||e===i.numberOfMonths-1?"inline-flex":"none"),l.xp6(2),l.Q6J("ngIf","date"===i.currentView)}}function oM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span",51),l.NdJ("click",function(r){const u=l.CHM(e).index,d=l.oxw(4);return l.KtG(d.onMonthSelect(r,u))})("keydown",function(r){const u=l.CHM(e).index,d=l.oxw(4);return l.KtG(d.onMonthCellKeydown(r,u))}),l._uU(1),l.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=l.oxw(4);l.Q6J("ngClass",l.WLB(2,bm,r.isMonthSelected(i),r.isMonthDisabled(i))),l.xp6(1),l.hij(" ",e," ")}}function aM(n,t){if(1&n&&(l.TgZ(0,"div",49),l.YNc(1,oM,2,5,"span",50),l.qZA()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.monthPickerValues())}}const yI=function(n){return{"p-highlight":n}};function IF(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"span",54),l.NdJ("click",function(r){const u=l.CHM(e).$implicit,d=l.oxw(4);return l.KtG(d.onYearSelect(r,u))})("keydown",function(r){const u=l.CHM(e).$implicit,d=l.oxw(4);return l.KtG(d.onYearCellKeydown(r,u))}),l._uU(1),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw(4);l.Q6J("ngClass",l.VKq(2,yI,i.isYearSelected(e))),l.xp6(1),l.hij(" ",e," ")}}function vI(n,t){if(1&n&&(l.TgZ(0,"div",52),l.YNc(1,IF,2,4,"span",53),l.qZA()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.yearPickerValues())}}function lM(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"div",16),l.YNc(2,sM,10,7,"div",17),l.qZA(),l.YNc(3,aM,2,1,"div",18),l.YNc(4,vI,2,1,"div",19),l.BQk()),2&n){const e=l.oxw(2);l.xp6(2),l.Q6J("ngForOf",e.months),l.xp6(1),l.Q6J("ngIf","month"===e.currentView),l.xp6(1),l.Q6J("ngIf","year"===e.currentView)}}function uM(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function TF(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function SF(n,t){if(1&n&&(l.TgZ(0,"div",60)(1,"span"),l._uU(2),l.qZA()()),2&n){const e=l.oxw(3);l.xp6(2),l.Oqu(e.timeSeparator)}}function cM(n,t){1&n&&(l.ynx(0),l._uU(1,"0"),l.BQk())}function dM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",65)(1,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.incrementSecond(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.incrementSecond(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(2,"span",58),l.qZA(),l.TgZ(3,"span"),l.YNc(4,cM,2,0,"ng-container",13),l._uU(5),l.qZA(),l.TgZ(6,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.decrementSecond(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.decrementSecond(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(3);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(7,"span",59),l.qZA()()}if(2&n){const e=l.oxw(3);l.xp6(4),l.Q6J("ngIf",e.currentSecond<10),l.xp6(1),l.Oqu(e.currentSecond)}}function wI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",66)(1,"button",67),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))}),l._UZ(2,"span",58),l.qZA(),l.TgZ(3,"span"),l._uU(4),l.qZA(),l.TgZ(5,"button",67),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.toggleAMPM(r))}),l._UZ(6,"span",59),l.qZA()()}if(2&n){const e=l.oxw(3);l.xp6(4),l.Oqu(e.pm?"PM":"AM")}}function EI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",55)(1,"div",56)(2,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementHour(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementHour(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(3,"span",58),l.qZA(),l.TgZ(4,"span"),l.YNc(5,uM,2,0,"ng-container",13),l._uU(6),l.qZA(),l.TgZ(7,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementHour(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementHour(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(8,"span",59),l.qZA()(),l.TgZ(9,"div",60)(10,"span"),l._uU(11),l.qZA()(),l.TgZ(12,"div",61)(13,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementMinute(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.incrementMinute(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(14,"span",58),l.qZA(),l.TgZ(15,"span"),l.YNc(16,TF,2,0,"ng-container",13),l._uU(17),l.qZA(),l.TgZ(18,"button",57),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementMinute(r))})("keydown.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.decrementMinute(r))})("mousedown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onTimePickerElementMouseLeave())}),l._UZ(19,"span",59),l.qZA()(),l.YNc(20,SF,3,1,"div",62),l.YNc(21,dM,8,2,"div",63),l.YNc(22,wI,7,1,"div",64),l.qZA()}if(2&n){const e=l.oxw(2);l.xp6(5),l.Q6J("ngIf",e.currentHour<10),l.xp6(1),l.Oqu(e.currentHour),l.xp6(5),l.Oqu(e.timeSeparator),l.xp6(5),l.Q6J("ngIf",e.currentMinute<10),l.xp6(1),l.Oqu(e.currentMinute),l.xp6(3),l.Q6J("ngIf",e.showSeconds),l.xp6(1),l.Q6J("ngIf",e.showSeconds),l.xp6(1),l.Q6J("ngIf","12"==e.hourFormat)}}const tw=function(n){return[n]};function CI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",68)(1,"button",69),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onTodayButtonClick(r))}),l.qZA(),l.TgZ(2,"button",69),l.NdJ("keydown",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onContainerButtonKeydown(r))})("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onClearButtonClick(r))}),l.qZA()()}if(2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("label",e.getTranslation("today"))("ngClass",l.VKq(4,tw,e.todayButtonStyleClass)),l.xp6(1),l.Q6J("label",e.getTranslation("clear"))("ngClass",l.VKq(6,tw,e.clearButtonStyleClass))}}function bI(n,t){1&n&&l.GkF(0)}const II=function(n,t,e,i,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},nw=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},hM=function(n){return{value:"visibleTouchUI",params:n}},fM=function(n){return{value:"visible",params:n}};function TI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",10,11),l.NdJ("@overlayAnimation.start",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayAnimationDone(r))})("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayClick(r))}),l.Hsn(2),l.YNc(3,Jv,1,0,"ng-container",12),l.YNc(4,lM,5,3,"ng-container",13),l.YNc(5,EI,23,8,"div",14),l.YNc(6,CI,3,8,"div",15),l.Hsn(7,1),l.YNc(8,bI,1,0,"ng-container",12),l.qZA()}if(2&n){const e=l.oxw();l.Tol(e.panelStyleClass),l.Q6J("ngStyle",e.panelStyle)("ngClass",l.HTZ(11,II,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?l.VKq(21,hM,l.WLB(18,nw,e.showTransitionOptions,e.hideTransitionOptions)):l.VKq(26,fM,l.WLB(23,nw,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),l.xp6(3),l.Q6J("ngTemplateOutlet",e.headerTemplate),l.xp6(1),l.Q6J("ngIf",!e.timeOnly),l.xp6(1),l.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),l.xp6(1),l.Q6J("ngIf",e.showButtonBar),l.xp6(2),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const Wf=[[["p-header"]],[["p-footer"]]],SI=function(n,t,e,i){return{"p-calendar":!0,"p-calendar-w-btn":n,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":i}},DI=["p-header","p-footer"],AI={provide:Ur,useExisting:(0,l.Gpc)(()=>iw),multi:!0};let iw=(()=>{class n{constructor(e,i,r,s,u,d){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.config=u,this.overlayService=d,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onClose=new l.vpe,this.onSelect=new l.vpe,this.onClear=new l.vpe,this.onInput=new l.vpe,this.onTodayClick=new l.vpe,this.onClearClick=new l.vpe,this.onMonthChange=new l.vpe,this.onYearChange=new l.vpe,this.onClickOutside=new l.vpe,this.onShow=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(p,_){return"12"==this.hourFormat?12===p?_?12:0:_?p+12:p:p}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const i=e||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const i=e.split(":"),r=parseInt(i[0]),s=parseInt(i[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=qC();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=be.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,i){this.yearOptions=[];for(let r=e;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),i=this.getTranslation(Bn.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let i=0;i<=11;i++)e.push(this.config.getTranslation("monthNamesShort")[i]);return e}yearPickerValues(){let e=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(i+r);return e}createMonths(e,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,u=i;s>11&&(s=s%11-1,u=i+1),this.months.push(this.createMonth(s,u))}}getWeekNumber(e){let i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(e,i){let r=[],s=this.getFirstDayOfMonthIndex(e,i),u=this.getDaysCountInMonth(e,i),d=this.getDaysCountInPrevMonth(e,i),p=1,_=new Date,E=[],T=Math.ceil((u+s)/7);for(let x=0;x<T;x++){let N=[];if(0==x){for(let Z=d-s+1;Z<=d;Z++){let Q=this.getPreviousMonthAndYear(e,i);N.push({day:Z,month:Q.month,year:Q.year,otherMonth:!0,today:this.isToday(_,Z,Q.month,Q.year),selectable:this.isSelectable(Z,Q.month,Q.year,!0)})}let V=7-N.length;for(let Z=0;Z<V;Z++)N.push({day:p,month:e,year:i,today:this.isToday(_,p,e,i),selectable:this.isSelectable(p,e,i,!1)}),p++}else for(let V=0;V<7;V++){if(p>u){let Z=this.getNextMonthAndYear(e,i);N.push({day:p-u,month:Z.month,year:Z.year,otherMonth:!0,today:this.isToday(_,p-u,Z.month,Z.year),selectable:this.isSelectable(p-u,Z.month,Z.year,!0)})}else N.push({day:p,month:e,year:i,today:this.isToday(_,p,e,i),selectable:this.isSelectable(p,e,i,!1)});p++}this.showWeek&&E.push(this.getWeekNumber(new Date(N[0].year,N[0].month,N[0].day))),r.push(N)}return{month:e,year:i,dates:r,weekNumbers:E}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,i){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,i){"year"===this.view?this.onDateSelect(e,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)e+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let i=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?i=this.formatTime(e):(i=this.formatDate(e,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(e)))),i}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let i=new Date(e.year,e.month,e.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&i.getTime()>=r.getTime()?s=i:(r=i,s=null),this.updateModel([r,s])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;this.value&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(e,i){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(i);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,i){return 32-this.daylightSavingAdjust(new Date(i,e,32)).getDate()}getDaysCountInPrevMonth(e,i){let r=this.getPreviousMonthAndYear(e,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,i){let r,s;return 0===e?(r=11,s=i-1):(r=e-1,s=i),{month:r,year:s}}getNextMonthAndYear(e,i){let r,s;return 11===e?(r=0,s=i+1):(r=e+1,s=i),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,e),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){const[i,r]=this.isRangeSelection()?this.value:[this.value,this.value],s=new Date(this.currentYear,e,1);return s>=i&&s<=(r??i)}return!1}isMonthDisabled(e){return!this.isSelectable(1,e,this.currentYear,!1)}isYearSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===e}return!1}isDateEquals(e,i){return!!(e&&e instanceof Date)&&e.getDate()===i.day&&e.getMonth()===i.month&&e.getFullYear()===i.year}isDateBetween(e,i,r){if(e&&i){let u=new Date(r.year,r.month,r.day);return e.getTime()<=u.getTime()&&i.getTime()>=u.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,i,r,s){return e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,i,r,s){let u=!0,d=!0,p=!0,_=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>e))&&(u=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<e))&&(d=!1),this.disabledDates&&(p=!this.isDateDisabled(e,i,r)),this.disabledDays&&(_=!this.isDayDisabled(e,i,r)),u&&d&&p&&_)}isDateDisabled(e,i,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===i&&s.getDate()===e)return!0;return!1}isDayDisabled(e,i,r){if(this.disabledDays){let u=new Date(r,i,e).getDay();return-1!==this.disabledDays.indexOf(u)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(be.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,i,r){const s=e.currentTarget,u=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let d=be.index(u),p=u.parentElement.nextElementSibling;p?be.hasClass(p.children[d].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(p.children[d].children[0].tabIndex="0",p.children[d].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let d=be.index(u),p=u.parentElement.previousElementSibling;if(p){let _=p.children[d].children[0];be.hasClass(_,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(_.tabIndex="0",_.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let d=u.previousElementSibling;if(d){let p=d.children[0];be.hasClass(p,"p-disabled")||be.hasClass(p.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let d=u.nextElementSibling;if(d){let p=d.children[0];be.hasClass(p,"p-disabled")?this.navigateToMonth(!1,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,u=be.index(r);let d=s[40===e.which?u+3:u-3];d&&(d.tabIndex="0",d.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let d=r.previousElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let d=r.nextElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,i),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,u=be.index(r);let d=s[40===e.which?u+2:u-2];d&&(d.tabIndex="0",d.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let d=r.previousElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let d=r.nextElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,i){if(e)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let s=be.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),u=s[s.length-1];u.tabIndex="0",u.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=be.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?be.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():be.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=be.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(e=i[i.length-1])}else e=be.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const e=this.contentViewChild?.nativeElement;let i;if("month"===this.currentView){let r=be.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),s=be.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");r.forEach(u=>u.tabIndex=-1),i=s||r[0],0===r.length&&be.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(d=>d.tabIndex=-1)}else if("year"===this.currentView){let r=be.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),s=be.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");r.forEach(u=>u.tabIndex=-1),i=s||r[0],0===r.length&&be.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(d=>d.tabIndex=-1)}else if(i=be.findSingle(e,"span.p-highlight"),!i){let r=be.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i=r||be.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}i&&(i.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{i.focus()},1),this.preventFocus=!1)}trapFocus(e){let i=be.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,i,r,s){let u=this.value;const d=this.convertTo24Hour(e,s);this.isRangeSelection()&&(u=this.value[1]||this.value[0]),this.isMultipleSelection()&&(u=this.value[this.value.length-1]);const p=u?u.toDateString():null;return!(this.minDate&&p&&this.minDate.toDateString()===p&&(this.minDate.getHours()>d||this.minDate.getHours()===d&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&p&&this.maxDate.toDateString()===p&&(this.maxDate.getHours()<d||this.maxDate.getHours()===d&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,i,r){this.disabled||(this.repeat(e,null,i,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,i,r,s){let u=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},u),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),e.preventDefault()}incrementMinute(e){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}decrementMinute(e){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}incrementSecond(e){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}decrementSecond(e){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let i=e.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(e)}isValidSelection(e){let i=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(i=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=e.length>1&&e[1]>e[0]),i}parseValueFromString(e){if(!e||0===e.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);i=[];for(let s of r)i.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");i=[];for(let s=0;s<r.length;s++)i[s]=this.parseDateTime(r[s].trim())}return i}parseDateTime(e){let i,r=e.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let u="12"==this.hourFormat?r.pop():null,d=r.pop();i=this.parseDate(r.join(" "),s),this.populateTime(i,d,u)}else i=this.parseDate(e,s)}return i}populateTime(e,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(i);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&An.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Js.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Js.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Js.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):be.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=be.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=be.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=be.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",be.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):be.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),be.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),be.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(be.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let i,e=document.body.children;for(let r=0;r<e.length;r++)if(be.hasClass(e[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||be.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Bn.FIRST_DAY_OF_WEEK)}formatDate(e,i){if(!e)return"";let r;const s=E=>{const T=r+1<i.length&&i.charAt(r+1)===E;return T&&r++,T},u=(E,T,x)=>{let N=""+T;if(s(E))for(;N.length<x;)N="0"+N;return N},d=(E,T,x,N)=>s(E)?N[T]:x[T];let p="",_=!1;if(e)for(r=0;r<i.length;r++)if(_)"'"!==i.charAt(r)||s("'")?p+=i.charAt(r):_=!1;else switch(i.charAt(r)){case"d":p+=u("d",e.getDate(),2);break;case"D":p+=d("D",e.getDay(),this.getTranslation(Bn.DAY_NAMES_SHORT),this.getTranslation(Bn.DAY_NAMES));break;case"o":p+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":p+=u("m",e.getMonth()+1,2);break;case"M":p+=d("M",e.getMonth(),this.getTranslation(Bn.MONTH_NAMES_SHORT),this.getTranslation(Bn.MONTH_NAMES));break;case"y":p+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":p+=e.getTime();break;case"!":p+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?p+="'":_=!0;break;default:p+=i.charAt(r)}return p}formatTime(e){if(!e)return"";let i="",r=e.getHours(),s=e.getMinutes(),u=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=s<10?"0"+s:s,this.showSeconds&&(i+=":",i+=u<10?"0"+u:u),"12"==this.hourFormat&&(i+=e.getHours()>11?" PM":" AM"),i}parseTime(e){let i=e.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(i[0]),u=parseInt(i[1]),d=this.showSeconds?parseInt(i[2]):null;if(isNaN(s)||isNaN(u)||s>23||u>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(d)||d>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:u,second:d}}parseDate(e,i){if(null==i||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,u,V,d=0,p="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),_=-1,E=-1,T=-1,x=-1,N=!1,Z=He=>{let We=r+1<i.length&&i.charAt(r+1)===He;return We&&r++,We},Q=He=>{let We=Z(He),ct="@"===He?14:"!"===He?20:"y"===He&&We?4:"o"===He?3:2,Xt=new RegExp("^\\d{"+("y"===He?ct:1)+","+ct+"}"),Pn=e.substring(d).match(Xt);if(!Pn)throw"Missing number at position "+d;return d+=Pn[0].length,parseInt(Pn[0],10)},Ae=(He,We,ct)=>{let gt=-1,Xt=Z(He)?ct:We,Pn=[];for(let mi=0;mi<Xt.length;mi++)Pn.push([mi,Xt[mi]]);Pn.sort((mi,Ls)=>-(mi[1].length-Ls[1].length));for(let mi=0;mi<Pn.length;mi++){let Ls=Pn[mi][1];if(e.substr(d,Ls.length).toLowerCase()===Ls.toLowerCase()){gt=Pn[mi][0],d+=Ls.length;break}}if(-1!==gt)return gt+1;throw"Unknown name at position "+d},Be=()=>{if(e.charAt(d)!==i.charAt(r))throw"Unexpected literal at position "+d;d++};for("month"===this.view&&(T=1),r=0;r<i.length;r++)if(N)"'"!==i.charAt(r)||Z("'")?Be():N=!1;else switch(i.charAt(r)){case"d":T=Q("d");break;case"D":Ae("D",this.getTranslation(Bn.DAY_NAMES_SHORT),this.getTranslation(Bn.DAY_NAMES));break;case"o":x=Q("o");break;case"m":E=Q("m");break;case"M":E=Ae("M",this.getTranslation(Bn.MONTH_NAMES_SHORT),this.getTranslation(Bn.MONTH_NAMES));break;case"y":_=Q("y");break;case"@":V=new Date(Q("@")),_=V.getFullYear(),E=V.getMonth()+1,T=V.getDate();break;case"!":V=new Date((Q("!")-this.ticksTo1970)/1e4),_=V.getFullYear(),E=V.getMonth()+1,T=V.getDate();break;case"'":Z("'")?Be():N=!0;break;default:Be()}if(d<e.length&&(u=e.substr(d),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===_?_=(new Date).getFullYear():_<100&&(_+=(new Date).getFullYear()-(new Date).getFullYear()%100+(_<=p?0:-100)),x>-1)for(E=1,T=x;s=this.getDaysCountInMonth(_,E-1),!(T<=s);)E++,T-=s;if("year"===this.view&&(E=-1===E?1:E,T=-1===T?1:T),V=this.daylightSavingAdjust(new Date(_,E-1,T)),V.getFullYear()!==_||V.getMonth()+1!==E||V.getDate()!==T)throw"Invalid date";return V}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:s,numMonths:u}=i[r],d=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let p=u;p<this.numberOfMonths;p++)d+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${p+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${d}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new as(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return be.hasClass(e.target,"p-datepicker-prev")||be.hasClass(e.target,"p-datepicker-prev-icon")||be.hasClass(e.target,"p-datepicker-next")||be.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!be.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Js.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(xd),l.Y36(Ad))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Hi,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(Zv,5),l.Gf(Yv,5),l.Gf(uI,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.containerViewChild=r.first),l.iGM(r=l.CRH())&&(i.inputfieldViewChild=r.first),l.iGM(r=l.CRH())&&(i.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[l._Bn([AI])],ngContentSelectors:DI,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,i){1&e&&(l.F$t(Wf),l.TgZ(0,"span",0,1),l.YNc(2,Jx,4,17,"ng-template",2),l.YNc(3,TI,9,28,"div",3),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",l.l5B(6,SI,i.showIcon,i.timeOnly,i.disabled,i.focus))("ngStyle",i.style),l.xp6(2),l.Q6J("ngIf",!i.inline),l.xp6(1),l.Q6J("ngIf",i.inline||i.overlayVisible))},dependencies:[Jt,_r,gn,Zi,or,im,kd],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[Qs("overlayAnimation",[iv("visibleTouchUI",os({transform:"translate(-50%,-50%)",opacity:1})),La("void => visible",[os({opacity:0,transform:"scaleY(0.8)"}),As("{{showTransitionParams}}",os({opacity:1,transform:"*"}))]),La("visible => void",[As("{{hideTransitionParams}}",os({opacity:0}))]),La("void => visibleTouchUI",[os({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),As("{{showTransitionParams}}")]),La("visibleTouchUI => void",[As("{{hideTransitionParams}}",os({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),n})(),rw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Bd,Xs,Al,Bd,Xs]}),n})(),pM=(()=>{class n{constructor(e,i,r){this.el=e,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Zd,8),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i.onInput(s)}),2&e&&l.ekj("p-filled",i.filled)}}),n})(),gM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})(),mM=(()=>{class n{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=be.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),n})(),xI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})();const _M=["input"];function yM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",3),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.clear())}),l.qZA()}}const vM={provide:Ur,useExisting:(0,l.Gpc)(()=>MI),multi:!0};let MI=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.type="text",this.slotChar="_",this.autoClear=!0,this.showClear=!1,this.characterPattern="[A-Za-z]",this.onComplete=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onInput=new l.vpe,this.onKeydown=new l.vpe,this.onClear=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){let e=be.getUserAgent();this.androidChrome=/chrome/i.test(e)&&/android/i.test(e),this.initMask()}get mask(){return this._mask}set mask(e){this._mask=e,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let e=this.mask.split("");for(let i=0;i<e.length;i++){let r=e[i];"?"==r?(this.len--,this.partialPosition=i):this.defs[r]?(this.tests.push(new RegExp(this.defs[r])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<e.length;i++){let r=e[i];"?"!=r&&this.buffer.push(this.defs[r]?this.getPlaceholder(i):r)}this.defaultBuffer=this.buffer.join("")}writeValue(e){this.value=e,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.value=null==this.value||null==this.value?"":this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value,this.updateFilledState())}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}caret(e,i){let r,s,u;if(this.inputViewChild.nativeElement.offsetParent&&this.inputViewChild.nativeElement===this.inputViewChild.nativeElement.ownerDocument.activeElement){if("number"!=typeof e)return this.inputViewChild.nativeElement.setSelectionRange?(s=this.inputViewChild.nativeElement.selectionStart,u=this.inputViewChild.nativeElement.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),s=0-r.duplicate().moveStart("character",-1e5),u=s+r.text.length),{begin:s,end:u};s=e,u="number"==typeof i?i:s,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(s,u):this.inputViewChild.nativeElement.createTextRange&&(r=this.inputViewChild.nativeElement.createTextRange(),r.collapse(!0),r.moveEnd("character",u),r.moveStart("character",s),r.select())}}isCompleted(){for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(e){return this.slotChar.charAt(e<this.slotChar.length?e:0)}seekNext(e){for(;++e<this.len&&!this.tests[e];);return e}seekPrev(e){for(;--e>=0&&!this.tests[e];);return e}shiftL(e,i){let r,s;if(!(e<0)){for(r=e,s=this.seekNext(i);r<this.len;r++)if(this.tests[r]){if(!(s<this.len&&this.tests[r].test(this.buffer[s])))break;this.buffer[r]=this.buffer[s],this.buffer[s]=this.getPlaceholder(s),s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}}shiftR(e){let i,r,s,u;for(i=e,r=this.getPlaceholder(e);i<this.len;i++)if(this.tests[i]){if(s=this.seekNext(i),u=this.buffer[i],this.buffer[i]=r,!(s<this.len&&this.tests[s].test(u)))break;r=u}}handleAndroidInput(e){var i=this.inputViewChild.nativeElement.value,r=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);r.begin>0&&!this.tests[r.begin-1];)r.begin--;if(0===r.begin)for(;r.begin<this.firstNonMaskPos&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);r.begin<this.len&&!this.tests[r.begin];)r.begin++;setTimeout(()=>{this.caret(r.begin,r.begin),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(e){if(this.focused=!1,this.onModelTouched(),this.checkVal(),this.updateFilledState(),this.onBlur.emit(e),this.inputViewChild.nativeElement.value!=this.focusText||this.inputViewChild.nativeElement.value!=this.value){this.updateModel(e);let i=document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild.nativeElement.dispatchEvent(i)}}onInputKeydown(e){if(this.readonly)return;let r,s,u,i=e.which||e.keyCode,d=/iphone/i.test(be.getUserAgent());this.oldVal=this.inputViewChild.nativeElement.value,this.onKeydown.emit(e),8===i||46===i||d&&127===i?(r=this.caret(),s=r.begin,u=r.end,u-s==0&&(s=46!==i?this.seekPrev(s):u=this.seekNext(s-1),u=46===i?this.seekNext(u):u),this.clearBuffer(s,u),this.shiftL(s,u-1),this.updateModel(e),this.onInput.emit(e),e.preventDefault()):13===i?(this.onInputBlur(e),this.updateModel(e)):27===i&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(e),e.preventDefault())}onKeyPress(e){if(!this.readonly){var s,u,d,p,i=e.which||e.keyCode,r=this.caret();e.ctrlKey||e.altKey||e.metaKey||i<32||i>34&&i<41||(i&&13!==i&&(r.end-r.begin!=0&&(this.clearBuffer(r.begin,r.end),this.shiftL(r.begin,r.end-1)),(s=this.seekNext(r.begin-1))<this.len&&(u=String.fromCharCode(i),this.tests[s].test(u)&&(this.shiftR(s),this.buffer[s]=u,this.writeBuffer(),d=this.seekNext(s),/android/i.test(be.getUserAgent())?setTimeout(()=>{this.caret(d)},0):this.caret(d),r.begin<=this.lastRequiredNonMaskPos&&(p=this.isCompleted()),this.onInput.emit(e))),e.preventDefault()),this.updateModel(e),this.updateFilledState(),p&&this.onComplete.emit())}}clearBuffer(e,i){let r;for(r=e;r<i&&r<this.len;r++)this.tests[r]&&(this.buffer[r]=this.getPlaceholder(r))}writeBuffer(){this.inputViewChild.nativeElement.value=this.buffer.join("")}checkVal(e){let s,u,d,i=this.inputViewChild.nativeElement.value,r=-1;for(s=0,d=0;s<this.len;s++)if(this.tests[s]){for(this.buffer[s]=this.getPlaceholder(s);d++<i.length;)if(u=i.charAt(d-1),this.tests[s].test(u)){this.buffer[s]=u,r=s;break}if(d>i.length){this.clearBuffer(s+1,this.len);break}}else this.buffer[s]===i.charAt(d)&&d++,s<this.partialPosition&&(r=s);return e?this.writeBuffer():r+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild.nativeElement.value.substring(0,r+1)),this.partialPosition?s:this.firstNonMaskPos}onInputFocus(e){if(this.readonly)return;let i;this.focused=!0,clearTimeout(this.caretTimeoutId),this.focusText=this.inputViewChild.nativeElement.value,i=this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild.nativeElement===this.inputViewChild.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(e)}onInputChange(e){this.androidChrome?this.handleAndroidInput(e):this.handleInputChange(e),this.onInput.emit(e)}handleInputChange(e){this.readonly||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(e),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let e=[];for(let i=0;i<this.buffer.length;i++){let r=this.buffer[i];this.tests[i]&&r!=this.getPlaceholder(i)&&e.push(r)}return e.join("")}updateModel(e){const i=this.unmask?this.getUnmaskedValue():e.target.value;(null!==i||void 0!==i)&&(this.value=i,this.onModelChange(this.value))}updateFilledState(){this.filled=this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}focus(){this.inputViewChild.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-inputMask"]],viewQuery:function(e,i){if(1&e&&l.Gf(_M,7),2&e){let r;l.iGM(r=l.CRH())&&(i.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:6,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputmask-clearable",i.showClear&&!i.disabled)},inputs:{type:"type",slotChar:"slotChar",autoClear:"autoClear",showClear:"showClear",style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",disabled:"disabled",readonly:"readonly",unmask:"unmask",name:"name",required:"required",characterPattern:"characterPattern",autoFocus:"autoFocus",autocomplete:"autocomplete",mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},features:[l._Bn([vM])],decls:3,vars:18,consts:[["pInputText","","pAutoFocus","",1,"p-inputmask",3,"ngStyle","ngClass","disabled","readonly","autofocus","focus","blur","keydown","keypress","input","paste"],["input",""],["class","p-inputmask-clear-icon pi pi-times",3,"click",4,"ngIf"],[1,"p-inputmask-clear-icon","pi","pi-times",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"input",0,1),l.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onInputKeydown(s)})("keypress",function(s){return i.onKeyPress(s)})("input",function(s){return i.onInputChange(s)})("paste",function(s){return i.handleInputChange(s)}),l.qZA(),l.YNc(2,yM,1,0,"i",2)),2&e&&(l.Q6J("ngStyle",i.style)("ngClass",i.styleClass)("disabled",i.disabled)("readonly",i.readonly)("autofocus",i.autoFocus),l.uIk("id",i.inputId)("type",i.type)("name",i.name)("placeholder",i.placeholder)("title",i.title)("size",i.size)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-label",i.ariaLabel)("aria-required",i.ariaRequired)("required",i.required),l.xp6(2),l.Q6J("ngIf",null!=i.value&&i.filled&&i.showClear&&!i.disabled))},dependencies:[Jt,gn,or,pM,mM],styles:[".p-inputmask-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputmask-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),qf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,gM,xI]}),n})();const wM=["overlay"],sw=["content"];function Va(n,t){1&n&&l.GkF(0)}const EM=function(n,t,e){return{showTransitionParams:n,hideTransitionParams:t,transform:e}},ow=function(n){return{value:"visible",params:n}},Kf=function(n){return{mode:n}},CM=function(n){return{$implicit:n}};function bM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1,3),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onOverlayContentAnimationDone(r))}),l.Hsn(2),l.YNc(3,Va,1,0,"ng-container",4),l.qZA()}if(2&n){const e=l.oxw(2);l.Tol(e.contentStyleClass),l.Q6J("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",l.VKq(11,ow,l.kEZ(7,EM,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),l.xp6(3),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.VKq(15,CM,l.VKq(13,Kf,e.overlayMode)))}}const IM=function(n,t,e,i,r,s,u,d,p,_,E,T,x,N){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":n,"p-overlay-center":t,"p-overlay-top":e,"p-overlay-top-start":i,"p-overlay-top-end":r,"p-overlay-bottom":s,"p-overlay-bottom-start":u,"p-overlay-bottom-end":d,"p-overlay-left":p,"p-overlay-left-start":_,"p-overlay-left-end":E,"p-overlay-right":T,"p-overlay-right-start":x,"p-overlay-right-end":N}};function Im(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1,2),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onOverlayClick(r))}),l.YNc(2,bM,4,17,"div",0),l.qZA()}if(2&n){const e=l.oxw();l.Tol(e.styleClass),l.Q6J("ngStyle",e.style)("ngClass",l.rFY(5,IM,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),l.xp6(2),l.Q6J("ngIf",e.visible)}}const Tm=["*"],TM={provide:Ur,useExisting:(0,l.Gpc)(()=>aw),multi:!0},SM=$C([os({transform:"{{transform}}",opacity:0}),As("{{showTransitionParams}}")]),kI=$C([As("{{hideTransitionParams}}",os({transform:"{{transform}}",opacity:0}))]);let aw=(()=>{class n{constructor(e,i,r,s,u,d){this.document=e,this.el=i,this.renderer=r,this.config=s,this.overlayService=u,this.cd=d,this.visibleChange=new l.vpe,this.onBeforeShow=new l.vpe,this.onShow=new l.vpe,this.onBeforeHide=new l.vpe,this.onHide=new l.vpe,this.onAnimationStart=new l.vpe,this.onAnimationDone=new l.vpe,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return An.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return An.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return An.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return An.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}get modal(){return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return be.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,i=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&be.focus(this.targetEl),this.modal&&be.addClass(this.document?.body,"p-overflow-hidden")}hide(e,i=!1){this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&be.focus(this.targetEl),this.modal&&be.removeClass(this.document?.body,"p-overflow-hidden")}alignOverlay(){!this.modal&&be.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&Js.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),be.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),this.modal&&be.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const i=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(i,!0),this.bindListeners();break;case"void":this.hide(i,!0),this.unbindListeners(),Js.clear(i),this.modalVisible=!1}this.handleEvents("onAnimationDone",e)}handleEvents(e,i){this[e].emit(i),this.options&&this.options[e]&&this.options[e](i),this.config?.overlayOptions&&this.config?.overlayOptions[e]&&this.config?.overlayOptions[e](i)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new as(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen("window","resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!be.isTouchDevice()}):!be.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(be.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),Js.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ge),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(xd),l.Y36(Ad),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-overlay"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Hi,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(wM,5),l.Gf(sw,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.overlayViewChild=r.first),l.iGM(r=l.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[l._Bn([TM])],ngContentSelectors:Tm,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(l.F$t(),l.YNc(0,Im,3,20,"div",0)),2&e&&l.Q6J("ngIf",i.modalVisible)},dependencies:[Jt,gn,Zi,or],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[Qs("overlayContentAnimation",[La(":enter",[zC(SM)]),La(":leave",[zC(kI)])])]},changeDetection:0}),n})(),Sm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Xs,Xs]}),n})();const OI=["element"],DM=["content"];function AM(n,t){1&n&&l.GkF(0)}const RI=function(n,t){return{$implicit:n,options:t}};function lw(n,t){if(1&n&&(l.ynx(0),l.YNc(1,AM,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.WLB(2,RI,e.loadedItems,e.getContentOptions()))}}function uw(n,t){1&n&&l.GkF(0)}function NI(n,t){if(1&n&&(l.ynx(0),l.YNc(1,uw,1,0,"ng-container",7),l.BQk()),2&n){const e=t.$implicit,i=t.index,r=l.oxw(3);l.xp6(1),l.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",l.WLB(2,RI,e,r.getOptions(i)))}}const cw=function(n){return{"p-scroller-loading":n}};function dw(n,t){if(1&n&&(l.TgZ(0,"div",8,9),l.YNc(2,NI,2,5,"ng-container",10),l.qZA()),2&n){const e=l.oxw(2);l.Q6J("ngClass",l.VKq(4,cw,e.d_loading))("ngStyle",e.contentStyle),l.xp6(2),l.Q6J("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function xM(n,t){if(1&n&&l._UZ(0,"div",11),2&n){const e=l.oxw(2);l.Q6J("ngStyle",e.spacerStyle)}}function MM(n,t){1&n&&l.GkF(0)}const kM=function(n){return{numCols:n}},PI=function(n){return{options:n}};function FI(n,t){if(1&n&&(l.ynx(0),l.YNc(1,MM,1,0,"ng-container",7),l.BQk()),2&n){const e=t.index,i=l.oxw(4);l.xp6(1),l.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",l.VKq(4,PI,i.getLoaderOptions(e,i.both&&l.VKq(2,kM,i._numItemsInViewport.cols))))}}function hw(n,t){if(1&n&&(l.ynx(0),l.YNc(1,FI,2,6,"ng-container",14),l.BQk()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.loaderArr)}}function LI(n,t){1&n&&l.GkF(0)}const VI=function(){return{styleClass:"p-scroller-loading-icon"}};function UI(n,t){if(1&n&&(l.ynx(0),l.YNc(1,LI,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.Q6J("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",l.VKq(3,PI,l.DdM(2,VI)))}}function BI(n,t){1&n&&l._UZ(0,"i",16)}function OM(n,t){if(1&n&&(l.YNc(0,UI,2,5,"ng-container",0),l.YNc(1,BI,1,0,"ng-template",null,15,l.W1O)),2&n){const e=l.MAs(2),i=l.oxw(3);l.Q6J("ngIf",i.loaderIconTemplate)("ngIfElse",e)}}const HI=function(n){return{"p-component-overlay":n}};function jI(n,t){if(1&n&&(l.TgZ(0,"div",12),l.YNc(1,hw,2,1,"ng-container",0),l.YNc(2,OM,3,2,"ng-template",null,13,l.W1O),l.qZA()),2&n){const e=l.MAs(3),i=l.oxw(2);l.Q6J("ngClass",l.VKq(3,HI,!i.loaderTemplate)),l.xp6(1),l.Q6J("ngIf",i.loaderTemplate)("ngIfElse",e)}}const RM=function(n,t,e){return{"p-scroller":!0,"p-scroller-inline":n,"p-both-scroll":t,"p-horizontal-scroll":e}};function GI(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"div",2,3),l.NdJ("scroll",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onContainerScroll(r))}),l.YNc(3,lw,2,5,"ng-container",0),l.YNc(4,dw,3,6,"ng-template",null,4,l.W1O),l.YNc(6,xM,1,1,"div",5),l.YNc(7,jI,4,5,"div",6),l.qZA(),l.BQk()}if(2&n){const e=l.MAs(5),i=l.oxw();l.xp6(1),l.Tol(i._styleClass),l.Q6J("ngStyle",i._style)("ngClass",l.kEZ(10,RM,i.inline,i.both,i.horizontal)),l.uIk("id",i._id)("tabindex",i.tabindex),l.xp6(2),l.Q6J("ngIf",i.contentTemplate)("ngIfElse",e),l.xp6(3),l.Q6J("ngIf",i._showSpacer),l.xp6(1),l.Q6J("ngIf",!i.loaderDisabled&&i._showLoader&&i.d_loading)}}function $I(n,t){1&n&&l.GkF(0)}const Hr=function(n,t){return{rows:n,columns:t}};function Xd(n,t){if(1&n&&(l.ynx(0),l.YNc(1,$I,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",l.WLB(5,RI,e.items,l.WLB(2,Hr,e._items,e.loadedColumns)))}}function NM(n,t){if(1&n&&(l.Hsn(0),l.YNc(1,Xd,2,8,"ng-container",17)),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.contentTemplate)}}const PM=["*"];let DF=(()=>{class n{constructor(e,i){this.cd=e,this.zone=i,this.onLazyLoad=new l.vpe,this.onScroll=new l.vpe,this.onScrollIndexChange=new l.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([i,r])=>this[`_${i}`]!==r&&(this[`_${i}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(e){let i=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,i=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading,i=!0),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}this.initialized&&!i&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.viewInit()}ngAfterViewChecked(){this.initialized||this.viewInit(),this.calculateAutoSize()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){be.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=be.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=be.getHeight(this.elementViewChild.nativeElement),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||be.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,i="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),u=(_=0,E)=>_<=E?0:_,d=(_,E,T)=>_*E+T,p=(_=0,E=0)=>this.scrollTo({left:_,top:E,behavior:i});this.both?(this.first={rows:u(e[0],r[0]),cols:u(e[1],r[1])},p(d(this.first.cols,this._itemSize[1],s.left),d(this.first.rows,this._itemSize[0],s.top))):(this.first=u(e,r),this.horizontal?p(d(this.first,this._itemSize,s.left),0):p(0,d(this.first,this._itemSize,s.top)))}scrollInView(e,i,r="auto"){if(i){const{first:s,viewport:u}=this.getRenderedRange(),d=(E=0,T=0)=>this.scrollTo({left:E,top:T,behavior:r}),_="to-end"===i;if("to-start"===i){if(this.both)u.first.rows-s.rows>e[0]?d(u.first.cols*this._itemSize[1],(u.first.rows-1)*this._itemSize[0]):u.first.cols-s.cols>e[1]&&d((u.first.cols-1)*this._itemSize[1],u.first.rows*this._itemSize[0]);else if(u.first-s>e){const E=(u.first-1)*this._itemSize;this.horizontal?d(E,0):d(0,E)}}else if(_)if(this.both)u.last.rows-s.rows<=e[0]+1?d(u.first.cols*this._itemSize[1],(u.first.rows+1)*this._itemSize[0]):u.last.cols-s.cols<=e[1]+1&&d((u.first.cols+1)*this._itemSize[1],u.first.rows*this._itemSize[0]);else if(u.last-s<=e+1){const E=(u.first+1)*this._itemSize;this.horizontal?d(E,0):d(0,E)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,u)=>Math.floor(s/(u||s));let i=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:u}=this.elementViewChild.nativeElement;this.both?(i={rows:e(s,this._itemSize[0]),cols:e(u,this._itemSize[1])},r={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols}):(i=e(this.horizontal?u:s,this._itemSize),r=i+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:i,last:r}}}calculateNumItems(){const e=this.getContentPosition(),i=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(_,E)=>Math.ceil(_/(E||_)),u=_=>Math.ceil(_/2),d=this.both?{rows:s(r,this._itemSize[0]),cols:s(i,this._itemSize[1])}:s(this.horizontal?i:r,this._itemSize);return{numItemsInViewport:d,numToleratedItems:this.d_numToleratedItems||(this.both?[u(d.rows),u(d.cols)]:u(d))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:i}=this.calculateNumItems(),r=(d,p,_,E=!1)=>this.getLast(d+p+(d<_?2:3)*_,E),s=this.first,u=this.both?{rows:r(this.first.rows,e.rows,i[0]),cols:r(this.first.cols,e.cols,i[1],!0)}:r(this.first,e,i);this.last=u,this.numItemsInViewport=e,this.d_numToleratedItems=i,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:s.cols}:0:s,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:i}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(i<this.defaultHeight?i:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,i=!1){return this._items?Math.min(i?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),i=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),s=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),u=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:i,right:r,top:s,bottom:u,x:i+r,y:s+u}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,i=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(u,d)=>this.elementViewChild.nativeElement.style[u]=d;this.both||this.horizontal?(s("height",r),s("width",i)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),i=(r,s,u,d=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*u+d+"px"};this.both?(i("height",this._items,this._itemSize[0],e.y),i("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?i("width",this._columns||this._items,this._itemSize,e.x):i("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const i=e?e.first:this.first,r=(u,d)=>u*d,s=(u=0,d=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${u}px, ${d}px, 0)`};if(this.both)s(r(i.cols,this._itemSize[1]),r(i.rows,this._itemSize[0]));else{const u=r(i,this._itemSize);this.horizontal?s(u,0):s(0,u)}}}onScrollPositionChange(e){const i=e.target,r=this.getContentPosition(),s=(Q,Ae)=>Q?Q>Ae?Q-Ae:Q:0,u=(Q,Ae)=>Math.floor(Q/(Ae||Q)),d=(Q,Ae,Be,He,We,ct)=>Q<=We?We:ct?Be-He-We:Ae+We-1,p=(Q,Ae,Be,He,We,ct,gt)=>Q<=ct?0:Math.max(0,gt?Q<Ae?Be:Q-ct:Q>Ae?Be:Q-2*ct),_=(Q,Ae,Be,He,We,ct=!1)=>{let gt=Ae+He+2*We;return Q>=We&&(gt+=We+1),this.getLast(gt,ct)},E=s(i.scrollTop,r.top),T=s(i.scrollLeft,r.left);let x=this.both?{rows:0,cols:0}:0,N=this.last,V=!1,Z=this.lastScrollPos;if(this.both){const Q=this.lastScrollPos.top<=E,Ae=this.lastScrollPos.left<=T;if(!this._appendOnly||this._appendOnly&&(Q||Ae)){const Be={rows:u(E,this._itemSize[0]),cols:u(T,this._itemSize[1])},He={rows:d(Be.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],Q),cols:d(Be.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Ae)};x={rows:p(Be.rows,He.rows,this.first.rows,0,0,this.d_numToleratedItems[0],Q),cols:p(Be.cols,He.cols,this.first.cols,0,0,this.d_numToleratedItems[1],Ae)},N={rows:_(Be.rows,x.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:_(Be.cols,x.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},V=x.rows!==this.first.rows||N.rows!==this.last.rows||x.cols!==this.first.cols||N.cols!==this.last.cols,Z={top:E,left:T}}}else{const Q=this.horizontal?T:E,Ae=this.lastScrollPos<=Q;if(!this._appendOnly||this._appendOnly&&Ae){const Be=u(Q,this._itemSize);x=p(Be,d(Be,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Ae),this.first,0,0,this.d_numToleratedItems,Ae),N=_(Be,x,0,this.numItemsInViewport,this.d_numToleratedItems),V=x!==this.first||N!==this.last,Z=Q}}return{first:x,last:N,isRangeChanged:V,scrollPos:Z}}onScrollChange(e){const{first:i,last:r,isRangeChanged:s,scrollPos:u}=this.onScrollPositionChange(e);if(s){const d={first:i,last:r};if(this.setContentPosition(d),this.first=i,this.last=r,this.lastScrollPos=u,this.handleEvents("onScrollIndexChange",d),this._lazy&&this.isPageChanged){const p={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):i,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==p.first||this.lazyLoadState.last!==p.last)&&this.handleEvents("onLazyLoad",p),this.lazyLoadState=p}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:i}=this.onScrollPositionChange(e);(i||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}unbindResizeListener(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(be.isVisible(this.elementViewChild?.nativeElement)){const[e,i]=[be.getWidth(this.elementViewChild.nativeElement),be.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,i!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=i,this.init()})}},this._resizeDelay)}handleEvents(e,i){return this.options&&this.options[e]?this.options[e](i):this[e].emit(i)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,i)=>this.getLoaderOptions(e,i),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const i=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:i,first:0===r,last:r===i-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,i){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...i}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-scroller"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Hi,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(OI,5),l.Gf(DM,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.elementViewChild=r.first),l.iGM(r=l.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[l.TTD],ngContentSelectors:PM,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,i){if(1&e&&(l.F$t(),l.YNc(0,GI,8,14,"ng-container",0),l.YNc(1,NM,2,1,"ng-template",null,1,l.W1O)),2&e){const r=l.MAs(2);l.Q6J("ngIf",!i._disabled)("ngIfElse",r)}},dependencies:[Jt,_r,gn,Zi,or],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),n})(),FM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})(),zI=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?be.appendChild(this.container,this.el.nativeElement):be.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),be.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Js.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Js.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+be.getWindowScrollLeft(),top:e.top+be.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+be.getOuterWidth(this.el.nativeElement),r=e.top+(be.getOuterHeight(this.el.nativeElement)-be.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-be.getOuterWidth(this.container),r=e.top+(be.getOuterHeight(this.el.nativeElement)-be.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(be.getOuterWidth(this.el.nativeElement)-be.getOuterWidth(this.container))/2,r=e.top-be.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(be.getOuterWidth(this.el.nativeElement)-be.getOuterWidth(this.container))/2,r=e.top+be.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return be.hasClass(e,"p-inputwrapper")?be.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,s=be.getOuterWidth(this.container),u=be.getOuterHeight(this.container),d=be.getViewport();return r+s>d.width||r<0||i<0||i+u>d.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new as(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):be.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Js.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(xd))},n.\u0275dir=l.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[l.TTD]}),n})(),WI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui]}),n})();function Zf(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.label||"empty")}}function LM(n,t){1&n&&l.GkF(0)}const ac=function(n){return{height:n}},VM=function(n,t){return{"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t}},Dm=function(n){return{$implicit:n}},UM=["container"],BM=["filter"],HM=["in"],fw=["editableInput"],qI=["items"],KI=["scroller"],Am=["overlay"];function pw(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Oqu(e.label||"empty")}}function AF(n,t){1&n&&l.GkF(0)}const ZI=function(n){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":n}};function jM(n,t){if(1&n&&(l.TgZ(0,"span",14),l.YNc(1,pw,2,1,"ng-container",15),l.YNc(2,AF,1,0,"ng-container",16),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngClass",l.VKq(9,ZI,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),l.uIk("id",e.labelId),l.xp6(1),l.Q6J("ngIf",!e.selectedItemTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",l.VKq(11,Dm,e.selectedOption))}}const YI=function(n){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":n}};function eh(n,t){if(1&n&&(l.TgZ(0,"span",17),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.Q6J("ngClass",l.VKq(2,YI,null==e.placeholder||0===e.placeholder.length)),l.xp6(1),l.Oqu(e.placeholder||"empty")}}function GM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"input",18,19),l.NdJ("input",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onEditableInputChange(r))})("focus",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onEditableInputFocus(r))})("blur",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.onInputBlur(r))}),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("disabled",e.disabled),l.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function QI(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"i",20),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.clear(r))}),l.qZA()}}function gw(n,t){1&n&&l.GkF(0)}function xF(n,t){1&n&&l.GkF(0)}const JI=function(n){return{options:n}};function MF(n,t){if(1&n&&(l.ynx(0),l.YNc(1,xF,1,0,"ng-container",16),l.BQk()),2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",l.VKq(2,JI,e.filterOptions))}}function $M(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",30)(1,"input",31,32),l.NdJ("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onKeydown(r,!1))})("input",function(r){l.CHM(e);const s=l.oxw(3);return l.KtG(s.onFilterInputChange(r))}),l.qZA(),l._UZ(3,"span",33),l.qZA()}if(2&n){const e=l.oxw(3);l.xp6(1),l.Q6J("value",e.filterValue||""),l.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function zM(n,t){if(1&n&&(l.TgZ(0,"div",27),l.NdJ("click",function(i){return i.stopPropagation()}),l.YNc(1,MF,2,4,"ng-container",28),l.YNc(2,$M,4,4,"ng-template",null,29,l.W1O),l.qZA()),2&n){const e=l.MAs(3),i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",i.filterTemplate)("ngIfElse",e)}}function WM(n,t){1&n&&l.GkF(0)}const mw=function(n,t){return{$implicit:n,options:t}};function XI(n,t){if(1&n&&l.YNc(0,WM,1,0,"ng-container",16),2&n){const e=t.$implicit,i=t.options;l.oxw(2);const r=l.MAs(7);l.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",l.WLB(2,mw,e,i))}}function qM(n,t){1&n&&l.GkF(0)}function eT(n,t){if(1&n&&l.YNc(0,qM,1,0,"ng-container",16),2&n){const e=t.options,i=l.oxw(4);l.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",l.VKq(2,JI,e))}}function tT(n,t){1&n&&(l.ynx(0),l.YNc(1,eT,1,4,"ng-template",36),l.BQk())}function KM(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"p-scroller",34,35),l.NdJ("onLazyLoad",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onLazyLoad.emit(r))}),l.YNc(2,XI,1,5,"ng-template",13),l.YNc(3,tT,2,0,"ng-container",15),l.qZA()}if(2&n){const e=l.oxw(2);l.Akn(l.VKq(8,ac,e.scrollHeight)),l.Q6J("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),l.xp6(3),l.Q6J("ngIf",e.loaderTemplate)}}function ZM(n,t){1&n&&l.GkF(0)}const nT=function(){return{}};function YM(n,t){if(1&n&&(l.ynx(0),l.YNc(1,ZM,1,0,"ng-container",16),l.BQk()),2&n){l.oxw();const e=l.MAs(7),i=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",l.WLB(3,mw,i.optionsToDisplay,l.DdM(2,nT)))}}function iT(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,i=l.oxw(4);l.xp6(1),l.Oqu(i.getOptionGroupLabel(e)||"empty")}}function rT(n,t){1&n&&l.GkF(0)}function sT(n,t){1&n&&l.GkF(0)}const _w=function(n,t){return{$implicit:n,selectedOption:t}};function QM(n,t){if(1&n&&(l.TgZ(0,"li",42),l.YNc(1,iT,2,1,"span",15),l.YNc(2,rT,1,0,"ng-container",16),l.qZA(),l.YNc(3,sT,1,0,"ng-container",16)),2&n){const e=t.$implicit,i=l.oxw(2).options,r=l.MAs(5),s=l.oxw(2);l.Q6J("ngStyle",l.VKq(6,ac,i.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!s.groupTemplate),l.xp6(1),l.Q6J("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",l.VKq(8,Dm,e)),l.xp6(1),l.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",l.WLB(10,_w,s.getOptionGroupChildren(e),s.selectedOption))}}function JM(n,t){if(1&n&&(l.ynx(0),l.YNc(1,QM,4,13,"ng-template",41),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngForOf",e)}}function kF(n,t){1&n&&l.GkF(0)}function oT(n,t){if(1&n&&(l.ynx(0),l.YNc(1,kF,1,0,"ng-container",16),l.BQk()),2&n){const e=l.oxw().$implicit,i=l.MAs(5),r=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",l.WLB(2,_w,e,r.selectedOption))}}function OF(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"p-dropdownItem",43),l.NdJ("onClick",function(r){l.CHM(e);const s=l.oxw(4);return l.KtG(s.onItemClick(r))}),l.qZA()}if(2&n){const e=t.$implicit,i=l.oxw().selectedOption,r=l.oxw(3);l.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function RF(n,t){1&n&&l.YNc(0,OF,1,5,"ng-template",41),2&n&&l.Q6J("ngForOf",t.$implicit)}function NF(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.hij(" ",e.emptyFilterMessageLabel," ")}}function PF(n,t){1&n&&l.GkF(0,null,45)}function FF(n,t){if(1&n&&(l.TgZ(0,"li",44),l.YNc(1,NF,2,1,"ng-container",28),l.YNc(2,PF,2,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw().options,i=l.oxw(2);l.Q6J("ngStyle",l.VKq(4,ac,e.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),l.xp6(1),l.Q6J("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function LF(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(4);l.xp6(1),l.hij(" ",e.emptyMessageLabel," ")}}function VF(n,t){1&n&&l.GkF(0,null,46)}function UF(n,t){if(1&n&&(l.TgZ(0,"li",44),l.YNc(1,LF,2,1,"ng-container",28),l.YNc(2,VF,2,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw().options,i=l.oxw(2);l.Q6J("ngStyle",l.VKq(4,ac,e.itemSize+"px")),l.xp6(1),l.Q6J("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),l.xp6(1),l.Q6J("ngTemplateOutlet",i.emptyTemplate)}}function xm(n,t){if(1&n&&(l.TgZ(0,"ul",37,38),l.YNc(2,JM,2,1,"ng-container",15),l.YNc(3,oT,2,5,"ng-container",15),l.YNc(4,RF,1,1,"ng-template",null,39,l.W1O),l.YNc(6,FF,3,6,"li",40),l.YNc(7,UF,3,6,"li",40),l.qZA()),2&n){const e=t.options,i=l.oxw(2);l.Akn(e.contentStyle),l.Q6J("ngClass",e.contentStyleClass),l.uIk("id",i.listId),l.xp6(2),l.Q6J("ngIf",i.group),l.xp6(1),l.Q6J("ngIf",!i.group),l.xp6(3),l.Q6J("ngIf",i.filterValue&&i.isEmpty()),l.xp6(1),l.Q6J("ngIf",!i.filterValue&&i.isEmpty())}}function BF(n,t){1&n&&l.GkF(0)}function aT(n,t){if(1&n&&(l.TgZ(0,"div",21),l.YNc(1,gw,1,0,"ng-container",22),l.YNc(2,zM,4,2,"div",23),l.TgZ(3,"div",24),l.YNc(4,KM,4,10,"p-scroller",25),l.YNc(5,YM,2,6,"ng-container",15),l.YNc(6,xm,8,8,"ng-template",null,26,l.W1O),l.qZA(),l.YNc(8,BF,1,0,"ng-container",22),l.qZA()),2&n){const e=l.oxw();l.Tol(e.panelStyleClass),l.Q6J("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),l.xp6(1),l.Q6J("ngTemplateOutlet",e.headerTemplate),l.xp6(1),l.Q6J("ngIf",e.filter),l.xp6(1),l.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),l.xp6(1),l.Q6J("ngIf",e.virtualScroll),l.xp6(1),l.Q6J("ngIf",!e.virtualScroll),l.xp6(3),l.Q6J("ngTemplateOutlet",e.footerTemplate)}}const Mm=function(n,t,e,i){return{"p-dropdown p-component":!0,"p-disabled":n,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":i}},lT={provide:Ur,useExisting:(0,l.Gpc)(()=>XM),multi:!0};let uT=(()=>{class n{constructor(){this.onClick=new l.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(l.TgZ(0,"li",0),l.NdJ("click",function(s){return i.onOptionClick(s)}),l.YNc(1,Zf,2,1,"span",1),l.YNc(2,LM,1,0,"ng-container",2),l.qZA()),2&e&&(l.Q6J("ngStyle",l.VKq(8,ac,i.itemSize+"px"))("id",i.selected?"p-highlighted-option":"")("ngClass",l.WLB(10,VM,i.selected,i.disabled)),l.uIk("aria-label",i.label)("aria-selected",i.selected),l.xp6(1),l.Q6J("ngIf",!i.template),l.xp6(1),l.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",l.VKq(13,Dm,i.option)))},dependencies:[Jt,gn,Zi,or,kd],encapsulation:2}),n})(),XM=(()=>{class n{constructor(e,i,r,s,u,d){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=u,this.config=d,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.overlayDirection="end",this.onChange=new l.vpe,this.onFilter=new l.vpe,this.onFocus=new l.vpe,this.onBlur=new l.vpe,this.onClick=new l.vpe,this.onShow=new l.vpe,this.onHide=new l.vpe,this.onClear=new l.vpe,this.onLazyLoad=new l.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=qC()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&An.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Bn.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Bn.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?An.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?An.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?An.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?An.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?An.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const i=e.option;this.isOptionDisabled(i)||(this.selectItem(e.originalEvent,i),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(e,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(be.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")&&be.scrollInView(this.itemsWrapper,be.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(e){return be.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){if("visible"===e.toState){if(this.itemsWrapper=be.findSingle(this.overlayViewChild.el.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const i=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==i&&this.scroller.scrollToIndex(i)}else{let i=be.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");i&&i.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}"void"===e.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}findNextEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}onKeydown(e,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let u=this.optionsToDisplay[r.groupIndex-1];u&&(this.selectItem(e,this.getOptionGroupChildren(u)[this.getOptionGroupChildren(u).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:i&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:i&&!e.metaKey&&17!==e.which&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,e))),i}searchOptionInRange(e,i){for(let r=e;r<i;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let u=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let u=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}}return null}findOptionIndex(e,i){let r=-1;if(i)for(let s=0;s<i.length;s++)if(null==e&&null==this.getOptionValue(i[s])||An.equals(e,this.getOptionValue(i[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,i){let r,s;if(i)for(let u=0;u<i.length&&(r=u,s=this.findOptionIndex(e,this.getOptionGroupChildren(i[u])),-1===s);u++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,i,r){if(this.group&&!r){let s;if(i&&i.length)for(let u of i)if(s=this.findOption(e,this.getOptionGroupChildren(u),!0),s)break;return s}{let s=this.findOptionIndex(e,i);return-1!=s?i[s]:null}}onFilterInputChange(e){let i=e.target.value;i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?be.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():be.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(tc),l.Y36(xd))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-dropdown"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Hi,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(UM,5),l.Gf(BM,5),l.Gf(HM,5),l.Gf(fw,5),l.Gf(qI,5),l.Gf(KI,5),l.Gf(Am,5)),2&e){let r;l.iGM(r=l.CRH())&&(i.containerViewChild=r.first),l.iGM(r=l.CRH())&&(i.filterViewChild=r.first),l.iGM(r=l.CRH())&&(i.accessibleViewChild=r.first),l.iGM(r=l.CRH())&&(i.editableInputViewChild=r.first),l.iGM(r=l.CRH())&&(i.itemsViewChild=r.first),l.iGM(r=l.CRH())&&(i.scroller=r.first),l.iGM(r=l.CRH())&&(i.overlayViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",overlayDirection:"overlayDirection",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[l._Bn([lT])],decls:14,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,i){1&e&&(l.TgZ(0,"div",0,1),l.NdJ("click",function(s){return i.onMouseclick(s)}),l.TgZ(2,"div",2)(3,"input",3,4),l.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onKeydown(s,!0)}),l.qZA()(),l.YNc(5,jM,3,13,"span",5),l.YNc(6,eh,2,4,"span",6),l.YNc(7,GM,2,4,"input",7),l.YNc(8,QI,1,0,"i",8),l.TgZ(9,"div",9),l._UZ(10,"span",10),l.qZA(),l.TgZ(11,"p-overlay",11,12),l.NdJ("visibleChange",function(s){return i.overlayVisible=s})("onAnimationStart",function(s){return i.onOverlayAnimationStart(s)})("onHide",function(){return i.hide()}),l.YNc(13,aT,9,11,"ng-template",13),l.qZA()()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",l.l5B(27,Mm,i.disabled,i.overlayVisible,i.focused,i.showClear&&!i.disabled))("ngStyle",i.style),l.xp6(3),l.Q6J("disabled",i.disabled)("autofocus",i.autofocus),l.uIk("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-expanded",!1)("aria-labelledby",i.ariaLabelledBy)("tabindex",i.tabindex)("aria-activedescendant",i.overlayVisible?i.labelId:null),l.xp6(2),l.Q6J("ngIf",!i.editable&&null!=i.label),l.xp6(1),l.Q6J("ngIf",!i.editable&&null==i.label),l.xp6(1),l.Q6J("ngIf",i.editable),l.xp6(1),l.Q6J("ngIf",i.isVisibleClearIcon),l.xp6(1),l.uIk("aria-expanded",i.overlayVisible),l.xp6(1),l.Q6J("ngClass",i.dropdownIcon),l.xp6(1),l.Q6J("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions))},dependencies:[Jt,_r,gn,Zi,or,aw,Hi,zI,DF,mM,uT],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,changeDetection:0}),n})(),yw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Sm,Xs,WI,Al,FM,xI,Sm,Xs,FM]}),n})();const cT=["mask"];function ek(n,t){1&n&&l.GkF(0)}function dT(n,t){if(1&n&&(l.ynx(0),l.YNc(1,ek,1,0,"ng-container",7),l.BQk()),2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",e.indicatorTemplate)}}function HF(n,t){1&n&&l._UZ(0,"i",8)}function tk(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",4),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onImageClick())}),l.YNc(1,dT,2,1,"ng-container",5),l.YNc(2,HF,1,0,"ng-template",null,6,l.W1O),l.qZA()}if(2&n){const e=l.MAs(3),i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.indicatorTemplate)("ngIfElse",e)}}const nk=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},ik=function(n){return{value:"visible",params:n}};function km(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div"),l.NdJ("@animation.start",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onAnimationStart(r))})("@animation.done",function(r){l.CHM(e);const s=l.oxw(2);return l.KtG(s.onAnimationEnd(r))}),l.TgZ(1,"img",20),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.onPreviewImageClick())}),l.qZA()()}if(2&n){const e=l.oxw(2);l.Q6J("@animation",l.VKq(6,ik,l.WLB(3,nk,e.showTransitionOptions,e.hideTransitionOptions))),l.xp6(1),l.Q6J("ngStyle",e.imagePreviewStyle()),l.uIk("src",e.src,l.LSH)}}function rk(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",9,10),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.onMaskClick())}),l.TgZ(2,"div",11),l.NdJ("click",function(r){l.CHM(e);const s=l.oxw();return l.KtG(s.handleToolbarClick(r))}),l.TgZ(3,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateRight())}),l._UZ(4,"i",13),l.qZA(),l.TgZ(5,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateLeft())}),l._UZ(6,"i",14),l.qZA(),l.TgZ(7,"button",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.zoomOut())}),l._UZ(8,"i",16),l.qZA(),l.TgZ(9,"button",15),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.zoomIn())}),l._UZ(10,"i",17),l.qZA(),l.TgZ(11,"button",12),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.closePreview())}),l._UZ(12,"i",18),l.qZA()(),l.YNc(13,km,2,8,"div",19),l.qZA()}if(2&n){const e=l.oxw();l.xp6(7),l.Q6J("disabled",e.isZoomOutDisabled),l.xp6(2),l.Q6J("disabled",e.isZoomInDisabled),l.xp6(4),l.Q6J("ngIf",e.previewVisible)}}let jF=(()=>{class n{constructor(e,i){this.config=e,this.cd=i,this.preview=!1,this.showTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.onShow=new l.vpe,this.onHide=new l.vpe,this.onImageError=new l.vpe,this.maskVisible=!1,this.previewVisible=!1,this.rotate=0,this.scale=1,this.previewClick=!1,this.zoomSettings={default:1,step:.1,max:1.5,min:.5}}get isZoomOutDisabled(){return this.scale-this.zoomSettings.step<=this.zoomSettings.min}get isZoomInDisabled(){return this.scale+this.zoomSettings.step>=this.zoomSettings.max}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.indicatorTemplate=e.template})}onImageClick(){this.preview&&(this.maskVisible=!0,this.previewVisible=!0)}onMaskClick(){this.previewClick||this.closePreview(),this.previewClick=!1}onPreviewImageClick(){this.previewClick=!0}rotateRight(){this.rotate+=90,this.previewClick=!0}rotateLeft(){this.rotate-=90,this.previewClick=!0}zoomIn(){this.scale=this.scale+this.zoomSettings.step,this.previewClick=!0}zoomOut(){this.scale=this.scale-this.zoomSettings.step,this.previewClick=!0}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop();break;case"void":be.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":Js.clear(this.wrapper),this.maskVisible=!1,this.container=null,this.wrapper=null,this.cd.markForCheck(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}moveOnTop(){Js.set("modal",this.wrapper,this.config.zIndex.modal)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):be.appendChild(this.wrapper,this.appendTo))}imagePreviewStyle(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}}containerClass(){return{"p-image p-component":!0,"p-image-preview-container":this.preview}}handleToolbarClick(e){e.stopPropagation()}closePreview(){this.previewVisible=!1,this.rotate=0,this.scale=this.zoomSettings.default}imageError(e){this.onImageError.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xd),l.Y36(l.sBO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["p-image"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,Hi,4),2&e){let s;l.iGM(s=l.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&l.Gf(cT,5),2&e){let r;l.iGM(r=l.CRH())&&(i.mask=r.first)}},hostAttrs:[1,"p-element"],inputs:{imageClass:"imageClass",imageStyle:"imageStyle",styleClass:"styleClass",style:"style",src:"src",alt:"alt",width:"width",height:"height",appendTo:"appendTo",preview:"preview",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide",onImageError:"onImageError"},decls:4,vars:13,consts:[[3,"ngClass","ngStyle"],[3,"ngStyle","error"],["class","p-image-preview-indicator",3,"click",4,"ngIf"],["class","p-image-mask p-component-overlay p-component-overlay-enter",3,"click",4,"ngIf"],[1,"p-image-preview-indicator",3,"click"],[4,"ngIf","ngIfElse"],["defaultTemplate",""],[4,"ngTemplateOutlet"],[1,"p-image-preview-icon","pi","pi-eye"],[1,"p-image-mask","p-component-overlay","p-component-overlay-enter",3,"click"],["mask",""],[1,"p-image-toolbar",3,"click"],["type","button",1,"p-image-action","p-link",3,"click"],[1,"pi","pi-refresh"],[1,"pi","pi-undo"],["type","button",1,"p-image-action","p-link",3,"disabled","click"],[1,"pi","pi-search-minus"],[1,"pi","pi-search-plus"],[1,"pi","pi-times"],[4,"ngIf"],[1,"p-image-preview",3,"ngStyle","click"]],template:function(e,i){1&e&&(l.TgZ(0,"span",0)(1,"img",1),l.NdJ("error",function(s){return i.imageError(s)}),l.qZA(),l.YNc(2,tk,4,2,"div",2),l.YNc(3,rk,14,3,"div",3),l.qZA()),2&e&&(l.Tol(i.styleClass),l.Q6J("ngClass",i.containerClass())("ngStyle",i.style),l.xp6(1),l.Tol(i.imageClass),l.Q6J("ngStyle",i.imageStyle),l.uIk("src",i.src,l.LSH)("alt",i.alt)("width",i.width)("height",i.height),l.xp6(1),l.Q6J("ngIf",i.preview),l.xp6(1),l.Q6J("ngIf",i.maskVisible))},dependencies:[Jt,gn,Zi,or],styles:[".p-image-mask{display:flex;align-items:center;justify-content:center}.p-image-preview-container{position:relative;display:inline-block}.p-image-preview-indicator{position:absolute;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s}.p-image-preview-icon{font-size:1.5rem}.p-image-preview-container:hover>.p-image-preview-indicator{opacity:1;cursor:pointer}.p-image-preview-container>img{cursor:pointer}.p-image-toolbar{position:absolute;top:0;right:0;display:flex;z-index:1}.p-image-action.p-link{display:flex;justify-content:center;align-items:center}.p-image-action.p-link[disabled]{opacity:.5}.p-image-preview{transition:transform .15s;max-width:100vw;max-height:100vh}\n"],encapsulation:2,data:{animation:[Qs("animation",[La("void => visible",[os({transform:"scale(0.7)",opacity:0}),As("{{showTransitionParams}}")]),La("visible => void",[As("{{hideTransitionParams}}",os({transform:"scale(0.7)",opacity:0}))])])]},changeDetection:0}),n})(),GF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ui,Xs]}),n})();const hT=function(){return{width:"100%"}};let sk=(()=>{class n{constructor(){this.states=[{name:"Selecione: "},{name:"Acre"},{name:"Alagoas"},{name:"Amap\xe1"},{name:"Amazonas"},{name:"Bahia"},{name:"Cear\xe1"},{name:"Distrito Federal"},{name:"Esp\xedrito Santo"},{name:"Goi\xe1s"},{name:"Maranh\xe3o"},{name:"Mato Grosso"},{name:"Mato Grosso do Sul"},{name:"Minas Gerais"},{name:"Par\xe1"},{name:"Para\xedba"},{name:"Paran\xe1"},{name:"Pernambuco"},{name:"Piau\xed"},{name:"Rio de Janeiro"},{name:"Rio Grande do Norte"},{name:"Rio Grande do Sul"},{name:"Rond\xf4nia"},{name:"Roraima"},{name:"Santa Catarina"},{name:"S\xe3o Paulo"},{name:"Sergipe"},{name:"Tocantins"}]}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-config-view"]],decls:38,vars:11,consts:[[1,"card"],[1,"fieldTitle"],[1,"fieldPhoto"],["src","assets/caesar.jpeg","width","250",1,"Image1"],[1,"findPhoto"],["pButton","","type","button",1,"p-button-raised","p-button-rounded"],[1,"field"],["for","firstname1"],["id","firstname1","type","text","pInputText","",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","lastname1"],["id","lastname1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["dateFormat","dd/mm/yy",3,"ngModel","ngModelChange"],["optionLabel","name","autoWidth","false",3,"options"],["id","city1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["id","formacaoAcad1","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"field",2,"padding-bottom","40px"],["mask","(99) 9 9999-9999","slotChar"," "]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div",0)(2,"div",1)(3,"h3"),l._uU(4,"Editar usu\xe1rio"),l.qZA()(),l.TgZ(5,"div",2),l._UZ(6,"p-image",3),l.qZA(),l.TgZ(7,"div",4)(8,"button",5),l._uU(9,"Upload da foto"),l.qZA()(),l.TgZ(10,"div",6)(11,"label",7),l._uU(12,"Nome:"),l.qZA(),l._UZ(13,"input",8),l.qZA(),l.TgZ(14,"div",6)(15,"label",9),l._uU(16,"Sobrenome:"),l.qZA(),l._UZ(17,"input",10),l.qZA(),l.TgZ(18,"div",6)(19,"label"),l._uU(20,"Data de nascimento: "),l.qZA(),l.TgZ(21,"p-calendar",11),l.NdJ("ngModelChange",function(s){return i.dateValue=s}),l.qZA()(),l.TgZ(22,"div",6)(23,"label"),l._uU(24,"Estado: "),l.qZA(),l._UZ(25,"p-dropdown",12),l.qZA(),l.TgZ(26,"div",6)(27,"label"),l._uU(28,"Cidade:"),l.qZA(),l._UZ(29,"input",13),l.qZA(),l.TgZ(30,"div",6)(31,"label"),l._uU(32,"Forma\xe7\xe3o acad\xeamica:"),l.qZA(),l._UZ(33,"input",14),l.qZA(),l.TgZ(34,"div",15)(35,"label"),l._uU(36,"Telefone:"),l.qZA(),l._UZ(37,"p-inputMask",16),l.qZA()()()),2&e&&(l.xp6(21),l.Akn(l.DdM(8,hT)),l.Q6J("ngModel",i.dateValue),l.xp6(4),l.Akn(l.DdM(9,hT)),l.Q6J("options",i.states),l.xp6(12),l.Akn(l.DdM(10,hT)))},dependencies:[im,iw,MI,XM,jF,um,Zd,ru],styles:[".field[_ngcontent-%COMP%]{box-sizing:border-box;padding:4px 20px;margin:0}.fieldTitle[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 20px;margin:0}.h3[_ngcontent-%COMP%]{font-family:arial;padding:10px}.Image1[_ngcontent-%COMP%]{border-width:2px;padding:5px 20px;border-color:#000}.findPhoto[_ngcontent-%COMP%]{padding:5px 20px}"]}),n})(),ok=(()=>{class n{constructor(){this.profiePic="assets/cza-profile.png",this.userName="Caesar Zama Altran"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-search-entry"]],inputs:{profiePic:"profiePic",userName:"userName"},decls:7,vars:2,consts:[[1,"col-12"],[1,"flex","content-card-header","align-content-center"],[2,"padding-right",".4em","padding-left",".2em"],[1,"profile-img",3,"src"],[1,"align-content-center",2,"padding-top",".30em","font-weight","bold"]],template:function(e,i){1&e&&(l.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2),l._UZ(4,"img",3),l.qZA(),l.TgZ(5,"div",4),l._uU(6),l.qZA()()()()),2&e&&(l.xp6(4),l.s9C("src",i.profiePic,l.LSH),l.xp6(2),l.hij(" ",i.userName," "))}}),n})();function ak(n,t){if(1&n&&l._UZ(0,"app-search-entry",5),2&n){const e=t.$implicit;l.Q6J("userName",e.userName)("profiePic",e.profilePic)}}let $F=(()=>{class n{constructor(){this.searchDataRaw=[{userName:"Caesar Zama Altran",profilePic:"assets/cza-profile.png"},{userName:"Guilherme Nascimento",profilePic:"assets/profile-gui.jpg"},{userName:"Elisa \xc1tkinson",profilePic:"assets/profile-elisa.jpeg"},{userName:"Bruno Ricardo",profilePic:"assets/profile-bruno.jpg"},{userName:"Nathan Almici",profilePic:"assets/profile-nathan.jpg"},{userName:"Lincoln Ricardo",profilePic:"assets/profile-lincoln.jpg"}],this.searchData=[],this.query=""}ngOnInit(){}filter(){this.searchData=this.searchDataRaw.filter(e=>e.userName.toUpperCase().includes(this.query.toUpperCase()))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-search-view"]],decls:7,vars:2,consts:[[1,"col-12"],[1,"p-inputgroup"],["type","text","pInputText","",1,"flex-grow-1",3,"ngModel","ngModelChange"],["type","button","pRipple","","icon","pi pi-search","styleClass","p-button-warn"],[3,"userName","profiePic",4,"ngFor","ngForOf"],[3,"userName","profiePic"]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div")(2,"div",0)(3,"div",1)(4,"input",2),l.NdJ("ngModelChange",function(s){return i.query=s})("ngModelChange",function(){return i.filter()}),l.qZA(),l._UZ(5,"p-button",3),l.qZA()()(),l.YNc(6,ak,1,2,"app-search-entry",4),l.qZA()),2&e&&(l.xp6(4),l.Q6J("ngModel",i.query),l.xp6(2),l.Q6J("ngForOf",i.searchData))},dependencies:[_r,uv,Ff,um,Zd,ru,ok]}),n})();const lk=["video"],fT=["canvas"];function pT(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",6),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.rotateVideoInput(!0))}),l.qZA()}}class gT{constructor(t,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=t,this._imageData=i}static getDataFromDataUrl(t,e){return t.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=gT.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}let mT=(()=>{class n{constructor(){this.width=640,this.height=480,this.videoOptions=n.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=n.DEFAULT_IMAGE_TYPE,this.imageQuality=n.DEFAULT_IMAGE_QUALITY,this.imageCapture=new l.vpe,this.initError=new l.vpe,this.imageClick=new l.vpe,this.cameraSwitched=new l.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(i=>{"string"==typeof i?this.switchToVideoInput(i):this.rotateVideoInput(!1!==i)})}static getMediaConstraintsForDevice(e,i){const r=i||this.DEFAULT_VIDEO_OPTIONS;return e&&(r.deviceId={exact:e}),r}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const i=e.getConstraints().deviceId;return n.getValueFromConstrainDOMString(i)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const i=e.getConstraints().facingMode;return n.getValueFromConstrainDOMString(i)}}}static isUserFacing(e){const i=n.getFacingModeFromMediaStreamTrack(e);return!!i&&"user"===i.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,i={width:this.width,height:this.height};e.videoWidth&&(i.width=e.videoWidth,i.height=e.videoHeight);const r=this.canvas.nativeElement;r.width=i.width,r.height=i.height;const s=r.getContext("2d");s.drawImage(e,0,0);const u=this.imageType?this.imageType:n.DEFAULT_IMAGE_TYPE,p=r.toDataURL(u,this.imageQuality?this.imageQuality:n.DEFAULT_IMAGE_QUALITY);let _=null;this.captureImageData&&(_=s.getImageData(0,0,r.width,r.height)),this.imageCapture.next(new gT(p,u,_))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,i){const r=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const s=n.getMediaConstraintsForDevice(e,i);navigator.mediaDevices.getUserMedia({video:s}).then(u=>{this.mediaStream=u,r.srcObject=u,r.play(),this.activeVideoSettings=u.getVideoTracks()[0].getSettings();const d=n.getDeviceIdFromMediaStreamTrack(u.getVideoTracks()[0]);this.cameraSwitched.next(d),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=d?this.availableVideoInputs.findIndex(p=>p.deviceId===d):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(u=>{this.initError.next({message:u.message,mediaStreamError:u})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return n.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,i)=>{(class Lo{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((t,e)=>{navigator.mediaDevices.enumerateDevices().then(i=>{t(i.filter(r=>"videoinput"===r.kind))}).catch(i=>{e(i.message||i)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(r=>{this.availableVideoInputs=r,e(r)}).catch(r=>{this.availableVideoInputs=[],i(r)})})}}return n.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},n.DEFAULT_IMAGE_TYPE="image/jpeg",n.DEFAULT_IMAGE_QUALITY=.92,n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["webcam"]],viewQuery:function(e,i){if(1&e&&(l.Gf(lk,7),l.Gf(fT,7)),2&e){let r;l.iGM(r=l.CRH())&&(i.video=r.first),l.iGM(r=l.CRH())&&(i.canvas=r.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return i.imageClick.next()}),l.TgZ(1,"video",1,2),l.NdJ("resize",function(){return i.videoResize()}),l.qZA(),l.YNc(3,pT,1,0,"div",3),l._UZ(4,"canvas",4,5),l.qZA()),2&e&&(l.xp6(1),l.Tol(i.videoStyleClasses),l.Q6J("width",i.videoWidth)("height",i.videoHeight),l.xp6(2),l.Q6J("ngIf",i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized),l.xp6(1),l.Q6J("width",i.width)("height",i.height))},dependencies:[gn],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),n})(),uk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ui]]}),n})();const vw=["webcamComponent"],ww=[{path:"login",component:gx},{path:"home",component:mb,canActivate:[Hd]},{path:"search",component:$F,canActivate:[Hd]},{path:"novo",component:(()=>{class n{constructor(){}ngOnInit(){}getWidth(){return document.documentElement.clientWidth}getHeight(){return document.documentElement.clientHeight}getPadding(){return(this.getHeight()-30-(this.input?.height??0))/2}debug(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-new-content-view"]],viewQuery:function(e,i){if(1&e&&l.Gf(vw,5),2&e){let r;l.iGM(r=l.CRH())&&(i.input=r.first)}},decls:4,vars:6,consts:[[3,"allowCameraSwitch","width"],["webcamComponent",""]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div"),l._UZ(2,"webcam",0,1),l.qZA()()),2&e&&(l.xp6(1),l.vpz("background-color: black; width: 100%;height: ",i.getHeight()-30,"px; padding-top:",i.getPadding(),"px"),l.xp6(1),l.Q6J("allowCameraSwitch",!0)("width",i.getWidth()))},dependencies:[mT,ru]}),n})(),canActivate:[Hd]},{path:"notific",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-notification-view"]],decls:5,vars:0,consts:[[2,"padding-top","5em"],[2,"padding-top","5em","padding-bottom","5em","text-align","center","font-weight","bold","font-size","1.3em"]],template:function(e,i){1&e&&(l.TgZ(0,"app-template")(1,"div",0)(2,"p-card")(3,"div",1),l._uU(4," Sem Notifica\xe7\xf5es "),l.qZA()()()())},dependencies:[fv,ru]}),n})(),canActivate:[Hd]},{path:"config",component:sk,canActivate:[Hd]},{path:"",redirectTo:"/home",pathMatch:"full"}];let yT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mC.forRoot(ww,{useHash:!0}),mC]}),n})(),vT=(()=>{class n{constructor(){this.title="hacka-sicredi"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[Yu]}),n})();const wT_firebaseConfig={apiKey:"AIzaSyBNnuRVZ0vTs6I6iR_0gMMYWRoeD4HDl4k",authDomain:"hackasic.firebaseapp.com",projectId:"hackasic",storageBucket:"hackasic.appspot.com",messagingSenderId:"807324039482",appId:"1:807324039482:web:cf01e5d1b2a95f48e73803",measurementId:"G-DY0F90L8QH"};var Om=U(4986);function Ew(n,t=To.y){return n=n??ck,(0,si.e)((e,i)=>{let r,s=!0;e.subscribe((0,Gn.x)(i,u=>{const d=t(u);(s||!n(r,d))&&(s=!1,r=d,i.next(u))}))})}function ck(n,t){return n===t}var ET=U(5032);U(5881);var Rm=U(3942);const Nm="@firebase/database",Ua="0.13.10";let bw="";function hk(n){bw=n}class fk{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class pk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const CT=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new fk(t)}}catch{}return new pk},uc=CT("localStorage"),Pm=CT("sessionStorage"),Yf=new Ro.Yd("@firebase/database"),Iw=function(){let n=1;return function(){return n++}}(),bT=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},th=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=th.apply(null,i):t+="object"==typeof i?(0,L.Wl)(i):i,t+=" "}return t};let nh=null,Fm=!0;const Tw=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Yf.logLevel=Ro.in.VERBOSE,nh=Yf.log.bind(Yf),t&&Pm.set("logging_enabled",!0)):"function"==typeof n?nh=n:(nh=null,Pm.remove("logging_enabled"))},ji=function(...n){if(!0===Fm&&(Fm=!1,null===nh&&!0===Pm.get("logging_enabled")&&Tw(!0)),nh){const t=th.apply(null,n);nh(t)}},ih=function(n){return function(...t){ji(n,...t)}},Lm=function(...n){const t="FIREBASE INTERNAL ERROR: "+th(...n);Yf.error(t)},Uo=function(...n){const t=`FIREBASE FATAL ERROR: ${th(...n)}`;throw Yf.error(t),new Error(t)},Gi=function(...n){const t="FIREBASE WARNING: "+th(...n);Yf.warn(t)},Qf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ba="[MIN_NAME]",Bo="[MAX_NAME]",cc=function(n,t){if(n===t)return 0;if(n===Ba||t===Bo)return-1;if(t===Ba||n===Bo)return 1;{const e=Bm(n),i=Bm(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},mk=function(n,t){return n===t?0:n<t?-1:1},Um=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(t))},IT=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Wl)(t[i]),e+=":",e+=IT(n[t[i]]);return e+="}",e},Sw=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function tr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const TT=function(n){(0,L.hu)(!Qf(n),"Invalid JSON number");const i=1023;let r,s,u,d,p;0===n?(s=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const E=_.join("");let T="";for(p=0;p<64;p+=8){let x=parseInt(E.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},YF=new RegExp("^-?(0*)\\d{1,10}$"),yk=-2147483648,ST=2147483647,Bm=function(n){if(YF.test(n)){const t=Number(n);if(t>=yk&&t<=ST)return t}return null},Ml=function(n){try{n()}catch(t){setTimeout(()=>{throw Gi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Jf=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class DT{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Gi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dc{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gi(t)}}let rh=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Xf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ck="websocket",Dw="long_polling";class Aw{constructor(t,e,i,r,s=!1,u="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=uc.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&uc.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function MT(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===Ck)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Dw)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function bk(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return tr(e,(s,u)=>{r.push(s+"="+u)}),i+r.join("&")}class Ik{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const $m={},zm={};function Wm(n){const t=n.toString();return $m[t]||($m[t]=new Ik),$m[t]}class Sk{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ml(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class au{constructor(t,e,i,r,s,u,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ih(t),this.stats_=Wm(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),MT(e,Dw,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Sk(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new NT((...s)=>{const[u,d,p,_,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Xf.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){au.forceAllow_=!0}static forceDisallow(){au.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!au.forceAllow_&&(au.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=Sw(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class NT{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Iw(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=NT.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){ji("frame writing exception"),d.stack&&ji(d.stack),ji(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||ji("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{ji("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let kw=null;typeof MozWebSocket<"u"?kw=MozWebSocket:typeof WebSocket<"u"&&(kw=WebSocket);let ep=(()=>{class n{constructor(e,i,r,s,u,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ih(this.connId),this.stats_=Wm(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,u){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&Xf.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),u&&(d.p=u),MT(e,Ck,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,uc.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${bw}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new kw(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==kw&&!n.forceDisallow_}static previouslyFailed(){return uc.isInMemoryStorage||!0===uc.get("previous_websocket_failure")}markConnectionHealthy(){uc.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Sw(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ok=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[au,ep]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=ep&&ep.isAvailable();let r=i&&!ep.previouslyFailed();if(e.webSocketOnly&&(i||Gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ep];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Te{constructor(t,e,i,r,s,u,d,p,_,E){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ih("c:"+this.id+":"),this.transportManager_=new Ok(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Jf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Um("t",t),i=Um("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Um("t",t),i=Um("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Um("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?Lm("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lm("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Jf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(uc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ze{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class Je{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class pt extends Je{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pt}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Xe{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function vt(){return new Xe("")}function wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ls(n){return n.pieces_.length-n.pieceNum_}function Nn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Xe(n.pieces_,t)}function tp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function hc(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Km(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Xe(t,0)}function Wn(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Xe)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Xe(e,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function fr(n,t){const e=wt(n),i=wt(t);if(null===e)return t;if(e===i)return fr(Nn(n),Nn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Rw(n,t){const e=hc(n,0),i=hc(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=cc(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function Rk(n,t){if(ls(n)!==ls(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ha(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(ls(n)>ls(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class tG{constructor(t,e){this.errorPrefix_=e,this.parts_=hc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);sL(this)}}function sL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+np(n))}function np(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Nk extends Je{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Nk}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Nw=1e3;let FT,ip=(()=>{class n extends Ze{constructor(e,i,r,s,u,d,p,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=ih("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nk.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&pt.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,u={r:s,a:e,b:i};this.log_((0,L.Wl)(u)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new L.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const u=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const u={p:r};e.tag&&(u.q=i._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest("q",u,p=>{const _=p.d,E=p.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(r,s),e.onComplete&&e.onComplete(E,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();Gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const u=s.s,d=s.d||"error";this.authToken_===e&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const u={p:e};s&&(u.q=r,u.t=s),this.sendRequest("n",u)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const u={p:i,d:r};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,u){this.initConnection_();const d={p:i,d:r};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):Lm("Unrecognized action received from server: "+(0,L.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ee.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),u=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,_=null;const E=function(){_?_.close():(p=!0,s())};e.realtime_={close:E,sendRequest:function(N){(0,L.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(N)}};const x=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[N,V]=yield Promise.all([e.authTokenProvider_.getToken(x),e.appCheckTokenProvider_.getToken(x)]);p?ji("getToken() completed but was canceled"):(ji("getToken() completed. Creating connection."),e.authToken_=N&&N.accessToken,e.appCheckToken_=V&&V.token,_=new Te(u,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,Z=>{Gi(Z+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(N){e.log_("Failed to get token: "+N),p||(e.repoInfo_.nodeAdmin&&Gi(N),E())}}})()}interrupt(e){ji("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ji("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Nw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(u=>IT(u)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Xe(e).toString();let s;if(this.listens.has(r)){const u=this.listens.get(r);s=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){ji("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){ji("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+bw.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=pt.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class pn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new pn(t,e)}}class PT{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new pn(Ba,t),r=new pn(Ba,e);return 0!==this.compare(i,r)}minPost(){return pn.MIN}}class lL extends PT{static get __EMPTY_NODE(){return FT}static set __EMPTY_NODE(t){FT=t}compare(t,e){return cc(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return pn.MIN}maxPost(){return new pn(Bo,FT)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new pn(t,FT)}toString(){return".key"}}const lu=new lL;class LT{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!t.isEmpty();)if(u=e?i(t.key,e):1,r&&(u*=-1),u<0)t=this.isReverse_?t.left:t.right;else{if(0===u){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Fk,kl=(()=>{class n{constructor(e,i,r,s,u){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??no.EMPTY_NODE,this.right=u??no.EMPTY_NODE}copy(e,i,r,s,u){return new n(e??this.key,i??this.value,r??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===u?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return no.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return no.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class no{constructor(t,e=no.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new no(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,kl.BLACK,null,null))}remove(t){return new no(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,kl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new LT(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new LT(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new LT(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new LT(this.root_,null,this.comparator_,!0,t)}}function uG(n,t){return cc(n.name,t.name)}function Pk(n,t){return cc(n,t)}no.EMPTY_NODE=new class lG{copy(t,e,i,r,s){return this}insert(t,e,i){return new kl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const uL=function(n){return"number"==typeof n?"number:"+TT(n):"string:"+n},cL=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===Fk||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===Fk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let dL,hL,fL,Zm=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),cL(this.priorityNode_)}static set __childrenNodeConstructor(e){dL=e}static get __childrenNodeConstructor(){return dL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return nn(e)?this:".priority"===wt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=wt(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===ls(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+uL(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?TT(this.value_):this.value_,this.lazyHash_=bT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(s>=0,"Unknown leaf type: "+i),(0,L.hu)(u>=0,"Unknown leaf type: "+r),s===u?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const oi=new class fG extends PT{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?cc(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return pn.MIN}maxPost(){return new pn(Bo,new Zm("[PRIORITY-POST]",fL))}makePost(t,e){const i=hL(t);return new pn(e,new Zm("[PRIORITY-POST]",i))}toString(){return".priority"}},pG=Math.log(2);class gG{constructor(t){this.count=parseInt(Math.log(t+1)/pG,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const VT=function(n,t,e,i){n.sort(t);const r=function(p,_){const E=_-p;let T,x;if(0===E)return null;if(1===E)return T=n[p],x=e?e(T):T,new kl(x,T.node,kl.BLACK,null,null);{const N=parseInt(E/2,10)+p,V=r(p,N),Z=r(N+1,_);return T=n[N],x=e?e(T):T,new kl(x,T.node,kl.BLACK,V,Z)}},d=function(p){let _=null,E=null,T=n.length;const x=function(V,Z){const Q=T-V,Ae=T;T-=V;const Be=r(Q+1,Ae),He=n[Q],We=e?e(He):He;N(new kl(We,He.node,Z,null,Be))},N=function(V){_?(_.left=V,_=V):(E=V,_=V)};for(let V=0;V<p.count;++V){const Z=p.nextBitIsOne(),Q=Math.pow(2,p.count-(V+1));Z?x(Q,kl.BLACK):(x(Q,kl.BLACK),x(Q,kl.RED))}return E}(new gG(n.length));return new no(i||t,d)};let Lk;const Ym={};class fc{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(Ym&&oi,"ChildrenNode.ts has not been loaded"),Lk=Lk||new fc({".priority":Ym},{".priority":oi}),Lk}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof no?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==lu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(pn.Wrap);let d,u=s.getNext();for(;u;)r=r||t.isDefinedOn(u.node),i.push(u),u=s.getNext();d=r?VT(i,t.getCompare()):Ym;const p=t.toString(),_=Object.assign({},this.indexSet_);_[p]=t;const E=Object.assign({},this.indexes_);return E[p]=d,new fc(E,_)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,s)=>{const u=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(u,"Missing index implementation for "+s),r===Ym){if(u.isDefinedOn(t.node)){const d=[],p=e.getIterator(pn.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&d.push(_),_=p.getNext();return d.push(t),VT(d,u.getCompare())}return Ym}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new pn(t.name,d))),p.insert(t,t.node)}});return new fc(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===Ym)return r;{const s=e.get(t.name);return s?r.remove(new pn(t.name,s)):r}});return new fc(i,this.indexSet_)}}let Pw,rn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&cL(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pw||(Pw=new n(new no(Pk),null,fc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pw}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?Pw:i}}getChild(e){const i=wt(e);return null===i?this:this.getImmediateChild(i).getChild(Nn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new pn(e,i);let s,u;i.isEmpty()?(s=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),u=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Pw:this.priorityNode_;return new n(s,d,u)}}updateChild(e,i){const r=wt(e);if(null===r)return i;{(0,L.hu)(".priority"!==wt(e)||1===ls(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Nn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,u=!0;if(this.forEachChild(oi,(d,p)=>{i[d]=p.val(e),r++,u&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):u=!1}),!e&&u&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+uL(this.getPriority().val())+":"),this.forEachChild(oi,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":bT(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const u=s.getPredecessorKey(new pn(e,i));return u?u.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new pn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new pn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,pn.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,e)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,pn.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,e)>0;)s.getNext(),u=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fw?-1:0}withIndex(e){if(e===lu||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===lu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(oi),s=i.getIterator(oi);let u=r.getNext(),d=s.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=r.getNext(),d=s.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(e){return e===lu?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Fw=new class mG extends rn{constructor(){super(new no(Pk),rn.EMPTY_NODE,fc.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return rn.EMPTY_NODE}isEmpty(){return!1}};function Si(n,t=null){if(null===n)return rn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Zm(n,Si(t));if(n instanceof Array){let e=rn.EMPTY_NODE;return tr(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const s=Si(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Si(t))}{const e=[];let i=!1;if(tr(n,(u,d)=>{if("."!==u.substring(0,1)){const p=Si(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new pn(u,p)))}}),0===e.length)return rn.EMPTY_NODE;const s=VT(e,uG,u=>u.name,Pk);if(i){const u=VT(e,oi.getCompare());return new rn(s,Si(t),new fc({".priority":u},{".priority":oi}))}return new rn(s,Si(t),fc.Default)}}Object.defineProperties(pn,{MIN:{value:new pn(Ba,rn.EMPTY_NODE)},MAX:{value:new pn(Bo,Fw)}}),lL.__EMPTY_NODE=rn.EMPTY_NODE,Zm.__childrenNodeConstructor=rn,function cG(n){Fk=n}(Fw),function hG(n){fL=n}(Fw),function dG(n){hL=n}(Si);class Vk extends PT{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!nn(t)&&".priority"!==wt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?cc(t.name,e.name):s}makePost(t,e){const i=Si(t),r=rn.EMPTY_NODE.updateChild(this.indexPath_,i);return new pn(e,r)}maxPost(){const t=rn.EMPTY_NODE.updateChild(this.indexPath_,Fw);return new pn(Bo,t)}toString(){return hc(this.indexPath_,0).join("/")}}const Uk=new class yG extends PT{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?cc(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return pn.MIN}maxPost(){return pn.MAX}makePost(t,e){const i=Si(t);return new pn(e,i)}toString(){return".value"}},Qm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vG=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Qm.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let u=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=Qm.charAt(t[r]);return(0,L.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),mL=function(n){if(n===""+ST)return"-";const t=Bm(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let u=0;u<e.length;u++)e[u]=n.charAt(u);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Bo;const s=Qm.charAt(Qm.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},_L=function(n){if(n===""+yk)return Ba;const t=Bm(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+ST:(delete e[e.length-1],e.join("")):(e[e.length-1]=Qm.charAt(Qm.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function yL(n){return{type:"value",snapshotNode:n}}function Jm(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Lw(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Vw(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Hk{constructor(t){this.index_=t}updateChild(t,e,i,r,s,u){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?t.hasChild(e)?u.trackChildChange(Lw(e,d)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Jm(e,i)):u.trackChildChange(Vw(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(oi,(r,s)=>{e.hasChild(r)||i.trackChildChange(Lw(r,s))}),e.isLeafNode()||e.forEachChild(oi,(r,s)=>{if(t.hasChild(r)){const u=t.getImmediateChild(r);u.equals(s)||i.trackChildChange(Vw(r,s,u))}else i.trackChildChange(Jm(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?rn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Uw{constructor(t){this.indexedFilter_=new Hk(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Uw.getStartPost_(t),this.endPost_=Uw.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,u){return this.matches(new pn(e,i))||(i=rn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,u)}updateFullNode(t,e,i){e.isLeafNode()&&(e=rn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(rn.EMPTY_NODE);const s=this;return e.forEachChild(oi,(u,d)=>{s.matches(new pn(u,d))||(r=r.updateImmediateChild(u,rn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class EG{constructor(t){this.rangedFilter_=new Uw(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,u){return this.rangedFilter_.matches(new pn(e,i))||(i=rn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,u):this.fullLimitUpdateChild_(t,e,i,s,u)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=rn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=rn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),u++}}else{let s,u,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(rn.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();d=(x,N)=>T(N,x)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,E=!1;for(;p.hasNext();){const T=p.getNext();!E&&d(s,T)<=0&&(E=!0),E&&_<this.limit_&&d(T,u)<=0?_++:r=r.updateImmediateChild(T.name,rn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let u;if(this.reverse_){const T=this.index_.getCompare();u=(x,N)=>T(N,x)}else u=this.index_.getCompare();const d=t;(0,L.hu)(d.numChildren()===this.limit_,"");const p=new pn(e,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(d.hasChild(e)){const T=d.getImmediateChild(e);let x=r.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=x&&(x.name===e||d.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const N=null==x?1:u(x,p);if(E&&!i.isEmpty()&&N>=0)return s?.trackChildChange(Vw(e,i,T)),d.updateImmediateChild(e,i);{s?.trackChildChange(Lw(e,T));const Z=d.updateImmediateChild(e,rn.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(s?.trackChildChange(Jm(x.name,x.node)),Z.updateImmediateChild(x.name,x.node)):Z}}return i.isEmpty()?t:E&&u(_,p)>=0?(null!=s&&(s.trackChildChange(Lw(_.name,_.node)),s.trackChildChange(Jm(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(_.name,rn.EMPTY_NODE)):t}}class UT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ba}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oi}copy(){const t=new UT;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function jk(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function Gk(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function BT(n,t){const e=n.copy();return e.index_=t,e}function vL(n){const t={};if(n.isDefault())return t;let e;return n.index_===oi?e="$priority":n.index_===Uk?e="$value":n.index_===lu?e="$key":((0,L.hu)(n.index_ instanceof Vk,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Wl)(e),n.startSet_&&(t.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function wL(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==oi&&(t.i=n.index_.toString()),t}class HT extends Ze{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=ih("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const u=HT.getListenId_(t,i),d={};this.listens_[u]=d;const p=vL(t._queryParams);this.restRequest_(s+".json",p,(_,E)=>{let T=E;if(404===_&&(T=null,_=null),null===_&&this.onDataUpdate_(s,T,!1,i),(0,L.DV)(this.listens_,u)===d){let x;x=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(x,null)}})}unlisten(t,e){const i=HT.getListenId_(t,e);delete this.listens_[i]}get(t){const e=vL(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(s,u)=>{let d=u;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,L.cI)(d.responseText)}catch{Gi("Failed to parse JSON response for "+u+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Gi("Got unsuccessful REST response for "+u+" Status: "+d.status),i(d.status);i=null}},d.open("GET",u,!0),d.send()})}}class DG{constructor(){this.rootNode_=rn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function jT(){return{value:null,children:new Map}}function Xm(n,t,e){if(nn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=wt(t);n.children.has(i)||n.children.set(i,jT()),Xm(n.children.get(i),t=Nn(t),e)}}function $k(n,t){if(nn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(oi,(i,r)=>{Xm(n,new Xe(i),r)}),$k(n,t)}}if(n.children.size>0){const e=wt(t);return t=Nn(t),n.children.has(e)&&$k(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function zk(n,t,e){null!==n.value?e(t,n.value):function AG(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{zk(r,new Xe(t.toString()+"/"+i),e)})}class xG{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&tr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class OG{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new xG(t);const i=1e4+2e4*Math.random();Jf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;tr(t,(r,s)=>{s>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),Jf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ja=(()=>{return(n=ja||(ja={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ja;var n})();function Kk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class GT{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=ja.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Xe(t));return new GT(vt(),e,this.revert)}}return(0,L.hu)(wt(this.path)===t,"operationForChild called for unrelated child."),new GT(Nn(this.path),this.affectedTree,this.revert)}}class Bw{constructor(t,e){this.source=t,this.path=e,this.type=ja.LISTEN_COMPLETE}operationForChild(t){return nn(this.path)?new Bw(this.source,vt()):new Bw(this.source,Nn(this.path))}}class rp{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=ja.OVERWRITE}operationForChild(t){return nn(this.path)?new rp(this.source,vt(),this.snap.getImmediateChild(t)):new rp(this.source,Nn(this.path),this.snap)}}class e_{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=ja.MERGE}operationForChild(t){if(nn(this.path)){const e=this.children.subtree(new Xe(t));return e.isEmpty()?null:e.value?new rp(this.source,vt(),e.value):new e_(this.source,vt(),e)}return(0,L.hu)(wt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e_(this.source,Nn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class oh{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(nn(t))return this.isFullyInitialized()&&!this.filtered_;const e=wt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class RG{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Hw(n,t,e,i,r,s){const u=i.filter(d=>d.type===e);u.sort((d,p)=>function FG(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new pn(t.childName,t.snapshotNode),r=new pn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),u.forEach(d=>{const p=function PG(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(p,n.query_))})})}function $T(n,t){return{eventCache:n,serverCache:t}}function jw(n,t,e,i){return $T(new oh(t,e,i),n.serverCache)}function CL(n,t,e,i){return $T(n.eventCache,new oh(t,e,i))}function zT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Zk;class ai{constructor(t,e=(()=>(Zk||(Zk=new no(mk)),Zk))()){this.value=t,this.children=e}static fromObject(t){let e=new ai(null);return tr(t,(i,r)=>{e=e.set(new Xe(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:vt(),value:this.value};if(nn(t))return null;{const i=wt(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Nn(t),e);return null!=s?{path:Wn(new Xe(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(nn(t))return this;{const e=wt(t),i=this.children.get(e);return null!==i?i.subtree(Nn(t)):new ai(null)}}set(t,e){if(nn(t))return new ai(e,this.children);{const i=wt(t),s=(this.children.get(i)||new ai(null)).set(Nn(t),e),u=this.children.insert(i,s);return new ai(this.value,u)}}remove(t){if(nn(t))return this.children.isEmpty()?new ai(null):new ai(null,this.children);{const e=wt(t),i=this.children.get(e);if(i){const r=i.remove(Nn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new ai(null):new ai(this.value,s)}return this}}get(t){if(nn(t))return this.value;{const e=wt(t),i=this.children.get(e);return i?i.get(Nn(t)):null}}setTree(t,e){if(nn(t))return e;{const i=wt(t),s=(this.children.get(i)||new ai(null)).setTree(Nn(t),e);let u;return u=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new ai(this.value,u)}}fold(t){return this.fold_(vt(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Wn(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,vt(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(nn(t))return null;{const s=wt(t),u=this.children.get(s);return u?u.findOnPath_(Nn(t),Wn(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,vt(),e)}foreachOnPath_(t,e,i){if(nn(t))return this;{this.value&&i(e,this.value);const r=wt(t),s=this.children.get(r);return s?s.foreachOnPath_(Nn(t),Wn(e,r),i):new ai(null)}}foreach(t){this.foreach_(vt(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Wn(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Ol{constructor(t){this.writeTree_=t}static empty(){return new Ol(new ai(null))}}function Gw(n,t,e){if(nn(t))return new Ol(new ai(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const u=fr(r,t);return s=s.updateChild(u,e),new Ol(n.writeTree_.set(r,s))}{const r=new ai(e),s=n.writeTree_.setTree(t,r);return new Ol(s)}}}function Yk(n,t,e){let i=n;return tr(e,(r,s)=>{i=Gw(i,Wn(t,r),s)}),i}function bL(n,t){if(nn(t))return Ol.empty();{const e=n.writeTree_.setTree(t,new ai(null));return new Ol(e)}}function Qk(n,t){return null!=op(n,t)}function op(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(fr(e.path,t)):null}function IL(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(oi,(i,r)=>{t.push(new pn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new pn(i,r.value))}),t}function ah(n,t){if(nn(t))return n;{const e=op(n,t);return new Ol(null!=e?new ai(e):n.writeTree_.subtree(t))}}function Jk(n){return n.writeTree_.isEmpty()}function t_(n,t){return TL(vt(),n.writeTree_,t)}function TL(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=TL(Wn(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Wn(n,".priority"),i)),e}}function WT(n,t){return ML(t,n)}function jG(n,t){if(n.snap)return Ha(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ha(Wn(n.path,e),t))return!0;return!1}function $G(n){return n.visible}function SL(n,t,e){let i=Ol.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const u=s.path;let d;if(s.snap)Ha(e,u)?(d=fr(e,u),i=Gw(i,d,s.snap)):Ha(u,e)&&(d=fr(u,e),i=Gw(i,vt(),s.snap.getChild(d)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Ha(e,u))d=fr(e,u),i=Yk(i,d,s.children);else if(Ha(u,e))if(d=fr(u,e),nn(d))i=Yk(i,vt(),s.children);else{const p=(0,L.DV)(s.children,wt(d));if(p){const _=p.getChild(Nn(d));i=Gw(i,vt(),_)}}}}}return i}function DL(n,t,e,i,r){if(i||r){const s=ah(n.visibleWrites,t);return!r&&Jk(s)?e:r||null!=e||Qk(s,vt())?t_(SL(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(Ha(_.path,t)||Ha(t,_.path))},t),e||rn.EMPTY_NODE):null}{const s=op(n.visibleWrites,t);if(null!=s)return s;{const u=ah(n.visibleWrites,t);return Jk(u)?e:null!=e||Qk(u,vt())?t_(u,e||rn.EMPTY_NODE):null}}}function qT(n,t,e,i){return DL(n.writeTree,n.treePath,t,e,i)}function Xk(n,t){return function zG(n,t,e){let i=rn.EMPTY_NODE;const r=op(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(oi,(s,u)=>{i=i.updateImmediateChild(s,u)}),i;if(e){const s=ah(n.visibleWrites,t);return e.forEachChild(oi,(u,d)=>{const p=t_(ah(s,new Xe(u)),d);i=i.updateImmediateChild(u,p)}),IL(s).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return IL(ah(n.visibleWrites,t)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,t)}function AL(n,t,e,i){return function WG(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Wn(t,e);if(Qk(n.visibleWrites,s))return null;{const u=ah(n.visibleWrites,s);return Jk(u)?r.getChild(e):t_(u,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function KT(n,t){return function KG(n,t){return op(n.visibleWrites,t)}(n.writeTree,Wn(n.treePath,t))}function e1(n,t,e){return function qG(n,t,e,i){const r=Wn(t,e),s=op(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?t_(ah(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function xL(n,t){return ML(Wn(n.treePath,t),n.writeTree)}function ML(n,t){return{treePath:n,writeTree:t}}class JG{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,Vw(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,Lw(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Jm(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,Vw(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const kL=new class XG{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class t1{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new oh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return e1(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sp(this.viewCache_),s=function QG(n,t,e,i,r,s){return function ZG(n,t,e,i,r,s,u){let d;const p=ah(n.visibleWrites,t),_=op(p,vt());if(null!=_)d=_;else{if(null==e)return[];d=t_(p,e)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const E=[],T=u.getCompare(),x=s?d.getReverseIteratorFrom(i,u):d.getIteratorFrom(i,u);let N=x.getNext();for(;N&&E.length<r;)0!==T(N,i)&&E.push(N),N=x.getNext();return E}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function OL(n,t,e,i,r,s){const u=t.eventCache;if(null!=KT(i,e))return t;{let d,p;if(nn(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=sp(t),T=Xk(i,_ instanceof rn?_:rn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),T,s)}else{const _=qT(i,sp(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=wt(e);if(".priority"===_){(0,L.hu)(1===ls(e),"Can't have a priority with additional path components");const E=u.getNode();p=t.serverCache.getNode();const T=AL(i,e,E,p);d=null!=T?n.filter.updatePriority(E,T):u.getNode()}else{const E=Nn(e);let T;if(u.isCompleteForChild(_)){p=t.serverCache.getNode();const x=AL(i,e,u.getNode(),p);T=null!=x?u.getNode().getImmediateChild(_).updateChild(E,x):u.getNode().getImmediateChild(_)}else T=e1(i,_,t.serverCache);d=null!=T?n.filter.updateChild(u.getNode(),_,T,E,r,s):u.getNode()}}return jw(t,d,u.isFullyInitialized()||nn(e),n.filter.filtersNodes())}}function ZT(n,t,e,i,r,s,u,d){const p=t.serverCache;let _;const E=u?n.filter:n.filter.getIndexedFilter();if(nn(e))_=E.updateFullNode(p.getNode(),i,null);else if(E.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(e,i);_=E.updateFullNode(p.getNode(),N,null)}else{const N=wt(e);if(!p.isCompleteForPath(e)&&ls(e)>1)return t;const V=Nn(e),Q=p.getNode().getImmediateChild(N).updateChild(V,i);_=".priority"===N?E.updatePriority(p.getNode(),Q):E.updateChild(p.getNode(),N,Q,V,kL,null)}const T=CL(t,_,p.isFullyInitialized()||nn(e),E.filtersNodes());return OL(n,T,e,r,new t1(r,T,s),d)}function n1(n,t,e,i,r,s,u){const d=t.eventCache;let p,_;const E=new t1(r,t,s);if(nn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,u),p=jw(t,_,!0,n.filter.filtersNodes());else{const T=wt(e);if(".priority"===T)_=n.filter.updatePriority(t.eventCache.getNode(),i),p=jw(t,_,d.isFullyInitialized(),d.isFiltered());else{const x=Nn(e),N=d.getNode().getImmediateChild(T);let V;if(nn(x))V=i;else{const Z=E.getCompleteChild(T);V=null!=Z?".priority"===tp(x)&&Z.getChild(Km(x)).isEmpty()?Z:Z.updateChild(x,i):rn.EMPTY_NODE}p=N.equals(V)?t:jw(t,n.filter.updateChild(d.getNode(),T,V,x,E,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function RL(n,t){return n.eventCache.isCompleteForChild(t)}function NL(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function i1(n,t,e,i,r,s,u,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,p=t;_=nn(e)?i:new ai(null).setTree(e,i);const E=t.serverCache.getNode();return _.children.inorderTraversal((T,x)=>{if(E.hasChild(T)){const V=NL(0,t.serverCache.getNode().getImmediateChild(T),x);p=ZT(n,p,new Xe(T),V,r,s,u,d)}}),_.children.inorderTraversal((T,x)=>{const N=!t.serverCache.isCompleteForChild(T)&&null===x.value;if(!E.hasChild(T)&&!N){const Z=NL(0,t.serverCache.getNode().getImmediateChild(T),x);p=ZT(n,p,new Xe(T),Z,r,s,u,d)}}),p}class l${constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Hk(i.getIndex()),s=function CG(n){return n.loadsAllData()?new Hk(n.getIndex()):n.hasLimit()?new EG(n):new Uw(n)}(i);this.processor_=function e$(n){return{filter:n}}(s);const u=e.serverCache,d=e.eventCache,p=r.updateFullNode(rn.EMPTY_NODE,u.getNode(),null),_=s.updateFullNode(rn.EMPTY_NODE,d.getNode(),null),E=new oh(p,u.isFullyInitialized(),r.filtersNodes()),T=new oh(_,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=$T(T,E),this.eventGenerator_=new RG(this.query_)}get query(){return this.query_}}function d$(n,t){const e=sp(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!nn(t)&&!e.getImmediateChild(wt(t)).isEmpty())?e.getChild(t):null}function PL(n){return 0===n.eventRegistrations_.length}function FL(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(e,r);u&&i.push(u)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function LL(n,t,e,i){t.type===ja.MERGE&&null!==t.source.queryId&&((0,L.hu)(sp(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(zT(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function n$(n,t,e,i,r){const s=new JG;let u,d;if(e.type===ja.OVERWRITE){const _=e;_.source.fromUser?u=n1(n,t,_.path,_.snap,i,r,s):((0,L.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!nn(_.path),u=ZT(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===ja.MERGE){const _=e;_.source.fromUser?u=function r$(n,t,e,i,r,s,u){let d=t;return i.foreach((p,_)=>{const E=Wn(e,p);RL(t,wt(E))&&(d=n1(n,d,E,_,r,s,u))}),i.foreach((p,_)=>{const E=Wn(e,p);RL(t,wt(E))||(d=n1(n,d,E,_,r,s,u))}),d}(n,t,_.path,_.children,i,r,s):((0,L.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),u=i1(n,t,_.path,_.children,i,r,d,s))}else if(e.type===ja.ACK_USER_WRITE){const _=e;u=_.revert?function a$(n,t,e,i,r,s){let u;if(null!=KT(i,e))return t;{const d=new t1(i,t,r),p=t.eventCache.getNode();let _;if(nn(e)||".priority"===wt(e)){let E;if(t.serverCache.isFullyInitialized())E=qT(i,sp(t));else{const T=t.serverCache.getNode();(0,L.hu)(T instanceof rn,"serverChildren would be complete if leaf node"),E=Xk(i,T)}_=n.filter.updateFullNode(p,E,s)}else{const E=wt(e);let T=e1(i,E,t.serverCache);null==T&&t.serverCache.isCompleteForChild(E)&&(T=p.getImmediateChild(E)),_=null!=T?n.filter.updateChild(p,E,T,Nn(e),d,s):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,rn.EMPTY_NODE,Nn(e),d,s):p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=qT(i,sp(t)),u.isLeafNode()&&(_=n.filter.updateFullNode(_,u,s)))}return u=t.serverCache.isFullyInitialized()||null!=KT(i,vt()),jw(t,_,u,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function s$(n,t,e,i,r,s,u){if(null!=KT(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(nn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return ZT(n,t,e,p.getNode().getChild(e),r,s,d,u);if(nn(e)){let _=new ai(null);return p.getNode().forEachChild(lu,(E,T)=>{_=_.set(new Xe(E),T)}),i1(n,t,e,_,r,s,d,u)}return t}{let _=new ai(null);return i.foreach((E,T)=>{const x=Wn(e,E);p.isCompleteForPath(x)&&(_=_.set(E,p.getNode().getChild(x)))}),i1(n,t,e,_,r,s,d,u)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==ja.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);u=function o$(n,t,e,i,r){const s=t.serverCache;return OL(n,CL(t,s.getNode(),s.isFullyInitialized()||nn(e),s.isFiltered()),e,i,kL,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function i$(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=zT(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(yL(zT(t)))}}(t,u,p),{viewCache:u,changes:p}}(n.processor_,r,t,e,i);return function t$(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,VL(n,s.changes,s.viewCache.eventCache.getNode(),null)}function VL(n,t,e,i){return function NG(n,t,e,i){const r=[],s=[];return t.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function wG(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(u.childName,u.snapshotNode))}),Hw(n,r,"child_removed",t,i,e),Hw(n,r,"child_added",t,i,e),Hw(n,r,"child_moved",s,i,e),Hw(n,r,"child_changed",t,i,e),Hw(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let YT,JT;class UL{constructor(){this.views=new Map}}function r1(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),LL(s,t,e,i)}{let s=[];for(const u of n.views.values())s=s.concat(LL(u,t,e,i));return s}}function BL(n,t,e,i,r){const u=n.views.get(t._queryIdentifier);if(!u){let d=qT(e,r?i:null),p=!1;d?p=!0:i instanceof rn?(d=Xk(e,i),p=!1):(d=rn.EMPTY_NODE,p=!1);const _=$T(new oh(d,p,!1),new oh(i,r,!1));return new l$(t,_)}return u}function HL(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function lh(n,t){let e=null;for(const i of n.views.values())e=e||d$(i,t);return e}function jL(n,t){return t._queryParams.loadsAllData()?QT(n):n.views.get(t._queryIdentifier)}function GL(n,t){return null!=jL(n,t)}function uh(n){return null!=QT(n)}function QT(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let E$=1;class $L{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ai(null),this.pendingWriteTree_=function YG(){return{visibleWrites:Ol.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function s1(n,t,e,i,r){return function VG(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Gw(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?n_(n,new rp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function ch(n,t,e=!1){const i=function BG(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function HG(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=e&&jG(d,i.path)?r=!1:Ha(i.path,d.path)&&(s=!0)),u--}return!!r&&(s?(function GG(n){n.visibleWrites=SL(n.allWrites,$G,vt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=bL(n.visibleWrites,i.path):tr(i.children,p=>{n.visibleWrites=bL(n.visibleWrites,Wn(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new ai(null);return null!=i.snap?s=s.set(vt(),!0):tr(i.children,u=>{s=s.set(new Xe(u),!0)}),n_(n,new GT(i.path,s,e))}return[]}function $w(n,t,e){return n_(n,new rp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function XT(n,t,e,i,r=!1){const s=t._path,u=n.syncPointTree_.get(s);let d=[];if(u&&("default"===t._queryIdentifier||GL(u,t))){const p=function y$(n,t,e,i){const r=t._queryIdentifier,s=[];let u=[];const d=uh(n);if("default"===r)for(const[p,_]of n.views.entries())u=u.concat(FL(_,e,i)),PL(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(r);p&&(u=u.concat(FL(p,e,i)),PL(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!uh(n)&&s.push(new(function g$(){return(0,L.hu)(YT,"Reference.ts has not been loaded"),YT}())(t._repo,t._path)),{removed:s,events:u}}(u,t,e,i);(function m$(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=p.removed;if(d=p.events,!r){const E=-1!==_.findIndex(x=>x._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(s,(x,N)=>uh(N));if(E&&!T){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const N=function A$(n){return n.fold((t,e,i)=>{if(e&&uh(e))return[QT(e)];{let r=[];return e&&(r=HL(e)),tr(i,(s,u)=>{r=r.concat(u)}),r}})}(x);for(let V=0;V<N.length;++V){const Z=N[V],Q=Z.query,Ae=KL(n,Z);n.listenProvider_.startListening(Ww(Q),zw(n,Q),Ae.hashFn,Ae.onComplete)}}}!T&&_.length>0&&!i&&(E?n.listenProvider_.stopListening(Ww(t),null):_.forEach(x=>{const N=n.queryToTagMap.get(tS(x));n.listenProvider_.stopListening(Ww(x),N)}))}!function x$(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=tS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,_)}return d}function zL(n,t,e,i){const r=a1(n,i);if(null!=r){const s=l1(r),u=s.path,d=s.queryId,p=fr(u,t);return u1(n,u,new rp(Kk(d),p,e))}return[]}function o1(n,t,e,i=!1){const r=t._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(r,(x,N)=>{const V=fr(x,r);s=s||lh(N,V),u=u||uh(N)});let p,d=n.syncPointTree_.get(r);d?(u=u||uh(d),s=s||lh(d,vt())):(d=new UL,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?p=!0:(p=!1,s=rn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,V)=>{const Z=lh(V,vt());Z&&(s=s.updateImmediateChild(N,Z))}));const _=GL(d,t);if(!_&&!t._queryParams.loadsAllData()){const x=tS(t);(0,L.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const N=function M$(){return E$++}();n.queryToTagMap.set(x,N),n.tagToQueryMap.set(N,x)}let T=function _$(n,t,e,i,r,s){const u=BL(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,u),function h$(n,t){n.eventRegistrations_.push(t)}(u,e),function f$(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(oi,(s,u)=>{i.push(Jm(s,u))}),e.isFullyInitialized()&&i.push(yL(e.getNode())),VL(n,i,e.getNode(),t)}(u,e)}(d,t,e,WT(n.pendingWriteTree_,r),s,p);if(!_&&!u&&!i){const x=jL(d,t);T=T.concat(function k$(n,t,e){const i=t._path,r=zw(n,t),s=KL(n,e),u=n.listenProvider_.startListening(Ww(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!uh(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,E,T)=>{if(!nn(_)&&E&&uh(E))return[QT(E).query];{let x=[];return E&&(x=x.concat(HL(E).map(N=>N.query))),tr(T,(N,V)=>{x=x.concat(V)}),x}});for(let _=0;_<p.length;++_){const E=p[_];n.listenProvider_.stopListening(Ww(E),zw(n,E))}}return u}(n,t,x))}return T}function eS(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(u,d)=>{const _=lh(d,fr(u,t));if(_)return _});return DL(r,t,s,e,!0)}function n_(n,t){return WL(t,n.syncPointTree_,null,WT(n.pendingWriteTree_,vt()))}function WL(n,t,e,i){if(nn(n.path))return qL(n,t,e,i);{const r=t.get(vt());null==e&&null!=r&&(e=lh(r,vt()));let s=[];const u=wt(n.path),d=n.operationForChild(u),p=t.children.get(u);if(p&&d){const _=e?e.getImmediateChild(u):null,E=xL(i,u);s=s.concat(WL(d,p,_,E))}return r&&(s=s.concat(r1(r,n,i,e))),s}}function qL(n,t,e,i){const r=t.get(vt());null==e&&null!=r&&(e=lh(r,vt()));let s=[];return t.children.inorderTraversal((u,d)=>{const p=e?e.getImmediateChild(u):null,_=xL(i,u),E=n.operationForChild(u);E&&(s=s.concat(qL(E,d,p,_)))}),r&&(s=s.concat(r1(r,n,i,e))),s}function KL(n,t){const e=t.query,i=zw(n,e);return{hashFn:()=>(function u$(n){return n.viewCache_.serverCache.getNode()}(t)||rn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function T$(n,t,e){const i=a1(n,e);if(i){const r=l1(i),s=r.path,u=r.queryId,d=fr(s,t);return u1(n,s,new Bw(Kk(u),d))}return[]}(n,e._path,i):function I$(n,t){return n_(n,new Bw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function ZF(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return XT(n,e,null,s)}}}}function zw(n,t){const e=tS(t);return n.queryToTagMap.get(e)}function tS(n){return n._path.toString()+"$"+n._queryIdentifier}function a1(n,t){return n.tagToQueryMap.get(t)}function l1(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Xe(n.substr(0,t))}}function u1(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),r1(i,e,WT(n.pendingWriteTree_,t),null)}function Ww(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function w$(){return(0,L.hu)(JT,"Reference.ts has not been loaded"),JT}())(n._repo,n._path):n}class c1{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new c1(e)}node(){return this.node_}}class d1{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Wn(this.path_,t);return new d1(this.syncTree_,e)}node(){return eS(this.syncTree_,this.path_)}}const ZL=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?R$(n[".sv"],t,e):"object"==typeof n[".sv"]?N$(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},R$=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},N$=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},YL=function(n,t,e,i){return f1(t,new d1(e,n),i)},h1=function(n,t,e){return f1(n,new c1(t),e)};function f1(n,t,e){const i=n.getPriority().val(),r=ZL(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const u=n,d=ZL(u.getValue(),t,e);return d!==u.getValue()||r!==u.getPriority().val()?new Zm(d,Si(r)):n}{const u=n;return s=u,r!==u.getPriority().val()&&(s=s.updatePriority(new Zm(r))),u.forEachChild(oi,(d,p)=>{const _=f1(p,t.getImmediateChild(d),e);_!==p&&(s=s.updateImmediateChild(d,_))}),s}}class p1{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function nS(n,t){let e=t instanceof Xe?t:new Xe(t),i=n,r=wt(e);for(;null!==r;){const s=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new p1(r,i,s),e=Nn(e),r=wt(e)}return i}function ap(n){return n.node.value}function g1(n,t){n.node.value=t,m1(n)}function QL(n){return n.node.childCount>0}function iS(n,t){tr(n.node.children,(e,i)=>{t(new p1(e,n,i))})}function JL(n,t,e,i){e&&!i&&t(n),iS(n,r=>{JL(r,t,!0,i)}),e&&i&&t(n)}function qw(n){return new Xe(null===n.parent?n.name:qw(n.parent)+"/"+n.name)}function m1(n){null!==n.parent&&function L$(n,t,e){const i=function P$(n){return void 0===ap(n)&&!QL(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,m1(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,m1(n))}(n.parent,n.name,n)}const V$=/[\[\].#$\/\u0000-\u001F\u007F]/,U$=/[\[\].#$\u0000-\u001F\u007F]/,_1=10485760,rS=function(n){return"string"==typeof n&&0!==n.length&&!V$.test(n)},XL=function(n){return"string"==typeof n&&0!==n.length&&!U$.test(n)},Kw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Qf(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},uu=function(n,t,e,i){i&&void 0===t||Zw((0,L.gK)(n,"value"),t,e)},Zw=function(n,t,e){const i=e instanceof Xe?new tG(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+np(i));if("function"==typeof t)throw new Error(n+"contains a function "+np(i)+" with contents = "+t.toString());if(Qf(t))throw new Error(n+"contains "+t.toString()+" "+np(i));if("string"==typeof t&&t.length>_1/3&&(0,L.ug)(t)>_1)throw new Error(n+"contains a string greater than "+_1+" utf8 bytes "+np(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(tr(t,(u,d)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!rS(u)))throw new Error(n+" contains an invalid key ("+u+") "+np(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function nG(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),sL(n)})(i,u),Zw(n,d,i),function iG(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+np(i)+" in addition to actual children.")}},eV=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];tr(t,(u,d)=>{const p=new Xe(u);if(Zw(r,d,Wn(e,p)),".priority"===tp(p)&&!Kw(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=hc(i);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!rS(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Rw);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Ha(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},y1=function(n,t,e){if(!e||void 0!==t){if(Qf(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Kw(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Yw=function(n,t,e,i){if(!(i&&void 0===e||rS(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Qw=function(n,t,e,i){if(!(i&&void 0===e||XL(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ga=function(n,t){if(".info"===wt(t))throw new Error(n+" failed = Can't modify data under /.info/")},tV=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!rS(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),XL(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class G${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sS(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!Rk(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function nV(n,t,e){sS(n,e),iV(n,i=>Rk(i,t))}function Ho(n,t,e){sS(n,e),iV(n,i=>Ha(i,t)||Ha(t,i))}function iV(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?($$(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function $$(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();nh&&ji("event: "+e.toString()),Ml(i)}}}const rV="repo_interrupt";class W${constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new G$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jT(),this.transactionQueueTree_=new p1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sV(n){const e=n.infoData_.getNode(new Xe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Jw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:sV(n)})}function oV(n,t,e,i,r){n.dataUpdateCount++;const s=new Xe(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let u=[];if(r)if(i){const p=(0,L.UI)(e,_=>Si(_));u=function S$(n,t,e,i){const r=a1(n,i);if(r){const s=l1(r),u=s.path,d=s.queryId,p=fr(u,t),_=ai.fromObject(e);return u1(n,u,new e_(Kk(d),p,_))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Si(e);u=zL(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,L.UI)(e,_=>Si(_));u=function b$(n,t,e){const i=ai.fromObject(e);return n_(n,new e_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=Si(e);u=$w(n.serverSyncTree_,s,p)}let d=s;u.length>0&&(d=r_(n,s)),Ho(n.eventQueue_,d,u)}function aV(n,t){v1(n,"connected",t),!1===t&&function Q$(n){i_(n,"onDisconnectEvents");const t=Jw(n),e=jT();zk(n.onDisconnect_,vt(),(r,s)=>{const u=YL(r,s,n.serverSyncTree_,t);Xm(e,r,u)});let i=[];zk(e,vt(),(r,s)=>{i=i.concat($w(n.serverSyncTree_,r,s));const u=b1(n,r);r_(n,u)}),n.onDisconnect_=jT(),Ho(n.eventQueue_,vt(),i)}(n)}function v1(n,t,e){const i=new Xe("/.info/"+t),r=Si(e);n.infoData_.updateSnapshot(i,r);const s=$w(n.infoSyncTree_,i,r);Ho(n.eventQueue_,i,s)}function oS(n){return n.nextWriteId_++}function w1(n,t,e,i,r){i_(n,"set",{path:t.toString(),value:e,priority:i});const s=Jw(n),u=Si(e,i),d=eS(n.serverSyncTree_,t),p=h1(u,d,s),_=oS(n),E=s1(n.serverSyncTree_,t,p,_,!0);sS(n.eventQueue_,E),n.server_.put(t.toString(),u.val(!0),(x,N)=>{const V="ok"===x;V||Gi("set at "+t+" failed: "+x);const Z=ch(n.serverSyncTree_,_,!V);Ho(n.eventQueue_,t,Z),dh(0,r,x,N)});const T=b1(n,t);r_(n,T),Ho(n.eventQueue_,T,[])}function J$(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&$k(n.onDisconnect_,t),dh(0,e,i,r)})}function lV(n,t,e,i){const r=Si(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,u)=>{"ok"===s&&Xm(n.onDisconnect_,t,r),dh(0,i,s,u)})}function E1(n,t,e){let i;i=".info"===wt(t._path)?XT(n.infoSyncTree_,t,e):XT(n.serverSyncTree_,t,e),nV(n.eventQueue_,t._path,i)}function uV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(rV)}function i_(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),ji(e,...t)}function dh(n,t,e,i){t&&Ml(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const u=new Error(s);u.code=r,t(u)}})}function C1(n,t,e){return eS(n.serverSyncTree_,t,e)||rn.EMPTY_NODE}function aS(n,t=n.transactionQueueTree_){if(t||lS(n,t),ap(t)){const e=dV(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function r6(n,t,e){const i=e.map(_=>_.currentWriteId),r=C1(n,t,i);let s=r;const u=r.hash();for(let _=0;_<e.length;_++){const E=e[_];(0,L.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=fr(t,E.path);s=s.updateChild(T,E.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,_=>{i_(n,"transaction put response",{path:p.toString(),status:_});let E=[];if("ok"===_){const T=[];for(let x=0;x<e.length;x++)e[x].status=2,E=E.concat(ch(n.serverSyncTree_,e[x].currentWriteId)),e[x].onComplete&&T.push(()=>e[x].onComplete(null,!0,e[x].currentOutputSnapshotResolved)),e[x].unwatcher();lS(n,nS(n.transactionQueueTree_,t)),aS(n,n.transactionQueueTree_),Ho(n.eventQueue_,t,E);for(let x=0;x<T.length;x++)Ml(T[x])}else{if("datastale"===_)for(let T=0;T<e.length;T++)e[T].status=3===e[T].status?4:0;else{Gi("transaction at "+p.toString()+" failed: "+_);for(let T=0;T<e.length;T++)e[T].status=4,e[T].abortReason=_}r_(n,t)}},u)}(n,qw(t),e)}else QL(t)&&iS(t,e=>{aS(n,e)})}function r_(n,t){const e=cV(n,t),i=qw(e);return function s6(n,t,e){if(0===t.length)return;const i=[];let r=[];const u=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],_=fr(e,p.path);let T,E=!1;if((0,L.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,T=p.abortReason,r=r.concat(ch(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,T="maxretry",r=r.concat(ch(n.serverSyncTree_,p.currentWriteId,!0));else{const x=C1(n,p.path,u);p.currentInputSnapshot=x;const N=t[d].update(x.val());if(void 0!==N){Zw("transaction failed: Data returned ",N,p.path);let V=Si(N);"object"==typeof N&&null!=N&&(0,L.r3)(N,".priority")||(V=V.updatePriority(x.getPriority()));const Q=p.currentWriteId,Ae=Jw(n),Be=h1(V,x,Ae);p.currentOutputSnapshotRaw=V,p.currentOutputSnapshotResolved=Be,p.currentWriteId=oS(n),u.splice(u.indexOf(Q),1),r=r.concat(s1(n.serverSyncTree_,p.path,Be,p.currentWriteId,p.applyLocally)),r=r.concat(ch(n.serverSyncTree_,Q,!0))}else E=!0,T="nodata",r=r.concat(ch(n.serverSyncTree_,p.currentWriteId,!0))}Ho(n.eventQueue_,e,r),r=[],E&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===T?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(T),!1,null)))}lS(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Ml(i[d]);aS(n,n.transactionQueueTree_)}(n,dV(n,e),i),i}function cV(n,t){let e,i=n.transactionQueueTree_;for(e=wt(t);null!==e&&void 0===ap(i);)i=nS(i,e),e=wt(t=Nn(t));return i}function dV(n,t){const e=[];return hV(n,t,e),e.sort((i,r)=>i.order-r.order),e}function hV(n,t,e){const i=ap(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);iS(t,r=>{hV(n,r,e)})}function lS(n,t){const e=ap(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,g1(t,e.length>0?e:void 0)}iS(t,i=>{lS(n,i)})}function b1(n,t){const e=qw(cV(n,t)),i=nS(n.transactionQueueTree_,t);return function F$(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{I1(n,r)}),I1(n,i),JL(i,r=>{I1(n,r)}),e}function I1(n,t){const e=ap(t);if(e){const i=[];let r=[],s=-1;for(let u=0;u<e.length;u++)3===e[u].status||(1===e[u].status?((0,L.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,e[u].status=3,e[u].abortReason="set"):((0,L.hu)(0===e[u].status,"Unexpected transaction status in abort"),e[u].unwatcher(),r=r.concat(ch(n.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&i.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?g1(t,void 0):e.length=s+1,Ho(n.eventQueue_,qw(t),r);for(let u=0;u<i.length;u++)Ml(i[u])}}const T1=function(n,t){const e=l6(n),i=e.namespace;return"firebase.com"===e.domain&&Uo(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Uo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Aw(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Xe(e.pathString)}},l6=function(n){let t="",e="",i="",r="",s="",u=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),t=n.substring(0,Math.min(E,T)),E<T&&(r=function o6(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(E,T)));const x=function a6(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Gi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,T)));_=t.indexOf(":"),_>=0?(u="https"===d||"wss"===d,p=parseInt(t.substring(_+1),10)):_=t.length;const N=t.slice(0,_);if("localhost"===N.toLowerCase())e="localhost";else if(N.split(".").length<=2)e=N;else{const V=t.indexOf(".");i=t.substring(0,V).toLowerCase(),e=t.substring(V+1),s=i}"ns"in x&&(s=x.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:u,scheme:d,pathString:r,namespace:s}};class fV{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class pV{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class S1{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class gV{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return J$(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Ga("OnDisconnect.remove",this._path);const t=new L.BH;return lV(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Ga("OnDisconnect.set",this._path),uu("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return lV(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Ga("OnDisconnect.setWithPriority",this._path),uu("OnDisconnect.setWithPriority",t,this._path,!1),y1("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function X$(n,t,e,i,r){const s=Si(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(u,d)=>{"ok"===u&&Xm(n.onDisconnect_,t,s),dh(0,r,u,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Ga("OnDisconnect.update",this._path),eV("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function e6(n,t,e,i){if((0,L.xb)(e))return ji("onDisconnect().update() called with empty data.  Don't do anything."),void dh(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&tr(e,(u,d)=>{const p=Si(d);Xm(n.onDisconnect_,Wn(t,u),p)}),dh(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class io{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return nn(this._path)?null:tp(this._path)}get ref(){return new $a(this._repo,this._path)}get _queryIdentifier(){const t=wL(this._queryParams),e=IT(t);return"{}"===e?"default":e}get _queryObject(){return wL(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof io))return!1;const e=this._repo===t._repo,i=Rk(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ow(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function uS(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function hh(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===lu){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ba)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Bo)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===oi){if(null!=t&&!Kw(t)||null!=e&&!Kw(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof Vk||n.getIndex()===Uk,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class $a extends io{constructor(t,e){super(t,e,new UT,!1)}get parent(){const t=Km(this._path);return null===t?null:new $a(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class lp{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Xe(t),i=up(this.ref,t);return new lp(this._node.getChild(e),i,oi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new lp(r,up(this.ref,i),oi)))}hasChild(t){const e=new Xe(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function mV(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?up(n._root,t):n._root}function _V(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=T1(t,n._repo.repoInfo_.nodeAdmin);tV("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Uo("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),mV(n,e.path.toString())}function up(n,t){return null===wt((n=(0,L.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Qw("child","path",e,!1)):Qw("child","path",t,!1),new $a(n._repo,Wn(n._path,t));var e}function D1(n,t){n=(0,L.m9)(n),Ga("set",n._path),uu("set",t,n._path,!1);const e=new L.BH;return w1(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function f6(n,t){eV("update",t,n._path,!1);const e=new L.BH;return function Y$(n,t,e,i){i_(n,"update",{path:t.toString(),value:e});let r=!0;const s=Jw(n),u={};if(tr(e,(d,p)=>{r=!1,u[d]=YL(Wn(t,d),Si(p),n.serverSyncTree_,s)}),r)ji("update() called with empty data.  Don't do anything."),dh(0,i,"ok",void 0);else{const d=oS(n),p=function C$(n,t,e,i){!function UG(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=Yk(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ai.fromObject(e);return n_(n,new e_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,u,d);sS(n.eventQueue_,p),n.server_.merge(t.toString(),e,(_,E)=>{const T="ok"===_;T||Gi("update at "+t+" failed: "+_);const x=ch(n.serverSyncTree_,d,!T),N=x.length>0?r_(n,t):t;Ho(n.eventQueue_,N,x),dh(0,i,_,E)}),tr(e,_=>{const E=b1(n,Wn(t,_));r_(n,E)}),Ho(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function p6(n){n=(0,L.m9)(n);const t=new S1(()=>{}),e=new Xw(t);return function Z$(n,t,e){const i=function D$(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(_,E)=>{const T=fr(_,e);i=i||lh(E,T)});let r=n.syncPointTree_.get(e);r?i=i||lh(r,vt()):(r=new UL,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,u=s?new oh(i,!0,!1):null;return function c$(n){return zT(n.viewCache_)}(BL(r,t,WT(n.pendingWriteTree_,t._path),s?u.getNode():rn.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Si(r).withIndex(t._queryParams.getIndex());let u;if(o1(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())u=$w(n.serverSyncTree_,t._path,s);else{const d=zw(n.serverSyncTree_,t);u=zL(n.serverSyncTree_,t._path,s,d)}return Ho(n.eventQueue_,t._path,u),XT(n.serverSyncTree_,t,e,null,!0),s},r=>(i_(n,"get for query "+(0,L.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new lp(i,new $a(n._repo,n._path),n._queryParams.getIndex()))}class Xw{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new fV("value",this,new lp(t.snapshotNode,new $a(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new pV(this,t,e):null}matches(t){return t instanceof Xw&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dS{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new pV(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=up(new $a(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new fV(t.type,this,new lp(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof dS&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function e0(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,_=(E,T)=>{E1(n._repo,n,d),p(E,T)};_.userCallback=e.userCallback,_.context=e.context,e=_}const u=new S1(e,s||void 0),d="value"===t?new Xw(u):new dS(t,u);return function t6(n,t,e){let i;i=".info"===wt(t._path)?o1(n.infoSyncTree_,t,e):o1(n.serverSyncTree_,t,e),nV(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>E1(n._repo,n,d)}function A1(n,t,e,i){return e0(n,"value",t,e,i)}function yV(n,t,e,i){return e0(n,"child_added",t,e,i)}function vV(n,t,e,i){return e0(n,"child_changed",t,e,i)}function wV(n,t,e,i){return e0(n,"child_moved",t,e,i)}function EV(n,t,e,i){return e0(n,"child_removed",t,e,i)}function CV(n,t,e){let i=null;const r=e?new S1(e):null;"value"===t?i=new Xw(r):t&&(i=new dS(t,r)),E1(n._repo,n,i)}class Rl{}class bV extends Rl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("endAt",this._value,t._path,!0);const e=Gk(t._queryParams,this._value,this._key);if(cS(e),hh(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(t._repo,t._path,e,t._orderByCalled)}}class m6 extends Rl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("endBefore",this._value,t._path,!1);const e=function SG(n,t,e){let i,r;return n.index_===lu?("string"==typeof t&&(t=_L(t)),r=Gk(n,t,e)):(i=null==e?Ba:_L(e),r=Gk(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(cS(e),hh(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(t._repo,t._path,e,t._orderByCalled)}}class IV extends Rl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("startAt",this._value,t._path,!0);const e=jk(t._queryParams,this._value,this._key);if(cS(e),hh(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new io(t._repo,t._path,e,t._orderByCalled)}}class v6 extends Rl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uu("startAfter",this._value,t._path,!1);const e=function TG(n,t,e){let i;if(n.index_===lu)"string"==typeof t&&(t=mL(t)),i=jk(n,t,e);else{let r;r=null==e?Bo:mL(e),i=jk(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(cS(e),hh(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new io(t._repo,t._path,e,t._orderByCalled)}}class E6 extends Rl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(t._repo,t._path,function bG(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class b6 extends Rl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(t._repo,t._path,function IG(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class T6 extends Rl{constructor(t){super(),this._path=t}_apply(t){uS(t,"orderByChild");const e=new Xe(this._path);if(nn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Vk(e),r=BT(t._queryParams,i);return hh(r),new io(t._repo,t._path,r,!0)}}class D6 extends Rl{_apply(t){uS(t,"orderByKey");const e=BT(t._queryParams,lu);return hh(e),new io(t._repo,t._path,e,!0)}}class x6 extends Rl{_apply(t){uS(t,"orderByPriority");const e=BT(t._queryParams,oi);return hh(e),new io(t._repo,t._path,e,!0)}}class k6 extends Rl{_apply(t){uS(t,"orderByValue");const e=BT(t._queryParams,Uk);return hh(e),new io(t._repo,t._path,e,!0)}}class R6 extends Rl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(uu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new bV(this._value,this._key)._apply(new IV(this._value,this._key)._apply(t))}}function Nl(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function p$(n){(0,L.hu)(!YT,"__referenceConstructor has already been defined"),YT=n})($a),function v$(n){(0,L.hu)(!JT,"__referenceConstructor has already been defined"),JT=n}($a);const x1={};function SV(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Uo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ji("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,u=T1(s,r),d=u.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${d.namespace}`,u=T1(s,r),d=u.repoInfo):p=!u.repoInfo.secure;const E=r&&p?new rh(rh.OWNER):new dc(n.name,n.options,t);tV("Invalid Firebase Database URL",u),nn(u.path)||Uo("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function V6(n,t,e,i){let r=x1[t.name];r||(r={},x1[t.name]=r);let s=r[n.toURLString()];return s&&Uo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new W$(n,false,e,i),r[n.toURLString()]=s,s}(d,n,E,new DT(n.name,e));return new B6(T,n)}class B6{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function q$(n,t,e){if(n.stats_=Wm(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new HT(n.repoInfo_,(i,r,s,u)=>{oV(n,i,r,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>aV(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ip(n.repoInfo_,t,(i,r,s,u)=>{oV(n,i,r,s,u)},i=>{aV(n,i)},i=>{!function K$(n,t){tr(t,(e,i)=>{v1(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Tk(n,t){const e=n.toString();return zm[e]||(zm[e]=t()),zm[e]}(n.repoInfo_,()=>new OG(n.stats_,n.server_)),n.infoData_=new DG,n.infoSyncTree_=new $L({startListening:(i,r,s,u)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=$w(n.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),v1(n,"connected",!1),n.serverSyncTree_=new $L({startListening:(i,r,s,u)=>(n.server_.listen(i,s,r,(d,p)=>{const _=u(d,p);Ho(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $a(this._repo,vt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function L6(n,t){const e=x1[t];(!e||e[n.key]!==n)&&Uo(`Database ${t}(${n.repoInfo_}) has already been deleted.`),uV(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Uo("Cannot call "+t+" on a deleted database.")}}function DV(){Ok.IS_TRANSPORT_INITIALIZED&&Gi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function H6(){DV(),au.forceDisallow()}function j6(){DV(),ep.forceDisallow(),au.forceAllow()}function z6(n,t){Tw(n,t)}const q6={".sv":"timestamp"};class Y6{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ip.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},ip.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function W6(n){hk(Vr.SDK_VERSION),(0,Vr._registerComponent)(new Pa.wA("database",(t,{instanceIdentifier:e})=>SV(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Vr.registerVersion)(Nm,Ua,n),(0,Vr.registerVersion)(Nm,Ua,"esm2017")}();const ez=new Ro.Yd("@firebase/database-compat"),xV=function(n){ez.warn("FIREBASE WARNING: "+n)};class iz{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,xV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class rz{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class fh{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Qw("DataSnapshot.child","path",t,!1),new fh(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Qw("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new fh(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new jo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class jr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const u=jr.getCancelAndContextArgs_("Query.on",i,r),d=(_,E)=>{e.call(u.context,new fh(this.database,_),E)};d.userCallback=e,d.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(t){case"value":return A1(this._delegate,d,p),e;case"child_added":return yV(this._delegate,d,p),e;case"child_removed":return EV(this._delegate,d,p),e;case"child_changed":return vV(this._delegate,d,p),e;case"child_moved":return wV(this._delegate,d,p),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,CV(this._delegate,t,r)}else CV(this._delegate,t)}get(){return p6(this._delegate).then(t=>new fh(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const s=jr.getCancelAndContextArgs_("Query.once",i,r),u=new L.BH,d=(_,E)=>{const T=new fh(this.database,_);e&&e.call(s.context,T,E),u.resolve(T)};d.userCallback=e,d.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),u.reject(_)};switch(t){case"value":A1(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":yV(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":EV(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":vV(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":wV(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new jr(this.database,Nl(this._delegate,function C6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new E6(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new jr(this.database,Nl(this._delegate,function I6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new b6(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new jr(this.database,Nl(this._delegate,function S6(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Qw("orderByChild","path",n,!1),new T6(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new jr(this.database,Nl(this._delegate,function A6(){return new D6}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new jr(this.database,Nl(this._delegate,function M6(){return new x6}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new jr(this.database,Nl(this._delegate,function O6(){return new k6}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new jr(this.database,Nl(this._delegate,function y6(n=null,t){return Yw("startAt","key",t,!0),new IV(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new jr(this.database,Nl(this._delegate,function w6(n,t){return Yw("startAfter","key",t,!0),new v6(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new jr(this.database,Nl(this._delegate,function g6(n,t){return Yw("endAt","key",t,!0),new bV(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new jr(this.database,Nl(this._delegate,function _6(n,t){return Yw("endBefore","key",t,!0),new m6(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new jr(this.database,Nl(this._delegate,function N6(n,t){return Yw("equalTo","key",t,!0),new R6(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof jr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new jo(this.database,new $a(this._delegate._repo,this._delegate._path))}}class jo extends jr{constructor(t,e){super(t,new io(e._repo,e._path,new UT,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new jo(this.database,up(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new jo(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new jo(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=D1(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,xV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ga("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=f6(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function h6(n,t,e){if(Ga("setWithPriority",n._path),uu("setWithPriority",t,n._path,!1),y1("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return w1(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function c6(n){return Ga("remove",n._path),D1(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Q6(n,t,e){var i;if(n=(0,L.m9)(n),Ga("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new L.BH,d=A1(n,()=>{});return function i6(n,t,e,i,r,s){i_(n,"transaction on "+t);const u={path:t,update:e,onComplete:i,status:null,order:Iw(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=C1(n,t,void 0);u.currentInputSnapshot=d;const p=u.update(d.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Zw("transaction failed: Data returned ",p,u.path),u.status=0;const _=nS(n.transactionQueueTree_,t),E=ap(_)||[];let T;E.push(u),g1(_,E),"object"==typeof p&&null!==p&&(0,L.r3)(p,".priority")?(T=(0,L.DV)(p,".priority"),(0,L.hu)(Kw(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(eS(n.serverSyncTree_,t)||rn.EMPTY_NODE).getPriority().val();const x=Jw(n),N=Si(p,T),V=h1(N,d,x);u.currentOutputSnapshotRaw=N,u.currentOutputSnapshotResolved=V,u.currentWriteId=oS(n);const Z=s1(n.serverSyncTree_,t,V,u.currentWriteId,u.applyLocally);Ho(n.eventQueue_,t,Z),aS(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,_,E)=>{let T=null;p?s.reject(p):(T=new lp(E,new $a(n._repo,n._path),oi),s.resolve(new Y6(_,T)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new rz(s.committed,new fh(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function d6(n,t){n=(0,L.m9)(n),Ga("setPriority",n._path),y1("setPriority",t,!1);const e=new L.BH;return w1(n._repo,Wn(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function u6(n,t){n=(0,L.m9)(n),Ga("push",n._path),uu("push",t,n._path,!0);const e=sV(n._repo),i=vG(e),r=up(n,i),s=up(n,i);let u;return u=null!=t?D1(s,t).then(()=>s):Promise.resolve(s),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,t),r=i.then(u=>new jo(this.database,u));e&&r.then(()=>e(null),u=>e(u));const s=new jo(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Ga("Reference.onDisconnect",this._delegate._path),new iz(new gV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class t0{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:H6,forceLongPolling:j6}}useEmulator(t,e,i={}){!function AV(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Uo("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Uo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new rh(rh.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);s=new rh(u)}!function F6(n,t,e,i){n.repoInfo_=new Aw(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof jo){const e=_V(this._delegate,t.toString());return new jo(this,e)}{const e=mV(this._delegate,t);return new jo(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=_V(this._delegate,t);return new jo(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function G6(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),uV(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function $6(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function n6(n){n.persistentConnection_&&n.persistentConnection_.resume(rV)}(n._repo)}(this._delegate)}}t0.ServerValue={TIMESTAMP:function K6(){return q6}(),increment:n=>function Z6(n){return{".sv":{increment:n}}}(n)};var oz=Object.freeze({__proto__:null,initStandalone:function sz({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){hk(e);const u=new Pa.zt("auth-internal",new Pa.H0("database-standalone"));return u.setComponent(new Pa.wA("auth-internal",()=>i,"PRIVATE")),{instance:new t0(SV(n,u,void 0,t,s),n),namespace:r}}});const az=t0.ServerValue;function MV(n){return null==n}function kV(n){return"function"==typeof n.set}function OV(n,t){return kV(t)?t:n.ref(t)}function RV(n,t){if(function uz(n){return"string"==typeof n}(n))return t.stringCase();if(kV(n))return t.firebaseCase();if(function cz(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function n0(n,t,e="on",i=Om.z){return new bi.y(r=>{let s=null;return s=n[e](t,(u,d)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,ht.U)(r=>{const{snapshot:s,prevKey:u}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:u,key:d}}),(0,Vg.B)())}function NV(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function fz(n,t){const{payload:e,prevKey:i,key:r}=t,s=NV(n,r),u=function hz(n,t){if(MV(t))return 0;{const e=NV(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(u,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(u,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function PV(n){return(MV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function FV(n,t,e){return function dz(n,t,e){return n0(n,"value","once",e).pipe(Jn(i=>{const r=[ft(i)];return t.forEach(s=>r.push(n0(n,s,"on",e))),(0,Lg.T)(...r).pipe(Vt(fz,[]))}),Ew())}(n,t=PV(t),e)}function LV(n,t,e){const i=(t=PV(t)).map(r=>n0(n,r,"on",e));return(0,Lg.T)(...i)}function VV(n,t){return function(i,r){return RV(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function _z(n){return function(e){return e?RV(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function UV(n,t){return function(){return n0(n,"value","on",t)}}!function lz(n){n.INTERNAL.registerComponent(new Pa.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new t0(r,i)},"PUBLIC").setServiceProps({Reference:jo,Query:jr,Database:t0,DataSnapshot:fh,enableLogging:z6,INTERNAL:oz,ServerValue:az}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(Rm.Z);const wz=new l.OlP("angularfire2.realtimeDatabaseURL"),Ez=new l.OlP("angularfire2.database.use-emulator");let Cz=(()=>{class n{constructor(e,i,r,s,u,d,p,_,E,T,x,N,V,Z,Q){this.schedulers=d;const Ae=p,Be=(0,er.on)(e,u,i);_&&Nf(Be,u,E,x,N,V,T,Z),this.database=(0,er.cc)(`${Be.name}.database.${r}`,"AngularFireDatabase",Be.name,()=>{const He=u.runOutsideAngular(()=>Be.database(r||void 0));return Ae&&He.useEmulator(...Ae),He},[Ae])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>OV(this.database,e));let s=r;return i&&(s=i(r)),function yz(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:VV(i,"update"),set:VV(i,"set"),push:r=>i.push(r),remove:_z(i),snapshotChanges:r=>FV(n,r,e).pipe(In.iC),stateChanges:r=>LV(n,r,e).pipe(In.iC),auditTrail:r=>function pz(n,t,e){return function mz(n,t,e){return function gz(n,t){return n0(n,"value","on",t).pipe((0,ht.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function dk(...n){const t=(0,ns.jO)(n);return(0,si.e)((e,i)=>{const r=n.length,s=new Array(r);let u=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,ur.Xf)(n[p]).subscribe((0,Gn.x)(i,_=>{s[p]=_,!d&&!u[p]&&(u[p]=!0,(d=u.every(To.y))&&(u=null))},ET.Z));e.subscribe((0,Gn.x)(i,p=>{if(d){const _=[p,...s];i.next(t?t(..._):_)}}))})}(t),(0,ht.U)(([r,s])=>{const u=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:d}}),function Cw(n){return(0,si.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Gn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ht.U)(r=>r.actions))}(n,LV(n,t).pipe(Vt((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(In.iC),valueChanges:(r,s)=>FV(n,r,e).pipe((0,ht.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),In.iC)}}(s,this)}object(e){return function vz(n,t){return{query:n,snapshotChanges:()=>UV(n,t.schedulers.outsideAngular)().pipe(In.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>UV(n,t.schedulers.outsideAngular)().pipe(In.iC,(0,ht.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>OV(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(er.Dh),l.LFG(er.xv,8),l.LFG(wz,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(In.HU),l.LFG(Ez,8),l.LFG(em,8),l.LFG(Xy,8),l.LFG(ev,8),l.LFG(Id,8),l.LFG(Rf,8),l.LFG(Td,8),l.LFG(HC,8),l.LFG(bd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bz=(()=>{class n{constructor(){Xg.Z.registerVersion("angularfire",In.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Cz]}),n})();const BV="firebasestorage.googleapis.com",HV="storageBucket";class Di extends L.ZR{constructor(t,e,i=0){super(M1(t),`Firebase Storage: ${e} (${M1(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Di.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return M1(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function M1(n){return"storage/"+n}function k1(){return new Di("unknown","An unknown error occurred, please check the error payload for server response.")}function jV(){return new Di("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function GV(){return new Di("canceled","User canceled the upload/download.")}function $V(){return new Di("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function s_(n){return new Di("invalid-argument",n)}function zV(){return new Di("app-deleted","The Firebase app was deleted.")}function WV(n){return new Di("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function r0(n,t){return new Di("invalid-format","String does not match format '"+n+"': "+t)}function s0(n){throw new Di("internal-error","Internal error: "+n)}class us{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=us.makeFromUrl(t,e)}catch{return new us(t,"")}if(""===i.path)return i;throw function Nz(n){return new Di("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function _(We){We.path_=decodeURIComponent(We.path)}const T=e.replace(/[.]/g,"\\."),He=[{regex:d,indices:{bucket:1,path:3},postModify:function s(We){"/"===We.path.charAt(We.path.length-1)&&(We.path_=We.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===BV?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let We=0;We<He.length;We++){const ct=He[We],gt=ct.regex.exec(t);if(gt){let Pn=gt[ct.indices.path];Pn||(Pn=""),i=new us(gt[ct.indices.bucket],Pn),ct.postModify(i);break}}if(null==i)throw function Rz(n){return new Di("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class Uz{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function hS(n){return"string"==typeof n||n instanceof String}function qV(n){return O1()&&n instanceof Blob}function O1(){return typeof Blob<"u"&&!(0,L.UG)()}function R1(n,t,e,i){if(i<t)throw s_(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw s_(`Invalid value for '${n}'. Expected ${e} or less.`)}function pc(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function KV(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var ph=(()=>{return(n=ph||(ph={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ph;var n})();function ZV(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class zz{constructor(t,e,i,r,s,u,d,p,_,E,T,x=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=T,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,u=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function jz(n){return void 0!==n}(p)?s():s(p)}catch(p){u(p)}else if(null!==d){const p=k1();p.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,p):p)}else u(r.canceled?this.appDelete_?zV():GV():jV())};this.canceled_?e(0,new fS(!1,null,!0)):this.backoffId_=function Bz(n,t,e){let i=1,r=null,s=null,u=!1,d=0;function p(){return 2===d}let _=!1;function E(...Q){_||(_=!0,t.apply(null,Q))}function T(Q){r=setTimeout(()=>{r=null,n(N,p())},Q)}function x(){s&&clearTimeout(s)}function N(Q,...Ae){if(_)return void x();if(Q)return x(),void E.call(null,Q,...Ae);if(p()||u)return x(),void E.call(null,Q,...Ae);let He;i<64&&(i*=2),1===d?(d=2,He=0):He=1e3*(i+Math.random()),T(He)}let V=!1;function Z(Q){V||(V=!0,x(),!_&&(null!==r?(Q||(d=2),clearTimeout(r),T(0)):Q||(d=1)))}return T(0),s=setTimeout(()=>{u=!0,Z(!0)},e),Z}((i,r)=>{if(r)return void i(!1,new fS(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const d=s.getErrorCode()===ph.NO_ERROR,p=s.getStatus();if((!d||ZV(p,this.additionalRetryCodes_))&&this.retry){const E=s.getErrorCode()===ph.ABORT;return void i(!1,new fS(!1,null,E))}const _=-1!==this.successCodes_.indexOf(p);i(!0,new fS(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function Hz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class fS{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function Jz(...n){const t=function Qz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(O1())return new Blob(n);throw new Di("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Go={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class N1{constructor(t,e){this.data=t,this.contentType=e||null}}function P1(n,t){switch(n){case Go.RAW:return new N1(YV(t));case Go.BASE64:case Go.BASE64URL:return new N1(QV(n,t));case Go.DATA_URL:return new N1(function nW(n){const t=new JV(n);return t.base64?QV(Go.BASE64,t.rest):function tW(n){let t;try{t=decodeURIComponent(n)}catch{throw r0(Go.DATA_URL,"Malformed data URL.")}return YV(t)}(t.rest)}(t),function iW(n){return new JV(n).contentType}(t))}throw k1()}function YV(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function QV(n,t){switch(n){case Go.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw r0(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Go.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw r0(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function eW(n){if(typeof atob>"u")throw function Vz(n){return new Di("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:r0(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class JV{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw r0(Go.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function rW(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class cu{constructor(t,e){let i=0,r="";qV(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(qV(this.data_)){const r=function Xz(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new cu(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new cu(i,!0)}}static getBlob(...t){if(O1()){const e=t.map(i=>i instanceof cu?i.data_:i);return new cu(Jz.apply(null,e))}{const e=t.map(u=>hS(u)?P1(Go.RAW,u).data:u.data_);let i=0;e.forEach(u=>{i+=u.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(u=>{for(let d=0;d<u.length;d++)r[s++]=u[d]}),new cu(r,!0)}}uploadData(){return this.data_}}function F1(n){let t;try{t=JSON.parse(n)}catch{return null}return function $z(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function XV(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function aW(n,t){return t}class Ms{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||aW}}let pS=null;function o0(){if(pS)return pS;const n=[];n.push(new Ms("bucket")),n.push(new Ms("generation")),n.push(new Ms("metageneration")),n.push(new Ms("name","fullPath",!0));const e=new Ms("name");e.xform=function t(s,u){return function lW(n){return!hS(n)||n.length<2?n:XV(n)}(u)},n.push(e);const r=new Ms("size");return r.xform=function i(s,u){return void 0!==u?Number(u):u},n.push(r),n.push(new Ms("timeCreated")),n.push(new Ms("updated")),n.push(new Ms("md5Hash",null,!0)),n.push(new Ms("cacheControl",null,!0)),n.push(new Ms("contentDisposition",null,!0)),n.push(new Ms("contentEncoding",null,!0)),n.push(new Ms("contentLanguage",null,!0)),n.push(new Ms("contentType",null,!0)),n.push(new Ms("metadata","customMetadata",!0)),pS=n,pS}function e2(n,t,e){const i=F1(t);return null===i?null:function cW(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const u=e[s];i[u.local]=u.xform(i,t[u.server])}return function uW(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new us(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function L1(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const t2="prefixes";class du{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hu(n){if(!n)throw k1()}function gS(n,t){return function e(i,r){const s=e2(n,r,t);return hu(null!==s),s}}function o_(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function kz(){return new Di("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Mz(){return new Di("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function xz(n){return new Di("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Oz(n){return new Di("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function a0(n){const t=o_(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function Az(n){return new Di("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function i2(n,t,e){const r=pc(t.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new du(r,"GET",gS(n,e),u);return d.errorHandler=a0(t),d}function mW(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=pc(t.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,E=new du(d,"GET",function pW(n,t){return function e(i,r){const s=function fW(n,t,e){const i=F1(e);return null===i?null:function hW(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[t2])for(const r of e[t2]){const s=r.replace(/\/$/,""),u=n._makeStorageReference(new us(t,s));i.prefixes.push(u)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new us(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return hu(null!==s),s}}(n,t.bucket),_);return E.urlParams=s,E.errorHandler=o_(t),E}function s2(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function wW(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class mS{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function V1(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{hu(!1)}return hu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const IW={STATE_CHANGED:"state_changed"},ks={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function U1(n){switch(n){case"running":case"pausing":case"canceling":return ks.RUNNING;case"paused":return ks.PAUSED;case"success":return ks.SUCCESS;case"canceled":return ks.CANCELED;default:return ks.ERROR}}class TW{constructor(t,e,i){if(function Gz(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function a_(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class DW extends class SW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ph.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ph.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ph.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw s0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw s0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw s0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw s0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw s0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function Pl(){return new DW}class u2{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=o0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(ZV(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=jV()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function EW(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),u=s2(t,i,r),d={name:u.fullPath},p=pc(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},T=L1(u,e),V=new du(p,"POST",function N(Z){let Q;V1(Z);try{Q=Z.getResponseHeader("X-Goog-Upload-URL")}catch{hu(!1)}return hu(hS(Q)),Q},n.maxUploadRetryTime);return V.urlParams=d,V.headers=E,V.body=T,V.errorHandler=o_(t),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Pl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function CW(n,t,e,i){const p=new du(e,"POST",function s(_){const E=V1(_,["active","final"]);let T=null;try{T=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{hu(!1)}T||hu(!1);const x=Number(T);return hu(!isNaN(x)),new mS(x,i.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=o_(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,Pl,e,i);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new mS(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let u;try{u=function bW(n,t,e,i,r,s,u,d){const p=new mS(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function Fz(){return new Di("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let E=_;r>0&&(E=Math.min(E,r));const T=p.current;let N="";N=0===E?"finalize":_===E?"upload, finalize":"upload";const V={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${p.current}`},Z=i.slice(T,T+E);if(null===Z)throw $V();const He=new du(e,"POST",function Q(We,ct){const gt=V1(We,["active","final"]),Xt=p.current+E,Pn=i.size();let mi;return mi="final"===gt?gS(t,s)(We,ct):null,new mS(Xt,Pn,"final"===gt,mi)},t.maxUploadRetryTime);return He.headers=V,He.body=Z.uploadData(),He.progressCallback=d||null,He.errorHandler=o_(n),He}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(u,Pl,r,s,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=i2(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Pl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function o2(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let He="";for(let We=0;We<2;We++)He+=Math.random().toString().slice(2);return He}();u["Content-Type"]="multipart/related; boundary="+p;const _=s2(t,i,r),E=L1(_,e),N=cu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===N)throw $V();const V={name:_.fullPath},Z=pc(s,n.host,n._protocol),Ae=n.maxUploadRetryTime,Be=new du(Z,"POST",gS(n,e),Ae);return Be.urlParams=V,Be.headers=u,Be.body=N.uploadData(),Be.errorHandler=o_(t),Be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Pl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=GV(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=U1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new TW(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(U1(this._state)){case ks.SUCCESS:a_(this._resolve.bind(null,this.snapshot))();break;case ks.CANCELED:case ks.ERROR:a_(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(U1(this._state)){case ks.RUNNING:case ks.PAUSED:t.next&&a_(t.next.bind(t,this.snapshot))();break;case ks.SUCCESS:t.complete&&a_(t.complete.bind(t))();break;default:t.error&&a_(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class cp{constructor(t,e){this._service=t,this._location=e instanceof us?e:us.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new cp(t,e)}get root(){const t=new us(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XV(this._location.path)}get storage(){return this._service}get parent(){const t=function sW(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new us(this._location.bucket,t);return new cp(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw WV(t)}}function d2(n,t,e){return B1.apply(this,arguments)}function B1(){return(B1=(0,Ee.Z)(function*(n,t,e){const r=yield h2(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield d2(n,t,r.nextPageToken))})).apply(this,arguments)}function h2(n,t){null!=t&&"number"==typeof t.maxResults&&R1("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=mW(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Pl)}function UW(n){n._throwIfRoot("getDownloadURL");const t=function _W(n,t,e){const r=pc(t.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new du(r,"GET",function gW(n,t){return function e(i,r){const s=e2(n,r,t);return hu(null!==s),function dW(n,t,e,i){const r=F1(t);if(null===r||!hS(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(_=>{const T=n.fullPath;return pc("/b/"+u(n.bucket)+"/o/"+u(T),e,i)+KV({alt:"media",token:_})})[0]}(s,r,n.host,n._protocol)}}(n,e),u);return d.errorHandler=a0(t),d}(n.storage,n._location,o0());return n.storage.makeRequestWithTokens(t,Pl).then(e=>{if(null===e)throw function Lz(){return new Di("no-download-url","The given file does not have any download URLs.")}();return e})}function f2(n,t){const e=function oW(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new us(n._location.bucket,e);return new cp(n.storage,i)}function p2(n,t){if(n instanceof H1){const e=n;if(null==e._bucket)throw function Pz(){return new Di("no-default-bucket","No default bucket found. Did you set the '"+HV+"' property when initializing the app?")}();const i=new cp(e,e._bucket);return null!=t?p2(i,t):i}return void 0!==t?f2(n,t):n}function GW(n,t){if(t&&function HW(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof H1)return function jW(n,t){return new cp(n,t)}(n,t);throw s_("To use ref(service, url), the first argument must be a Storage instance.")}return p2(n,t)}function g2(n,t){const e=t?.[HV];return null==e?null:us.makeFromBucketSpec(e,n)}class H1{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=BV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?us.makeFromBucketSpec(r,this._host):g2(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?us.makeFromBucketSpec(this._url,t):g2(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){R1("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){R1("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ee.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ee.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new cp(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new Uz(zV());{const u=function Yz(n,t,e,i,r,s,u=!0){const d=KV(n.urlParams),p=n.url+d,_=Object.assign({},n.headers);return function Kz(n,t){t&&(n["X-Firebase-GMPID"]=t)}(_,t),function Wz(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(_,e),function qz(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(_,s),function Zz(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(_,i),new zz(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,u)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(t,e){var i=this;return(0,Ee.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const m2="@firebase/storage";function v2(n,t){return GW(n=(0,L.m9)(n),t)}function XW(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new H1(e,i,r,t,Vr.SDK_VERSION)}!function eq(){(0,Vr._registerComponent)(new Pa.wA("storage",XW,"PUBLIC").setMultipleInstances(!0)),(0,Vr.registerVersion)(m2,"0.9.14",""),(0,Vr.registerVersion)(m2,"0.9.14","esm2017")}();class _S{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class E2{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _S(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new _S(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?u=>e(new _S(u,this,this._ref)):{next:e.next?u=>e.next(new _S(u,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class C2{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new gc(t,this._service))}get items(){return this._delegate.items.map(t=>new gc(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gc{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function JW(n,t){return f2(n,t)}(this._delegate,t);return new gc(e,this.storage)}get root(){return new gc(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new gc(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new E2(function zW(n,t,e){return function NW(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new u2(n,new cu(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Go.RAW,i){this._throwIfRoot("putString");const r=P1(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new E2(new u2(this._delegate,new cu(r.data,!0),s),this)}listAll(){return function ZW(n){return function FW(n){const t={prefixes:[],items:[]};return d2(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new C2(t,this.storage))}list(t){return function KW(n,t){return h2(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new C2(e,this.storage))}getMetadata(){return function WW(n){return function LW(n){n._throwIfRoot("getMetadata");const t=i2(n.storage,n._location,o0());return n.storage.makeRequestWithTokens(t,Pl)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function qW(n,t){return function VW(n,t){n._throwIfRoot("updateMetadata");const e=function yW(n,t,e,i){const s=pc(t.fullServerUrl(),n.host,n._protocol),d=L1(e,i),_=n.maxOperationRetryTime,E=new du(s,"PATCH",gS(n,i),_);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=a0(t),E}(n.storage,n._location,t,o0());return n.storage.makeRequestWithTokens(e,Pl)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function YW(n){return UW(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function QW(n){return function BW(n){n._throwIfRoot("deleteObject");const t=function vW(n,t){const i=pc(t.fullServerUrl(),n.host,n._protocol),d=new du(i,"DELETE",function u(p,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=a0(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Pl)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw WV(t)}}class b2{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(I2(t))throw s_("ref() expected a child path but got a URL, use refFromURL instead.");return new gc(v2(this._delegate,t),this)}refFromURL(t){if(!I2(t))throw s_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{us.makeFromUrl(t,this._delegate.host)}catch{throw s_("refFromUrl() expected a valid full URL but got an invalid one.")}return new gc(v2(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function w2(n,t,e,i={}){!function $W(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function I2(n){return/^[A-Za-z]+:\/\//.test(n)}function rq(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new b2(e,i)}function T2(n){const t=function oq(n){return new bi.y(t=>{const e=u=>t.next(u);e(n.snapshot);const s=n.on("state_changed",e);return n.then(u=>{e(u),t.complete()},u=>{e(n.snapshot),(u=>{t.error(u)})(u)}),function(){s()}}).pipe(function Iz(n,t=Om.z){return(0,si.e)((e,i)=>{let r=null,s=null,u=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function p(){const _=u+n,E=t.now();if(E<_)return r=this.schedule(void 0,_-E),void i.add(r);d()}e.subscribe((0,Gn.x)(i,_=>{s=_,u=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ht.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function yS(n){return{getDownloadURL:()=>ft(void 0).pipe(In.fc,Jn(()=>n.getDownloadURL()),In.iC),getMetadata:()=>ft(void 0).pipe(In.fc,Jn(()=>n.getMetadata()),In.iC),delete:()=>(0,dn.D)(n.delete()),child:t=>yS(n.child(t)),updateMetadata:t=>(0,dn.D)(n.updateMetadata(t)),put:(t,e)=>T2(n.put(t,e)),putString:(t,e,i)=>T2(n.putString(t,e,i)),list:t=>(0,dn.D)(n.list(t)),listAll:()=>(0,dn.D)(n.listAll())}}!function sq(n){const t={TaskState:ks,TaskEvent:IW,StringFormat:Go,Storage:b2,Reference:gc};n.INTERNAL.registerComponent(new Pa.wA("storage-compat",rq,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(Rm.Z);const aq=new l.OlP("angularfire2.storageBucket"),lq=new l.OlP("angularfire2.storage.maxUploadRetryTime"),uq=new l.OlP("angularfire2.storage.maxOperationRetryTime"),cq=new l.OlP("angularfire2.storage.use-emulator");let dq=(()=>{class n{constructor(e,i,r,s,u,d,p,_,E,T){const x=(0,er.on)(e,u,i);this.storage=(0,er.cc)(`${x.name}.storage.${r}`,"AngularFireStorage",x.name,()=>{const N=u.runOutsideAngular(()=>x.storage(r||void 0)),V=E;return V&&N.useEmulator(...V),p&&N.setMaxUploadRetryTime(p),_&&N.setMaxOperationRetryTime(_),N},[p,_])}ref(e){return yS(this.storage.ref(e))}refFromURL(e){return yS(this.storage.refFromURL(e))}upload(e,i,r){return yS(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(er.Dh),l.LFG(er.xv,8),l.LFG(aq,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(In.HU),l.LFG(lq,8),l.LFG(uq,8),l.LFG(cq,8),l.LFG(bd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),fq=(()=>{class n{constructor(){Xg.Z.registerVersion("angularfire",In.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[dq],imports:[hq]}),n})();function j1(){return(0,si.e)((n,t)=>{let e,i=!1;n.subscribe((0,Gn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var Dt,pq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mc={},G1=G1||{},Zt=pq||self;function vS(){}function wS(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function l0(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var $1="closure_uid_"+(1e9*Math.random()>>>0),mq=0;function _q(n,t,e){return n.call.apply(n.bind,arguments)}function yq(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function cs(n,t,e){return(cs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_q:yq).apply(null,arguments)}function ES(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Gr(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return t.prototype[r].apply(i,u)}}function gh(){this.s=this.s,this.o=this.o}gh.prototype.s=!1,gh.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function gq(n){Object.prototype.hasOwnProperty.call(n,$1)&&n[$1]||(n[$1]=++mq)}(this)},gh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S2=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function z1(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function D2(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(wS(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let u=0;u<s;u++)n[r+u]=i[u]}else n.push(i)}}function ds(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}ds.prototype.h=function(){this.defaultPrevented=!0};var wq=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",vS,t),Zt.removeEventListener("test",vS,t)}catch{}return n}();function CS(n){return/^[\s\xa0]*$/.test(n)}var A2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function W1(n,t){return n<t?-1:n>t?1:0}function bS(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function fu(n){return-1!=bS().indexOf(n)}function q1(n){return q1[" "](n),n}q1[" "]=vS;var IS,n,Cq=fu("Opera"),l_=fu("Trident")||fu("MSIE"),x2=fu("Edge"),K1=x2||l_,M2=fu("Gecko")&&!(-1!=bS().toLowerCase().indexOf("webkit")&&!fu("Edge"))&&!(fu("Trident")||fu("MSIE"))&&!fu("Edge"),bq=-1!=bS().toLowerCase().indexOf("webkit")&&!fu("Edge");function k2(){var n=Zt.document;return n?n.documentMode:void 0}e:{var Z1="",Y1=(n=bS(),M2?/rv:([^\);]+)(\)|;)/.exec(n):x2?/Edge\/([\d\.]+)/.exec(n):l_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bq?/WebKit\/(\S+)/.exec(n):Cq?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Y1&&(Z1=Y1?Y1[1]:""),l_){var Q1=k2();if(null!=Q1&&Q1>parseFloat(Z1)){IS=String(Q1);break e}}IS=Z1}var Iq={};var Sq=Zt.document&&l_&&(k2()||parseInt(IS,10))||void 0;function u0(n,t){if(ds.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(M2){e:{try{q1(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Dq[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&u0.X.h.call(this)}}Gr(u0,ds);var Dq={2:"touch",3:"pen",4:"mouse"};u0.prototype.h=function(){u0.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var c0="closure_listenable_"+(1e6*Math.random()|0),Aq=0;function xq(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++Aq,this.ba=this.ea=!1}function TS(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function X1(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function R2(n){const t={};for(const e in n)t[e]=n[e];return t}const N2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P2(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<N2.length;s++)e=N2[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function SS(n){this.src=n,this.g={},this.h=0}function eO(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=S2(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(TS(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function tO(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return r}return-1}SS.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=tO(n,t,i,r);return-1<u?(t=n[u],e||(t.ea=!1)):((t=new xq(t,this.src,s,!!i,r)).ea=e,n.push(t)),t};var nO="closure_lm_"+(1e6*Math.random()|0),iO={};function F2(n,t,e,i,r){if(i&&i.once)return V2(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)F2(n,t[s],e,i,r);return null}return e=aO(e),n&&n[c0]?n.N(t,e,l0(i)?!!i.capture:!!i,r):L2(n,t,e,!1,i,r)}function L2(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var u=l0(r)?!!r.capture:!!r,d=sO(n);if(d||(n[nO]=d=new SS(n)),(e=d.add(t,e,i,u,s)).proxy)return e;if(i=function Mq(){const t=kq;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)wq||(r=u),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(B2(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function V2(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)V2(n,t[s],e,i,r);return null}return e=aO(e),n&&n[c0]?n.O(t,e,l0(i)?!!i.capture:!!i,r):L2(n,t,e,!0,i,r)}function U2(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)U2(n,t[s],e,i,r);else i=l0(i)?!!i.capture:!!i,e=aO(e),n&&n[c0]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=tO(s=n.g[t],e,i,r))&&(TS(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=sO(n))&&(t=n.g[t.toString()],n=-1,t&&(n=tO(t,e,i,r)),(e=-1<n?t[n]:null)&&rO(e))}function rO(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[c0])eO(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(B2(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=sO(t))?(eO(e,n),0==e.h&&(e.src=null,t[nO]=null)):TS(n)}}}function B2(n){return n in iO?iO[n]:iO[n]="on"+n}function kq(n,t){if(n.ba)n=!0;else{t=new u0(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&rO(n),n=e.call(i,t)}return n}function sO(n){return(n=n[nO])instanceof SS?n:null}var oO="__closure_events_fn_"+(1e9*Math.random()>>>0);function aO(n){return"function"==typeof n?n:(n[oO]||(n[oO]=function(t){return n.handleEvent(t)}),n[oO])}function Dr(){gh.call(this),this.i=new SS(this),this.P=this,this.I=null}function $r(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new ds(t,n);else if(t instanceof ds)t.target=t.target||n;else{var r=t;P2(t=new ds(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var u=t.g=e[s];r=DS(u,i,!0,t)&&r}if(r=DS(u=t.g=n,i,!0,t)&&r,r=DS(u,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=DS(u=t.g=e[s],i,!1,t)&&r}function DS(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var u=t[s];if(u&&!u.ba&&u.capture==e){var d=u.listener,p=u.ha||u.src;u.ea&&eO(n.i,u),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}Gr(Dr,gh),Dr.prototype[c0]=!0,Dr.prototype.removeEventListener=function(n,t,e,i){U2(this,n,t,e,i)},Dr.prototype.M=function(){if(Dr.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)TS(e[i]);delete n.g[t],n.h--}}this.I=null},Dr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Dr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var lO=Zt.JSON.stringify;function Oq(){var n=G2;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var uO,H2=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Nq,n=>n.reset());class Nq{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Pq(n){Zt.setTimeout(()=>{throw n},0)}function j2(n,t){uO||function Fq(){var n=Zt.Promise.resolve(void 0);uO=function(){n.then(Lq)}}(),cO||(uO(),cO=!0),G2.add(n,t)}var cO=!1,G2=new class Rq{constructor(){this.h=this.g=null}add(t,e){const i=H2.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function Lq(){for(var n;n=Oq();){try{n.h.call(n.g)}catch(e){Pq(e)}var t=H2;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}cO=!1}function AS(n,t){Dr.call(this),this.h=n||1,this.g=t||Zt,this.j=cs(this.lb,this),this.l=Date.now()}function dO(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function hO(n,t,e){if("function"==typeof n)e&&(n=cs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=cs(n.handleEvent,n)}return 2147483647<Number(t)?-1:Zt.setTimeout(n,t||0)}function $2(n){n.g=hO(()=>{n.g=null,n.i&&(n.i=!1,$2(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Gr(AS,Dr),(Dt=AS.prototype).ca=!1,Dt.R=null,Dt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$r(this,"tick"),this.ca&&(dO(this),this.start()))}},Dt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dt.M=function(){AS.X.M.call(this),dO(this),delete this.g};class Vq extends gh{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:$2(this)}M(){super.M(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function d0(n){gh.call(this),this.h=n,this.g={}}Gr(d0,gh);var z2=[];function W2(n,t,e,i){Array.isArray(e)||(e&&(z2[0]=e.toString()),e=z2);for(var r=0;r<e.length;r++){var s=F2(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function q2(n){X1(n.g,function(t,e){this.g.hasOwnProperty(e)&&rO(t)},n),n.g={}}function xS(){this.g=!0}function u_(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function jq(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<r.length;u++)r[u]=""}}}return lO(e)}catch{return t}}(n,e)+(i?" "+i:"")})}d0.prototype.M=function(){d0.X.M.call(this),q2(this)},d0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xS.prototype.Aa=function(){this.g=!1},xS.prototype.info=function(){};var dp={},K2=null;function MS(){return K2=K2||new Dr}function Z2(n){ds.call(this,dp.Pa,n)}function h0(n){const t=MS();$r(t,new Z2(t))}function Y2(n,t){ds.call(this,dp.STAT_EVENT,n),this.stat=t}function Os(n){const t=MS();$r(t,new Y2(t,n))}function Q2(n,t){ds.call(this,dp.Qa,n),this.size=t}function f0(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},t)}dp.Pa="serverreachability",Gr(Z2,ds),dp.STAT_EVENT="statevent",Gr(Y2,ds),dp.Qa="timingevent",Gr(Q2,ds);var kS={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},J2={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function fO(){}function eU(){}fO.prototype.h=null;var mO,p0={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function pO(){ds.call(this,"d")}function gO(){ds.call(this,"c")}function OS(){}function g0(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new d0(this),this.O=Gq,this.T=new AS(n=K1?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new tU}function tU(){this.i=null,this.g="",this.h=!1}Gr(pO,ds),Gr(gO,ds),Gr(OS,fO),OS.prototype.g=function(){return new XMLHttpRequest},OS.prototype.i=function(){return{}},mO=new OS;var Gq=45e3,_O={},RS={};function yO(n,t,e){n.K=1,n.v=LS(_c(t)),n.s=e,n.P=!0,nU(n,null)}function nU(n,t){n.F=Date.now(),m0(n),n.A=_c(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),hU(e.i,"t",i),n.C=0,e=n.l.H,n.h=new tU,n.g=FU(n.l,e?t:null,!n.s),0<n.N&&(n.L=new Vq(cs(n.La,n,n.g),n.N)),W2(n.S,n.g,"readystatechange",n.ib),t=n.H?R2(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),h0(),function Uq(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var E=_[0];_=_[1];var T=E.split("_");u=2<=T.length&&"type"==T[1]?u+(E+"=")+_+"&":u+(E+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function iU(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function rU(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=$q(n,e),r==RS){4==t&&(n.o=4,Os(14),i=!1),u_(n.j,n.m,null,"[Incomplete Response]");break}if(r==_O){n.o=4,Os(15),u_(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}u_(n.j,n.m,r,null),vO(n,r)}iU(n)&&r!=RS&&r!=_O&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Os(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),DO(t),t.K=!0,Os(11))):(u_(n.j,n.m,e,"[Invalid Chunked Response]"),hp(n),_0(n))}function $q(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?RS:(e=Number(t.substring(e,i)),isNaN(e)?_O:(i+=1)+e>t.length?RS:(t=t.substr(i,e),n.C=i+e,t))}function m0(n){n.V=Date.now()+n.O,sU(n,n.O)}function sU(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=f0(cs(n.gb,n),t)}function NS(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function _0(n){0==n.l.G||n.I||OU(n.l,n)}function hp(n){NS(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,dO(n.T),q2(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function vO(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||wO(e.h,n)))if(!n.J&&wO(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;GS(e),HS(e)}SO(e),Os(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=f0(cs(e.cb,e),6e3));if(1>=gU(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else pp(e,11)}else if((n.J||e.g==n)&&GS(e),!CS(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.T=_[0],_=_[1],2==e.G)if("c"==_[0]){e.I=_[1],e.ka=_[2];const E=_[3];null!=E&&(e.ma=E,e.j.info("VER="+e.ma));const T=_[4];null!=T&&(e.Ca=T,e.j.info("SVER="+e.Ca));const x=_[5];null!=x&&"number"==typeof x&&0<x&&(e.J=i=1.5*x,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const N=n.g;if(N){const V=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var s=i.h;s.g||-1==V.indexOf("spdy")&&-1==V.indexOf("quic")&&-1==V.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(EO(s,s.h),s.h=null))}if(i.D){const Z=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(i.za=Z,yi(i.F,i.D,Z))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var u=n;if((i=e).sa=PU(i,i.H?i.ka:null,i.V),u.J){mU(i.h,u);var d=u,p=i.J;p&&d.setTimeout(p),d.B&&(NS(d),m0(d)),i.g=u}else MU(i);0<e.i.length&&jS(e)}else"stop"!=_[0]&&"close"!=_[0]||pp(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?pp(e,7):TO(e):"noop"!=_[0]&&e.l&&e.l.wa(_),e.A=0)}h0()}catch{}}function oU(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(wS(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function Wq(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(wS(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function zq(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(wS(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(Dt=g0.prototype).setTimeout=function(n){this.O=n},Dt.ib=function(n){n=n.target;const t=this.L;t&&3==yc(n)?t.l():this.La(n)},Dt.La=function(n){try{if(n==this.g)e:{const E=yc(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>E)&&(3!=E||K1||this.g&&(this.h.h||this.g.fa()||IU(this.g)))){this.I||4!=E||7==t||h0(),NS(this);var e=this.g.aa();this.Y=e;t:if(iU(this)){var i=IU(this.g);n="";var r=i.length,s=4==yc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hp(this),_0(this);var u="";break t}this.h.i=new Zt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==e,function Bq(n,t,e,i,r,s,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.U,E,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!CS(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,Os(12),hp(this),_0(this);break e}u_(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vO(this,e)}this.P?(rU(this,E,u),K1&&this.i&&3==E&&(W2(this.S,this.T,"tick",this.hb),this.T.start())):(u_(this.j,this.m,u,null),vO(this,u)),4==E&&hp(this),this.i&&!this.I&&(4==E?OU(this.l,this):(this.i=!1,m0(this)))}else 400==e&&0<u.indexOf("Unknown SID")?(this.o=3,Os(12)):(this.o=0,Os(13)),hp(this),_0(this)}}}catch{}},Dt.hb=function(){if(this.g){var n=yc(this.g),t=this.g.fa();this.C<t.length&&(NS(this),rU(this,n,t),this.i&&4!=n&&m0(this))}},Dt.cancel=function(){this.I=!0,hp(this)},Dt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Hq(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(h0(),Os(17)),hp(this),this.o=2,_0(this)):sU(this,this.V-n)};var aU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fp(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fp){this.h=void 0!==t?t:n.h,PS(this,n.j),this.s=n.s,this.g=n.g,FS(this,n.m),this.l=n.l,t=n.i;var e=new w0;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),lU(this,e),this.o=n.o}else n&&(e=String(n).match(aU))?(this.h=!!t,PS(this,e[1]||"",!0),this.s=y0(e[2]||""),this.g=y0(e[3]||"",!0),FS(this,e[4]),this.l=y0(e[5]||"",!0),lU(this,e[6]||"",!0),this.o=y0(e[7]||"")):(this.h=!!t,this.i=new w0(null,this.h))}function _c(n){return new fp(n)}function PS(n,t,e){n.j=e?y0(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function FS(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function lU(n,t,e){t instanceof w0?(n.i=t,function Xq(n,t){t&&!n.j&&(mh(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(cU(this,i),hU(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=v0(t,Qq)),n.i=new w0(t,n.h))}function yi(n,t,e){n.i.set(t,e)}function LS(n){return yi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function y0(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function v0(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,Kq),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Kq(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fp.prototype.toString=function(){var n=[],t=this.j;t&&n.push(v0(t,uU,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(v0(t,uU,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(v0(e,"/"==e.charAt(0)?Yq:Zq,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",v0(e,Jq)),n.join("")};var uU=/[#\/\?@]/g,Zq=/[#\?:]/g,Yq=/[#\?]/g,Qq=/[#\?@]/g,Jq=/#/g;function w0(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function mh(n){n.g||(n.g=new Map,n.h=0,n.i&&function qq(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function cU(n,t){mh(n),t=c_(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function dU(n,t){return mh(n),t=c_(n,t),n.g.has(t)}function hU(n,t,e){cU(n,t),0<e.length&&(n.i=null,n.g.set(c_(n,t),z1(e)),n.h+=e.length)}function c_(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function fU(n){this.l=n||t4,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ga&&Zt.g.Ga()&&Zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Dt=w0.prototype).add=function(n,t){mh(this),this.i=null,n=c_(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Dt.forEach=function(n,t){mh(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},Dt.oa=function(){mh(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},Dt.W=function(n){mh(this);let t=[];if("string"==typeof n)dU(this,n)&&(t=t.concat(this.g.get(c_(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},Dt.set=function(n,t){return mh(this),this.i=null,dU(this,n=c_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Dt.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},Dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),u=this.W(i);for(i=0;i<u.length;i++){var r=s;""!==u[i]&&(r+="="+encodeURIComponent(String(u[i]))),n.push(r)}}return this.i=n.join("&")};var t4=10;function pU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gU(n){return n.h?1:n.g?n.g.size:0}function wO(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function EO(n,t){n.g?n.g.add(t):n.h=t}function mU(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function _U(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return z1(n.i)}function CO(){}function n4(){this.g=new CO}function i4(n,t,e){const i=e||"";try{oU(n,function(r,s){let u=r;l0(r)&&(u=lO(r)),t.push(i+s+"="+encodeURIComponent(u))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function VS(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function E0(n){this.l=n.ac||null,this.j=n.jb||!1}function US(n,t){Dr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=bO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fU.prototype.cancel=function(){if(this.i=_U(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},CO.prototype.stringify=function(n){return Zt.JSON.stringify(n,void 0)},CO.prototype.parse=function(n){return Zt.JSON.parse(n,void 0)},Gr(E0,fO),E0.prototype.g=function(){return new US(this.l,this.j)},E0.prototype.i=function(n){return function(){return n}}({}),Gr(US,Dr);var bO=0;function yU(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function C0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,b0(n)}function b0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Dt=US.prototype).open=function(n,t){if(this.readyState!=bO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,b0(this)},Dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Zt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,C0(this)),this.readyState=bO},Dt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,b0(this)),this.g&&(this.readyState=3,b0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yU(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Dt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?C0(this):b0(this),3==this.readyState&&yU(this)}},Dt.Va=function(n){this.g&&(this.response=this.responseText=n,C0(this))},Dt.Ua=function(n){this.g&&(this.response=n,C0(this))},Dt.ga=function(){this.g&&C0(this)},Dt.setRequestHeader=function(n,t){this.v.append(n,t)},Dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(US.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var s4=Zt.JSON.parse;function Ri(n){Dr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vU,this.K=this.L=!1}Gr(Ri,Dr);var vU="",o4=/^https?$/i,a4=["POST","PUT"];function wU(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,EU(n),BS(n)}function EU(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function CU(n){if(n.h&&typeof G1<"u"&&(!n.C[1]||4!=yc(n)||2!=n.aa()))if(n.v&&4==yc(n))hO(n.Ha,0,n);else if($r(n,"readystatechange"),4==yc(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(aU)[1]||null;if(!r&&Zt.self&&Zt.self.location){var s=Zt.self.location.protocol;r=s.substr(0,s.length-1)}i=!o4.test(r?r.toLowerCase():"")}e=i}if(e)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var u=2<yc(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",EU(n)}}finally{BS(n)}}}function BS(n,t){if(n.g){bU(n);const e=n.g,i=n.C[0]?vS:null;n.g=null,n.C=null,t||$r(n,"ready");try{e.onreadystatechange=i}catch{}}}function bU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function yc(n){return n.g?n.g.readyState:0}function IU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case vU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function TU(n){let t="";return X1(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function IO(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=TU(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):yi(n,t,e))}function I0(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function SU(n){this.Ca=0,this.i=[],this.j=new xS,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=I0("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=I0("baseRetryDelayMs",5e3,n),this.bb=I0("retryDelaySeedMs",1e4,n),this.$a=I0("forwardChannelMaxRetries",2,n),this.ta=I0("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new fU(n&&n.concurrentRequestLimit),this.Fa=new n4,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function TO(n){if(DU(n),3==n.G){var t=n.U++,e=_c(n.F);yi(e,"SID",n.I),yi(e,"RID",t),yi(e,"TYPE","terminate"),T0(n,e),(t=new g0(n,n.j,t,void 0)).K=2,t.v=LS(_c(e)),e=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(e=Zt.navigator.sendBeacon(t.v.toString(),"")),!e&&Zt.Image&&((new Image).src=t.v,e=!0),e||(t.g=FU(t.l,null),t.g.da(t.v)),t.F=Date.now(),m0(t)}NU(n)}function HS(n){n.g&&(DO(n),n.g.cancel(),n.g=null)}function DU(n){HS(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),GS(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function jS(n){pU(n.h)||n.m||(n.m=!0,j2(n.Ja,n),n.C=0)}function AU(n,t){var e;e=t?t.m:n.U++;const i=_c(n.F);yi(i,"SID",n.I),yi(i,"RID",e),yi(i,"AID",n.T),T0(n,i),n.o&&n.s&&IO(i,n.o,n.s),e=new g0(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=xU(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),EO(n.h,e),yO(e,i,t)}function T0(n,t){n.ia&&X1(n.ia,function(e,i){yi(t,i,e)}),n.l&&oU({},function(e,i){yi(t,i,e)})}function xU(n,t,e){e=Math.min(n.i.length,e);var i=n.l?cs(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const u=["count="+e];-1==s?0<e?(s=r[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let _=r[p].h;const E=r[p].g;if(_-=s,0>_)s=Math.max(0,r[p].h-100),d=!1;else try{i4(E,u,"req"+_+"_")}catch{i&&i(E)}}if(d){i=u.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function MU(n){n.g||n.u||(n.Z=1,j2(n.Ia,n),n.A=0)}function SO(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=f0(cs(n.Ia,n),RU(n,n.A)),n.A++,0))}function DO(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function kU(n){n.g=new g0(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=_c(n.sa);yi(t,"RID","rpc"),yi(t,"SID",n.I),yi(t,"CI",n.L?"0":"1"),yi(t,"AID",n.T),yi(t,"TYPE","xmlhttp"),T0(n,t),n.o&&n.s&&IO(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=LS(_c(t)),e.s=null,e.P=!0,nU(e,n)}function GS(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function OU(n,t){var e=null;if(n.g==t){GS(n),DO(n),n.g=null;var i=2}else{if(!wO(n.h,t))return;e=t.D,mU(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;$r(i=MS(),new Q2(i,e)),jS(n)}else MU(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function u4(n,t){return!(gU(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=f0(cs(n.Ja,n,t),RU(n,n.C)),n.C++,0)))}(n,t)||2==i&&SO(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:pp(n,5);break;case 4:pp(n,10);break;case 3:pp(n,6);break;default:pp(n,2)}}function RU(n,t){let e=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(e*=2),e*t}function pp(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=cs(n.kb,n);e||(e=new fp("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||PS(e,"https"),LS(e)),function r4(n,t){const e=new xS;if(Zt.Image){const i=new Image;i.onload=ES(VS,e,i,"TestLoadImage: loaded",!0,t),i.onerror=ES(VS,e,i,"TestLoadImage: error",!1,t),i.onabort=ES(VS,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=ES(VS,e,i,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Os(2);n.G=0,n.l&&n.l.va(t),NU(n),DU(n)}function NU(n){if(n.G=0,n.la=[],n.l){const t=_U(n.h);(0!=t.length||0!=n.i.length)&&(D2(n.la,t),D2(n.la,n.i),n.h.i.length=0,z1(n.i),n.i.length=0),n.l.ua()}}function PU(n,t,e){var i=e instanceof fp?_c(e):new fp(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),FS(i,i.m);else{var r=Zt.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new fp(null,void 0);i&&PS(s,i),t&&(s.g=t),r&&FS(s,r),e&&(s.l=e),i=s}return t=n.za,(e=n.D)&&t&&yi(i,e,t),yi(i,"VER",n.ma),T0(n,i),i}function FU(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ri(e&&n.Da&&!n.ra?new E0({jb:!0}):n.ra)).Ka(n.H),t}function LU(){}function $S(){if(l_&&!(10<=Number(Sq)))throw Error("Environmental error: no available transport.")}function $o(n,t){Dr.call(this),this.g=new SU(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Yb)&&!CS(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!CS(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new d_(this)}function VU(n){pO.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function UU(){gO.call(this),this.status=1}function d_(n){this.g=n}(Dt=Ri.prototype).Ka=function(n){this.L=n},Dt.da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mO.g(),this.C=function X2(n){return n.h||(n.h=n.i())}(this.u?this.u:mO),this.g.onreadystatechange=cs(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void wU(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=Zt.FormData&&n instanceof Zt.FormData,!(0<=S2(a4,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of e)this.g.setRequestHeader(s,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bU(this),0<this.B&&((this.K=function l4(n){return l_&&function Tq(){return function Eq(n){var t=Iq;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=A2(String(IS)).split("."),e=A2("9").split("."),i=Math.max(t.length,e.length);for(let u=0;0==n&&u<i;u++){var r=t[u]||"",s=e[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=W1(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||W1(0==r[2].length,0==s[2].length)||W1(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cs(this.qa,this)):this.A=hO(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){wU(this,s)}},Dt.qa=function(){typeof G1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},Dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),BS(this))},Dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),BS(this,!0)),Ri.X.M.call(this)},Dt.Ha=function(){this.s||(this.F||this.v||this.l?CU(this):this.fb())},Dt.fb=function(){CU(this)},Dt.aa=function(){try{return 2<yc(this)?this.g.status:-1}catch{return-1}},Dt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Dt.Sa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),s4(t)}},Dt.Ea=function(){return this.m},Dt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Dt=SU.prototype).ma=8,Dt.G=1,Dt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new g0(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=R2(s),P2(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=xU(this,r,t),yi(e=_c(this.F),"RID",n),yi(e,"CVER",22),this.D&&yi(e,"X-HTTP-Session-Id",this.D),T0(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(TU(s)))+"&"+t:this.o&&IO(e,this.o,s)),EO(this.h,r),this.Ya&&yi(e,"TYPE","init"),this.O?(yi(e,"$req",t),yi(e,"SID","null"),r.Z=!0,yO(r,e,null)):yO(r,e,t),this.G=2}}else 3==this.G&&(n?AU(this,n):0==this.i.length||pU(this.h)||AU(this))},Dt.Ia=function(){if(this.u=null,kU(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=f0(cs(this.eb,this),n)}},Dt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Os(10),HS(this),kU(this))},Dt.cb=function(){null!=this.v&&(this.v=null,HS(this),SO(this),Os(19))},Dt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Os(2)):(this.j.info("Failed to ping google.com"),Os(1))},(Dt=LU.prototype).xa=function(){},Dt.wa=function(){},Dt.va=function(){},Dt.ua=function(){},Dt.Ra=function(){},$S.prototype.g=function(n,t){return new $o(n,t)},Gr($o,Dr),$o.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;Os(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=PU(n,null,n.V),jS(n)},$o.prototype.close=function(){TO(this.g)},$o.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=lO(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.ab++,n)),3==t.G&&jS(t)},$o.prototype.M=function(){this.g.l=null,delete this.j,TO(this.g),delete this.g,$o.X.M.call(this)},Gr(VU,pO),Gr(UU,gO),Gr(d_,LU),d_.prototype.xa=function(){$r(this.g,"a")},d_.prototype.wa=function(n){$r(this.g,new VU(n))},d_.prototype.va=function(n){$r(this.g,new UU)},d_.prototype.ua=function(){$r(this.g,"b")},$S.prototype.createWebChannel=$S.prototype.g,$o.prototype.send=$o.prototype.u,$o.prototype.open=$o.prototype.m,$o.prototype.close=$o.prototype.close,kS.NO_ERROR=0,kS.TIMEOUT=8,kS.HTTP_ERROR=6,J2.COMPLETE="complete",eU.EventType=p0,p0.OPEN="a",p0.CLOSE="b",p0.ERROR="c",p0.MESSAGE="d",Dr.prototype.listen=Dr.prototype.N,Ri.prototype.listenOnce=Ri.prototype.O,Ri.prototype.getLastError=Ri.prototype.Oa,Ri.prototype.getLastErrorCode=Ri.prototype.Ea,Ri.prototype.getStatus=Ri.prototype.aa,Ri.prototype.getResponseJson=Ri.prototype.Sa,Ri.prototype.getResponseText=Ri.prototype.fa,Ri.prototype.send=Ri.prototype.da,Ri.prototype.setWithCredentials=Ri.prototype.Ka;var c4=mc.createWebChannelTransport=function(){return new $S},d4=mc.getStatEventTarget=function(){return MS()},AO=mc.ErrorCode=kS,h4=mc.EventType=J2,f4=mc.Event=dp,BU=mc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},p4=mc.FetchXmlHttpFactory=E0,zS=mc.WebChannel=eU,g4=mc.XhrIo=Ri;const HU="@firebase/firestore";class Ar{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let h_="9.14.0";const _h=new Ro.Yd("@firebase/firestore");function xO(){return _h.logLevel}function Ke(n,...t){if(_h.logLevel<=Ro.in.DEBUG){const e=t.map(MO);_h.debug(`Firestore (${h_}): ${n}`,...e)}}function $i(n,...t){if(_h.logLevel<=Ro.in.ERROR){const e=t.map(MO);_h.error(`Firestore (${h_}): ${n}`,...e)}}function gp(n,...t){if(_h.logLevel<=Ro.in.WARN){const e=t.map(MO);_h.warn(`Firestore (${h_}): ${n}`,...e)}}function MO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const t=`FIRESTORE (${h_}) INTERNAL ASSERTION FAILED: `+n;throw $i(t),new Error(t)}function Gt(n,t){n||_t()}function rt(n,t){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class jU{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class y4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ar.UNAUTHENTICATED))}shutdown(){}}class v4{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class w4{constructor(t){this.t=t,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=u;t.enqueueRetryable((0,Ee.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},p=_=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Gt("string"==typeof i.accessToken),new jU(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Gt(null===t||"string"==typeof t),new Ar(t)}}class E4{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Gt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class C4{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new E4(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GU{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b4{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.A;return this.A=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Gt("string"==typeof e.token),this.A=e.token,new GU(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function I4(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class $U{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=I4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Yt(n,t){return n<t?-1:n>t?1:0}function f_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function zU(n){return n+"\0"}class vi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return vi.fromMillis(Date.now())}static fromDate(t){return vi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new vi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Yt(this.nanoseconds,t.nanoseconds):Yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(t){this.timestamp=t}static fromTimestamp(t){return new $t(t)}static min(){return new $t(new vi(0,0))}static max(){return new $t(new vi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class S0{constructor(t,e,i){void 0===e?e=0:e>t.length&&_t(),void 0===i?i=t.length-e:i>t.length-e&&_t(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===S0.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof S0?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),u=e.get(r);if(s<u)return-1;if(s>u)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class En extends S0{construct(t,e,i){return new En(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new En(e)}static emptyPath(){return new En([])}}const T4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends S0{construct(t,e,i){return new Ni(t,e,i)}static isValidIdentifier(t){return T4.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ni(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ue(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ue(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(u=!u,r++):"."!==d||u?(i+=d,r++):(s(),r++)}if(s(),u)throw new Ue(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ni(e)}static emptyPath(){return new Ni([])}}class et{constructor(t){this.path=t}static fromPath(t){return new et(En.fromString(t))}static fromName(t){return new et(En.fromString(t).popFirst(5))}static empty(){return new et(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===En.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return En.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new En(t.slice()))}}class WS{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function kO(n){return n.fields.find(t=>2===t.kind)}function mp(n){return n.fields.filter(t=>2!==t.kind)}WS.UNKNOWN_ID=-1;class qS{constructor(t,e){this.fieldPath=t,this.kind=e}}class D0{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new D0(0,zo.min())}}function WU(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=$t.fromTimestamp(1e9===i?new vi(e+1,0):new vi(e,i));return new zo(r,et.empty(),t)}function qU(n){return new zo(n.readTime,n.key,-1)}class zo{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new zo($t.min(),et.empty(),-1)}static max(){return new zo($t.max(),et.empty(),-1)}}function OO(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=et.comparator(n.documentKey,t.documentKey),0!==e?e:Yt(n.largestBatchId,t.largestBatchId))}const KU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function yh(n){return RO.apply(this,arguments)}function RO(){return RO=(0,Ee.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==KU)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),RO.apply(this,arguments)}class he{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new he((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof he?e:he.resolve(e)}catch(e){return he.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):he.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):he.reject(e)}static resolve(t){return new he((e,i)=>{e(t)})}static reject(t){return new he((e,i)=>{i(t)})}static waitFor(t){return new he((e,i)=>{let r=0,s=0,u=!1;t.forEach(d=>{++r,d.next(()=>{++s,u&&s===r&&e()},p=>i(p))}),u=!0,s===r&&e()})}static or(t){let e=he.resolve(!1);for(const i of t)e=e.next(r=>r?he.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new he((i,r)=>{const s=t.length,u=new Array(s);let d=0;for(let p=0;p<s;p++){const _=p;e(t[_]).next(E=>{u[_]=E,++d,d===s&&i(u)},E=>r(E))}})}static doWhile(t,e){return new he((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class KS{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new pr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new A0(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=NO(i.target.error);this.P.reject(new A0(t,r))}}static open(t,e,i,r){try{return new KS(e,t.transaction(r,i))}catch(s){throw new A0(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(Ke("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new x4(e)}}class Fl{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===Fl.D((0,L.z$)())&&$i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ke("SimpleDb","Removing database:",t),_p(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(Fl.N())return!0;const t=(0,L.z$)(),e=Fl.D(t),i=0<e&&e<10,r=Fl.k(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,Ee.Z)(function*(){return e.db||(Ke("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=u=>{i(u.target.result)},s.onblocked=()=>{r(new A0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const d=u.target.error;r("VersionError"===d.name?new Ue(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ue(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new A0(t,d))},s.onupgradeneeded=u=>{Ke("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',u.oldVersion),e.S.$(u.target.result,s.transaction,u.oldVersion,e.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ee.Z)(function*(){const u="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.F(t);const p=KS.open(s.db,t,u?"readonly":"readwrite",i),_=r(p).next(E=>(p.V(),E)).catch(E=>(p.abort(E),he.reject(E))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,E="FirebaseError"!==_.name&&d<3;if(Ke("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),s.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class A4{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return _p(this.U.delete())}}class A0 extends Ue{constructor(t,e){super(ye.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function vh(n){return"IndexedDbTransactionError"===n.name}class x4{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ke("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),_p(i)}add(t){return Ke("SimpleDb","ADD",this.store.name,t,t),_p(this.store.add(t))}get(t){return _p(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ke("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ke("SimpleDb","DELETE",this.store.name,t),_p(this.store.delete(t))}count(){return Ke("SimpleDb","COUNT",this.store.name),_p(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(u,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new he((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new he((r,s)=>{i.onerror=u=>{s(u.target.error)},i.onsuccess=u=>{r(u.target.result)}})}Y(t,e){Ke("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(s,u,d)=>d.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new he((i,r)=>{e.onerror=s=>{const u=NO(s.target.error);r(u)},e.onsuccess=s=>{const u=s.target.result;u?t(u.primaryKey,u.value).next(d=>{d?u.continue():i()}):i()}})}H(t,e){const i=[];return new he((r,s)=>{t.onerror=u=>{s(u.target.error)},t.onsuccess=u=>{const d=u.target.result;if(!d)return void r();const p=new A4(d),_=e(d.primaryKey,d.value,p);if(_ instanceof he){const E=_.catch(T=>(p.done(),he.reject(T)));i.push(E)}p.isDone?r():null===p.G?d.continue():d.continue(p.G)}}).next(()=>he.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function _p(n){return new he((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=NO(i.target.error);e(r)}})}let YU=!1;function NO(n){const t=Fl.D((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YU||(YU=!0,setTimeout(()=>{throw i},0)),i}}return n}class M4{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;Ke("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Ee.Z)(function*(){e.task=null;try{Ke("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){vh(i)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield yh(i)}yield e.nt(6e4)}))}}class k4{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,Ee.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,s=!0;return he.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(u=>{if(null!==u&&!i.has(u))return Ke("IndexBackiller",`Processing collection: ${u}`),this.rt(t,u,r).next(d=>{r-=d,i.add(u)});s=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(t,u).next(()=>this.ot(r,s)).next(d=>(Ke("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>u.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,s)=>{const u=qU(s);OO(u,i)>0&&(i=u)}),new zo(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class ro{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function QU(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function yp(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function JU(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}ro.at=-1;class Pi{constructor(t,e){this.comparator=t,this.root=e||zr.EMPTY}insert(t,e){return new Pi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(t){return new Pi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ZS(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ZS(this.root,t,this.comparator,!1)}getReverseIterator(){return new ZS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ZS(this.root,t,this.comparator,!0)}}class ZS{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zr{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??zr.RED,this.left=r??zr.EMPTY,this.right=s??zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new zr(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return zr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const t=this.left.check();if(t!==this.right.check())throw _t();return t+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1,zr.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,t,e,i,r){return this}insert(n,t,e){return new zr(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(t){this.comparator=t,this.data=new Pi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new XU(this.data.getIterator())}getIteratorFrom(t){return new XU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof qn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new qn(this.comparator);return e.data=t,e}}class XU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function p_(n){return n.hasNext()?n.getNext():void 0}class Wo{constructor(t){this.fields=t,t.sort(Ni.comparator)}static empty(){return new Wo([])}unionWith(t){let e=new qn(Ni.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Wo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return f_(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class gr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new gr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new gr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const R4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wh(n){if(Gt(!!n),"string"==typeof n){let t=0;const e=R4.exec(n);if(Gt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fi(n.seconds),nanos:Fi(n.nanos)}}function Fi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vp(n){return"string"==typeof n?gr.fromBase64String(n):gr.fromUint8Array(n)}function PO(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function eB(n){const t=n.mapValue.fields.__previous_value__;return PO(t)?eB(t):t}function x0(n){const t=wh(n.mapValue.fields.__local_write_time__.timestampValue);return new vi(t.seconds,t.nanos)}class N4{constructor(t,e,i,r,s,u,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Eh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Eh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Eh&&t.projectId===this.projectId&&t.database===this.database}}function M0(n){return null==n}function k0(n){return 0===n&&1/n==-1/0}function tB(n){return"number"==typeof n&&Number.isInteger(n)&&!k0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ch={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},YS={nullValue:"NULL_VALUE"};function wp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?PO(n)?4:sB(n)?9007199254740991:10:_t()}function pu(n,t){if(n===t)return!0;const e=wp(n);if(e!==wp(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return x0(n).isEqual(x0(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=wh(i.timestampValue),u=wh(r.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,vp(n.bytesValue).isEqual(vp(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Fi(i.geoPointValue.latitude)===Fi(r.geoPointValue.latitude)&&Fi(i.geoPointValue.longitude)===Fi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Fi(i.integerValue)===Fi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Fi(i.doubleValue),u=Fi(r.doubleValue);return s===u?k0(s)===k0(u):isNaN(s)&&isNaN(u)}return!1}(n,t);case 9:return f_(n.arrayValue.values||[],t.arrayValue.values||[],pu);case 10:return function(i,r){const s=i.mapValue.fields||{},u=r.mapValue.fields||{};if(QU(s)!==QU(u))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===u[d]||!pu(s[d],u[d])))return!1;return!0}(n,t);default:return _t()}var r}function O0(n,t){return void 0!==(n.values||[]).find(e=>pu(e,t))}function bh(n,t){if(n===t)return 0;const e=wp(n),i=wp(t);if(e!==i)return Yt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const u=Fi(r.integerValue||r.doubleValue),d=Fi(s.integerValue||s.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,t);case 3:return nB(n.timestampValue,t.timestampValue);case 4:return nB(x0(n),x0(t));case 5:return Yt(n.stringValue,t.stringValue);case 6:return function(r,s){const u=vp(r),d=vp(s);return u.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const u=r.split("/"),d=s.split("/");for(let p=0;p<u.length&&p<d.length;p++){const _=Yt(u[p],d[p]);if(0!==_)return _}return Yt(u.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const u=Yt(Fi(r.latitude),Fi(s.latitude));return 0!==u?u:Yt(Fi(r.longitude),Fi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const u=r.values||[],d=s.values||[];for(let p=0;p<u.length&&p<d.length;++p){const _=bh(u[p],d[p]);if(_)return _}return Yt(u.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Ch.mapValue&&s===Ch.mapValue)return 0;if(r===Ch.mapValue)return 1;if(s===Ch.mapValue)return-1;const u=r.fields||{},d=Object.keys(u),p=s.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let E=0;E<d.length&&E<_.length;++E){const T=Yt(d[E],_[E]);if(0!==T)return T;const x=bh(u[d[E]],p[_[E]]);if(0!==x)return x}return Yt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw _t()}}function nB(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Yt(n,t);const e=wh(n),i=wh(t),r=Yt(e.seconds,i.seconds);return 0!==r?r:Yt(e.nanos,i.nanos)}function g_(n){return FO(n)}function FO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=wh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vp(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const u of i.values||[])s?s=!1:r+=",",r+=FO(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",u=!0;for(const d of r)u?u=!1:s+=",",s+=`${d}:${FO(i.fields[d])}`;return s+"}"}(n.mapValue):_t();var t}function Ep(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function LO(n){return!!n&&"integerValue"in n}function R0(n){return!!n&&"arrayValue"in n}function iB(n){return!!n&&"nullValue"in n}function rB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function QS(n){return!!n&&"mapValue"in n}function N0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return yp(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=N0(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=N0(n.arrayValue.values[e]);return t}return Object.assign({},n)}function sB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function P4(n){return"nullValue"in n?YS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ep(Eh.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_t()}function F4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ep(Eh.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ch:_t()}function oB(n,t){const e=bh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function aB(n,t){const e=bh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Wr{constructor(t){this.value=t}static empty(){return new Wr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!QS(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=N0(e)}setAll(t){let e=Ni.emptyPath(),i={},r=[];t.forEach((u,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}u?i[d.lastSegment()]=N0(u):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());QS(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return pu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];QS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){yp(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Wr(N0(this.value))}}function lB(n){const t=[];return yp(n.fields,(e,i)=>{const r=new Ni([e]);if(QS(i)){const s=lB(i.mapValue).fields;if(0===s.length)t.push(r);else for(const u of s)t.push(r.child(u))}else t.push(r)}),new Wo(t)}class li{constructor(t,e,i,r,s,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=u}static newInvalidDocument(t){return new li(t,0,$t.min(),$t.min(),Wr.empty(),0)}static newFoundDocument(t,e,i){return new li(t,1,e,$t.min(),i,0)}static newNoDocument(t,e){return new li(t,2,e,$t.min(),Wr.empty(),0)}static newUnknownDocument(t,e){return new li(t,3,e,$t.min(),Wr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Wr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof li&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new li(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class L4{constructor(t,e=null,i=[],r=[],s=null,u=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=u,this.endAt=d,this.ht=null}}function uB(n,t=null,e=[],i=[],r=null,s=null,u=null){return new L4(n,t,e,i,r,s,u)}function Cp(n){const t=rt(n);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+g_(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),M0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>g_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>g_(i)).join(",")),t.ht=e}return t.ht}function P0(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!W4(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!pu(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!pB(n.startAt,t.startAt)&&pB(n.endAt,t.endAt)}function JS(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function XS(n,t){return n.filters.filter(e=>e instanceof qr&&e.field.isEqual(t))}function cB(n,t,e){let i=YS,r=!0;for(const s of XS(n,t)){let u=YS,d=!0;switch(s.op){case"<":case"<=":u=P4(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,d=!1;break;case"!=":case"not-in":u=YS}oB({value:i,inclusive:r},{value:u,inclusive:d})<0&&(i=u,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const u=e.position[s];oB({value:i,inclusive:r},{value:u,inclusive:e.inclusive})<0&&(i=u,r=e.inclusive);break}return{value:i,inclusive:r}}function dB(n,t,e){let i=Ch,r=!0;for(const s of XS(n,t)){let u=Ch,d=!0;switch(s.op){case">=":case">":u=F4(s.value),d=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,d=!1;break;case"!=":case"not-in":u=Ch}aB({value:i,inclusive:r},{value:u,inclusive:d})>0&&(i=u,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const u=e.position[s];aB({value:i,inclusive:r},{value:u,inclusive:e.inclusive})>0&&(i=u,r=e.inclusive);break}return{value:i,inclusive:r}}class qr extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new U4(t,e,i):"array-contains"===e?new j4(t,i):"in"===e?new G4(t,i):"not-in"===e?new $4(t,i):"array-contains-any"===e?new z4(t,i):new qr(t,e,i)}static lt(t,e,i){return"in"===e?new B4(t,i):new H4(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(bh(e,this.value)):null!==e&&wp(this.value)===wp(e)&&this.ft(bh(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _t()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class U4 extends qr{constructor(t,e,i){super(t,e,i),this.key=et.fromName(i.referenceValue)}matches(t){const e=et.comparator(t.key,this.key);return this.ft(e)}}class B4 extends qr{constructor(t,e){super(t,"in",e),this.keys=hB(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class H4 extends qr{constructor(t,e){super(t,"not-in",e),this.keys=hB(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hB(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>et.fromName(i.referenceValue))}class j4 extends qr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return R0(e)&&O0(e.arrayValue,this.value)}}class G4 extends qr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&O0(this.value.arrayValue,e)}}class $4 extends qr{constructor(t,e){super(t,"not-in",e)}matches(t){if(O0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!O0(this.value.arrayValue,e)}}class z4 extends qr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!R0(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>O0(this.value.arrayValue,i))}}class Ih{constructor(t,e){this.position=t,this.inclusive=e}}class m_{constructor(t,e="asc"){this.field=t,this.dir=e}}function W4(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function fB(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],u=n.position[r];if(i=s.field.isKeyField()?et.comparator(et.fromName(u.referenceValue),e.key):bh(u,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function pB(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!pu(n.position[e],t.position[e]))return!1;return!0}class vc{constructor(t,e=null,i=[],r=[],s=null,u="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function gB(n,t,e,i,r,s,u,d){return new vc(n,t,e,i,r,s,u,d)}function __(n){return new vc(n)}function mB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function VO(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function UO(n){for(const t of n.filters)if(t.dt())return t.field;return null}function BO(n){return null!==n.collectionGroup}function y_(n){const t=rt(n);if(null===t._t){t._t=[];const e=UO(t),i=VO(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new m_(e)),t._t.push(new m_(Ni.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new m_(Ni.keyField(),s))}}}return t._t}function Rs(n){const t=rt(n);if(!t.wt)if("F"===t.limitType)t.wt=uB(t.path,t.collectionGroup,y_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of y_(t))e.push(new m_(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;t.wt=uB(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.wt}function eD(n,t,e){return new vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function F0(n,t){return P0(Rs(n),Rs(t))&&n.limitType===t.limitType}function _B(n){return`${Cp(Rs(n))}|lt:${n.limitType}`}function HO(n){return`Query(target=${function V4(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${g_(i.value)}`;var i}).join(", ")}]`),M0(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>g_(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>g_(e)).join(",")),`Target(${t})`}(Rs(n))}; limitType=${n.limitType})`}function jO(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):et.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,u){const d=fB(r,s,u);return r.inclusive?d<=0:d<0}(e.startAt,y_(e),i)||e.endAt&&!function(r,s,u){const d=fB(r,s,u);return r.inclusive?d>=0:d>0}(e.endAt,y_(e),i)));var e,i}function yB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vB(n){return(t,e)=>{let i=!1;for(const r of y_(n)){const s=q4(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function q4(n,t,e){const i=n.field.isKeyField()?et.comparator(t.key,e.key):function(r,s,u){const d=s.data.field(r),p=u.data.field(r);return null!==d&&null!==p?bh(d,p):_t()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _t()}}function wB(n,t){if(n.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k0(t)?"-0":t}}function EB(n){return{integerValue:""+n}}function CB(n,t){return tB(t)?EB(t):wB(n,t)}class tD{constructor(){this._=void 0}}function K4(n,t,e){return n instanceof v_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof bp?IB(n,t):n instanceof Ip?TB(n,t):function(i,r){const s=bB(i,r),u=SB(s)+SB(i.yt);return LO(s)&&LO(i.yt)?EB(u):wB(i.It,u)}(n,t)}function Z4(n,t,e){return n instanceof bp?IB(n,t):n instanceof Ip?TB(n,t):e}function bB(n,t){return n instanceof w_?LO(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class v_ extends tD{}class bp extends tD{constructor(t){super(),this.elements=t}}function IB(n,t){const e=DB(t);for(const i of n.elements)e.some(r=>pu(r,i))||e.push(i);return{arrayValue:{values:e}}}class Ip extends tD{constructor(t){super(),this.elements=t}}function TB(n,t){let e=DB(t);for(const i of n.elements)e=e.filter(r=>!pu(r,i));return{arrayValue:{values:e}}}class w_ extends tD{constructor(t,e){super(),this.It=t,this.yt=e}}function SB(n){return Fi(n.integerValue||n.doubleValue)}function DB(n){return R0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class L0{constructor(t,e){this.field=t,this.transform=e}}class Q4{constructor(t,e){this.version=t,this.transformResults=e}}class wi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new wi}static exists(t){return new wi(void 0,t)}static updateTime(t){return new wi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function nD(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class iD{}function AB(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new C_(n.key,wi.none()):new E_(n.key,n.data,wi.none());{const e=n.data,i=Wr.empty();let r=new qn(Ni.comparator);for(let s of t.fields)if(!r.has(s)){let u=e.field(s);null===u&&s.length>1&&(s=s.popLast(),u=e.field(s)),null===u?i.delete(s):i.set(s,u),r=r.add(s)}return new wc(n.key,i,new Wo(r.toArray()),wi.none())}}function J4(n,t,e){n instanceof E_?function(i,r,s){const u=i.value.clone(),d=kB(i.fieldTransforms,r,s.transformResults);u.setAll(d),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,t,e):n instanceof wc?function(i,r,s){if(!nD(i.precondition,r))return void r.convertToUnknownDocument(s.version);const u=kB(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(MB(i)),d.setAll(u),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function V0(n,t,e,i){return n instanceof E_?function(r,s,u,d){if(!nD(r.precondition,s))return u;const p=r.value.clone(),_=OB(r.fieldTransforms,d,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof wc?function(r,s,u,d){if(!nD(r.precondition,s))return u;const p=OB(r.fieldTransforms,d,s),_=s.data;return _.setAll(MB(r)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===u?null:u.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(E=>E.field))}(n,t,e,i):(u=e,nD(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function X4(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=bB(i.transform,r||null);null!=s&&(null===e&&(e=Wr.empty()),e.set(i.field,s))}return e||null}function xB(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&f_(e,i,(r,s)=>function Y4(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof bp&&i instanceof bp||e instanceof Ip&&i instanceof Ip?f_(e.elements,i.elements,pu):e instanceof w_&&i instanceof w_?pu(e.yt,i.yt):e instanceof v_&&i instanceof v_);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class E_ extends iD{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wc extends iD{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MB(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function kB(n,t,e){const i=new Map;Gt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],u=s.transform,d=t.data.field(s.field);i.set(s.field,Z4(u,d,e[r]))}return i}function OB(n,t,e){const i=new Map;for(const r of n){const s=r.transform,u=e.data.field(r.field);i.set(r.field,K4(s,u,t))}return i}class C_ extends iD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GO extends iD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eK{constructor(t){this.count=t}}var nr,Cn;function RB(n){switch(n){default:return _t();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function NB(n){if(void 0===n)return $i("GRPC error has no .code"),ye.UNKNOWN;switch(n){case nr.OK:return ye.OK;case nr.CANCELLED:return ye.CANCELLED;case nr.UNKNOWN:return ye.UNKNOWN;case nr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case nr.INTERNAL:return ye.INTERNAL;case nr.UNAVAILABLE:return ye.UNAVAILABLE;case nr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case nr.NOT_FOUND:return ye.NOT_FOUND;case nr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case nr.ABORTED:return ye.ABORTED;case nr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case nr.DATA_LOSS:return ye.DATA_LOSS;default:return _t()}}(Cn=nr||(nr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class Th{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){yp(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return JU(this.inner)}size(){return this.innerSize}}const tK=new Pi(et.comparator);function so(){return tK}const PB=new Pi(et.comparator);function U0(...n){let t=PB;for(const e of n)t=t.insert(e.key,e);return t}function FB(n){let t=PB;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function gu(){return B0()}function LB(){return B0()}function B0(){return new Th(n=>n.toString(),(n,t)=>n.isEqual(t))}const nK=new Pi(et.comparator),iK=new qn(et.comparator);function an(...n){let t=iK;for(const e of n)t=t.add(e);return t}const rK=new qn(Yt);function rD(){return rK}class H0{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,j0.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new H0($t.min(),r,rD(),so(),an())}}class j0{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new j0(i,e,an(),an(),an())}}class sD{constructor(t,e,i,r){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=r}}class VB{constructor(t,e){this.targetId=t,this.At=e}}class UB{constructor(t,e,i=gr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class BB{constructor(){this.Rt=0,this.bt=jB(),this.Pt=gr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=an(),e=an(),i=an();return this.bt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:_t()}}),new j0(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=jB()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Ot(t){this.Vt=!0,this.bt=this.bt.remove(t)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class sK{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=so(),this.qt=HB(),this.Kt=new qn(Yt)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:_t()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,r)=>{this.Ht(r)&&e(r)})}Yt(t){const e=t.targetId,i=t.At.count,r=this.Xt(e);if(r){const s=r.target;if(JS(s))if(0===i){const u=new et(s.path);this.jt(e,u,li.newNoDocument(u,$t.min()))}else Gt(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,u)=>{const d=this.Xt(u);if(d){if(s.current&&JS(d.target)){const p=new et(d.target.path);null!==this.Ut.get(p)||this.ee(u,p)||this.jt(u,p,li.newNoDocument(p,t))}s.Dt&&(e.set(u,s.xt()),s.Nt())}});let i=an();this.qt.forEach((s,u)=>{let d=!0;u.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.Ut.forEach((s,u)=>u.setReadTime(t));const r=new H0(t,e,this.Kt,this.Ut,i);return this.Ut=so(),this.qt=HB(),this.Kt=new qn(Yt),r}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const r=this.zt(t);this.ee(t,e)?r.kt(e,1):r.Ot(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Mt(t){this.zt(t).Mt()}zt(t){let e=this.Lt.get(t);return e||(e=new BB,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new qn(Yt),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||Ke("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new BB),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function HB(){return new Pi(et.comparator)}function jB(){return new Pi(et.comparator)}const oK={asc:"ASCENDING",desc:"DESCENDING"},aK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class lK{constructor(t,e){this.databaseId=t,this.gt=e}}function G0(n,t){return n.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function GB(n,t){return n.gt?t.toBase64():t.toUint8Array()}function uK(n,t){return G0(n,t.toTimestamp())}function xr(n){return Gt(!!n),$t.fromTimestamp(function(t){const e=wh(t);return new vi(e.seconds,e.nanos)}(n))}function $O(n,t){return(e=n,new En(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function $B(n){const t=En.fromString(n);return Gt(JB(t)),t}function $0(n,t){return $O(n.databaseId,t.path)}function mu(n,t){const e=$B(t);if(e.get(1)!==n.databaseId.projectId)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new et(WB(e))}function zO(n,t){return $O(n.databaseId,t)}function zB(n){const t=$B(n);return 4===t.length?En.emptyPath():WB(t)}function z0(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WB(n){return Gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qB(n,t,e){return{name:$0(n,t),fields:e.value.mapValue.fields}}function KB(n,t,e){const i=mu(n,t.name),r=xr(t.updateTime),s=new Wr({mapValue:{fields:t.fields}}),u=li.newFoundDocument(i,r,s);return e&&u.setHasCommittedMutations(),e?u.setHasCommittedMutations():u}function W0(n,t){let e;if(t instanceof E_)e={update:qB(n,t.key,t.value)};else if(t instanceof C_)e={delete:$0(n,t.key)};else if(t instanceof wc)e={update:qB(n,t.key,t.data),updateMask:yK(t.fieldMask)};else{if(!(t instanceof GO))return _t();e={verify:$0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const u=s.transform;if(u instanceof v_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof bp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ip)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof w_)return{fieldPath:s.field.canonicalString(),increment:u.yt};throw _t()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:uK(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:_t()),e;var r}function WO(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?wi.updateTime(xr(r.updateTime)):void 0!==r.exists?wi.exists(r.exists):wi.none():wi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,u){let d=null;"setToServerValue"in u?(Gt("REQUEST_TIME"===u.setToServerValue),d=new v_):"appendMissingElements"in u?d=new bp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new Ip(u.removeAllFromArray.values||[]):"increment"in u?d=new w_(s,u.increment):_t();const p=Ni.fromServerFormat(u.fieldPath);return new L0(p,d)}(n,r)):[];var r;if(t.update){const r=mu(n,t.update.name),s=new Wr({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=new Wo((t.updateMask.fieldPaths||[]).map(_=>Ni.fromServerFormat(_)));return new wc(r,s,u,e,i)}return new E_(r,s,e,i)}if(t.delete){const r=mu(n,t.delete);return new C_(r,e)}if(t.verify){const r=mu(n,t.verify);return new GO(r,e)}return _t()}function ZB(n,t){return{documents:[zO(n,t.path)]}}function qO(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=zO(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=zO(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const _=p.map(E=>function(T){if("=="===T.op){if(rB(T.value))return{unaryFilter:{field:b_(T.field),op:"IS_NAN"}};if(iB(T.value))return{unaryFilter:{field:b_(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(rB(T.value))return{unaryFilter:{field:b_(T.field),op:"IS_NOT_NAN"}};if(iB(T.value))return{unaryFilter:{field:b_(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:b_(T.field),op:gK(T.op),value:T.value}}}(E));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:b_((E=_).field),direction:pK(E.dir)};var E})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const u=(_=t.limit,n.gt||M0(_)?_:{value:_});var _,d,p;return null!==u&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function YB(n){let t=zB(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Gt(1===i);const E=e.from[0];E.allDescendants?r=E.collectionId:t=t.child(E.collectionId)}let s=[];e.where&&(s=QB(e.where));let u=[];e.orderBy&&(u=e.orderBy.map(E=>{return new m_(I_((T=E).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;e.limit&&(d=function(E){let T;return T="object"==typeof E?E.value:E,M0(T)?null:T}(e.limit));let p=null;var E;e.startAt&&(p=new Ih((E=e.startAt).values||[],!!E.before));let _=null;return e.endAt&&(_=function(E){return new Ih(E.values||[],!E.before)}(e.endAt)),gB(t,r,u,s,d,"F",p,_)}function QB(n){return n?void 0!==n.unaryFilter?[_K(n)]:void 0!==n.fieldFilter?[mK(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>QB(t)).reduce((t,e)=>t.concat(e)):_t():[]}function pK(n){return oK[n]}function gK(n){return aK[n]}function b_(n){return{fieldPath:n.canonicalString()}}function I_(n){return Ni.fromServerFormat(n.fieldPath)}function mK(n){return qr.create(I_(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(n.fieldFilter.op),n.fieldFilter.value)}function _K(n){switch(n.unaryFilter.op){case"IS_NAN":const t=I_(n.unaryFilter.field);return qr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=I_(n.unaryFilter.field);return qr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=I_(n.unaryFilter.field);return qr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=I_(n.unaryFilter.field);return qr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}function yK(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function JB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ns(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=XB(t)),t=vK(n.get(e),t);return XB(t)}function vK(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function XB(n){return n+"\x01\x01"}function _u(n){const t=n.length;if(Gt(t>=2),2===t)return Gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const u=n.indexOf("\x01",s);switch((u<0||u>e)&&_t(),n.charAt(u+1)){case"\x01":const d=n.substring(s,u);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,u),r+="\0";break;case"\x11":r+=n.substring(s,u+1);break;default:_t()}s=u+2}return new En(i)}const eH=["userId","batchId"];function oD(n,t){return[n,Ns(t)]}function tH(n,t,e){return[n,Ns(t),e]}const wK={},EK=["prefixPath","collectionGroup","readTime","documentId"],CK=["prefixPath","collectionGroup","documentId"],bK=["collectionGroup","readTime","prefixPath","documentId"],IK=["canonicalId","targetId"],TK=["targetId","path"],SK=["path","targetId"],DK=["collectionId","parent"],AK=["indexId","uid"],xK=["uid","sequenceNumber"],MK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kK=["indexId","uid","orderedDocumentKey"],OK=["userId","collectionPath","documentId"],RK=["userId","collectionPath","largestBatchId"],NK=["userId","collectionGroup","largestBatchId"],nH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PK=[...nH,"documentOverlays"],iH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rH=iH,FK=[...rH,"indexConfiguration","indexState","indexEntries"];class KO extends ZU{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function Mr(n,t){const e=rt(n);return Fl.M(e.ie,t)}class ZO{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&J4(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=V0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=V0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=LB();return this.mutations.forEach(r=>{const s=t.get(r.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=e.has(r.key)?null:d;const p=AB(u,d);null!==p&&i.set(r.key,p),u.isValidDocument()||u.convertToNoDocument($t.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),an())}isEqual(t){return this.batchId===t.batchId&&f_(this.mutations,t.mutations,(e,i)=>xB(e,i))&&f_(this.baseMutations,t.baseMutations,(e,i)=>xB(e,i))}}class YO{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Gt(t.mutations.length===i.length);let r=nK;const s=t.mutations;for(let u=0;u<s.length;u++)r=r.insert(s[u].key,i[u].version);return new YO(t,e,i,r)}}class QO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Sh{constructor(t,e,i,r,s=$t.min(),u=$t.min(),d=gr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(t){return new Sh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Sh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Sh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class sH{constructor(t){this.re=t}}function oH(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:aD(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:$0(r=n.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:G0(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Tp(t.version)};else{if(!t.isUnknownDocument())return _t();i.unknownDocument={path:e.path.toArray(),version:Tp(t.version)}}var r,s;return i}function aD(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Tp(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Sp(n){const t=new vi(n.seconds,n.nanoseconds);return $t.fromTimestamp(t)}function Dp(n,t){const e=(t.baseMutations||[]).map(s=>WO(n.re,s));for(let s=0;s<t.mutations.length-1;++s){const u=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(u.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>WO(n.re,s)),r=vi.fromMillis(t.localWriteTimeMs);return new ZO(t.batchId,r,e,i)}function q0(n){const t=Sp(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Sp(n.lastLimboFreeSnapshotVersion):$t.min();let i;var r;return void 0!==n.query.documents?(Gt(1===(r=n.query).documents.length),i=Rs(__(zB(r.documents[0])))):i=Rs(YB(n.query)),new Sh(i,n.targetId,0,n.lastListenSequenceNumber,t,e,gr.fromBase64String(n.resumeToken))}function aH(n,t){const e=Tp(t.snapshotVersion),i=Tp(t.lastLimboFreeSnapshotVersion);let r;r=JS(t.target)?ZB(n.re,t.target):qO(n.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Cp(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function JO(n){const t=YB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?eD(t,t.limit,"L"):t}function XO(n,t){return new QO(t.largestBatchId,WO(n.re,t.overlayMutation))}function lH(n,t){const e=t.path.lastSegment();return[n,Ns(t.path.popLast()),e]}function uH(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Tp(i.readTime),documentKey:Ns(i.documentKey.path),largestBatchId:i.largestBatchId}}class VK{getBundleMetadata(t,e){return cH(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Sp(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return cH(t).put({bundleId:(i=e).id,createTime:Tp(xr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return dH(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:JO(r.bundledQuery),readTime:Sp(r.readTime)};var r})}saveNamedQuery(t,e){return dH(t).put({name:(i=e).name,readTime:Tp(xr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function cH(n){return Mr(n,"bundles")}function dH(n){return Mr(n,"namedQueries")}class lD{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new lD(t,e.uid||"")}getOverlay(t,e){return K0(t).get(lH(this.userId,e)).next(i=>i?XO(this.It,i):null)}getOverlays(t,e){const i=gu();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,u)=>{const d=new QO(e,u);r.push(this.ue(t,d))}),he.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(u=>r.add(Ns(u.getCollectionPath())));const s=[];return r.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);s.push(K0(t).Y("collectionPathOverlayIndex",d))}),he.waitFor(s)}getOverlaysForCollection(t,e,i){const r=gu(),s=Ns(e),u=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return K0(t).W("collectionPathOverlayIndex",u).next(d=>{for(const p of d){const _=XO(this.It,p);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=gu();let u;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return K0(t).Z({index:"collectionGroupOverlayIndex",range:d},(p,_,E)=>{const T=XO(this.It,_);s.size()<r||T.largestBatchId===u?(s.set(T.getKey(),T),u=T.largestBatchId):E.done()}).next(()=>s)}ue(t,e){return K0(t).put(function(i,r,s){const[u,d,p]=lH(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:W0(i.re,s.mutation)}}(this.It,this.userId,e))}}function K0(n){return Mr(n,"documentOverlays")}class Ap{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(Fi(t.integerValue));else if("doubleValue"in t){const i=Fi(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),k0(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(vp(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?sB(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):_t()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const r of Object.keys(i))this._e(r,e),this.ae(i[r],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const r of i)this.ae(r,e)}ge(t,e){this.le(e,37),et.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function UK(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function hH(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=UK(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Ap.Te=new Ap;class BK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=e.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(t){const e=this.Ce(t),i=hH(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Ne(t){const e=this.Ce(t),i=hH(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Oe(0),this.Oe(255)):255===e?(this.Oe(255),this.Oe(0)):this.Oe(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class HK{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class jK{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Me()}}class Z0{constructor(){this.Be=new BK,this.Le=new HK(this.Be),this.Ue=new jK(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class xp{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new xp(this.indexId,this.documentKey,this.arrayValue,i)}}function Mp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=fH(n.arrayValue,t.arrayValue),0!==e?e:(e=fH(n.directionalValue,t.directionalValue),0!==e?e:et.comparator(n.documentKey,t.documentKey)))}function fH(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class GK{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=kO(t);if(void 0!==e&&!this.ze(e))return!1;const i=mp(t);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const u=i[r];if(!this.He(this.je,u)||!this.Je(this.Ge[s++],u))return!1;++r}for(;r<i.length;++r){const u=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],u))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class $K{constructor(){this.Ye=new eR}addToCollectionParentIndex(t,e){return this.Ye.add(e),he.resolve()}getCollectionParents(t,e){return he.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return he.resolve()}deleteFieldIndex(t,e){return he.resolve()}getDocumentsMatchingTarget(t,e){return he.resolve(null)}getIndexType(t,e){return he.resolve(0)}getFieldIndexes(t,e){return he.resolve([])}getNextCollectionGroupToUpdate(t){return he.resolve(null)}getMinOffset(t,e){return he.resolve(zo.min())}getMinOffsetFromCollectionGroup(t,e){return he.resolve(zo.min())}updateCollectionGroup(t,e,i){return he.resolve()}updateIndexEntries(t,e){return he.resolve()}}class eR{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new qn(En.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new qn(En.comparator)).toArray()}}const uD=new Uint8Array(0);class zK{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new eR,this.Ze=new Th(i=>Cp(i),(i,r)=>P0(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:Ns(r)};return pH(t).put(s)}return he.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[zU(e),""],!1,!0);return pH(t).W(r).next(s=>{for(const u of s){if(u.collectionId!==e)break;i.push(_u(u.parent))}return i})}addFieldIndex(t,e){const i=cD(t),r={indexId:(u=e).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete r.indexId;const s=i.add(r);if(e.indexState){const u=Q0(t);return s.next(d=>{u.put(uH(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=cD(t),r=Q0(t),s=Y0(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Y0(t);let r=!0;const s=new Map;return he.forEach(this.tn(e),u=>this.en(t,u).next(d=>{r&&(r=!!d),s.set(u,d)})).next(()=>{if(r){let u=an();const d=[];return he.forEach(s,(p,_)=>{var E;Ke("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(He=>`${He.fieldPath}:${He.kind}`).join(",")}`} to execute ${Cp(e)}`);const T=function(He,We){const ct=kO(We);if(void 0===ct)return null;for(const gt of XS(He,ct.fieldPath))switch(gt.op){case"array-contains-any":return gt.value.arrayValue.values||[];case"array-contains":return[gt.value]}return null}(_,p),x=function(He,We){const ct=new Map;for(const gt of mp(We))for(const Xt of XS(He,gt.fieldPath))switch(Xt.op){case"==":case"in":ct.set(gt.fieldPath.canonicalString(),Xt.value);break;case"not-in":case"!=":return ct.set(gt.fieldPath.canonicalString(),Xt.value),Array.from(ct.values())}return null}(_,p),N=function(He,We){const ct=[];let gt=!0;for(const Xt of mp(We)){const Pn=0===Xt.kind?cB(He,Xt.fieldPath,He.startAt):dB(He,Xt.fieldPath,He.startAt);ct.push(Pn.value),gt&&(gt=Pn.inclusive)}return new Ih(ct,gt)}(_,p),V=function(He,We){const ct=[];let gt=!0;for(const Xt of mp(We)){const Pn=0===Xt.kind?dB(He,Xt.fieldPath,He.endAt):cB(He,Xt.fieldPath,He.endAt);ct.push(Pn.value),gt&&(gt=Pn.inclusive)}return new Ih(ct,gt)}(_,p),Z=this.nn(p,_,N),Q=this.nn(p,_,V),Ae=this.sn(p,_,x),Be=this.rn(p.indexId,T,Z,N.inclusive,Q,V.inclusive,Ae);return he.forEach(Be,He=>i.J(He,e.limit).next(We=>{We.forEach(ct=>{const gt=et.fromSegments(ct.documentKey);u.has(gt)||(u=u.add(gt),d.push(gt))})}))}).next(()=>d)}return he.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,r,s,u,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),_=p/(null!=e?e.length:1),E=[];for(let T=0;T<p;++T){const x=e?this.on(e[T/_]):uD,N=this.un(t,x,i[T%_],r),V=this.cn(t,x,s[T%_],u),Z=d.map(Q=>this.un(t,x,Q,!0));E.push(...this.createRange(N,V,Z))}return E}un(t,e,i,r){const s=new xp(t,et.empty(),e,i);return r?s:s.Ke()}cn(t,e,i,r){const s=new xp(t,et.empty(),e,i);return r?s.Ke():s}en(t,e){const i=new GK(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let u=null;for(const d of s)i.We(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(t,e){let i=2;return he.forEach(this.tn(e),r=>this.en(t,r).next(s=>{s?0!==i&&s.fields.length<function(u){let d=new qn(Ni.comparator),p=!1;for(const _ of u.filters){const E=_;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:d=d.add(E.field))}for(const _ of u.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new Z0;for(const r of mp(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const u=i.qe(r.kind);Ap.Te.ce(s,u)}return i.$e()}on(t){const e=new Z0;return Ap.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new Z0;return Ap.Te.ce(Ep(this.databaseId,e),i.qe(function(r){const s=mp(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let r=[];r.push(new Z0);let s=0;for(const u of mp(t)){const d=i[s++];for(const p of r)if(this.ln(e,u.fieldPath)&&R0(d))r=this.fn(r,u,d);else{const _=p.qe(u.kind);Ap.Te.ce(d,_)}}return this.dn(r)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const r=[...t],s=[];for(const u of i.arrayValue.values||[])for(const d of r){const p=new Z0;p.seed(d.$e()),Ap.Te.ce(u,p.qe(e.kind)),s.push(p)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof qr&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=cD(t),r=Q0(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const u=[];return he.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{u.push(function(_,E){const T=E?new D0(E.sequenceNumber,new zo(Sp(E.readTime),new et(_u(E.documentKey)),E.largestBatchId)):D0.empty(),x=_.fields.map(([N,V])=>new qS(Ni.fromServerFormat(N),V));return new WS(_.indexId,_.collectionGroup,x,T)}(d,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Yt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=cD(t),s=Q0(t);return this._n(t).next(u=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>he.forEach(d,p=>s.put(uH(p.indexId,this.user,u,i)))))}updateIndexEntries(t,e){const i=new Map;return he.forEach(e,(r,s)=>{const u=i.get(r.collectionGroup);return(u?he.resolve(u):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),he.forEach(d,p=>this.wn(t,r,p).next(_=>{const E=this.mn(s,p);return _.isEqual(E)?he.resolve():this.gn(t,s,p,_,E)}))))})}yn(t,e,i,r){return Y0(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,r){return Y0(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const r=Y0(t);let s=new qn(Mp);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(u,d)=>{s=s.add(new xp(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(t,e){let i=new qn(Mp);const r=this.an(e,t);if(null==r)return i;const s=kO(e);if(null!=s){const u=t.data.field(s.fieldPath);if(R0(u))for(const d of u.arrayValue.values||[])i=i.add(new xp(e.indexId,t.key,this.on(d),r))}else i=i.add(new xp(e.indexId,t.key,uD,r));return i}gn(t,e,i,r,s){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const u=[];return function(d,p,_,E,T){const x=d.getIterator(),N=p.getIterator();let V=p_(x),Z=p_(N);for(;V||Z;){let Q=!1,Ae=!1;if(V&&Z){const Be=_(V,Z);Be<0?Ae=!0:Be>0&&(Q=!0)}else null!=V?Ae=!0:Q=!0;Q?(E(Z),Z=p_(N)):Ae?(T(V),V=p_(x)):(V=p_(x),Z=p_(N))}}(r,s,Mp,d=>{u.push(this.yn(t,e,i,d))},d=>{u.push(this.pn(t,e,i,d))}),he.waitFor(u)}_n(t){let e=1;return Q0(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((u,d)=>Mp(u,d)).filter((u,d,p)=>!d||0!==Mp(u,p[d-1]));const r=[];r.push(t);for(const u of i){const d=Mp(u,t),p=Mp(u,e);if(0===d)r[0]=t.Ke();else if(d>0&&p<0)r.push(u),r.push(u.Ke());else if(p>0)break}r.push(e);const s=[];for(let u=0;u<r.length;u+=2)s.push(IDBKeyRange.bound([r[u].indexId,this.uid,r[u].arrayValue,r[u].directionalValue,uD,[]],[r[u+1].indexId,this.uid,r[u+1].arrayValue,r[u+1].directionalValue,uD,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(gH)}getMinOffset(t,e){return he.mapArray(this.tn(e),i=>this.en(t,i).next(r=>r||_t())).next(gH)}}function pH(n){return Mr(n,"collectionParents")}function Y0(n){return Mr(n,"indexEntries")}function cD(n){return Mr(n,"indexConfiguration")}function Q0(n){return Mr(n,"indexState")}function gH(n){Gt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;OO(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new zo(t.readTime,t.documentKey,e)}const mH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class oo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new oo(t,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _H(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],u=IDBKeyRange.only(e.batchId);let d=0;const p=i.Z({range:u},(E,T,x)=>(d++,x.delete()));s.push(p.next(()=>{Gt(1===d)}));const _=[];for(const E of e.mutations){const T=tH(t,E.key.path,e.batchId);s.push(r.delete(T)),_.push(E.key)}return he.waitFor(s).next(()=>_)}function dD(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw _t();t=n.noDocument}return JSON.stringify(t).length}oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oo.DEFAULT=new oo(41943040,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oo.DISABLED=new oo(-1,0,0);class hD{constructor(t,e,i,r){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(t,e,i,r){Gt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new hD(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dh(t).Z({index:"userMutationsIndex",range:i},(r,s,u)=>{e=!1,u.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=T_(t),u=Dh(t);return u.add({}).next(d=>{Gt("number"==typeof d);const p=new ZO(d,e,i,r),_=function(x,N,V){const Z=V.baseMutations.map(Ae=>W0(x.re,Ae)),Q=V.mutations.map(Ae=>W0(x.re,Ae));return{userId:N,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:Z,mutations:Q}}(this.It,this.userId,p),E=[];let T=new qn((x,N)=>Yt(x.canonicalString(),N.canonicalString()));for(const x of r){const N=tH(this.userId,x.key.path,d);T=T.add(x.key.path.popLast()),E.push(u.put(_)),E.push(s.put(N,wK))}return T.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(t,x))}),t.addOnCommittedListener(()=>{this.In[d]=p.keys()}),he.waitFor(E).next(()=>p)})}lookupMutationBatch(t,e){return Dh(t).get(e).next(i=>i?(Gt(i.userId===this.userId),Dp(this.It,i)):null)}Tn(t,e){return this.In[e]?he.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Dh(t).Z({index:"userMutationsIndex",range:r},(u,d,p)=>{d.userId===this.userId&&(Gt(d.batchId>=i),s=Dp(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Dh(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,s,u)=>{i=s.batchId,u.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dh(t).W("userMutationsIndex",e).next(i=>i.map(r=>Dp(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=oD(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return T_(t).Z({range:r},(u,d,p)=>{const[_,E,T]=u,x=_u(E);if(_===this.userId&&e.path.isEqual(x))return Dh(t).get(T).next(N=>{if(!N)throw _t();Gt(N.userId===this.userId),s.push(Dp(this.It,N))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new qn(Yt);const r=[];return e.forEach(s=>{const u=oD(this.userId,s.path),d=IDBKeyRange.lowerBound(u),p=T_(t).Z({range:d},(_,E,T)=>{const[x,N,V]=_,Z=_u(N);x===this.userId&&s.path.isEqual(Z)?i=i.add(V):T.done()});r.push(p)}),he.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=oD(this.userId,i),u=IDBKeyRange.lowerBound(s);let d=new qn(Yt);return T_(t).Z({range:u},(p,_,E)=>{const[T,x,N]=p,V=_u(x);T===this.userId&&i.isPrefixOf(V)?V.length===r&&(d=d.add(N)):E.done()}).next(()=>this.En(t,d))}En(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Dh(t).get(s).next(u=>{if(null===u)throw _t();Gt(u.userId===this.userId),i.push(Dp(this.It,u))}))}),he.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return _H(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),he.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return he.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return T_(t).Z({range:i},(s,u,d)=>{if(s[0]===this.userId){const p=_u(s[1]);r.push(p)}else d.done()}).next(()=>{Gt(0===r.length)})})}containsKey(t,e){return yH(t,this.userId,e)}Rn(t){return vH(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yH(n,t,e){const i=oD(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let u=!1;return T_(n).Z({range:s,X:!0},(d,p,_)=>{const[E,T,x]=d;E===t&&T===r&&(u=!0),_.done()}).next(()=>u)}function Dh(n){return Mr(n,"mutations")}function T_(n){return Mr(n,"documentMutations")}function vH(n){return Mr(n,"mutationQueues")}class kp{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new kp(0)}static vn(){return new kp(-1)}}class WK{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new kp(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>$t.fromTimestamp(new vi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>S_(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Gt(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return S_(t).Z((u,d)=>{const p=q0(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>he.waitFor(s)).next(()=>r)}forEachTarget(t,e){return S_(t).Z((i,r)=>{const s=q0(r);e(s)})}Vn(t){return wH(t).get("targetGlobalKey").next(e=>(Gt(null!==e),e))}Sn(t,e){return wH(t).put("targetGlobalKey",e)}Dn(t,e){return S_(t).put(aH(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Cp(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return S_(t).Z({range:r,index:"queryTargetsIndex"},(u,d,p)=>{const _=q0(d);P0(e,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Ah(t);return e.forEach(u=>{const d=Ns(u.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,u))}),he.waitFor(r)}removeMatchingKeys(t,e,i){const r=Ah(t);return he.forEach(e,s=>{const u=Ns(s.path);return he.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Ah(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ah(t);let s=an();return r.Z({range:i,X:!0},(u,d,p)=>{const _=_u(u[1]),E=new et(_);s=s.add(E)}).next(()=>s)}containsKey(t,e){const i=Ns(e.path),r=IDBKeyRange.bound([i],[zU(i)],!1,!0);let s=0;return Ah(t).Z({index:"documentTargetsIndex",X:!0,range:r},([u,d],p,_)=>{0!==u&&(s++,_.done())}).next(()=>s>0)}se(t,e){return S_(t).get(e).next(i=>i?q0(i):null)}}function S_(n){return Mr(n,"targets")}function wH(n){return Mr(n,"targetGlobal")}function Ah(n){return Mr(n,"targetDocuments")}function EH([n,t],[e,i]){const r=Yt(n,e);return 0===r?Yt(t,i):r}class qK{constructor(t){this.xn=t,this.buffer=new qn(EH),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();EH(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class KK{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Ee.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){vh(i)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield yh(i)}yield e.Fn(3e5)}))}}class ZK{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return he.resolve(ro.at);const i=new qK(e);return this.$n.forEachTarget(t,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(mH)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mH):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,r,s,u,d,p,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(t,r))).next(T=>(i=T,d=Date.now(),this.removeTargets(t,i,e))).next(T=>(s=T,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(_=Date.now(),xO()<=Ro.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-E}ms\n\tDetermined least recently used ${r} in `+(d-u)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${T} documents in `+(_-p)+`ms\nTotal Duration: ${_-E}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:T})))}}class YK{constructor(t,e){this.db=t,this.garbageCollector=new ZK(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return fD(t,i)}removeReference(t,e,i){return fD(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return fD(t,e)}Gn(t,e){return function(i,r){let s=!1;return vH(i).tt(u=>yH(i,u,r).next(d=>(d&&(s=!0),he.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(t,(u,d)=>{if(d<=e){const p=this.Gn(t,u).next(_=>{if(!_)return s++,i.getEntry(t,u).next(()=>(i.removeEntry(u,$t.min()),Ah(t).delete([0,Ns(u.path)])))});r.push(p)}}).next(()=>he.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return fD(t,e)}Kn(t,e){const i=Ah(t);let r,s=ro.at;return i.Z({index:"documentTargetsIndex"},([u,d],{path:p,sequenceNumber:_})=>{0===u?(s!==ro.at&&e(new et(_u(r)),s),s=_,r=p):s=ro.at}).next(()=>{s!==ro.at&&e(new et(_u(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function fD(n,t){return Ah(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ns(t.path),sequenceNumber:i}));var i}class CH{constructor(){this.changes=new Th(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,li.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?he.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class QK{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Op(t).put(i)}removeEntry(t,e,i){return Op(t).delete(function(r,s){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],aD(s),u[u.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=li.newInvalidDocument(e);return Op(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(J0(e))},(r,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:li.newInvalidDocument(e)};return Op(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(J0(e))},(r,s)=>{i={document:this.jn(e,s),size:dD(s)}}).next(()=>i)}getEntries(t,e){let i=so();return this.zn(t,e,(r,s)=>{const u=this.jn(r,s);i=i.insert(r,u)}).next(()=>i)}Hn(t,e){let i=so(),r=new Pi(et.comparator);return this.zn(t,e,(s,u)=>{const d=this.jn(s,u);i=i.insert(s,d),r=r.insert(s,dD(u))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return he.resolve();let r=new qn(SH);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(J0(r.first()),J0(r.last())),u=r.getIterator();let d=u.getNext();return Op(t).Z({index:"documentKeyIndex",range:s},(p,_,E)=>{const T=et.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&SH(d,T)<0;)i(d,null),d=u.getNext();d&&d.isEqual(T)&&(i(d,_),d=u.hasNext()?u.getNext():null),d?E.j(J0(d)):E.done()}).next(()=>{for(;d;)i(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),aD(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Op(t).W(IDBKeyRange.bound(r,s,!0)).next(u=>{let d=so();for(const p of u){const _=this.jn(et.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=so();const u=TH(e,i),d=TH(e,zo.max());return Op(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(p,_,E)=>{const T=this.jn(et.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(T.key,T),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(t){return new JK(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return IH(t).get("remoteDocumentGlobalKey").next(e=>(Gt(!!e),e))}Qn(t,e){return IH(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function LK(n,t){let e;if(t.document)e=KB(n.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=et.fromSegments(t.noDocument.path),r=Sp(t.noDocument.readTime);e=li.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return _t();{const i=et.fromSegments(t.unknownDocument.path),r=Sp(t.unknownDocument.version);e=li.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new vi(i[0],i[1]);return $t.fromTimestamp(r)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual($t.min()))return i}return li.newInvalidDocument(t)}}function bH(n){return new QK(n)}class JK extends CH{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new Th(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new qn((s,u)=>Yt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const d=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,d.readTime)),u.isValidDocument()){const p=oH(this.Yn.It,u);r=r.add(s.path.popLast()),i+=dD(p)-d.size,e.push(this.Yn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=oH(this.Yn.It,u.convertToNoDocument($t.min()));e.push(this.Yn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),he.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((s,u)=>{this.Xn.set(s,{size:u,readTime:i.get(s).readTime})}),i))}}function IH(n){return Mr(n,"remoteDocumentGlobal")}function Op(n){return Mr(n,"remoteDocumentsV14")}function J0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function TH(n,t){const e=t.documentKey.path.toArray();return[n,aD(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function SH(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Yt(e[s],i[s]),r)return r;return r=Yt(e.length,i.length),r||(r=Yt(e[e.length-2],i[i.length-2]),r||Yt(e[e.length-1],i[i.length-1]))}class XK{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class DH{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&V0(i.mutation,r,Wo.empty(),vi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,an()).next(()=>i))}getLocalViewOfDocuments(t,e,i=an()){const r=gu();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let u=U0();return s.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(t,e){const i=gu();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,an()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((u,d)=>{e.set(u,d)})})}computeViews(t,e,i,r){let s=so();const u=B0(),d=B0();return e.forEach((p,_)=>{const E=i.get(_.key);r.has(_.key)&&(void 0===E||E.mutation instanceof wc)?s=s.insert(_.key,_):void 0!==E&&(u.set(_.key,E.mutation.getFieldMask()),V0(E.mutation,_,E.mutation.getFieldMask(),vi.now()))}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((_,E)=>u.set(_,E)),e.forEach((_,E)=>{var T;return d.set(_,new XK(E,null!==(T=u.get(_))&&void 0!==T?T:null))}),d))}recalculateAndSaveOverlays(t,e){const i=B0();let r=new Pi((u,d)=>u-d),s=an();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(u=>{for(const d of u)d.keys().forEach(p=>{const _=e.get(p);if(null===_)return;let E=i.get(p)||Wo.empty();E=d.applyToLocalView(_,E),i.set(p,E);const T=(r.get(d.batchId)||an()).add(p);r=r.insert(d.batchId,T)})}).next(()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,E=p.value,T=LB();E.forEach(x=>{if(!s.has(x)){const N=AB(e.get(x),i.get(x));null!==N&&T.set(x,N),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(t,_,T))}return he.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return et.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):BO(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const u=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):he.resolve(gu());let d=-1,p=s;return u.next(_=>he.forEach(_,(E,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),s.get(E)?he.resolve():this.getBaseDocument(t,E,T).next(x=>{p=p.insert(E,x)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,p,_,an())).next(E=>({batchId:d,changes:FB(E)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new et(e)).next(i=>{let r=U0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=U0();return this.indexManager.getCollectionParents(t,r).next(u=>he.forEach(u,d=>{const p=(_=e,E=d.child(r),new vc(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,E;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(_=>{_.forEach((E,T)=>{s=s.insert(E,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const _=p.getKey();null===r.get(_)&&(r=r.insert(_,li.newInvalidDocument(_)))});let u=U0();return r.forEach((d,p)=>{const _=s.get(d);void 0!==_&&V0(_.mutation,p,Wo.empty(),vi.now()),jO(e,p)&&(u=u.insert(d,p))}),u})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):he.resolve(li.newInvalidDocument(e))}}class eZ{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return he.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:xr(i.createTime)}),he.resolve()}getNamedQuery(t,e){return he.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:JO(i.bundledQuery),readTime:xr(i.readTime)}),he.resolve();var i}}class tZ{constructor(){this.overlays=new Pi(et.comparator),this.es=new Map}getOverlay(t,e){return he.resolve(this.overlays.get(e))}getOverlays(t,e){const i=gu();return he.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ue(t,e,s)}),he.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),he.resolve()}getOverlaysForCollection(t,e,i){const r=gu(),s=e.length+1,u=new et(e.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return he.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Pi((_,E)=>_-E);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let E=s.get(_.largestBatchId);null===E&&(E=gu(),s=s.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const d=gu(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,E)=>d.set(_,E)),!(d.size()>=r)););return he.resolve(d)}ue(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const u=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new QO(e,i));let s=this.es.get(e);void 0===s&&(s=an(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class tR{constructor(){this.ns=new qn(kr.ss),this.rs=new qn(kr.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new kr(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new kr(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new et(new En([])),i=new kr(e,t),r=new kr(e,t+1),s=[];return this.rs.forEachInRange([i,r],u=>{this.cs(u),s.push(u.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new et(new En([])),i=new kr(e,t),r=new kr(e,t+1);let s=an();return this.rs.forEachInRange([i,r],u=>{s=s.add(u.key)}),s}containsKey(t){const e=new kr(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class kr{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return et.comparator(t.key,e.key)||Yt(t._s,e._s)}static os(t,e){return Yt(t._s,e._s)||et.comparator(t.key,e.key)}}class nZ{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new qn(kr.ss)}checkEmpty(t){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.ws;this.ws++;const u=new ZO(s,e,i,r);this.mutationQueue.push(u);for(const d of r)this.gs=this.gs.add(new kr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return he.resolve(u)}lookupMutationBatch(t,e){return he.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),s=r<0?0:r;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new kr(e,0),r=new kr(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],u=>{const d=this.ys(u._s);s.push(d)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new qn(Yt);return e.forEach(r=>{const s=new kr(r,0),u=new kr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,u],d=>{i=i.add(d._s)})}),he.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;et.isDocumentKey(s)||(s=s.child(""));const u=new kr(new et(s),0);let d=new qn(Yt);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(p._s)),!0)},u),he.resolve(this.Is(d))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Gt(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return he.forEach(e.mutations,r=>{const s=new kr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new kr(e,0),r=this.gs.firstAfterOrEqual(i);return he.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return he.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class iZ{constructor(t){this.Es=t,this.docs=new Pi(et.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,u=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return he.resolve(i?i.document.mutableCopy():li.newInvalidDocument(e))}getEntries(t,e){let i=so();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():li.newInvalidDocument(r))}),he.resolve(i)}getAllFromCollection(t,e,i){let r=so();const s=new et(e.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||OO(qU(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return he.resolve(r)}getAllFromCollectionGroup(t,e,i,r){_t()}As(t,e){return he.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new rZ(this)}getSize(t){return he.resolve(this.size)}}class rZ extends CH{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),he.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class sZ{constructor(t){this.persistence=t,this.Rs=new Th(e=>Cp(e),P0),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.bs=0,this.Ps=new tR,this.targetCount=0,this.vs=kp.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),he.resolve()}getLastRemoteSnapshotVersion(t){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return he.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),he.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new kp(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,he.resolve()}updateTargetData(t,e){return this.Dn(e),he.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,he.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Rs.forEach((u,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Rs.delete(u),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),he.waitFor(s).next(()=>r)}getTargetCount(t){return he.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return he.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),he.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(u=>{s.push(r.markPotentiallyOrphaned(t,u))}),he.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),he.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return he.resolve(i)}containsKey(t,e){return he.resolve(this.Ps.containsKey(e))}}class AH{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new ro(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new sZ(this),this.indexManager=new $K,this.remoteDocumentCache=new iZ(i=>this.referenceDelegate.xs(i)),this.It=new sH(e),this.Ns=new eZ(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new tZ,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new nZ(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){Ke("MemoryPersistence","Starting transaction:",t);const r=new oZ(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(t,e){return he.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class oZ extends ZU{constructor(t){super(),this.currentSequenceNumber=t}}class pD{constructor(t){this.persistence=t,this.Fs=new tR,this.$s=null}static Bs(t){return new pD(t)}get Ls(){if(this.$s)return this.$s;throw _t()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),he.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),he.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),he.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,i=>{const r=et.fromPath(i);return this.Us(t,r).next(s=>{s||e.removeEntry(r,$t.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return he.or([()=>he.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class aZ{constructor(t){this.It=t}$(t,e,i,r){const s=new KS("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eH,{unique:!0}),d.createObjectStore("documentMutations"),xH(t),function(d){d.createObjectStore("remoteDocuments")}(t));let u=he.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),xH(t)),u=u.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(d,p){return p.store("mutations").W().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eH,{unique:!0});const E=p.store("mutations"),T=_.map(x=>E.put(x));return he.waitFor(T)})}(t,s))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(u=u.next(()=>this.qs(s))),i<6&&r>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&r>=7&&(u=u.next(()=>this.Gs(s))),i<8&&r>=8&&(u=u.next(()=>this.Qs(t,s))),i<9&&r>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(u=u.next(()=>this.js(s))),i<11&&r>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(u=u.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:OK});p.createIndex("collectionPathOverlayIndex",RK,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",NK,{unique:!1})}(t)})),i<13&&r>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:EK});p.createIndex("documentKeyIndex",CK),p.createIndex("collectionGroupIndex",bK)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(u=u.next(()=>this.zs(t,s))),i<15&&r>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:AK}).createIndex("sequenceNumberIndex",xK,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:MK}).createIndex("documentKeyIndex",kK,{unique:!1})}(t))),u}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=dD(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>he.forEach(r,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",u).next(d=>he.forEach(d,p=>{Gt(p.userId===s.userId);const _=Dp(this.It,p);return _H(t,s.userId,_).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((u,d)=>{const p=new En(u),_=[0,Ns(p)];s.push(e.get(_).next(E=>E?he.resolve():e.put({targetId:0,path:Ns(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:DK});const i=e.store("collectionParents"),r=new eR,s=u=>{if(r.add(u)){const d=u.lastSegment(),p=u.popLast();return i.put({collectionId:d,parent:Ns(p)})}};return e.store("remoteDocuments").Z({X:!0},(u,d)=>{const p=new En(u);return s(p.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([u,d,p],_)=>{const E=_u(d);return s(E.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const s=q0(r),u=aH(this.It,s);return e.put(u)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((s,u)=>{const d=e.store("remoteDocumentsV14"),p=(_=u,_.document?new et(En.fromString(_.document.name).popFirst(5)):_.noDocument?et.fromSegments(_.noDocument.path):_.unknownDocument?et.fromSegments(_.unknownDocument.path):_t()).path.toArray();var _;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(d.put(E))}).next(()=>he.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=bH(this.It),s=new AH(pD.Bs,this.It.re);return i.W().next(u=>{const d=new Map;return u.forEach(p=>{var _;let E=null!==(_=d.get(p.userId))&&void 0!==_?_:an();Dp(this.It,p).keys().forEach(T=>E=E.add(T)),d.set(p.userId,E)}),he.forEach(d,(p,_)=>{const E=new Ar(_),T=lD.oe(this.It,E),x=s.getIndexManager(E),N=hD.oe(E,this.It,x,s.referenceDelegate);return new DH(r,N,T,x).recalculateAndSaveOverlaysForDocumentKeys(new KO(e,ro.at),p).next()})})}}function xH(n){n.createObjectStore("targetDocuments",{keyPath:TK}).createIndex("documentTargetsIndex",SK,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IK,{unique:!0}),n.createObjectStore("targetGlobal")}const nR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iR{constructor(t,e,i,r,s,u,d,p,_,E,T=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=u,this.document=d,this.Js=_,this.Ys=E,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!iR.C())throw new Ue(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YK(this,r),this.ii=e+"main",this.It=new sH(p),this.ri=new Fl(this.ii,this.Xs,new aZ(this.It)),this.Cs=new WK(this.referenceDelegate,this.It),this.remoteDocumentCache=bH(this.It),this.Ns=new VK,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===E&&$i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,nR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new ro(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,Ee.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,Ee.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>gD(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(vh(t))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return X0(t).get("owner").next(e=>he.resolve(this.mi(e)))}gi(t){return gD(t).delete(this.clientId)}yi(){var t=this;return(0,Ee.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Mr(i,"clientMetadata");return r.W().next(s=>{const u=t.Ii(s,18e5),d=s.filter(p=>-1===u.indexOf(p));return he.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?he.resolve(!0):X0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,nR);return!1}}return!(!this.networkEnabled||!this.inForeground)||gD(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ke("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ee.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new KO(e,ro.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>gD(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return hD.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new zK(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return lD.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){Ke("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(u=this.Xs)?FK:14===u?rH:13===u?iH:12===u?PK:11===u?nH:void _t();var u;let d;return this.ri.runTransaction(t,r,s,p=>(d=new KO(p,this.Ss?this.Ss.next():ro.at),"readwrite-primary"===e?this.fi(d).next(_=>!!_||this.di(d)).next(_=>{if(!_)throw $i(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(ye.FAILED_PRECONDITION,KU);return i(d)}).next(_=>this.wi(d).next(()=>_)):this.Vi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(t){return X0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ue(ye.FAILED_PRECONDITION,nR)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return X0(t).put("owner",e)}static C(){return Fl.C()}_i(t){const e=X0(t);return e.get("owner").next(i=>this.mi(i)?(Ke("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):he.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&($i(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return Ke("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return $i("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){$i("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function X0(n){return Mr(n,"owner")}function gD(n){return Mr(n,"clientMetadata")}function rR(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class sR{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=an(),r=an();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new sR(t,e.fromCache,i,r)}}class MH{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(s=>s||this.Oi(t,e,r,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if(mB(e))return he.resolve(null);let i=Rs(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=eD(e,null,"F"),i=Rs(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const u=an(...s);return this.Ni.getDocuments(t,u).next(d=>this.indexManager.getMinOffset(t,i).next(p=>{const _=this.Fi(e,d);return this.$i(e,_,u,p.readTime)?this.ki(t,eD(e,null,"F")):this.Bi(t,_,e,p)}))})))}Oi(t,e,i,r){return mB(e)||r.isEqual($t.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const u=this.Fi(e,s);return this.$i(e,u,i,r)?this.Mi(t,e):(xO()<=Ro.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),HO(e)),this.Bi(t,u,e,WU(r,-1)))})}Fi(t,e){let i=new qn(vB(t));return e.forEach((r,s)=>{jO(t,s)&&(i=i.add(s))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(t,e){return xO()<=Ro.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",HO(e)),this.Ni.getDocumentsMatchingQuery(t,e,zo.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(u=>{s=s.insert(u.key,u)}),s))}}class lZ{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.It=r,this.Ui=new Pi(Yt),this.qi=new Th(s=>Cp(s),P0),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new DH(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function kH(n,t,e,i){return new lZ(n,t,e,i)}function OH(n,t){return oR.apply(this,arguments)}function oR(){return oR=(0,Ee.Z)(function*(n,t){const e=rt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const u=[],d=[];let p=an();for(const _ of r){u.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}for(const _ of s){d.push(_.batchId);for(const E of _.mutations)p=p.add(E.key)}return e.localDocuments.getDocuments(i,p).next(_=>({ji:_,removedBatchIds:u,addedBatchIds:d}))})})}),oR.apply(this,arguments)}function uZ(n,t){const e=rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(u,d,p,_){const E=p.batch,T=E.keys();let x=he.resolve();return T.forEach(N=>{x=x.next(()=>_.getEntry(d,N)).next(V=>{const Z=p.docVersions.get(N);Gt(null!==Z),V.version.compareTo(Z)<0&&(E.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),_.addEntry(V)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(d,E))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=an();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function RH(n){const t=rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function cZ(n,t){const e=rt(n),i=t.snapshotVersion;let r=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.Ui;const d=[];t.targetChanges.forEach((E,T)=>{const x=r.get(T);if(!x)return;d.push(e.Cs.removeMatchingKeys(s,E.removedDocuments,T).next(()=>e.Cs.addMatchingKeys(s,E.addedDocuments,T)));let N=x.withSequenceNumber(s.currentSequenceNumber);var V,Z,Q;t.targetMismatches.has(T)?N=N.withResumeToken(gr.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,i)),r=r.insert(T,N),Z=N,Q=E,(0===(V=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&d.push(e.Cs.updateTargetData(s,N))});let p=so(),_=an();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,E))}),d.push(NH(s,u,t.documentUpdates).next(E=>{p=E.Wi,_=E.zi})),!i.isEqual($t.min())){const E=e.Cs.getLastRemoteSnapshotVersion(s).next(T=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(E)}return he.waitFor(d).next(()=>u.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(e.Ui=r,s))}function NH(n,t,e){let i=an(),r=an();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let u=so();return e.forEach((d,p)=>{const _=s.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual($t.min())?(t.removeEntry(d,p.readTime),u=u.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(p),u=u.insert(d,p)):Ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Wi:u,zi:r}})}function dZ(n,t){const e=rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function D_(n,t){const e=rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(s=>s?(r=s,he.resolve(r)):e.Cs.allocateTargetId(i).next(u=>(r=new Sh(t,u,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function A_(n,t,e){return aR.apply(this,arguments)}function aR(){return aR=(0,Ee.Z)(function*(n,t,e){const i=rt(n),r=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!vh(u))throw u;Ke("LocalStore",`Failed to update sequence numbers for target ${t}: ${u}`)}i.Ui=i.Ui.remove(t),i.qi.delete(r.target)}),aR.apply(this,arguments)}function mD(n,t,e){const i=rt(n);let r=$t.min(),s=an();return i.persistence.runTransaction("Execute query","readonly",u=>function(d,p,_){const E=rt(d),T=E.qi.get(_);return void 0!==T?he.resolve(E.Ui.get(T)):E.Cs.getTargetData(p,_)}(i,u,Rs(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(u,d.targetId).next(p=>{s=p})}).next(()=>i.Li.getDocumentsMatchingQuery(u,t,e?r:$t.min(),e?s:an())).next(d=>(LH(i,yB(t),d),{documents:d,Hi:s})))}function PH(n,t){const e=rt(n),i=rt(e.Cs),r=e.Ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(u=>u?u.target:null))}function FH(n,t){const e=rt(n),i=e.Ki.get(t)||$t.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,WU(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(LH(e,t,r),r))}function LH(n,t,e){let i=n.Ki.get(t)||$t.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(t,i)}function lR(){return lR=(0,Ee.Z)(function*(n,t,e,i){const r=rt(n);let s=an(),u=so();for(const _ of e){const E=t.Ji(_.metadata.name);_.document&&(s=s.add(E));const T=t.Yi(_);T.setReadTime(t.Xi(_.metadata.readTime)),u=u.insert(E,T)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),p=yield D_(r,(_=i,Rs(__(En.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>NH(_,d,u).next(E=>(d.apply(_),E)).next(E=>r.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>r.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,E.Wi,E.zi)).next(()=>E.Wi)))}),lR.apply(this,arguments)}function fZ(n,t){return uR.apply(this,arguments)}function uR(){return uR=(0,Ee.Z)(function*(n,t,e=an()){const i=yield D_(n,Rs(JO(t.bundledQuery))),r=rt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const u=xr(t.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r.Ns.saveNamedQuery(s,t);const d=i.withResumeToken(gr.EMPTY_BYTE_STRING,u);return r.Ui=r.Ui.insert(d.targetId,d),r.Cs.updateTargetData(s,d).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,t))})}),uR.apply(this,arguments)}function VH(n,t){return`firestore_clients_${n}_${t}`}function UH(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function cR(n,t){return`firestore_targets_${n}_${t}`}class _D{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let s,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ue(r.error.code,r.error.message))),u?new _D(t,e,r.state,s):($i("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class eE{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ue(i.error.code,i.error.message))),s?new eE(t,i.state,r):($i("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class yD{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=rD();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=tB(i.activeTargetIds[u]),s=s.add(i.activeTargetIds[u]);return r?new yD(t,s):($i("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class dR{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new dR(e.clientId,e.onlineState):($i("SharedClientState",`Failed to parse online state: ${t}`),null)}}class hR{constructor(){this.activeTargetIds=rD()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fR{constructor(t,e,i,r,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Pi(Yt),this.started=!1,this.cr=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=VH(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new hR),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const s=t.getItem(VH(t.persistenceKey,r));if(s){const u=yD.Zi(r,s);u&&(t.ur=t.ur.insert(u.clientId,u))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(cR(this.persistenceKey,t));if(i){const r=eE.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(cR(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ke("SharedClientState","READ",t,e),e}setItem(t,e){Ke("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ke("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ke("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void $i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(s){let u=ro.at;if(null!=s)try{const d=JSON.parse(s);Gt("number"==typeof d),u=d}catch(d){$i("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(i.newValue);r!==ro.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new _D(this.currentUser,t,e,i),s=UH(this.persistenceKey,this.currentUser,t);this.setItem(s,r.tr())}Er(t){const e=UH(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=cR(this.persistenceKey,t),s=new eE(t,e,i);this.setItem(r,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return yD.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return _D.Zi(new Ar(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return eE.Zi(r,e)}yr(t){return dR.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,Ee.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),s=this.Ir(i),u=[],d=[];return s.forEach(p=>{r.has(p)||u.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(u,d).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=rD();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class BH{constructor(){this.Lr=new hR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new hR,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class pZ{qr(t){}shutdown(){}}class HH{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const gZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mZ{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class _Z extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,r,s){const u=this.ho(t,e);Ke("RestConnection","Sending: ",u,i);const d={};return this.lo(d,r,s),this.fo(t,u,d,i).then(p=>(Ke("RestConnection","Received: ",p),p),p=>{throw gp("RestConnection",`${t} failed with error: `,p,"url: ",u,"request:",i),p})}_o(t,e,i,r,s,u){return this.ao(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+h_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.oo}/v1/${e}:${gZ[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,u)=>{const d=new g4;d.setWithCredentials(!0),d.listenOnce(h4.COMPLETE,()=>{var _;try{switch(d.getLastErrorCode()){case AO.NO_ERROR:const E=d.getResponseJson();Ke("Connection","XHR received:",JSON.stringify(E)),s(E);break;case AO.TIMEOUT:Ke("Connection",'RPC "'+t+'" timed out'),u(new Ue(ye.DEADLINE_EXCEEDED,"Request time out"));break;case AO.HTTP_ERROR:const T=d.getStatus();if(Ke("Connection",'RPC "'+t+'" failed with status:',T,"response text:",d.getResponseText()),T>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=null===(_=x)||void 0===_?void 0:_.error;if(N&&N.status&&N.message){const V=function(Z){const Q=Z.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(Q)>=0?Q:ye.UNKNOWN}(N.status);u(new Ue(V,N.message))}else u(new Ue(ye.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ue(ye.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Ke("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=c4(),u=d4(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new p4({})),this.lo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const p=r.join("");Ke("Connection","Creating WebChannel: "+p,d);const _=s.createWebChannel(p,d);let E=!1,T=!1;const x=new mZ({Hr:V=>{T?Ke("Connection","Not sending because WebChannel is closed:",V):(E||(Ke("Connection","Opening WebChannel transport."),_.open(),E=!0),Ke("Connection","WebChannel sending:",V),_.send(V))},Jr:()=>_.close()}),N=(V,Z,Q)=>{V.listen(Z,Ae=>{try{Q(Ae)}catch(Be){setTimeout(()=>{throw Be},0)}})};return N(_,zS.EventType.OPEN,()=>{T||Ke("Connection","WebChannel transport opened.")}),N(_,zS.EventType.CLOSE,()=>{T||(T=!0,Ke("Connection","WebChannel transport closed"),x.io())}),N(_,zS.EventType.ERROR,V=>{T||(T=!0,gp("Connection","WebChannel transport errored:",V),x.io(new Ue(ye.UNAVAILABLE,"The operation could not be completed")))}),N(_,zS.EventType.MESSAGE,V=>{var Z;if(!T){const Q=V.data[0];Gt(!!Q);const Ae=Q,Be=Ae.error||(null===(Z=Ae[0])||void 0===Z?void 0:Z.error);if(Be){Ke("Connection","WebChannel received error:",Be);const He=Be.status;let We=function(gt){const Xt=nr[gt];if(void 0!==Xt)return NB(Xt)}(He),ct=Be.message;void 0===We&&(We=ye.INTERNAL,ct="Unknown error status: "+He+" with message "+Be.message),T=!0,x.io(new Ue(We,ct)),_.close()}else Ke("Connection","WebChannel received:",Q),x.ro(Q)}}),N(u,f4.STAT_EVENT,V=>{V.stat===BU.PROXY?Ke("Connection","Detected buffering proxy"):V.stat===BU.NOPROXY&&Ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function jH(){return typeof window<"u"?window:null}function vD(){return typeof document<"u"?document:null}function tE(n){return new lK(n,!0)}class pR{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&Ke("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class GH{constructor(t,e,i,r,s,u,d,p){this.Hs=t,this.vo=i,this.Vo=r,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new pR(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Ee.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,Ee.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,Ee.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===ye.RESOURCE_EXHAUSTED?($i(e.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===ye.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new Ue(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){t.state=0,t.start()}))}Qo(t){return Ke("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yZ extends GH{constructor(t,e,i,r,s,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,u),this.It=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function dK(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:_t(),r=t.targetChange.targetIds||[],s=function(p,_){return p.gt?(Gt(void 0===_||"string"==typeof _),gr.fromBase64String(_||"")):(Gt(void 0===_||_ instanceof Uint8Array),gr.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,d=u&&function(p){const _=void 0===p.code?ye.UNKNOWN:NB(p.code);return new Ue(_,p.message||"")}(u);e=new UB(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=mu(n,i.document.name),s=xr(i.document.updateTime),u=new Wr({mapValue:{fields:i.document.fields}}),d=li.newFoundDocument(r,s,u);e=new sD(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=mu(n,i.document),s=i.readTime?xr(i.readTime):$t.min(),u=li.newNoDocument(r,s);e=new sD([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in t){const i=t.documentRemove,r=mu(n,i.document);e=new sD([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return _t();{const i=t.filter,s=new eK(i.count||0);e=new VB(i.targetId,s)}}var p;return e}(this.It,t),i=function(r){if(!("targetChange"in r))return $t.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?$t.min():s.readTime?xr(s.readTime):$t.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=z0(this.It),e.addTarget=function(r,s){let u;const d=s.target;return u=JS(d)?{documents:ZB(r,d)}:{query:qO(r,d)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=GB(r,s.resumeToken):s.snapshotVersion.compareTo($t.min())>0&&(u.readTime=G0(r,s.snapshotVersion.toTimestamp())),u}(this.It,t);const i=function fK(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _t()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=z0(this.It),e.removeTarget=t,this.Bo(e)}}class vZ extends GH{constructor(t,e,i,r,s,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,u),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(Gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function hK(n,t){return n&&n.length>0?(Gt(void 0!==t),n.map(e=>function(i,r){let s=xr(i.updateTime?i.updateTime:r);return s.isEqual($t.min())&&(s=xr(r)),new Q4(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=xr(t.commitTime);return this.listener.Zo(i,e)}return Gt(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=z0(this.It),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>W0(this.It,i))};this.Bo(e)}}class wZ extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.ao(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ue(ye.UNKNOWN,r.toString())})}_o(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection._o(t,e,i,s,u,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(ye.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class CZ{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?($i(e),this.ou=!1):Ke("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class bZ{constructor(t,e,i,r,s){var u=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(d=>{i.enqueueAndForget((0,Ee.Z)(function*(){var p;Ec(u)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ee.Z)(function*(_){const E=rt(_);E._u.add(4),yield x_(E),E.gu.set("Unknown"),E._u.delete(4),yield nE(E)}),function(_){return p.apply(this,arguments)})(u))}))}),this.gu=new CZ(i,r)}}function nE(n){return mR.apply(this,arguments)}function mR(){return mR=(0,Ee.Z)(function*(n){if(Ec(n))for(const t of n.wu)yield t(!0)}),mR.apply(this,arguments)}function x_(n){return _R.apply(this,arguments)}function _R(){return _R=(0,Ee.Z)(function*(n){for(const t of n.wu)yield t(!1)}),_R.apply(this,arguments)}function wD(n,t){const e=rt(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),wR(e)?vR(e):k_(e).ko()&&yR(e,t))}function iE(n,t){const e=rt(n),i=k_(e);e.du.delete(t),i.ko()&&$H(e,t),0===e.du.size&&(i.ko()?i.Fo():Ec(e)&&e.gu.set("Unknown"))}function yR(n,t){n.yu.Mt(t.targetId),k_(n).zo(t)}function $H(n,t){n.yu.Mt(t),k_(n).Ho(t)}function vR(n){n.yu=new sK({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),se:t=>n.du.get(t)||null}),k_(n).start(),n.gu.uu()}function wR(n){return Ec(n)&&!k_(n).No()&&n.du.size>0}function Ec(n){return 0===rt(n)._u.size}function zH(n){n.yu=void 0}function IZ(n){return ER.apply(this,arguments)}function ER(){return ER=(0,Ee.Z)(function*(n){n.du.forEach((t,e)=>{yR(n,t)})}),ER.apply(this,arguments)}function TZ(n,t){return CR.apply(this,arguments)}function CR(){return CR=(0,Ee.Z)(function*(n,t){zH(n),wR(n)?(n.gu.hu(t),vR(n)):n.gu.set("Unknown")}),CR.apply(this,arguments)}function SZ(n,t,e){return bR.apply(this,arguments)}function bR(){return bR=(0,Ee.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof UB&&2===t.state&&t.cause)try{yield(i=(0,Ee.Z)(function*(r,s){const u=s.cause;for(const d of s.targetIds)r.du.has(d)&&(yield r.remoteSyncer.rejectListen(d,u),r.du.delete(d),r.yu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){Ke("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield ED(n,i)}else if(t instanceof sD?n.yu.Gt(t):t instanceof VB?n.yu.Yt(t):n.yu.Wt(t),!e.isEqual($t.min()))try{const i=yield RH(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const u=r.yu.te(s);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.du.get(p);_&&r.du.set(p,_.withResumeToken(d.resumeToken,s))}}),u.targetMismatches.forEach(d=>{const p=r.du.get(d);if(!p)return;r.du.set(d,p.withResumeToken(gr.EMPTY_BYTE_STRING,p.snapshotVersion)),$H(r,d);const _=new Sh(p.target,d,1,p.sequenceNumber);yR(r,_)}),r.remoteSyncer.applyRemoteEvent(u)}(n,e))}catch(i){Ke("RemoteStore","Failed to raise snapshot:",i),yield ED(n,i)}var i}),bR.apply(this,arguments)}function ED(n,t,e){return IR.apply(this,arguments)}function IR(){return IR=(0,Ee.Z)(function*(n,t,e){if(!vh(t))throw t;n._u.add(1),yield x_(n),n.gu.set("Offline"),e||(e=()=>RH(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield nE(n)}))}),IR.apply(this,arguments)}function WH(n,t){return t().catch(e=>ED(n,e,t))}function M_(n){return TR.apply(this,arguments)}function TR(){return TR=(0,Ee.Z)(function*(n){const t=rt(n),e=xh(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;DZ(t);)try{const r=yield dZ(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,AZ(t,r)}catch(r){yield ED(t,r)}qH(t)&&KH(t)}),TR.apply(this,arguments)}function DZ(n){return Ec(n)&&n.fu.length<10}function AZ(n,t){n.fu.push(t);const e=xh(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function qH(n){return Ec(n)&&!xh(n).No()&&n.fu.length>0}function KH(n){xh(n).start()}function xZ(n){return SR.apply(this,arguments)}function SR(){return SR=(0,Ee.Z)(function*(n){xh(n).eu()}),SR.apply(this,arguments)}function MZ(n){return DR.apply(this,arguments)}function DR(){return DR=(0,Ee.Z)(function*(n){const t=xh(n);for(const e of n.fu)t.Xo(e.mutations)}),DR.apply(this,arguments)}function kZ(n,t,e){return AR.apply(this,arguments)}function AR(){return AR=(0,Ee.Z)(function*(n,t,e){const i=n.fu.shift(),r=YO.from(i,t,e);yield WH(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield M_(n)}),AR.apply(this,arguments)}function OZ(n,t){return xR.apply(this,arguments)}function xR(){return xR=(0,Ee.Z)(function*(n,t){var e;t&&xh(n).Yo&&(yield(e=(0,Ee.Z)(function*(i,r){if(RB(s=r.code)&&s!==ye.ABORTED){const u=i.fu.shift();xh(i).Mo(),yield WH(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield M_(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),qH(n)&&KH(n)}),xR.apply(this,arguments)}function ZH(n,t){return MR.apply(this,arguments)}function MR(){return MR=(0,Ee.Z)(function*(n,t){const e=rt(n);e.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const i=Ec(e);e._u.add(3),yield x_(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield nE(e)}),MR.apply(this,arguments)}function kR(n,t){return OR.apply(this,arguments)}function OR(){return OR=(0,Ee.Z)(function*(n,t){const e=rt(n);t?(e._u.delete(2),yield nE(e)):t||(e._u.add(2),yield x_(e),e.gu.set("Unknown"))}),OR.apply(this,arguments)}function k_(n){return n.pu||(n.pu=function(t,e,i){const r=rt(t);return r.su(),new yZ(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:IZ.bind(null,n),Zr:TZ.bind(null,n),Wo:SZ.bind(null,n)}),n.wu.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.pu.Mo(),wR(n)?vR(n):n.gu.set("Unknown")):(yield n.pu.stop(),zH(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function xh(n){return n.Iu||(n.Iu=function(t,e,i){const r=rt(t);return r.su(),new vZ(e,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:xZ.bind(null,n),Zr:OZ.bind(null,n),tu:MZ.bind(null,n),Zo:kZ.bind(null,n)}),n.wu.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.Iu.Mo(),yield M_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class RR{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(t,e,i,r,s){const u=Date.now()+i,d=new RR(t,e,u,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ye.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O_(n,t){if($i("AsyncQueue",`${t}: ${n}`),vh(n))return new Ue(ye.UNAVAILABLE,`${t}: ${n}`);throw n}class R_{constructor(t){this.comparator=t?(e,i)=>t(e,i)||et.comparator(e.key,i.key):(e,i)=>et.comparator(e.key,i.key),this.keyedMap=U0(),this.sortedSet=new Pi(this.comparator)}static emptySet(t){return new R_(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof R_)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new R_;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class YH{constructor(){this.Tu=new Pi(et.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):_t():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class N_{constructor(t,e,i,r,s,u,d,p,_){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(t,e,i,r,s){const u=[];return e.forEach(d=>{u.push({type:0,doc:d})}),new N_(t,e,R_.emptySet(e),u,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&F0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class RZ{constructor(){this.Au=void 0,this.listeners=[]}}class NZ{constructor(){this.queries=new Th(t=>_B(t),F0),this.onlineState="Unknown",this.Ru=new Set}}function NR(n,t){return PR.apply(this,arguments)}function PR(){return PR=(0,Ee.Z)(function*(n,t){const e=rt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new RZ),r)try{s.Au=yield e.onListen(i)}catch(u){const d=O_(u,`Initialization of query '${HO(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&VR(e)}),PR.apply(this,arguments)}function FR(n,t){return LR.apply(this,arguments)}function LR(){return LR=(0,Ee.Z)(function*(n,t){const e=rt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const u=s.listeners.indexOf(t);u>=0&&(s.listeners.splice(u,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),LR.apply(this,arguments)}function PZ(n,t){const e=rt(n);let i=!1;for(const r of t){const u=e.queries.get(r.query);if(u){for(const d of u.listeners)d.Pu(r)&&(i=!0);u.Au=r}}i&&VR(e)}function FZ(n,t,e){const i=rt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function VR(n){n.Ru.forEach(t=>{t.next()})}class UR{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new N_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=N_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class LZ{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class QH{constructor(t){this.It=t}Ji(t){return mu(this.It,t)}Yi(t){return t.metadata.exists?KB(this.It,t.document,!1):li.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return xr(t)}}class VZ{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JH(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=En.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new QH(this.It);for(const r of t)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const u of r.metadata.queries){const d=(e.get(u)||an()).add(s);e.set(u,d)}}return e}complete(){var t=this;return(0,Ee.Z)(function*(){const e=yield function hZ(n,t,e,i){return lR.apply(this,arguments)}(t.localStore,new QH(t.It),t.documents,t.Mu.id),i=t.$u(t.documents);for(const r of t.queries)yield fZ(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function JH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class XH{constructor(t){this.key=t}}class e3{constructor(t){this.key=t}}class t3{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=an(),this.mutatedKeys=an(),this.Gu=vB(t),this.Qu=new R_(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new YH,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,u=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((E,T)=>{const x=r.get(E),N=jO(this.query,T)?T:null,V=!!x&&this.mutatedKeys.has(x.key),Z=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let Q=!1;x&&N?x.data.isEqual(N.data)?V!==Z&&(i.track({type:3,doc:N}),Q=!0):this.Hu(x,N)||(i.track({type:2,doc:N}),Q=!0,(p&&this.Gu(N,p)>0||_&&this.Gu(N,_)<0)&&(d=!0)):!x&&N?(i.track({type:0,doc:N}),Q=!0):x&&!N&&(i.track({type:1,doc:x}),Q=!0,(p||_)&&(d=!0)),Q&&(N?(u=u.add(N),s=Z?s.add(E):s.delete(E)):(u=u.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Qu:u,zu:i,$i:d,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort((_,E)=>function(T,x){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return N(T)-N(x)}(_.type,E.type)||this.Gu(_.doc,E.doc)),this.Ju(i);const u=e?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new N_(this.query,t.Qu,r,s,t.mutatedKeys,0===d,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new YH,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=an(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new e3(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new XH(i))}),e}tc(t){this.Uu=t.Hi,this.Ku=an();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return N_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class UZ{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class BZ{constructor(t){this.key=t,this.nc=!1}}class HZ{constructor(t,e,i,r,s,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Th(d=>_B(d),F0),this.rc=new Map,this.oc=new Set,this.uc=new Pi(et.comparator),this.cc=new Map,this.ac=new tR,this.hc={},this.lc=new Map,this.fc=kp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function jZ(n,t){return BR.apply(this,arguments)}function BR(){return BR=(0,Ee.Z)(function*(n,t){const e=uN(n);let i,r;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const u=yield D_(e.localStore,Rs(t));e.isPrimaryClient&&wD(e.remoteStore,u);const d=e.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield HR(e,t,i,"current"===d,u.resumeToken)}return r}),BR.apply(this,arguments)}function HR(n,t,e,i,r){return jR.apply(this,arguments)}function jR(){return jR=(0,Ee.Z)(function*(n,t,e,i,r){n._c=(T,x,N)=>{return(V=(0,Ee.Z)(function*(Z,Q,Ae,Be){let He=Q.view.Wu(Ae);He.$i&&(He=yield mD(Z.localStore,Q.query,!1).then(({documents:gt})=>Q.view.Wu(gt,He)));const We=Be&&Be.targetChanges.get(Q.targetId),ct=Q.view.applyChanges(He,Z.isPrimaryClient,We);return JR(Z,Q.targetId,ct.Xu),ct.snapshot}),function(Z,Q,Ae,Be){return V.apply(this,arguments)})(n,T,x,N);var V};const s=yield mD(n.localStore,t,!0),u=new t3(t,s.Hi),d=u.Wu(s.documents),p=j0.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),_=u.applyChanges(d,n.isPrimaryClient,p);JR(n,e,_.Xu);const E=new UZ(t,e,u);return n.ic.set(t,E),n.rc.has(e)?n.rc.get(e).push(t):n.rc.set(e,[t]),_.snapshot}),jR.apply(this,arguments)}function GZ(n,t){return GR.apply(this,arguments)}function GR(){return GR=(0,Ee.Z)(function*(n,t){const e=rt(n),i=e.ic.get(t),r=e.rc.get(i.targetId);if(r.length>1)return e.rc.set(i.targetId,r.filter(s=>!F0(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield A_(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),iE(e.remoteStore,i.targetId),P_(e,i.targetId)}).catch(yh))):(P_(e,i.targetId),yield A_(e.localStore,i.targetId,!0))}),GR.apply(this,arguments)}function $R(){return $R=(0,Ee.Z)(function*(n,t,e){const i=cN(n);try{const r=yield function(s,u){const d=rt(s),p=vi.now(),_=u.reduce((x,N)=>x.add(N.key),an());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=so(),V=an();return d.Gi.getEntries(x,_).next(Z=>{N=Z,N.forEach((Q,Ae)=>{Ae.isValidDocument()||(V=V.add(Q))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,N)).next(Z=>{E=Z;const Q=[];for(const Ae of u){const Be=X4(Ae,E.get(Ae.key).overlayedDocument);null!=Be&&Q.push(new wc(Ae.key,Be,lB(Be.value.mapValue),wi.exists(!0)))}return d.mutationQueue.addMutationBatch(x,p,Q,u)}).next(Z=>{T=Z;const Q=Z.applyToLocalDocumentSet(E,V);return d.documentOverlayCache.saveOverlays(x,Z.batchId,Q)})}).then(()=>({batchId:T.batchId,changes:FB(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,u,d){let p=s.hc[s.currentUser.toKey()];p||(p=new Pi(Yt)),p=p.insert(u,d),s.hc[s.currentUser.toKey()]=p}(i,r.batchId,e),yield Cc(i,r.changes),yield M_(i.remoteStore)}catch(r){const s=O_(r,"Failed to persist write");e.reject(s)}}),$R.apply(this,arguments)}function n3(n,t){return zR.apply(this,arguments)}function zR(){return zR=(0,Ee.Z)(function*(n,t){const e=rt(n);try{const i=yield cZ(e.localStore,t);t.targetChanges.forEach((r,s)=>{const u=e.cc.get(s);u&&(Gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.nc=!0:r.modifiedDocuments.size>0?Gt(u.nc):r.removedDocuments.size>0&&(Gt(u.nc),u.nc=!1))}),yield Cc(e,i,t)}catch(i){yield yh(i)}}),zR.apply(this,arguments)}function i3(n,t,e){const i=rt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ic.forEach((s,u)=>{const d=u.view.bu(t);d.snapshot&&r.push(d.snapshot)}),function(s,u){const d=rt(s);d.onlineState=u;let p=!1;d.queries.forEach((_,E)=>{for(const T of E.listeners)T.bu(u)&&(p=!0)}),p&&VR(d)}(i.eventManager,t),r.length&&i.sc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function zZ(n,t,e){return WR.apply(this,arguments)}function WR(){return WR=(0,Ee.Z)(function*(n,t,e){const i=rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.cc.get(t),s=r&&r.key;if(s){let u=new Pi(et.comparator);u=u.insert(s,li.newNoDocument(s,$t.min()));const d=an().add(s),p=new H0($t.min(),new Map,new qn(Yt),u,d);yield n3(i,p),i.uc=i.uc.remove(s),i.cc.delete(t),XR(i)}else yield A_(i.localStore,t,!1).then(()=>P_(i,t,e)).catch(yh)}),WR.apply(this,arguments)}function WZ(n,t){return qR.apply(this,arguments)}function qR(){return qR=(0,Ee.Z)(function*(n,t){const e=rt(n),i=t.batch.batchId;try{const r=yield uZ(e.localStore,t);QR(e,i,null),YR(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Cc(e,r)}catch(r){yield yh(r)}}),qR.apply(this,arguments)}function qZ(n,t,e){return KR.apply(this,arguments)}function KR(){return KR=(0,Ee.Z)(function*(n,t,e){const i=rt(n);try{const r=yield function(s,u){const d=rt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,u).next(E=>(Gt(null!==E),_=E.keys(),d.mutationQueue.removeMutationBatch(p,E))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,t);QR(i,t,e),YR(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Cc(i,r)}catch(r){yield yh(r)}}),KR.apply(this,arguments)}function ZR(){return ZR=(0,Ee.Z)(function*(n,t){const e=rt(n);Ec(e.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const u=rt(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.lc.get(i)||[];r.push(t),e.lc.set(i,r)}catch(i){const r=O_(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),ZR.apply(this,arguments)}function YR(n,t){(n.lc.get(t)||[]).forEach(e=>{e.resolve()}),n.lc.delete(t)}function QR(n,t,e){const i=rt(n);let r=i.hc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.hc[i.currentUser.toKey()]=r}}function P_(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.rc.get(t))n.ic.delete(i),e&&n.sc.wc(i,e);n.rc.delete(t),n.isPrimaryClient&&n.ac.ls(t).forEach(i=>{n.ac.containsKey(i)||r3(n,i)})}function r3(n,t){n.oc.delete(t.path.canonicalString());const e=n.uc.get(t);null!==e&&(iE(n.remoteStore,e),n.uc=n.uc.remove(t),n.cc.delete(e),XR(n))}function JR(n,t,e){for(const i of e)i instanceof XH?(n.ac.addReference(i.key,t),ZZ(n,i)):i instanceof e3?(Ke("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,t),n.ac.containsKey(i.key)||r3(n,i.key)):_t()}function ZZ(n,t){const e=t.key,i=e.path.canonicalString();n.uc.get(e)||n.oc.has(i)||(Ke("SyncEngine","New document in limbo: "+e),n.oc.add(i),XR(n))}function XR(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const t=n.oc.values().next().value;n.oc.delete(t);const e=new et(En.fromString(t)),i=n.fc.next();n.cc.set(i,new BZ(e)),n.uc=n.uc.insert(e,i),wD(n.remoteStore,new Sh(Rs(__(e.path)),i,2,ro.at))}}function Cc(n,t,e){return eN.apply(this,arguments)}function eN(){return eN=(0,Ee.Z)(function*(n,t,e){const i=rt(n),r=[],s=[],u=[];var d;i.ic.isEmpty()||(i.ic.forEach((d,p)=>{u.push(i._c(p,t,e).then(_=>{if((_||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){r.push(_);const E=sR.Ci(p.targetId,_);s.push(E)}}))}),yield Promise.all(u),i.sc.Wo(r),yield(d=(0,Ee.Z)(function*(p,_){const E=rt(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>he.forEach(_,x=>he.forEach(x.Si,N=>E.persistence.referenceDelegate.addReference(T,x.targetId,N)).next(()=>he.forEach(x.Di,N=>E.persistence.referenceDelegate.removeReference(T,x.targetId,N)))))}catch(T){if(!vh(T))throw T;Ke("LocalStore","Failed to update sequence numbers: "+T)}for(const T of _){const x=T.targetId;if(!T.fromCache){const N=E.Ui.get(x),Z=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);E.Ui=E.Ui.insert(x,Z)}}}),function(p,_){return d.apply(this,arguments)})(i.localStore,s))}),eN.apply(this,arguments)}function YZ(n,t){return tN.apply(this,arguments)}function tN(){return tN=(0,Ee.Z)(function*(n,t){const e=rt(n);if(!e.currentUser.isEqual(t)){Ke("SyncEngine","User change. New user:",t.toKey());const i=yield OH(e.localStore,t);e.currentUser=t,(r=e).lc.forEach(u=>{u.forEach(d=>{d.reject(new Ue(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Cc(e,i.ji)}var r}),tN.apply(this,arguments)}function QZ(n,t){const e=rt(n),i=e.cc.get(t);if(i&&i.nc)return an().add(i.key);{let r=an();const s=e.rc.get(t);if(!s)return r;for(const u of s){const d=e.ic.get(u);r=r.unionWith(d.view.ju)}return r}}function JZ(n,t){return nN.apply(this,arguments)}function nN(){return nN=(0,Ee.Z)(function*(n,t){const e=rt(n),i=yield mD(e.localStore,t.query,!0),r=t.view.tc(i);return e.isPrimaryClient&&JR(e,t.targetId,r.Xu),r}),nN.apply(this,arguments)}function XZ(n,t){return iN.apply(this,arguments)}function iN(){return iN=(0,Ee.Z)(function*(n,t){const e=rt(n);return FH(e.localStore,t).then(i=>Cc(e,i))}),iN.apply(this,arguments)}function e5(n,t,e,i){return rN.apply(this,arguments)}function rN(){return rN=(0,Ee.Z)(function*(n,t,e,i){const r=rt(n),s=yield function(u,d){const p=rt(u),_=rt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>_.Tn(E,d).next(T=>T?p.localDocuments.getDocuments(E,T):he.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield M_(r.remoteStore):"acknowledged"===e||"rejected"===e?(QR(r,t,i||null),YR(r,t),d=t,rt(rt(r.localStore).mutationQueue).An(d)):_t(),yield Cc(r,s)):Ke("SyncEngine","Cannot apply mutation batch with id: "+t)}),rN.apply(this,arguments)}function sN(){return sN=(0,Ee.Z)(function*(n,t){const e=rt(n);if(uN(e),cN(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield s3(e,i.toArray());e.dc=!0,yield kR(e.remoteStore,!0);for(const s of r)wD(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let r=Promise.resolve();e.rc.forEach((s,u)=>{e.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(P_(e,u),A_(e.localStore,u,!0))),iE(e.remoteStore,u)}),yield r,yield s3(e,i),function(s){const u=rt(s);u.cc.forEach((d,p)=>{iE(u.remoteStore,p)}),u.ac.fs(),u.cc=new Map,u.uc=new Pi(et.comparator)}(e),e.dc=!1,yield kR(e.remoteStore,!1)}}),sN.apply(this,arguments)}function s3(n,t,e){return oN.apply(this,arguments)}function oN(){return oN=(0,Ee.Z)(function*(n,t,e){const i=rt(n),r=[],s=[];for(const u of t){let d;const p=i.rc.get(u);if(p&&0!==p.length){d=yield D_(i.localStore,Rs(p[0]));for(const _ of p){const E=i.ic.get(_),T=yield JZ(i,E);T.snapshot&&s.push(T.snapshot)}}else{const _=yield PH(i.localStore,u);d=yield D_(i.localStore,_),yield HR(i,o3(_),u,!1,d.resumeToken)}r.push(d)}return i.sc.Wo(s),r}),oN.apply(this,arguments)}function o3(n){return gB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function n5(n){const t=rt(n);return rt(rt(t.localStore).persistence).vi()}function i5(n,t,e,i){return aN.apply(this,arguments)}function aN(){return aN=(0,Ee.Z)(function*(n,t,e,i){const r=rt(n);if(r.dc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const u=yield FH(r.localStore,yB(s[0])),d=H0.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,gr.EMPTY_BYTE_STRING);yield Cc(r,u,d);break}case"rejected":yield A_(r.localStore,t,!0),P_(r,t,i);break;default:_t()}}),aN.apply(this,arguments)}function r5(n,t,e){return lN.apply(this,arguments)}function lN(){return lN=(0,Ee.Z)(function*(n,t,e){const i=uN(n);if(i.dc){for(const r of t){if(i.rc.has(r)){Ke("SyncEngine","Adding an already active target "+r);continue}const s=yield PH(i.localStore,r),u=yield D_(i.localStore,s);yield HR(i,o3(s),u.targetId,!1,u.resumeToken),wD(i.remoteStore,u)}for(const r of e)i.rc.has(r)&&(yield A_(i.localStore,r,!1).then(()=>{iE(i.remoteStore,r),P_(i,r)}).catch(yh))}}),lN.apply(this,arguments)}function uN(n){const t=rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=n3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QZ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zZ.bind(null,t),t.sc.Wo=PZ.bind(null,t.eventManager),t.sc.wc=FZ.bind(null,t.eventManager),t}function cN(n){const t=rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WZ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qZ.bind(null,t),t}class a3{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ee.Z)(function*(){e.It=tE(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return kH(this.persistence,new MH,t.initialUser,this.It)}yc(t){return new AH(pD.Bs,this.It)}gc(t){return new BH}terminate(){var t=this;return(0,Ee.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class l3 extends a3{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield cN(i.Ac.syncEngine),yield M_(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return kH(this.persistence,new MH,t.initialUser,this.It)}Tc(t,e){return new KK(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new k4(e,this.persistence);return new M4(t.asyncQueue,i)}yc(t){const e=rR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?oo.withCacheSize(this.cacheSizeBytes):oo.DEFAULT;return new iR(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,jH(),vD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(t){return new BH}}class o5 extends l3{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield e().call(i,t);const r=i.Ac.syncEngine;i.sharedClientState instanceof fR&&(i.sharedClientState.syncEngine={Fr:e5.bind(null,r),$r:i5.bind(null,r),Br:r5.bind(null,r),vi:n5.bind(null,r),Mr:XZ.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,Ee.Z)(function*(u){yield function t5(n,t){return sN.apply(this,arguments)}(i.Ac.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start():u||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(u&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():u||i.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}gc(t){const e=jH();if(!fR.C(e))throw new Ue(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=rR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new fR(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class dN{initialize(t,e){var i=this;return(0,Ee.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>i3(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=YZ.bind(null,i.syncEngine),yield kR(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new NZ}createDatastore(t){const e=tE(t.databaseInfo.databaseId),i=new _Z(t.databaseInfo);return new wZ(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>i3(this.syncEngine,d,0),u=HH.C()?new HH:new pZ,new bZ(e,i,r,s,u);var e,i,r,s,u}createSyncEngine(t,e){return function(i,r,s,u,d,p,_){const E=new HZ(i,r,s,u,d,p);return _&&(E.dc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ee.Z)(function*(e){const i=rt(e);Ke("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield x_(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function hN(n,t,e){if(!e)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function u3(n,t,e,i){if(!0===t&&!0===i)throw new Ue(ye.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function c3(n){if(!et.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function d3(n){if(et.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":_t()}function mn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ue(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=CD(n);throw new Ue(ye.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function h3(n,t){if(t<=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}const f3=new Map;class p3{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ue(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ue(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,u3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rE{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p3(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new y4;switch(e.type){case"gapi":return new C4(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ue(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=f3.get(t);e&&(Ke("ComponentProvider","Removing Datastore"),f3.delete(t),e.terminate())}(this),Promise.resolve()}}class pi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new pi(this.firestore,t,this._key)}}class hs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new hs(this.firestore,t,this._query)}}class yu extends hs{constructor(t,e,i){super(t,e,__(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new pi(this.firestore,null,new et(t))}withConverter(t){return new yu(this.firestore,t,this._path)}}function m3(n,t,...e){if(n=(0,L.m9)(n),hN("collection","path",t),n instanceof rE){const i=En.fromString(t,...e);return d3(i),new yu(n,null,i)}{if(!(n instanceof pi||n instanceof yu))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(En.fromString(t,...e));return d3(i),new yu(n.firestore,null,i)}}function bD(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=$U.R()),hN("doc","path",t),n instanceof rE){const i=En.fromString(t,...e);return c3(i),new pi(n,null,new et(i))}{if(!(n instanceof pi||n instanceof yu))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(En.fromString(t,...e));return c3(i),new pi(n.firestore,n instanceof yu?n.converter:null,new et(i))}}function _3(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof pi||n instanceof yu)&&(t instanceof pi||t instanceof yu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function fN(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof hs&&t instanceof hs&&n.firestore===t.firestore&&F0(n._query,t._query)&&n.converter===t.converter}function y3(n,t=10240){let e=0;return{read:()=>(0,Ee.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ID{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):$i("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class l5{constructor(t,e){this.Pc=t,this.It=e,this.metadata=new pr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,Ee.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,Ee.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),r=Number(i);isNaN(r)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(r);return new LZ(JSON.parse(s),e.length+r)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,Ee.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,Ee.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class d5{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ue(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ee.Z)(function*(s,u){const d=rt(s),p=z0(d.It)+"/documents",_={documents:u.map(N=>$0(d.It,N))},E=yield d._o("BatchGetDocuments",p,_,u.length),T=new Map;E.forEach(N=>{const V=function cK(n,t){return"found"in t?function(e,i){Gt(!!i.found);const r=mu(e,i.found.name),s=xr(i.found.updateTime),u=new Wr({mapValue:{fields:i.found.fields}});return li.newFoundDocument(r,s,u)}(n,t):"missing"in t?function(e,i){Gt(!!i.missing),Gt(!!i.readTime);const r=mu(e,i.missing),s=xr(i.readTime);return li.newNoDocument(r,s)}(n,t):_t()}(d.It,N);T.set(V.key.toString(),V)});const x=[];return u.forEach(N=>{const V=T.get(N.toString());Gt(!!V),x.push(V)}),x}),function(s,u){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new C_(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=et.fromPath(r);t.mutations.push(new GO(s,t.precondition(s)))}),yield(i=(0,Ee.Z)(function*(r,s){const u=rt(r),d=z0(u.It)+"/documents",p={writes:s.map(_=>W0(u.It,_))};yield u.ao("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw _t();e=$t.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ue(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual($t.min())?wi.exists(!1):wi.updateTime(e):wi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual($t.min()))throw new Ue(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(e)}return wi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class h5{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.kc=i.maxAttempts,this.xo=new pR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,Ee.Z)(function*(){const e=new d5(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Fc(s)}))}).catch(r=>{t.Fc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!M0(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!RB(e)}return!1}}class f5{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Ar.UNAUTHENTICATED,this.clientId=$U.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,Ee.Z)(function*(d){Ke("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(Ke("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var t=this;return(0,Ee.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=O_(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function v3(n,t){return pN.apply(this,arguments)}function pN(){return pN=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ee.Z)(function*(s){i.isEqual(s)||(yield OH(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),pN.apply(this,arguments)}function w3(n,t){return gN.apply(this,arguments)}function gN(){return gN=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield mN(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>ZH(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>ZH(t.remoteStore,s)),n.onlineComponents=t}),gN.apply(this,arguments)}function mN(n){return _N.apply(this,arguments)}function _N(){return _N=(0,Ee.Z)(function*(n){return n.offlineComponents||(Ke("FirestoreClient","Using default OfflineComponentProvider"),yield v3(n,new a3)),n.offlineComponents}),_N.apply(this,arguments)}function TD(n){return yN.apply(this,arguments)}function yN(){return yN=(0,Ee.Z)(function*(n){return n.onlineComponents||(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield w3(n,new dN)),n.onlineComponents}),yN.apply(this,arguments)}function E3(n){return mN(n).then(t=>t.persistence)}function SD(n){return mN(n).then(t=>t.localStore)}function vN(n){return TD(n).then(t=>t.remoteStore)}function wN(n){return TD(n).then(t=>t.syncEngine)}function F_(n){return EN.apply(this,arguments)}function EN(){return EN=(0,Ee.Z)(function*(n){const t=yield TD(n),e=t.eventManager;return e.onListen=jZ.bind(null,t.syncEngine),e.onUnlisten=GZ.bind(null,t.syncEngine),e}),EN.apply(this,arguments)}function b3(n,t,e={}){const i=new pr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,u,d,p){const _=new ID({next:T=>{s.enqueueAndForget(()=>FR(r,E));const x=T.docs.has(u);!x&&T.fromCache?p.reject(new Ue(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&d&&"server"===d.source?p.reject(new Ue(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new UR(__(u.path),_,{includeMetadataChanges:!0,Nu:!0});return NR(r,E)}(yield F_(n),n.asyncQueue,t,e,i)})),i.promise}function I3(n,t,e={}){const i=new pr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,u,d,p){const _=new ID({next:T=>{s.enqueueAndForget(()=>FR(r,E)),T.fromCache&&"server"===d.source?p.reject(new Ue(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new UR(u,_,{includeMetadataChanges:!0,Nu:!0});return NR(r,E)}(yield F_(n),n.asyncQueue,t,e,i)})),i.promise}class E5{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new pR(this,"async_queue_retry"),this.Wc=()=>{const e=vD();e&&Ke("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=vD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;const e=vD();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.Uc)return new Promise(()=>{});const e=new pr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,Ee.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!vh(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,$i("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=RR.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.qc.push(r),r}zc(){this.Kc&&_t()}verifyOperationInProgress(){}Xc(){var t=this;return(0,Ee.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.qc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.qc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.qc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.qc.indexOf(t);this.qc.splice(e,1)}}function CN(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class C5{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class gi extends rE{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new E5,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||T3(this),this._firestoreClient.terminate()}}function zi(n){return n._firestoreClient||T3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function T3(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new N4(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new f5(n._authCredentials,n._appCheckCredentials,n._queue,i)}function S3(n,t,e){const i=new pr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield v3(n,e),yield w3(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(u=s).name?u.code===ye.FAILED_PRECONDITION||u.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;gp("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var u})).then(()=>i.promise)}function D3(n){if(n._initialized||n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vu(gr.fromBase64String(t))}catch(e){throw new Ue(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new vu(gr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class bc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ue(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Rp{constructor(t){this._methodName=t}}class DD{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ue(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ue(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Yt(this._lat,t._lat)||Yt(this._long,t._long)}}const O5=/^__.*__$/;class R5{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new wc(t,this.data,this.fieldMask,e,this.fieldTransforms):new E_(t,this.data,e,this.fieldTransforms)}}class A3{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new wc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function x3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class AD{constructor(t,e,i,r,s,u){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new AD(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.ua(t),r}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return kD(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(x3(this.sa)&&O5.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class N5{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||tE(t)}da(t,e,i,r=!1){return new AD({sa:t,methodName:e,fa:i,path:Ni.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Np(n){const t=n._freezeSettings(),e=tE(n._databaseId);return new N5(n._databaseId,!!t.ignoreUndefinedProperties,e)}function xD(n,t,e,i,r,s={}){const u=n.da(s.merge||s.mergeFields?2:0,t,e,r);SN("Data must be an object, but it was:",u,i);const d=O3(i,u);let p,_;if(s.merge)p=new Wo(u.fieldMask),_=u.fieldTransforms;else if(s.mergeFields){const E=[];for(const T of s.mergeFields){const x=DN(t,T,e);if(!u.contains(x))throw new Ue(ye.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);N3(E,x)||E.push(x)}p=new Wo(E),_=u.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,_=u.fieldTransforms;return new R5(new Wr(d),p,_)}class sE extends Rp{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof sE}}function M3(n,t,e){return new AD({sa:3,fa:t.settings.fa,methodName:n._methodName,oa:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class bN extends Rp{_toFieldTransform(t){return new L0(t.path,new v_)}isEqual(t){return t instanceof bN}}class P5 extends Rp{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=M3(this,t,!0),i=this._a.map(s=>Pp(s,e)),r=new bp(i);return new L0(t.path,r)}isEqual(t){return this===t}}class F5 extends Rp{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=M3(this,t,!0),i=this._a.map(s=>Pp(s,e)),r=new Ip(i);return new L0(t.path,r)}isEqual(t){return this===t}}class L5 extends Rp{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new w_(t.It,CB(t.It,this.wa));return new L0(t.path,e)}isEqual(t){return this===t}}function IN(n,t,e,i){const r=n.da(1,t,e);SN("Data must be an object, but it was:",r,i);const s=[],u=Wr.empty();yp(i,(p,_)=>{const E=MD(t,p,e);_=(0,L.m9)(_);const T=r.ca(E);if(_ instanceof sE)s.push(E);else{const x=Pp(_,T);null!=x&&(s.push(E),u.set(E,x))}});const d=new Wo(s);return new A3(u,d,r.fieldTransforms)}function TN(n,t,e,i,r,s){const u=n.da(1,t,e),d=[DN(t,i,e)],p=[r];if(s.length%2!=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(DN(t,s[x])),p.push(s[x+1]);const _=[],E=Wr.empty();for(let x=d.length-1;x>=0;--x)if(!N3(_,d[x])){const N=d[x];let V=p[x];V=(0,L.m9)(V);const Z=u.ca(N);if(V instanceof sE)_.push(N);else{const Q=Pp(V,Z);null!=Q&&(_.push(N),E.set(N,Q))}}const T=new Wo(_);return new A3(E,T,u.fieldTransforms)}function k3(n,t,e,i=!1){return Pp(e,n.da(i?4:3,t))}function Pp(n,t){if(R3(n=(0,L.m9)(n)))return SN("Unsupported field value:",t,n),O3(n,t);if(n instanceof Rp)return function(e,i){if(!x3(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const u of e){let d=Pp(u,i.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return CB(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=vi.fromDate(e);return{timestampValue:G0(i.It,r)}}if(e instanceof vi){const r=new vi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:G0(i.It,r)}}if(e instanceof DD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vu)return{bytesValue:GB(i.It,e._byteString)};if(e instanceof pi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:$O(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${CD(e)}`)}(n,t)}function O3(n,t){const e={};return JU(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yp(n,(i,r)=>{const s=Pp(r,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function R3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vi||n instanceof DD||n instanceof vu||n instanceof pi||n instanceof Rp)}function SN(n,t,e){if(!R3(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=CD(e);throw t.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function DN(n,t,e){if((t=(0,L.m9)(t))instanceof bc)return t._internalPath;if("string"==typeof t)return MD(n,t);throw kD("Field path arguments must be of type string or ",n,!1,void 0,e)}const V5=new RegExp("[~\\*/\\[\\]]");function MD(n,t,e){if(t.search(V5)>=0)throw kD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new bc(...t.split("."))._internalPath}catch{throw kD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function kD(n,t,e,i,r){const s=i&&!i.isEmpty(),u=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${i}`),u&&(p+=` in document ${r}`),p+=")"),new Ue(ye.INVALID_ARGUMENT,d+n+p)}function N3(n,t){return n.some(e=>e.isEqual(t))}class oE{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new U5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(OD("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class U5 extends oE{data(){return super.data()}}function OD(n,t){return"string"==typeof t?MD(n,t):t instanceof bc?t._internalPath:t._delegate._internalPath}function P3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aE{}function Mh(n,...t){for(const e of t)n=e._apply(n);return n}class B5 extends aE{constructor(t,e,i){super(),this.ma=t,this.ga=e,this.ya=i,this.type="where"}_apply(t){const e=Np(t.firestore),i=function(r,s,u,d,p,_,E){let T;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){H3(E,_);const N=[];for(const V of E)N.push(B3(d,r,V));T={arrayValue:{values:N}}}else T=B3(d,r,E)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||H3(E,_),T=k3(u,"where",E,"in"===_||"not-in"===_);const x=qr.create(p,_,T);return function(N,V){if(V.dt()){const Q=UO(N);if(null!==Q&&!Q.isEqual(V.field))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Q.toString()}' and '${V.field.toString()}'`);const Ae=VO(N);null!==Ae&&j3(0,V.field,Ae)}const Z=function(Q,Ae){for(const Be of Q.filters)if(Ae.indexOf(Be.op)>=0)return Be.op;return null}(N,function(Q){switch(Q){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(V.op));if(null!==Z)throw new Ue(ye.INVALID_ARGUMENT,Z===V.op?`Invalid query. You cannot use more than one '${V.op.toString()}' filter.`:`Invalid query. You cannot use '${V.op.toString()}' filters with '${Z.toString()}' filters.`)}(r,x),x}(t._query,0,e,t.firestore._databaseId,this.ma,this.ga,this.ya);return new hs(t.firestore,t.converter,function(r,s){const u=r.filters.concat([s]);return new vc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),u,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class j5 extends aE{constructor(t,e){super(),this.ma=t,this.pa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new m_(r,s);return function(d,p){if(null===VO(d)){const _=UO(d);null!==_&&j3(0,_,p.field)}}(i,u),u}(t._query,this.ma,this.pa);return new hs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new vc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class F3 extends aE{constructor(t,e,i){super(),this.type=t,this.Ia=e,this.Ta=i}_apply(t){return new hs(t.firestore,t.converter,eD(t._query,this.Ia,this.Ta))}}class L3 extends aE{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=U3(t,this.type,this.Ea,this.Aa);return new hs(t.firestore,t.converter,(r=e,new vc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class V3 extends aE{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=U3(t,this.type,this.Ea,this.Aa);return new hs(t.firestore,t.converter,(r=e,new vc((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function U3(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof oE)return function(r,s,u,d,p){if(!d)throw new Ue(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const _=[];for(const E of y_(r))if(E.field.isKeyField())_.push(Ep(s,d.key));else{const T=d.data.field(E.field);if(PO(T))throw new Ue(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=E.field.canonicalString();throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}_.push(T)}return new Ih(_,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Np(n.firestore);return function(s,u,d,p,_,E){const T=s.explicitOrderBy;if(_.length>T.length)throw new Ue(ye.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let N=0;N<_.length;N++){const V=_[N];if(T[N].field.isKeyField()){if("string"!=typeof V)throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof V}`);if(!BO(s)&&-1!==V.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${V}' contains a slash.`);const Z=s.path.child(En.fromString(V));if(!et.isDocumentKey(Z))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const Q=new et(Z);x.push(Ep(u,Q))}else{const Z=k3(d,p,V);x.push(Z)}}return new Ih(x,E)}(n._query,n.firestore._databaseId,r,t,e,i)}}function B3(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BO(t)&&-1!==e.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(En.fromString(e));if(!et.isDocumentKey(i))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ep(n,new et(i))}if(e instanceof pi)return Ep(n,e._key);throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CD(e)}.`)}function H3(n,t){if(!Array.isArray(n)||0===n.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function j3(n,t,e){if(!e.isEqual(t))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class AN{convertValue(t,e="none"){switch(wp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(vp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw _t()}}convertObject(t,e){const i={};return yp(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new DD(Fi(t.latitude),Fi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=eB(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(x0(t));default:return null}}convertTimestamp(t){const e=wh(t);return new vi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=En.fromString(t);Gt(JB(i));const r=new Eh(i.get(1),i.get(3)),s=new et(i.popFirst(5));return r.isEqual(e)||$i(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function RD(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class Y5 extends AN{constructor(t){super(),this.firestore=t}convertBytes(t){return new vu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new pi(this.firestore,null,e)}}class Fp{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ic extends oE{constructor(t,e,i,r,s,u){super(t,e,i,r,u),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new lE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(OD("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class lE extends Ic{data(t={}){return super.data(t)}}class kh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Fp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new lE(this._firestore,this._userDataWriter,i.key,i,new Fp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ue(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new lE(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Fp(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const d=new lE(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Fp(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),_=s.indexOf(u.doc.key)),{type:Q5(u.type),doc:d,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Q5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function G3(n,t){return n instanceof Ic&&t instanceof Ic?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof kh&&t instanceof kh&&n._firestore===t._firestore&&fN(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class Oh extends AN{constructor(t){super(),this.firestore=t}convertBytes(t){return new vu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new pi(this.firestore,null,e)}}function $3(n,t,e){n=mn(n,pi);const i=mn(n.firestore,gi),r=RD(n.converter,t,e);return L_(i,[xD(Np(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,wi.none())])}function z3(n,t,e,...i){n=mn(n,pi);const r=mn(n.firestore,gi),s=Np(r);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof bc?TN(s,"updateDoc",n._key,t,e,i):IN(s,"updateDoc",n._key,t),L_(r,[u.toMutation(n._key,wi.exists(!0))])}function W3(n,...t){var e,i,r;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof t[u]||CN(t[u])||(s=t[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(CN(t[u])){const T=t[u];t[u]=null===(e=T.next)||void 0===e?void 0:e.bind(T),t[u+1]=null===(i=T.error)||void 0===i?void 0:i.bind(T),t[u+2]=null===(r=T.complete)||void 0===r?void 0:r.bind(T)}let p,_,E;if(n instanceof pi)_=mn(n.firestore,gi),E=__(n._key.path),p={next:T=>{t[u]&&t[u](xN(_,n,T))},error:t[u+1],complete:t[u+2]};else{const T=mn(n,hs);_=mn(T.firestore,gi),E=T._query;const x=new Oh(_);p={next:N=>{t[u]&&t[u](new kh(_,x,T,N))},error:t[u+1],complete:t[u+2]},P3(n._query)}return function(T,x,N,V){const Z=new ID(V),Q=new UR(x,Z,N);return T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return NR(yield F_(T),Q)})),()=>{Z.bc(),T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return FR(yield F_(T),Q)}))}}(zi(_),E,d,p)}function L_(n,t){return function(e,i){const r=new pr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function $Z(n,t,e){return $R.apply(this,arguments)}(yield wN(e),i,r)})),r.promise}(zi(n),t)}function xN(n,t,e){const i=e.docs.get(t._key),r=new Oh(n);return new Ic(n,r,t._key,i,new Fp(e.hasPendingWrites,e.fromCache),t.converter)}const a8={maxAttempts:5};class q3{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Np(t)}set(t,e,i){this._verifyNotCommitted();const r=Rh(t,this._firestore),s=RD(r.converter,e,i),u=xD(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,wi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Rh(t,this._firestore);let u;return u="string"==typeof(e=(0,L.m9)(e))||e instanceof bc?TN(this._dataReader,"WriteBatch.update",s._key,e,i,r):IN(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(u.toMutation(s._key,wi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Rh(t,this._firestore);return this._mutations=this._mutations.concat(new C_(e._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rh(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Ue(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class l8 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Np(t)}get(t){const e=Rh(t,this._firestore),i=new Y5(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return _t();const s=r[0];if(s.isFoundDocument())return new oE(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new oE(this._firestore,i,e._key,null,e.converter);throw _t()})}set(t,e,i){const r=Rh(t,this._firestore),s=RD(r.converter,e,i),u=xD(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(t,e,i,...r){const s=Rh(t,this._firestore);let u;return u="string"==typeof(e=(0,L.m9)(e))||e instanceof bc?TN(this._dataReader,"Transaction.update",s._key,e,i,r):IN(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,u),this}delete(t){const e=Rh(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Rh(t,this._firestore),i=new Oh(this._firestore);return super.get(t).then(r=>new Ic(this._firestore,i,e._key,r._document,new Fp(!1,!1),e.converter))}}function MN(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function Z3(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function Y3(){if(!function O4(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){h_=Vr.SDK_VERSION,(0,Vr._registerComponent)(new Pa.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),u=new gi(new w4(e.getProvider("auth-internal")),new b4(e.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ue(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(d.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),u._setSettings(r),u},"PUBLIC").setMultipleInstances(!0)),(0,Vr.registerVersion)(HU,"3.7.3",n),(0,Vr.registerVersion)(HU,"3.7.3","esm2017")}();class uE{constructor(t){this._delegate=t}static fromBase64String(t){return Y3(),new uE(vu.fromBase64String(t))}static fromUint8Array(t){return Z3(),new uE(vu.fromUint8Array(t))}toBase64(){return Y3(),this._delegate.toBase64()}toUint8Array(){return Z3(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kN(n){return function _8(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class y8{enableIndexedDbPersistence(t,e){return function I5(n,t){D3(n=mn(n,gi));const e=zi(n),i=n._freezeSettings(),r=new dN;return S3(e,r,new l3(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function T5(n){D3(n=mn(n,gi));const t=zi(n),e=n._freezeSettings(),i=new dN;return S3(t,i,new o5(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function S5(n){if(n._initialized&&!n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(e=(0,Ee.Z)(function*(i){if(!Fl.C())return Promise.resolve();const r=i+"main";yield Fl.delete(r)}),function(i){return e.apply(this,arguments)})(rR(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class Q3{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Eh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&gp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function g3(n,t,e,i={}){var r;const s=(n=mn(n,rE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&gp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let u,d;if("string"==typeof i.mockUserToken)u=i.mockUserToken,d=Ar.MOCK_USER;else{u=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ue(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ar(p)}n._authCredentials=new v4(new jU(u,d))}}(this._delegate,t,e,i)}enableNetwork(){return function A5(n){return function p5(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield E3(n),e=yield vN(n);return t.setNetworkEnabled(!0),function(i){const r=rt(i);return r._u.delete(0),nE(r)}(e)}))}(zi(n=mn(n,gi)))}(this._delegate)}disableNetwork(){return function x5(n){return function g5(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield E3(n),e=yield vN(n);return t.setNetworkEnabled(!1),(i=(0,Ee.Z)(function*(r){const s=rt(r);s._u.add(0),yield x_(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(zi(n=mn(n,gi)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,u3("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function D5(n){return function(t){const e=new pr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function KZ(n,t){return ZR.apply(this,arguments)}(yield wN(t),e)})),e.promise}(zi(n=mn(n,gi)))}(this._delegate)}onSnapshotsInSync(t){return function o8(n,t){return function y5(n,t){const e=new ID(t);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield F_(n),r=e,rt(i).Ru.add(r),void r.next();var i,r})),()=>{e.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield F_(n),r=e,void rt(i).Ru.delete(r);var i,r}))}}(zi(n=mn(n,gi)),CN(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new V_(this,m3(this._delegate,t))}catch(e){throw Ps(e,"collection()","Firestore.collection()")}}doc(t){try{return new za(this,bD(this._delegate,t))}catch(e){throw Ps(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Fs(this,function a5(n,t){if(n=mn(n,rE),hN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hs(n,null,(e=t,new vc(En.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Ps(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function u8(n,t,e){n=mn(n,gi);const i=Object.assign(Object.assign({},a8),e);return function(r){if(r.maxAttempts<1)throw new Ue(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,u){const d=new pr;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const p=yield function C3(n){return TD(n).then(t=>t.datastore)}(r);new h5(r.asyncQueue,p,u,s,d).run()})),d.promise}(zi(n),r=>t(new l8(n,r)),i)}(this._delegate,e=>t(new J3(this,e)))}batch(){return zi(this._delegate),new X3(new q3(this._delegate,t=>L_(this._delegate,t)))}loadBundle(t){return function M5(n,t){const e=zi(n=mn(n,gi)),i=new C5;return function v5(n,t,e,i){const r=function(s,u){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return y3(p,_);if(p instanceof ArrayBuffer)return y3(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new l5(p,u);var p}(e,tE(t));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function s5(n,t,e){const i=rt(n);var r;(r=(0,Ee.Z)(function*(s,u,d){try{const p=yield u.getMetadata();if(yield function(x,N){const V=rt(x),Z=xr(N.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",Q=>V.Ns.getBundleMetadata(Q,N.id)).then(Q=>!!Q&&Q.createTime.compareTo(Z)>=0)}(s.localStore,p))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(JH(p));const _=new VZ(p,s.localStore,u.It);let E=yield u.mc();for(;E;){const x=yield _.Fu(E);x&&d._updateProgress(x),E=yield u.mc()}const T=yield _.complete();return yield Cc(s,T.Lu,void 0),yield function(x,N){const V=rt(x);return V.persistence.runTransaction("Save bundle","readwrite",Z=>V.Ns.saveBundleMetadata(Z,N))}(s.localStore,p),d._completeWith(T.progress),Promise.resolve(T.Bu)}catch(p){return gp("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var x}),function(s,u,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield wN(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function k5(n,t){return function w5(n,t){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(e,i){const r=rt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield SD(n),t)}))}(zi(n=mn(n,gi)),t).then(e=>e?new hs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Fs(this,e):null)}}class ND extends AN{constructor(t){super(),this.firestore=t}convertBytes(t){return new uE(new vu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return za.forKey(e,this.firestore,null)}}class J3{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ND(t)}get(t){const e=Vp(t);return this._delegate.get(e).then(i=>new cE(this._firestore,new Ic(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Vp(t);return i?(MN("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Vp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Vp(t);return this._delegate.delete(e),this}}class X3{constructor(t){this._delegate=t}set(t,e,i){const r=Vp(t);return i?(MN("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Vp(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Vp(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Lp{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new lE(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new dE(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Lp.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Lp(t,new ND(t),e),r.set(e,s)),s}}Lp.INSTANCES=new WeakMap;class za{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ND(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new za(e,new pi(e._delegate,i,new et(t)))}static forKey(t,e,i){return new za(e,new pi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new V_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new V_(this.firestore,m3(this._delegate,t))}catch(e){throw Ps(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof pi&&_3(this._delegate,t)}set(t,e){e=MN("DocumentReference.set",e);try{return e?$3(this._delegate,t,e):$3(this._delegate,t)}catch(i){throw Ps(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?z3(this._delegate,t):z3(this._delegate,t,e,...i)}catch(r){throw Ps(r,"updateDoc()","DocumentReference.update()")}}delete(){return function r8(n){return L_(mn(n.firestore,gi),[new C_(n._key,wi.none())])}(this._delegate)}onSnapshot(...t){const e=ej(t),i=tj(t,r=>new cE(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return W3(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function X5(n){n=mn(n,pi);const t=mn(n.firestore,gi),e=zi(t),i=new Oh(t);return function m5(n,t){const e=new pr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,u){try{const d=yield function(p,_){const E=rt(p);return E.persistence.runTransaction("read document","readonly",T=>E.localDocuments.getDocument(T,_))}(r,s);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Ue(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=O_(d,`Failed to get document '${s} from cache`);u.reject(p)}}),function(r,s,u){return i.apply(this,arguments)})(yield SD(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Ic(t,i,n._key,r,new Fp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function e8(n){n=mn(n,pi);const t=mn(n.firestore,gi);return b3(zi(t),n._key,{source:"server"}).then(e=>xN(t,n,e))}(this._delegate):function J5(n){n=mn(n,pi);const t=mn(n.firestore,gi);return b3(zi(t),n._key).then(e=>xN(t,n,e))}(this._delegate),e.then(i=>new cE(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new za(this.firestore,this._delegate.withConverter(t?Lp.getInstance(this.firestore,t):null))}}function Ps(n,t,e){return n.message=n.message.replace(t,e),n}function ej(n){for(const t of n)if("object"==typeof t&&!kN(t))return t;return{}}function tj(n,t){var e,i;let r;return r=kN(n[0])?n[0]:kN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class cE{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return G3(this._delegate,t._delegate)}}class dE extends cE{data(t){const e=this._delegate.data(t);return function _4(n,t){n||_t()}(void 0!==e),e}}class Fs{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ND(t)}where(t,e,i){try{return new Fs(this.firestore,Mh(this._delegate,function H5(n,t,e){const i=t,r=OD("where",n);return new B5(r,i,e)}(t,e,i)))}catch(r){throw Ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Fs(this.firestore,Mh(this._delegate,function G5(n,t="asc"){const e=t,i=OD("orderBy",n);return new j5(i,e)}(t,e)))}catch(i){throw Ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Fs(this.firestore,Mh(this._delegate,function $5(n){return h3("limit",n),new F3("limit",n,"F")}(t)))}catch(e){throw Ps(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Fs(this.firestore,Mh(this._delegate,function z5(n){return h3("limitToLast",n),new F3("limitToLast",n,"L")}(t)))}catch(e){throw Ps(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Fs(this.firestore,Mh(this._delegate,function W5(...n){return new L3("startAt",n,!0)}(...t)))}catch(e){throw Ps(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Fs(this.firestore,Mh(this._delegate,function q5(...n){return new L3("startAfter",n,!1)}(...t)))}catch(e){throw Ps(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Fs(this.firestore,Mh(this._delegate,function K5(...n){return new V3("endBefore",n,!1)}(...t)))}catch(e){throw Ps(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Fs(this.firestore,Mh(this._delegate,function Z5(...n){return new V3("endAt",n,!0)}(...t)))}catch(e){throw Ps(e,"endAt()","Query.endAt()")}}isEqual(t){return fN(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function n8(n){n=mn(n,hs);const t=mn(n.firestore,gi),e=zi(t),i=new Oh(t);return function _5(n,t){const e=new pr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,u){try{const d=yield mD(r,s,!0),p=new t3(s,d.Hi),_=p.Wu(d.documents),E=p.applyChanges(_,!1);u.resolve(E.snapshot)}catch(d){const p=O_(d,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(r,s,u){return i.apply(this,arguments)})(yield SD(n),t,e);var i})),e.promise}(e,n._query).then(r=>new kh(t,i,n,r))}(this._delegate):"server"===t?.source?function i8(n){n=mn(n,hs);const t=mn(n.firestore,gi),e=zi(t),i=new Oh(t);return I3(e,n._query,{source:"server"}).then(r=>new kh(t,i,n,r))}(this._delegate):function t8(n){n=mn(n,hs);const t=mn(n.firestore,gi),e=zi(t),i=new Oh(t);return P3(n._query),I3(e,n._query).then(r=>new kh(t,i,n,r))}(this._delegate),e.then(i=>new ON(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=ej(t),i=tj(t,r=>new ON(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return W3(this._delegate,e,i)}withConverter(t){return new Fs(this.firestore,this._delegate.withConverter(t?Lp.getInstance(this.firestore,t):null))}}class w8{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new dE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ON{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new dE(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new w8(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new dE(this._firestore,i))})}isEqual(t){return G3(this._delegate,t._delegate)}}class V_ extends Fs{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new za(this.firestore,t):null}doc(t){try{return new za(this.firestore,void 0===t?bD(this._delegate):bD(this._delegate,t))}catch(e){throw Ps(e,"doc()","CollectionReference.doc()")}}add(t){return function s8(n,t){const e=mn(n.firestore,gi),i=bD(n),r=RD(n.converter,t);return L_(e,[xD(Np(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,wi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new za(this.firestore,e))}isEqual(t){return _3(this._delegate,t._delegate)}withConverter(t){return new V_(this.firestore,this._delegate.withConverter(t?Lp.getInstance(this.firestore,t):null))}}function Vp(n){return mn(n,pi)}class RN{constructor(...t){this._delegate=new bc(...t)}static documentId(){return new RN(Ni.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof bc&&this._delegate._internalPath.isEqual(t._internalPath)}}class Up{constructor(t){this._delegate=t}static serverTimestamp(){const t=function d8(){return new bN("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Up(t)}static delete(){const t=function c8(){return new sE("deleteField")}();return t._methodName="FieldValue.delete",new Up(t)}static arrayUnion(...t){const e=function h8(...n){return new P5("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Up(e)}static arrayRemove(...t){const e=function f8(...n){return new F5("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Up(e)}static increment(t){const e=function p8(n){return new L5("increment",n)}(t);return e._methodName="FieldValue.increment",new Up(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const E8={Firestore:Q3,GeoPoint:DD,Timestamp:vi,Blob:uE,Transaction:J3,WriteBatch:X3,DocumentReference:za,DocumentSnapshot:cE,Query:Fs,QueryDocumentSnapshot:dE,QuerySnapshot:ON,CollectionReference:V_,FieldPath:RN,FieldValue:Up,setLogLevel:function v8(n){!function m4(n){_h.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nj(n,t){return function I8(n,t=Om.z){return new bi.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function NN(n,t){return nj(n,t).pipe((0,ht.U)(e=>({payload:e,type:"query"})))}function PD(n,t){return NN(n,t).pipe(Sa(void 0),j1(),(0,ht.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(u=>({type:u.type,payload:u}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,d)=>{const p=r.find(E=>E.doc.ref.isEqual(u.ref)),_=e?.payload.docs.find(E=>E.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),s}))}function ij(n,t,e){return PD(n,e).pipe(Vt((i,r)=>function S8(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function D8(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return PN(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return PN(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return PN(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Ew(),(0,ht.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function PN(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function rj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function b8(n){(function C8(n,t){n.INTERNAL.registerComponent(new Pa.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},E8)))})(n,(t,e)=>new Q3(t,e,new y8)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Rm.Z);class sj{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=PD(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ht.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Sa(void 0),j1(),S(([i,r])=>r.length>0||!i),(0,ht.U)(([i,r])=>r),In.iC)}auditTrail(t){return this.stateChanges(t).pipe(Vt((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=rj(t);return ij(this.query,e,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(t={}){return NN(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),In.iC)}get(t){return(0,dn.D)(this.query.get(t)).pipe(In.iC)}add(t){return this.ref.add(t)}doc(t){return new oj(this.ref.doc(t),this.afs)}}class oj{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=uj(i,e);return new sj(r,s,this.afs)}snapshotChanges(){return function T8(n,t){return nj(n,t).pipe(Sa(void 0),j1(),(0,ht.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,dn.D)(this.ref.get(t)).pipe(In.iC)}}class A8{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?PD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),S(e=>e.length>0),In.iC):PD(this.query,this.afs.schedulers.outsideAngular).pipe(In.iC)}auditTrail(t){return this.stateChanges(t).pipe(Vt((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=rj(t);return ij(this.query,e,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(t={}){return NN(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),In.iC)}get(t){return(0,dn.D)(this.query.get(t)).pipe(In.iC)}}const aj=new l.OlP("angularfire2.enableFirestorePersistence"),lj=new l.OlP("angularfire2.firestore.persistenceSettings"),x8=new l.OlP("angularfire2.firestore.settings"),M8=new l.OlP("angularfire2.firestore.use-emulator");function uj(n,t=(e=>e)){return{query:t(n),ref:n}}let k8=(()=>{class n{constructor(e,i,r,s,u,d,p,_,E,T,x,N,V,Z,Q,Ae,Be){this.schedulers=p;const He=(0,er.on)(e,d,i),We=E;T&&Nf(He,d,x,V,Z,Q,N,Ae),[this.firestore,this.persistenceEnabled$]=(0,er.cc)(`${He.name}.firestore`,"AngularFirestore",He.name,()=>{const ct=d.runOutsideAngular(()=>He.firestore());if(s&&ct.settings(s),We&&ct.useEmulator(...We),r&&!ia(u)){const gt=()=>{try{return(0,dn.D)(ct.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(Xt){return typeof console<"u"&&console.warn(Xt),ft(!1)}};return[ct,d.runOutsideAngular(gt)]}return[ct,ft(!1)]},[s,We,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:u}=uj(r,i),d=this.schedulers.ngZone.run(()=>s);return new sj(d,u,this)}collectionGroup(e,i){const r=i||(u=>u),s=this.firestore.collectionGroup(e);return new A8(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new oj(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(er.Dh),l.LFG(er.xv,8),l.LFG(aj,8),l.LFG(x8,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(In.HU),l.LFG(lj,8),l.LFG(M8,8),l.LFG(em,8),l.LFG(Xy,8),l.LFG(ev,8),l.LFG(Id,8),l.LFG(Rf,8),l.LFG(Td,8),l.LFG(HC,8),l.LFG(bd,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),O8=(()=>{class n{constructor(){Xg.Z.registerVersion("angularfire",In.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:aj,useValue:!0},{provide:lj,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[k8]}),n})();function cj(n){return new l.vHH(3e3,!1)}function fY(){return typeof window<"u"&&typeof window.document<"u"}function FN(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Nh(n){switch(n.length){case 0:return new Pf;case 1:return n[0];default:return new WC(n)}}function dj(n,t,e,i,r=new Map,s=new Map){const u=[],d=[];let p=-1,_=null;if(i.forEach(E=>{const T=E.get("offset"),x=T==p,N=x&&_||new Map;E.forEach((V,Z)=>{let Q=Z,Ae=V;if("offset"!==Z)switch(Q=t.normalizePropertyName(Q,u),Ae){case"!":Ae=r.get(Z);break;case Po:Ae=s.get(Z);break;default:Ae=t.normalizeStyleValue(Z,Q,Ae,u)}N.set(Q,Ae)}),x||d.push(N),_=N,p=T}),u.length)throw function tY(n){return new l.vHH(3502,!1)}();return d}function LN(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&VN(e,"start",n)));break;case"done":n.onDone(()=>i(e&&VN(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&VN(e,"destroy",n)))}}function VN(n,t,e){const s=UN(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),u=n._data;return null!=u&&(s._data=u),s}function UN(n,t,e,i,r="",s=0,u){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!u}}function qo(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function hj(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let BN=(n,t)=>!1,fj=(n,t,e)=>[],pj=null;function HN(n){const t=n.parentNode||n.host;return t===pj?null:t}(FN()||typeof Element<"u")&&(fY()?(pj=(()=>document.documentElement)(),BN=(n,t)=>{for(;t;){if(t===n)return!0;t=HN(t)}return!1}):BN=(n,t)=>n.contains(t),fj=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Bp=null,gj=!1;const mj=BN,_j=fj;let yj=(()=>{class n{validateStyleProperty(e){return function gY(n){Bp||(Bp=function mY(){return typeof document<"u"?document.body:null}()||{},gj=!!Bp.style&&"WebkitAppearance"in Bp.style);let t=!0;return Bp.style&&!function pY(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Bp.style,!t&&gj&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Bp.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return mj(e,i)}getParentElement(e){return HN(e)}query(e,i,r){return _j(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,u,d=[],p){return new Pf(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),jN=(()=>{class n{}return n.NOOP=new yj,n})();const GN="ng-enter",FD="ng-leave",LD="ng-trigger",VD=".ng-trigger",wj="ng-animating",$N=".ng-animating";function Tc(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:zN(parseFloat(t[1]),t[2])}function zN(n,t){return"s"===t?1e3*n:n}function UD(n,t,e){return n.hasOwnProperty("duration")?n:function vY(n,t,e){let r,s=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(cj()),{duration:0,delay:0,easing:""};r=zN(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=zN(parseFloat(p),d[4]));const _=d[5];_&&(u=_)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function R8(){return new l.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function N8(){return new l.vHH(3101,!1)}()),d=!0),d&&t.splice(p,0,cj())}return{duration:r,delay:s,easing:u}}(n,t,e)}function hE(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Ej(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Ph(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function bj(n,t,e){return e?t+":"+e+";":""}function Ij(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=bj(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=bj(0,bY(e),n.style[e]));n.setAttribute("style",t)}function wu(n,t,e){n.style&&(t.forEach((i,r)=>{const s=qN(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),FN()&&Ij(n))}function Hp(n,t){n.style&&(t.forEach((e,i)=>{const r=qN(i);n.style[r]=""}),FN()&&Ij(n))}function fE(n){return Array.isArray(n)?1==n.length?n[0]:Dd(n):n}const WN=new RegExp("{{\\s*(.+?)\\s*}}","g");function Tj(n){let t=[];if("string"==typeof n){let e;for(;e=WN.exec(n);)t.push(e[1]);WN.lastIndex=0}return t}function pE(n,t,e){const i=n.toString(),r=i.replace(WN,(s,u)=>{let d=t[u];return null==d&&(e.push(function F8(n){return new l.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function BD(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const CY=/-+([a-z0-9])/g;function qN(n){return n.replace(CY,(...t)=>t[1].toUpperCase())}function bY(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ko(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function L8(n){return new l.vHH(3004,!1)}()}}function xY(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function MY(n,t,e){if(":"==n[0]){const p=function kY(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function Q8(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Y8(n){return new l.vHH(3015,!1)}()),t;const r=i[1],s=i[2],u=i[3];t.push(Dj(r,u));"<"==s[0]&&!("*"==r&&"*"==u)&&t.push(Dj(u,r))}(i,e,t)):e.push(n),e}const $D=new Set(["true","1"]),zD=new Set(["false","0"]);function Dj(n,t){const e=$D.has(n)||zD.has(n),i=$D.has(t)||zD.has(t);return(r,s)=>{let u="*"==n||n==r,d="*"==t||t==s;return!u&&e&&"boolean"==typeof r&&(u=r?$D.has(n):zD.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?$D.has(t):zD.has(t)),u&&d}}const OY=new RegExp("s*:selfs*,?","g");function KN(n,t,e,i){return new RY(n).build(t,e,i)}class RY{constructor(t){this._driver=t}build(t,e,i){const r=new FY(e);return this._resetContextStyleTimingState(r),Ko(this,fE(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],u=[];return"@"==t.name.charAt(0)&&e.errors.push(function U8(){return new l.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,e))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,u.push(p)}else e.errors.push(function B8(){return new l.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:u,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,u=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{Tj(p).forEach(_=>{u.hasOwnProperty(_)||s.add(_)})})}),s.size&&(BD(s.values()),e.errors.push(function H8(n,t){return new l.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Ko(this,fE(t.animation),e);return{type:1,matchers:xY(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:jp(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Ko(this,i,e)),options:jp(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(u=>{e.currentTime=i;const d=Ko(this,u,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:jp(t.options)}}visitAnimate(t,e){const i=function VY(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return ZN(UD(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=ZN(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=UD(e,t);return ZN(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:os({});if(5==s.type)r=this.visitKeyframes(s,e);else{let u=t.styles,d=!1;if(!u){d=!0;const _={};i.easing&&(_.easing=i.easing),u=os(_)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(u,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===Po?i.push(d):e.errors.push(new l.vHH(3002,!1)):i.push(Ej(d));let s=!1,u=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(u=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:u,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(u=>{"string"!=typeof u&&u.forEach((d,p)=>{const _=e.collectedStyles.get(e.currentQuerySelector),E=_.get(p);let T=!0;E&&(s!=r&&s>=E.startTime&&r<=E.endTime&&(e.errors.push(function G8(n,t,e,i,r){return new l.vHH(3010,!1)}()),T=!1),s=E.startTime),T&&_.set(p,{startTime:s,endTime:r}),e.options&&function EY(n,t,e){const i=t.params||{},r=Tj(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function P8(n){return new l.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function $8(){return new l.vHH(3011,!1)}()),i;let s=0;const u=[];let d=!1,p=!1,_=0;const E=t.steps.map(Ae=>{const Be=this._makeStyleAst(Ae,e);let He=null!=Be.offset?Be.offset:function LY(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Be.styles),We=0;return null!=He&&(s++,We=Be.offset=He),p=p||We<0||We>1,d=d||We<_,_=We,u.push(We),Be});p&&e.errors.push(function z8(){return new l.vHH(3012,!1)}()),d&&e.errors.push(function W8(){return new l.vHH(3200,!1)}());const T=t.steps.length;let x=0;s>0&&s<T?e.errors.push(function q8(){return new l.vHH(3202,!1)}()):0==s&&(x=1/(T-1));const N=T-1,V=e.currentTime,Z=e.currentAnimateTimings,Q=Z.duration;return E.forEach((Ae,Be)=>{const He=x>0?Be==N?1:x*Be:u[Be],We=He*Q;e.currentTime=V+Z.delay+We,Z.duration=We,this._validateStyleAst(Ae,e),Ae.offset=He,i.styles.push(Ae)}),i}visitReference(t,e){return{type:8,animation:Ko(this,fE(t.animation),e),options:jp(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:jp(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:jp(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,u]=function NY(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(OY,"")),n=n.replace(/@\*/g,VD).replace(/@\w+/g,e=>VD+"-"+e.slice(1)).replace(/:animating/g,$N),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,qo(e.collectedStyles,e.currentQuerySelector,new Map);const d=Ko(this,fE(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:d,originalSelector:t.selector,options:jp(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function K8(){return new l.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:UD(t.timings,e.errors,!0);return{type:12,animation:Ko(this,fE(t.animation),e),timings:i,options:null}}}class FY{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function jp(n){return n?(n=hE(n)).params&&(n.params=function PY(n){return n?hE(n):null}(n.params)):n={},n}function ZN(n,t,e){return{duration:n,delay:t,easing:e}}function YN(n,t,e,i,r,s,u=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:u,subTimeline:d}}class WD{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const HY=new RegExp(":enter","g"),GY=new RegExp(":leave","g");function QN(n,t,e,i,r,s=new Map,u=new Map,d,p,_=[]){return(new $Y).buildKeyframes(n,t,e,i,r,s,u,d,p,_)}class $Y{buildKeyframes(t,e,i,r,s,u,d,p,_,E=[]){_=_||new WD;const T=new JN(t,e,_,r,s,E,[]);T.options=p;const x=p.delay?Tc(p.delay):0;T.currentTimeline.delayNextStep(x),T.currentTimeline.setStyles([u],null,T.errors,p),Ko(this,i,T);const N=T.timelines.filter(V=>V.containsAnimation());if(N.length&&d.size){let V;for(let Z=N.length-1;Z>=0;Z--){const Q=N[Z];if(Q.element===e){V=Q;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([d],null,T.errors,p)}return N.length?N.map(V=>V.buildKeyframes()):[YN(e,[],[],[],0,x,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);s!=u&&e.transformIntoNewTimeline(u)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const u="number"==typeof s?s:Tc(pE(s,r?.params??{},e.errors));i.delayNextStep(u)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const u=null!=i.duration?Tc(i.duration):null,d=null!=i.delay?Tc(i.delay):null;return 0!==u&&t.forEach(p=>{const _=e.appendInstructionToTimeline(p,u,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Ko(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=qD);const u=Tc(s.delay);r.delayNextStep(u)}t.steps.length&&(t.steps.forEach(u=>Ko(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Tc(t.options.delay):0;t.steps.forEach(u=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),Ko(this,u,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return UD(e.params?pE(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Tc(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=qD);let u=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((_,E)=>{e.currentQueryIndex=E;const T=e.createSubContext(t.options,_);s&&T.delayNextStep(s),_===e.element&&(p=T.currentTimeline),Ko(this,t.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,u=Math.abs(s.duration),d=u*(e.currentQueryTotal-1);let p=u*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const E=e.currentTimeline;p&&E.delayNextStep(p);const T=E.currentTime;Ko(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const qD={};class JN{constructor(t,e,i,r,s,u,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new KD(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Tc(i.duration)),null!=i.delay&&(r.delay=Tc(i.delay));const s=i.params;if(s){let u=r.params;u||(u=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!u.hasOwnProperty(d))&&(u[d]=pE(s[d],u,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new JN(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=qD,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new zY(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,u){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(HY,"."+this._enterClassName)).replace(GY,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&u.push(function Z8(n){return new l.vHH(3014,!1)}()),d}}class KD{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new KD(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Po),this._currentKeyframe.set(e,Po);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},u=function WY(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Po)}else Ph(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,p]of u){const _=pE(p,s,i);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Po),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const _=Ph(d,new Map,this._backFill);_.forEach((E,T)=>{"!"===E?t.add(T):E===Po&&e.add(T)}),i||_.set("offset",p/this.duration),r.push(_)});const s=t.size?BD(t.values()):[],u=e.size?BD(e.values()):[];if(i){const d=r[0],p=new Map(d);d.set("offset",0),p.set("offset",1),r=[d,p]}return YN(this.element,r,s,u,this.duration,this.startTime,this.easing,!1)}}class zY extends KD{constructor(t,e,i,r,s,u,d=!1){super(t,e,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],u=i+e,d=e/u,p=Ph(t[0]);p.set("offset",0),s.push(p);const _=Ph(t[0]);_.set("offset",Mj(d)),s.push(_);const E=t.length-1;for(let T=1;T<=E;T++){let x=Ph(t[T]);const N=x.get("offset");x.set("offset",Mj((e+N*i)/u)),s.push(x)}i=u,e=0,r="",t=s}return YN(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function Mj(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class XN{}const qY=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class KY extends XN{normalizePropertyName(t,e){return qN(t)}normalizeStyleValue(t,e,i,r){let s="";const u=i.toString().trim();if(qY.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function V8(n,t){return new l.vHH(3005,!1)}())}return u+s}}function kj(n,t,e,i,r,s,u,d,p,_,E,T,x){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:u,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:E,totalTime:T,errors:x}}const eP={};class Oj{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function ZY(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,u,d,p,_,E){const T=[],x=this.ast.options&&this.ast.options.params||eP,V=this.buildStyles(i,d&&d.params||eP,T),Z=p&&p.params||eP,Q=this.buildStyles(r,Z,T),Ae=new Set,Be=new Map,He=new Map,We="void"===r,ct={params:YY(Z,x),delay:this.ast.options?.delay},gt=E?[]:QN(t,e,this.ast.animation,s,u,V,Q,ct,_,T);let Xt=0;if(gt.forEach(mi=>{Xt=Math.max(mi.duration+mi.delay,Xt)}),T.length)return kj(e,this._triggerName,i,r,We,V,Q,[],[],Be,He,Xt,T);gt.forEach(mi=>{const Ls=mi.element,qj=qo(Be,Ls,new Set);mi.preStyleProps.forEach(Gp=>qj.add(Gp));const mE=qo(He,Ls,new Set);mi.postStyleProps.forEach(Gp=>mE.add(Gp)),Ls!==e&&Ae.add(Ls)});const Pn=BD(Ae.values());return kj(e,this._triggerName,i,r,We,V,Q,gt,Pn,Be,He,Xt)}}function YY(n,t){const e=hE(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class QY{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=hE(this.defaultParams);return Object.keys(t).forEach(s=>{const u=t[s];null!==u&&(r[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,d)=>{u&&(u=pE(u,r,e));const p=this.normalizer.normalizePropertyName(d,e);u=this.normalizer.normalizeStyleValue(d,p,u,e),i.set(p,u)})}),i}}class XY{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new QY(r.style,r.options&&r.options.params||{},i))}),Rj(this.states,"true","1"),Rj(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Oj(t,r,this.states))}),this.fallbackTransition=function e7(n,t,e){return new Oj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(u=>u.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function Rj(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const t7=new WD;class n7{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=KN(this._driver,e,i,[]);if(i.length)throw function nY(n){return new l.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=dj(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let u;const d=new Map;if(s?(u=QN(this._driver,e,s,GN,FD,new Map,new Map,i,t7,r),u.forEach(E=>{const T=qo(d,E.element,new Map);E.postStyleProps.forEach(x=>T.set(x,null))})):(r.push(function iY(){return new l.vHH(3300,!1)}()),u=[]),r.length)throw function rY(n){return new l.vHH(3504,!1)}();d.forEach((E,T)=>{E.forEach((x,N)=>{E.set(N,this._driver.computeStyle(T,N,Po))})});const _=Nh(u.map(E=>{const T=d.get(E.element);return this._buildPlayer(E,new Map,T)}));return this._playersById.set(t,_),_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function sY(n){return new l.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=UN(e,"","","");return LN(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Nj="ng-animate-queued",tP="ng-animate-disabled",a7=[],Pj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},l7={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wa="__ng_removed";class nP{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function h7(n){return n??null}(i?t.value:t),i){const s=hE(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const gE="void",iP=new nP(gE);class u7{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,qa(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function oY(n,t){return new l.vHH(3302,!1)}();if(null==i||0==i.length)throw function aY(n){return new l.vHH(3303,!1)}();if(!function f7(n){return"start"==n||"done"==n}(i))throw function lY(n,t){return new l.vHH(3400,!1)}();const s=qo(this._elementListeners,t,[]),u={name:e,phase:i,callback:r};s.push(u);const d=qo(this._engine.statesByElement,t,new Map);return d.has(e)||(qa(t,LD),qa(t,LD+"-"+e),d.set(e,iP)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function uY(n){return new l.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),u=new rP(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(qa(t,LD),qa(t,LD+"-"+e),this._engine.statesByElement.set(t,d=new Map));let p=d.get(e);const _=new nP(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d.set(e,_),p||(p=iP),_.value!==gE&&p.value===_.value){if(!function m7(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,_.params)){const Z=[],Q=s.matchStyles(p.value,p.params,Z),Ae=s.matchStyles(_.value,_.params,Z);Z.length?this._engine.reportError(Z):this._engine.afterFlush(()=>{Hp(t,Q),wu(t,Ae)})}return}const x=qo(this._engine.playersByElement,t,[]);x.forEach(Z=>{Z.namespaceId==this.id&&Z.triggerName==e&&Z.queued&&Z.destroy()});let N=s.matchTransition(p.value,_.value,t,_.params),V=!1;if(!N){if(!r)return;N=s.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:N,fromState:p,toState:_,player:u,isFallbackTransition:V}),V||(qa(t,Nj),u.onStart(()=>{U_(t,Nj)})),u.onDone(()=>{let Z=this.players.indexOf(u);Z>=0&&this.players.splice(Z,1);const Q=this._engine.playersByElement.get(t);if(Q){let Ae=Q.indexOf(u);Ae>=0&&Q.splice(Ae,1)}}),this.players.push(u),x.push(u),u}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,VD,!0);i.forEach(r=>{if(r[Wa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(u=>u.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),u=new Map;if(s){const d=[];if(s.forEach((p,_)=>{if(u.set(_,p.value),this._triggers.has(_)){const E=this.trigger(t,_,gE,r);E&&d.push(E)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,u),i&&Nh(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const u=s.name;if(r.has(u))return;r.add(u);const p=this._triggers.get(u).fallbackTransition,_=i.get(u)||iP,E=new nP(gE),T=new rP(this.id,u,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:u,transition:p,fromState:_,toState:E,player:T,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let u=t;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Wa];(!s||s===Pj)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){qa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,u=this._elementListeners.get(s);u&&u.forEach(d=>{if(d.name==i.triggerName){const p=UN(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,LN(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class c7{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new u7(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const _=i.indexOf(p);i.splice(_+1,0,t),u=!0;break}d=this.driver.getParentElement(d)}u||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(ZD(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!ZD(e))return;const s=e[Wa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(t){const u=this._fetchNamespace(t);u&&u.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),qa(t,tP)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),U_(t,tP))}removeNode(t,e,i,r){if(ZD(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const u=this.namespacesByHostElement.get(e);u&&u.id!==t&&u.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Wa]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return ZD(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,VD,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,$N,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Nh(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Wa];if(e&&e.setForRemoval){if(t[Wa]=Pj,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(tP)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)qa(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Nh(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function cY(n){return new l.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new WD,r=[],s=new Map,u=[],d=new Map,p=new Map,_=new Map,E=new Set;this.disabledNodes.forEach(Tt=>{E.add(Tt);const Pt=this.driver.query(Tt,".ng-animate-queued",!0);for(let Wt=0;Wt<Pt.length;Wt++)E.add(Pt[Wt])});const T=this.bodyNode,x=Array.from(this.statesByElement.keys()),N=Vj(x,this.collectedEnterElements),V=new Map;let Z=0;N.forEach((Tt,Pt)=>{const Wt=GN+Z++;V.set(Pt,Wt),Tt.forEach(Tn=>qa(Tn,Wt))});const Q=[],Ae=new Set,Be=new Set;for(let Tt=0;Tt<this.collectedLeaveElements.length;Tt++){const Pt=this.collectedLeaveElements[Tt],Wt=Pt[Wa];Wt&&Wt.setForRemoval&&(Q.push(Pt),Ae.add(Pt),Wt.hasAnimation?this.driver.query(Pt,".ng-star-inserted",!0).forEach(Tn=>Ae.add(Tn)):Be.add(Pt))}const He=new Map,We=Vj(x,Array.from(Ae));We.forEach((Tt,Pt)=>{const Wt=FD+Z++;He.set(Pt,Wt),Tt.forEach(Tn=>qa(Tn,Wt))}),t.push(()=>{N.forEach((Tt,Pt)=>{const Wt=V.get(Pt);Tt.forEach(Tn=>U_(Tn,Wt))}),We.forEach((Tt,Pt)=>{const Wt=He.get(Pt);Tt.forEach(Tn=>U_(Tn,Wt))}),Q.forEach(Tt=>{this.processLeaveNode(Tt)})});const ct=[],gt=[];for(let Tt=this._namespaceList.length-1;Tt>=0;Tt--)this._namespaceList[Tt].drainQueuedTransitions(e).forEach(Wt=>{const Tn=Wt.player,Or=Wt.element;if(ct.push(Tn),this.collectedEnterElements.length){const fs=Or[Wa];if(fs&&fs.setForMove){if(fs.previousTriggersValues&&fs.previousTriggersValues.has(Wt.triggerName)){const $p=fs.previousTriggersValues.get(Wt.triggerName),Ka=this.statesByElement.get(Wt.element);if(Ka&&Ka.has(Wt.triggerName)){const JD=Ka.get(Wt.triggerName);JD.value=$p,Ka.set(Wt.triggerName,JD)}}return void Tn.destroy()}}const Eu=!T||!this.driver.containsElement(T,Or),Zo=He.get(Or),Fh=V.get(Or),Ai=this._buildInstruction(Wt,i,Fh,Zo,Eu);if(Ai.errors&&Ai.errors.length)return void gt.push(Ai);if(Eu)return Tn.onStart(()=>Hp(Or,Ai.fromStyles)),Tn.onDestroy(()=>wu(Or,Ai.toStyles)),void r.push(Tn);if(Wt.isFallbackTransition)return Tn.onStart(()=>Hp(Or,Ai.fromStyles)),Tn.onDestroy(()=>wu(Or,Ai.toStyles)),void r.push(Tn);const Yj=[];Ai.timelines.forEach(fs=>{fs.stretchStartingKeyframe=!0,this.disabledNodes.has(fs.element)||Yj.push(fs)}),Ai.timelines=Yj,i.append(Or,Ai.timelines),u.push({instruction:Ai,player:Tn,element:Or}),Ai.queriedElements.forEach(fs=>qo(d,fs,[]).push(Tn)),Ai.preStyleProps.forEach((fs,$p)=>{if(fs.size){let Ka=p.get($p);Ka||p.set($p,Ka=new Set),fs.forEach((JD,oP)=>Ka.add(oP))}}),Ai.postStyleProps.forEach((fs,$p)=>{let Ka=_.get($p);Ka||_.set($p,Ka=new Set),fs.forEach((JD,oP)=>Ka.add(oP))})});if(gt.length){const Tt=[];gt.forEach(Pt=>{Tt.push(function dY(n,t){return new l.vHH(3505,!1)}())}),ct.forEach(Pt=>Pt.destroy()),this.reportError(Tt)}const Xt=new Map,Pn=new Map;u.forEach(Tt=>{const Pt=Tt.element;i.has(Pt)&&(Pn.set(Pt,Pt),this._beforeAnimationBuild(Tt.player.namespaceId,Tt.instruction,Xt))}),r.forEach(Tt=>{const Pt=Tt.element;this._getPreviousPlayers(Pt,!1,Tt.namespaceId,Tt.triggerName,null).forEach(Tn=>{qo(Xt,Pt,[]).push(Tn),Tn.destroy()})});const mi=Q.filter(Tt=>Bj(Tt,p,_)),Ls=new Map;Lj(Ls,this.driver,Be,_,Po).forEach(Tt=>{Bj(Tt,p,_)&&mi.push(Tt)});const mE=new Map;N.forEach((Tt,Pt)=>{Lj(mE,this.driver,new Set(Tt),p,"!")}),mi.forEach(Tt=>{const Pt=Ls.get(Tt),Wt=mE.get(Tt);Ls.set(Tt,new Map([...Array.from(Pt?.entries()??[]),...Array.from(Wt?.entries()??[])]))});const Gp=[],Kj=[],Zj={};u.forEach(Tt=>{const{element:Pt,player:Wt,instruction:Tn}=Tt;if(i.has(Pt)){if(E.has(Pt))return Wt.onDestroy(()=>wu(Pt,Tn.toStyles)),Wt.disabled=!0,Wt.overrideTotalTime(Tn.totalTime),void r.push(Wt);let Or=Zj;if(Pn.size>1){let Zo=Pt;const Fh=[];for(;Zo=Zo.parentNode;){const Ai=Pn.get(Zo);if(Ai){Or=Ai;break}Fh.push(Zo)}Fh.forEach(Ai=>Pn.set(Ai,Or))}const Eu=this._buildAnimation(Wt.namespaceId,Tn,Xt,s,mE,Ls);if(Wt.setRealPlayer(Eu),Or===Zj)Gp.push(Wt);else{const Zo=this.playersByElement.get(Or);Zo&&Zo.length&&(Wt.parentPlayer=Nh(Zo)),r.push(Wt)}}else Hp(Pt,Tn.fromStyles),Wt.onDestroy(()=>wu(Pt,Tn.toStyles)),Kj.push(Wt),E.has(Pt)&&r.push(Wt)}),Kj.forEach(Tt=>{const Pt=s.get(Tt.element);if(Pt&&Pt.length){const Wt=Nh(Pt);Tt.setRealPlayer(Wt)}}),r.forEach(Tt=>{Tt.parentPlayer?Tt.syncPlayerEvents(Tt.parentPlayer):Tt.destroy()});for(let Tt=0;Tt<Q.length;Tt++){const Pt=Q[Tt],Wt=Pt[Wa];if(U_(Pt,FD),Wt&&Wt.hasAnimation)continue;let Tn=[];if(d.size){let Eu=d.get(Pt);Eu&&Eu.length&&Tn.push(...Eu);let Zo=this.driver.query(Pt,$N,!0);for(let Fh=0;Fh<Zo.length;Fh++){let Ai=d.get(Zo[Fh]);Ai&&Ai.length&&Tn.push(...Ai)}}const Or=Tn.filter(Eu=>!Eu.destroyed);Or.length?p7(this,Pt,Or):this.processLeaveNode(Pt)}return Q.length=0,Gp.forEach(Tt=>{this.players.push(Tt),Tt.onDone(()=>{Tt.destroy();const Pt=this.players.indexOf(Tt);this.players.splice(Pt,1)}),Tt.play()}),Gp}elementContainsData(t,e){let i=!1;const r=e[Wa];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let u=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(u=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==gE;d.forEach(_=>{_.queued||!p&&_.triggerName!=r||u.push(_)})}}return(i||r)&&(u=u.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),u}_beforeAnimationBuild(t,e,i){const s=e.element,u=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,E=_!==s,T=qo(i,_,[]);this._getPreviousPlayers(_,E,u,d,e.toState).forEach(N=>{const V=N.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),N.destroy(),T.push(N)})}Hp(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,u){const d=e.triggerName,p=e.element,_=[],E=new Set,T=new Set,x=e.timelines.map(V=>{const Z=V.element;E.add(Z);const Q=Z[Wa];if(Q&&Q.removedBeforeQueried)return new Pf(V.duration,V.delay);const Ae=Z!==p,Be=function g7(n){const t=[];return Uj(n,t),t}((i.get(Z)||a7).map(Xt=>Xt.getRealPlayer())).filter(Xt=>!!Xt.element&&Xt.element===Z),He=s.get(Z),We=u.get(Z),ct=dj(0,this._normalizer,0,V.keyframes,He,We),gt=this._buildPlayer(V,ct,Be);if(V.subTimeline&&r&&T.add(Z),Ae){const Xt=new rP(t,d,Z);Xt.setRealPlayer(gt),_.push(Xt)}return gt});_.forEach(V=>{qo(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function d7(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,V.element,V))}),E.forEach(V=>qa(V,wj));const N=Nh(x);return N.onDestroy(()=>{E.forEach(V=>U_(V,wj)),wu(p,e.toStyles)}),T.forEach(V=>{qo(r,V,[]).push(N)}),N}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Pf(t.duration,t.delay)}}class rP{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Pf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>LN(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){qo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ZD(n){return n&&1===n.nodeType}function Fj(n,t){const e=n.style.display;return n.style.display=t??"none",e}function Lj(n,t,e,i,r){const s=[];e.forEach(p=>s.push(Fj(p)));const u=[];i.forEach((p,_)=>{const E=new Map;p.forEach(T=>{const x=t.computeStyle(_,T,r);E.set(T,x),(!x||0==x.length)&&(_[Wa]=l7,u.push(_))}),n.set(_,E)});let d=0;return e.forEach(p=>Fj(p,s[d++])),u}function Vj(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function u(d){if(!d)return 1;let p=s.get(d);if(p)return p;const _=d.parentNode;return p=e.has(_)?_:r.has(_)?1:u(_),s.set(d,p),p}return t.forEach(d=>{const p=u(d);1!==p&&e.get(p).push(d)}),e}function qa(n,t){n.classList?.add(t)}function U_(n,t){n.classList?.remove(t)}function p7(n,t,e){Nh(e).onDone(()=>n.processLeaveNode(t))}function Uj(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof WC?Uj(i.players,t):t.push(i)}}function Bj(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class YD{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new c7(t,e,i),this._timelineEngine=new n7(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const u=t+"-"+r;let d=this._triggerCache[u];if(!d){const p=[],E=KN(this._driver,s,p,[]);if(p.length)throw function eY(n,t){return new l.vHH(3404,!1)}();d=function JY(n,t,e){return new XY(n,t,e)}(r,E,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,u]=hj(i);this._timelineEngine.command(s,e,u,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[u,d]=hj(i);return this._timelineEngine.listen(u,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let E7=(()=>{class n extends tv{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?Dd(e):e;return jj(this._renderer,null,i,"register",[r]),new C7(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(ge))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class C7 extends class GC{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new b7(this._id,t,e||{},this._renderer)}}class b7{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return jj(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function jj(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const Gj="@.disabled";let I7=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,u)=>{const d=u?.parentNode(s);d&&u.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(s);return E||(E=new $j("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,E)),E}const u=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(u,d,e,E.name,E)};return i.data.animation.forEach(p),new T7(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,d]=s;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(YD),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class $j{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==Gj?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class T7 extends $j{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Gj?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function S7(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function D7(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let A7=(()=>{class n extends YD{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge),l.LFG(jN),l.LFG(XN),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const zj=[{provide:tv,useClass:E7},{provide:XN,useFactory:function x7(){return new KY}},{provide:YD,useClass:A7},{provide:l.FYo,useFactory:function M7(n,t,e){return new I7(n,t,e)},deps:[cl,YD,l.R0b]}],Wj=[{provide:jN,useClass:yj},{provide:l.QbO,useValue:"NoopAnimations"},...zj];let O7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Wj,imports:[wo]}),n})(),R7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[vT]}),n.\u0275inj=l.cJS({imports:[wo,yT,er.hO.initializeApp(wT_firebaseConfig),jC,O8,fq,bz,nb,Bd,rw,qf,yw,GF,_x,rw,uk,Kx,O7]}),n})();(0,l.G48)(),pl().bootstrapModule(R7).catch(n=>console.error(n))},5867:(yt,Oe,U)=>{U.d(Oe,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=U(9681);(0,l.registerVersion)("firebase","9.14.0","app")},127:(yt,Oe,U)=>{U.d(Oe,{Z:()=>l.Z});var l=U(3942);l.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(yt,Oe,U)=>{U.r(Oe);var l=U(5861),$=U(3942),P=U(8247),ae=U(2090),ge=(U(9681),U(1877),U(4859));function fe(){return window}function W(){return(W=(0,l.Z)(function*(G,O,H){var re;const{BuildInfo:Le}=fe();(0,P.ap)(O.sessionId,"AuthEvent did not contain a session ID");const ut=yield me(O.sessionId),dt={};return(0,P.aq)()?dt.ibi=Le.packageName:(0,P.ar)()?dt.apn=Le.packageName:(0,P.as)(G,"operation-not-supported-in-this-environment"),Le.displayName&&(dt.appDisplayName=Le.displayName),dt.sessionId=ut,(0,P.at)(G,H,O.type,void 0,null!==(re=O.eventId)&&void 0!==re?re:void 0,dt)})).apply(this,arguments)}function qe(){return(qe=(0,l.Z)(function*(G){const{BuildInfo:O}=fe(),H={};(0,P.aq)()?H.iosBundleId=O.packageName:(0,P.ar)()?H.androidPackageName=O.packageName:(0,P.as)(G,"operation-not-supported-in-this-environment"),yield(0,P.au)(G,H)})).apply(this,arguments)}function at(){return(at=(0,l.Z)(function*(G,O,H){const{cordova:re}=fe();let Le=()=>{};try{yield new Promise((ut,dt)=>{let xe=null;function je(){var Ht;ut();const vn=null===(Ht=re.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof vn&&vn(),"function"==typeof H?.close&&H.close()}function Lt(){xe||(xe=window.setTimeout(()=>{dt((0,P.aw)(G,"redirect-cancelled-by-user"))},2e3))}function yn(){"visible"===document?.visibilityState&&Lt()}O.addPassiveListener(je),document.addEventListener("resume",Lt,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",yn,!1),Le=()=>{O.removePassiveListener(je),document.removeEventListener("resume",Lt,!1),document.removeEventListener("visibilitychange",yn,!1),xe&&window.clearTimeout(xe)}})}finally{Le()}})).apply(this,arguments)}function me(G){return it.apply(this,arguments)}function it(){return(it=(0,l.Z)(function*(G){const O=tt(G),H=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(H)).map(Le=>Le.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function tt(G){if((0,P.ap)(/[0-9a-zA-Z]+/.test(G),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(G);const O=new ArrayBuffer(G.length),H=new Uint8Array(O);for(let re=0;re<G.length;re++)H[re]=G.charCodeAt(re);return H}class Re extends P.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(O)),super.onEvent(O)}initialized(){var O=this;return(0,l.Z)(function*(){yield O.initPromise})()}}function oe(G){return de.apply(this,arguments)}function de(){return(de=(0,l.Z)(function*(G){const O=yield ne()._get(pe(G));return O&&(yield ne()._remove(pe(G))),O})).apply(this,arguments)}function X(){const G=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const re=Math.floor(Math.random()*O.length);G.push(O.charAt(re))}return G.join("")}function ne(){return(0,P.az)(P.b)}function pe(G){return(0,P.aA)("authEvent",G.config.apiKey,G.name)}function ze(G){if(!G?.includes("?"))return{};const[O,...H]=G.split("?");return(0,ae.zd)(H.join("?"))}function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Qt(){var G;return(null===(G=self?.location)||void 0===G?void 0:G.protocol)||null}function xi(G=(0,ae.z$)()){return!("file:"!==Qt()&&"ionic:"!==Qt()&&"capacitor:"!==Qt()||!G.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yr(){try{const G=self.localStorage,O=P.aI();if(G)return G.setItem(O,"1"),G.removeItem(O),!function Zr(G=(0,ae.z$)()){return function Wi(){return(0,ae.w1)()&&11===document?.documentMode}()||function Hn(G=(0,ae.z$)()){return/Edge\/\d+/.test(G)}(G)}()||(0,ae.hl)()}catch{return qi()&&(0,ae.hl)()}return!1}function qi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function zt(){return"http:"===Qt()||"https:"===Qt()}()||(0,ae.ru)()||xi())&&!function Kr(){return(0,ae.b$)()||(0,ae.UG)()}()&&Yr()&&!qi()}function Rr(){return xi()&&typeof document<"u"}function nt(){return(nt=(0,l.Z)(function*(){return!!Rr()&&new Promise(G=>{const O=setTimeout(()=>{G(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),G(!0)})})})).apply(this,arguments)}const ti={LOCAL:"local",NONE:"none",SESSION:"session"},Sn=P.ax,Ei="persistence";function Dn(G){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,l.Z)(function*(G){yield G._initializationPromise;const O=Ct(),H=P.aA(Ei,G.config.apiKey,G.name);O&&O.setItem(H,G._getPersistence())})).apply(this,arguments)}function Ct(){var G;try{return(null===(G=function ui(){return typeof window<"u"?window:null}())||void 0===G?void 0:G.sessionStorage)||null}catch{return null}}const bt=P.ax;class Ft{constructor(){this.browserResolver=P.az(P.k),this.cordovaResolver=P.az(class hn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(O){var H=this;return(0,l.Z)(function*(){const re=O._key();let Le=H.eventManagers.get(re);return Le||(Le=new Re(O),H.eventManagers.set(re,Le),H.attachCallbackListeners(O,Le)),Le})()}_openPopup(O){(0,P.as)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,H,re,Le){var ut=this;return(0,l.Z)(function*(){!function Ce(G){var O,H,re,Le,ut,dt,xe,je,Lt,yn;const Ht=fe();(0,P.ax)("function"==typeof(null===(O=Ht?.universalLinks)||void 0===O?void 0:O.subscribe),G,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(H=Ht?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(ut=null===(Le=null===(re=Ht?.cordova)||void 0===re?void 0:re.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===ut?void 0:ut.openUrl),G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(je=null===(xe=null===(dt=Ht?.cordova)||void 0===dt?void 0:dt.plugins)||void 0===xe?void 0:xe.browsertab)||void 0===je?void 0:je.isAvailable),G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(yn=null===(Lt=Ht?.cordova)||void 0===Lt?void 0:Lt.InAppBrowser)||void 0===yn?void 0:yn.open),G,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const dt=yield ut._initialize(O);yield dt.initialized(),dt.resetRedirect(),(0,P.aD)(),yield ut._originValidation(O);const xe=function Ie(G,O,H=null){return{type:O,eventId:H,urlResponse:null,sessionId:X(),postBody:null,tenantId:G.tenantId,error:(0,P.aw)(G,"no-auth-event")}}(O,re,Le);yield function Ye(G,O){return ne()._set(pe(G),O)}(O,xe);const je=yield function K(G,O,H){return W.apply(this,arguments)}(O,xe,H),Lt=yield function Fe(G){const{cordova:O}=fe();return new Promise(H=>{O.plugins.browsertab.isAvailable(re=>{let Le=null;re?O.plugins.browsertab.openUrl(G):Le=O.InAppBrowser.open(G,(0,P.av)()?"_blank":"_system","location=yes"),H(Le)})})}(je);return function Se(G,O,H){return at.apply(this,arguments)}(O,dt,Lt)})()}_isIframeWebStorageSupported(O,H){throw new Error("Method not implemented.")}_originValidation(O){const H=O._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function ee(G){return qe.apply(this,arguments)}(O)),this.originValidationPromises[H]}attachCallbackListeners(O,H){const{universalLinks:re,handleOpenURL:Le,BuildInfo:ut}=fe(),dt=setTimeout((0,l.Z)(function*(){yield oe(O),H.onEvent(Qe())}),500),xe=function(){var yn=(0,l.Z)(function*(Ht){clearTimeout(dt);const vn=yield oe(O);let ps=null;vn&&Ht?.url&&(ps=function we(G,O){var H,re;const Le=function $e(G){const O=ze(G),H=O.link?decodeURIComponent(O.link):void 0,re=ze(H).link,Le=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return ze(Le).link||Le||re||H||G}(O);if(Le.includes("/__/auth/callback")){const ut=ze(Le),dt=ut.firebaseError?function ue(G){try{return JSON.parse(G)}catch{return null}}(decodeURIComponent(ut.firebaseError)):null,xe=null===(re=null===(H=dt?.code)||void 0===H?void 0:H.split("auth/"))||void 0===re?void 0:re[1],je=xe?(0,P.aw)(xe):null;return je?{type:G.type,eventId:G.eventId,tenantId:G.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:G.type,eventId:G.eventId,tenantId:G.tenantId,sessionId:G.sessionId,urlResponse:Le,postBody:null}}return null}(vn,Ht.url)),H.onEvent(ps||Qe())});return function(vn){return yn.apply(this,arguments)}}();typeof re<"u"&&"function"==typeof re.subscribe&&re.subscribe(null,xe);const je=Le,Lt=`${ut.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var yn=(0,l.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Lt)&&xe({url:Ht}),"function"==typeof je)try{je(Ht)}catch(vn){console.error(vn)}});return function(Ht){return yn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(O){var H=this;return(0,l.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,H,re,Le){var ut=this;return(0,l.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openPopup(O,H,re,Le)})()}_openRedirect(O,H,re,Le){var ut=this;return(0,l.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openRedirect(O,H,re,Le)})()}_isIframeWebStorageSupported(O,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,H)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return Rr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,l.Z)(function*(){if(O.underlyingResolver)return;const H=yield function Qr(){return nt.apply(this,arguments)}();O.underlyingResolver=H?O.cordovaResolver:O.browserResolver})()}}function Ki(G){return G.unwrap()}function Li(G){return Vi(G)}function Vi(G){const{_tokenResponse:O}=G instanceof ae.ZR?G.customData:G;if(!O)return null;if(!(G instanceof ae.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return P.P.credentialFromResult(G);const H=O.providerId;if(!H||H===P.o.PASSWORD)return null;let re;switch(H){case P.o.GOOGLE:re=P.Q;break;case P.o.FACEBOOK:re=P.N;break;case P.o.GITHUB:re=P.T;break;case P.o.TWITTER:re=P.W;break;default:const{oauthIdToken:Le,oauthAccessToken:ut,oauthTokenSecret:dt,pendingToken:xe,nonce:je}=O;return ut||dt||Le||xe?xe?H.startsWith("saml.")?P.aL._create(H,xe):P.J._fromParams({providerId:H,signInMethod:H,pendingToken:xe,idToken:Le,accessToken:ut}):new P.U(H).credential({idToken:Le,accessToken:ut,rawNonce:je}):null}return G instanceof ae.ZR?re.credentialFromError(G):re.credentialFromResult(G)}function Bt(G,O){return O.catch(H=>{throw H instanceof ae.ZR&&function Ot(G,O){var H,re;const Le=null===(H=O.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===(null===(re=O)||void 0===re?void 0:re.code))O.resolver=new _i(G,P.an(G,O));else if(Le){const ut=Vi(O),dt=O;ut&&(dt.credential=ut,dt.tenantId=Le.tenantId||void 0,dt.email=Le.email||void 0,dt.phoneNumber=Le.phoneNumber||void 0)}}(G,H),H}).then(H=>{const Le=H.user;return{operationType:H.operationType,credential:Li(H),additionalUserInfo:P.al(H),user:Fn.getOrCreate(Le)}})}function ir(G,O){return sn.apply(this,arguments)}function sn(){return(sn=(0,l.Z)(function*(G,O){const H=yield O;return{verificationId:H.verificationId,confirm:re=>Bt(G,H.confirm(re))}})).apply(this,arguments)}class _i{constructor(O,H){this.resolver=H,this.auth=function ni(G){return G.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return Bt(Ki(this.auth),this.resolver.resolveSignIn(O))}}class Fn{constructor(O){this._delegate=O,this.multiFactor=P.ao(O)}static getOrCreate(O){return Fn.USER_MAP.has(O)||Fn.USER_MAP.set(O,new Fn(O)),Fn.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var H=this;return(0,l.Z)(function*(){return Bt(H.auth,P.Z(H._delegate,O))})()}linkWithPhoneNumber(O,H){var re=this;return(0,l.Z)(function*(){return ir(re.auth,P.l(re._delegate,O,H))})()}linkWithPopup(O){var H=this;return(0,l.Z)(function*(){return Bt(H.auth,P.d(H._delegate,O,Ft))})()}linkWithRedirect(O){var H=this;return(0,l.Z)(function*(){return yield Dn(P.aE(H.auth)),P.g(H._delegate,O,Ft)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var H=this;return(0,l.Z)(function*(){return Bt(H.auth,P._(H._delegate,O))})()}reauthenticateWithPhoneNumber(O,H){return ir(this.auth,P.r(this._delegate,O,H))}reauthenticateWithPopup(O){return Bt(this.auth,P.e(this._delegate,O,Ft))}reauthenticateWithRedirect(O){var H=this;return(0,l.Z)(function*(){return yield Dn(P.aE(H.auth)),P.h(H._delegate,O,Ft)})()}sendEmailVerification(O){return P.ab(this._delegate,O)}unlink(O){var H=this;return(0,l.Z)(function*(){return yield P.ak(H._delegate,O),H})()}updateEmail(O){return P.ag(this._delegate,O)}updatePassword(O){return P.ah(this._delegate,O)}updatePhoneNumber(O){return P.u(this._delegate,O)}updateProfile(O){return P.af(this._delegate,O)}verifyBeforeUpdateEmail(O,H){return P.ac(this._delegate,O,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fn.USER_MAP=new WeakMap;const st=P.ax;let De=(()=>{class G{constructor(H,re){if(this.app=H,re.isInitialized())return this._delegate=re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Le}=H.options;st(Le,"invalid-api-key",{appName:H.name}),st(Le,"invalid-api-key",{appName:H.name});const ut=typeof window<"u"?Ft:void 0;this._delegate=re.initialize({options:{persistence:At(Le,H.name),popupRedirectResolver:ut}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,re){P.G(this._delegate,H,re)}applyActionCode(H){return P.a2(this._delegate,H)}checkActionCode(H){return P.a3(this._delegate,H)}confirmPasswordReset(H,re){return P.a1(this._delegate,H,re)}createUserWithEmailAndPassword(H,re){var Le=this;return(0,l.Z)(function*(){return Bt(Le._delegate,P.a5(Le._delegate,H,re))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return P.aa(this._delegate,H)}isSignInWithEmailLink(H){return P.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,l.Z)(function*(){st(Kn(),H._delegate,"operation-not-supported-in-this-environment");const re=yield P.j(H._delegate,Ft);return re?Bt(H._delegate,Promise.resolve(re)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function _n(G,O){(0,P.aE)(G)._logFramework(O)}(this._delegate,H)}onAuthStateChanged(H,re,Le){const{next:ut,error:dt,complete:xe}=ot(H,re,Le);return this._delegate.onAuthStateChanged(ut,dt,xe)}onIdTokenChanged(H,re,Le){const{next:ut,error:dt,complete:xe}=ot(H,re,Le);return this._delegate.onIdTokenChanged(ut,dt,xe)}sendSignInLinkToEmail(H,re){return P.a7(this._delegate,H,re)}sendPasswordResetEmail(H,re){return P.a0(this._delegate,H,re||void 0)}setPersistence(H){var re=this;return(0,l.Z)(function*(){let Le;switch(function ao(G,O){Sn(Object.values(ti).includes(O),G,"invalid-persistence-type"),(0,ae.b$)()?Sn(O!==ti.SESSION,G,"unsupported-persistence-type"):(0,ae.UG)()?Sn(O===ti.NONE,G,"unsupported-persistence-type"):qi()?Sn(O===ti.NONE||O===ti.LOCAL&&(0,ae.hl)(),G,"unsupported-persistence-type"):Sn(O===ti.NONE||Yr(),G,"unsupported-persistence-type")}(re._delegate,H),H){case ti.SESSION:Le=P.a;break;case ti.LOCAL:Le=(yield P.az(P.i)._isAvailable())?P.i:P.b;break;case ti.NONE:Le=P.L;break;default:return P.as("argument-error",{appName:re._delegate.name})}return re._delegate.setPersistence(Le)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Bt(this._delegate,P.X(this._delegate))}signInWithCredential(H){return Bt(this._delegate,P.Y(this._delegate,H))}signInWithCustomToken(H){return Bt(this._delegate,P.$(this._delegate,H))}signInWithEmailAndPassword(H,re){return Bt(this._delegate,P.a6(this._delegate,H,re))}signInWithEmailLink(H,re){return Bt(this._delegate,P.a9(this._delegate,H,re))}signInWithPhoneNumber(H,re){return ir(this._delegate,P.s(this._delegate,H,re))}signInWithPopup(H){var re=this;return(0,l.Z)(function*(){return st(Kn(),re._delegate,"operation-not-supported-in-this-environment"),Bt(re._delegate,P.c(re._delegate,H,Ft))})()}signInWithRedirect(H){var re=this;return(0,l.Z)(function*(){return st(Kn(),re._delegate,"operation-not-supported-in-this-environment"),yield Dn(re._delegate),P.f(re._delegate,H,Ft)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return P.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return G.Persistence=ti,G})();function ot(G,O,H){let re=G;"function"!=typeof G&&({next:re,error:O,complete:H}=G);const Le=re;return{next:dt=>Le(dt&&Fn.getOrCreate(dt)),error:O,complete:H}}function At(G,O){const H=function bn(G,O){const H=Ct();if(!H)return[];const re=P.aA(Ei,G,O);switch(H.getItem(re)){case ti.NONE:return[P.L];case ti.LOCAL:return[P.i,P.a];case ti.SESSION:return[P.a];default:return[]}}(G,O);if(typeof self<"u"&&!H.includes(P.i)&&H.push(P.i),typeof window<"u")for(const re of[P.b,P.a])H.includes(re)||H.push(re);return H.includes(P.L)||H.push(P.L),H}class Mt{constructor(){this.providerId="phone",this._delegate=new P.P(Ki($.Z.auth()))}static credential(O,H){return P.P.credential(O,H)}verifyPhoneNumber(O,H){return this._delegate.verifyPhoneNumber(O,H)}unwrap(){return this._delegate}}Mt.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Mt.PROVIDER_ID=P.P.PROVIDER_ID;const ln=P.ax;class q{constructor(O,H,re=$.Z.app()){var Le;ln(null===(Le=re.options)||void 0===Le?void 0:Le.apiKey,"invalid-api-key",{appName:re.name}),this._delegate=new P.R(O,H,re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function J(G){G.INTERNAL.registerComponent(new ge.wA("auth-compat",O=>{const H=O.getProvider("app-compat").getImmediate(),re=O.getProvider("auth");return new De(H,re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:Mt,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:q,TwitterAuthProvider:P.W,Auth:De,AuthCredential:P.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),G.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(yt,Oe,U)=>{U.d(Oe,{y:()=>fe});var l=U(930),$=U(727),P=U(8822),ae=U(9635),ce=U(2416),_e=U(576),ge=U(2806);let fe=(()=>{class ee{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const Se=new ee;return Se.source=this,Se.operator=Fe,Se}subscribe(Fe,Se,at){const Ce=function W(ee){return ee&&ee instanceof l.Lv||function K(ee){return ee&&(0,_e.m)(ee.next)&&(0,_e.m)(ee.error)&&(0,_e.m)(ee.complete)}(ee)&&(0,$.Nn)(ee)}(Fe)?Fe:new l.Hp(Fe,Se,at);return(0,ge.x)(()=>{const{operator:me,source:it}=this;Ce.add(me?me.call(Ce,it):it?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(Se){Fe.error(Se)}}forEach(Fe,Se){return new(Se=ve(Se))((at,Ce)=>{const me=new l.Hp({next:it=>{try{Fe(it)}catch(tt){Ce(tt),me.unsubscribe()}},error:Ce,complete:at});this.subscribe(me)})}_subscribe(Fe){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Fe)}[P.L](){return this}pipe(...Fe){return(0,ae.U)(Fe)(this)}toPromise(Fe){return new(Fe=ve(Fe))((Se,at)=>{let Ce;this.subscribe(me=>Ce=me,me=>at(me),()=>Se(Ce))})}}return ee.create=qe=>new ee(qe),ee})();function ve(ee){var qe;return null!==(qe=ee??ce.v.Promise)&&void 0!==qe?qe:Promise}},7579:(yt,Oe,U)=>{U.d(Oe,{x:()=>ge});var l=U(9751),$=U(727);const ae=(0,U(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=U(8737),_e=U(2806);let ge=(()=>{class ve extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const ee=new fe(this,this);return ee.operator=W,ee}_throwIfClosed(){if(this.closed)throw new ae}next(W){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(W)}})}error(W){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:ee}=this;for(;ee.length;)ee.shift().error(W)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:ee,isStopped:qe,observers:Fe}=this;return ee||qe?$.Lc:(this.currentObservers=null,Fe.push(W),new $.w0(()=>{this.currentObservers=null,(0,ce.P)(Fe,W)}))}_checkFinalizedStatuses(W){const{hasError:ee,thrownError:qe,isStopped:Fe}=this;ee?W.error(qe):Fe&&W.complete()}asObservable(){const W=new l.y;return W.source=this,W}}return ve.create=(K,W)=>new fe(K,W),ve})();class fe extends ge{constructor(K,W){super(),this.destination=K,this.source=W}next(K){var W,ee;null===(ee=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===ee||ee.call(W,K)}error(K){var W,ee;null===(ee=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===ee||ee.call(W,K)}complete(){var K,W;null===(W=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===W||W.call(K)}_subscribe(K){var W,ee;return null!==(ee=null===(W=this.source)||void 0===W?void 0:W.subscribe(K))&&void 0!==ee?ee:$.Lc}}},930:(yt,Oe,U)=>{U.d(Oe,{Hp:()=>at,Lv:()=>ee});var l=U(576),$=U(727),P=U(2416),ae=U(7849),ce=U(5032);const _e=ve("C",void 0,void 0);function ve(Ve,Re,Ie){return{kind:Ve,value:Re,error:Ie}}var K=U(3410),W=U(2806);class ee extends $.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,$.Nn)(Re)&&Re.add(this)):this.destination=tt}static create(Re,Ie,Ye){return new at(Re,Ie,Ye)}next(Re){this.isStopped?it(function fe(Ve){return ve("N",Ve,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?it(function ge(Ve){return ve("E",void 0,Ve)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?it(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Fe(Ve,Re){return qe.call(Ve,Re)}class Se{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Re)}catch(Ye){Ce(Ye)}}error(Re){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Re)}catch(Ye){Ce(Ye)}else Ce(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Ie){Ce(Ie)}}}class at extends ee{constructor(Re,Ie,Ye){let oe;if(super(),(0,l.m)(Re)||!Re)oe={next:Re??void 0,error:Ie??void 0,complete:Ye??void 0};else{let de;this&&P.v.useDeprecatedNextContext?(de=Object.create(Re),de.unsubscribe=()=>this.unsubscribe(),oe={next:Re.next&&Fe(Re.next,de),error:Re.error&&Fe(Re.error,de),complete:Re.complete&&Fe(Re.complete,de)}):oe=Re}this.destination=new Se(oe)}}function Ce(Ve){P.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ve):(0,ae.h)(Ve)}function it(Ve,Re){const{onStoppedNotification:Ie}=P.v;Ie&&K.z.setTimeout(()=>Ie(Ve,Re))}const tt={closed:!0,next:ce.Z,error:function me(Ve){throw Ve},complete:ce.Z}},727:(yt,Oe,U)=>{U.d(Oe,{Lc:()=>_e,w0:()=>ce,Nn:()=>ge});var l=U(576);const P=(0,U(3888).d)(ve=>function(W){ve(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((ee,qe)=>`${qe+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ae=U(8737);class ce{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Fe of W)Fe.remove(this);else W.remove(this);const{initialTeardown:ee}=this;if((0,l.m)(ee))try{ee()}catch(Fe){K=Fe instanceof P?Fe.errors:[Fe]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Fe of qe)try{fe(Fe)}catch(Se){K=K??[],Se instanceof P?K=[...K,...Se.errors]:K.push(Se)}}if(K)throw new P(K)}}add(K){var W;if(K&&K!==this)if(this.closed)fe(K);else{if(K instanceof ce){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(K)}}_hasParent(K){const{_parentage:W}=this;return W===K||Array.isArray(W)&&W.includes(K)}_addParent(K){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(K),W):W?[W,K]:K}_removeParent(K){const{_parentage:W}=this;W===K?this._parentage=null:Array.isArray(W)&&(0,ae.P)(W,K)}remove(K){const{_finalizers:W}=this;W&&(0,ae.P)(W,K),K instanceof ce&&K._removeParent(this)}}ce.EMPTY=(()=>{const ve=new ce;return ve.closed=!0,ve})();const _e=ce.EMPTY;function ge(ve){return ve instanceof ce||ve&&"closed"in ve&&(0,l.m)(ve.remove)&&(0,l.m)(ve.add)&&(0,l.m)(ve.unsubscribe)}function fe(ve){(0,l.m)(ve)?ve():ve.unsubscribe()}},2416:(yt,Oe,U)=>{U.d(Oe,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(yt,Oe,U)=>{U.d(Oe,{E:()=>$});const $=new(U(9751).y)(ce=>ce.complete())},8996:(yt,Oe,U)=>{U.d(Oe,{D:()=>Re});var l=U(8421),$=U(5363),P=U(9468),_e=U(9751),fe=U(2202),ve=U(576),K=U(9672);function ee(Ie,Ye){if(!Ie)throw new Error("Iterable cannot be null");return new _e.y(oe=>{(0,K.f)(oe,Ye,()=>{const de=Ie[Symbol.asyncIterator]();(0,K.f)(oe,Ye,()=>{de.next().then(we=>{we.done?oe.complete():oe.next(we.value)})},0,!0)})})}var qe=U(3670),Fe=U(8239),Se=U(1144),at=U(6495),Ce=U(2206),me=U(4532),it=U(3260);function Re(Ie,Ye){return Ye?function Ve(Ie,Ye){if(null!=Ie){if((0,qe.c)(Ie))return function ae(Ie,Ye){return(0,l.Xf)(Ie).pipe((0,P.R)(Ye),(0,$.Q)(Ye))}(Ie,Ye);if((0,Se.z)(Ie))return function ge(Ie,Ye){return new _e.y(oe=>{let de=0;return Ye.schedule(function(){de===Ie.length?oe.complete():(oe.next(Ie[de++]),oe.closed||this.schedule())})})}(Ie,Ye);if((0,Fe.t)(Ie))return function ce(Ie,Ye){return(0,l.Xf)(Ie).pipe((0,P.R)(Ye),(0,$.Q)(Ye))}(Ie,Ye);if((0,Ce.D)(Ie))return ee(Ie,Ye);if((0,at.T)(Ie))return function W(Ie,Ye){return new _e.y(oe=>{let de;return(0,K.f)(oe,Ye,()=>{de=Ie[fe.h](),(0,K.f)(oe,Ye,()=>{let we,X;try{({value:we,done:X}=de.next())}catch(ne){return void oe.error(ne)}X?oe.complete():oe.next(we)},0,!0)}),()=>(0,ve.m)(de?.return)&&de.return()})}(Ie,Ye);if((0,it.L)(Ie))return function tt(Ie,Ye){return ee((0,it.Q)(Ie),Ye)}(Ie,Ye)}throw(0,me.z)(Ie)}(Ie,Ye):(0,l.Xf)(Ie)}},8421:(yt,Oe,U)=>{U.d(Oe,{Xf:()=>qe});var l=U(655),$=U(1144),P=U(8239),ae=U(9751),ce=U(3670),_e=U(2206),ge=U(4532),fe=U(6495),ve=U(3260),K=U(576),W=U(7849),ee=U(8822);function qe(Ve){if(Ve instanceof ae.y)return Ve;if(null!=Ve){if((0,ce.c)(Ve))return function Fe(Ve){return new ae.y(Re=>{const Ie=Ve[ee.L]();if((0,K.m)(Ie.subscribe))return Ie.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,$.z)(Ve))return function Se(Ve){return new ae.y(Re=>{for(let Ie=0;Ie<Ve.length&&!Re.closed;Ie++)Re.next(Ve[Ie]);Re.complete()})}(Ve);if((0,P.t)(Ve))return function at(Ve){return new ae.y(Re=>{Ve.then(Ie=>{Re.closed||(Re.next(Ie),Re.complete())},Ie=>Re.error(Ie)).then(null,W.h)})}(Ve);if((0,_e.D)(Ve))return me(Ve);if((0,fe.T)(Ve))return function Ce(Ve){return new ae.y(Re=>{for(const Ie of Ve)if(Re.next(Ie),Re.closed)return;Re.complete()})}(Ve);if((0,ve.L)(Ve))return function it(Ve){return me((0,ve.Q)(Ve))}(Ve)}throw(0,ge.z)(Ve)}function me(Ve){return new ae.y(Re=>{(function tt(Ve,Re){var Ie,Ye,oe,de;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,l.KL)(Ve);!(Ye=yield Ie.next()).done;)if(Re.next(Ye.value),Re.closed)return}catch(we){oe={error:we}}finally{try{Ye&&!Ye.done&&(de=Ie.return)&&(yield de.call(Ie))}finally{if(oe)throw oe.error}}Re.complete()})})(Ve,Re).catch(Ie=>Re.error(Ie))})}},6451:(yt,Oe,U)=>{U.d(Oe,{T:()=>_e});var l=U(8189),$=U(8421),P=U(515),ae=U(7669),ce=U(8996);function _e(...ge){const fe=(0,ae.yG)(ge),ve=(0,ae._6)(ge,1/0),K=ge;return K.length?1===K.length?(0,$.Xf)(K[0]):(0,l.J)(ve)((0,ce.D)(K,fe)):P.E}},5403:(yt,Oe,U)=>{U.d(Oe,{x:()=>$});var l=U(930);function $(ae,ce,_e,ge,fe){return new P(ae,ce,_e,ge,fe)}class P extends l.Lv{constructor(ce,_e,ge,fe,ve,K){super(ce),this.onFinalize=ve,this.shouldUnsubscribe=K,this._next=_e?function(W){try{_e(W)}catch(ee){ce.error(ee)}}:super._next,this._error=fe?function(W){try{fe(W)}catch(ee){ce.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(W){ce.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(yt,Oe,U)=>{U.d(Oe,{U:()=>P});var l=U(4482),$=U(5403);function P(ae,ce){return(0,l.e)((_e,ge)=>{let fe=0;_e.subscribe((0,$.x)(ge,ve=>{ge.next(ae.call(ce,ve,fe++))}))})}},8189:(yt,Oe,U)=>{U.d(Oe,{J:()=>P});var l=U(5577),$=U(4671);function P(ae=1/0){return(0,l.z)($.y,ae)}},5577:(yt,Oe,U)=>{U.d(Oe,{z:()=>fe});var l=U(4004),$=U(8421),P=U(4482),ae=U(9672),ce=U(5403),ge=U(576);function fe(ve,K,W=1/0){return(0,ge.m)(K)?fe((ee,qe)=>(0,l.U)((Fe,Se)=>K(ee,Fe,qe,Se))((0,$.Xf)(ve(ee,qe))),W):("number"==typeof K&&(W=K),(0,P.e)((ee,qe)=>function _e(ve,K,W,ee,qe,Fe,Se,at){const Ce=[];let me=0,it=0,tt=!1;const Ve=()=>{tt&&!Ce.length&&!me&&K.complete()},Re=Ye=>me<ee?Ie(Ye):Ce.push(Ye),Ie=Ye=>{Fe&&K.next(Ye),me++;let oe=!1;(0,$.Xf)(W(Ye,it++)).subscribe((0,ce.x)(K,de=>{qe?.(de),Fe?Re(de):K.next(de)},()=>{oe=!0},void 0,()=>{if(oe)try{for(me--;Ce.length&&me<ee;){const de=Ce.shift();Se?(0,ae.f)(K,Se,()=>Ie(de)):Ie(de)}Ve()}catch(de){K.error(de)}}))};return ve.subscribe((0,ce.x)(K,Re,()=>{tt=!0,Ve()})),()=>{at?.()}}(ee,qe,ve,W)))}},5363:(yt,Oe,U)=>{U.d(Oe,{Q:()=>ae});var l=U(9672),$=U(4482),P=U(5403);function ae(ce,_e=0){return(0,$.e)((ge,fe)=>{ge.subscribe((0,P.x)(fe,ve=>(0,l.f)(fe,ce,()=>fe.next(ve),_e),()=>(0,l.f)(fe,ce,()=>fe.complete(),_e),ve=>(0,l.f)(fe,ce,()=>fe.error(ve),_e)))})}},3099:(yt,Oe,U)=>{U.d(Oe,{B:()=>ce});var l=U(8421),$=U(7579),P=U(930),ae=U(4482);function ce(ge={}){const{connector:fe=(()=>new $.x),resetOnError:ve=!0,resetOnComplete:K=!0,resetOnRefCountZero:W=!0}=ge;return ee=>{let qe,Fe,Se,at=0,Ce=!1,me=!1;const it=()=>{Fe?.unsubscribe(),Fe=void 0},tt=()=>{it(),qe=Se=void 0,Ce=me=!1},Ve=()=>{const Re=qe;tt(),Re?.unsubscribe()};return(0,ae.e)((Re,Ie)=>{at++,!me&&!Ce&&it();const Ye=Se=Se??fe();Ie.add(()=>{at--,0===at&&!me&&!Ce&&(Fe=_e(Ve,W))}),Ye.subscribe(Ie),!qe&&at>0&&(qe=new P.Hp({next:oe=>Ye.next(oe),error:oe=>{me=!0,it(),Fe=_e(tt,ve,oe),Ye.error(oe)},complete:()=>{Ce=!0,it(),Fe=_e(tt,K),Ye.complete()}}),(0,l.Xf)(Re).subscribe(qe))})(ee)}}function _e(ge,fe,...ve){if(!0===fe)return void ge();if(!1===fe)return;const K=new P.Hp({next:()=>{K.unsubscribe(),ge()}});return fe(...ve).subscribe(K)}},9468:(yt,Oe,U)=>{U.d(Oe,{R:()=>$});var l=U(4482);function $(P,ae=0){return(0,l.e)((ce,_e)=>{_e.add(P.schedule(()=>ce.subscribe(_e),ae))})}},8505:(yt,Oe,U)=>{U.d(Oe,{b:()=>ce});var l=U(576),$=U(4482),P=U(5403),ae=U(4671);function ce(_e,ge,fe){const ve=(0,l.m)(_e)||ge||fe?{next:_e,error:ge,complete:fe}:_e;return ve?(0,$.e)((K,W)=>{var ee;null===(ee=ve.subscribe)||void 0===ee||ee.call(ve);let qe=!0;K.subscribe((0,P.x)(W,Fe=>{var Se;null===(Se=ve.next)||void 0===Se||Se.call(ve,Fe),W.next(Fe)},()=>{var Fe;qe=!1,null===(Fe=ve.complete)||void 0===Fe||Fe.call(ve),W.complete()},Fe=>{var Se;qe=!1,null===(Se=ve.error)||void 0===Se||Se.call(ve,Fe),W.error(Fe)},()=>{var Fe,Se;qe&&(null===(Fe=ve.unsubscribe)||void 0===Fe||Fe.call(ve)),null===(Se=ve.finalize)||void 0===Se||Se.call(ve)}))}):ae.y}},4408:(yt,Oe,U)=>{U.d(Oe,{o:()=>ce});var l=U(727);class $ extends l.w0{constructor(ge,fe){super()}schedule(ge,fe=0){return this}}const P={setInterval(_e,ge,...fe){const{delegate:ve}=P;return ve?.setInterval?ve.setInterval(_e,ge,...fe):setInterval(_e,ge,...fe)},clearInterval(_e){const{delegate:ge}=P;return(ge?.clearInterval||clearInterval)(_e)},delegate:void 0};var ae=U(8737);class ce extends ${constructor(ge,fe){super(ge,fe),this.scheduler=ge,this.work=fe,this.pending=!1}schedule(ge,fe=0){var ve;if(this.closed)return this;this.state=ge;const K=this.id,W=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(W,K,fe)),this.pending=!0,this.delay=fe,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(W,this.id,fe),this}requestAsyncId(ge,fe,ve=0){return P.setInterval(ge.flush.bind(ge,this),ve)}recycleAsyncId(ge,fe,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return fe;null!=fe&&P.clearInterval(fe)}execute(ge,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ge,fe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,fe){let K,ve=!1;try{this.work(ge)}catch(W){ve=!0,K=W||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:ge,scheduler:fe}=this,{actions:ve}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=ge&&(this.id=this.recycleAsyncId(fe,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(yt,Oe,U)=>{U.d(Oe,{v:()=>P});var l=U(6063);class ${constructor(ce,_e=$.now){this.schedulerActionCtor=ce,this.now=_e}schedule(ce,_e=0,ge){return new this.schedulerActionCtor(this,ce).schedule(ge,_e)}}$.now=l.l.now;class P extends ${constructor(ce,_e=$.now){super(ce,_e),this.actions=[],this._active=!1}flush(ce){const{actions:_e}=this;if(this._active)return void _e.push(ce);let ge;this._active=!0;do{if(ge=ce.execute(ce.state,ce.delay))break}while(ce=_e.shift());if(this._active=!1,ge){for(;ce=_e.shift();)ce.unsubscribe();throw ge}}}},4986:(yt,Oe,U)=>{U.d(Oe,{z:()=>P});var l=U(4408);const P=new(U(7565).v)(l.o)},6063:(yt,Oe,U)=>{U.d(Oe,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(yt,Oe,U)=>{U.d(Oe,{z:()=>l});const l={setTimeout($,P,...ae){const{delegate:ce}=l;return ce?.setTimeout?ce.setTimeout($,P,...ae):setTimeout($,P,...ae)},clearTimeout($){const{delegate:P}=l;return(P?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(yt,Oe,U)=>{U.d(Oe,{h:()=>$});const $=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(yt,Oe,U)=>{U.d(Oe,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(yt,Oe,U)=>{U.d(Oe,{_6:()=>_e,jO:()=>ae,yG:()=>ce});var l=U(576);function P(ge){return ge[ge.length-1]}function ae(ge){return(0,l.m)(P(ge))?ge.pop():void 0}function ce(ge){return function $(ge){return ge&&(0,l.m)(ge.schedule)}(P(ge))?ge.pop():void 0}function _e(ge,fe){return"number"==typeof P(ge)?ge.pop():fe}},8737:(yt,Oe,U)=>{function l($,P){if($){const ae=$.indexOf(P);0<=ae&&$.splice(ae,1)}}U.d(Oe,{P:()=>l})},3888:(yt,Oe,U)=>{function l($){const ae=$(ce=>{Error.call(ce),ce.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}U.d(Oe,{d:()=>l})},2806:(yt,Oe,U)=>{U.d(Oe,{O:()=>ae,x:()=>P});var l=U(2416);let $=null;function P(ce){if(l.v.useDeprecatedSynchronousErrorHandling){const _e=!$;if(_e&&($={errorThrown:!1,error:null}),ce(),_e){const{errorThrown:ge,error:fe}=$;if($=null,ge)throw fe}}else ce()}function ae(ce){l.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ce)}},9672:(yt,Oe,U)=>{function l($,P,ae,ce=0,_e=!1){const ge=P.schedule(function(){ae(),_e?$.add(this.schedule(null,ce)):this.unsubscribe()},ce);if($.add(ge),!_e)return ge}U.d(Oe,{f:()=>l})},4671:(yt,Oe,U)=>{function l($){return $}U.d(Oe,{y:()=>l})},1144:(yt,Oe,U)=>{U.d(Oe,{z:()=>l});const l=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(yt,Oe,U)=>{U.d(Oe,{D:()=>$});var l=U(576);function $(P){return Symbol.asyncIterator&&(0,l.m)(P?.[Symbol.asyncIterator])}},576:(yt,Oe,U)=>{function l($){return"function"==typeof $}U.d(Oe,{m:()=>l})},3670:(yt,Oe,U)=>{U.d(Oe,{c:()=>P});var l=U(8822),$=U(576);function P(ae){return(0,$.m)(ae[l.L])}},6495:(yt,Oe,U)=>{U.d(Oe,{T:()=>P});var l=U(2202),$=U(576);function P(ae){return(0,$.m)(ae?.[l.h])}},8239:(yt,Oe,U)=>{U.d(Oe,{t:()=>$});var l=U(576);function $(P){return(0,l.m)(P?.then)}},3260:(yt,Oe,U)=>{U.d(Oe,{L:()=>ae,Q:()=>P});var l=U(655),$=U(576);function P(ce){return(0,l.FC)(this,arguments,function*(){const ge=ce.getReader();try{for(;;){const{value:fe,done:ve}=yield(0,l.qq)(ge.read());if(ve)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(fe)}}finally{ge.releaseLock()}})}function ae(ce){return(0,$.m)(ce?.getReader)}},4482:(yt,Oe,U)=>{U.d(Oe,{A:()=>$,e:()=>P});var l=U(576);function $(ae){return(0,l.m)(ae?.lift)}function P(ae){return ce=>{if($(ce))return ce.lift(function(_e){try{return ae(_e,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(yt,Oe,U)=>{function l(){}U.d(Oe,{Z:()=>l})},9635:(yt,Oe,U)=>{U.d(Oe,{U:()=>P,z:()=>$});var l=U(4671);function $(...ae){return P(ae)}function P(ae){return 0===ae.length?l.y:1===ae.length?ae[0]:function(_e){return ae.reduce((ge,fe)=>fe(ge),_e)}}},7849:(yt,Oe,U)=>{U.d(Oe,{h:()=>P});var l=U(2416),$=U(3410);function P(ae){$.z.setTimeout(()=>{const{onUnhandledError:ce}=l.v;if(!ce)throw ae;ce(ae)})}},4532:(yt,Oe,U)=>{function l($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Oe,{z:()=>l})},655:(yt,Oe,U)=>{function ae(X,ne){var pe={};for(var ue in X)Object.prototype.hasOwnProperty.call(X,ue)&&ne.indexOf(ue)<0&&(pe[ue]=X[ue]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var $e=0;for(ue=Object.getOwnPropertySymbols(X);$e<ue.length;$e++)ne.indexOf(ue[$e])<0&&Object.prototype.propertyIsEnumerable.call(X,ue[$e])&&(pe[ue[$e]]=X[ue[$e]])}return pe}function fe(X,ne,pe,ue){return new(pe||(pe=Promise))(function(ze,Et){function hn(_n){try{Qe(ue.next(_n))}catch(xn){Et(xn)}}function qt(_n){try{Qe(ue.throw(_n))}catch(xn){Et(xn)}}function Qe(_n){_n.done?ze(_n.value):function $e(ze){return ze instanceof pe?ze:new pe(function(Et){Et(ze)})}(_n.value).then(hn,qt)}Qe((ue=ue.apply(X,ne||[])).next())})}function Ce(X){return this instanceof Ce?(this.v=X,this):new Ce(X)}function me(X,ne,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,ue=pe.apply(X,ne||[]),ze=[];return $e={},Et("next"),Et("throw"),Et("return"),$e[Symbol.asyncIterator]=function(){return this},$e;function Et(un){ue[un]&&($e[un]=function(cn){return new Promise(function(Qt,zt){ze.push([un,cn,Qt,zt])>1||hn(un,cn)})})}function hn(un,cn){try{!function qt(un){un.value instanceof Ce?Promise.resolve(un.value.v).then(Qe,_n):xn(ze[0][2],un)}(ue[un](cn))}catch(Qt){xn(ze[0][3],Qt)}}function Qe(un){hn("next",un)}function _n(un){hn("throw",un)}function xn(un,cn){un(cn),ze.shift(),ze.length&&hn(ze[0][0],ze[0][1])}}function tt(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ne=X[Symbol.asyncIterator];return ne?ne.call(X):(X=function ee(X){var ne="function"==typeof Symbol&&Symbol.iterator,pe=ne&&X[ne],ue=0;if(pe)return pe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ue>=X.length&&(X=void 0),{value:X&&X[ue++],done:!X}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),pe={},ue("next"),ue("throw"),ue("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function ue(ze){pe[ze]=X[ze]&&function(Et){return new Promise(function(hn,qt){!function $e(ze,Et,hn,qt){Promise.resolve(qt).then(function(Qe){ze({value:Qe,done:hn})},Et)}(hn,qt,(Et=X[ze](Et)).done,Et.value)})}}}U.d(Oe,{FC:()=>me,KL:()=>tt,_T:()=>ae,mG:()=>fe,qq:()=>Ce})},4650:(yt,Oe,U)=>{U.d(Oe,{$8M:()=>Yl,$Z:()=>Bg,AFp:()=>lT,AaK:()=>fe,Akn:()=>eo,AsE:()=>xv,BQk:()=>ru,CHM:()=>Bh,CRH:()=>BI,CZH:()=>Mm,CqO:()=>ub,D6c:()=>xk,DdM:()=>wI,EJc:()=>rk,EpF:()=>ab,F$t:()=>pb,F4k:()=>lb,FYo:()=>rA,FiY:()=>Ge,G48:()=>mk,Gf:()=>VI,GfV:()=>BE,GkF:()=>cv,Gpc:()=>W,HTZ:()=>nw,Hsn:()=>gb,JOm:()=>Ra,KtG:()=>oa,LFG:()=>Ln,LSH:()=>lg,Lbi:()=>ek,Lck:()=>eM,MAs:()=>sb,MMx:()=>ew,NdJ:()=>hv,OlP:()=>On,Oqu:()=>Lf,PXZ:()=>pk,Q6J:()=>lv,QGY:()=>dv,QP$:()=>Le,QbO:()=>tk,Qsj:()=>cP,R0b:()=>Vo,RDi:()=>ig,Rgc:()=>Kf,SBq:()=>Qu,Sil:()=>ok,Suo:()=>UI,TTD:()=>Vs,TgZ:()=>Bd,Tol:()=>Ib,Udp:()=>om,VKq:()=>EI,W1O:()=>$I,WLB:()=>tw,X6Q:()=>cc,XFs:()=>nt,Xpm:()=>De,Xts:()=>Y_,Y36:()=>Il,YKP:()=>dI,YNc:()=>rb,Yjl:()=>G,Yz7:()=>cn,Z0I:()=>Kr,ZZ4:()=>Mw,_Bn:()=>cI,_UZ:()=>ob,_Vd:()=>Yu,_c5:()=>Dk,_uU:()=>xb,aQg:()=>qm,c2e:()=>nk,cJS:()=>zt,cg1:()=>gm,dDg:()=>ck,dqk:()=>Ft,eFA:()=>Iw,ekj:()=>am,eoX:()=>ET,f3M:()=>S,g9A:()=>cT,h0i:()=>Jd,hGG:()=>Ak,hij:()=>ic,iGM:()=>LI,ifc:()=>bt,ip1:()=>aT,jDz:()=>fI,kEZ:()=>CI,kL8:()=>Fv,l5B:()=>bI,lG2:()=>J,lqb:()=>Oa,lri:()=>Om,n5z:()=>Gs,oAB:()=>ln,oJD:()=>ag,oxw:()=>fv,q4F:()=>HE,qLn:()=>Ef,qOj:()=>nm,qZA:()=>rm,qbA:()=>II,rFY:()=>TI,rWj:()=>Ew,s9C:()=>pv,sBO:()=>tr,sIi:()=>Ad,s_b:()=>Tm,soG:()=>km,tb:()=>dT,tp0:()=>Rt,uIk:()=>kd,vHH:()=>Se,vpe:()=>Va,vpz:()=>rc,wAp:()=>Nt,xp6:()=>_C,ynx:()=>sm,z2F:()=>Gi,zSh:()=>hg,zs3:()=>ec});var l=U(7579),$=U(727),P=U(9751),ae=U(6451),ce=U(3099);function _e(o){for(let a in o)if(o[a]===_e)return a;throw Error("Could not find renamed property on target object.")}function ge(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function fe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(fe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=_e({__forward_ref__:_e});function W(o){return o.__forward_ref__=W,o.toString=function(){return fe(this())},o}function ee(o){return qe(o)?o():o}function qe(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===W}class Se extends Error{constructor(a,c){super(function at(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function Ce(o){return"string"==typeof o?o:null==o?"":String(o)}function Re(o,a){throw new Se(-201,!1)}function qt(o,a){null==o&&function Qe(o,a,c,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${c} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function cn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function zt(o){return{providers:o.providers||[],imports:o.imports||[]}}function xi(o){return Wi(o,qi)||Wi(o,Rr)}function Kr(o){return null!==xi(o)}function Wi(o,a){return o.hasOwnProperty(a)?o[a]:null}function Yr(o){return o&&(o.hasOwnProperty(Kn)||o.hasOwnProperty(Qr))?o[Kn]:null}const qi=_e({\u0275prov:_e}),Kn=_e({\u0275inj:_e}),Rr=_e({ngInjectableDef:_e}),Qr=_e({ngInjectorDef:_e});var nt=(()=>((nt=nt||{})[nt.Default=0]="Default",nt[nt.Host=1]="Host",nt[nt.Self=2]="Self",nt[nt.SkipSelf=4]="SkipSelf",nt[nt.Optional=8]="Optional",nt))();let ui;function Sn(o){const a=ui;return ui=o,a}function Ei(o,a,c){const h=xi(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&nt.Optional?null:void 0!==a?a:void Re(fe(o))}function Dn(o){return{toString:o}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),bt=(()=>{return(o=bt||(bt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",bt;var o})();const Ft=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Li={},Ot=[],Vi=_e({\u0275cmp:_e}),Bt=_e({\u0275dir:_e}),ir=_e({\u0275pipe:_e}),sn=_e({\u0275mod:_e}),_i=_e({\u0275fac:_e}),Fn=_e({__NG_ELEMENT_ID__:_e});let st=0;function De(o){return Dn(()=>{const c=!0===o.standalone,h={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Ot,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||bt.Emulated,id:"c"+st++,styles:o.styles||Ot,_:null,setInput:null,schemas:o.schemas||null,tView:null},g=o.dependencies,v=o.features;return f.inputs=z(o.inputs,h),f.outputs=z(o.outputs),v&&v.forEach(C=>C(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(At).filter(Mt):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(re).filter(Mt):null,f})}function At(o){return O(o)||H(o)}function Mt(o){return null!==o}function ln(o){return Dn(()=>({type:o.type,bootstrap:o.bootstrap||Ot,declarations:o.declarations||Ot,imports:o.imports||Ot,exports:o.exports||Ot,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function z(o,a){if(null==o)return Li;const c={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),c[f]=h,a&&(a[f]=g)}return c}const J=De;function G(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function O(o){return o[Vi]||null}function H(o){return o[Bt]||null}function re(o){return o[ir]||null}function Le(o){const a=O(o)||H(o)||re(o);return null!==a&&a.standalone}function ut(o,a){const c=o[sn]||null;if(!c&&!0===a)throw new Error(`Type ${fe(o)} does not have '\u0275mod' property.`);return c}function ci(o){return Array.isArray(o)&&"object"==typeof o[1]}function yr(o){return Array.isArray(o)&&!0===o[1]}function Qo(o){return 0!=(8&o.flags)}function bu(o){return 2==(2&o.flags)}function Qa(o){return 1==(1&o.flags)}function sr(o){return null!==o.template}function Iu(o){return 0!=(256&o[2])}function Mi(o,a){return o.hasOwnProperty(_i)?o[_i]:null}class ta{constructor(a,c,h){this.previousValue=a,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function Vs(){return kc}function kc(o){return o.type.prototype.ngOnChanges&&(o.setInput=Tu),Ul}function Ul(){const o=na(this),a=o?.current;if(a){const c=o.previous;if(c===Li)o.previous=a;else for(let h in a)c[h]=a[h];o.current=null,this.ngOnChanges(a)}}function Tu(o,a,c,h){const f=na(o)||function Ui(o,a){return o[Oc]=a}(o,{previous:Li,current:null}),g=f.current||(f.current={}),v=f.previous,C=this.declaredInputs[c],I=v[C];g[C]=new ta(I&&I.currentValue,a,v===Li),o[h]=a}Vs.ngInherit=!0;const Oc="__ngSimpleChanges__";function na(o){return o[Oc]||null}function jn(o){for(;Array.isArray(o);)o=o[0];return o}function Pr(o,a){return jn(a[o])}function ki(o,a){return jn(a[o.index])}function ra(o,a){return o.data[a]}function fn(o,a){const c=a[o];return ci(c)?c:c[0]}function Us(o){return 64==(64&o[2])}function Er(o,a){return null==a?null:o[a]}function Xa(o){o[18]=0}function Zn(o,a){o[5]+=a;let c=o,h=o[3];for(;null!==h&&(1===a&&1===c[5]||-1===a&&0===c[5]);)h[5]+=a,c=h,h=h[3]}const Ut={lFrame:ul(null),bindingsEnabled:!0};function _o(){return Ut.bindingsEnabled}function Ne(){return Ut.lFrame.lView}function en(){return Ut.lFrame.tView}function Bh(o){return Ut.lFrame.contextLView=o,o[8]}function oa(o){return Ut.lFrame.contextLView=null,o}function di(){let o=aa();for(;null!==o&&64===o.type;)o=o.parent;return o}function aa(){return Ut.lFrame.currentTNode}function Yi(o,a){const c=Ut.lFrame;c.currentTNode=o,c.isParent=a}function jl(){return Ut.lFrame.isParent}function la(){Ut.lFrame.isParent=!1}function hi(){const o=Ut.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ol(){return Ut.lFrame.bindingIndex++}function vs(o){const a=Ut.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function Fc(o,a){const c=Ut.lFrame;c.bindingIndex=c.bindingRootIndex=o,ua(a)}function ua(o){Ut.lFrame.currentDirectiveIndex=o}function al(){return Ut.lFrame.currentQueryIndex}function ku(o){Ut.lFrame.currentQueryIndex=o}function ll(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Lc(o,a,c){if(c&nt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||c&nt.Host||(f=ll(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const h=Ut.lFrame=Gh();return h.currentTNode=a,h.lView=o,!0}function ca(o){const a=Gh(),c=o[1];Ut.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Gh(){const o=Ut.lFrame,a=null===o?null:o.child;return null===a?ul(o):a}function ul(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function $h(){const o=Ut.lFrame;return Ut.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Vc=$h;function Bs(){const o=$h();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Vn(){return Ut.lFrame.selectedIndex}function ws(o){Ut.lFrame.selectedIndex=o}function Un(){const o=Ut.lFrame;return ra(o.tView,o.selectedIndex)}function Gl(o,a){for(let c=a.directiveStart,h=a.directiveEnd;c<h;c++){const g=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:R}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-c,v),C&&((o.contentHooks||(o.contentHooks=[])).push(c,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,C)),I&&(o.viewHooks||(o.viewHooks=[])).push(-c,I),A&&((o.viewHooks||(o.viewHooks=[])).push(c,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,A)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(c,R)}}function da(o,a,c){fa(o,a,3,c)}function ha(o,a,c,h){(3&o[2])===c&&fa(o,a,c,h)}function Hc(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function fa(o,a,c,h){const g=h??-1,v=a.length-1;let C=0;for(let I=void 0!==h?65535&o[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(C=a[I],null!=h&&C>=h)break}else a[I]<0&&(o[18]+=65536),(C<g||-1==g)&&(jc(o,c,a,I),o[18]=(4294901760&o[18])+I+2),I++}function jc(o,a,c,h){const f=c[h]<0,g=c[h+1],C=o[f?-c[h]:c[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Cr{constructor(a,c,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Es(o,a,c){let h=0;for(;h<c.length;){const f=c[h];if("number"==typeof f){if(0!==f)break;h++;const g=c[h++],v=c[h++],C=c[h++];o.setAttribute(a,v,C,g)}else{const g=f,v=c[++h];Lu(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),h++}}return h}function dl(o){return 3===o||4===o||6===o}function Lu(o){return 64===o.charCodeAt(0)}function hl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?c=f:0===c||$c(o,c,f,null,-1===c||2===c?a[++h]:null)}}return o}function $c(o,a,c,h,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const C=o[g++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=g-1;break}}}for(;g<o.length;){const C=o[g];if("number"==typeof C)break;if(C===c){if(null===h)return void(null!==f&&(o[g+1]=f));if(h===o[g+1])return void(o[g+2]=f)}g++,null!==h&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,c),null!==h&&o.splice(g++,0,h),null!==f&&o.splice(g++,0,f)}function qh(o){return-1!==o}function fi(o){return 32767&o}function js(o,a){let c=function Kh(o){return o>>16}(o),h=a;for(;c>0;)h=h[15],c--;return h}let Vu=!0;function fl(o){const a=Vu;return Vu=o,a}let zc=0;const lr={};function Cs(o,a){const c=ql(o,a);if(-1!==c)return c;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Uu(h.data,o),Uu(a,null),Uu(h.blueprint,null));const f=pl(o,a),g=o.injectorIndex;if(qh(f)){const v=fi(f),C=js(f,a),I=C[1].data;for(let A=0;A<8;A++)a[g+A]=C[v+A]|I[v+A]}return a[g+8]=f,g}function Uu(o,a){o.push(0,0,0,0,0,0,0,0,a)}function ql(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function pl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,h=null,f=a;for(;null!==f;){if(h=wa(f),null===h)return-1;if(c++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return-1}function vo(o,a,c){!function Wc(o,a,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(Fn)&&(h=c[Fn]),null==h&&(h=c[Fn]=zc++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function ga(o,a,c){if(c&nt.Optional||void 0!==o)return o;Re()}function wo(o,a,c,h){if(c&nt.Optional&&void 0===h&&(h=null),0==(c&(nt.Self|nt.Host))){const f=o[9],g=Sn(void 0);try{return f?f.get(a,h,c&nt.Optional):Ei(a,h,c&nt.Optional)}finally{Sn(g)}}return ga(h,0,c)}function ma(o,a,c,h=nt.Default,f){if(null!==o){if(1024&a[2]){const v=function Qh(o,a,c,h,f){let g=o,v=a;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=qc(g,v,c,h|nt.Self,lr);if(C!==lr)return C;let I=g.parent;if(!I){const A=v[21];if(A){const R=A.get(c,lr,h);if(R!==lr)return R}I=wa(v),v=v[15]}g=I}return f}(o,a,c,h,lr);if(v!==lr)return v}const g=qc(o,a,c,h,lr);if(g!==lr)return g}return wo(a,c,h,f)}function qc(o,a,c,h,f){const g=function Yh(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Fn)?o[Fn]:void 0;return"number"==typeof a?a>=0?255&a:Bu:a}(c);if("function"==typeof g){if(!Lc(a,o,h))return h&nt.Host?ga(f,0,h):wo(a,c,h,f);try{const v=g(h);if(null!=v||h&nt.Optional)return v;Re()}finally{Vc()}}else if("number"==typeof g){let v=null,C=ql(o,a),I=-1,A=h&nt.Host?a[16][6]:null;for((-1===C||h&nt.SkipSelf)&&(I=-1===C?pl(o,a):a[C+8],-1!==I&&Zl(h,!1)?(v=a[1],C=fi(I),a=js(I,a)):C=-1);-1!==C;){const R=a[1];if(_a(g,C,R.data)){const B=Kl(C,a,c,v,h,A);if(B!==lr)return B}I=a[C+8],-1!==I&&Zl(h,a[1].data[C+8]===A)&&_a(g,C,a)?(v=R,C=fi(I),a=js(I,a)):C=-1}}return f}function Kl(o,a,c,h,f,g){const v=a[1],C=v.data[o+8],R=ml(C,v,c,null==h?bu(C)&&Vu:h!=v&&0!=(3&C.type),f&nt.Host&&g===C);return null!==R?es(a,v,R,C):lr}function ml(o,a,c,h,f){const g=o.providerIndexes,v=a.data,C=1048575&g,I=o.directiveStart,R=g>>20,Y=f?C+R:o.directiveEnd;for(let se=h?C:C+R;se<Y;se++){const Te=v[se];if(se<I&&c===Te||se>=I&&Te.type===c)return se}if(f){const se=v[I];if(se&&sr(se)&&se.type===c)return I}return null}function es(o,a,c,h){let f=o[c];const g=a.data;if(function Fu(o){return o instanceof Cr}(f)){const v=f;v.resolving&&function it(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Se(-200,`Circular dependency in DI detected for ${o}${c}`)}(function me(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ce(o)}(g[c]));const C=fl(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Sn(v.injectImpl):null;Lc(o,h,nt.Default);try{f=o[c]=v.factory(void 0,g,o,h),a.firstCreatePass&&c>=h.directiveStart&&function Pu(o,a,c){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(h){const v=kc(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,v)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),g&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,g),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,g))}(c,g[c],a)}finally{null!==I&&Sn(I),fl(C),v.resolving=!1,Vc()}}return f}function _a(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function Zl(o,a){return!(o&nt.Self||o&nt.Host&&a)}class ya{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,h){return ma(this._tNode,this._lView,a,h,c)}}function Bu(){return new ya(di(),Ne())}function Gs(o){return Dn(()=>{const a=o.prototype.constructor,c=a[_i]||va(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const g=f[_i]||va(f);if(g&&g!==c)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function va(o){return qe(o)?()=>{const a=va(ee(o));return a&&a()}:Mi(o)}function wa(o){const a=o[1],c=a.type;return 2===c?a.declTNode:1===c?o[6]:null}function Yl(o){return function gl(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const h=c.length;let f=0;for(;f<h;){const g=c[f];if(dl(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<h&&"string"==typeof c[f];)f++;else{if(g===a)return c[f+1];f+=2}}}return null}(di(),o)}const Ea="__parameters__";function ba(o,a,c){return Dn(()=>{const h=function Hu(o){return function(...c){if(o){const h=o(...c);for(const f in h)this[f]=h[f]}}}(a);function f(...g){if(this instanceof f)return h.apply(this,g),this;const v=new f(...g);return C.annotation=v,C;function C(I,A,R){const B=I.hasOwnProperty(Ea)?I[Ea]:Object.defineProperty(I,Ea,{value:[]})[Ea];for(;B.length<=R;)B.push(null);return(B[R]=B[R]||[]).push(v),I}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class On{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=cn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rn(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let h=o[c];Array.isArray(h)?(a===o&&(a=o.slice(0,c)),Rn(h,a)):a!==o&&a.push(h)}return a}function bs(o,a){o.forEach(c=>Array.isArray(c)?bs(c,a):a(c))}function Co(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function bi(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function bo(o,a){const c=[];for(let h=0;h<o;h++)c.push(a);return c}function ht(o,a,c){let h=is(o,a);return h>=0?o[1|h]=c:(h=~h,function ef(o,a,c,h){let f=o.length;if(f==a)o.push(c,h);else if(1===f)o.push(h,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=h}}(o,h,a,c)),h}function _l(o,a){const c=is(o,a);if(c>=0)return o[1|c]}function is(o,a){return function yl(o,a,c){let h=0,f=o.length>>c;for(;f!==h;){const g=h+(f-h>>1),v=o[g<<c];if(a===v)return g<<c;v>a?f=g:h=g+1}return~(f<<c)}(o,a,1)}const So={},Gu="__NG_DI_FLAG__",$s="ngTempTokenPath",Is=/\n/gm,si="__source";let Do;function Ts(o){const a=Do;return Do=o,a}function Jn(o,a=nt.Default){if(void 0===Do)throw new Se(-203,!1);return null===Do?Ei(o,void 0,a):Do.get(o,a&nt.Optional?null:void 0,a)}function Ln(o,a=nt.Default){return(function ti(){return ui}()||Jn)(ee(o),a)}function S(o,a=nt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Ln(o,a)}function D(o){const a=[];for(let c=0;c<o.length;c++){const h=ee(o[c]);if(Array.isArray(h)){if(0===h.length)throw new Se(900,!1);let f,g=nt.Default;for(let v=0;v<h.length;v++){const C=h[v],I=j(C);"number"==typeof I?-1===I?f=C.token:g|=I:f=C}a.push(Ln(f,g))}else a.push(Ln(h))}return a}function k(o,a){return o[Gu]=a,o.prototype[Gu]=a,o}function j(o){return o[Gu]}const Ge=k(ba("Optional"),8),Rt=k(ba("SkipSelf"),4);let af,$u,ed;function ig(o){af=o}function Mo(o){return function Xc(){if(void 0===$u&&($u=null,Ft.trustedTypes))try{$u=Ft.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return $u}()?.createHTML(o)||o}function rg(o){return function ko(){if(void 0===ed&&(ed=null,Ft.trustedTypes))try{ed=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return ed}()?.createHTML(o)||o}class sg{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function qs(o){return o instanceof sg?o.changingThisBreaksApplicationSecurity:o}function Oo(o,a){const c=function df(o){return o instanceof sg&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}class q_{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Mo(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class TE{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const h=this.inertDocument.createElement("body");c.appendChild(h)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=Mo(a),c;const h=this.inertDocument.createElement("body");return h.innerHTML=Mo(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const v=c.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function y(o){return(o=String(o)).match(m)?o:"unsafe:"+o}function b(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function M(...o){const a={};for(const c of o)for(const h in c)c.hasOwnProperty(h)&&(a[h]=!0);return a}const F=b("area,br,col,hr,img,wbr"),ie=b("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ke=b("rp,rt"),wn=M(F,M(ie,b("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),M(ke,b("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),M(ke,ie)),Ji=b("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),id=M(Ji,b("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),b("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rd=b("script,style,template");class Cl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,h=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?h=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,h&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!wn.hasOwnProperty(c))return this.sanitizedSomething=!0,!rd.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const h=a.attributes;for(let f=0;f<h.length;f++){const g=h.item(f),v=g.name,C=v.toLowerCase();if(!id.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=g.value;Ji[C]&&(I=y(I)),this.buf.push(" ",v,'="',sd(I),'"')}return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();wn.hasOwnProperty(c)&&!F.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(sd(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const og=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pf=/([^\#-~ |!])/g;function sd(o){return o.replace(/&/g,"&amp;").replace(og,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(pf,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qu;function xa(o){return"content"in o&&function K_(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var $n=(()=>(($n=$n||{})[$n.NONE=0]="NONE",$n[$n.HTML=1]="HTML",$n[$n.STYLE=2]="STYLE",$n[$n.SCRIPT=3]="SCRIPT",$n[$n.URL=4]="URL",$n[$n.RESOURCE_URL=5]="RESOURCE_URL",$n))();function ag(o){const a=gf();return a?rg(a.sanitize($n.HTML,o)||""):Oo(o,"HTML")?rg(qs(o)):function Ku(o,a){let c=null;try{qu=qu||function ff(o){const a=new TE(o);return function w(){try{return!!(new window.DOMParser).parseFromString(Mo(""),"text/html")}catch{return!1}}()?new q_(a):a}(o);let h=a?String(a):"";c=qu.getInertBodyElement(h);let f=5,g=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=g,g=c.innerHTML,c=qu.getInertBodyElement(h)}while(h!==g);return Mo((new Cl).sanitizeChildren(xa(c)||c))}finally{if(c){const h=xa(c)||c;for(;h.firstChild;)h.removeChild(h.firstChild)}}}(function Jc(){return void 0!==af?af:typeof document<"u"?document:void 0}(),Ce(o))}function lg(o){const a=gf();return a?a.sanitize($n.URL,o)||"":Oo(o,"URL")?qs(o):y(Ce(o))}function gf(){const o=Ne();return o&&o[12]}const Y_=new On("ENVIRONMENT_INITIALIZER"),AE=new On("INJECTOR",-1),xE=new On("INJECTOR_DEF_TYPES");class ME{get(a,c=So){if(c===So){const h=new Error(`NullInjectorError: No provider for ${fe(a)}!`);throw h.name="NullInjectorError",h}return c}}function eA(...o){return{\u0275providers:kE(0,o)}}function kE(o,...a){const c=[],h=new Set;let f;return bs(a,g=>{const v=g;cg(v,c,[],h)&&(f||(f=[]),f.push(v))}),void 0!==f&&OE(f,c),c}function OE(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];bs(f,g=>{a.push(g)})}}function cg(o,a,c,h){if(!(o=ee(o)))return!1;let f=null,g=Yr(o);const v=!g&&O(o);if(g||v){if(v&&!v.standalone)return!1;f=o}else{const I=o.ngModule;if(g=Yr(I),!g)return!1;f=I}const C=h.has(f);if(v){if(C)return!1;if(h.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of I)cg(A,a,c,h)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let A;h.add(f);try{bs(g.imports,R=>{cg(R,a,c,h)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&OE(A,a)}if(!C){const A=Mi(f)||(()=>new f);a.push({provide:f,useFactory:A,deps:Ot},{provide:xE,useValue:f,multi:!0},{provide:Y_,useValue:()=>Ln(f),multi:!0})}const I=g.providers;null==I||C||bs(I,R=>{a.push(R)})}}return f!==o&&void 0!==o.providers}const RE=_e({provide:String,useValue:_e});function mf(o){return null!==o&&"object"==typeof o&&RE in o}function Ks(o){return"function"==typeof o}const hg=new On("Set Injector scope."),fg={},nu={};let pg;function gg(){return void 0===pg&&(pg=new ME),pg}class Oa{}class Q_ extends Oa{constructor(a,c,h,f){super(),this.parent=c,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_g(a,v=>this.processProvider(v)),this.records.set(AE,od(void 0,this)),f.has("environment")&&this.records.set(Oa,od(void 0,this));const g=this.records.get(hg);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(xE.multi,Ot,nt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Ts(this),h=Sn(void 0);try{return a()}finally{Ts(c),Sn(h)}}get(a,c=So,h=nt.Default){this.assertNotDestroyed();const f=Ts(this),g=Sn(void 0);try{if(!(h&nt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const I=function nA(o){return"function"==typeof o||"object"==typeof o&&o instanceof On}(a)&&xi(a);C=I&&this.injectableDefInScope(I)?od(_f(a),fg):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&nt.Self?gg():this.parent).get(a,c=h&nt.Optional&&c===So?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[$s]=v[$s]||[]).unshift(fe(a)),f)throw v;return function te(o,a,c,h){const f=o[$s];throw a[si]&&f.unshift(a[si]),o.message=function le(o,a,c,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=fe(a);if(Array.isArray(a))f=a.map(fe).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];g.push(v+":"+("string"==typeof C?JSON.stringify(C):fe(C)))}f=`{${g.join(", ")}}`}return`${c}${h?"("+h+")":""}[${f}]: ${o.replace(Is,"\n  ")}`}("\n"+o.message,f,c,h),o.ngTokenPath=f,o[$s]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Sn(g),Ts(f)}}resolveInjectorInitializers(){const a=Ts(this),c=Sn(void 0);try{const h=this.get(Y_.multi,Ot,nt.Self);for(const f of h)f()}finally{Ts(a),Sn(c)}}toString(){const a=[],c=this.records;for(const h of c.keys())a.push(fe(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(a){let c=Ks(a=ee(a))?a:ee(a&&a.provide);const h=function J_(o){return mf(o)?od(void 0,o.useValue):od(mg(o),fg)}(a);if(Ks(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=od(void 0,fg,!0),f.factory=()=>D(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,h)}hydrate(a,c){return c.value===fg&&(c.value=nu,c.value=c.factory()),"object"==typeof c.value&&c.value&&function tA(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ee(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function _f(o){const a=xi(o),c=null!==a?a.factory:Mi(o);if(null!==c)return c;if(o instanceof On)throw new Se(204,!1);if(o instanceof Function)return function PE(o){const a=o.length;if(a>0)throw bo(a,"?"),new Se(204,!1);const c=function Hn(o){const a=o&&(o[qi]||o[Rr]);if(a){const c=function Zr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Se(204,!1)}function mg(o,a,c){let h;if(Ks(o)){const f=ee(o);return Mi(f)||_f(f)}if(mf(o))h=()=>ee(o.useValue);else if(function ka(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...D(o.deps||[]));else if(function dg(o){return!(!o||!o.useExisting)}(o))h=()=>Ln(ee(o.useExisting));else{const f=ee(o&&(o.useClass||o.provide));if(!function yf(o){return!!o.deps}(o))return Mi(f)||_f(f);h=()=>new f(...D(o.deps))}return h}function od(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function X_(o){return!!o.\u0275providers}function _g(o,a){for(const c of o)Array.isArray(c)?_g(c,a):X_(c)?_g(c.\u0275providers,a):a(c)}class ey{}class vg{resolveComponentFactory(a){throw function LE(o){const a=Error(`No component factory found for ${fe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Yu=(()=>{class o{}return o.NULL=new vg,o})();function iA(){return ad(di(),Ne())}function ad(o,a){return new Qu(ki(o,a))}let Qu=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=iA,o})();function UE(o){return o instanceof Qu?o.nativeElement:o}class rA{}let cP=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function dP(){const o=Ne(),c=fn(di().index,o);return(ci(c)?c:o)[11]}(),o})(),ty=(()=>{class o{}return o.\u0275prov=cn({token:o,providedIn:"root",factory:()=>null}),o})();class BE{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const HE=new BE("14.2.10"),ny={};function ly(o){return o.ngOriginalError}class Ef{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&ly(a);for(;c&&ly(c);)c=ly(c);return c||null}}const uy=new Map;let dA=0;const Tg="__ngContext__";function Xi(o,a){ci(a)?(o[Tg]=a[20],function fA(o){uy.set(o[20],o)}(a)):o[Tg]=a}function bl(o){return o instanceof Function?o():o}var Ra=(()=>((Ra=Ra||{})[Ra.Important=1]="Important",Ra[Ra.DashCase=2]="DashCase",Ra))();function py(o,a){return undefined(o,a)}function hd(o){const a=o[3];return yr(a)?a[3]:a}function Ag(o){return XE(o[13])}function xg(o){return XE(o[4])}function XE(o){for(;null!==o&&!yr(o);)o=o[4];return o}function fd(o,a,c,h,f){if(null!=h){let g,v=!1;yr(h)?g=h:ci(h)&&(v=!0,h=h[0]);const C=jn(h);0===o&&null!==c?null==f?oC(a,c,C):Na(a,c,C,f||null,!0):1===o&&null!==c?Na(a,c,C,f||null,!0):2===o?function DA(o,a,c){const h=Og(o,a);h&&function SA(o,a,c,h){o.removeChild(a,c,h)}(o,h,a,c)}(a,C,v):3===o&&a.destroyNode(C),null!=g&&function EP(o,a,c,h,f){const g=c[7];g!==jn(c)&&fd(a,o,h,g,f);for(let C=10;C<c.length;C++){const I=c[C];Ju(I[1],I,o,a,h,g)}}(a,o,g,c,f)}}function Mg(o,a,c){return o.createElement(a,c)}function iC(o,a){const c=o[9],h=c.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Zn(f,-1)),c.splice(h,1)}function yy(o,a){if(o.length<=10)return;const c=10+a,h=o[c];if(h){const f=h[17];null!==f&&f!==o&&iC(f,h),a>0&&(o[c-1][4]=h[4]);const g=bi(o,10+a);!function _y(o,a){Ju(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const v=g[19];null!==v&&v.detachView(g[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function If(o,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&Ju(o,a,c,3,null,null),function vP(o){let a=o[13];if(!a)return kg(o[1],o);for(;a;){let c=null;if(ci(a))c=a[13];else{const h=a[10];h&&(c=h)}if(!c){for(;a&&!a[4]&&a!==o;)ci(a)&&kg(a[1],a),a=a[3];null===a&&(a=o),ci(a)&&kg(a[1],a),c=a&&a[4]}a=c}}(a)}}function kg(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function wy(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let h=0;h<c.length;h+=2){const f=a[c[h]];if(!(f instanceof Cr)){const g=c[h+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const C=f[g[v]],I=g[v+1];try{I.call(C)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function vy(o,a){const c=o.cleanup,h=a[7];let f=-1;if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const v=c[g+1],C="function"==typeof v?v(a):jn(a[v]),I=h[f=c[g+2]],A=c[g+3];"boolean"==typeof A?C.removeEventListener(c[g],I,A):A>=0?h[f=A]():h[f=-A].unsubscribe(),g+=2}else{const v=h[f=c[g+1]];c[g].call(v)}if(null!==h){for(let g=f+1;g<h.length;g++)(0,h[g])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&yr(a[3])){c!==a[3]&&iC(c,a);const h=a[19];null!==h&&h.detachView(o)}!function pA(o){uy.delete(o[20])}(a)}}function rC(o,a,c){return function sC(o,a,c){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return c[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===bt.None||f===bt.Emulated)return null}return ki(h,c)}(o,a.parent,c)}function Na(o,a,c,h,f){o.insertBefore(a,c,h,f)}function oC(o,a,c){o.appendChild(a,c)}function aC(o,a,c,h,f){null!==h?Na(o,a,c,h,f):oC(o,a,c)}function Og(o,a){return o.parentNode(a)}function Oi(o,a,c){return Ey(o,a,c)}let Ey=function uC(o,a,c){return 40&o.type?ki(o,c):null};function Ng(o,a,c,h){const f=rC(o,h,a),g=a[11],C=Oi(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(c))for(let I=0;I<c.length;I++)aC(g,f,c[I],C,!1);else aC(g,f,c,C,!1)}function Pg(o,a){if(null!==a){const c=a.type;if(3&c)return ki(a,o);if(4&c)return cC(-1,o[a.index]);if(8&c){const h=a.child;if(null!==h)return Pg(o,h);{const f=o[a.index];return yr(f)?cC(-1,f):jn(f)}}if(32&c)return py(a,o)()||jn(o[a.index]);{const h=Cy(o,a);return null!==h?Array.isArray(h)?h[0]:Pg(hd(o[16]),h):Pg(o,a.next)}}return null}function Cy(o,a){return null!==a?o[16][6].projection[a.projection]:null}function cC(o,a){const c=10+o+1;if(c<a.length){const h=a[c],f=h[1].firstChild;if(null!==f)return Pg(h,f)}return a[7]}function by(o,a,c,h,f,g,v){for(;null!=c;){const C=h[c.index],I=c.type;if(v&&0===a&&(C&&Xi(jn(C),h),c.flags|=4),64!=(64&c.flags))if(8&I)by(o,a,c.child,h,f,g,!1),fd(a,o,f,C,g);else if(32&I){const A=py(c,h);let R;for(;R=A();)fd(a,o,f,R,g);fd(a,o,f,C,g)}else 16&I?Tf(o,a,h,c,f,g):fd(a,o,f,C,g);c=v?c.projectionNext:c.next}}function Ju(o,a,c,h,f,g){by(c,h,o.firstChild,a,f,g,!1)}function Tf(o,a,c,h,f,g){const v=c[16],I=v[6].projection[h.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)fd(a,o,f,I[A],g);else by(o,a,I,v[3],f,g,!0)}function Xu(o,a,c){o.setAttribute(a,"style",c)}function Sf(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function AA(o,a,c){let h=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===h||o.charCodeAt(f+g)<=32)return f}c=f+1}}const Iy="ng-template";function Ty(o,a,c){let h=0;for(;h<o.length;){let f=o[h++];if(c&&"class"===f){if(f=o[h],-1!==AA(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function fC(o){return 4===o.type&&o.value!==Iy}function MA(o,a,c){return a===(4!==o.type||c?o.value:Iy)}function kA(o,a,c){let h=4;const f=o.attrs||[],g=function CP(o){for(let a=0;a<o.length;a++)if(dl(o[a]))return a;return o.length}(f);let v=!1;for(let C=0;C<a.length;C++){const I=a[C];if("number"!=typeof I){if(!v)if(4&h){if(h=2|1&h,""!==I&&!MA(o,I,c)||""===I&&1===a.length){if(Ys(h))return!1;v=!0}}else{const A=8&h?I:a[++C];if(8&h&&null!==o.attrs){if(!Ty(o.attrs,A,c)){if(Ys(h))return!1;v=!0}continue}const B=OA(8&h?"class":I,f,fC(o),c);if(-1===B){if(Ys(h))return!1;v=!0;continue}if(""!==A){let Y;Y=B>g?"":f[B+1].toLowerCase();const se=8&h?Y:null;if(se&&-1!==AA(se,A,0)||2&h&&A!==Y){if(Ys(h))return!1;v=!0}}}}else{if(!v&&!Ys(h)&&!Ys(I))return!1;if(v&&Ys(I))continue;v=!1,h=I|1&h}}return Ys(h)||v}function Ys(o){return 0==(1&o)}function OA(o,a,c,h){if(null===a)return-1;let f=0;if(h||!c){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function pC(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const h=o[c];if("number"==typeof h)return-1;if(h===a)return c;c++}return-1}(a,o)}function RA(o,a,c=!1){for(let h=0;h<a.length;h++)if(kA(o,a[h],c))return!0;return!1}function NA(o,a){e:for(let c=0;c<a.length;c++){const h=a[c];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function gC(o,a){return o?":not("+a.trim()+")":a}function mC(o){let a=o[0],c=1,h=2,f="",g=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&h){const C=o[++c];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+v:4&h&&(f+=" "+v);else""!==f&&!Ys(v)&&(a+=gC(g,f),f=""),h=v,g=g||!Ys(h);c++}return""!==f&&(a+=gC(g,f)),a}const Kt={};function _C(o){yC(en(),Ne(),Vn()+o,!1)}function yC(o,a,c,h){if(!h)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&da(a,g,c)}else{const g=o.preOrderHooks;null!==g&&ha(a,g,0,c)}ws(c)}function Lg(o,a=null,c=null,h){const f=Df(o,a,c,h);return f.resolveInjectorInitializers(),f}function Df(o,a=null,c=null,h,f=new Set){const g=[c||Ot,eA(o)];return h=h||("object"==typeof o?void 0:fe(o)),new Q_(g,a||gg(),h||null,f)}let ec=(()=>{class o{static create(c,h){if(Array.isArray(c))return Lg({name:""},h,c,"");{const f=c.name??"";return Lg({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=So,o.NULL=new ME,o.\u0275prov=cn({token:o,providedIn:"any",factory:()=>Ln(AE)}),o.__NG_ELEMENT_ID__=-1,o})();function Il(o,a=nt.Default){const c=Ne();return null===c?Ln(o,a):ma(di(),c,ee(o),a)}function Bg(){throw new Error("invalid")}function Hg(o,a){return o<<17|a<<2}function No(o){return o>>17&32767}function ky(o){return 2|o}function Tl(o){return(131068&o)>>2}function Oy(o,a){return-131069&o|a<<2}function md(o){return 1|o}function jy(o,a){const c=o.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const f=c[h],g=c[h+1];if(-1!==g){const v=o.data[g];ku(f),v.contentQueries(2,a[g],g)}}}function qg(o,a,c,h,f,g,v,C,I,A,R){const B=a.blueprint.slice();return B[0]=f,B[2]=76|h,(null!==R||o&&1024&o[2])&&(B[2]|=1024),Xa(B),B[3]=B[15]=o,B[8]=c,B[10]=v||o&&o[10],B[11]=C||o&&o[11],B[12]=I||o&&o[12]||null,B[9]=A||o&&o[9]||null,B[6]=g,B[20]=function hA(){return dA++}(),B[21]=R,B[16]=2==a.type?o[16]:B,B}function Ed(o,a,c,h,f){let g=o.data[a];if(null===g)g=function Gy(o,a,c,h,f){const g=aa(),v=jl(),I=o.data[a]=function FC(o,a,c,h,f,g){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,c,a,h,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,c,h,f),function Pc(){return Ut.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=c,g.value=h,g.attrs=f;const v=function Hl(){const o=Ut.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Yi(g,!0),g}function Cd(o,a,c,h){if(0===c)return-1;const f=a.length;for(let g=0;g<c;g++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function $y(o,a,c){ca(a);try{const h=o.viewQuery;null!==h&&Nf(1,h,c);const f=o.template;null!==f&&NC(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&jy(o,a),o.staticViewQueries&&Nf(2,o.viewQuery,c);const g=o.components;null!==g&&function ex(o,a){for(let c=0;c<a.length;c++)Xy(o,a[c])}(a,g)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Bs()}}function Kg(o,a,c,h){const f=a[2];if(128!=(128&f)){ca(a);try{Xa(a),function sl(o){return Ut.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&NC(o,a,c,2,h);const v=3==(3&f);if(v){const A=o.preOrderCheckHooks;null!==A&&da(a,A,null)}else{const A=o.preOrderHooks;null!==A&&ha(a,A,0,null),Hc(a,0)}if(function WP(o){for(let a=Ag(o);null!==a;a=xg(a)){if(!a[2])continue;const c=a[9];for(let h=0;h<c.length;h++){const f=c[h],g=f[3];0==(512&f[2])&&Zn(g,1),f[2]|=512}}}(a),function zP(o){for(let a=Ag(o);null!==a;a=xg(a))for(let c=10;c<a.length;c++){const h=a[c],f=h[1];Us(h)&&Kg(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&jy(o,a),v){const A=o.contentCheckHooks;null!==A&&da(a,A)}else{const A=o.contentHooks;null!==A&&ha(a,A,1),Hc(a,1)}!function wd(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const f=c[h];if(f<0)ws(~f);else{const g=f,v=c[++h],C=c[++h];Fc(v,g),C(2,a[g])}}}finally{ws(-1)}}(o,a);const C=o.components;null!==C&&function XA(o,a){for(let c=0;c<a.length;c++)Xg(o,a[c])}(a,C);const I=o.viewQuery;if(null!==I&&Nf(2,I,h),v){const A=o.viewCheckHooks;null!==A&&da(a,A)}else{const A=o.viewHooks;null!==A&&ha(a,A,2),Hc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Zn(a[3],-1))}finally{Bs()}}}function NC(o,a,c,h,f){const g=Vn(),v=2&h;try{ws(-1),v&&a.length>22&&yC(o,a,22,!1),c(h,f)}finally{ws(g)}}function Of(o,a,c){if(Qo(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,c[g],g)}}}function Zg(o,a,c){!_o()||(function VC(o,a,c,h){const f=c.directiveStart,g=c.directiveEnd;o.firstCreatePass||Cs(c,a),Xi(h,a);const v=c.initialInputs;for(let C=f;C<g;C++){const I=o.data[C],A=sr(I);A&&ox(a,c,I);const R=es(a,o,C,c);Xi(R,a),null!==v&&ax(0,C-f,R,I,0,v),A&&(fn(c.index,a)[8]=R)}}(o,a,c,ki(c,a)),128==(128&c.flags)&&function Qy(o,a,c){const h=c.directiveStart,f=c.directiveEnd,g=c.index,v=function jh(){return Ut.lFrame.currentDirectiveIndex}();try{ws(g);for(let C=h;C<f;C++){const I=o.data[C],A=a[C];ua(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&bd(I,A)}}finally{ws(-1),ua(v)}}(o,a,c))}function Yg(o,a,c=ki){const h=a.localNames;if(null!==h){let f=a.index+1;for(let g=0;g<h.length;g+=2){const v=h[g+1],C=-1===v?c(a,o):o[v];o[f++]=C}}}function Qg(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=zy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function zy(o,a,c,h,f,g,v,C,I,A){const R=22+h,B=R+f,Y=function tx(o,a){const c=[];for(let h=0;h<a;h++)c.push(h<o?null:Kt);return c}(R,B),se="function"==typeof A?A():A;return Y[1]={type:o,blueprint:Y,template:c,queries:null,viewQuery:C,declTNode:a,data:Y.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:se,incompleteFirstPass:!1}}function Wy(o,a,c,h){const f=jC(a);null===c?f.push(h):(f.push(c),o.firstCreatePass&&Sd(o).push(h,f.length-1))}function qy(o,a,c){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(c=null===c?{}:c).hasOwnProperty(h)?c[h].push(a,f):c[h]=[a,f]}return c}function Ky(o,a){const h=a.directiveEnd,f=o.data,g=a.attrs,v=[];let C=null,I=null;for(let A=a.directiveStart;A<h;A++){const R=f[A],B=R.inputs,Y=null===g||fC(a)?null:$P(B,g);v.push(Y),C=qy(B,A,C),I=qy(R.outputs,A,I)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=C,a.outputs=I}function Ds(o,a,c,h,f,g,v,C){const I=ki(a,c);let R,A=a.inputs;!C&&null!=A&&(R=A[h])?(Po(o,c,R,h,f),bu(a)&&nx(c,a.index)):3&a.type&&(h=function UP(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=v?v(f,a.value||"",h):f,g.setProperty(I,h,f))}function nx(o,a){const c=fn(a,o);16&c[2]||(c[2]|=32)}function Zy(o,a,c,h){let f=!1;if(_o()){const g=function jP(o,a,c){const h=o.directiveRegistry;let f=null;if(h)for(let g=0;g<h.length;g++){const v=h[g];RA(c,v.selectors,!1)&&(f||(f=[]),vo(Cs(c,a),o,v.type),sr(v)?(Jg(o,c),f.unshift(v)):f.push(v))}return f}(o,a,c),v=null===h?null:{"":-1};if(null!==g){f=!0,sx(c,o.data.length,g.length);for(let R=0;R<g.length;R++){const B=g[R];B.providersResolver&&B.providersResolver(B)}let C=!1,I=!1,A=Cd(o,a,g.length,null);for(let R=0;R<g.length;R++){const B=g[R];c.mergedAttrs=hl(c.mergedAttrs,B.hostAttrs),UC(o,c,a,A,B),rx(A,B,v),null!==B.contentQueries&&(c.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(c.flags|=128);const Y=B.type.prototype;!C&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),C=!0),!I&&(Y.ngOnChanges||Y.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),I=!0),A++}Ky(o,c)}v&&function GP(o,a,c){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=c[a[f+1]];if(null==g)throw new Se(-301,!1);h.push(a[f],g)}}}(c,h,v)}return c.mergedAttrs=hl(c.mergedAttrs,c.attrs),f}function Yy(o,a,c,h,f,g){const v=g.hostBindings;if(v){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const I=~a.index;(function ix(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(C)!=I&&C.push(I),C.push(h,f,v)}}function bd(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Jg(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function rx(o,a,c){if(c){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)c[a.exportAs[h]]=o;sr(a)&&(c[""]=o)}}function sx(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function UC(o,a,c,h,f){o.data[h]=f;const g=f.factory||(f.factory=Mi(f.type)),v=new Cr(g,sr(f),Il);o.blueprint[h]=v,c[h]=v,Yy(o,a,0,h,Cd(o,c,f.hostVars,Kt),f)}function ox(o,a,c){const h=ki(a,o),f=Qg(c),g=o[10],v=Id(o,qg(o,f,null,c.onPush?32:16,h,a,g,g.createRenderer(h,c),null,null,null));o[a.index]=v}function Dl(o,a,c,h,f,g){const v=ki(o,a);!function BC(o,a,c,h,f,g,v){if(null==g)o.removeAttribute(a,f,c);else{const C=null==v?Ce(g):v(g,h||"",f);o.setAttribute(a,f,C,c)}}(a[11],v,g,o.value,c,h,f)}function ax(o,a,c,h,f,g){const v=g[a];if(null!==v){const C=h.setInput;for(let I=0;I<v.length;){const A=v[I++],R=v[I++],B=v[I++];null!==C?h.setInput(c,B,A,R):c[R]=B}}}function $P(o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return c}function lx(o,a,c,h){return new Array(o,!0,!1,a,null,0,h,c,null,null)}function Xg(o,a){const c=fn(a,o);if(Us(c)){const h=c[1];48&c[2]?Kg(h,c,h.template,c[8]):c[5]>0&&Jy(c)}}function Jy(o){for(let h=Ag(o);null!==h;h=xg(h))for(let f=10;f<h.length;f++){const g=h[f];if(Us(g))if(512&g[2]){const v=g[1];Kg(v,g,v.template,g[8])}else g[5]>0&&Jy(g)}const c=o[1].components;if(null!==c)for(let h=0;h<c.length;h++){const f=fn(c[h],o);Us(f)&&f[5]>0&&Jy(f)}}function Xy(o,a){const c=fn(a,o),h=c[1];(function ev(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(h,c),$y(h,c,c[8])}function Id(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Rf(o){for(;o;){o[2]|=32;const a=hd(o);if(Iu(o)&&!a)return o;o=a}return null}function Td(o,a,c,h=!0){const f=a[10];f.begin&&f.begin();try{Kg(o,a,o.template,c)}catch(v){throw h&&GC(a,v),v}finally{f.end&&f.end()}}function Nf(o,a,c){ku(0),a(o,c)}function jC(o){return o[7]||(o[7]=[])}function Sd(o){return o.cleanup||(o.cleanup=[])}function GC(o,a){const c=o[9],h=c?c.get(Ef,null):null;h&&h.handleError(a)}function Po(o,a,c,h,f){for(let g=0;g<c.length;){const v=c[g++],C=c[g++],I=a[v],A=o.data[v];null!==A.setInput?A.setInput(I,f,h,C):I[C]=f}}function Qs(o,a,c){const h=Pr(a,o);!function eC(o,a,c){o.setValue(a,c)}(o[11],h,c)}function As(o,a,c){let h=c?o.styles:null,f=c?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?g=C:1==g?f=ve(f,C):2==g&&(h=ve(h,C+": "+a[++v]+";"))}c?o.styles=h:o.stylesWithoutHost=h,c?o.classes=f:o.classesWithoutHost=f}function nv(o,a,c,h,f=!1){for(;null!==c;){const g=a[c.index];if(null!==g&&h.push(jn(g)),yr(g))for(let C=10;C<g.length;C++){const I=g[C],A=I[1].firstChild;null!==A&&nv(I[1],I,A,h)}const v=c.type;if(8&v)nv(o,a,c.child,h);else if(32&v){const C=py(c,a);let I;for(;I=C();)h.push(I)}else if(16&v){const C=Cy(a,c);if(Array.isArray(C))h.push(...C);else{const I=hd(a[16]);nv(I[1],I,C,h,!0)}}c=f?c.projectionNext:c.next}return h}class Dd{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return nv(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(yr(a)){const c=a[8],h=c?c.indexOf(this):-1;h>-1&&(yy(a,h),bi(c,h))}this._attachedToViewContainer=!1}If(this._lView[1],this._lView)}onDestroy(a){Wy(this._lView[1],this._lView,null,a)}markForCheck(){Rf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Td(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nC(o,a){Ju(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=a}}class os extends Dd{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Td(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class iv extends Yu{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=O(a);return new tm(c,this.ngModule)}}function ux(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class $C{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,h){const f=this.injector.get(a,ny,h);return f!==ny||c===ny?f:this.parentInjector.get(a,c,h)}}class tm extends ey{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function PA(o){return o.map(mC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return ux(this.componentDef.inputs)}get outputs(){return ux(this.componentDef.outputs)}create(a,c,h,f){let g=(f=f||this.ngModule)instanceof Oa?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new $C(a,g):a,C=v.get(rA,null);if(null===C)throw new Se(407,!1);const I=v.get(ty,null),A=C.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",B=h?function PC(o,a,c){return o.selectRootElement(a,c===bt.ShadowDom)}(A,h,this.componentDef.encapsulation):Mg(A,R,function La(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(R)),Y=this.componentDef.onPush?288:272,se=zy(0,null,null,1,0,null,null,null,null,null),Te=qg(null,se,null,Y,null,null,C,A,I,v,null);let Ze,Je;ca(Te);try{const pt=function Pf(o,a,c,h,f,g){const v=c[1];c[22]=o;const I=Ed(v,22,2,"#host",null),A=I.mergedAttrs=a.hostAttrs;null!==A&&(As(I,A,!0),null!==o&&(Es(f,o,A),null!==I.classes&&Sf(f,o,I.classes),null!==I.styles&&Xu(f,o,I.styles)));const R=h.createRenderer(o,a),B=qg(c,Qg(a),null,a.onPush?32:16,c[22],I,h,R,g||null,null,null);return v.firstCreatePass&&(vo(Cs(I,c),v,a.type),Jg(v,I),sx(I,c.length,1)),Id(c,B),c[22]=B}(B,this.componentDef,Te,C,A);if(B)if(h)Es(A,B,["ng-version",HE.full]);else{const{attrs:kt,classes:Pe}=function FA(o){const a=[],c=[];let h=1,f=2;for(;h<o.length;){let g=o[h];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++h]):8===f&&c.push(g);else{if(!Ys(f))break;f=g}h++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);kt&&Es(A,B,kt),Pe&&Pe.length>0&&Sf(A,B,Pe.join(" "))}if(Je=ra(se,22),void 0!==c){const kt=Je.projection=[];for(let Pe=0;Pe<this.ngContentSelectors.length;Pe++){const Xe=c[Pe];kt.push(null!=Xe?Array.from(Xe):null)}}Ze=function WC(o,a,c,h){const f=c[1],g=function HP(o,a,c){const h=di();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),UC(o,h,a,Cd(o,a,1,null),c),Ky(o,h));const f=es(a,o,h.directiveStart,h);Xi(f,a);const g=ki(h,a);return g&&Xi(g,a),f}(f,c,a);if(o[8]=c[8]=g,null!==h)for(const C of h)C(g,a);if(a.contentQueries){const C=di();a.contentQueries(1,g,C.directiveStart)}const v=di();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ws(v.index),Yy(c[1],v,0,v.directiveStart,v.directiveEnd,a),bd(a,g)),g}(pt,this.componentDef,Te,[rv]),$y(se,Te,null)}finally{Bs()}return new qP(this.componentType,Ze,ad(Je,Te),Te,Je)}}class qP extends class FE{}{constructor(a,c,h,f,g){super(),this.location=h,this._rootLView=f,this._tNode=g,this.instance=c,this.hostView=this.changeDetectorRef=new os(f),this.componentType=a}setInput(a,c){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[a])){const g=this._rootLView;Po(g[1],g,f,a,c),nx(g,this._tNode.index)}}get injector(){return new ya(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function rv(){const o=di();Gl(Ne()[1],o)}function nm(o){let a=function An(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const h=[o];for(;a;){let f;if(sr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Se(903,!1);f=a.\u0275dir}if(f){if(c){h.push(f);const v=o;v.inputs=sv(o.inputs),v.declaredInputs=sv(o.declaredInputs),v.outputs=sv(o.outputs);const C=f.hostBindings;C&&KP(o,C);const I=f.viewQuery,A=f.contentQueries;if(I&&Js(o,I),A&&KC(o,A),ge(o.inputs,f.inputs),ge(o.declaredInputs,f.declaredInputs),ge(o.outputs,f.outputs),sr(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const C=g[v];C&&C.ngInherit&&C(o),C===nm&&(c=!1)}}a=Object.getPrototypeOf(a)}!function qC(o){let a=0,c=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=hl(f.hostAttrs,c=hl(c,f.hostAttrs))}}(h)}function sv(o){return o===Li?{}:o===Ot?[]:o}function Js(o,a){const c=o.viewQuery;o.viewQuery=c?(h,f)=>{a(h,f),c(h,f)}:a}function KC(o,a){const c=o.contentQueries;o.contentQueries=c?(h,f,g)=>{a(h,f,g),c(h,f,g)}:a}function KP(o,a){const c=o.hostBindings;o.hostBindings=c?(h,f)=>{a(h,f),c(h,f)}:a}let ov=null;function tc(){if(!ov){const o=Ft.Symbol;if(o&&o.iterator)ov=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const h=a[c];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(ov=h)}}}return ov}function Ad(o){return!!av(o)&&(Array.isArray(o)||!(o instanceof Map)&&tc()in o)}function av(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Hi(o,a,c){return o[a]=c}function Xs(o,a){return o[a]}function Bn(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function Md(o,a,c,h){const f=Bn(o,a,c);return Bn(o,a+1,h)||f}function as(o,a,c,h,f,g){const v=Md(o,a,c,h);return Md(o,a+2,f,g)||v}function kd(o,a,c,h){const f=Ne();return Bn(f,ol(),a)&&(en(),Dl(Un(),f,o,a,c,h)),kd}function Od(o,a,c,h){return Bn(o,ol(),c)?a+Ce(c)+h:Kt}function Rd(o,a,c,h,f,g){const C=Md(o,function Xr(){return Ut.lFrame.bindingIndex}(),c,f);return vs(2),C?a+Ce(c)+h+Ce(f)+g:Kt}function rb(o,a,c,h,f,g,v,C){const I=Ne(),A=en(),R=o+22,B=A.firstCreatePass?function fx(o,a,c,h,f,g,v,C,I){const A=a.consts,R=Ed(a,o,4,v||null,Er(A,C));Zy(a,c,R,Er(A,I)),Gl(a,R);const B=R.tViews=zy(2,R,h,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,R),B.queries=a.queries.embeddedTView(R)),R}(R,A,I,a,c,h,f,g,v):A.data[R];Yi(B,!1);const Y=I[11].createComment("");Ng(A,I,Y,B),Xi(Y,I),Id(I,I[R]=lx(Y,I,Y,B)),Qa(B)&&Zg(A,I,B),null!=v&&Yg(I,B,C)}function sb(o){return function Jr(o,a){return o[a]}(function rl(){return Ut.lFrame.contextLView}(),22+o)}function lv(o,a,c){const h=Ne();return Bn(h,ol(),a)&&Ds(en(),Un(),h,o,a,h[11],c,!1),lv}function im(o,a,c,h,f){const v=f?"class":"style";Po(o,c,a.inputs[v],v,h)}function Bd(o,a,c,h){const f=Ne(),g=en(),v=22+o,C=f[11],I=f[v]=Mg(C,a,function Nu(){return Ut.lFrame.currentNamespace}()),A=g.firstCreatePass?function uv(o,a,c,h,f,g,v){const C=a.consts,A=Ed(a,o,2,f,Er(C,g));return Zy(a,c,A,Er(C,v)),null!==A.attrs&&As(A,A.attrs,!1),null!==A.mergedAttrs&&As(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,g,f,0,a,c,h):g.data[v];Yi(A,!0);const R=A.mergedAttrs;null!==R&&Es(C,I,R);const B=A.classes;null!==B&&Sf(C,I,B);const Y=A.styles;return null!==Y&&Xu(C,I,Y),64!=(64&A.flags)&&Ng(g,f,I,A),0===function tl(){return Ut.lFrame.elementDepthCount}()&&Xi(I,f),function Nc(){Ut.lFrame.elementDepthCount++}(),Qa(A)&&(Zg(g,f,A),Of(g,A,f)),null!==h&&Yg(f,A),Bd}function rm(){let o=di();jl()?la():(o=o.parent,Yi(o,!1));const a=o;!function nl(){Ut.lFrame.elementDepthCount--}();const c=en();return c.firstCreatePass&&(Gl(c,o),Qo(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function zl(o){return 0!=(16&o.flags)}(a)&&im(c,a,Ne(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Wl(o){return 0!=(32&o.flags)}(a)&&im(c,a,Ne(),a.stylesWithoutHost,!1),rm}function ob(o,a,c,h){return Bd(o,a,c,h),rm(),ob}function sm(o,a,c){const h=Ne(),f=en(),g=o+22,v=f.firstCreatePass?function gx(o,a,c,h,f){const g=a.consts,v=Er(g,h),C=Ed(a,o,8,"ng-container",v);return null!==v&&As(C,v,!0),Zy(a,c,C,Er(g,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(g,f,h,a,c):f.data[g];Yi(v,!0);const C=h[g]=h[11].createComment("");return Ng(f,h,C,v),Xi(C,h),Qa(v)&&(Zg(f,h,v),Of(f,v,h)),null!=c&&Yg(h,v),sm}function ru(){let o=di();const a=en();return jl()?la():(o=o.parent,Yi(o,!1)),a.firstCreatePass&&(Gl(a,o),Qo(o)&&a.queries.elementEnd(o)),ru}function cv(o,a,c){return sm(o,a,c),ru(),cv}function ab(){return Ne()}function dv(o){return!!o&&"function"==typeof o.then}function lb(o){return!!o&&"function"==typeof o.subscribe}const ub=lb;function hv(o,a,c,h){const f=Ne(),g=en(),v=di();return function db(o,a,c,h,f,g,v,C){const I=Qa(h),R=o.firstCreatePass&&Sd(o),B=a[8],Y=jC(a);let se=!0;if(3&h.type||C){const Je=ki(h,a),pt=C?C(Je):Je,kt=Y.length,Pe=C?vt=>C(jn(vt[h.index])):h.index;let Xe=null;if(!C&&I&&(Xe=function mx(o,a,c,h){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===c&&f[g+1]===h){const C=a[7],I=f[g+2];return C.length>I?C[I]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,h.index)),null!==Xe)(Xe.__ngLastListenerFn__||Xe).__ngNextListenerFn__=g,Xe.__ngLastListenerFn__=g,se=!1;else{g=fb(h,a,B,g,!1);const vt=c.listen(pt,f,g);Y.push(g,vt),R&&R.push(f,Pe,kt,kt+1)}}else g=fb(h,a,B,g,!1);const Te=h.outputs;let Ze;if(se&&null!==Te&&(Ze=Te[f])){const Je=Ze.length;if(Je)for(let pt=0;pt<Je;pt+=2){const wt=a[Ze[pt]][Ze[pt+1]].subscribe(g),ls=Y.length;Y.push(g,wt),R&&R.push(f,h.index,ls,-(ls+1))}}}(g,f,f[11],v,o,a,0,h),hv}function hb(o,a,c,h){try{return!1!==c(h)}catch(f){return GC(o,f),!1}}function fb(o,a,c,h,f){return function g(v){if(v===Function)return h;Rf(2&o.flags?fn(o.index,a):a);let I=hb(a,0,h,v),A=g.__ngNextListenerFn__;for(;A;)I=hb(a,0,A,v)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function fv(o=1){return function Hs(o){return(Ut.lFrame.contextLView=function Uc(o,a){for(;o>0;)a=a[15],o--;return a}(o,Ut.lFrame.contextLView))[8]}(o)}function _x(o,a){let c=null;const h=function Fg(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===h?RA(o,g,!0):NA(h,g))return f}else c=f}return c}function pb(o){const a=Ne()[16][6];if(!a.projection){const h=a.projection=bo(o?o.length:1,null),f=h.slice();let g=a.child;for(;null!==g;){const v=o?_x(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:h[v]=g,f[v]=g),g=g.next}}}function gb(o,a=0,c){const h=Ne(),f=en(),g=Ed(f,22+o,16,null,c||null);null===g.projection&&(g.projection=a),la(),64!=(64&g.flags)&&function dC(o,a,c){Tf(a[11],0,a,c,rC(o,c,a),Oi(c.parent||a[6],c,a))}(f,h,g)}function pv(o,a,c){return gv(o,"",a,"",c),pv}function gv(o,a,c,h,f){const g=Ne(),v=Od(g,a,c,h);return v!==Kt&&Ds(en(),Un(),g,o,v,g[11],f,!1),gv}function Ff(o,a,c,h,f){const g=o[c+1],v=null===a;let C=h?No(g):Tl(g),I=!1;for(;0!==C&&(!1===I||v);){const R=o[C+1];wx(o[C],a)&&(I=!0,o[C+1]=h?md(R):ky(R)),C=h?No(R):Tl(R)}I&&(o[c+1]=h?ky(g):md(g))}function wx(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&is(o,a)>=0}const zn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yv(o){return o.substring(zn.key,zn.keyEnd)}function Sr(o){return o.substring(zn.value,zn.valueEnd)}function vb(o,a){const c=zn.textEnd;return c===a?-1:(a=zn.keyEnd=function wb(o,a,c){for(;a<c&&o.charCodeAt(a)>32;)a++;return a}(o,zn.key=a,c),nc(o,a,c))}function vv(o,a){const c=zn.textEnd;let h=zn.key=nc(o,a,c);return c===h?-1:(h=zn.keyEnd=function Eb(o,a,c){let h;for(;a<c&&(45===(h=o.charCodeAt(a))||95===h||(-33&h)>=65&&(-33&h)<=90||h>=48&&h<=57);)a++;return a}(o,h,c),h=Ev(o,h,c),h=zn.value=nc(o,h,c),h=zn.valueEnd=function Cb(o,a,c){let h=-1,f=-1,g=-1,v=a,C=v;for(;v<c;){const I=o.charCodeAt(v++);if(59===I)return C;34===I||39===I?C=v=Cv(o,I,v,c):a===v-4&&85===g&&82===f&&76===h&&40===I?C=v=Cv(o,41,v,c):I>32&&(C=v),g=f,f=h,h=-33&I}return C}(o,h,c),Ev(o,h,c))}function wv(o){zn.key=0,zn.keyEnd=0,zn.value=0,zn.valueEnd=0,zn.textEnd=o.length}function nc(o,a,c){for(;a<c&&o.charCodeAt(a)<=32;)a++;return a}function Ev(o,a,c,h){return(a=nc(o,a,c))<c&&a++,a}function Cv(o,a,c,h){let f=-1,g=c;for(;g<h;){const v=o.charCodeAt(g++);if(v==a&&92!==f)return g;f=92==v&&92===f?0:v}throw new Error}function om(o,a,c){return to(o,a,c,!1),om}function am(o,a){return to(o,a,null,!0),am}function eo(o){xs(Sv,bb,o,!1)}function bb(o,a){for(let c=function eF(o){return wv(o),vv(o,nc(o,0,zn.textEnd))}(a);c>=0;c=vv(a,c))Sv(o,yv(a),Sr(a))}function Ib(o){xs(ht,Fo,o,!0)}function Fo(o,a){for(let c=function ou(o){return wv(o),vb(o,nc(o,0,zn.textEnd))}(a);c>=0;c=vb(a,c))ht(o,yv(a),!0)}function to(o,a,c,h){const f=Ne(),g=en(),v=vs(2);g.firstUpdatePass&&lm(g,o,v,h),a!==Kt&&Bn(f,v,a)&&xl(g,g.data[Vn()],f,f[11],o,f[v+1]=function tF(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=fe(qs(o)))),o}(a,c),h,v)}function xs(o,a,c,h){const f=en(),g=vs(2);f.firstUpdatePass&&lm(f,null,g,h);const v=Ne();if(c!==Kt&&Bn(v,g,c)){const C=f.data[Vn()];if(um(C,h)&&!Iv(f,g)){let I=h?C.classesWithoutHost:C.stylesWithoutHost;null!==I&&(c=ve(I,c||"")),im(f,C,v,c,h)}else!function Br(o,a,c,h,f,g,v,C){f===Kt&&(f=Ot);let I=0,A=0,R=0<f.length?f[0]:null,B=0<g.length?g[0]:null;for(;null!==R||null!==B;){const Y=I<f.length?f[I+1]:void 0,se=A<g.length?g[A+1]:void 0;let Ze,Te=null;R===B?(I+=2,A+=2,Y!==se&&(Te=B,Ze=se)):null===B||null!==R&&R<B?(I+=2,Te=R):(A+=2,Te=B,Ze=se),null!==Te&&xl(o,a,c,h,Te,Ze,v,C),R=I<f.length?f[I]:null,B=A<g.length?g[A]:null}}(f,C,v,v[11],v[g+1],v[g+1]=function Ab(o,a,c){if(null==c||""===c)return Ot;const h=[],f=qs(c);if(Array.isArray(f))for(let g=0;g<f.length;g++)o(h,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&o(h,g,f[g]);else"string"==typeof f&&a(h,f);return h}(o,a,c),h,g)}}function Iv(o,a){return a>=o.expandoStartIndex}function lm(o,a,c,h){const f=o.data;if(null===f[c+1]){const g=f[Vn()],v=Iv(o,c);um(g,h)&&null===a&&!v&&(a=!1),a=function Tb(o,a,c,h){const f=function Mu(o){const a=Ut.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(c=Gd(c=jd(null,o,a,c,h),a.attrs,h),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(c=jd(f,o,a,c,h),null===g){let I=function Sb(o,a,c){const h=c?a.classBindings:a.styleBindings;if(0!==Tl(h))return o[No(h)]}(o,a,h);void 0!==I&&Array.isArray(I)&&(I=jd(null,o,a,I[1],h),I=Gd(I,a.attrs,h),function Db(o,a,c,h){o[No(c?a.classBindings:a.styleBindings)]=h}(o,a,h,I))}else g=function Tv(o,a,c){let h;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)h=Gd(h,o[g].hostAttrs,c);return Gd(h,a.attrs,c)}(o,a,h)}return void 0!==g&&(h?a.residualClasses=g:a.residualStyles=g),c}(f,g,a,h),function yx(o,a,c,h,f,g){let v=g?a.classBindings:a.styleBindings,C=No(v),I=Tl(v);o[h]=c;let R,A=!1;if(Array.isArray(c)){const B=c;R=B[1],(null===R||is(B,R)>0)&&(A=!0)}else R=c;if(f)if(0!==I){const Y=No(o[C+1]);o[h+1]=Hg(Y,C),0!==Y&&(o[Y+1]=Oy(o[Y+1],h)),o[C+1]=function zA(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=Hg(C,0),0!==C&&(o[C+1]=Oy(o[C+1],h)),C=h;else o[h+1]=Hg(I,0),0===C?C=h:o[I+1]=Oy(o[I+1],h),I=h;A&&(o[h+1]=ky(o[h+1])),Ff(o,R,h,!0),Ff(o,R,h,!1),function vx(o,a,c,h,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&is(g,a)>=0&&(c[h+1]=md(c[h+1]))}(a,R,o,h,g),v=Hg(C,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,c,v,h)}}function jd(o,a,c,h,f){let g=null;const v=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<v&&(g=a[C],h=Gd(h,g.hostAttrs,f),g!==o);)C++;return null!==o&&(c.directiveStylingLast=C),h}function Gd(o,a,c){const h=c?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),ht(o,v,!!c||a[++g]))}return void 0===o?null:o}function Sv(o,a,c){ht(o,a,qs(c))}function xl(o,a,c,h,f,g,v,C){if(!(3&a.type))return;const I=o.data,A=I[C+1];Av(function Ir(o){return 1==(1&o)}(A)?Dv(I,a,c,f,Tl(A),v):void 0)||(Av(g)||function My(o){return 2==(2&o)}(A)&&(g=Dv(I,null,c,f,C,v)),function hC(o,a,c,h,f){if(a)f?o.addClass(c,h):o.removeClass(c,h);else{let g=-1===h.indexOf("-")?void 0:Ra.DashCase;null==f?o.removeStyle(c,h,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=Ra.Important),o.setStyle(c,h,f,g))}}(h,v,Pr(Vn(),c),f,g))}function Dv(o,a,c,h,f,g){const v=null===a;let C;for(;f>0;){const I=o[f],A=Array.isArray(I),R=A?I[1]:I,B=null===R;let Y=c[f+1];Y===Kt&&(Y=B?Ot:void 0);let se=B?_l(Y,h):R===h?Y:void 0;if(A&&!Av(se)&&(se=_l(I,h)),Av(se)&&(C=se,v))return C;const Te=o[f+1];f=v?No(Te):Tl(Te)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(C=_l(I,h))}return C}function Av(o){return void 0!==o}function um(o,a){return 0!=(o.flags&(a?16:32))}function xb(o,a=""){const c=Ne(),h=en(),f=o+22,g=h.firstCreatePass?Ed(h,f,1,a,null):h.data[f],v=c[f]=function my(o,a){return o.createText(a)}(c[11],a);Ng(h,c,v,g),Yi(g,!1)}function Lf(o){return ic("",o,""),Lf}function ic(o,a,c){const h=Ne(),f=Od(h,o,a,c);return f!==Kt&&Qs(h,Vn(),f),ic}function xv(o,a,c,h,f){const g=Ne(),v=Rd(g,o,a,c,h,f);return v!==Kt&&Qs(g,Vn(),v),xv}function rc(o,a,c,h,f){eo(Rd(Ne(),o,a,c,h,f))}const sc=void 0;var pm=["en",[["a","p"],["AM","PM"],sc],[["AM","PM"],sc,sc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sc,"{1} 'at' {0}",sc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pv(o){const c=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let zd={};function gm(o){const a=function Lb(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Fb(a);if(c)return c;const h=a.split("-")[0];if(c=Fb(h),c)return c;if("en"===h)return pm;throw new Se(701,!1)}function Fv(o){return gm(o)[Nt.PluralCase]}function Fb(o){return o in zd||(zd[o]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[o]),zd[o]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const Wd="en-US";let Kd=Wd;function Zv(o,a,c,h,f){if(o=ee(o),Array.isArray(o))for(let g=0;g<o.length;g++)Zv(o[g],a,c,h,f);else{const g=en(),v=Ne();let C=Ks(o)?o:ee(o.provide),I=mg(o);const A=di(),R=1048575&A.providerIndexes,B=A.directiveStart,Y=A.providerIndexes>>20;if(Ks(o)||!o.multi){const se=new Cr(I,f,Il),Te=Qv(C,a,f?R:R+Y,B);-1===Te?(vo(Cs(A,v),g,C),Yv(g,o,a.length),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(se),v.push(se)):(c[Te]=se,v[Te]=se)}else{const se=Qv(C,a,R+Y,B),Te=Qv(C,a,R,R+Y),Ze=se>=0&&c[se],Je=Te>=0&&c[Te];if(f&&!Je||!f&&!Ze){vo(Cs(A,v),g,C);const pt=function Xx(o,a,c,h,f){const g=new Cr(o,c,Il);return g.multi=[],g.index=a,g.componentProviders=0,uI(g,f,h&&!c),g}(f?Jx:Qx,c.length,f,h,I);!f&&Je&&(c[Te].providerFactory=pt),Yv(g,o,a.length,0),a.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(pt),v.push(pt)}else Yv(g,o,se>-1?se:Te,uI(c[f?Te:se],I,!f&&h));!f&&h&&Je&&c[Te].componentProviders++}}}function Yv(o,a,c,h){const f=Ks(a),g=function NE(o){return!!o.useClass}(a);if(f||g){const I=(g?ee(a.useClass):a).prototype.ngOnDestroy;if(I){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=A.indexOf(c);-1===R?A.push(c,[h,I]):A[R+1].push(h,I)}else A.push(c,I)}}}function uI(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Qv(o,a,c,h){for(let f=c;f<h;f++)if(a[f]===o)return f;return-1}function Qx(o,a,c,h){return Jv(this.multi,[])}function Jx(o,a,c,h){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=es(c,c[1],this.providerFactory.index,h);g=C.slice(0,v),Jv(f,g);for(let I=v;I<C.length;I++)g.push(C[I])}else g=[],Jv(f,g);return g}function Jv(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function cI(o,a=[]){return c=>{c.providersResolver=(h,f)=>function bF(o,a,c){const h=en();if(h.firstCreatePass){const f=sr(o);Zv(c,h.data,h.blueprint,f,!0),Zv(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class Jd{}class dI{}function eM(o,a){return new hI(o,a??null)}class hI extends Jd{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iv(this);const h=ut(a);this._bootstrapComponents=bl(h.bootstrap),this._r3Injector=Df(a,c,[{provide:Jd,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],fe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Xv extends dI{constructor(a){super(),this.moduleType=a}create(a){return new hI(this.moduleType,a)}}class nM extends Jd{constructor(a,c,h){super(),this.componentFactoryResolver=new iv(this),this.instance=null;const f=new Q_([...a,{provide:Jd,useValue:this},{provide:Yu,useValue:this.componentFactoryResolver}],c||gg(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function ew(o,a,c=null){return new nM(o,a,c).injector}let iM=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const h=kE(0,c.type),f=h.length>0?ew([h],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=cn({token:o,providedIn:"environment",factory:()=>new o(Ln(Oa))}),o})();function fI(o){o.getStandaloneInjector=a=>a.get(iM).getOrCreateStandaloneInjector(o)}function wI(o,a,c){const h=hi()+o,f=Ne();return f[h]===Kt?Hi(f,h,c?a.call(c):a()):Xs(f,h)}function EI(o,a,c,h){return function SI(o,a,c,h,f,g){const v=a+c;return Bn(o,v,f)?Hi(o,v+1,g?h.call(g,f):h(f)):Wf(o,v+1)}(Ne(),hi(),o,a,c,h)}function tw(o,a,c,h,f){return function DI(o,a,c,h,f,g,v){const C=a+c;return Md(o,C,f,g)?Hi(o,C+2,v?h.call(v,f,g):h(f,g)):Wf(o,C+2)}(Ne(),hi(),o,a,c,h,f)}function CI(o,a,c,h,f,g){return function AI(o,a,c,h,f,g,v,C){const I=a+c;return function be(o,a,c,h,f){const g=Md(o,a,c,h);return Bn(o,a+2,f)||g}(o,I,f,g,v)?Hi(o,I+3,C?h.call(C,f,g,v):h(f,g,v)):Wf(o,I+3)}(Ne(),hi(),o,a,c,h,f,g)}function bI(o,a,c,h,f,g,v){return function iw(o,a,c,h,f,g,v,C,I){const A=a+c;return as(o,A,f,g,v,C)?Hi(o,A+4,I?h.call(I,f,g,v,C):h(f,g,v,C)):Wf(o,A+4)}(Ne(),hi(),o,a,c,h,f,g,v)}function II(o,a,c,h,f,g,v,C){const I=hi()+o,A=Ne(),R=as(A,I,c,h,f,g);return Bn(A,I+4,v)||R?Hi(A,I+5,C?a.call(C,c,h,f,g,v):a(c,h,f,g,v)):Xs(A,I+5)}function nw(o,a,c,h,f,g,v,C,I){const A=hi()+o,R=Ne(),B=as(R,A,c,h,f,g);return Md(R,A+4,v,C)||B?Hi(R,A+6,I?a.call(I,c,h,f,g,v,C):a(c,h,f,g,v,C)):Xs(R,A+6)}function TI(o,a,c,h){return function rw(o,a,c,h,f,g){let v=a+c,C=!1;for(let I=0;I<f.length;I++)Bn(o,v++,f[I])&&(C=!0);return C?Hi(o,v,h.apply(g,f)):Wf(o,v)}(Ne(),hi(),o,a,c,h)}function Wf(o,a){const c=o[a];return c===Kt?void 0:c}function sw(o){return a=>{setTimeout(o,void 0,a)}}const Va=class wM extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,h){let f=a,g=c||(()=>null),v=h;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=sw(g),f&&(f=sw(f)),v&&(v=sw(v)));const C=super.subscribe({next:f,error:g,complete:v});return a instanceof $.w0&&a.add(C),C}};function EM(){return this._results[tc()]()}class ow{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=tc(),h=ow.prototype;h[c]||(h[c]=EM)}get changes(){return this._changes||(this._changes=new Va)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const h=this;h.dirty=!1;const f=Rn(a);(this._changesDetected=!function Qi(o,a,c){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],g=a[h];if(c&&(f=c(f),g=c(g)),g!==f)return!1}return!0}(h._results,f,c))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Kf=(()=>{class o{}return o.__NG_ELEMENT_ID__=IM,o})();const CM=Kf,bM=class extends CM{constructor(a,c,h){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(a,c){const h=this._declarationTContainer.tViews,f=qg(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,c||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(h)),$y(h,f,a),new Dd(f)}};function IM(){return Im(di(),Ne())}function Im(o,a){return 4&o.type?new bM(a,o,ad(o,a)):null}let Tm=(()=>{class o{}return o.__NG_ELEMENT_ID__=TM,o})();function TM(){return OI(di(),Ne())}const SM=Tm,kI=class extends SM{constructor(a,c,h){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=h}get element(){return ad(this._hostTNode,this._hostLView)}get injector(){return new ya(this._hostTNode,this._hostLView)}get parentInjector(){const a=pl(this._hostTNode,this._hostLView);if(qh(a)){const c=js(a,this._hostLView),h=fi(a);return new ya(c[1].data[h+8],c)}return new ya(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=aw(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,h){let f,g;"number"==typeof h?f=h:null!=h&&(f=h.index,g=h.injector);const v=a.createEmbeddedView(c||{},g);return this.insert(v,f),v}createComponent(a,c,h,f,g){const v=a&&!function ns(o){return"function"==typeof o}(a);let C;if(v)C=c;else{const B=c||{};C=B.index,h=B.injector,f=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const I=v?a:new tm(O(a)),A=h||this.parentInjector;if(!g&&null==I.ngModule){const Y=(v?A:this.parentInjector).get(Oa,null);Y&&(g=Y)}const R=I.create(A,f,void 0,g);return this.insert(R.hostView,C),R}insert(a,c){const h=a._lView,f=h[1];if(function Au(o){return yr(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const B=h[3],Y=new kI(B,B[6],B[3]);Y.detach(Y.indexOf(a))}}const g=this._adjustIndex(c),v=this._lContainer;!function IA(o,a,c,h){const f=10+h,g=c.length;h>0&&(c[f-1][4]=a),h<g-10?(a[4]=c[f],Co(c,10+h,a)):(c.push(a),a[4]=null),a[3]=c;const v=a[17];null!==v&&c!==v&&function TA(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(v,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,h,v,g);const C=cC(g,v),I=h[11],A=Og(I,v[7]);return null!==A&&function tC(o,a,c,h,f,g){h[0]=f,h[6]=a,Ju(o,h,c,1,f,g)}(f,v[6],I,h,A,C),a.attachToViewContainerRef(),Co(Sm(v),g,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=aw(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),h=yy(this._lContainer,c);h&&(bi(Sm(this._lContainer),c),If(h[1],h))}detach(a){const c=this._adjustIndex(a,-1),h=yy(this._lContainer,c);return h&&null!=bi(Sm(this._lContainer),c)?new Dd(h):null}_adjustIndex(a,c=0){return a??this.length+c}};function aw(o){return o[8]}function Sm(o){return o[8]||(o[8]=[])}function OI(o,a){let c;const h=a[o.index];if(yr(h))c=h;else{let f;if(8&o.type)f=jn(h);else{const g=a[11];f=g.createComment("");const v=ki(o,a);Na(g,Og(g,v),f,function lC(o,a){return o.nextSibling(a)}(g,v),!1)}a[o.index]=c=lx(h,a,f,o),Id(a,c)}return new kI(c,o,a)}class lw{constructor(a){this.queryList=a,this.matches=null}clone(){return new lw(this.queryList)}setDirty(){this.queryList.setDirty()}}class uw{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const h=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let g=0;g<h;g++){const v=c.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new uw(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==GI(a,c).matches&&this.queries[c].setDirty()}}class NI{constructor(a,c,h=null){this.predicate=a,this.flags=c,this.read=h}}class cw{constructor(a=[]){this.queries=a}elementStart(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let h=0;h<this.length;h++){const f=null!==c?c.length:0,g=this.getByIndex(h).embeddedTView(a,f);g&&(g.indexInDeclarationView=h,null!==c?c.push(g):c=[g])}return null!==c?new cw(c):null}template(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class dw{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new dw(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const g=h[f];this.matchTNodeWithReadOption(a,c,xM(c,g)),this.matchTNodeWithReadOption(a,c,ml(c,a,g,!1,!1))}else h===Kf?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,ml(c,a,h,!1,!1))}matchTNodeWithReadOption(a,c,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===Qu||f===Tm||f===Kf&&4&c.type)this.addMatch(c.index,-2);else{const g=ml(c,a,f,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,h)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function xM(o,a){const c=o.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===a)return c[h+1];return null}function kM(o,a,c,h){return-1===c?function MM(o,a){return 11&o.type?ad(o,a):4&o.type?Im(o,a):null}(a,o):-2===c?function PI(o,a,c){return c===Qu?ad(a,o):c===Kf?Im(a,o):c===Tm?OI(a,o):void 0}(o,a,h):es(o,o[1],c,a)}function FI(o,a,c,h){const f=a[19].queries[h];if(null===f.matches){const g=o.data,v=c.matches,C=[];for(let I=0;I<v.length;I+=2){const A=v[I];C.push(A<0?null:kM(a,g[A],v[I+1],c.metadata.read))}f.matches=C}return f.matches}function hw(o,a,c,h){const f=o.queries.getByIndex(c),g=f.matches;if(null!==g){const v=FI(o,a,f,c);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)h.push(v[C/2]);else{const A=g[C+1],R=a[-I];for(let B=10;B<R.length;B++){const Y=R[B];Y[17]===Y[3]&&hw(Y[1],Y,A,h)}if(null!==R[9]){const B=R[9];for(let Y=0;Y<B.length;Y++){const se=B[Y];hw(se[1],se,A,h)}}}}}return h}function LI(o){const a=Ne(),c=en(),h=al();ku(h+1);const f=GI(c,h);if(o.dirty&&function Du(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?hw(c,a,h,[]):FI(c,a,f,h);o.reset(g,UE),o.notifyOnChanges()}return!0}return!1}function VI(o,a,c){const h=en();h.firstCreatePass&&(jI(h,new NI(o,a,c),-1),2==(2&a)&&(h.staticViewQueries=!0)),HI(h,Ne(),a)}function UI(o,a,c,h){const f=en();if(f.firstCreatePass){const g=di();jI(f,new NI(a,c,h),g.index),function RM(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}HI(f,Ne(),c)}function BI(){return function OM(o,a){return o[19].queries[a].queryList}(Ne(),al())}function HI(o,a,c){const h=new ow(4==(4&c));Wy(o,a,h,h.destroy),null===a[19]&&(a[19]=new uw),a[19].queries.push(new lw(h))}function jI(o,a,c){null===o.queries&&(o.queries=new cw),o.queries.track(new dw(a,c))}function GI(o,a){return o.queries.getByIndex(a)}function $I(o,a){return Im(o,a)}function xm(...o){}const aT=new On("Application Initializer");let Mm=(()=>{class o{constructor(c){this.appInits=c,this.resolve=xm,this.reject=xm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(dv(g))c.push(g);else if(ub(g)){const v=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});c.push(v)}}Promise.all(c).then(()=>{h()}).catch(f=>{this.reject(f)}),0===c.length&&h(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Ln(aT,8))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const lT=new On("AppId",{providedIn:"root",factory:function uT(){return`${yw()}${yw()}${yw()}`}});function yw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cT=new On("Platform Initializer"),ek=new On("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dT=new On("appBootstrapListener"),tk=new On("AnimationModuleType");let nk=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const km=new On("LocaleId",{providedIn:"root",factory:()=>S(km,nt.Optional|nt.SkipSelf)||function ik(){return typeof $localize<"u"&&$localize.locale||Wd}()}),rk=new On("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class sk{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let ok=(()=>{class o{compileModuleSync(c){return new Xv(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),g=bl(ut(c).declarations).reduce((v,C)=>{const I=O(C);return I&&v.push(new tm(I)),v},[]);return new sk(h,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const mT=(()=>Promise.resolve(0))();function _T(o){typeof Zone>"u"?mT.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Vo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Va(!1),this.onMicrotaskEmpty=new Va(!1),this.onStable=new Va(!1),this.onError=new Va(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&c,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function uk(){let o=Ft.requestAnimationFrame,a=Ft.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function qF(o){const a=()=>{!function WF(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ft,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,ww(o),o.isCheckStableRunning=!0,vw(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),ww(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,f,g,v,C)=>{try{return yT(o),c.invokeTask(f,g,v,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),vT(o)}},onInvoke:(c,h,f,g,v,C,I)=>{try{return yT(o),c.invoke(f,g,v,C,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),vT(o)}},onHasTask:(c,h,f,g)=>{c.hasTask(f,g),h===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,ww(o),vw(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,h,f,g)=>(c.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vo.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(Vo.isInAngularZone())throw new Se(909,!1)}run(a,c,h){return this._inner.run(a,c,h)}runTask(a,c,h,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,zF,xm,xm);try{return g.runTask(v,c,h)}finally{g.cancelTask(v)}}runGuarded(a,c,h){return this._inner.runGuarded(a,c,h)}runOutsideAngular(a){return this._outer.run(a)}}const zF={};function vw(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function ww(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function yT(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function vT(o){o._nesting--,vw(o)}class wT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Va,this.onMicrotaskEmpty=new Va,this.onStable=new Va,this.onError=new Va}run(a,c,h){return a.apply(c,h)}runGuarded(a,c,h){return a.apply(c,h)}runOutsideAngular(a){return a()}runTask(a,c,h,f){return a.apply(c,h)}}const Om=new On(""),Ew=new On("");let Cw,ck=(()=>{class o{constructor(c,h,f){this._ngZone=c,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Cw||(function dk(o){Cw=o}(f),f.addToWindow(h)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vo.assertNotInAngularZone(),_T(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_T(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,f){let g=-1;h&&h>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:f})}whenStable(c,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,h,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Ln(Vo),Ln(ET),Ln(Ew))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})(),ET=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return Cw?.findTestabilityInTree(this,c,h)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),lc=null;const Rm=new On("AllowMultipleToken"),Nm=new On("PlatformDestroyListeners");class pk{constructor(a,c){this.name=a,this.token=c}}function Iw(o,a,c=[]){const h=`Platform: ${a}`,f=new On(h);return(g=[])=>{let v=Fm();if(!v||v.injector.get(Rm,!1)){const C=[...c,...g,{provide:f,useValue:!0}];o?o(C):function CT(o){if(lc&&!lc.get(Rm,!1))throw new Se(400,!1);lc=o;const a=o.get(Tw);(function Pm(o){const a=o.get(cT,null);a&&a.forEach(c=>c())})(o)}(function th(o=[],a){return ec.create({name:a,providers:[{provide:hg,useValue:"platform"},{provide:Nm,useValue:new Set([()=>lc=null])},...o]})}(C,h))}return function bT(o){const a=Fm();if(!a)throw new Se(401,!1);return a}()}}function Fm(){return lc?.get(Tw)??null}let Tw=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const f=function ih(o,a){let c;return c="noop"===o?new wT:("zone.js"===o?void 0:o)||new Vo(a),c}(h?.ngZone,function ji(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),g=[{provide:Vo,useValue:f}];return f.run(()=>{const v=ec.create({providers:g,parent:this.injector,name:c.moduleType.name}),C=c.create(v),I=C.injector.get(Ef,null);if(!I)throw new Se(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:R=>{I.handleError(R)}});C.onDestroy(()=>{Vm(this._modules,C),A.unsubscribe()})}),function Lm(o,a,c){try{const h=c();return dv(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(I,f,()=>{const A=C.injector.get(Mm);return A.runInitializers(),A.donePromise.then(()=>(function _m(o){qt(o,"Expected localeId to be defined"),"string"==typeof o&&(Kd=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(km,Wd)||Wd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,h=[]){const f=Uo({},h);return function bw(o,a,c){const h=new Xv(c);return Promise.resolve(h)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(c){const h=c.injector.get(Gi);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Se(403,!1);c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const c=this._injector.get(Nm,null);c&&(c.forEach(h=>h()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Ln(ec))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Uo(o,a){return Array.isArray(a)?a.reduce(Uo,o):{...o,...a}}let Gi=(()=>{class o{constructor(c,h,f){this._zone=c,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new P.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new P.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Vo.assertNotInAngularZone(),_T(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(g,v.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,h){const f=c instanceof ey;if(!this._injector.get(Mm).done)throw!f&&Le(c),new Se(405,false);let v;v=f?c:this._injector.get(Yu).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const C=function fk(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Jd),A=v.create(ec.NULL,[],h||v.selector,C),R=A.location.nativeElement,B=A.injector.get(Om,null);return B?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),Vm(this.components,A),B?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;Vm(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(dT,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Vm(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Se(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(Ln(Vo),Ln(Oa),Ln(Ef))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Vm(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let Ba=!0,Bo=!1;function cc(){return Bo=!0,Ba}function mk(){if(Bo)throw new Error("Cannot enable prod mode after platform setup.");Ba=!1}let tr=(()=>{class o{}return o.__NG_ELEMENT_ID__=TT,o})();function TT(o){return function _k(o,a,c){if(bu(o)&&!c){const h=fn(o.index,a);return new Dd(h,h)}return 47&o.type?new Dd(a[16],a):null}(di(),Ne(),16==(16&o))}class Dw{constructor(){}supports(a){return Ad(a)}create(a){return new bk(a)}}const Aw=(o,a)=>a;class bk{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Aw}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,h=this._removalsHead,f=0,g=null;for(;c||h;){const v=!h||c&&c.currentIndex<zm(h,f,g)?c:h,C=zm(v,f,g),I=v.currentIndex;if(v===h)f--,h=h._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{g||(g=[]);const A=C-f,R=I-f;if(A!=R){for(let Y=0;Y<A;Y++){const se=Y<g.length?g[Y]:g[Y]=0,Te=se+Y;R<=Te&&Te<A&&(g[Y]=se+1)}g[v.previousIndex]=R-A}}C!==I&&a(v,C,I)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Ad(a))throw new Se(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,c=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)g=a[C],v=this._trackByFn(C,g),null!==c&&Object.is(c.trackById,v)?(h&&(c=this._verifyReinsertion(c,g,v,C)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,v,C),h=!0),c=c._next}else f=0,function xd(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[tc()]();let h;for(;!(h=c.next()).done;)a(h.value)}}(a,C=>{v=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,v)?(h&&(c=this._verifyReinsertion(c,C,v,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,v,f),h=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,h,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,f)):a=this._addAfter(new MT(c,h),g,f),a}_verifyReinsertion(a,c,h,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,c,h),this._addToMoves(a,h),a}_moveAfter(a,c,h){return this._unlink(a),this._insertAfter(a,c,h),this._addToMoves(a,h),a}_addAfter(a,c,h){return this._insertAfter(a,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,h){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new $m),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,h=a._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $m),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class MT{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ik{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const c=a._prevDup,h=a._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class $m{constructor(){this.map=new Map}put(a){const c=a.trackById;let h=this.map.get(c);h||(h=new Ik,this.map.set(c,h)),h.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zm(o,a,c){const h=o.previousIndex;if(null===h)return h;let f=0;return c&&h<c.length&&(f=c[h]),h+a+f}class Wm{constructor(){}supports(a){return a instanceof Map||av(a)}create(){return new Tk}}class Tk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||av(a)))throw new Se(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(f,h);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const h=a._prev;return c._next=a,c._prev=h,a._prev=c,h&&(h._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const h=new Sk(a);return this._records.set(a,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(h=>c(a[h],h))}}class Sk{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xw(){return new Mw([new Dw])}let Mw=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(null!=h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||xw()),deps:[[o,new Rt,new Ge]]}}find(c){const h=this.factories.find(f=>f.supports(c));if(null!=h)return h;throw new Se(901,!1)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:xw}),o})();function kT(){return new qm([new Wm])}let qm=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||kT()),deps:[[o,new Rt,new Ge]]}}find(c){const h=this.factories.find(f=>f.supports(c));if(h)return h;throw new Se(901,!1)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:kT}),o})();const Dk=Iw(null,"core",[]);let Ak=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Ln(Gi))},o.\u0275mod=ln({type:o}),o.\u0275inj=zt({}),o})();function xk(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(yt,Oe,U)=>{U.d(Oe,{Z:()=>Se});var l=U(2090),$=U(4859),P=U(9681),ae=U(1877);class ce{constructor(Ce,me){this._delegate=Ce,this.firebase=me,(0,P._addComponent)(Ce,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ce,me=P._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(Ce);return!tt.isInitialized()&&"EXPLICIT"===(null===(it=tt.getComponent())||void 0===it?void 0:it.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:me})}_removeServiceInstance(Ce,me=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(me)}_addComponent(Ce){(0,P._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,P._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ve(){const at=function fe(at){const Ce={},me={__esModule:!0,initializeApp:function Ve(oe,de={}){const we=P.initializeApp(oe,de);if((0,l.r3)(Ce,we.name))return Ce[we.name];const X=new at(we,me);return Ce[we.name]=X,X},app:tt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(oe){const de=oe.name,we=de.replace("-compat","");if(P._registerComponent(oe)&&"PUBLIC"===oe.type){const X=(ne=tt())=>{if("function"!=typeof ne[we])throw ge.create("invalid-app-argument",{appName:de});return ne[we]()};void 0!==oe.serviceProps&&(0,l.ZB)(X,oe.serviceProps),me[we]=X,at.prototype[we]=function(...ne){return this._getService.bind(this,de).apply(this,oe.multipleInstances?ne:[])}}return"PUBLIC"===oe.type?me[we]:null},removeApp:function it(oe){delete Ce[oe]},useAsService:function Ye(oe,de){return"serverAuth"===de?null:de},modularAPIs:P}};function tt(oe){if(!(0,l.r3)(Ce,oe=oe||P._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:oe});return Ce[oe]}return me.default=me,Object.defineProperty(me,"apps",{get:function Re(){return Object.keys(Ce).map(oe=>Ce[oe])}}),tt.App=at,me}(ce);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ce(me){(0,l.ZB)(at,me)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),at}(),W=new ae.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=K;!function Fe(at){(0,P.registerVersion)("@firebase/app-compat","0.1.39",at)}()},9681:(yt,Oe,U)=>{U.r(Oe),U.d(Oe,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Yr,_DEFAULT_ENTRY_NAME:()=>qt,_addComponent:()=>un,_addOrOverwriteComponent:()=>cn,_apps:()=>_n,_clearComponents:()=>Kr,_components:()=>xn,_getProvider:()=>zt,_registerComponent:()=>Qt,_removeServiceInstance:()=>xi,deleteApp:()=>Qr,getApp:()=>Kn,getApps:()=>Rr,initializeApp:()=>qi,onLog:()=>ti,registerVersion:()=>ui,setLogLevel:()=>Sn});var l=U(5861),$=U(4859),P=U(1877),ae=U(2090),ce=U(8766);class _e{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function ge(st){return"VERSION"===st.getComponent()?.type}(ot)){const At=ot.getImmediate();return`${At.library}/${At.version}`}return null}).filter(ot=>ot).join(" ")}}const fe="@firebase/app",K=new P.Yd("@firebase/app"),qt="[DEFAULT]",Qe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_n=new Map,xn=new Map;function un(st,De){try{st.container.addComponent(De)}catch(ot){K.debug(`Component ${De.name} failed to register with FirebaseApp ${st.name}`,ot)}}function cn(st,De){st.container.addOrOverwriteComponent(De)}function Qt(st){const De=st.name;if(xn.has(De))return K.debug(`There were multiple attempts to register component ${De}.`),!1;xn.set(De,st);for(const ot of _n.values())un(ot,st);return!0}function zt(st,De){const ot=st.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),st.container.getProvider(De)}function xi(st,De,ot=qt){zt(st,De).clearInstance(ot)}function Kr(){xn.clear()}const Hn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zr{constructor(De,ot,At){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}const Yr="9.14.0";function qi(st,De={}){let ot=st;"object"!=typeof De&&(De={name:De});const At=Object.assign({name:qt,automaticDataCollectionEnabled:!1},De),Mt=At.name;if("string"!=typeof Mt||!Mt)throw Hn.create("bad-app-name",{appName:String(Mt)});if(ot||(ot=(0,ae.aH)()),!ot)throw Hn.create("no-options");const ln=_n.get(Mt);if(ln){if((0,ae.vZ)(ot,ln.options)&&(0,ae.vZ)(At,ln.config))return ln;throw Hn.create("duplicate-app",{appName:Mt})}const q=new $.H0(Mt);for(const J of xn.values())q.addComponent(J);const z=new Zr(ot,At,q);return _n.set(Mt,z),z}function Kn(st=qt){const De=_n.get(st);if(!De&&st===qt)return qi();if(!De)throw Hn.create("no-app",{appName:st});return De}function Rr(){return Array.from(_n.values())}function Qr(st){return nt.apply(this,arguments)}function nt(){return(nt=(0,l.Z)(function*(st){const De=st.name;_n.has(De)&&(_n.delete(De),yield Promise.all(st.container.getProviders().map(ot=>ot.delete())),st.isDeleted=!0)})).apply(this,arguments)}function ui(st,De,ot){var At;let Mt=null!==(At=Qe[st])&&void 0!==At?At:st;ot&&(Mt+=`-${ot}`);const ln=Mt.match(/\s|\//),q=De.match(/\s|\//);if(ln||q){const z=[`Unable to register library "${Mt}" with version "${De}":`];return ln&&z.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),ln&&q&&z.push("and"),q&&z.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void K.warn(z.join(" "))}Qt(new $.wA(`${Mt}-version`,()=>({library:Mt,version:De}),"VERSION"))}function ti(st,De){if(null!==st&&"function"!=typeof st)throw Hn.create("invalid-log-argument");(0,P.Am)(st,De)}function Sn(st){(0,P.Ub)(st)}const Dn="firebase-heartbeat-store";let Mn=null;function bn(){return Mn||(Mn=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(st,De)=>{0===De&&st.createObjectStore(Dn)}}).catch(st=>{throw Hn.create("idb-open",{originalErrorMessage:st.message})})),Mn}function bt(){return(bt=(0,l.Z)(function*(st){var De;try{return(yield bn()).transaction(Dn).objectStore(Dn).get(ni(st))}catch(ot){if(ot instanceof ae.ZR)K.warn(ot.message);else{const At=Hn.create("idb-get",{originalErrorMessage:null===(De=ot)||void 0===De?void 0:De.message});K.warn(At.message)}}})).apply(this,arguments)}function Ft(st,De){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,l.Z)(function*(st,De){var ot;try{const Mt=(yield bn()).transaction(Dn,"readwrite");return yield Mt.objectStore(Dn).put(De,ni(st)),Mt.done}catch(At){if(At instanceof ae.ZR)K.warn(At.message);else{const Mt=Hn.create("idb-set",{originalErrorMessage:null===(ot=At)||void 0===ot?void 0:ot.message});K.warn(Mt.message)}}})).apply(this,arguments)}function ni(st){return`${st.name}!${st.options.appId}`}class Vi{constructor(De){this.container=De,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new sn(ot),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var De=this;return(0,l.Z)(function*(){const At=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=Bt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!De._heartbeatsCache.heartbeats.some(ln=>ln.date===Mt))return De._heartbeatsCache.heartbeats.push({date:Mt,agent:At}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(ln=>{const q=new Date(ln.date).valueOf();return Date.now()-q<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,l.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const ot=Bt(),{heartbeatsToSend:At,unsentEntries:Mt}=function ir(st,De=1024){const ot=[];let At=st.slice();for(const Mt of st){const ln=ot.find(q=>q.agent===Mt.agent);if(ln){if(ln.dates.push(Mt.date),_i(ot)>De){ln.dates.pop();break}}else if(ot.push({agent:Mt.agent,dates:[Mt.date]}),_i(ot)>De){ot.pop();break}At=At.slice(1)}return{heartbeatsToSend:ot,unsentEntries:At}}(De._heartbeatsCache.heartbeats),ln=(0,ae.L)(JSON.stringify({version:2,heartbeats:At}));return De._heartbeatsCache.lastSentHeartbeatDate=ot,Mt.length>0?(De._heartbeatsCache.heartbeats=Mt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),ln})()}}function Bt(){return(new Date).toISOString().substring(0,10)}class sn{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,l.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function Ct(st){return bt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var ot=this;return(0,l.Z)(function*(){var At;if(yield ot._canUseIndexedDBPromise){const ln=yield ot.read();return Ft(ot.app,{lastSentHeartbeatDate:null!==(At=De.lastSentHeartbeatDate)&&void 0!==At?At:ln.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var ot=this;return(0,l.Z)(function*(){var At;if(yield ot._canUseIndexedDBPromise){const ln=yield ot.read();return Ft(ot.app,{lastSentHeartbeatDate:null!==(At=De.lastSentHeartbeatDate)&&void 0!==At?At:ln.lastSentHeartbeatDate,heartbeats:[...ln.heartbeats,...De.heartbeats]})}})()}}function _i(st){return(0,ae.L)(JSON.stringify({version:2,heartbeats:st})).length}!function Fn(st){Qt(new $.wA("platform-logger",De=>new _e(De),"PRIVATE")),Qt(new $.wA("heartbeat",De=>new Vi(De),"PRIVATE")),ui(fe,"0.8.4",st),ui(fe,"0.8.4","esm2017"),ui("fire-js","")}("")},4859:(yt,Oe,U)=>{U.d(Oe,{H0:()=>fe,wA:()=>P,zt:()=>ce});var l=U(5861),$=U(2090);class P{constructor(K,W,ee){this.name=K,this.instanceFactory=W,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ae="[DEFAULT]";class ce{constructor(K,W){this.name=K,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const W=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(W)){const ee=new $.BH;if(this.instancesDeferred.set(W,ee),this.isInitialized(W)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:W});qe&&ee.resolve(qe)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(K){var W;const ee=this.normalizeInstanceIdentifier(K?.identifier),qe=null!==(W=K?.optional)&&void 0!==W&&W;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Fe){if(qe)return null;throw Fe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function ge(ve){return"EAGER"===ve.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[W,ee]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(W);try{const Fe=this.getOrInitializeService({instanceIdentifier:qe});ee.resolve(Fe)}catch{}}}}clearInstance(K=ae){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,l.Z)(function*(){const W=Array.from(K.instances.values());yield Promise.all([...W.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...W.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ae){return this.instances.has(K)}getOptions(K=ae){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:W={}}=K,ee=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ee,options:W});for(const[Fe,Se]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Fe)&&Se.resolve(qe);return qe}onInit(K,W){var ee;const qe=this.normalizeInstanceIdentifier(W),Fe=null!==(ee=this.onInitCallbacks.get(qe))&&void 0!==ee?ee:new Set;Fe.add(K),this.onInitCallbacks.set(qe,Fe);const Se=this.instances.get(qe);return Se&&K(Se,qe),()=>{Fe.delete(K)}}invokeOnInitCallbacks(K,W){const ee=this.onInitCallbacks.get(W);if(ee)for(const qe of ee)try{qe(K,W)}catch{}}getOrInitializeService({instanceIdentifier:K,options:W={}}){let ee=this.instances.get(K);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=K,ve===ae?void 0:ve),options:W}),this.instances.set(K,ee),this.instancesOptions.set(K,W),this.invokeOnInitCallbacks(ee,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,ee)}catch{}var ve;return ee||null}normalizeInstanceIdentifier(K=ae){return this.component?this.component.multipleInstances?K:ae:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const W=this.getProvider(K.name);if(W.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);W.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const W=new ce(K,this);return this.providers.set(K,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(yt,Oe,U)=>{U.d(Oe,{Am:()=>ve,Ub:()=>fe,Yd:()=>ge,in:()=>$});const l=[];var $=(()=>{return(K=$||($={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",$;var K})();const P={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ae=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},_e=(K,W,...ee)=>{if(W<K.logLevel)return;const qe=(new Date).toISOString(),Fe=ce[W];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Fe](`[${qe}]  ${K.name}:`,...ee)};class ge{constructor(W){this.name=W,this._logLevel=ae,this._logHandler=_e,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in $))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?P[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...W),this._logHandler(this,$.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...W),this._logHandler(this,$.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,$.INFO,...W),this._logHandler(this,$.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,$.WARN,...W),this._logHandler(this,$.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...W),this._logHandler(this,$.ERROR,...W)}}function fe(K){l.forEach(W=>{W.setLogLevel(K)})}function ve(K,W){for(const ee of l){let qe=null;W&&W.level&&(qe=P[W.level]),ee.userLogHandler=null===K?null:(Fe,Se,...at)=>{const Ce=at.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Se>=(qe??Fe.logLevel)&&K({level:$[Se].toLowerCase(),message:Ce,args:at,type:Fe.name})}}}},8766:(yt,Oe,U)=>{U.d(Oe,{Lj:()=>Ve,X3:()=>tt});var l=U(5861);let P,ae;const ge=new WeakMap,fe=new WeakMap,ve=new WeakMap,K=new WeakMap,W=new WeakMap;let Fe={get(de,we,X){if(de instanceof IDBTransaction){if("done"===we)return fe.get(de);if("objectStoreNames"===we)return de.objectStoreNames||ve.get(de);if("store"===we)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return me(de[we])},set:(de,we,X)=>(de[we]=X,!0),has:(de,we)=>de instanceof IDBTransaction&&("done"===we||"store"===we)||we in de};function Ce(de){return"function"==typeof de?function at(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...we){return de.apply(it(this),we),me(ge.get(this))}:function(...we){return me(de.apply(it(this),we))}:function(we,...X){const ne=de.call(it(this),we,...X);return ve.set(ne,we.sort?we.sort():[we]),me(ne)}}(de):(de instanceof IDBTransaction&&function qe(de){if(fe.has(de))return;const we=new Promise((X,ne)=>{const pe=()=>{de.removeEventListener("complete",ue),de.removeEventListener("error",$e),de.removeEventListener("abort",$e)},ue=()=>{X(),pe()},$e=()=>{ne(de.error||new DOMException("AbortError","AbortError")),pe()};de.addEventListener("complete",ue),de.addEventListener("error",$e),de.addEventListener("abort",$e)});fe.set(de,we)}(de),((de,we)=>we.some(X=>de instanceof X))(de,function ce(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,Fe):de)}function me(de){if(de instanceof IDBRequest)return function ee(de){const we=new Promise((X,ne)=>{const pe=()=>{de.removeEventListener("success",ue),de.removeEventListener("error",$e)},ue=()=>{X(me(de.result)),pe()},$e=()=>{ne(de.error),pe()};de.addEventListener("success",ue),de.addEventListener("error",$e)});return we.then(X=>{X instanceof IDBCursor&&ge.set(X,de)}).catch(()=>{}),W.set(we,de),we}(de);if(K.has(de))return K.get(de);const we=Ce(de);return we!==de&&(K.set(de,we),W.set(we,de)),we}const it=de=>W.get(de);function tt(de,we,{blocked:X,upgrade:ne,blocking:pe,terminated:ue}={}){const $e=indexedDB.open(de,we),ze=me($e);return ne&&$e.addEventListener("upgradeneeded",Et=>{ne(me($e.result),Et.oldVersion,Et.newVersion,me($e.transaction))}),X&&$e.addEventListener("blocked",()=>X()),ze.then(Et=>{ue&&Et.addEventListener("close",()=>ue()),pe&&Et.addEventListener("versionchange",()=>pe())}).catch(()=>{}),ze}function Ve(de,{blocked:we}={}){const X=indexedDB.deleteDatabase(de);return we&&X.addEventListener("blocked",()=>we()),me(X).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ye=new Map;function oe(de,we){if(!(de instanceof IDBDatabase)||we in de||"string"!=typeof we)return;if(Ye.get(we))return Ye.get(we);const X=we.replace(/FromIndex$/,""),ne=we!==X,pe=Ie.includes(X);if(!(X in(ne?IDBIndex:IDBObjectStore).prototype)||!pe&&!Re.includes(X))return;const ue=function(){var $e=(0,l.Z)(function*(ze,...Et){const hn=this.transaction(ze,pe?"readwrite":"readonly");let qt=hn.store;return ne&&(qt=qt.index(Et.shift())),(yield Promise.all([qt[X](...Et),pe&&hn.done]))[0]});return function(Et){return $e.apply(this,arguments)}}();return Ye.set(we,ue),ue}!function Se(de){Fe=de(Fe)}(de=>({...de,get:(we,X,ne)=>oe(we,X)||de.get(we,X,ne),has:(we,X)=>!!oe(we,X)||de.has(we,X)}))},5861:(yt,Oe,U)=>{function l(P,ae,ce,_e,ge,fe,ve){try{var K=P[fe](ve),W=K.value}catch(ee){return void ce(ee)}K.done?ae(W):Promise.resolve(W).then(_e,ge)}function $(P){return function(){var ae=this,ce=arguments;return new Promise(function(_e,ge){var fe=P.apply(ae,ce);function ve(W){l(fe,_e,ge,ve,K,"next",W)}function K(W){l(fe,_e,ge,ve,K,"throw",W)}ve(void 0)})}}U.d(Oe,{Z:()=>$})}},yt=>{yt(yt.s=7336)}]);