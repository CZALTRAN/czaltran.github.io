"use strict";(self.webpackChunkhacka_sicredi=self.webpackChunkhacka_sicredi||[]).push([[179],{2011:(pt,Pe,F)=>{F.d(Pe,{Dh:()=>he,GT:()=>me,cc:()=>ke,hO:()=>He,on:()=>K,pX:()=>ue,xv:()=>ve});var m=F(4650),$=F(127),k=F(5813);pt=F.hmd(pt);const se=["ngOnDestroy"],ue=(ge,Qe,Ze,Le={})=>new Proxy(ge,{get:(Me,Ce)=>Ze.runOutsideAngular(()=>{var Ge;if(ge[Ce])return!(null===(Ge=Le?.spy)||void 0===Ge)&&Ge.get&&Le.spy.get(Ce,ge[Ce]),ge[Ce];if(se.indexOf(Ce)>-1)return()=>{};const ie=Qe.toPromise().then(le=>{const we=le&&le[Ce];return"function"==typeof we?we.bind(le):we&&we.then?we.then(Q=>Ze.run(()=>Q)):Ze.run(()=>we)});return new Proxy(()=>{},{get:(le,we)=>ie[we],apply:(le,we,Q)=>ie.then(ee=>{var fe;const ae=ee&&ee(...Q);return!(null===(fe=Le?.spy)||void 0===fe)&&fe.apply&&Le.spy.apply(Ce,Q,ae),ae})})})}),me=(ge,Qe)=>{Qe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Le=>{Object.defineProperty(ge.prototype,Le,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Le))})})};class pe{constructor(Qe){return Qe}}const he=new m.OlP("angularfire2.app.options"),ve=new m.OlP("angularfire2.app.name");function K(ge,Qe,Ze){const Me="object"==typeof Ze&&Ze||{};Me.name=Me.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ge=$.Z.apps.filter(ie=>ie&&ie.name===Me.name)[0]||Qe.runOutsideAngular(()=>$.Z.initializeApp(ge,Me));try{JSON.stringify(ge)!==JSON.stringify(Ge.options)&&z("error",`${Ge.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ge)}const z=(ge,...Qe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Qe)},X={provide:pe,useFactory:K,deps:[he,m.R0b,[new m.FiY,ve]]};let He=(()=>{class ge{constructor(Ze){$.Z.registerVersion("angularfire",k.q4.full,"core"),$.Z.registerVersion("angularfire",k.q4.full,"app-compat"),$.Z.registerVersion("angular",m.q4F.full,Ze.toString())}static initializeApp(Ze,Le){return{ngModule:ge,providers:[{provide:he,useValue:Ze},{provide:ve,useValue:Le}]}}}return ge.\u0275fac=function(Ze){return new(Ze||ge)(m.LFG(m.Lbi))},ge.\u0275mod=m.oAB({type:ge}),ge.\u0275inj=m.cJS({providers:[X]}),ge})();function ke(ge,Qe,Ze,Le,Me){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===ge)||[];if(Ce)return function De(ge,Qe){try{return ge.toString()===Qe.toString()}catch{return ge===Qe}}(Me,Ge)||(Ee("error",`${Qe} was already initialized on the ${Ze} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Me,was:Ge})),Ce;{const ie=Le();return globalThis.\u0275AngularfireInstanceCache.push([ge,ie,Me]),ie}}const tt=!!pt.hot,Ee=(ge,...Qe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Pe,F)=>{F.d(Pe,{q4:()=>st,iC:()=>ds,fc:()=>er,HU:()=>Rs,vb:()=>oa,JM:()=>eu});var m=F(4650),$=F(5867),k=F(5861),se=F(9681),ue=F(2090),me=F(4859),pe=F(1877),he=F(8766);const ve="@firebase/installations",K="0.5.16",X=`w:${K}`,He="FIS_v2",Qe=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(b){return b instanceof ue.ZR&&b.code.includes("request-failed")}function Le({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Me(b){return{token:b.token,requestStatus:2,expiresIn:ee(b.expiresIn),creationTime:Date.now()}}function Ce(b,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,k.Z)(function*(b,D){const j=(yield D.json()).error;return Qe.create("request-failed",{requestName:b,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ie({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function le(b,{refreshToken:D}){const x=ie(b);return x.append("Authorization",function fe(b){return`${He} ${b}`}(D)),x}function we(b){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function ee(b){return Number(b.replace("s","000"))}function ae(b,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const j=Le(b),J=ie(b),oe=D.getImmediate({optional:!0});if(oe){const At=yield oe.getHeartbeatsHeader();At&&J.append("x-firebase-client",At)}const Ve={method:"POST",headers:J,body:JSON.stringify({fid:x,authVersion:He,appId:b.appId,sdkVersion:X})},lt=yield we(()=>fetch(j,Ve));if(lt.ok){const At=yield lt.json();return{fid:At.fid||x,registrationStatus:2,refreshToken:At.refreshToken,authToken:Me(At.authToken)}}throw yield Ce("Create Installation",lt)})).apply(this,arguments)}function je(b){return new Promise(D=>{setTimeout(D,b)})}const on=/^[cdef][\w-]{21}$/;function ze(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function fn(b){return function mt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return on.test(x)?x:""}catch{return""}}function bn(b){return`${b.appName}!${b.appId}`}const rn=new Map;function sn(b,D){const x=bn(b);wr(x,D),function Ni(b,D){const x=function Nn(){return!kr&&"BroadcastChannel"in self&&(kr=new BroadcastChannel("[Firebase] FID Change"),kr.onmessage=b=>{wr(b.data.key,b.data.fid)}),kr}();x&&x.postMessage({key:b,fid:D}),function ki(){0===rn.size&&kr&&(kr.close(),kr=null)}()}(x,D)}function wr(b,D){const x=rn.get(b);if(x)for(const j of x)j(D)}let kr=null;const Vn="firebase-installations-store";let vi=null;function Li(){return vi||(vi=(0,he.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Vn)}})),vi}function Ye(b,D){return rr.apply(this,arguments)}function rr(){return(rr=(0,k.Z)(function*(b,D){const x=bn(b),J=(yield Li()).transaction(Vn,"readwrite"),oe=J.objectStore(Vn),Re=yield oe.get(x);return yield oe.put(D,x),yield J.done,(!Re||Re.fid!==D.fid)&&sn(b,D.fid),D})).apply(this,arguments)}function Yn(b){return En.apply(this,arguments)}function En(){return(En=(0,k.Z)(function*(b){const D=bn(b),j=(yield Li()).transaction(Vn,"readwrite");yield j.objectStore(Vn).delete(D),yield j.done})).apply(this,arguments)}function gr(b,D){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,k.Z)(function*(b,D){const x=bn(b),J=(yield Li()).transaction(Vn,"readwrite"),oe=J.objectStore(Vn),Re=yield oe.get(x),Ve=D(Re);return void 0===Ve?yield oe.delete(x):yield oe.put(Ve,x),yield J.done,Ve&&(!Re||Re.fid!==Ve.fid)&&sn(b,Ve.fid),Ve})).apply(this,arguments)}function Cn(b){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(b){let D;const x=yield gr(b.appConfig,j=>{const J=wn(j),oe=_t(b,J);return D=oe.registrationPromise,oe.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function wn(b){return Dt(b||{fid:ze(),registrationStatus:0})}function _t(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},j=function yt(b,D){return xt.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:j}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Lr(b)}:{installationEntry:D}}function xt(){return(xt=(0,k.Z)(function*(b,D){try{const x=yield ae(b,D);return Ye(b.appConfig,x)}catch(x){throw Ze(x)&&409===x.customData.serverCode?yield Yn(b.appConfig):yield Ye(b.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Lr(b){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,k.Z)(function*(b){let D=yield Rr(b.appConfig);for(;1===D.registrationStatus;)yield je(100),D=yield Rr(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:j}=yield Cn(b);return j||x}return D})).apply(this,arguments)}function Rr(b){return gr(b,D=>{if(!D)throw Qe.create("installation-not-found");return Dt(D)})}function Dt(b){return function xr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function kt(b,D){return $r.apply(this,arguments)}function $r(){return($r=(0,k.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const j=Qt(b,x),J=le(b,x),oe=D.getImmediate({optional:!0});if(oe){const At=yield oe.getHeartbeatsHeader();At&&J.append("x-firebase-client",At)}const Ve={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},lt=yield we(()=>fetch(j,Ve));if(lt.ok)return Me(yield lt.json());throw yield Ce("Generate Auth Token",lt)})).apply(this,arguments)}function Qt(b,{fid:D}){return`${Le(b)}/${D}/authTokens:generate`}function dr(b){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,k.Z)(function*(b,D=!1){let x;const j=yield gr(b.appConfig,oe=>{if(!tn(oe))throw Qe.create("not-registered");const Re=oe.authToken;if(!D&&q(Re))return oe;if(1===Re.requestStatus)return x=Je(b,D),oe;{if(!navigator.onLine)throw Qe.create("app-offline");const Ve=Y(oe);return x=Ct(b,Ve),Ve}});return x?yield x:j.authToken})).apply(this,arguments)}function Je(b,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,k.Z)(function*(b,D){let x=yield et(b.appConfig);for(;1===x.authToken.requestStatus;)yield je(100),x=yield et(b.appConfig);const j=x.authToken;return 0===j.requestStatus?dr(b,D):j})).apply(this,arguments)}function et(b){return gr(b,D=>{if(!tn(D))throw Qe.create("not-registered");return function H(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ct(b,D){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(b,D){try{const x=yield kt(b,D),j=Object.assign(Object.assign({},D),{authToken:x});return yield Ye(b.appConfig,j),x}catch(x){if(!Ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ye(b.appConfig,j)}else yield Yn(b.appConfig);throw x}})).apply(this,arguments)}function tn(b){return void 0!==b&&2===b.registrationStatus}function q(b){return 2===b.requestStatus&&!function W(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Y(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function B(){return(B=(0,k.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:j}=yield Cn(D);return j?j.catch(console.error):dr(D).catch(console.error),x.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,k.Z)(function*(b,D=!1){const x=b;return yield rt(x),(yield dr(x,D)).token})).apply(this,arguments)}function rt(b){return it.apply(this,arguments)}function it(){return(it=(0,k.Z)(function*(b){const{registrationPromise:D}=yield Cn(b);D&&(yield D)})).apply(this,arguments)}function zs(b){return Qe.create("missing-app-config-values",{valueName:b})}const Ro="installations",qs=b=>{const D=b.getProvider("app").getImmediate(),x=function Dn(b){if(!b||!b.options)throw zs("App Configuration");if(!b.name)throw zs("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw zs(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Ks=b=>{const D=b.getProvider("app").getImmediate(),x=(0,se._getProvider)(D,Ro).getImmediate();return{getId:()=>function M(b){return B.apply(this,arguments)}(x),getToken:J=>function ne(b){return Oe.apply(this,arguments)}(x,J)}};(function pu(){(0,se._registerComponent)(new me.wA(Ro,qs,"PUBLIC")),(0,se._registerComponent)(new me.wA("installations-internal",Ks,"PRIVATE"))})(),(0,se.registerVersion)(ve,K),(0,se.registerVersion)(ve,K,"esm2017");const es="@firebase/remote-config",Jn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Na{constructor(D,x,j,J){this.client=D,this.storage=x,this.storageCache=j,this.logger=J}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-x,J=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var x=this;return(0,k.Z)(function*(){const[j,J]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(J&&x.isCachedDataFresh(D.cacheMaxAgeMillis,j))return J;D.eTag=J&&J.eTag;const oe=yield x.client.fetch(D),Re=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Re.push(x.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Re),oe})()}}function Xs(b=navigator){return b.languages&&b.languages[0]||b.language}class Js{constructor(D,x,j,J,oe,Re){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=j,this.projectId=J,this.apiKey=oe,this.appId=Re}fetch(D){var x=this;return(0,k.Z)(function*(){var j,J,oe;const[Re,Ve]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),At=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},wt={sdk_version:x.sdkVersion,app_instance_id:Re,app_instance_id_token:Ve,app_id:x.appId,language_code:Xs()},zn={method:"POST",headers:Mt,body:JSON.stringify(wt)},_r=fetch(At,zn),ua=new Promise((la,ho)=>{D.signal.addEventListener(()=>{const Yr=new Error("The operation was aborted.");Yr.name="AbortError",ho(Yr)})});let Ps;try{yield Promise.race([_r,ua]),Ps=yield _r}catch(la){let ho="fetch-client-network";throw"AbortError"===(null===(j=la)||void 0===j?void 0:j.name)&&(ho="fetch-timeout"),Jn.create(ho,{originalErrorMessage:null===(J=la)||void 0===J?void 0:J.message})}let Lt=Ps.status;const Ci=Ps.headers.get("ETag")||void 0;let hs,Hi;if(200===Ps.status){let la;try{la=yield Ps.json()}catch(ho){throw Jn.create("fetch-client-parse",{originalErrorMessage:null===(oe=ho)||void 0===oe?void 0:oe.message})}hs=la.entries,Hi=la.state}if("INSTANCE_STATE_UNSPECIFIED"===Hi?Lt=500:"NO_CHANGE"===Hi?Lt=304:("NO_TEMPLATE"===Hi||"EMPTY_CONFIG"===Hi)&&(hs={}),304!==Lt&&200!==Lt)throw Jn.create("fetch-status",{httpStatus:Lt});return{status:Lt,eTag:Ci,config:hs}})()}}class ns{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,k.Z)(function*(){const j=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:j}){var J=this;return(0,k.Z)(function*(){yield function ii(b,D){return new Promise((x,j)=>{const J=Math.max(D-Date.now(),0),oe=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(oe),j(Jn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const oe=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Up(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(oe))throw oe;const Re={throttleEndTimeMillis:Date.now()+(0,ue.$s)(j),backoffCount:j+1};return yield J.storage.setThrottleMetadata(Re),J.attemptFetch(D,Re)}})()}}class Bp{constructor(D,x,j,J,oe){this.app=D,this._client=x,this._storageCache=j,this._storage=J,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ka(b,D){var x;const j=b.target.error||void 0;return Jn.create(D,{originalErrorMessage:j&&(null===(x=j)||void 0===x?void 0:x.message)})}const Po="app_namespace_store";class vc{constructor(D,x,j,J=function Hp(){return new Promise((b,D)=>{var x;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=J=>{D(ka(J,"storage-open"))},j.onsuccess=J=>{b(J.target.result)},j.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Po,{keyPath:"compositeKey"})}}catch(j){D(Jn.create("storage-open",{originalErrorMessage:null===(x=j)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=j,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,k.Z)(function*(){const j=yield x.openDbPromise;return new Promise((J,oe)=>{var Re;const lt=j.transaction([Po],"readonly").objectStore(Po),At=x.createCompositeKey(D);try{const Mt=lt.get(At);Mt.onerror=wt=>{oe(ka(wt,"storage-get"))},Mt.onsuccess=wt=>{const zn=wt.target.result;J(zn?zn.value:void 0)}}catch(Mt){oe(Jn.create("storage-get",{originalErrorMessage:null===(Re=Mt)||void 0===Re?void 0:Re.message}))}})})()}set(D,x){var j=this;return(0,k.Z)(function*(){const J=yield j.openDbPromise;return new Promise((oe,Re)=>{var Ve;const At=J.transaction([Po],"readwrite").objectStore(Po),Mt=j.createCompositeKey(D);try{const wt=At.put({compositeKey:Mt,value:x});wt.onerror=zn=>{Re(ka(zn,"storage-set"))},wt.onsuccess=()=>{oe()}}catch(wt){Re(Jn.create("storage-set",{originalErrorMessage:null===(Ve=wt)||void 0===Ve?void 0:Ve.message}))}})})()}delete(D){var x=this;return(0,k.Z)(function*(){const j=yield x.openDbPromise;return new Promise((J,oe)=>{var Re;const lt=j.transaction([Po],"readwrite").objectStore(Po),At=x.createCompositeKey(D);try{const Mt=lt.delete(At);Mt.onerror=wt=>{oe(ka(wt,"storage-delete"))},Mt.onsuccess=()=>{J()}}catch(Mt){oe(Jn.create("storage-delete",{originalErrorMessage:null===(Re=Mt)||void 0===Re?void 0:Re.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Mo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const x=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),oe=yield x;oe&&(D.lastFetchStatus=oe);const Re=yield j;Re&&(D.lastSuccessfulFetchTimestampMillis=Re);const Ve=yield J;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function L_(){return gu.apply(this,arguments)}function gu(){return(gu=(0,k.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function wc(){(0,se._registerComponent)(new me.wA("remote-config",function b(D,{instanceIdentifier:x}){const j=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Jn.create("registration-window");if(!(0,ue.hl)())throw Jn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Re,appId:Ve}=j.options;if(!oe)throw Jn.create("registration-project-id");if(!Re)throw Jn.create("registration-api-key");if(!Ve)throw Jn.create("registration-app-id");const lt=new vc(Ve,j.name,x=x||"firebase"),At=new Mo(lt),Mt=new pe.Yd(es);Mt.logLevel=pe.in.ERROR;const wt=new Js(J,se.SDK_VERSION,x,oe,Re,Ve),zn=new ns(wt,lt),_r=new Na(zn,lt,At,Mt),ua=new Bp(j,_r,At,lt,Mt);return function Bn(b){const D=(0,ue.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ua),ua},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(es,"0.3.15"),(0,se.registerVersion)(es,"0.3.15","esm2017")}();const Ir="/firebase-messaging-sw.js",ko="/firebase-cloud-messaging-push-scope",bs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mu="google.c.a.c_id",ul="google.c.a.c_l",Cc="google.c.a.ts",Oo="google.c.a.e";var si=(()=>{return(b=si||(si={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",si;var b})();function rs(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zr(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(x),J=new Uint8Array(j.length);for(let oe=0;oe<j.length;++oe)J[oe]=j.charCodeAt(oe);return J}const eo="fcm_token_details_db",Lo="fcm_token_object_Store";function $p(b){return cl.apply(this,arguments)}function cl(){return cl=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(eo))return null;let D=null;return(yield(0,he.X3)(eo,5,{upgrade:(j=(0,k.Z)(function*(J,oe,Re,Ve){var lt;if(oe<2||!J.objectStoreNames.contains(Lo))return;const At=Ve.objectStore(Lo),Mt=yield At.index("fcmSenderId").get(b);if(yield At.clear(),Mt)if(2===oe){const wt=Mt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;D={token:wt.fcmToken,createTime:null!==(lt=wt.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:rs(wt.vapidKey)}}}else if(3===oe){const wt=Mt;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:rs(wt.auth),p256dh:rs(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:rs(wt.vapidKey)}}}else if(4===oe){const wt=Mt;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:rs(wt.auth),p256dh:rs(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:rs(wt.vapidKey)}}}}),function(oe,Re,Ve,lt){return j.apply(this,arguments)})})).close(),yield(0,he.Lj)(eo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),kn(D)?D:null;var j}),cl.apply(this,arguments)}function kn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ii="firebase-messaging-store";let Er=null;function _u(){return Er||(Er=(0,he.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Ii)}})),Er}function Fo(b){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,k.Z)(function*(b){const D=oi(b),j=yield(yield _u()).transaction(Ii).objectStore(Ii).get(D);if(j)return j;{const J=yield $p(b.appConfig.senderId);if(J)return yield an(b,J),J}})).apply(this,arguments)}function an(b,D){return dl.apply(this,arguments)}function dl(){return(dl=(0,k.Z)(function*(b,D){const x=oi(b),J=(yield _u()).transaction(Ii,"readwrite");return yield J.objectStore(Ii).put(D,x),yield J.done,D})).apply(this,arguments)}function Ts(b){return hl.apply(this,arguments)}function hl(){return(hl=(0,k.Z)(function*(b){const D=oi(b),j=(yield _u()).transaction(Ii,"readwrite");yield j.objectStore(Ii).delete(D),yield j.done})).apply(this,arguments)}function oi({appConfig:b}){return b.appId}const jn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nt(b,D){return La.apply(this,arguments)}function La(){return(La=(0,k.Z)(function*(b,D){var x;const j=yield Va(b),J=Ne(D),oe={method:"POST",headers:j,body:JSON.stringify(J)};let Re;try{Re=yield(yield fetch(to(b.appConfig),oe)).json()}catch(Ve){throw jn.create("token-subscribe-failed",{errorInfo:null===(x=Ve)||void 0===x?void 0:x.toString()})}if(Re.error)throw jn.create("token-subscribe-failed",{errorInfo:Re.error.message});if(!Re.token)throw jn.create("token-subscribe-no-token");return Re.token})).apply(this,arguments)}function Wp(b,D){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,k.Z)(function*(b,D){var x;const j=yield Va(b),J=Ne(D.subscriptionOptions),oe={method:"PATCH",headers:j,body:JSON.stringify(J)};let Re;try{Re=yield(yield fetch(`${to(b.appConfig)}/${D.token}`,oe)).json()}catch(Ve){throw jn.create("token-update-failed",{errorInfo:null===(x=Ve)||void 0===x?void 0:x.toString()})}if(Re.error)throw jn.create("token-update-failed",{errorInfo:Re.error.message});if(!Re.token)throw jn.create("token-update-no-token");return Re.token})).apply(this,arguments)}function Tc(b,D){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,k.Z)(function*(b,D){var x;const J={method:"DELETE",headers:yield Va(b)};try{const Re=yield(yield fetch(`${to(b.appConfig)}/${D}`,J)).json();if(Re.error)throw jn.create("token-unsubscribe-failed",{errorInfo:Re.error.message})}catch(oe){throw jn.create("token-unsubscribe-failed",{errorInfo:null===(x=oe)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function to({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Va(b){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,k.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ne({p256dh:b,auth:D,endpoint:x,vapidKey:j}){const J={web:{endpoint:x,auth:D,p256dh:b}};return j!==bs&&(J.web.applicationPubKey=j),J}const Zt=6048e5;function Eh(b){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,k.Z)(function*(b){const D=yield Ch(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:rs(D.getKey("auth")),p256dh:rs(D.getKey("p256dh"))},j=yield Fo(b.firebaseDependencies);if(j){if(Gp(j.subscriptionOptions,x))return Date.now()>=j.createTime+Zt?yu(b,{token:j.token,createTime:Date.now(),subscriptionOptions:x}):j.token;try{yield Tc(b.firebaseDependencies,j.token)}catch(J){console.warn(J)}return vu(b.firebaseDependencies,x)}return vu(b.firebaseDependencies,x)})).apply(this,arguments)}function sr(b){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,k.Z)(function*(b){const D=yield Fo(b.firebaseDependencies);D&&(yield Tc(b.firebaseDependencies,D.token),yield Ts(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function yu(b,D){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,k.Z)(function*(b,D){try{const x=yield Wp(b.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield an(b.firebaseDependencies,j),x}catch(x){throw yield sr(b),x}})).apply(this,arguments)}function vu(b,D){return jo.apply(this,arguments)}function jo(){return(jo=(0,k.Z)(function*(b,D){const j={token:yield Nt(b,D),createTime:Date.now(),subscriptionOptions:D};return yield an(b,j),j.token})).apply(this,arguments)}function Ch(b,D){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,k.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zr(D)})})).apply(this,arguments)}function Gp(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function no(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function or(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const j=D.notification.body;j&&(b.notification.body=j);const J=D.notification.image;J&&(b.notification.image=J);const oe=D.notification.icon;oe&&(b.notification.icon=oe)}(D,b),function Ui(b,D){!D.data||(b.data=D.data)}(D,b),function ja(b,D){var x,j,J,oe,Re;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Ve=null!==(J=null===(j=D.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==J?J:null===(oe=D.notification)||void 0===oe?void 0:oe.click_action;Ve&&(b.fcmOptions.link=Ve);const lt=null===(Re=D.fcmOptions)||void 0===Re?void 0:Re.analytics_label;lt&&(b.fcmOptions.analyticsLabel=lt)}(D,b),D}function Ha(b){return"object"==typeof b&&!!b&&mu in b}function is(b,D){const x=[];for(let j=0;j<b.length;j++)x.push(b.charAt(j)),j<D.length&&x.push(D.charAt(j));return x.join("")}function fl(b){return jn.create("missing-app-config-values",{valueName:b})}is("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),is("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Sc{constructor(D,x,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Dc(b){if(!b||!b.options)throw fl("App Configuration Object");if(!b.name)throw fl("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const j of D)if(!x[j])throw fl(j);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:x,analyticsProvider:j}}_delete(){return Promise.resolve()}}function bh(b){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,k.Z)(function*(b){var D;try{b.swRegistration=yield navigator.serviceWorker.register(Ir,{scope:ko}),b.swRegistration.update().catch(()=>{})}catch(x){throw jn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function pl(b,D){return $a.apply(this,arguments)}function $a(){return($a=(0,k.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield bh(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function gl(b,D){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,k.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=bs)})).apply(this,arguments)}function $o(){return($o=(0,k.Z)(function*(b,D){if(!navigator)throw jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jn.create("permission-blocked");return yield gl(b,D?.vapidKey),yield pl(b,D?.serviceWorkerRegistration),Eh(b)})).apply(this,arguments)}function Th(b,D,x){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,k.Z)(function*(b,D,x){const j=Dh(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:x[mu],message_name:x[ul],message_time:x[Cc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Dh(b){switch(b){case si.NOTIFICATION_CLICKED:return"notification_open";case si.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ds(){return(Ds=(0,k.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===si.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(no(x)):b.onMessageHandler.next(no(x)));const j=x.data;Ha(j)&&"1"===j[Oo]&&(yield Th(b,x.messageType,j))})).apply(this,arguments)}const Ss="@firebase/messaging",Pn=b=>{const D=new Sc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Rc(b,D){return Ds.apply(this,arguments)}(D,x)),D},ss=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:j=>function Ac(b,D){return $o.apply(this,arguments)}(D,j)}};function Pc(){return ml.apply(this,arguments)}function ml(){return(ml=(0,k.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Mn(){(0,se._registerComponent)(new me.wA("messaging",Pn,"PUBLIC")),(0,se._registerComponent)(new me.wA("messaging-internal",ss,"PRIVATE")),(0,se.registerVersion)(Ss,"0.11.0"),(0,se.registerVersion)(Ss,"0.11.0","esm2017")}();const zo="analytics",Nc="firebase_id",wl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kc="https://www.googletagmanager.com/gtag/js",Hn=new pe.Yd("@firebase/analytics");function Iu(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Eu(b,D){const x=document.createElement("script");x.src=`${kc}?l=${b}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Ah(b,D,x,j,J,oe){return bu.apply(this,arguments)}function bu(){return(bu=(0,k.Z)(function*(b,D,x,j,J,oe){const Re=j[J];try{if(Re)yield D[Re];else{const lt=(yield Iu(x)).find(At=>At.measurementId===J);lt&&(yield D[lt.appId])}}catch(Ve){Hn.error(Ve)}b("config",J,oe)})).apply(this,arguments)}function os(b,D,x,j,J){return za.apply(this,arguments)}function za(){return(za=(0,k.Z)(function*(b,D,x,j,J){try{let oe=[];if(J&&J.send_to){let Re=J.send_to;Array.isArray(Re)||(Re=[Re]);const Ve=yield Iu(x);for(const lt of Re){const At=Ve.find(wt=>wt.measurementId===lt),Mt=At&&D[At.appId];if(!Mt){oe=[];break}oe.push(Mt)}}0===oe.length&&(oe=Object.values(D)),yield Promise.all(oe),b("event",j,J||{})}catch(oe){Hn.error(oe)}})).apply(this,arguments)}function Oc(b){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(kc)&&x.src.includes(b))return x;return null}const ar=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ka=new class El{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function qo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ph(b){return $n.apply(this,arguments)}function $n(){return($n=(0,k.Z)(function*(b){var D;const{appId:x,apiKey:j}=b,J={method:"GET",headers:qo(j)},oe=wl.replace("{app-id}",x),Re=yield fetch(oe,J);if(200!==Re.status&&304!==Re.status){let Ve="";try{const lt=yield Re.json();null!==(D=lt.error)&&void 0!==D&&D.message&&(Ve=lt.error.message)}catch{}throw ar.create("config-fetch-failed",{httpStatus:Re.status,responseMessage:Ve})}return Re.json()})).apply(this,arguments)}function Lc(b){return qr.apply(this,arguments)}function qr(){return(qr=(0,k.Z)(function*(b,D=Ka,x){const{appId:j,apiKey:J,measurementId:oe}=b.options;if(!j)throw ar.create("no-app-id");if(!J){if(oe)return{measurementId:oe,appId:j};throw ar.create("no-api-key")}const Re=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Za;return setTimeout((0,k.Z)(function*(){Ve.abort()}),void 0!==x?x:6e4),Fc({appId:j,apiKey:J,measurementId:oe},Re,Ve,D)})).apply(this,arguments)}function Fc(b,D,x){return as.apply(this,arguments)}function as(){return(as=(0,k.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},j,J=Ka){var oe,Re;const{appId:Ve,measurementId:lt}=b;try{yield Cl(j,D)}catch(At){if(lt)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${null===(oe=At)||void 0===oe?void 0:oe.message}]`),{appId:Ve,measurementId:lt};throw At}try{const At=yield Ph(b);return J.deleteThrottleMetadata(Ve),At}catch(At){const Mt=At;if(!Tu(Mt)){if(J.deleteThrottleMetadata(Ve),lt)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${Mt?.message}]`),{appId:Ve,measurementId:lt};throw At}const wt=503===Number(null===(Re=Mt?.customData)||void 0===Re?void 0:Re.httpStatus)?(0,ue.$s)(x,J.intervalMillis,30):(0,ue.$s)(x,J.intervalMillis),zn={throttleEndTimeMillis:Date.now()+wt,backoffCount:x+1};return J.setThrottleMetadata(Ve,zn),Hn.debug(`Calling attemptFetch again in ${wt} millis`),Fc(b,zn,j,J)}})).apply(this,arguments)}function Cl(b,D){return new Promise((x,j)=>{const J=Math.max(D-Date.now(),0),oe=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(oe),j(ar.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Tu(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Za{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let ro,Su;function Ko(){return(Ko=(0,k.Z)(function*(b,D,x,j,J){if(J&&J.global)b("event",x,j);else{const oe=yield D;b("event",x,Object.assign(Object.assign({},j),{send_to:oe}))}})).apply(this,arguments)}function Xo(b){Su=b}function bl(b){ro=b}function io(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,k.Z)(function*(){var b;if(!(0,ue.hl)())return Hn.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(D){return Hn.warn(ar.create("indexeddb-unavailable",{errorInfo:null===(b=D)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function ea(){return(ea=(0,k.Z)(function*(b,D,x,j,J,oe,Re){var Ve;const lt=Lc(b);lt.then(_r=>{x[_r.measurementId]=_r.appId,b.options.measurementId&&_r.measurementId!==b.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${_r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_r=>Hn.error(_r)),D.push(lt);const At=io().then(_r=>{if(_r)return j.getId()}),[Mt,wt]=yield Promise.all([lt,At]);Oc(oe)||Eu(oe,Mt.measurementId),Su&&(J("consent","default",Su),Xo(void 0)),J("js",new Date);const zn=null!==(Ve=Re?.config)&&void 0!==Ve?Ve:{};return zn.origin="firebase",zn.update=!0,null!=wt&&(zn[Nc]=wt),J("config",Mt.measurementId,zn),ro&&(J("set",ro),bl(void 0)),Mt.measurementId})).apply(this,arguments)}class Au{constructor(D){this.app=D}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},ta=[];const so={};let ra,Bi,na="dataLayer",Vc=!1;function kh(b,D,x){!function zp(){const b=[];if((0,ue.ru)()&&b.push("This is a browser extension environment."),(0,ue.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((j,J)=>`(${J+1}) ${j}`).join(" "),x=ar.create("invalid-analytics-context",{errorInfo:D});Hn.warn(x.message)}}();const j=b.options.appId;if(!j)throw ar.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw ar.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[j])throw ar.create("already-exists",{id:j});if(!Vc){!function Cu(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(na);const{wrappedGtag:oe,gtagCore:Re}=function qa(b,D,x,j,J){let oe=function(...Re){window[j].push(arguments)};return window[J]&&"function"==typeof window[J]&&(oe=window[J]),window[J]=function Il(b,D,x,j){function oe(){return(oe=(0,k.Z)(function*(Re,Ve,lt){try{"event"===Re?yield os(b,D,x,Ve,lt):"config"===Re?yield Ah(b,D,x,j,Ve,lt):"consent"===Re?b("consent","update",lt):b("set",Ve)}catch(At){Hn.error(At)}})).apply(this,arguments)}return function J(Re,Ve,lt){return oe.apply(this,arguments)}}(oe,b,D,x),{gtagCore:oe,wrappedGtag:window[J]}}(Pr,ta,so,na,"gtag");Bi=oe,ra=Re,Vc=!0}return Pr[j]=function Nh(b,D,x,j,J,oe,Re){return ea.apply(this,arguments)}(b,ta,so,D,ra,na,x),new Au(b)}function U_(){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,k.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const at="@firebase/analytics";!function An(){(0,se._registerComponent)(new me.wA(zo,(D,{options:x})=>kh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new me.wA("analytics-internal",function b(D){try{const x=D.getProvider(zo).getImmediate();return{logEvent:(j,J,oe)=>function un(b,D,x,j){b=(0,ue.m9)(b),function Ya(b,D,x,j,J){return Ko.apply(this,arguments)}(Bi,Pr[b.app.options.appId],D,x,j).catch(J=>Hn.error(J))}(x,j,J,oe)}}catch(x){throw ar.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(at,"0.8.4"),(0,se.registerVersion)(at,"0.8.4","esm2017")}();var ls=F(4408),Cr=F(7565);const Bc=new class ao extends Cr.v{}(class oo extends ls.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(D,x,j):(D.flush(this),0)}});var Lh=F(4986),ia=F(8505),Dl=F(5363),uo=F(9468);const st=new m.GfV("7.4.1"),Xa="__angularfire_symbol__analyticsIsSupportedValue",ji="__angularfire_symbol__analyticsIsSupported",Sl="__angularfire_symbol__remoteConfigIsSupportedValue",xu="__angularfire_symbol__remoteConfigIsSupported",Wn="__angularfire_symbol__messagingIsSupportedValue",Ja="__angularfire_symbol__messagingIsSupported";function eu(b,D,x){if(D){if(1===D.length)return D[0];const oe=D.filter(Re=>Re.app===x);if(1===oe.length)return oe[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[ji]||(globalThis[ji]=U_().then(b=>globalThis[Xa]=b).catch(()=>globalThis[Xa]=!1)),globalThis[Ja]||(globalThis[Ja]=Pc().then(b=>globalThis[Wn]=b).catch(()=>globalThis[Wn]=!1)),globalThis[xu]||(globalThis[xu]=L_().then(b=>globalThis[Sl]=b).catch(()=>globalThis[Sl]=!1));const oa=(b,D)=>{const x=D?[D]:(0,$.C6)(),j=[];return x.forEach(J=>{J.container.getProvider(b).instances.forEach(Re=>{j.includes(Re)||j.push(Re)})}),j};function ui(){}class lo{constructor(D,x=Bc){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,j){const J=this.zone;return this.delegate.schedule(function(Re){J.runGuarded(()=>{D.apply(this,[Re])})},x,j)}}class Al{constructor(D){this.zone=D,this.task=null}call(D,x){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ui,{},ui,ui)),x.pipe((0,ia.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rs=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new lo(Zone.current)),this.insideAngular=x.run(()=>new lo(Zone.current,Lh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Zr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function er(b){return b.pipe((0,Dl.Q)(Zr().outsideAngular))}function ds(b){return Zr(),function Gn(b){return function(x){return(x=x.lift(new Al(b.ngZone))).pipe((0,uo.R)(b.outsideAngular),(0,Dl.Q)(b.insideAngular))}}(Zr())(b)}},8247:(pt,Pe,F)=>{F.d(Pe,{$:()=>to,A:()=>z,B:()=>ke,G:()=>Ks,H:()=>Wr,J:()=>ns,L:()=>q,M:()=>gu,N:()=>Ec,P:()=>Lh,Q:()=>mu,R:()=>V_,T:()=>ul,U:()=>bs,V:()=>si,W:()=>rs,X:()=>$p,Y:()=>Oa,Z:()=>Nt,_:()=>Wp,a:()=>As,a0:()=>Eh,a1:()=>sr,a2:()=>yu,a3:()=>vu,a4:()=>Ch,a5:()=>Gp,a6:()=>or,a7:()=>Ui,a8:()=>Ha,a9:()=>is,aA:()=>W,aB:()=>lt,aC:()=>er,aD:()=>xs,aE:()=>It,aI:()=>qo,aL:()=>Oo,aa:()=>bh,ab:()=>pl,ac:()=>gl,af:()=>Th,ag:()=>Dh,ah:()=>Rc,ak:()=>Ii,al:()=>_l,an:()=>kc,ao:()=>bu,ap:()=>we,aq:()=>Ue,ar:()=>rt,as:()=>Ze,at:()=>Mu,au:()=>Ci,av:()=>Pt,aw:()=>Le,ax:()=>ie,ay:()=>_r,az:()=>ee,b:()=>ar,c:()=>Wn,d:()=>Fh,e:()=>Pu,f:()=>Gn,g:()=>j,h:()=>b,i:()=>Jo,j:()=>Re,k:()=>$h,l:()=>Kr,m:()=>Ms,o:()=>he,r:()=>ls,s:()=>us,u:()=>Bc});var m=F(5861),$=F(2090),k=F(9681),se=F(1877),ue=F(655),me=F(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},De=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ge=new se.Yd("@firebase/auth");function Qe(w,...p){ge.logLevel<=se.in.ERROR&&ge.error(`Auth (${k.SDK_VERSION}): ${w}`,...p)}function Ze(w,...p){throw Ge(w,...p)}function Le(w,...p){return Ge(w,...p)}function Me(w,p,_){const E=Object.assign(Object.assign({},De()),{[p]:_});return new $.LL("auth","Firebase",E).create(p,{appName:w.name})}function Ce(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Ze(w,"argument-error"),Me(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(w,...p){if("string"!=typeof w){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return tt.create(w,...p)}function ie(w,p,..._){if(!w)throw Ge(p,..._)}function le(w){const p="INTERNAL ASSERTION FAILED: "+w;throw Qe(p),new Error(p)}function we(w,p){w||le(p)}const Q=new Map;function ee(w){we(w instanceof Function,"Expected a class definition");let p=Q.get(w);return p?(we(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Q.set(w,p),p)}function Be(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===mt()||"https:"===mt()}function mt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class ze{constructor(p,_){this.shortDelay=p,this.longDelay=_,we(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function on(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(w,p){we(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class bn{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},sn=new ze(3e4,6e4);function qt(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Bt(w,p,_,E){return wr.apply(this,arguments)}function wr(){return(wr=(0,m.Z)(function*(w,p,_,E,R={}){return Ni(w,R,(0,m.Z)(function*(){let O={},te={};E&&("GET"===p?te=E:O={body:JSON.stringify(E)});const xe=(0,$.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),bn.fetch()(Oi(w,w.config.apiHost,_,xe),Object.assign({method:p,headers:nt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ni(w,p,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,m.Z)(function*(w,p,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},rn),p);try{const R=new Or(w),O=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const te=yield O.json();if("needConfirmation"in te)throw Vn(w,"account-exists-with-different-credential",te);if(O.ok&&!("errorMessage"in te))return te;{const xe=O.ok?te.errorMessage:te.error.message,[nt,bt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Vn(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===nt)throw Vn(w,"email-already-in-use",te);if("USER_DISABLED"===nt)throw Vn(w,"user-disabled",te);const Yt=E[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(bt)throw Me(w,Yt,bt);Ze(w,Yt)}}catch(R){if(R instanceof $.ZR)throw R;Ze(w,"network-request-failed")}})).apply(this,arguments)}function Nn(w,p,_,E){return ki.apply(this,arguments)}function ki(){return(ki=(0,m.Z)(function*(w,p,_,E,R={}){const O=yield Bt(w,p,_,E,R);return"mfaPendingCredential"in O&&Ze(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Oi(w,p,_,E){const R=`${p}${_}?${E}`;return w.config.emulator?fn(w.config,R):`${w.config.apiScheme}://${R}`}class Or{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Le(this.auth,"network-request-failed")),sn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(w,p,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const R=Le(w,p,E);return R.customData._tokenResponse=_,R}function Li(){return(Li=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ye(w,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Yn(w,p){return En.apply(this,arguments)}function En(){return(En=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function gr(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Tn(){return(Tn=(0,m.Z)(function*(w,p=!1){const _=(0,$.m9)(w),E=yield _.getIdToken(p),R=_t(E);ie(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const O="object"==typeof R.firebase?R.firebase:void 0,te=O?.sign_in_provider;return{claims:R,token:E,authTime:gr(wn(R.auth_time)),issuedAtTime:gr(wn(R.iat)),expirationTime:gr(wn(R.exp)),signInProvider:te||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function wn(w){return 1e3*Number(w)}function _t(w){var p;const[_,E,R]=w.split(".");if(void 0===_||void 0===E||void 0===R)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,$.tV)(E);return O?JSON.parse(O):(Qe("Failed to decode base64 JWT payload"),null)}catch(O){return Qe("Caught error parsing JWT payload as JSON",null===(p=O)||void 0===p?void 0:p.toString()),null}}function xt(w,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,m.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof $.ZR&&Qn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Qn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Rr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,m.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class Dt{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xr(w){return kt.apply(this,arguments)}function kt(){return(kt=(0,m.Z)(function*(w){var p;const _=w.auth,E=yield w.getIdToken(),R=yield xt(w,Yn(_,{idToken:E}));ie(R?.users.length,_,"internal-error");const O=R.users[0];w._notifyReloadListener(O);const te=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?Rn(O.providerUserInfo):[],xe=dr(w.providerData,te),Yt=!!w.isAnonymous&&!(w.email&&O.passwordHash||xe?.length),mn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:xe,metadata:new Dt(O.createdAt,O.lastLoginAt),isAnonymous:Yt};Object.assign(w,mn)})).apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(w){const p=(0,$.m9)(w);yield xr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function dr(w,p){return[...w.filter(E=>!p.some(R=>R.providerId===E.providerId)),...p]}function Rn(w){return w.map(p=>{var{providerId:_}=p,E=(0,ue._T)(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Se(){return(Se=(0,m.Z)(function*(w,p){const _=yield Ni(w,{},(0,m.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:R,apiKey:O}=w.config,te=Oi(w,R,"/v1/token",`key=${O}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",bn.fetch()(te,{method:"POST",headers:xe,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ie(p.idToken,"internal-error"),ie(typeof p.idToken<"u","internal-error"),ie(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function yt(w){const p=_t(w);return ie(p,"internal-error"),ie(typeof p.exp<"u","internal-error"),ie(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,m.Z)(function*(){return ie(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,m.Z)(function*(){const{accessToken:R,refreshToken:O,expiresIn:te}=yield function Je(w,p){return Se.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(R,O,Number(te))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:R,expirationTime:O}=_,te=new et;return E&&(ie("string"==typeof E,"internal-error",{appName:p}),te.refreshToken=E),R&&(ie("string"==typeof R,"internal-error",{appName:p}),te.accessToken=R),O&&(ie("number"==typeof O,"internal-error",{appName:p}),te.expirationTime=O),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return le("not implemented")}}function Ct(w,p){ie("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class Tt{constructor(p){var{uid:_,auth:E,stsTokenManager:R}=p,O=(0,ue._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Dt(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,m.Z)(function*(){const E=yield xt(_,_.stsTokenManager.getToken(_.auth,p));return ie(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function Cn(w){return Tn.apply(this,arguments)}(this,p)}reload(){return function $r(w){return Qt.apply(this,arguments)}(this)}_assign(p){this!==p&&(ie(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Tt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,m.Z)(function*(){let R=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),R=!0),_&&(yield xr(E)),yield E.auth._persistUserIfCurrent(E),R&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,m.Z)(function*(){const _=yield p.getIdToken();return yield xt(p,function vi(w,p){return Li.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,R,O,te,xe,nt,bt,Yt;const mn=null!==(E=_.displayName)&&void 0!==E?E:void 0,Ur=null!==(R=_.email)&&void 0!==R?R:void 0,$i=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,qc=null!==(te=_.photoURL)&&void 0!==te?te:void 0,Kc=null!==(xe=_.tenantId)&&void 0!==xe?xe:void 0,Zc=null!==(nt=_._redirectEventId)&&void 0!==nt?nt:void 0,nu=null!==(bt=_.createdAt)&&void 0!==bt?bt:void 0,Xp=null!==(Yt=_.lastLoginAt)&&void 0!==Yt?Yt:void 0,{uid:Kh,emailVerified:Yc,isAnonymous:Ml,providerData:Nl,stsTokenManager:ca}=_;ie(Kh&&ca,p,"internal-error");const W_=et.fromJSON(this.name,ca);ie("string"==typeof Kh,p,"internal-error"),Ct(mn,p.name),Ct(Ur,p.name),ie("boolean"==typeof Yc,p,"internal-error"),ie("boolean"==typeof Ml,p,"internal-error"),Ct($i,p.name),Ct(qc,p.name),Ct(Kc,p.name),Ct(Zc,p.name),Ct(nu,p.name),Ct(Xp,p.name);const On=new Tt({uid:Kh,auth:p,email:Ur,emailVerified:Yc,displayName:mn,isAnonymous:Ml,photoURL:qc,phoneNumber:$i,tenantId:Kc,stsTokenManager:W_,createdAt:nu,lastLoginAt:Xp});return Nl&&Array.isArray(Nl)&&(On.providerData=Nl.map(Jp=>Object.assign({},Jp))),Zc&&(On._redirectEventId=Zc),On}static _fromIdTokenResponse(p,_,E=!1){return(0,m.Z)(function*(){const R=new et;R.updateFromServerResponse(_);const O=new Tt({uid:_.localId,auth:p,stsTokenManager:R,isAnonymous:E});return yield xr(O),O})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,E){var R=this;return(0,m.Z)(function*(){R.storage[_]=E})()}_get(_){var E=this;return(0,m.Z)(function*(){const R=E.storage[_];return void 0===R?null:R})()}_remove(_){var E=this;return(0,m.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function W(w,p,_){return`firebase:${w}:${p}:${_}`}class Y{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:R,name:O}=this.auth;this.fullUserKey=W(this.userKey,R.apiKey,O),this.fullPersistenceKey=W("persistence",R.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,m.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Tt._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,m.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,m.Z)(function*(){if(!_.length)return new Y(ee(q),p,E);const R=(yield Promise.all(_.map(function(){var bt=(0,m.Z)(function*(Yt){if(yield Yt._isAvailable())return Yt});return function(Yt){return bt.apply(this,arguments)}}()))).filter(bt=>bt);let O=R[0]||ee(q);const te=W(E,p.config.apiKey,p.name);let xe=null;for(const bt of _)try{const Yt=yield bt._get(te);if(Yt){const mn=Tt._fromJSON(p,Yt);bt!==O&&(xe=mn),O=bt;break}}catch{}const nt=R.filter(bt=>bt._shouldAllowMigration);return O._shouldAllowMigration&&nt.length?(O=nt[0],xe&&(yield O._set(te,xe.toJSON())),yield Promise.all(_.map(function(){var bt=(0,m.Z)(function*(Yt){if(Yt!==O)try{yield Yt._remove(te)}catch{}});return function(Yt){return bt.apply(this,arguments)}}())),new Y(O,p,E)):new Y(O,p,E)})()}}function H(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Oe(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(M(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(it(p))return"Blackberry";if(Ae(p))return"Webos";if(B(p))return"Safari";if((p.includes("chrome/")||ne(p))&&!p.includes("edge/"))return"Chrome";if(rt(p))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function M(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ne(w=(0,$.z$)()){return/crios\//i.test(w)}function Oe(w=(0,$.z$)()){return/iemobile/i.test(w)}function rt(w=(0,$.z$)()){return/android/i.test(w)}function it(w=(0,$.z$)()){return/blackberry/i.test(w)}function Ae(w=(0,$.z$)()){return/webos/i.test(w)}function Ue(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Pt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function gn(w=(0,$.z$)()){return Ue(w)||rt(w)||Ae(w)||it(w)||/windows phone/i.test(w)||Oe(w)}function Dn(w,p=[]){let _;switch(w){case"Browser":_=H((0,$.z$)());break;case"Worker":_=`${H((0,$.z$)())}-${w}`;break;default:_=w}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${E}`}class zs{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const E=O=>new Promise((te,xe)=>{try{te(p(O))}catch(nt){xe(nt)}});E.onAbort=_,this.queue.push(E);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,m.Z)(function*(){var E;if(_.auth.currentUser===p)return;const R=[];try{for(const O of _.queue)yield O(p),O.onAbort&&R.push(O.onAbort)}catch(O){R.reverse();for(const te of R)try{te()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class Ro{constructor(p,_,E){this.app=p,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qs(this),this.idTokenSubscription=new qs(this),this.beforeStateQueue=new zs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=ee(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var R,O;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,p),!E._deleted)){if(null!==(R=E._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,m.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,m.Z)(function*(){var E;const R=yield _.assertedPersistence.getCurrentUser();let O=R,te=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const xe=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,nt=O?._redirectEventId,bt=yield _.tryRedirectSignIn(p);(!xe||xe===nt)&&bt?.user&&(O=bt.user,te=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(O)}catch(xe){O=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(xe))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,m.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,m.Z)(function*(){var E;try{yield xr(p)}catch(R){if("auth/network-request-failed"!==(null===(E=R)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ht(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,m.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,m.Z)(function*(){const E=p?(0,$.m9)(p):null;return E&&ie(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p,_=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return p&&ie(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,m.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(ee(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,m.Z)(function*(){const R=yield E.getOrInitRedirectPersistenceManager(_);return null===p?R.removeCurrentUser():R.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&ee(p)||_._popupRedirectResolver;ie(E,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ee(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,m.Z)(function*(){var E,R;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,m.Z)(function*(){if(p===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,R){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(te,this,"internal-error"),te.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,E,R):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Dn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,m.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const R=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(E["X-Firebase-Client"]=R),E})()}}function It(w){return(0,$.m9)(w)}class qs{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ks(w,p,_){const E=It(w);ie(E._canInitEmulator,E,"emulator-config-failed"),ie(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const R=!!_?.disableWarnings,O=pu(p),{host:te,port:xe}=function es(w){const p=pu(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(E);if(R){const O=R[1];return{host:O,port:Xn(E.substr(O.length+1))}}{const[O,te]=E.split(":");return{host:O,port:Xn(te)}}}(p);E.config.emulator={url:`${O}//${te}${null===xe?"":`:${xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:te,port:xe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Zs(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function pu(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Xn(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class Wr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return le("not implemented")}_getIdTokenResponse(p){return le("not implemented")}_linkToIdToken(p,_){return le("not implemented")}_getReauthenticationResolver(p){return le("not implemented")}}function ni(w,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:resetPassword",qt(w,p))})).apply(this,arguments)}function sl(w,p){return dn.apply(this,arguments)}function dn(){return(dn=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function vh(w,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",qt(w,p))})).apply(this,arguments)}function Ys(){return(Ys=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signInWithPassword",qt(w,p))})).apply(this,arguments)}function Cs(w,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:sendOobCode",qt(w,p))})).apply(this,arguments)}function ts(w,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,m.Z)(function*(w,p){return Cs(w,p)})).apply(this,arguments)}function wh(w,p){return ir.apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(w,p){return Cs(w,p)})).apply(this,arguments)}function ri(w,p){return xo.apply(this,arguments)}function xo(){return(xo=(0,m.Z)(function*(w,p){return Cs(w,p)})).apply(this,arguments)}function ol(w,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(w,p){return Cs(w,p)})).apply(this,arguments)}function al(){return(al=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,p))})).apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signInWithEmailLink",qt(w,p))})).apply(this,arguments)}class Xs extends Wr{constructor(p,_,E,R=null){super("password",E),this._email=p,this._password=_,this._tenantId=R}static _fromEmailAndPassword(p,_){return new Xs(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new Xs(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,m.Z)(function*(){switch(_.signInMethod){case"password":return function Pa(w,p){return Ys.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Gr(w,p){return al.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Ze(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return sl(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Fp(w,p){return Na.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:Ze(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Js(w,p){return ii.apply(this,arguments)}function ii(){return(ii=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signInWithIdp",qt(w,p))})).apply(this,arguments)}class ns extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new ns(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Ze("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:R}=_,O=(0,ue._T)(_,["providerId","signInMethod"]);if(!E||!R)return null;const te=new ns(E,R);return te.idToken=O.idToken||void 0,te.accessToken=O.accessToken||void 0,te.secret=O.secret,te.nonce=O.nonce,te.pendingToken=O.pendingToken||null,te}_getIdTokenResponse(p){return Js(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Js(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Js(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,$.xO)(_)}return p}}function Vp(w,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:sendVerificationCode",qt(w,p))})).apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,p))})).apply(this,arguments)}function yc(){return(yc=(0,m.Z)(function*(w,p){const _=yield Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,p));if(_.temporaryProof)throw Vn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const jp={USER_NOT_FOUND:"user-not-found"};function vc(){return(vc=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signInWithPhoneNumber",qt(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),jp)})).apply(this,arguments)}class Mo extends Wr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Mo({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Mo({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Bp(w,p){return ka.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Po(w,p){return yc.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Hp(w,p){return vc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:R}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:R}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:O}=p;return E||_||R||O?new Mo({verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:O}):null}}class No{constructor(p){var _,E,R,O,te,xe;const nt=(0,$.zd)((0,$.pd)(p)),bt=null!==(_=nt.apiKey)&&void 0!==_?_:null,Yt=null!==(E=nt.oobCode)&&void 0!==E?E:null,mn=function wc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=nt.mode)&&void 0!==R?R:null);ie(bt&&Yt&&mn,"argument-error"),this.apiKey=bt,this.operation=mn,this.code=Yt,this.continueUrl=null!==(O=nt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(te=nt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(xe=nt.tenantId)&&void 0!==xe?xe:null}static parseLink(p){const _=function Ic(w){const p=(0,$.zd)((0,$.pd)(w)).link,_=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||p||w}(p);try{return new No(_)}catch{return null}}}let gu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return Xs._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const R=No.parseLink(E);return ie(R,"argument-error"),Xs._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ir{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ko extends Ir{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class bs extends ko{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),ns._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ie(p.idToken||p.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return bs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return bs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:O,nonce:te,providerId:xe}=p;if(!E&&!R&&!_&&!O||!xe)return null;try{return new bs(xe)._credential({idToken:_,accessToken:E,nonce:te,pendingToken:O})}catch{return null}}}let Ec=(()=>{class w extends ko{constructor(){super("facebook.com")}static credential(_){return ns._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),mu=(()=>{class w extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return ns._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:R}=_;if(!E&&!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ul=(()=>{class w extends ko{constructor(){super("github.com")}static credential(_){return ns._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Oo extends Wr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Js(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Js(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Js(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:R,pendingToken:O}=_;return E&&R&&O&&E===R?new Oo(E,O):null}static _create(p,_){return new Oo(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class si extends Ir{constructor(p){ie(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return si.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return si.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Oo.fromJSON(p);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return Oo._create(E,_)}catch{return null}}}let rs=(()=>{class w extends ko{constructor(){super("twitter.com")}static credential(_,E){return ns._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:R}=_;if(!E||!R)return null;try{return w.credential(E,R)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function zr(w,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signUp",qt(w,p))})).apply(this,arguments)}class wi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,R=!1){return(0,m.Z)(function*(){const O=yield Tt._fromIdTokenResponse(p,E,R),te=Lo(E);return new wi({user:O,providerId:te,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,m.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const R=Lo(E);return new wi({user:p,providerId:R,_tokenResponse:E,operationType:_})})()}}function Lo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function $p(w){return cl.apply(this,arguments)}function cl(){return(cl=(0,m.Z)(function*(w){var p;const _=It(w);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new wi({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield zr(_,{returnSecureToken:!0}),R=yield wi._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class kn extends $.ZR{constructor(p,_,E,R){var O;super(_.code,_.message),this.operationType=E,this.user=R,Object.setPrototypeOf(this,kn.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,R){return new kn(p,_,E,R)}}function bc(w,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?kn._fromErrorAndOperation(w,O,p,E):O})}function Ih(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function Ii(w,p){return Er.apply(this,arguments)}function Er(){return(Er=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w);yield Fi(!0,_,p);const{providerUserInfo:E}=yield Ye(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),R=Ih(E||[]);return _.providerData=_.providerData.filter(O=>R.has(O.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function _u(w,p){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,m.Z)(function*(w,p,_=!1){const E=yield xt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return wi._forOperation(w,"link",E)})).apply(this,arguments)}function Fi(w,p,_){return an.apply(this,arguments)}function an(){return(an=(0,m.Z)(function*(w,p,_){yield xr(p);const R=!1===w?"provider-already-linked":"no-such-provider";ie(Ih(p.providerData).has(_)===w,p.auth,R)})).apply(this,arguments)}function dl(w,p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,m.Z)(function*(w,p,_=!1){var E;const{auth:R}=w,O="reauthenticate";try{const te=yield xt(w,bc(R,O,p,w),_);ie(te.idToken,R,"internal-error");const xe=_t(te.idToken);ie(xe,R,"internal-error");const{sub:nt}=xe;return ie(w.uid===nt,R,"user-mismatch"),wi._forOperation(w,O,te)}catch(te){throw"auth/user-not-found"===(null===(E=te)||void 0===E?void 0:E.code)&&Ze(R,"user-mismatch"),te}})).apply(this,arguments)}function hl(w,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(w,p,_=!1){const E="signIn",R=yield bc(w,E,p),O=yield wi._fromIdTokenResponse(w,E,R);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Oa(w,p){return jn.apply(this,arguments)}function jn(){return(jn=(0,m.Z)(function*(w,p){return hl(It(w),p)})).apply(this,arguments)}function Nt(w,p){return La.apply(this,arguments)}function La(){return(La=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w);return yield Fi(!1,_,p.providerId),_u(_,p)})).apply(this,arguments)}function Wp(w,p){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,m.Z)(function*(w,p){return dl((0,$.m9)(w),p)})).apply(this,arguments)}function Tc(w,p){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,m.Z)(function*(w,p){return Nn(w,"POST","/v1/accounts:signInWithCustomToken",qt(w,p))})).apply(this,arguments)}function to(w,p){return Va.apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(w,p){const _=It(w),E=yield Tc(_,{token:p,returnSecureToken:!0}),R=yield wi._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Uo{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Ne._fromServerResponse(p,_):Ze(p,"internal-error")}}class Ne extends Uo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Ne(_)}}function Zt(w,p,_){var E;ie((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Eh(w,p,_){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R={requestType:"PASSWORD_RESET",email:p};_&&Zt(E,R,_),yield wh(E,R)})).apply(this,arguments)}function sr(w,p,_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(w,p,_){yield ni((0,$.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function yu(w,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(w,p){yield vh((0,$.m9)(w),{oobCode:p})})).apply(this,arguments)}function vu(w,p){return jo.apply(this,arguments)}function jo(){return(jo=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w),E=yield ni(_,{oobCode:p}),R=E.requestType;switch(ie(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(E.mfaInfo,_,"internal-error");default:ie(E.email,_,"internal-error")}let O=null;return E.mfaInfo&&(O=Uo._fromServerResponse(It(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:R}})).apply(this,arguments)}function Ch(w,p){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,m.Z)(function*(w,p){const{data:_}=yield vu((0,$.m9)(w),p);return _.email})).apply(this,arguments)}function Gp(w,p,_){return no.apply(this,arguments)}function no(){return(no=(0,m.Z)(function*(w,p,_){const E=It(w),R=yield zr(E,{returnSecureToken:!0,email:p,password:_}),O=yield wi._fromIdTokenResponse(E,"signIn",R);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function or(w,p,_){return Oa((0,$.m9)(w),gu.credential(p,_))}function Ui(w,p,_){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R={requestType:"EMAIL_SIGNIN",email:p};ie(_.handleCodeInApp,E,"argument-error"),_&&Zt(E,R,_),yield ri(E,R)})).apply(this,arguments)}function Ha(w,p){return"EMAIL_SIGNIN"===No.parseLink(p)?.operation}function is(w,p,_){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R=gu.credentialWithLink(p,_||Be());return ie(R._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Oa(E,R)})).apply(this,arguments)}function fl(w,p){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:createAuthUri",qt(w,p))})).apply(this,arguments)}function bh(w,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(w,p){const E={identifier:p,continueUri:je()?Be():"http://localhost"},{signinMethods:R}=yield fl((0,$.m9)(w),E);return R||[]})).apply(this,arguments)}function pl(w,p){return $a.apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(w,p){const _=(0,$.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Zt(_.auth,R,p);const{email:O}=yield ts(_.auth,R);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function gl(w,p,_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&Zt(E.auth,O,_);const{email:te}=yield ol(E.auth,O);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ac(w,p){return $o.apply(this,arguments)}function $o(){return($o=(0,m.Z)(function*(w,p){return Bt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Th(w,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,m.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,$.m9)(w),O={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},te=yield xt(E,Ac(E.auth,O));E.displayName=te.displayName||null,E.photoURL=te.photoUrl||null;const xe=E.providerData.find(({providerId:nt})=>"password"===nt);xe&&(xe.displayName=E.displayName,xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(te)})).apply(this,arguments)}function Dh(w,p){return Ds((0,$.m9)(w),p,null)}function Rc(w,p){return Ds((0,$.m9)(w),null,p)}function Ds(w,p,_){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,m.Z)(function*(w,p,_){const{auth:E}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const te=yield xt(w,sl(E,O));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Pn{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class ss extends Pn{constructor(p,_,E,R){super(p,_,E),this.username=R}}class Mn extends Pn{constructor(p,_){super(p,"facebook.com",_)}}class Pc extends ss{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class ml extends Pn{constructor(p,_){super(p,"google.com",_)}}class Sh extends ss{constructor(p,_,E){super(p,"twitter.com",_,E)}}function _l(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function xc(w){var p,_;if(!w)return null;const{providerId:E}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const te=null===(_=null===(p=_t(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new Pn(O,"anonymous"!==te&&"custom"!==te?te:null)}if(!E)return null;switch(E){case"facebook.com":return new Mn(O,R);case"github.com":return new Pc(O,R);case"google.com":return new ml(O,R);case"twitter.com":return new Sh(O,R,w.screenName||null);case"custom":case"anonymous":return new Pn(O,null);default:return new Pn(O,E,R)}}(_)}class ai{constructor(p,_,E){this.type=p,this.credential=_,this.auth=E}static _fromIdtoken(p,_){return new ai("enroll",p,_)}static _fromMfaPendingCredential(p){return new ai("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ai._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return ai._fromIdtoken(p.multiFactorSession.idToken)}return null}}class wl{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=It(p),R=_.customData._serverResponse,O=(R.mfaInfo||[]).map(xe=>Uo._fromServerResponse(E,xe));ie(R.mfaPendingCredential,E,"internal-error");const te=ai._fromMfaPendingCredential(R.mfaPendingCredential);return new wl(te,O,function(){var xe=(0,m.Z)(function*(nt){const bt=yield nt._process(E,te);delete R.mfaInfo,delete R.mfaPendingCredential;const Yt=Object.assign(Object.assign({},R),{idToken:bt.idToken,refreshToken:bt.refreshToken});switch(_.operationType){case"signIn":const mn=yield wi._fromIdTokenResponse(E,_.operationType,Yt);return yield E._updateCurrentUser(mn.user),mn;case"reauthenticate":return ie(_.user,E,"internal-error"),wi._forOperation(_.user,_.operationType,Yt);default:Ze(E,"internal-error")}});return function(nt){return xe.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,m.Z)(function*(){return _.signInResolver(p)})()}}function kc(w,p){var _;const E=(0,$.m9)(w),R=p;return ie(p.customData.operationType,E,"argument-error"),ie(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),wl._fromError(E,R)}function Hn(w,p){return Bt(w,"POST","/v2/accounts/mfaEnrollment:start",qt(w,p))}class Cu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Uo._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Cu(p)}getSession(){var p=this;return(0,m.Z)(function*(){return ai._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var E=this;return(0,m.Z)(function*(){const R=p,O=yield E.getSession(),te=yield xt(E.user,R._process(E.user.auth,O,_));return yield E.user._updateTokensIfNecessary(te),E.user.reload()})()}unenroll(p){var _=this;return(0,m.Z)(function*(){var E;const R="string"==typeof p?p:p.uid,O=yield _.user.getIdToken(),te=yield xt(_.user,function Eu(w,p){return Bt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(w,p))}(_.user.auth,{idToken:O,mfaEnrollmentId:R}));_.enrolledFactors=_.enrolledFactors.filter(({uid:xe})=>xe!==R),yield _.user._updateTokensIfNecessary(te);try{yield _.user.reload()}catch(xe){if("auth/user-token-expired"!==(null===(E=xe)||void 0===E?void 0:E.code))throw xe}})()}}const Ah=new WeakMap;function bu(w){const p=(0,$.m9)(w);return Ah.has(p)||Ah.set(p,Cu._fromUser(p)),Ah.get(p)}const os="__sak";class za{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(os,"1"),this.storage.removeItem(os),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ar=(()=>{class w extends za{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Il(){const w=(0,$.z$)();return B(w)||Ue(w)}()&&function Ji(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const R=this.storage.getItem(E),O=this.localCache[E];R!==O&&_(E,O,R)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((xe,nt,bt)=>{this.notifyListeners(xe,bt)});const R=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(R);if(_.newValue!==xe)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!E)return}const O=()=>{const xe=this.storage.getItem(R);!E&&this.localCache[R]===xe||this.notifyListeners(R,xe)},te=this.storage.getItem(R);!function Ot(){return(0,$.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var R=()=>super._set,O=this;return(0,m.Z)(function*(){yield R().call(O,_,E),O.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,R=this;return(0,m.Z)(function*(){const O=yield E().call(R,_);return R.localCache[_]=JSON.stringify(O),O})()}_remove(_){var E=()=>super._remove,R=this;return(0,m.Z)(function*(){yield E().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),As=(()=>{class w extends za{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let Ka=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(O=>O.isListeningto(_));if(E)return E;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,m.Z)(function*(){const R=_,{eventId:O,eventType:te,data:xe}=R.data,nt=E.handlersMap[te];if(!nt?.size)return;R.ports[0].postMessage({status:"ack",eventId:O,eventType:te});const bt=Array.from(nt).map(function(){var mn=(0,m.Z)(function*(Ur){return Ur(R.origin,xe)});return function(Ur){return mn.apply(this,arguments)}}()),Yt=yield function El(w){return Promise.all(w.map(function(){var p=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(bt);R.ports[0].postMessage({status:"done",eventId:O,eventType:te,response:Yt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function qo(w="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return w+_}class Ph{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var R=this;return(0,m.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let te,xe;return new Promise((nt,bt)=>{const Yt=qo("",20);O.port1.start();const mn=setTimeout(()=>{bt(new Error("unsupported_event"))},E);xe={messageChannel:O,onMessage(Ur){const $i=Ur;if($i.data.eventId===Yt)switch($i.data.status){case"ack":clearTimeout(mn),te=setTimeout(()=>{bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),nt($i.data.response);break;default:clearTimeout(mn),clearTimeout(te),bt(new Error("invalid_response"))}}},R.handlers.add(xe),O.port1.addEventListener("message",xe.onMessage),R.target.postMessage({eventType:p,eventId:Yt,data:_},[O.port2])}).finally(()=>{xe&&R.removeMessageHandler(xe)})})()}}function $n(){return window}function qr(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function as(){return(as=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Za="firebaseLocalStorageDb",Ya="firebaseLocalStorage",Ko="fbase_key";class Zo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Yo(w,p){return w.transaction([Ya],p?"readwrite":"readonly").objectStore(Ya)}function Du(){const w=indexedDB.open(Za,1);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Ya,{keyPath:Ko})}catch(R){_(R)}}),w.addEventListener("success",(0,m.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Ya)?p(E):(E.close(),yield function Uc(){const w=indexedDB.deleteDatabase(Za);return new Zo(w).toPromise()}(),p(yield Du()))}))})}function Qa(w,p,_){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,m.Z)(function*(w,p,_){const E=Yo(w,!0).put({[Ko]:p,value:_});return new Zo(E).toPromise()})).apply(this,arguments)}function Qo(){return(Qo=(0,m.Z)(function*(w,p){const _=Yo(w,!1).get(p),E=yield new Zo(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Su(w,p){const _=Yo(w,!0).delete(p);return new Zo(_).toPromise()}const Jo=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield Du()),_.db})()}_withRetries(_){var E=this;return(0,m.Z)(function*(){let R=0;for(;;)try{const O=yield E._openDb();return yield _(O)}catch(O){if(R++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return qr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=Ka._getInstance(function Tu(){return qr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(R,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(R,O){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(R,O){return["keyChanged"]});return function(R,O){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var E,R;if(_.activeServiceWorker=yield function Fc(){return as.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ph(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(R=O[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Cl(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Du();return yield Qa(_,os,"1"),yield Su(_,os),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var R=this;return(0,m.Z)(function*(){return R._withPendingWrite((0,m.Z)(function*(){return yield R._withRetries(O=>Qa(O,_,E)),R.localCache[_]=E,R.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,m.Z)(function*(){const R=yield E._withRetries(O=>function Mh(w,p){return Qo.apply(this,arguments)}(O,_));return E.localCache[_]=R,R})()}_remove(_){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(R=>Su(R,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const E=yield _._withRetries(te=>{const xe=Yo(te,!1).getAll();return new Zo(xe).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const R=[],O=new Set;for(const{fbase_key:te,value:xe}of E)O.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(xe)&&(_.notifyListeners(te,xe),R.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!O.has(te)&&(_.notifyListeners(te,null),R.push(te));return R})()}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Nh(w,p){return Bt(w,"POST","/v2/accounts/mfaSignIn:start",qt(w,p))}function Pr(){return(Pr=(0,m.Z)(function*(w){return(yield Bt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(w){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=p,E.onerror=R=>{const O=Le("internal-error");O.customData=R,_(O)},E.type="text/javascript",E.charset="UTF-8",function ta(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(E)})}function na(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Bi=1e12;class Vc{constructor(p){this.auth=p,this.counter=Bi,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new Sn(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||Bi;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Bi))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,m.Z)(function*(){var E;return null===(E=_._widgets.get(p||Bi))||void 0===E||E.execute(),""})()}}class Sn{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof p?document.getElementById(p):p;ie(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zp(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kh=na("rcb"),HI=new ze(3e4,6e4);class U_{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=$n().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ie(function Oh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($n().grecaptcha):new Promise((E,R)=>{const O=$n().setTimeout(()=>{R(Le(p,"network-request-failed"))},HI.get());$n()[kh]=()=>{$n().clearTimeout(O),delete $n()[kh];const xe=$n().grecaptcha;if(!xe)return void R(Le(p,"internal-error"));const nt=xe.render;xe.render=(bt,Yt)=>{const mn=nt(bt,Yt);return this.counter++,mn},this.hostLanguage=_,E(xe)},so(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:kh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),R(Le(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=$n().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $I{load(p){return(0,m.Z)(function*(){return new Vc(p)})()}clearedOneInstance(){}}const Ru="recaptcha",WI={theme:"light",type:"image"};class V_{constructor(p,_=Object.assign({},WI),E){this.parameters=_,this.type=Ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=It(E),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof p?document.getElementById(p):p;ie(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $I:new U_,this.validateStartingState()}verify(){var p=this;return(0,m.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(O=>{const te=xe=>{!xe||(p.tokenChangeListeners.delete(te),O(xe))};p.tokenChangeListeners.add(te),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=$n()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,m.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,m.Z)(function*(){ie(je()&&!qr(),p.auth,"internal-error"),yield function mr(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Au(w){return Pr.apply(this,arguments)}(p.auth);ie(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class un{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Mo._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function us(w,p,_){return at.apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(w,p,_){const E=It(w),R=yield Cr(E,p,(0,$.m9)(_));return new un(R,O=>Oa(E,O))})).apply(this,arguments)}function Kr(w,p,_){return An.apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);yield Fi(!1,E,"phone");const R=yield Cr(E.auth,p,(0,$.m9)(_));return new un(R,O=>Nt(E,O))})).apply(this,arguments)}function ls(w,p,_){return oo.apply(this,arguments)}function oo(){return(oo=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w),R=yield Cr(E.auth,p,(0,$.m9)(_));return new un(R,O=>Wp(E,O))})).apply(this,arguments)}function Cr(w,p,_){return ao.apply(this,arguments)}function ao(){return(ao=(0,m.Z)(function*(w,p,_){var E;const R=yield _.verify();try{let O;if(ie("string"==typeof R,w,"argument-error"),ie(_.type===Ru,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const te=O.session;if("phoneNumber"in O)return ie("enroll"===te.type,w,"internal-error"),(yield Hn(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ie("signin"===te.type,w,"internal-error");const xe=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return ie(xe,w,"missing-multi-factor-info"),(yield Nh(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Vp(w,{phoneNumber:O.phoneNumber,recaptchaToken:R});return te}}finally{_._reset()}})).apply(this,arguments)}function Bc(w,p){return jc.apply(this,arguments)}function jc(){return(jc=(0,m.Z)(function*(w,p){yield _u((0,$.m9)(w),p)})).apply(this,arguments)}let Lh=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=It(_)}verifyPhoneNumber(_,E){return Cr(this.auth,_,(0,$.m9)(E))}static credential(_,E){return Mo._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:R}=_;return E&&R?Mo._fromTokenResponse(E,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ia(w,p){return p?ee(p):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Dl extends Wr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Js(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Js(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Js(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function uo(w){return hl(w.auth,new Dl(w),w.bypassAuthState)}function st(w){const{auth:p,user:_}=w;return ie(_,p,"internal-error"),dl(_,new Dl(w),w.bypassAuthState)}function Xa(w){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(w){const{auth:p,user:_}=w;return ie(_,p,"internal-error"),_u(_,new Dl(w),w.bypassAuthState)})).apply(this,arguments)}class Sl{constructor(p,_,E,R,O=!1){this.auth=p,this.resolver=E,this.user=R,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,m.Z)(function*(E,R){p.pendingPromise={resolve:E,reject:R};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(E,R){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:R,postBody:O,tenantId:te,error:xe,type:nt}=p;if(xe)return void _.reject(xe);const bt={auth:_.auth,requestUri:E,sessionId:R,tenantId:te||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(nt)(bt))}catch(Yt){_.reject(Yt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return uo;case"linkViaPopup":case"linkViaRedirect":return Xa;case"reauthViaPopup":case"reauthViaRedirect":return st;default:Ze(this.auth,"internal-error")}}resolve(p){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xu=new ze(2e3,1e4);function Wn(w,p,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,m.Z)(function*(w,p,_){const E=It(w);Ce(w,p,Ir);const R=ia(E,_);return new eu(E,"signInViaPopup",p,R).executeNotNull()})).apply(this,arguments)}function Pu(w,p,_){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);Ce(E.auth,p,Ir);const R=ia(E.auth,_);return new eu(E.auth,"reauthViaPopup",p,R,E).executeNotNull()})).apply(this,arguments)}function Fh(w,p,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);Ce(E.auth,p,Ir);const R=ia(E.auth,_);return new eu(E.auth,"linkViaPopup",p,R,E).executeNotNull()})).apply(this,arguments)}let eu=(()=>{class w extends Sl{constructor(_,E,R,O,te){super(_,E,O,te),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const E=yield _.execute();return ie(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,m.Z)(function*(){we(1===_.filter.length,"Popup operations only handle one event");const E=qo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,R;this.pollId=null!==(R=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,xu.get())};_()}}return w.currentPopupAction=null,w})();const ui=new Map;class lo extends Sl{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,m.Z)(function*(){let E=ui.get(_.auth._key());if(!E){try{const O=(yield function Al(w,p){return Rs.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(O)}catch(R){E=()=>Promise.reject(R)}ui.set(_.auth._key(),E)}return _.bypassAuthState||ui.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const R=yield E.auth._redirectUserForId(p.eventId);if(R)return E.user=R,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Rs(){return(Rs=(0,m.Z)(function*(w,p){const _=ds(p),E=co(w);if(!(yield E._isAvailable()))return!1;const R="true"===(yield E._get(_));return yield E._remove(_),R})).apply(this,arguments)}function Zr(w,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,m.Z)(function*(w,p){return co(w)._set(ds(p),"true")})).apply(this,arguments)}function xs(){ui.clear()}function er(w,p){ui.set(w._key(),p)}function co(w){return ee(w._redirectPersistence)}function ds(w){return W("pendingRedirect",w.config.apiKey,w.name)}function Gn(w,p,_){return function xn(w,p,_){return aa.apply(this,arguments)}(w,p,_)}function aa(){return(aa=(0,m.Z)(function*(w,p,_){const E=It(w);Ce(w,p,Ir);const R=ia(E,_);return yield Zr(R,E),R._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function b(w,p,_){return function D(w,p,_){return x.apply(this,arguments)}(w,p,_)}function x(){return(x=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);Ce(E.auth,p,Ir);const R=ia(E.auth,_);yield Zr(R,E.auth);const O=yield Mt(E);return R._openRedirect(E.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function j(w,p,_){return function J(w,p,_){return oe.apply(this,arguments)}(w,p,_)}function oe(){return(oe=(0,m.Z)(function*(w,p,_){const E=(0,$.m9)(w);Ce(E.auth,p,Ir);const R=ia(E.auth,_);yield Fi(!1,E,p.providerId),yield Zr(R,E.auth);const O=yield Mt(E);return R._openRedirect(E.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Re(w,p){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(w,p){return yield It(w)._initializationPromise,lt(w,p,!1)})).apply(this,arguments)}function lt(w,p){return At.apply(this,arguments)}function At(){return(At=(0,m.Z)(function*(w,p,_=!1){const E=It(w),R=ia(E,p),te=yield new lo(E,R,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield E._persistUserIfCurrent(te.user),yield E._setRedirectUser(null,p)),te})).apply(this,arguments)}function Mt(w){return wt.apply(this,arguments)}function wt(){return(wt=(0,m.Z)(function*(w){const p=qo(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class _r{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Lt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ps(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!Ps(p)){const R=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,R))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ua(p))}saveEventToCache(p){this.cachedEventUids.add(ua(p)),this.lastProcessedEventTime=Date.now()}}function ua(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Ps({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function Ci(w){return hs.apply(this,arguments)}function hs(){return(hs=(0,m.Z)(function*(w,p={}){return Bt(w,"GET","/v1/projects",p)})).apply(this,arguments)}const Hi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,la=/^https?/;function Yr(){return(Yr=(0,m.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Ci(w);for(const _ of p)try{if(B_(_))return}catch{}Ze(w,"unauthorized-domain")})).apply(this,arguments)}function B_(w){const p=Be(),{protocol:_,hostname:E}=new URL(p);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===E}if(!la.test(_))return!1;if(Hi.test(w))return E===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(E)}const qp=new ze(3e4,6e4);function Uh(){const w=$n().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let qn=null;function fo(w){return qn=qn||function GI(w){return new Promise((p,_)=>{var E,R,O;function te(){Uh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Uh(),_(Le(w,"network-request-failed"))},timeout:qp.get()})}if(null!==(R=null===(E=$n().gapi)||void 0===E?void 0:E.iframes)&&void 0!==R&&R.Iframe)p(gapi.iframes.getContext());else{if(null===(O=$n().gapi)||void 0===O||!O.load){const xe=na("iframefcb");return $n()[xe]=()=>{gapi.load?te():_(Le(w,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${xe}`).catch(nt=>_(nt))}te()}}).catch(p=>{throw qn=null,p})}(w),qn}const Vh=new ze(5e3,15e3),Bh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jh(w){const p=w.config;ie(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?fn(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:w.name,v:k.SDK_VERSION},R=j_.get(w.config.apiHost);R&&(E.eid=R);const O=w._getFrameworks();return O.length&&(E.fw=O.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function $c(){return $c=(0,m.Z)(function*(w){const p=yield fo(w),_=$n().gapi;return ie(_,w,"internal-error"),p.open({where:document.body,url:jh(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bh,dontclear:!0},E=>new Promise(function(){var R=(0,m.Z)(function*(O,te){yield E.restyle({setHideOnLeave:!1});const xe=Le(w,"network-request-failed"),nt=$n().setTimeout(()=>{te(xe)},Vh.get());function bt(){$n().clearTimeout(nt),O(E)}E.ping(bt).then(bt,()=>{te(xe)})});return function(O,te){return R.apply(this,arguments)}}()))}),$c.apply(this,arguments)}const Rl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mu(w,p,_,E,R,O){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:k.SDK_VERSION,eventId:R};if(p instanceof Ir){p.setDefaultLanguage(w.languageCode),te.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(te.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nt,bt]of Object.entries(O||{}))te[nt]=bt}if(p instanceof ko){const nt=p.getScopes().filter(bt=>""!==bt);nt.length>0&&(te.scopes=nt.join(","))}w.tenantId&&(te.tid=w.tenantId);const xe=te;for(const nt of Object.keys(xe))void 0===xe[nt]&&delete xe[nt];return`${function Qp({config:w}){return w.emulator?fn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(xe).slice(1)}`}const Nu="webStorageSupport",$h=class Pl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=As,this._completeRedirectFn=lt,this._overrideRedirectResult=er}_openPopup(p,_,E,R){var O=this;return(0,m.Z)(function*(){var te;we(null===(te=O.eventManagers[p._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const xe=Mu(p,_,E,Be(),R);return function Gc(w,p,_,E=500,R=600){const O=Math.max((window.screen.availHeight-R)/2,0).toString(),te=Math.max((window.screen.availWidth-E)/2,0).toString();let xe="";const nt=Object.assign(Object.assign({},Rl),{width:E.toString(),height:R.toString(),top:O,left:te}),bt=(0,$.z$)().toLowerCase();_&&(xe=ne(bt)?"_blank":_),M(bt)&&(p=p||"http://localhost",nt.scrollbars="yes");const Yt=Object.entries(nt).reduce((Ur,[$i,qc])=>`${Ur}${$i}=${qc},`,"");if(function pn(w=(0,$.z$)()){var p;return Ue(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(bt)&&"_self"!==xe)return function go(w,p){const _=document.createElement("a");_.href=w,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",xe),new xl(null);const mn=window.open(p||"",xe,Yt);ie(mn,w,"popup-blocked");try{mn.focus()}catch{}return new xl(mn)}(p,xe,qo())})()}_openRedirect(p,_,E,R){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(p),function Lc(w){$n().location.href=w}(Mu(p,_,E,Be(),R)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:R,promise:O}=this.eventManagers[_];return R?Promise.resolve(R):(we(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,m.Z)(function*(){const E=yield function Zp(w){return $c.apply(this,arguments)}(p),R=new _r(p);return E.register("authEvent",O=>(ie(O?.authEvent,p,"invalid-auth-event"),{status:R.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:R},_.iframes[p._key()]=E,R})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Nu,{type:Nu},R=>{var O;const te=null===(O=R?.[0])||void 0===O?void 0:O[Nu];void 0!==te&&_(!!te),Ze(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ho(w){return Yr.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return gn()||B()||Ue()}};class Wh extends class zc{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return le("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Wh(p)}_finalizeEnroll(p,_,E){return function Iu(w,p){return Bt(w,"POST","/v2/accounts/mfaEnrollment:finalize",qt(w,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function ea(w,p){return Bt(w,"POST","/v2/accounts/mfaSignIn:finalize",qt(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ms=(()=>{class w{constructor(){}static assertion(_){return Wh._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var mo="@firebase/auth",Gh="0.20.11";class H_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{var R;p((null===(R=E)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function KI(w){(0,k._registerComponent)(new me.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),R=p.getProvider("heartbeat"),{apiKey:O,authDomain:te}=E.options;return((xe,nt)=>{ie(O&&!O.includes(":"),"invalid-api-key",{appName:xe.name}),ie(!te?.includes(":"),"argument-error",{appName:xe.name});const bt={apiKey:O,authDomain:te,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dn(w)},Yt=new Ro(xe,nt,bt);return function ae(w,p){const _=p?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ee);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(E,p?.popupRedirectResolver)}(Yt,_),Yt})(E,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new me.wA("auth-internal",p=>{const _=It(p.getProvider("auth").getImmediate());return new H_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(mo,Gh,function qI(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(mo,Gh,"esm2017")}("Browser")},2090:(pt,Pe,F)=>{F.d(Pe,{$s:()=>et,BH:()=>Ht,DV:()=>Vn,Dv:()=>Lr,G6:()=>Ce,GJ:()=>Oi,L:()=>he,LL:()=>rn,Pz:()=>on,Sg:()=>ze,UG:()=>De,UI:()=>Li,US:()=>me,Wj:()=>Dt,Wl:()=>wr,Yr:()=>Me,ZB:()=>z,ZR:()=>bn,aH:()=>mt,b$:()=>ge,cI:()=>Bt,dS:()=>kt,eu:()=>ie,g5:()=>k,gK:()=>Qn,gQ:()=>Cn,h$:()=>pe,hl:()=>Ge,hu:()=>$,jU:()=>tt,lb:()=>xr,m9:()=>tn,ne:()=>Tn,p$:()=>K,pd:()=>Gs,r3:()=>Or,ru:()=>Ee,tV:()=>ve,uI:()=>ke,ug:()=>$r,vZ:()=>Ye,w1:()=>Ze,w9:()=>ki,xO:()=>En,xb:()=>vi,z$:()=>He,zI:()=>le,zd:()=>gr});const $=function(q,W){if(!q)throw k(W)},k=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},se=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):55296==(64512&M)&&H+1<q.length&&56320==(64512&q.charCodeAt(H+1))?(M=65536+((1023&M)<<10)+(1023&q.charCodeAt(++H)),W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let M=0;M<q.length;M+=3){const B=q[M],ne=M+1<q.length,Oe=ne?q[M+1]:0,rt=M+2<q.length,it=rt?q[M+2]:0;let Pt=(15&Oe)<<2|it>>6,pn=63&it;rt||(pn=64,ne||(Pt=64)),H.push(Y[B>>2],Y[(3&B)<<4|Oe>>4],Y[Pt],Y[pn])}return H.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(se(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let Y=0,H=0;for(;Y<q.length;){const M=q[Y++];if(M<128)W[H++]=String.fromCharCode(M);else if(M>191&&M<224){const B=q[Y++];W[H++]=String.fromCharCode((31&M)<<6|63&B)}else if(M>239&&M<365){const rt=((7&M)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;W[H++]=String.fromCharCode(55296+(rt>>10)),W[H++]=String.fromCharCode(56320+(1023&rt))}else{const B=q[Y++],ne=q[Y++];W[H++]=String.fromCharCode((15&M)<<12|(63&B)<<6|63&ne)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const Y=W?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let M=0;M<q.length;){const B=Y[q.charAt(M++)],Oe=M<q.length?Y[q.charAt(M)]:0;++M;const it=M<q.length?Y[q.charAt(M)]:64;++M;const Ue=M<q.length?Y[q.charAt(M)]:64;if(++M,null==B||null==Oe||null==it||null==Ue)throw Error();H.push(B<<2|Oe>>4),64!==it&&(H.push(Oe<<4&240|it>>2),64!==Ue&&H.push(it<<6&192|Ue))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},pe=function(q){const W=se(q);return me.encodeByteArray(W,!0)},he=function(q){return pe(q).replace(/\./g,"")},ve=function(q){try{return me.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function K(q){return z(void 0,q)}function z(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const Y in W)!W.hasOwnProperty(Y)||!X(Y)||(q[Y]=z(q[Y],W[Y]));return q}function X(q){return"__proto__"!==q}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function Ee(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const q=He();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Me(){return!1}function Ce(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function ie(){return new Promise((q,W)=>{try{let Y=!0;const H="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(H);M.onsuccess=()=>{M.result.close(),Y||self.indexedDB.deleteDatabase(H),q(!0)},M.onupgradeneeded=()=>{Y=!1},M.onerror=()=>{var B;W((null===(B=M.error)||void 0===B?void 0:B.message)||"")}}catch(Y){W(Y)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ae=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&ve(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},mt=()=>{var q;return null===(q=ae())||void 0===q?void 0:q.config},on=q=>{var W;return null===(W=ae())||void 0===W?void 0:W[`_${q}`]};class Ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Y)=>{this.resolve=W,this.reject=Y})}wrapCallback(W){return(Y,H)=>{Y?this.reject(Y):this.resolve(H),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Y):W(Y,H))}}}function ze(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=W||"demo-project",M=q.iat||0,B=q.sub||q.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ne=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:M,exp:M+3600,auth_time:M,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},q);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ne)),""].join(".")}class bn extends Error{constructor(W,Y,H){super(Y),this.code=W,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(W,Y,H){this.service=W,this.serviceName=Y,this.errors=H}create(W,...Y){const H=Y[0]||{},M=`${this.service}/${W}`,B=this.errors[W],ne=B?function sn(q,W){return q.replace(qt,(Y,H)=>{const M=W[H];return null!=M?String(M):`<${H}?>`})}(B,H):"Error";return new bn(M,`${this.serviceName}: ${ne} (${M}).`,H)}}const qt=/\{\$([^}]+)}/g;function Bt(q){return JSON.parse(q)}function wr(q){return JSON.stringify(q)}const Ni=function(q){let W={},Y={},H={},M="";try{const B=q.split(".");W=Bt(ve(B[0])||""),Y=Bt(ve(B[1])||""),M=B[2],H=Y.d||{},delete Y.d}catch{}return{header:W,claims:Y,data:H,signature:M}},ki=function(q){const Y=Ni(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Oi=function(q){const W=Ni(q).claims;return"object"==typeof W&&!0===W.admin};function Or(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function Vn(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function vi(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function Li(q,W,Y){const H={};for(const M in q)Object.prototype.hasOwnProperty.call(q,M)&&(H[M]=W.call(Y,q[M],M,q));return H}function Ye(q,W){if(q===W)return!0;const Y=Object.keys(q),H=Object.keys(W);for(const M of Y){if(!H.includes(M))return!1;const B=q[M],ne=W[M];if(rr(B)&&rr(ne)){if(!Ye(B,ne))return!1}else if(B!==ne)return!1}for(const M of H)if(!Y.includes(M))return!1;return!0}function rr(q){return null!==q&&"object"==typeof q}function En(q){const W=[];for(const[Y,H]of Object.entries(q))Array.isArray(H)?H.forEach(M=>{W.push(encodeURIComponent(Y)+"="+encodeURIComponent(M))}):W.push(encodeURIComponent(Y)+"="+encodeURIComponent(H));return W.length?"&"+W.join("&"):""}function gr(q){const W={};return q.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[M,B]=H.split("=");W[decodeURIComponent(M)]=decodeURIComponent(B)}}),W}function Gs(q){const W=q.indexOf("?");if(!W)return"";const Y=q.indexOf("#",W);return q.substring(W,Y>0?Y:void 0)}class Cn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Y){Y||(Y=0);const H=this.W_;if("string"==typeof W)for(let Ue=0;Ue<16;Ue++)H[Ue]=W.charCodeAt(Y)<<24|W.charCodeAt(Y+1)<<16|W.charCodeAt(Y+2)<<8|W.charCodeAt(Y+3),Y+=4;else for(let Ue=0;Ue<16;Ue++)H[Ue]=W[Y]<<24|W[Y+1]<<16|W[Y+2]<<8|W[Y+3],Y+=4;for(let Ue=16;Ue<80;Ue++){const Pt=H[Ue-3]^H[Ue-8]^H[Ue-14]^H[Ue-16];H[Ue]=4294967295&(Pt<<1|Pt>>>31)}let it,Ae,M=this.chain_[0],B=this.chain_[1],ne=this.chain_[2],Oe=this.chain_[3],rt=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(it=Oe^B&(ne^Oe),Ae=1518500249):(it=B^ne^Oe,Ae=1859775393):Ue<60?(it=B&ne|Oe&(B|ne),Ae=2400959708):(it=B^ne^Oe,Ae=3395469782);const Pt=(M<<5|M>>>27)+it+rt+Ae+H[Ue]&4294967295;rt=Oe,Oe=ne,ne=4294967295&(B<<30|B>>>2),B=M,M=Pt}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+ne&4294967295,this.chain_[3]=this.chain_[3]+Oe&4294967295,this.chain_[4]=this.chain_[4]+rt&4294967295}update(W,Y){if(null==W)return;void 0===Y&&(Y=W.length);const H=Y-this.blockSize;let M=0;const B=this.buf_;let ne=this.inbuf_;for(;M<Y;){if(0===ne)for(;M<=H;)this.compress_(W,M),M+=this.blockSize;if("string"==typeof W){for(;M<Y;)if(B[ne]=W.charCodeAt(M),++ne,++M,ne===this.blockSize){this.compress_(B),ne=0;break}}else for(;M<Y;)if(B[ne]=W[M],++ne,++M,ne===this.blockSize){this.compress_(B),ne=0;break}}this.inbuf_=ne,this.total_+=Y}digest(){const W=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&Y,Y/=256;this.compress_(this.buf_);let H=0;for(let M=0;M<5;M++)for(let B=24;B>=0;B-=8)W[H]=this.chain_[M]>>B&255,++H;return W}}function Tn(q,W){const Y=new wn(q,W);return Y.subscribe.bind(Y)}class wn{constructor(W,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{W(this)}).catch(H=>{this.error(H)})}next(W){this.forEachObserver(Y=>{Y.next(W)})}error(W){this.forEachObserver(Y=>{Y.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Y,H){let M;if(void 0===W&&void 0===Y&&void 0===H)throw new Error("Missing Observer.");M=function yt(q,W){if("object"!=typeof q||null===q)return!1;for(const Y of W)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Y,complete:H},void 0===M.next&&(M.next=xt),void 0===M.error&&(M.error=xt),void 0===M.complete&&(M.complete=xt);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),B}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,W)}sendOne(W,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Y(this.observers[W])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xt(){}const Lr=function(q,W,Y,H){let M;if(H<W?M="at least "+W:H>Y&&(M=0===Y?"none":"no more than "+Y),M)throw new Error(q+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+M+".")};function Qn(q,W){return`${q} failed: ${W} argument `}function Dt(q,W,Y,H){if((!H||Y)&&"function"!=typeof Y)throw new Error(Qn(q,W)+"must be a valid function.")}function xr(q,W,Y,H){if((!H||Y)&&("object"!=typeof Y||null===Y))throw new Error(Qn(q,W)+"must be a valid context object.")}const kt=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);if(M>=55296&&M<=56319){const B=M-55296;H++,$(H<q.length,"Surrogate pair missing trail surrogate."),M=65536+(B<<10)+(q.charCodeAt(H)-56320)}M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):M<65536?(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},$r=function(q){let W=0;for(let Y=0;Y<q.length;Y++){const H=q.charCodeAt(Y);H<128?W++:H<2048?W+=2:H>=55296&&H<=56319?(W+=4,Y++):W+=3}return W};function et(q,W=1e3,Y=2){const H=W*Math.pow(Y,q),M=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+M)}function tn(q){return q&&q._delegate?q._delegate:q}},1379:(pt,Pe,F)=>{var m=F(4650);let $=null;function k(){return $}const pe=new m.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ve(){return(0,m.LFG)(z)}()},providedIn:"platform"}),n})();const K=new m.OlP("Location Initialized");let z=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function He(){return new z((0,m.LFG)(pe))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Qe)},providedIn:"root"}),n})();const ge=new m.OlP("appBaseHref");let Qe=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+tt(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ze=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+tt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=ke,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(m.LFG(Ee))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Me(){return new Le((0,m.LFG)(Ee))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}let dn=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ys{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ys(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,l),Qs(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Qs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Qs(n,e){n.context.$implicit=e.item}let Bn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class wh{constructor(){this.$implicit=null,this.ngIf=null}}function ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Na=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),l=-1===i.indexOf("-")?void 0:m.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.aQg),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Xs=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:a,ngTemplateOutletInjector:l}=this;this._viewRef=r.createEmbeddedView(i,a,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.TTD]}),n})(),ll=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Lo(n){return"server"===n}let bc=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Ih((0,m.LFG)(pe),window)}),n})();class Ih{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Er(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ii(this.window.history)||Ii(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ii(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ds extends class Rc extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){$||($=n)}(new Ds)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function xc(){return Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null}();return null==t?null:function ss(n){Pn=Pn||document.createElement("a"),Pn.setAttribute("href",n);const e=Pn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Pn,Ss=null;const Mn=new m.OlP("TRANSITION_ID"),ml=[{provide:m.ip1,useFactory:function Pc(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Mn,pe,m.zs3],multi:!0}];let _l=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const yl=new m.OlP("EventManagerPlugins");let vl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(yl),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class wu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Wo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Go=(()=>{class n extends Wo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Mc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Mc))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Mc(n){k().remove(n)}const zo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nc=/%COMP%/g;function Eu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Eu(n,i,t):(i=i.replace(Nc,n),t.push(i))}return t}function Cu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new os(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Oc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Rh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Eu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vl),m.LFG(Go),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class os{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(zo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=zo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=zo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Cu(r)):this.eventManager.addEventListener(e,t,Cu(r))}}function qa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Oc extends os{constructor(e,t,r,i){super(e),this.component=r;const a=Eu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Hn(n){return"_ngcontent-%COMP%".replace(Nc,n)}(i+"-"+r.id),this.hostAttr=function Iu(n){return"_nghost-%COMP%".replace(Nc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Rh extends os{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Eu(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ar=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const xh=["alt","control","meta","shift"],As={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},El={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ka=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),xh.forEach(v=>{const T=r.indexOf(v);T>-1&&(r.splice(T,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=As[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),xh.forEach(l=>{l!==i&&(0,El[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Za=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Fc(){Ds.makeCurrent()},multi:!0},{provide:pe,useFactory:function Cl(){return(0,m.RDi)(document),document},deps:[]}]),ro=new m.OlP(""),Ya=[{provide:m.rWj,useClass:class Sh{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Ko=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function as(){return new m.qLn},deps:[]},{provide:yl,useClass:ar,multi:!0,deps:[pe,m.R0b,m.Lbi]},{provide:yl,useClass:Ka,multi:!0,deps:[pe]},{provide:bu,useClass:bu,deps:[vl,Go,m.AFp]},{provide:m.FYo,useExisting:bu},{provide:Wo,useExisting:Go},{provide:Go,useClass:Go,deps:[pe]},{provide:vl,useClass:vl,deps:[yl,m.R0b]},{provide:class Fo{},useClass:_l,deps:[]},[]];let Zo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Mn,useExisting:m.AFp},ml]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ro,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Ko,...Ya],imports:[ll,m.hGG]}),n})(),Vi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Qa(){return new Vi((0,m.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var un=F(8996),us=F(7669);function at(...n){const e=(0,us.yG)(n);return(0,un.D)(n,e)}var Kr=F(7579);class An extends Kr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const oo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Cr=F(9751);const{isArray:ao}=Array,{getPrototypeOf:Bc,prototype:jc,keys:Lh}=Object;var uo=F(4671),st=F(4004);const{isArray:Xa}=Array;var Wn=F(5403),Ja=F(9672);function Pu(...n){const e=(0,us.yG)(n),t=(0,us.jO)(n),{args:r,keys:i}=function ia(n){if(1===n.length){const e=n[0];if(ao(e))return{args:e,keys:null};if(function Dl(n){return n&&"object"==typeof n&&Bc(n)===jc}(e)){const t=Lh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,un.D)([],e);const a=new Cr.y(function Hc(n,e,t=uo.y){return r=>{Fh(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let g=0;g<i;g++)Fh(e,()=>{const v=(0,un.D)(n[g],e);let T=!1;v.subscribe((0,Wn.x)(r,S=>{a[g]=S,T||(T=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function xu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):uo.y));return t?a.pipe(function Sl(n){return(0,st.U)(e=>function ji(n,e){return Xa(e)?n(...e):n(e)}(n,e))}(t)):a}function Fh(n,e,t){n?(0,Ja.f)(t,n,e):e()}var sa=F(8189);function oa(...n){return function eu(){return(0,sa.J)(1)}()((0,un.D)(n,(0,us.yG)(n)))}var ui=F(8421);function lo(n){return new Cr.y(e=>{(0,ui.Xf)(n()).subscribe(e)})}var Al=F(9635),Rs=F(576);function Zr(n,e){const t=(0,Rs.m)(n)?n:()=>n,r=i=>i.error(t());return new Cr.y(e?i=>e.schedule(r,0,i):r)}var cs=F(515),xs=F(727),er=F(4482);function co(){return(0,er.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ds extends Cr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,er.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xs.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xs.w0.EMPTY)}return e}refCount(){return co()(this)}}function Gn(n,e){return(0,er.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,Wn.x)(r,g=>{i?.unsubscribe();let v=0;const T=a++;(0,ui.Xf)(n(g,T)).subscribe(i=(0,Wn.x)(r,S=>r.next(e?e(g,S,T,v++):S),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function xn(n){return n<=0?()=>cs.E:(0,er.e)((e,t)=>{let r=0;e.subscribe((0,Wn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function aa(...n){const e=(0,us.yG)(n);return(0,er.e)((t,r)=>{(e?oa(n,t,e):oa(n,t)).subscribe(r)})}function b(n,e){return(0,er.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var D=F(5577);function x(n){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function j(n=J){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function J(){return new oo}function oe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,a)=>n(i,a,r)):uo.y,xn(1),t?x(e):j(()=>new oo))}function Re(n,e){return(0,Rs.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Ve=F(8505);function lt(n){return(0,er.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,l=>{a=(0,ui.Xf)(n(l,lt(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function At(n,e,t,r,i){return(a,l)=>{let d=t,g=e,v=0;a.subscribe((0,Wn.x)(l,T=>{const S=v++;g=d?n(g,T,S):(d=!0,T),r&&l.next(g)},i&&(()=>{d&&l.next(g),l.complete()})))}}function Mt(n,e){return(0,er.e)(At(n,e,arguments.length>=2,!0))}function wt(n){return n<=0?()=>cs.E:(0,er.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,a)=>n(i,a,r)):uo.y,wt(1),t?x(e):j(()=>new oo))}function Ps(n){return(0,er.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",Ci=Symbol("RouteTitle");class hs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hi(n){return new hs(n)}function la(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!B_(n[i],e[i]))return!1;return!0}function B_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function qp(n){return Array.prototype.concat.apply([],n)}function Uh(n){return n.length>0?n[n.length-1]:null}function qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function fo(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,un.D)(Promise.resolve(n)):at(n)}const zI={exact:function Zp(n,e,t){if(!go(n.segments,e.segments)||!po(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Zp(n.children[r],e.children[r],t))return!1;return!0},subset:Rl},Bh={exact:function jh(n,e){return Yr(n,e)},subset:function $c(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>B_(n[t],e[t]))},ignored:()=>!0};function j_(n,e,t){return zI[t.paths](n.root,e.root,t.matrixParams)&&Bh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Rl(n,e,t){return Wc(n,e,e.segments,t)}function Wc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!go(i,t)||e.hasChildren()||!po(i,t,r))}if(n.segments.length===t.length){if(!go(n.segments,t)||!po(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Rl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(go(n.segments,i)&&po(n.segments,i,r)&&n.children[Lt])&&Wc(n.children[Lt],e,a,r)}}function po(n,e,t){return e.every((r,i)=>Bh[t](n[i].parameters,r.parameters))}class tu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hi(this.queryParams)),this._queryParamMap}toString(){return Qp.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,qn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nu(this)}}class xl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hi(this.parameters)),this._parameterMap}toString(){return H_(this)}}function go(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Hh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new Mu},providedIn:"root"}),n})();class Mu{parse(e){const t=new p(e);return new tu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pl(e.root,!0)}`,r=function KI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${zc(t)}=${zc(i)}`).join("&"):`${zc(t)}=${zc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Wh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qp=new Mu;function Nu(n){return n.segments.map(e=>H_(e)).join("/")}function Pl(n,e){if(!n.hasChildren())return Nu(n);if(e){const t=n.children[Lt]?Pl(n.children[Lt],!1):"",r=[];return qn(n.children,(i,a)=>{a!==Lt&&r.push(`${a}:${Pl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Yp(n,e){let t=[];return qn(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),qn(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[Pl(n.children[Lt],!1)]:[`${i}:${Pl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Nu(n)}/${t[0]}`:`${Nu(n)}/(${t.join("//")})`}}function $h(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zc(n){return $h(n).replace(/%3B/gi,";")}function Ms(n){return $h(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mo(n){return decodeURIComponent(n)}function Gh(n){return mo(n.replace(/\+/g,"%20"))}function H_(n){return`${Ms(n.path)}${function qI(n){return Object.keys(n).map(e=>`;${Ms(e)}=${Ms(n[e])}`).join("")}(n.parameters)}`}const ZI=/^[^\/()?;=#]+/;function zh(n){const e=n.match(ZI);return e?e[0]:""}const qh=/^[^=?&#]+/,YI=/^[^&#]+/;class p{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Xt(e,t)),r}parseSegment(){const e=zh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new xl(mo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zh(this.remaining);i&&(r=i,this.capture(r))}e[mo(t)]=mo(r)}parseQueryParam(e){const t=function $_(n){const e=n.match(qh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function w(n){const e=n.match(YI);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Gh(t),a=Gh(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Lt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Lt]:new Xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function _(n){return n.segments.length>0?new Xt([],{[Lt]:n}):n}function E(n){const e={};for(const r of Object.keys(n.children)){const a=E(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function R(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function O(n){return n instanceof tu}function Yt(n,e,t,r,i){if(0===t.length)return $i(e.root,e.root,e.root,r,i);const a=function Zc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Kc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return qn(a.outlets,(g,v)=>{d[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new Kc(t,e,r)}(t);return a.toRoot()?$i(e.root,e.root,new Xt([],{}),r,i):function l(g){const v=function Kh(n,e,t,r){if(n.isAbsolute)return new nu(e.root,!0,0);if(-1===r)return new nu(t,t===e.root,0);return function Yc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new nu(r,!1,i-a)}(t,r+(mn(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,g),T=v.processChildren?ca(v.segmentGroup,v.index,a.commands):Nl(v.segmentGroup,v.index,a.commands);return $i(e.root,v.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function mn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ur(n){return"object"==typeof n&&null!=n&&n.outlets}function $i(n,e,t,r,i){let l,a={};r&&qn(r,(g,v)=>{a[v]=Array.isArray(g)?g.map(T=>`${T}`):`${g}`}),l=n===e?t:qc(n,e,t);const d=_(E(l));return new tu(d,a,i)}function qc(n,e,t){const r={};return qn(n.children,(i,a)=>{r[a]=i===e?t:qc(i,e,t)}),new Xt(n.segments,r)}class Kc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mn(r[0]))throw new m.vHH(4003,!1);const i=r.find(Ur);if(i&&i!==Uh(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Nl(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return ca(n,e,t);const r=function W_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(Ur(d))break;const g=`${d}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!eg(g,v,l))return a;r+=2}else{if(!eg(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Xt(n.segments.slice(0,r.pathIndex),{});return a.children[Lt]=new Xt(n.segments.slice(r.pathIndex),n.children),ca(a,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?On(n,e,t):r.match?ca(n,0,i):On(n,e,t)}function ca(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function Ml(n){return Ur(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return qn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Nl(n.children[l],e,a))}),qn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Xt(n.segments,i)}}function On(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ur(a)){const g=Jp(a.outlets);return new Xt(r,g)}if(0===i&&mn(t[0])){r.push(new xl(n.segments[e].path,QI(t[0]))),i++;continue}const l=Ur(a)?a.outlets[Lt]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&mn(d)?(r.push(new xl(l,QI(d))),i+=2):(r.push(new xl(l,{})),i++)}return new Xt(r,{})}function Jp(n){const e={};return qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=On(new Xt([],{}),0,t))}),e}function QI(n){const e={};return qn(n,(t,r)=>e[r]=`${t}`),e}function eg(n,e,t){return n==t.path&&Yr(e,t.parameters)}class da{constructor(e,t){this.id=e,this.url=t}}class G_ extends da{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kl extends da{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tg extends da{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class XI extends da{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cD extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CM extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bM extends da{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zh extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z_ extends da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JI{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nE{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ng{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class iE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Yh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rg(e,this._root).map(t=>t.value)}}function Yh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Yh(n,t);if(r)return r}return null}function rg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rg(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ns(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sE extends iE{constructor(e,t){super(e),this.snapshot=t,Qh(this,e)}toString(){return this.snapshot.toString()}}function ig(n,e){const t=function sg(n,e){const l=new fa([],{},{},"",{},Lt,e,null,n.root,-1,{});return new q_("",new ha(l,[]))}(n,e),r=new An([new xl("",{})]),i=new An({}),a=new An({}),l=new An({}),d=new An(""),g=new ku(r,i,l,d,a,Lt,e,t.root);return g.snapshot=t.root,new sE(new ha(g,[]),t)}class ku{constructor(e,t,r,i,a,l,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,st.U)(v=>v[Ci]))??at(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>Hi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>Hi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function og(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function ag(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fa{constructor(e,t,r,i,a,l,d,g,v,T,S,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.[Ci],this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=T,this._correctedLastPathIndex=P??T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class q_ extends iE{constructor(e,t){super(t),this.url=e,Qh(this,t)}toString(){return oE(this._root)}}function Qh(n,e){e.value._routerState=n,e.children.forEach(t=>Qh(n,t))}function oE(n){const e=n.children.length>0?` { ${n.children.map(oE).join(", ")} } `:"";return`${n.value}${e}`}function K_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yr(e.params,t.params)||n.params.next(t.params),function ho(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ug(n,e){const t=Yr(n.params,e.params)&&function Gc(n,e){return go(n,e)&&n.every((t,r)=>Yr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ug(n.parent,e.parent))}function Xh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function hD(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xh(n,r,i);return Xh(n,r)})}(n,e,t);return new ha(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>Xh(n,d)),l}}const r=function fD(n){return new ku(new An(n.url),new An(n.params),new An(n.queryParams),new An(n.fragment),new An(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Xh(n,a));return new ha(r,i)}}const Z_="ngNavigationCancelingError";function lg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=O(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=aE(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function aE(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Z_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Y_(n){return uE(n)&&O(n.url)}function uE(n){return n&&n[Z_]}class lE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new cg,this.attachRef=null}}let cg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dg=!1;let Ol=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,dg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,dg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,dg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,dg);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,g=new pD(t,d,i.injector);if(r&&function Xc(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,g)}else this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(cg),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class pD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ku?this.route:e===cg?this.childContexts:this.parent.get(e,t)}}let Ll=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Ol],encapsulation:2}),n})();function cE(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function J_(n){const e=n.children&&n.children.map(J_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=Ll),t}function ks(n){return n.outlet||Lt}function hg(n,e){const t=n.filter(r=>ks(r)===e);return t.push(...n.filter(r=>ks(r)!==e)),t}function fg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ey{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),K_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ns(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),qn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ns(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ns(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ns(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new rE(a.value.snapshot))}),e.children.length&&this.forwardEvent(new dD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(K_(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),K_(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=fg(i.snapshot),g=d?.get(m._Vd)??null;l.attachRef=null,l.route=i,l.resolver=g,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class mD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ty{constructor(e,t){this.component=e,this.route=t}}function RM(n,e,t){const r=n._root;return ef(r,e?e._root:null,t,[r.value])}function Jh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function ef(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ns(e);return n.children.forEach(l=>{(function fE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function ny(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!go(n.url,e.url);case"pathParamsOrQueryParamsChange":return!go(n.url,e.url)||!Yr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ug(n,e)||!Yr(n.queryParams,e.queryParams);default:return!ug(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new mD(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ef(n,e,a.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new ty(d.outlet.component,l))}else l&&Jc(e,d,i),i.canActivateChecks.push(new mD(r)),ef(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),qn(a,(l,d)=>Jc(l,t.getContext(d),i)),i}function Jc(n,e,t){const r=Ns(n),i=n.value;qn(r,(a,l)=>{Jc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new ty(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ed(n){return"function"==typeof n}function pg(n){return n instanceof oo||"EmptyError"===n?.name}const gg=Symbol("INITIAL_VALUE");function td(){return Gn(n=>Pu(n.map(e=>e.pipe(xn(1),aa(gg)))).pipe((0,st.U)(e=>{for(const t of e)if(!0!==t){if(t===gg)return gg;if(!1===t||t instanceof tu)return t}return!0}),b(e=>e!==gg),xn(1)))}function li(n){return(0,Al.z)((0,Ve.b)(e=>{if(O(e))throw lg(0,e)}),(0,st.U)(e=>!0===e))}const mg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _g(n,e,t,r,i){const a=Vr(n,e,t);return a.matched?function oy(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?at(i.map(l=>{const d=Jh(l,n);return fo(function yD(n){return n&&ed(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(td(),li()):at(!0)}(r=cE(e,r),e,t).pipe((0,st.U)(l=>!0===l?a:{...mg})):at(a)}function Vr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...mg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||la)(t,n,e);if(!i)return{...mg};const a={};qn(i.posParams,(d,g)=>{a[g]=d.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ou(n,e,t,r,i="corrected"){if(t.length>0&&function AD(n,e,t){return t.some(r=>yg(n,e,r)&&ks(r)!==Lt)}(n,t,r)){const l=new Xt(e,function SD(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ks(a)!==Lt){const l=new Xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ks(a)]=l}return i}(n,e,r,new Xt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function _E(n,e,t){return t.some(r=>yg(n,e,r))}(n,t,r)){const l=new Xt(n.segments,function mE(n,e,t,r,i,a){const l={};for(const d of r)if(yg(n,t,d)&&!i[ks(d)]){const g=new Xt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[ks(d)]=g}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Xt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function yg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ay(n,e,t,r){return!!(ks(n)===r||r!==Lt&&yg(e,t,n))&&("**"===n.path||Vr(e,n,t).matched)}function yE(n,e,t){return 0===e.length&&!n.children[t]}const nf=!1;class vg{constructor(e){this.segmentGroup=e||null}}class vE{constructor(e){this.urlTree=e}}function rf(n){return Zr(new vg(n))}function wE(n){return Zr(new vE(n))}class xD{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Ou(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,st.U)(a=>this.createUrlTree(E(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(lt(a=>{if(a instanceof vE)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof vg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,st.U)(i=>this.createUrlTree(E(i),e.queryParams,e.fragment))).pipe(lt(i=>{throw i instanceof vg?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,nf)}createUrlTree(e,t,r){const i=_(e);return new tu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(a=>new Xt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,un.D)(i).pipe(Re(a=>{const l=r.children[a],d=hg(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,st.U)(g=>({segment:g,outlet:a})))}),Mt((a,l)=>(a[l.outlet]=l.segment,a),{}),zn())}expandSegment(e,t,r,i,a,l){return(0,un.D)(r).pipe(Re(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(lt(v=>{if(v instanceof vg)return at(null);throw v}))),oe(d=>!!d),lt((d,g)=>{if(pg(d))return yE(t,i,a)?at(new Xt([],{})):rf(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return ay(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):rf(t):rf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wE(a):this.lineralizeSegments(r,a).pipe((0,D.z)(l=>{const d=new Xt(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:g,remainingSegments:v,positionalParamSegments:T}=Vr(t,i,a);if(!d)return rf(t);const S=this.applyRedirectCommands(g,i.redirectTo,T);return i.redirectTo.startsWith("/")?wE(S):this.lineralizeSegments(i,S).pipe((0,D.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=cE(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,st.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Xt(i,{})))):at(new Xt(i,{}))):_g(t,r,i,e).pipe(Gn(({matched:l,consumedSegments:d,remainingSegments:g})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,D.z)(T=>{const S=T.injector??e,P=T.routes,{segmentGroup:V,slicedSegments:G}=Ou(t,d,g,P),ce=new Xt(V.segments,V.children);if(0===G.length&&ce.hasChildren())return this.expandChildren(S,P,ce).pipe((0,st.U)(ut=>new Xt(d,ut)));if(0===P.length&&0===G.length)return at(new Xt(d,{}));const ye=ks(r)===a;return this.expandSegment(S,ce,P,G,ye?Lt:a,!0).pipe((0,st.U)(dt=>new Xt(d.concat(dt.segments),dt.children)))})):rf(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function DD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?at(!0):at(i.map(l=>{const d=Jh(l,n);return fo(function ry(n){return n&&ed(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(td(),li())}(e,t,r).pipe((0,D.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ve.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function nd(n){return Zr(aE(nf,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Lt])return Zr(new m.vHH(4e3,nf));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new tu(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return qn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return qn(t.children,(d,g)=>{l[g]=this.createSegmentGroup(e,d,r,i)}),new Xt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,nf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class MM{}class pa{constructor(e,t,r,i,a,l,d,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=g}recognize(){const e=Ou(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,st.U)(t=>{if(null===t)return null;const r=new fa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ha(r,t),a=new q_(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=og(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,un.D)(Object.keys(r.children)).pipe(Re(i=>{const a=r.children[i],l=hg(t,i);return this.processSegmentGroup(e,l,a,i)}),Mt((i,a)=>i&&a?(i.push(...a),i):null),function _r(n,e=!1){return(0,er.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),x(null),zn(),(0,st.U)(i=>{if(null===i)return null;const a=dy(i);return function ly(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,un.D)(t).pipe(Re(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),oe(l=>!!l),lt(l=>{if(pg(l))return yE(r,i,a)?at([]):at(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!ay(t,r,i,a))return at(null);let l;if("**"===t.path){const d=i.length>0?Uh(i).parameters:{},g=EE(r)+i.length;l=at({snapshot:new fa(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wg(t),ks(t),t.component??t._loadedComponent??null,t,rd(r),g,Ig(t),g),consumedSegments:[],remainingSegments:[]})}else l=_g(r,t,i,e).pipe((0,st.U)(({matched:d,consumedSegments:g,remainingSegments:v,parameters:T})=>{if(!d)return null;const S=EE(r)+g.length;return{snapshot:new fa(g,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wg(t),ks(t),t.component??t._loadedComponent??null,t,rd(r),S,Ig(t),S),consumedSegments:g,remainingSegments:v}}));return l.pipe(Gn(d=>{if(null===d)return at(null);const{snapshot:g,consumedSegments:v,remainingSegments:T}=d;e=t._injector??e;const S=t._loadedInjector??e,P=function cy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:G}=Ou(r,v,T,P.filter(ye=>void 0===ye.redirectTo),this.relativeLinkResolution);if(0===G.length&&V.hasChildren())return this.processChildren(S,P,V).pipe((0,st.U)(ye=>null===ye?null:[new ha(g,ye)]));if(0===P.length&&0===G.length)return at([new ha(g,[])]);const ce=ks(t)===a;return this.processSegment(S,P,V,G,ce?Lt:a).pipe((0,st.U)(ye=>null===ye?null:[new ha(g,ye)]))}))}}function MD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function dy(n){const e=[],t=new Set;for(const r of n){if(!MD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=dy(r.children);e.push(new ha(r.value,i))}return e.filter(r=>!t.has(r))}function rd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function EE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function wg(n){return n.data||{}}function Ig(n){return n.resolve||{}}function Eg(n){return"string"==typeof n.title||null===n.title}function fy(n){return Gn(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,st.U)(()=>e)):at(e)})}let DE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[Ci]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(SE)},providedIn:"root"}),n})(),SE=(()=>{class n extends DE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Vi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class OD{}class AE extends class LD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const sf=new m.OlP("",{providedIn:"root",factory:()=>({})}),gy=new m.OlP("ROUTES");let my=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=fo(t.loadComponent()).pipe((0,Ve.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Ps(()=>{this.componentLoaders.delete(t)})),i=new ds(r,()=>new Kr.x).pipe(co());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,st.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,v,T=!1;Array.isArray(d)?v=d:(g=d.create(t).injector,v=qp(g.get(gy,[],m.XFs.Self|m.XFs.Optional)));return{routes:v.map(J_),injector:g}}),Ps(()=>{this.childrenLoaders.delete(r)})),l=new ds(a,()=>new Kr.x).pipe(co());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return fo(t()).pipe((0,D.z)(r=>r instanceof m.YKP||Array.isArray(r)?at(r):(0,un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class RE{}class xE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function PE(n){throw n}function ME(n,e,t){return e.parse("/")}const FD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function NE(){const n=(0,m.f3M)(Hh),e=(0,m.f3M)(cg),t=(0,m.f3M)(Le),r=(0,m.f3M)(m.zs3),i=(0,m.f3M)(m.Sil),a=(0,m.f3M)(gy,{optional:!0})??[],l=(0,m.f3M)(sf,{optional:!0})??{},d=(0,m.f3M)(SE),g=(0,m.f3M)(DE,{optional:!0}),v=(0,m.f3M)(RE,{optional:!0}),T=(0,m.f3M)(OD,{optional:!0}),S=new br(null,n,e,t,r,i,qp(a));return v&&(S.urlHandlingStrategy=v),T&&(S.routeReuseStrategy=T),S.titleStrategy=g??d,function bg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let br=(()=>{class n{constructor(t,r,i,a,l,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kr.x,this.errorHandler=PE,this.malformedUriErrorHandler=ME,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new xE,this.routeReuseStrategy=new AE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(my),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new eE(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new JI(P)),this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const S=l.get(m.R0b);this.isNgZoneEnabled=S instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Kp(){return new tu(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ig(this.currentUrlTree,this.rootComponentType),this.transitions=new An({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(b(i=>0!==i.id),(0,st.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Gn(i=>{let a=!1,l=!1;return at(i).pipe((0,Ve.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Gn(d=>{const g=this.browserUrlTree.toString(),v=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return _y(d.source)&&(this.browserUrlTree=d.extractedUrl),at(d).pipe(Gn(S=>{const P=this.transitions.getValue();return r.next(new G_(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?cs.E:Promise.resolve(S)}),function PD(n,e,t,r){return Gn(i=>function ru(n,e,t,r,i){return new xD(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,st.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ve.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function bE(n,e,t,r,i,a){return(0,D.z)(l=>function NM(n,e,t,r,i,a,l="emptyOnly",d="legacy"){return new pa(n,e,t,r,i,l,d,a).recognize().pipe(Gn(g=>null===g?function IE(n){return new Cr.y(e=>e.error(n))}(new MM):at(g)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,st.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ve.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new cD(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:G,restoredState:ce,extras:ye}=d,ot=new G_(P,this.serializeUrl(V),G,ce);r.next(ot);const dt=ig(V,this.rootComponentType).snapshot;return at(i={...d,targetSnapshot:dt,urlAfterRedirects:V,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),cs.E}),(0,Ve.b)(d=>{const g=new CM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,st.U)(d=>i={...d,guards:RM(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function wD(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?at({...t,guardsResult:!0}):function ID(n,e,t,r){return(0,un.D)(n).pipe((0,D.z)(i=>function TD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(d=>{const g=fg(e)??i,v=Jh(d,g);return fo(function tf(n){return n&&ed(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(oe())})).pipe(td()):at(!0)}(i.component,i.route,t,e,r)),oe(i=>!0!==i,!0))}(l,r,i,n).pipe((0,D.z)(d=>d&&function pE(n){return"boolean"==typeof n}(d)?function sy(n,e,t,r){return(0,un.D)(e).pipe(Re(i=>oa(function CD(n,e){return null!==n&&e&&e(new tE(n)),at(!0)}(i.route.parent,r),function ED(n,e){return null!==n&&e&&e(new nE(n)),at(!0)}(i.route,r),function gE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function xM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>lo(()=>at(l.guards.map(g=>{const v=fg(l.node)??t,T=Jh(g,v);return fo(function iy(n){return n&&ed(n.canActivateChild)}(T)?T.canActivateChild(r,n):v.runInContext(()=>T(r,n))).pipe(oe())})).pipe(td())));return at(a).pipe(td())}(n,i.path,t),function bD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>lo(()=>{const l=fg(e)??t,d=Jh(a,l);return fo(function _D(n){return n&&ed(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(oe())}));return at(i).pipe(td())}(n,i.route,t))),oe(i=>!0!==i,!0))}(r,a,n,e):at(d)),(0,st.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ve.b)(d=>{if(i.guardsResult=d.guardsResult,O(d.guardsResult))throw lg(0,d.guardsResult);const g=new bM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),b(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),fy(d=>{if(d.guards.canActivateChecks.length)return at(d).pipe((0,Ve.b)(g=>{const v=new Zh(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),Gn(g=>{let v=!1;return at(g).pipe(function kM(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,un.D)(i).pipe(Re(l=>function id(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Eg(i)&&(a[Ci]=i.title),function hy(n,e,t,r){const i=function TE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return at({});const a={};return(0,un.D)(i).pipe((0,D.z)(l=>function kD(n,e,t,r){const i=fg(e)??r,a=Jh(n,i);return fo(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(oe(),(0,Ve.b)(d=>{a[l]=d}))),wt(1),function ua(n){return(0,st.U)(()=>n)}(a),lt(l=>pg(l)?cs.E:Zr(l)))}(a,n,e,r).pipe((0,st.U)(l=>(n._resolvedData=l,n.data=og(n,t).resolve,i&&Eg(i)&&(n.data[Ci]=i.title),null)))}(l.route,r,n,e)),(0,Ve.b)(()=>a++),wt(1),(0,D.z)(l=>a===i.length?at(t):cs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ve.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Ve.b)(g=>{const v=new z_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),fy(d=>{const g=v=>{const T=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Ve.b)(S=>{v.component=S}),(0,st.U)(()=>{})));for(const S of v.children)T.push(...g(S));return T};return Pu(g(d.targetSnapshot.root)).pipe(x(),xn(1))}),fy(()=>this.afterPreactivation()),(0,st.U)(d=>{const g=function Qc(n,e,t){const r=Xh(n,e._root,t?t._root:void 0);return new sE(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:g}}),(0,Ve.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new ey(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ve.b)({next(){a=!0},complete(){a=!0}}),Ps(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),lt(d=>{if(l=!0,uE(d)){Y_(d)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new tg(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(g),Y_(d)){const v=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_y(i.source)};this.scheduleNavigation(v,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new XI(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(d))}catch(v){i.reject(v)}}return cs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(J_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:g}=r,v=i||this.routerState.root,T=g?this.currentUrlTree.fragment:l;let S=null;switch(d){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Yt(v,this.currentUrlTree,t,S,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=O(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function kE(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...FD}:!1===r?{...LM}:r,O(t))return j_(this.currentUrlTree,t,i);const a=this.parseUrl(t);return j_(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new kl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let d,g,v;l?(d=l.resolve,g=l.reject,v=l.promise):v=new Promise((P,V)=>{d=P,g=V});const T=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:T,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new tg(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return NE()},providedIn:"root"}),n})();function _y(n){return"imperative"!==n}let sd=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Kr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(br),m.Y36(ku),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})();class yy{}let vy=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(b(t=>t instanceof kl),Re(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,d=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,un.D)(i).pipe((0,sa.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const a=i.pipe((0,D.z)(l=>null===l?at(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,un.D)([a,l]).pipe((0,sa.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(br),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(yy),m.LFG(my))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fl=new m.OlP("");let LE=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof G_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ng&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ng(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Ul(n,e){return{\u0275kind:n,\u0275providers:e}}function uf(n){return[{provide:gy,multi:!0,useValue:n}]}function BD(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(br),i=n.get(wy);1===n.get(Iy)&&r.initialNavigation(),n.get(Os,null,m.XFs.Optional)?.setUpPreloading(),n.get(Fl,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const wy=new m.OlP("",{factory:()=>new Kr.x}),Iy=new m.OlP("",{providedIn:"root",factory:()=>1});const Os=new m.OlP("");function $D(n){return Ul(0,[{provide:Os,useExisting:vy},{provide:yy,useExisting:n}])}const VE=new m.OlP("ROUTER_FORROOT_GUARD"),GD=[Le,{provide:Hh,useClass:Mu},{provide:br,useFactory:NE},cg,{provide:ku,useFactory:function FE(n){return n.routerState.root},deps:[br]},my];function BE(){return new m.PXZ("Router",br)}let jE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[GD,[],uf(t),{provide:VE,useFactory:HE,deps:[[br,new m.FiY,new m.tp0]]},{provide:sf,useValue:r||{}},r?.useHash?{provide:Ee,useClass:Ze}:{provide:Ee,useClass:Qe},{provide:Fl,useFactory:()=>{const n=(0,m.f3M)(br),e=(0,m.f3M)(bc),t=(0,m.f3M)(sf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new LE(n,e,t)}},r?.preloadingStrategy?$D(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:BE},r?.initialNavigation?$E(r):[],[{provide:Ey,useFactory:BD},{provide:m.tb,multi:!0,useExisting:Ey}]]}}static forChild(t){return{ngModule:n,providers:[uf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(VE,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Ll]}),n})();function HE(n){return"guarded"}function $E(n){return["disabled"===n.initialNavigation?Ul(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(br);return()=>{e.setUpLocationChangeListener()}}},{provide:Iy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ul(2,[{provide:Iy,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(br),d=e.get(wy);(function i(a){e.get(br).events.pipe(b(d=>d instanceof kl||d instanceof tg||d instanceof XI),(0,st.U)(d=>d instanceof kl||d instanceof tg&&(0===d.code||1===d.code)&&null),b(d=>null!==d),xn(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||d.closed?at(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const Ey=new m.OlP("");let WE={warnLogin:{severity:"warn",summary:"Warn",detail:"Efetue o Login"}};var ZD=F(8247),L=F(2090),bi=F(9681),_o=F(1877),ma=F(4859),Rg=F(6451),lf=F(5363),Vl=F(6063);class YD extends Kr.x{constructor(e=1/0,t=1/0,r=Vl.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)d=g;d&&r.splice(0,d+1)}}}var xg=F(3099);function Pg(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,xg.B)({connector:()=>new YD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function GE(n,e){return(0,Rs.m)(e)?Gn(()=>n,e):Gn(()=>n)}var zE=F(9468),In=F(5813),Br=F(2011);F(5867);var Ie=F(5861);const df=new Map,tS={activated:!1,tokenObservers:[]},Ty={initialized:!1,enabled:!1};function Qr(n){return df.get(n)||Object.assign({},tS)}function iu(){return Ty}class Sy{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function su(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ci=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function rS(n){if(!Qr(n).activated)throw ci.create("use-before-activation",{appName:n.name})}function ud(n,e){return ld.apply(this,arguments)}function ld(){return(ld=(0,Ie.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const d={method:"POST",body:JSON.stringify(e),headers:a};let g,v;try{g=yield fetch(n,d)}catch(V){throw ci.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==g.status)throw ci.create("fetch-status-error",{httpStatus:g.status});try{v=yield g.json()}catch(V){throw ci.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const T=v.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(T[1]),P=Date.now();return{token:v.token,expireTimeMillis:P+S,issuedAtTimeMillis:P}})).apply(this,arguments)}function My(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const hf="firebase-app-check-store";let Og=null;function Ny(){return Og||(Og=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(ci.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(hf,{keyPath:"compositeKey"})}}catch(r){e(ci.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Og)}function Oy(){return(Oy=(0,Ie.Z)(function*(n,e){const r=(yield Ny()).transaction(hf,"readwrite"),a=r.objectStore(hf).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var v;d(ci.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Fg=new _o.Yd("@firebase/app-check");function e0(n,e){return(0,L.hl)()?function sS(n,e){return function ky(n,e){return Oy.apply(this,arguments)}(function oS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aS(){return iu().enabled}function uS(){return _a.apply(this,arguments)}function _a(){return(_a=(0,Ie.Z)(function*(){const n=iu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const lS={error:"UNKNOWN_ERROR"};function n0(n){return L.US.encodeString(JSON.stringify(n),!1)}function cd(n){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,Ie.Z)(function*(n,e=!1){const t=n.app;rS(t);const r=Qr(t);let a,i=r.token;if(i&&!dd(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(dd(g)?i=g:yield e0(t,void 0))}if(!e&&i&&dd(i))return{token:i.token};let d,l=!1;if(aS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ud(My(t,yield uS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield e0(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Qr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?Fg.warn(g.message):Fg.error(g),a=g}return i?a?d=dd(i)?{token:i.token,internalError:a}:Uy(a):(d={token:i.token},r.token=i,yield e0(t,i)):d=Uy(a),l&&s0(t,d),d})).apply(this,arguments)}function Fy(n,e){const t=Qr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ou(n){const{app:e}=n,t=Qr(e);let r=t.tokenRefresher;r||(r=function r0(n){const{app:e}=n;return new Sy((0,Ie.Z)(function*(){let r;if(r=Qr(e).token?yield cd(n,!0):yield cd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function s0(n,e){const t=Qr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function dd(n){return n.expireTimeMillis-Date.now()>0}function Uy(n){return{token:n0(lS),error:n}}class cS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qr(this.app);for(const t of e)Fy(this.app,t.next);return Promise.resolve()}}const zy="app-check-internal";!function pS(){(0,bi._registerComponent)(new ma.wA("app-check",n=>function dS(n,e){return new cS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zy).initialize()})),(0,bi._registerComponent)(new ma.wA(zy,n=>function Vg(n){return{getToken:e=>cd(n,e),addTokenListener:e=>function ff(n,e,t,r){const{app:i}=n,a=Qr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&dd(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),ou(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ou(n))}(n,"INTERNAL",e),removeTokenListener:e=>Fy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,bi.registerVersion)("@firebase/app-check","0.5.17")}();class pd{constructor(){return(0,In.vb)("app-check")}}typeof window<"u"&&window;var Gg=F(127);const Zy=new m.OlP("angularfire2.auth.use-emulator"),Yy=new m.OlP("angularfire2.auth.settings"),gd=new m.OlP("angularfire2.auth.tenant-id"),gf=new m.OlP("angularfire2.auth.langugage-code"),md=new m.OlP("angularfire2.auth.use-device-language"),f0=new m.OlP("angularfire.auth.persistence"),mf=(n,e,t,r,i,a,l,d)=>(0,Br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[v,T]of Object.entries(l))g.settings[v]=T;return d&&g.setPersistence(d),g},[t,r,i,a,l,d]);let zg=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S,P,V){const G=new Kr.x,ce=at(void 0).pipe((0,lf.Q)(l.outsideAngular),Gn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,st.U)(()=>(0,Br.on)(t,a,r)),(0,st.U)(ye=>mf(ye,a,d,v,T,S,g,P)),Pg({bufferSize:1,refCount:!1}));if(Lo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ce.pipe(oe()).subscribe();const ot=ce.pipe(Gn(ft=>ft.getRedirectResult().then(Rt=>Rt,()=>null)),In.iC,Pg({bufferSize:1,refCount:!1})),dt=ce.pipe(Gn(ft=>new Cr.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(jt=>Rt.next(jt),jt=>Rt.error(jt),()=>Rt.complete()))})))),ut=ce.pipe(Gn(ft=>new Cr.y(Rt=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(jt=>Rt.next(jt),jt=>Rt.error(jt),()=>Rt.complete()))}))));this.authState=ot.pipe(GE(dt),(0,zE.R)(l.outsideAngular),(0,lf.Q)(l.insideAngular)),this.user=ot.pipe(GE(ut),(0,zE.R)(l.outsideAngular),(0,lf.Q)(l.insideAngular)),this.idToken=this.user.pipe(Gn(ft=>ft?(0,un.D)(ft.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Gn(ft=>ft?(0,un.D)(ft.getIdTokenResult()):at(null))),this.credential=(0,Rg.T)(ot,G,this.authState.pipe(b(ft=>!ft))).pipe((0,st.U)(ft=>ft?.user?ft:null),(0,zE.R)(l.outsideAngular),(0,lf.Q)(l.insideAngular))}return(0,Br.pX)(this,ce,a,{spy:{apply:(ye,ot,dt)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&dt.then(ut=>G.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Br.Dh),m.LFG(Br.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(In.HU),m.LFG(Zy,8),m.LFG(Yy,8),m.LFG(gd,8),m.LFG(gf,8),m.LFG(md,8),m.LFG(f0,8),m.LFG(pd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),p0=(()=>{class n{constructor(){Gg.Z.registerVersion("angularfire",In.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[zg]}),n})(),_d=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r}googleLogin(){return this.afAuth.signInWithPopup(new ZD.Q).then(t=>{localStorage[n.tokenKey]=t.credential.accessToken,localStorage[n.userUidKey]=t?.user?.uid,this.router.navigate([""])}).catch(t=>{this.router.navigate(["/login"])})}logout(){return localStorage.removeItem(n.tokenKey),localStorage.removeItem(n.userUidKey),this.afAuth.signOut()}}return n.tokenKey="userToken",n.userUidKey="userUid",n.\u0275fac=function(t){return new(t||n)(m.LFG(zg),m.LFG(br))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uu(n,e){return{type:7,name:n,definitions:e,options:{}}}function _f(n,e=null){return{type:4,styles:e,timings:n}}function m0(n){return{type:6,styles:n,offset:null}}function y0(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}let di=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),DS=(()=>{class n{constructor(){this.messageSource=new Kr.x,this.clearSource=new Kr.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(t){t&&this.messageSource.next(t)}addAll(t){t&&t.length&&this.messageSource.next(t)}clear(t){this.clearSource.next(t||null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Zg=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[di.STARTS_WITH,di.CONTAINS,di.NOT_CONTAINS,di.ENDS_WITH,di.EQUALS,di.NOT_EQUALS],numeric:[di.EQUALS,di.NOT_EQUALS,di.LESS_THAN,di.LESS_THAN_OR_EQUAL_TO,di.GREATER_THAN,di.GREATER_THAN_OR_EQUAL_TO],date:[di.DATE_IS,di.DATE_IS_NOT,di.DATE_BEFORE,di.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Kr.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vd=(()=>{class n{constructor(t){this.template=t}getType(){return this.name}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),Wi=(()=>{class n{static addClass(t,r){t&&r&&(t.classList?t.classList.add(r):t.className+=" "+r)}static addMultipleClasses(t,r){if(t&&r)if(t.classList){let i=r.trim().split(" ");for(let a=0;a<i.length;a++)t.classList.add(i[a])}else{let i=r.split(" ");for(let a=0;a<i.length;a++)t.className+=" "+i[a]}}static removeClass(t,r){t&&r&&(t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,r){return!(!t||!r)&&(t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return t?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,i=0;for(var a=0;a<r.length;a++){if(r[a]==t)return i;1==r[a].nodeType&&i++}return-1}static indexWithinGroup(t,r){let i=t.parentNode?t.parentNode.childNodes:[],a=0;for(var l=0;l<i.length;l++){if(i[l]==t)return a;i[l].attributes&&i[l].attributes[r]&&1==i[l].nodeType&&a++}return-1}static appendOverlay(t,r,i="self"){"self"!==i&&t&&r&&this.appendChild(t,r)}static alignOverlay(t,r,i="self",a=!0){t&&r&&(a&&(t.style.minWidth||(t.style.minWidth=n.getOuterWidth(r)+"px")),"self"===i?this.relativePosition(t,r):this.absolutePosition(t,r))}static relativePosition(t,r){const i=ce=>{if(ce)return"relative"===getComputedStyle(ce).getPropertyValue("position")?ce:i(ce.parentElement)},a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),l=r.offsetHeight,d=r.getBoundingClientRect(),g=this.getWindowScrollTop(),v=this.getWindowScrollLeft(),T=this.getViewport(),P=i(t)?.getBoundingClientRect()||{top:-1*g,left:-1*v};let V,G;d.top+l+a.height>T.height?(V=d.top-P.top-a.height,t.style.transformOrigin="bottom",d.top+V<0&&(V=-1*d.top)):(V=l+d.top-P.top,t.style.transformOrigin="top"),G=a.width>T.width?-1*(d.left-P.left):d.left-P.left+a.width>T.width?-1*(d.left-P.left+a.width-T.width):d.left-P.left,t.style.top=V+"px",t.style.left=G+"px"}static absolutePosition(t,r){const i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),a=i.height,l=i.width,d=r.offsetHeight,g=r.offsetWidth,v=r.getBoundingClientRect(),T=this.getWindowScrollTop(),S=this.getWindowScrollLeft(),P=this.getViewport();let V,G;v.top+d+a>P.height?(V=v.top+T-a,t.style.transformOrigin="bottom",V<0&&(V=T)):(V=d+v.top+T,t.style.transformOrigin="top"),G=v.left+l>P.width?Math.max(0,v.left+S+g-l):v.left+S,t.style.top=V+"px",t.style.left=G+"px"}static getParents(t,r=[]){return null===t.parentNode?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let i=this.getParents(t);const a=/(auto|scroll)/,l=d=>{let g=window.getComputedStyle(d,null);return a.test(g.getPropertyValue("overflow"))||a.test(g.getPropertyValue("overflowX"))||a.test(g.getPropertyValue("overflowY"))};for(let d of i){let g=1===d.nodeType&&d.dataset.scrollselectors;if(g){let v=g.split(",");for(let T of v){let S=this.findSingle(d,T);S&&l(S)&&r.push(S)}}9!==d.nodeType&&l(d)&&r.push(d)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let i=getComputedStyle(t).getPropertyValue("borderTopWidth"),a=i?parseFloat(i):0,l=getComputedStyle(t).getPropertyValue("paddingTop"),d=l?parseFloat(l):0,g=t.getBoundingClientRect(),T=r.getBoundingClientRect().top+document.body.scrollTop-(g.top+document.body.scrollTop)-a-d,S=t.scrollTop,P=t.clientHeight,V=this.getOuterHeight(r);T<0?t.scrollTop=S+T:T+V>P&&(t.scrollTop=S+T-P+V)}static fadeIn(t,r){t.style.opacity=0;let i=+new Date,a=0,l=function(){a=+t.style.opacity.replace(",",".")+((new Date).getTime()-i)/r,t.style.opacity=a,i=+new Date,+a<1&&(window.requestAnimationFrame&&requestAnimationFrame(l)||setTimeout(l,16))};l()}static fadeOut(t,r){var i=1,d=50/r;let g=setInterval(()=>{(i-=d)<=0&&(i=0,clearInterval(g)),t.style.opacity=i},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(l){return-1!==[].indexOf.call(document.querySelectorAll(l),this)}).call(t,r)}static getOuterWidth(t,r){let i=t.offsetWidth;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginLeft)+parseFloat(a.marginRight)}return i}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(t,r){let i=t.offsetHeight;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginTop)+parseFloat(a.marginBottom)}return i}static getHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let t=window,r=document,i=r.documentElement,a=r.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||a.clientWidth,height:t.innerHeight||i.clientHeight||a.clientHeight}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let i=t.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot append "+r+" to "+t;r.el.nativeElement.appendChild(t)}}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot remove "+t+" from "+r;r.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,i){t[r].apply(t,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,r){t&&document.activeElement!==t&&t.focus(r)}static getFocusableElements(t){let r=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),i=[];for(let a of r)"none"!=getComputedStyle(a).display&&"hidden"!=getComputedStyle(a).visibility&&i.push(a);return i}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,r){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:const i=typeof t;if("string"===i)return document.querySelector(t);if("object"===i&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const l=(d=t)&&d.constructor&&d.call&&d.apply?t():t;return l&&9===l.nodeType||this.isExist(l)?l:null}var d}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})(),wd=(()=>{class n{constructor(t,r,i){this.el=t,this.zone=r,this.config=i}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let r=this.getInk();if(!r||"none"===getComputedStyle(r,null).display)return;if(Wi.removeClass(r,"p-ink-active"),!Wi.getHeight(r)&&!Wi.getWidth(r)){let d=Math.max(Wi.getOuterWidth(this.el.nativeElement),Wi.getOuterHeight(this.el.nativeElement));r.style.height=d+"px",r.style.width=d+"px"}let i=Wi.getOffset(this.el.nativeElement),a=t.pageX-i.left+document.body.scrollTop-Wi.getWidth(r)/2,l=t.pageY-i.top+document.body.scrollLeft-Wi.getHeight(r)/2;r.style.top=l+"px",r.style.left=a+"px",Wi.addClass(r,"p-ink-active"),this.timeout=setTimeout(()=>{let d=this.getInk();d&&Wi.removeClass(d,"p-ink-active")},401)}getInk(){for(let t=0;t<this.el.nativeElement.children.length;t++)if(-1!==this.el.nativeElement.children[t].className.indexOf("p-ink"))return this.el.nativeElement.children[t];return null}resetInk(){let t=this.getInk();t&&Wi.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),Wi.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),Wi.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(Zg,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),Xr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[ll]}),n})();function Bl(n,e){if(1&n&&m._UZ(0,"span",11),2&n){const t=m.oxw(2).$implicit;m.Q6J("innerHTML",t.summary,m.oJD)}}function Yg(n,e){if(1&n&&m._UZ(0,"span",12),2&n){const t=m.oxw(2).$implicit;m.Q6J("innerHTML",t.detail,m.oJD)}}function Ls(n,e){if(1&n&&(m.ynx(0),m.YNc(1,Bl,1,1,"span",9),m.YNc(2,Yg,1,1,"span",10),m.BQk()),2&n){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",t.summary),m.xp6(1),m.Q6J("ngIf",t.detail)}}function Xy(n,e){if(1&n&&(m.TgZ(0,"span",15),m._uU(1),m.qZA()),2&n){const t=m.oxw(2).$implicit;m.xp6(1),m.Oqu(t.summary)}}function Id(n,e){if(1&n&&(m.TgZ(0,"span",16),m._uU(1),m.qZA()),2&n){const t=m.oxw(2).$implicit;m.xp6(1),m.Oqu(t.detail)}}function Ed(n,e){if(1&n&&(m.YNc(0,Xy,2,1,"span",13),m.YNc(1,Id,2,1,"span",14)),2&n){const t=m.oxw().$implicit;m.Q6J("ngIf",t.summary),m.xp6(1),m.Q6J("ngIf",t.detail)}}function Cd(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"button",17),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().index,a=m.oxw(2);return m.KtG(a.removeMessage(i))}),m._UZ(1,"i",18),m.qZA()}}const bd=function(n,e){return{showTransitionParams:n,hideTransitionParams:e}},Td=function(n){return{value:"visible",params:n}},Dd=function(n,e,t,r){return{"pi-info-circle":n,"pi-check":e,"pi-exclamation-triangle":t,"pi-times-circle":r}};function Sd(n,e){if(1&n&&(m.TgZ(0,"div",4)(1,"div",5),m._UZ(2,"span",6),m.YNc(3,Ls,3,2,"ng-container",1),m.YNc(4,Ed,2,2,"ng-template",null,7,m.W1O),m.YNc(6,Cd,2,0,"button",8),m.qZA()()),2&n){const t=e.$implicit,r=m.MAs(5),i=m.oxw(2);m.Tol("p-message p-message-"+t.severity),m.Q6J("@messageAnimation",m.VKq(12,Td,m.WLB(9,bd,i.showTransitionOptions,i.hideTransitionOptions))),m.xp6(2),m.Tol("p-message-icon pi"+(t.icon?" "+t.icon:"")),m.Q6J("ngClass",m.l5B(14,Dd,"info"===t.severity,"success"===t.severity,"warn"===t.severity,"error"===t.severity)),m.xp6(1),m.Q6J("ngIf",!i.escape)("ngIfElse",r),m.xp6(3),m.Q6J("ngIf",i.closable)}}function Ad(n,e){if(1&n&&(m.ynx(0),m.YNc(1,Sd,7,19,"div",3),m.BQk()),2&n){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.value)}}function Rd(n,e){1&n&&m.GkF(0)}function I0(n,e){if(1&n&&(m.TgZ(0,"div",19)(1,"div",5),m.YNc(2,Rd,1,0,"ng-container",20),m.qZA()()),2&n){const t=m.oxw();m.Q6J("ngClass","p-message p-message-"+t.severity),m.xp6(2),m.Q6J("ngTemplateOutlet",t.contentTemplate)}}let E0=(()=>{class n{constructor(t,r,i){this.messageService=t,this.el=r,this.cd=i,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new m.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(t=>{if(t){if(t instanceof Array){let r=t.filter(i=>this.key===i.key);this.value=this.value?[...this.value,...r]:[...r]}else this.key===t.key&&(this.value=this.value?[...this.value,t]:[t]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(t=>{t?this.key===t&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let t=this.el.nativeElement.parentElement;return!(!t||!t.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(t){this.value=this.value.filter((r,i)=>i!==t),this.valueChange.emit(this.value)}get icon(){const t=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(t){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(DS,8),m.Y36(m.SBq),m.Y36(m.sBO))},n.\u0275cmp=m.Xpm({type:n,selectors:[["p-messages"]],contentQueries:function(t,r,i){if(1&t&&m.Suo(i,vd,4),2&t){let a;m.iGM(a=m.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(t,r){if(1&t&&(m.TgZ(0,"div",0),m.YNc(1,Ad,2,1,"ng-container",1),m.YNc(2,I0,3,2,"ng-template",null,2,m.W1O),m.qZA()),2&t){const i=m.MAs(3);m.Tol(r.styleClass),m.Q6J("ngStyle",r.style),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate)("ngIfElse",i)}},dependencies:[dn,Cs,Bn,Xs,Na,wd],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[uu("messageAnimation",[y0(":enter",[m0({opacity:0,transform:"translateY(-25%)"}),_f("{{showTransitionParams}}")]),y0(":leave",[_f("{{hideTransitionParams}}",m0({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),n})(),C0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[ll,Xr]}),n})();function b0(n,e){1&n&&m.GkF(0)}const T0=function(n,e,t,r){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":e,"p-button-icon-top":t,"p-button-icon-bottom":r}};function D0(n,e){if(1&n&&m._UZ(0,"span",4),2&n){const t=m.oxw();m.Tol(t.loading?"p-button-loading-icon "+t.loadingIcon:t.icon),m.Q6J("ngClass",m.l5B(4,T0,"left"===t.iconPos&&t.label,"right"===t.iconPos&&t.label,"top"===t.iconPos&&t.label,"bottom"===t.iconPos&&t.label)),m.uIk("aria-hidden",!0)}}function S0(n,e){if(1&n&&(m.TgZ(0,"span",5),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.uIk("aria-hidden",t.icon&&!t.label),m.xp6(1),m.Oqu(t.label)}}function A0(n,e){if(1&n&&(m.TgZ(0,"span",4),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.Tol(t.badgeClass),m.Q6J("ngClass",t.badgeStyleClass()),m.xp6(1),m.Oqu(t.badge)}}const R0=function(n,e,t,r,i){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":e,"p-disabled":t,"p-button-loading":r,"p-button-loading-label-only":i}},SS=["*"];let Jy=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new m.vpe,this.onFocus=new m.vpe,this.onBlur=new m.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(t,r,i){if(1&t&&m.Suo(i,vd,4),2&t){let a;m.iGM(a=m.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:SS,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(t,r){1&t&&(m.F$t(),m.TgZ(0,"button",0),m.NdJ("click",function(a){return r.onClick.emit(a)})("focus",function(a){return r.onFocus.emit(a)})("blur",function(a){return r.onBlur.emit(a)}),m.Hsn(1),m.YNc(2,b0,1,0,"ng-container",1),m.YNc(3,D0,1,9,"span",2),m.YNc(4,S0,2,2,"span",3),m.YNc(5,A0,2,4,"span",2),m.qZA()),2&t&&(m.Tol(r.styleClass),m.Q6J("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",m.qbA(11,R0,r.icon&&!r.label,("top"===r.iconPos||"bottom"===r.iconPos)&&r.label,r.disabled||r.loading,r.loading,r.loading&&!r.icon&&r.label)),m.uIk("type",r.type)("aria-label",r.ariaLabel),m.xp6(2),m.Q6J("ngTemplateOutlet",r.contentTemplate),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate&&(r.icon||r.loading)),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate&&r.label),m.xp6(1),m.Q6J("ngIf",!r.contentTemplate&&r.badge))},dependencies:[dn,Bn,Xs,Na,wd],encapsulation:2,changeDetection:0}),n})(),AS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[ll,Xr]}),n})();function x0(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"span")(1,"p-messages",8),m.NdJ("valueChange",function(i){m.CHM(t);const a=m.oxw();return m.KtG(a.msgsWarn=i)}),m.qZA()()}if(2&n){const t=m.oxw();m.xp6(1),m.Q6J("value",t.msgsWarn)}}let ev=(()=>{class n{constructor(t,r){this.route=t,this.loginSerice=r,this.error=!1,this.msgs=[],this.msgsWarn=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{1==t.error?(this.error=!0,this.msgsWarn=[WE.warnLogin]):this.error=!1})}loginGoogle(){this.loginSerice.googleLogin().then()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ku),m.Y36(_d))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","align-items-center"],[1,"padding-login","grid","justify-content-center"],[1,"login-box","login","col-6","justify-content-center"],["src","assets/OrelhaSeca.png",1,"login-logo"],[1,"text-center"],[4,"ngIf"],[3,"value","valueChange"],[1,"login-button"],["type","button","label","Google",1,"",3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m._UZ(5,"img",5),m.TgZ(6,"div",6),m.YNc(7,x0,2,1,"span",7),m.TgZ(8,"p-messages",8),m.NdJ("valueChange",function(a){return r.msgs=a}),m.qZA()(),m.TgZ(9,"div",9)(10,"p-button",10),m.NdJ("click",function(){return r.loginGoogle()}),m.qZA()()()()()()()),2&t&&(m.xp6(7),m.Q6J("ngIf",r.error),m.xp6(1),m.Q6J("value",r.msgs))},dependencies:[Bn,E0,Jy],styles:[".login-box[_ngcontent-%COMP%]{width:100%;height:100%;max-width:500px;text-align:center}.login[_ngcontent-%COMP%]{background:rgb(255,255,255);justify-content:center;align-items:center;border-left-color:#010c29;border-right-color:#010c29;border-bottom-color:#010c29;border-top-color:#010c29;border-style:solid;border-radius:5px;border-width:2px}.login-logo[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:20px;width:90%;max-width:400px}.padding-login[_ngcontent-%COMP%]{padding-top:100px;align-items:center;align-content:center;align-self:center}.text-center[_ngcontent-%COMP%]{text-align:center}.login-button[_ngcontent-%COMP%]{text-align:center;padding-top:1em;padding-bottom:2em}.login-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em}.menu-container[_ngcontent-%COMP%]{background-color:#fff;max-width:1900px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:1810px;padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;min-height:100%}"]}),n})();const RS=["*"];let Lu=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-template"]],ngContentSelectors:RS,decls:8,vars:0,consts:[[1,"navbar"],["icon","pi pi-home","routerLink","/home",1,"menu-item"],["icon","pi pi-search","routerLink","/search",1,"menu-item"],["icon","pi pi-plus","routerLink","/novo",1,"menu-item"],["icon","pi pi-bell","routerLink","/notific",1,"menu-item"],["icon","pi pi-user","routerLink","/config",1,"menu-item"],[1,"content"]],template:function(t,r){1&t&&(m.F$t(),m.TgZ(0,"div",0),m._UZ(1,"p-button",1)(2,"p-button",2)(3,"p-button",3)(4,"p-button",4)(5,"p-button",5),m.qZA(),m.TgZ(6,"div",6),m.Hsn(7),m.qZA())},dependencies:[sd,Jy],styles:[".navbar[_ngcontent-%COMP%]{overflow:hidden;background-color:#333;position:fixed;bottom:0;width:100%;text-align:center;padding-top:.5em;padding-bottom:.5em;justify-content:space-evenly;display:flex}.content[_ngcontent-%COMP%]{padding:16px;margin-bottom:30px}.menu-item[_ngcontent-%COMP%]{padding-left:.2em;padding-right:.2em}"]}),n})(),Qg=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"app-template")(1,"p"),m._uU(2,"Comi o c\xfa de quem est\xe1 lendo"),m.qZA()())},dependencies:[Lu]}),n})(),jl=(()=>{class n{constructor(t){this.router=t}canActivate(t,r){return localStorage,console.log(localStorage[_d.tokenKey]),null==localStorage[_d.tokenKey]?(this.router.navigate(["/login"]),!1):"null"!=localStorage[_d.tokenKey]||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(br))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const N0=[{path:"login",component:ev},{path:"home",component:Qg,canActivate:[jl]},{path:"search",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-search-view"]],decls:3,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"app-template")(1,"p"),m._uU(2,"search-view works!"),m.qZA()())},dependencies:[Lu]}),n})(),canActivate:[jl]},{path:"novo",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-new-content-view"]],decls:3,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"app-template")(1,"p"),m._uU(2,"new-content-view works!"),m.qZA()())},dependencies:[Lu]}),n})(),canActivate:[jl]},{path:"notific",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-notification-view"]],decls:3,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"app-template")(1,"p"),m._uU(2,"notification-view works!"),m.qZA()())},dependencies:[Lu]}),n})(),canActivate:[jl]},{path:"config",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-config-view"]],decls:3,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"app-template")(1,"p"),m._uU(2,"config-view works!"),m.qZA()())},dependencies:[Lu]}),n})(),canActivate:[jl]},{path:"",redirectTo:"/home",pathMatch:"full"}];let rv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[jE.forRoot(N0,{useHash:!0}),jE]}),n})(),k0=(()=>{class n{constructor(){this.title="hacka-sicredi"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Ol]}),n})();const iv_firebaseConfig={apiKey:"AIzaSyBNnuRVZ0vTs6I6iR_0gMMYWRoeD4HDl4k",authDomain:"hackasic.firebaseapp.com",projectId:"hackasic",storageBucket:"hackasic.appspot.com",messagingSenderId:"807324039482",appId:"1:807324039482:web:cf01e5d1b2a95f48e73803",measurementId:"G-DY0F90L8QH"};var yf=F(4986);function sv(n,e=uo.y){return n=n??xS,(0,er.e)((t,r)=>{let i,a=!0;t.subscribe((0,Wn.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function xS(n,e){return n===e}var O0=F(5032);F(5881);var ov=F(3942);const av="@firebase/database",uv="0.13.10";let Xg="";function Jg(n){Xg=n}class U0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class V0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const lv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new U0(e)}}catch{}return new V0},Fu=lv("localStorage"),em=lv("sessionStorage"),Hl=new _o.Yd("@firebase/database"),cv=function(){let n=1;return function(){return n++}}(),dv=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},tm=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=tm.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let $l=null,B0=!0;const hv=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hl.logLevel=_o.in.VERBOSE,$l=Hl.log.bind(Hl),e&&em.set("logging_enabled",!0)):"function"==typeof n?$l=n:($l=null,em.remove("logging_enabled"))},jr=function(...n){if(!0===B0&&(B0=!1,null===$l&&!0===em.get("logging_enabled")&&hv(!0)),$l){const e=tm.apply(null,n);$l(e)}},ur=function(n){return function(...e){jr(n,...e)}},nm=function(...n){const e="FIREBASE INTERNAL ERROR: "+tm(...n);Hl.error(e)},ya=function(...n){const e=`FIREBASE FATAL ERROR: ${tm(...n)}`;throw Hl.error(e),new Error(e)},hi=function(...n){const e="FIREBASE WARNING: "+tm(...n);Hl.warn(e)},rm=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},va="[MIN_NAME]",Ti="[MAX_NAME]",Wl=function(n,e){if(n===e)return 0;if(n===va||e===Ti)return-1;if(e===va||n===Ti)return 1;{const t=Gi(n),r=Gi(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},MS=function(n,e){return n===e?0:n<e?-1:1},xd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},fv=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=fv(n[e[r]]);return t+="}",t},pv=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const gv=function(n){(0,L.hu)(!rm(n),"Invalid JSON number");const r=1023;let i,a,l,d,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const T=v.join("");let S="";for(g=0;g<64;g+=8){let P=parseInt(T.substr(g,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},W0=new RegExp("^-?(0*)\\d{1,10}$"),vo=-2147483648,ps=2147483647,Gi=function(n){if(W0.test(n)){const e=Number(n);if(e>=vo&&e<=ps)return e}return null},Gl=function(n){try{n()}catch(e){setTimeout(()=>{throw hi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},vf=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class kS{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class OS{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(jr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hi(e)}}let wf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const _v=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wv="websocket",Iv="long_polling";class Ef{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Cv(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===wv)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Iv)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Ev(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Jr(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class K0{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const im={},sm={};function om(n){const e=n.toString();return im[e]||(im[e]=new K0),im[e]}class Y0{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Uu{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ur(e),this.stats_=om(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),Cv(t,Iv,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Y0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tv((...a)=>{const[l,d,g,v,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&_v.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uu.forceAllow_=!0}static forceDisallow(){Uu.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Uu.forceAllow_&&(Uu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=pv(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Tv{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=cv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Tv.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){jr("frame writing exception"),d.stack&&jr(d.stack),jr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||jr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{jr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Cf=null;typeof MozWebSocket<"u"?Cf=MozWebSocket:typeof WebSocket<"u"&&(Cf=WebSocket);let zl=(()=>{class n{constructor(t,r,i,a,l,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ur(this.connId),this.stats_=om(r),this.connURL=n.connectionURL_(r,d,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&_v.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),Cv(t,wv,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fu.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Xg}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new Cf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Cf&&!n.forceDisallow_}static previouslyFailed(){return Fu.isInMemoryStorage||!0===Fu.get("previous_websocket_failure")}markConnectionHealthy(){Fu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=pv(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Dv=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Uu,zl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=zl&&zl.isAvailable();let i=r&&!zl.previouslyFailed();if(t.webSocketOnly&&(r||hi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zl];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Av{constructor(e,t,r,i,a,l,d,g,v,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ur("c:"+this.id+":"),this.transportManager_=new Dv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=vf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xd("t",e),r=xd("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xd("t",e),r=xd("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xd("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nm("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&hi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),vf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class YS{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class St{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class lm extends St{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lm}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ln{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function _n(){return new ln("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wo(n){return n.pieces_.length-n.pieceNum_}function Ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ln(n.pieces_,e)}function hC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Nd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function pC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ln(e,0)}function Kn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ln)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ln(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function fi(n,e){const t=Kt(n),r=Kt(e);if(null===t)return e;if(t===r)return fi(Ft(n),Ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function gC(n,e){const t=Nd(n,0),r=Nd(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Wl(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Rv(n,e){if(wo(n)!==wo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Fs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wo(n)>wo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class QS{constructor(e,t){this.errorPrefix_=t,this.parts_=Nd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);mC(this)}}function mC(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Zl(n))}function Zl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class kd extends St{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new kd}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Od=1e3;let Af,Yl=(()=>{class n extends YS{constructor(t,r,i,a,l,d,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=ur("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Od,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kd.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&lm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const g=d.d;"ok"===d.s?r.resolve(g):r.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const v=g.d,T=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();hi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nm("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Od,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Od,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Od),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,v=null;const T=function(){v?v.close():(g=!0,a())};t.realtime_={close:T,sendRequest:function(V){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,G]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);g?jr("getToken() completed but was canceled"):(jr("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=G&&G.token,v=new Av(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{hi(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(V){t.log_("Failed to get token: "+V),g||(t.repoInfo_.nodeAdmin&&hi(V),T())}}})()}interrupt(t){jr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){jr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Od,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>fv(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new ln(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){jr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){jr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Xg.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=lm.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class Sf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nn(va,e),i=new nn(va,t);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class Pv extends Sf{static get __EMPTY_NODE(){return Af}static set __EMPTY_NODE(e){Af=e}compare(e,t){return Wl(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(Ti,Af)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,Af)}toString(){return".key"}}const Ia=new Pv;class Rf{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let wC,Io=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??gs.EMPTY_NODE,this.right=l??gs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return gs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return gs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class gs{constructor(e,t=gs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new gs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Io.BLACK,null,null))}remove(e){return new gs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Io.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Rf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Rf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Rf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Rf(this.root_,null,this.comparator_,!0,e)}}function bN(n,e){return Wl(n.name,e.name)}function vC(n,e){return Wl(n,e)}gs.EMPTY_NODE=new class eA{copy(e,t,r,i,a){return this}insert(e,t,r){return new Io(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xf=function(n){return"number"==typeof n?"number:"+gv(n):"string:"+n},EC=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===wC||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===wC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let CC,Ld,bC,Ql=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),EC(this.priorityNode_)}static set __childrenNodeConstructor(t){CC=t}static get __childrenNodeConstructor(){return CC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Kt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===wo(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ft(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+xf(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?gv(this.value_):this.value_,this.lazyHash_=dv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ln=new class rA extends Sf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Wl(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(Ti,new Ql("[PRIORITY-POST]",bC))}makePost(e,t){const r=Ld(e);return new nn(t,new Ql("[PRIORITY-POST]",r))}toString(){return".priority"}},TC=Math.log(2);class iA{constructor(e){this.count=parseInt(Math.log(e+1)/TC,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cm=function(n,e,t,r){n.sort(e);const i=function(g,v){const T=v-g;let S,P;if(0===T)return null;if(1===T)return S=n[g],P=t?t(S):S,new Io(P,S.node,Io.BLACK,null,null);{const V=parseInt(T/2,10)+g,G=i(g,V),ce=i(V+1,v);return S=n[V],P=t?t(S):S,new Io(P,S.node,Io.BLACK,G,ce)}},d=function(g){let v=null,T=null,S=n.length;const P=function(G,ce){const ye=S-G,ot=S;S-=G;const dt=i(ye+1,ot),ut=n[ye],ft=t?t(ut):ut;V(new Io(ft,ut.node,ce,null,dt))},V=function(G){v?(v.left=G,v=G):(T=G,v=G)};for(let G=0;G<g.count;++G){const ce=g.nextBitIsOne(),ye=Math.pow(2,g.count-(G+1));ce?P(ye,Io.BLACK):(P(ye,Io.BLACK),P(ye,Io.RED))}return T}(new iA(n.length));return new gs(r||e,d)};let Xl;const Fd={};class Ea{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(Fd&&Ln,"ChildrenNode.ts has not been loaded"),Xl=Xl||new Ea({".priority":Fd},{".priority":Ln}),Xl}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof gs?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Ia,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(nn.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?cm(r,e.getCompare()):Fd;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const T=Object.assign({},this.indexes_);return T[g]=d,new Ea(T,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const l=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(l,"Missing index implementation for "+a),i===Fd){if(l.isDefinedOn(e.node)){const d=[],g=t.getIterator(nn.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&d.push(v),v=g.getNext();return d.push(e),cm(d,l.getCompare())}return Fd}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new nn(e.name,d))),g.insert(e,e.node)}});return new Ea(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===Fd)return i;{const a=t.get(e.name);return a?i.remove(new nn(e.name,a)):i}});return new Ea(r,this.indexSet_)}}let Pf,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EC(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pf||(Pf=new n(new gs(vC),null,Ea.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Pf:r}}getChild(t){const r=Kt(t);return null===r?this:this.getImmediateChild(r).getChild(Ft(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new nn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?Pf:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=Kt(t);if(null===i)return r;{(0,L.hu)(".priority"!==Kt(t)||1===wo(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Ft(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Ln,(d,g)=>{r[d]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+xf(this.getPriority().val())+":"),this.forEachChild(Ln,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":dv(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new nn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new nn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new nn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,nn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ud?-1:0}withIndex(t){if(t===Ia||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ia||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ln),a=r.getIterator(Ln);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ia?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ud=new class sA extends Wt{constructor(){super(new gs(vC),Wt.EMPTY_NODE,Ea.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function Zn(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ql(n,Zn(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return Jr(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=Zn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Zn(e))}{const t=[];let r=!1;if(Jr(n,(l,d)=>{if("."!==l.substring(0,1)){const g=Zn(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new nn(l,g)))}}),0===t.length)return Wt.EMPTY_NODE;const a=cm(t,bN,l=>l.name,vC);if(r){const l=cm(t,Ln.getCompare());return new Wt(a,Zn(e),new Ea({".priority":l},{".priority":Ln}))}return new Wt(a,Zn(e),Ea.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(va,Wt.EMPTY_NODE)},MAX:{value:new nn(Ti,Ud)}}),Pv.__EMPTY_NODE=Wt.EMPTY_NODE,Ql.__childrenNodeConstructor=Wt,function IC(n){wC=n}(Ud),function nA(n){bC=n}(Ud),function tA(n){Ld=n}(Zn);class Mv extends Sf{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!Jt(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Wl(e.name,t.name):a}makePost(e,t){const r=Zn(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,Ud);return new nn(Ti,e)}toString(){return Nd(this.indexPath_,0).join("/")}}const dm=new class DC extends Sf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Wl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const r=Zn(e);return new nn(t,r)}toString(){return".value"}},Vd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aA=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Vd.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Vd.charAt(e[i]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),kv=function(n){if(n===""+ps)return"-";const e=Gi(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ti;const a=Vd.charAt(Vd.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},AC=function(n){if(n===""+vo)return va;const e=Gi(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ps:(delete t[t.length-1],t.join("")):(t[t.length-1]=Vd.charAt(Vd.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function RC(n){return{type:"value",snapshotNode:n}}function Bd(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Mf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Nf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ov{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Mf(t,d)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Bd(t,r)):l.trackChildChange(Nf(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ln,(i,a)=>{t.hasChild(i)||r.trackChildChange(Mf(i,a))}),t.isLeafNode()||t.forEachChild(Ln,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Nf(i,a,l))}else r.trackChildChange(Bd(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class kf{constructor(e){this.indexedFilter_=new Ov(e.getIndex()),this.index_=e.getIndex(),this.startPost_=kf.getStartPost_(e),this.endPost_=kf.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new nn(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(Ln,(l,d)=>{a.matches(new nn(l,d))||(i=i.updateImmediateChild(l,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class xC{constructor(e){this.rangedFilter_=new kf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new nn(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let a,l,d,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();d=(P,V)=>S(V,P)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let v=0,T=!1;for(;g.hasNext();){const S=g.getNext();!T&&d(a,S)<=0&&(T=!0),T&&v<this.limit_&&d(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,V)=>S(V,P)}else l=this.index_.getCompare();const d=e;(0,L.hu)(d.numChildren()===this.limit_,"");const g=new nn(t,r),v=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),T=this.rangedFilter_.matches(g);if(d.hasChild(t)){const S=d.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||d.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:l(P,g);if(T&&!r.isEmpty()&&V>=0)return a?.trackChildChange(Nf(t,r,S)),d.updateImmediateChild(t,r);{a?.trackChildChange(Mf(t,S));const ce=d.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(Bd(P.name,P.node)),ce.updateImmediateChild(P.name,P.node)):ce}}return r.isEmpty()?e:T&&l(v,g)>=0?(null!=a&&(a.trackChildChange(Mf(v.name,v.node)),a.trackChildChange(Bd(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(v.name,Wt.EMPTY_NODE)):e}}class Of{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ln}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:va}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ti}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ln}copy(){const e=new Of;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Lv(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Fv(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function jd(n,e){const t=n.copy();return t.index_=e,t}function Vv(n){const e={};if(n.isDefault())return e;let t;return n.index_===Ln?t="$priority":n.index_===dm?t="$value":n.index_===Ia?t="$key":((0,L.hu)(n.index_ instanceof Mv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function fm(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ln&&(e.i=n.index_.toString()),e}class pm extends YS{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ur("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=pm.getListenId_(e,r),d={};this.listens_[l]=d;const g=Vv(e._queryParams);this.restRequest_(a+".json",g,(v,T)=>{let S=T;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,l)===d){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=pm.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Vv(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,L.cI)(d.responseText)}catch{hi("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&hi("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class hA{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hd(){return{value:null,children:new Map}}function $d(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Kt(e);n.children.has(r)||n.children.set(r,Hd()),$d(n.children.get(r),e=Ft(e),t)}}function Bv(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ln,(r,i)=>{$d(n,new ln(r),i)}),Bv(n,e)}}if(n.children.size>0){const t=Kt(e);return e=Ft(e),n.children.has(t)&&Bv(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Vu(n,e,t){null!==n.value?t(e,n.value):function MC(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Vu(i,new ln(e.toString()+"/"+r),t)})}class fA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Jr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class gA{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fA(e);const r=1e4+2e4*Math.random();vf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Jr(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),vf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zi=(()=>{return(n=zi||(zi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",zi;var n})();function Lf(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ff{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ln(e));return new Ff(_n(),t,this.revert)}}return(0,L.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new Ff(Ft(this.path),this.affectedTree,this.revert)}}class Wd{constructor(e,t){this.source=e,this.path=t,this.type=zi.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new Wd(this.source,_n()):new Wd(this.source,Ft(this.path))}}class Bu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zi.OVERWRITE}operationForChild(e){return Jt(this.path)?new Bu(this.source,_n(),this.snap.getImmediateChild(e)):new Bu(this.source,Ft(this.path),this.snap)}}class Jl{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zi.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new ln(e));return t.isEmpty()?null:t.value?new Bu(this.source,_n(),t.value):new Jl(this.source,_n(),t)}return(0,L.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Jl(this.source,Ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ju{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class mA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Uf(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,g)=>function TN(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),l.forEach(d=>{const g=function kC(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(v=>{v.respondsTo(d.type)&&e.push(v.createEvent(g,n.query_))})})}function Vf(n,e){return{eventCache:n,serverCache:e}}function Bf(n,e,t,r){return Vf(new ju(e,t,r),n.serverCache)}function OC(n,e,t,r){return Vf(n.eventCache,new ju(e,t,r))}function $v(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Gd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Wv;class Fn{constructor(e,t=(()=>(Wv||(Wv=new gs(MS)),Wv))()){this.value=e,this.children=t}static fromObject(e){let t=new Fn(null);return Jr(e,(r,i)=>{t=t.set(new ln(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:_n(),value:this.value};if(Jt(e))return null;{const r=Kt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Ft(e),t);return null!=a?{path:Kn(new ln(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Kt(e),r=this.children.get(t);return null!==r?r.subtree(Ft(e)):new Fn(null)}}set(e,t){if(Jt(e))return new Fn(t,this.children);{const r=Kt(e),a=(this.children.get(r)||new Fn(null)).set(Ft(e),t),l=this.children.insert(r,a);return new Fn(this.value,l)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Fn(null):new Fn(null,this.children);{const t=Kt(e),r=this.children.get(t);if(r){const i=r.remove(Ft(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Fn(null):new Fn(this.value,a)}return this}}get(e){if(Jt(e))return this.value;{const t=Kt(e),r=this.children.get(t);return r?r.get(Ft(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=Kt(e),a=(this.children.get(r)||new Fn(null)).setTree(Ft(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Fn(this.value,l)}}fold(e){return this.fold_(_n(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Kn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_n(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Jt(e))return null;{const a=Kt(e),l=this.children.get(a);return l?l.findOnPath_(Ft(e),Kn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_n(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const i=Kt(e),a=this.children.get(i);return a?a.foreachOnPath_(Ft(e),Kn(t,i),r):new Fn(null)}}foreach(e){this.foreach_(_n(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Kn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Us{constructor(e){this.writeTree_=e}static empty(){return new Us(new Fn(null))}}function zd(n,e,t){if(Jt(e))return new Us(new Fn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=fi(i,e);return a=a.updateChild(l,t),new Us(n.writeTree_.set(i,a))}{const i=new Fn(t),a=n.writeTree_.setTree(e,i);return new Us(a)}}}function Gv(n,e,t){let r=n;return Jr(t,(i,a)=>{r=zd(r,Kn(e,i),a)}),r}function zv(n,e){if(Jt(e))return Us.empty();{const t=n.writeTree_.setTree(e,new Fn(null));return new Us(t)}}function mm(n,e){return null!=ec(n,e)}function ec(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(fi(t.path,e)):null}function LC(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ln,(r,i)=>{e.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new nn(r,i.value))}),e}function Hu(n,e){if(Jt(e))return n;{const t=ec(n,e);return new Us(null!=t?new Fn(t):n.writeTree_.subtree(e))}}function qv(n){return n.writeTree_.isEmpty()}function Ca(n,e){return Kv(_n(),n.writeTree_,e)}function Kv(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Kv(Kn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Kn(n,".priority"),r)),t}}function jf(n,e){return Gf(e,n)}function wA(n,e){if(n.snap)return Fs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Fs(Kn(n.path,t),e))return!0;return!1}function IA(n){return n.visible}function BC(n,e,t){let r=Us.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)Fs(t,l)?(d=fi(t,l),r=zd(r,d,a.snap)):Fs(l,t)&&(d=fi(l,t),r=zd(r,_n(),a.snap.getChild(d)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Fs(t,l))d=fi(t,l),r=Gv(r,d,a.children);else if(Fs(l,t))if(d=fi(l,t),Jt(d))r=Gv(r,_n(),a.children);else{const g=(0,L.DV)(a.children,Kt(d));if(g){const v=g.getChild(Ft(d));r=zd(r,_n(),v)}}}}}return r}function jC(n,e,t,r,i){if(r||i){const a=Hu(n.visibleWrites,e);return!i&&qv(a)?t:i||null!=t||mm(a,_n())?Ca(BC(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Fs(v.path,e)||Fs(e,v.path))},e),t||Wt.EMPTY_NODE):null}{const a=ec(n.visibleWrites,e);if(null!=a)return a;{const l=Hu(n.visibleWrites,e);return qv(l)?t:null!=t||mm(l,_n())?Ca(l,t||Wt.EMPTY_NODE):null}}}function _m(n,e,t,r){return jC(n.writeTree,n.treePath,e,t,r)}function $f(n,e){return function EA(n,e,t){let r=Wt.EMPTY_NODE;const i=ec(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ln,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Hu(n.visibleWrites,e);return t.forEachChild(Ln,(l,d)=>{const g=Ca(Hu(a,new ln(l)),d);r=r.updateImmediateChild(l,g)}),LC(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return LC(Hu(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function qd(n,e,t,r){return function CA(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Kn(e,t);if(mm(n.visibleWrites,a))return null;{const l=Hu(n.visibleWrites,a);return qv(l)?i.getChild(t):Ca(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ym(n,e){return function bA(n,e){return ec(n.visibleWrites,e)}(n.writeTree,Kn(n.treePath,e))}function Yv(n,e,t){return function Hf(n,e,t,r){const i=Kn(e,t),a=ec(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Ca(Hu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Wf(n,e){return Gf(Kn(n.treePath,e),n.writeTree)}function Gf(n,e){return{treePath:n,writeTree:e}}class DA{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Nf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Mf(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Bd(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Nf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Qv=new class SA{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class vm{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ju(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gd(this.viewCache_),a=function TA(n,e,t,r,i,a){return function Zv(n,e,t,r,i,a,l){let d;const g=Hu(n.visibleWrites,e),v=ec(g,_n());if(null!=v)d=v;else{if(null==t)return[];d=Ca(g,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const T=[],S=l.getCompare(),P=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let V=P.getNext();for(;V&&T.length<i;)0!==S(V,r)&&T.push(V),V=P.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function xA(n,e,t,r,i,a){const l=e.eventCache;if(null!=ym(r,t))return e;{let d,g;if(Jt(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Gd(e),S=$f(r,v instanceof Wt?v:Wt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=_m(r,Gd(e));d=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Kt(t);if(".priority"===v){(0,L.hu)(1===wo(t),"Can't have a priority with additional path components");const T=l.getNode();g=e.serverCache.getNode();const S=qd(r,t,T,g);d=null!=S?n.filter.updatePriority(T,S):l.getNode()}else{const T=Ft(t);let S;if(l.isCompleteForChild(v)){g=e.serverCache.getNode();const P=qd(r,t,l.getNode(),g);S=null!=P?l.getNode().getImmediateChild(v).updateChild(T,P):l.getNode().getImmediateChild(v)}else S=Yv(r,v,e.serverCache);d=null!=S?n.filter.updateChild(l.getNode(),v,S,T,i,a):l.getNode()}}return Bf(e,d,l.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function Kd(n,e,t,r,i,a,l,d){const g=e.serverCache;let v;const T=l?n.filter:n.filter.getIndexedFilter();if(Jt(t))v=T.updateFullNode(g.getNode(),r,null);else if(T.filtersNodes()&&!g.isFiltered()){const V=g.getNode().updateChild(t,r);v=T.updateFullNode(g.getNode(),V,null)}else{const V=Kt(t);if(!g.isCompleteForPath(t)&&wo(t)>1)return e;const G=Ft(t),ye=g.getNode().getImmediateChild(V).updateChild(G,r);v=".priority"===V?T.updatePriority(g.getNode(),ye):T.updateChild(g.getNode(),V,ye,G,Qv,null)}const S=OC(e,v,g.isFullyInitialized()||Jt(t),T.filtersNodes());return xA(n,S,t,i,new vm(i,S,a),d)}function zf(n,e,t,r,i,a,l){const d=e.eventCache;let g,v;const T=new vm(i,e,a);if(Jt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=Bf(e,v,!0,n.filter.filtersNodes());else{const S=Kt(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=Bf(e,v,d.isFullyInitialized(),d.isFiltered());else{const P=Ft(t),V=d.getNode().getImmediateChild(S);let G;if(Jt(P))G=r;else{const ce=T.getCompleteChild(S);G=null!=ce?".priority"===hC(P)&&ce.getChild(pC(P)).isEmpty()?ce:ce.updateChild(P,r):Wt.EMPTY_NODE}g=V.equals(G)?e:Bf(e,n.filter.updateChild(d.getNode(),S,G,P,T,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function Jv(n,e){return n.eventCache.isCompleteForChild(e)}function wm(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function tw(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=Jt(t)?r:new Fn(null).setTree(t,r);const T=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(T.hasChild(S)){const G=wm(0,e.serverCache.getNode().getImmediateChild(S),P);g=Kd(n,g,new ln(S),G,i,a,l,d)}}),v.children.inorderTraversal((S,P)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!T.hasChild(S)&&!V){const ce=wm(0,e.serverCache.getNode().getImmediateChild(S),P);g=Kd(n,g,new ln(S),ce,i,a,l,d)}}),g}class $C{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Ov(r.getIndex()),a=function lA(n){return n.loadsAllData()?new Ov(n.getIndex()):n.hasLimit()?new xC(n):new kf(n)}(r);this.processor_=function Xv(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,g=i.updateFullNode(Wt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Wt.EMPTY_NODE,d.getNode(),null),T=new ju(g,l.isFullyInitialized(),i.filtersNodes()),S=new ju(v,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=Vf(S,T),this.eventGenerator_=new mA(this.query_)}get query(){return this.query_}}function kA(n,e){const t=Gd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function rw(n){return 0===n.eventRegistrations_.length}function zC(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function iw(n,e,t,r){e.type===zi.MERGE&&null!==e.source.queryId&&((0,L.hu)(Gd(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)($v(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function AA(n,e,t,r,i){const a=new DA;let l,d;if(t.type===zi.OVERWRITE){const v=t;v.source.fromUser?l=zf(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered()&&!Jt(v.path),l=Kd(n,e,v.path,v.snap,r,i,d,a))}else if(t.type===zi.MERGE){const v=t;v.source.fromUser?l=function ew(n,e,t,r,i,a,l){let d=e;return r.foreach((g,v)=>{const T=Kn(t,g);Jv(e,Kt(T))&&(d=zf(n,d,T,v,i,a,l))}),r.foreach((g,v)=>{const T=Kn(t,g);Jv(e,Kt(T))||(d=zf(n,d,T,v,i,a,l))}),d}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered(),l=tw(n,e,v.path,v.children,r,i,d,a))}else if(t.type===zi.ACK_USER_WRITE){const v=t;l=v.revert?function NA(n,e,t,r,i,a){let l;if(null!=ym(r,t))return e;{const d=new vm(r,e,i),g=e.eventCache.getNode();let v;if(Jt(t)||".priority"===Kt(t)){let T;if(e.serverCache.isFullyInitialized())T=_m(r,Gd(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),T=$f(r,S)}v=n.filter.updateFullNode(g,T,a)}else{const T=Kt(t);let S=Yv(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=g.getImmediateChild(T)),v=null!=S?n.filter.updateChild(g,T,S,Ft(t),d,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(g,T,Wt.EMPTY_NODE,Ft(t),d,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=_m(r,Gd(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=ym(r,_n()),Bf(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function PA(n,e,t,r,i,a,l){if(null!=ym(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Jt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Kd(n,e,t,g.getNode().getChild(t),i,a,d,l);if(Jt(t)){let v=new Fn(null);return g.getNode().forEachChild(Ia,(T,S)=>{v=v.set(new ln(T),S)}),tw(n,e,t,v,i,a,d,l)}return e}{let v=new Fn(null);return r.foreach((T,S)=>{const P=Kn(t,T);g.isCompleteForPath(P)&&(v=v.set(T,g.getNode().getChild(P)))}),tw(n,e,t,v,i,a,d,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==zi.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);l=function MA(n,e,t,r,i){const a=e.serverCache;return xA(n,OC(e,a.getNode(),a.isFullyInitialized()||Jt(t),a.isFiltered()),t,r,Qv,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function RA(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=$v(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(RC($v(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function HC(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,KC(n,a.changes,a.viewCache.eventCache.getNode(),null)}function KC(n,e,t,r){return function _A(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function uA(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Uf(n,i,"child_removed",e,r,t),Uf(n,i,"child_added",e,r,t),Uf(n,i,"child_moved",a,r,t),Uf(n,i,"child_changed",e,r,t),Uf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let qf,Em;class sw{constructor(){this.views=new Map}}function ow(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),iw(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(iw(l,e,t,r));return a}}function LA(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=_m(t,i?r:null),g=!1;d?g=!0:r instanceof Wt?(d=$f(t,r),g=!1):(d=Wt.EMPTY_NODE,g=!1);const v=Vf(new ju(d,g,!1),new ju(r,i,!1));return new $C(e,v)}return l}function aw(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Vs(n,e){let t=null;for(const r of n.views.values())t=t||kA(r,e);return t}function YC(n,e){return e._queryParams.loadsAllData()?Kf(n):n.views.get(e._queryIdentifier)}function Im(n,e){return null!=YC(n,e)}function $u(n){return null!=Kf(n)}function Kf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let uw=1;class lw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fn(null),this.pendingWriteTree_=function ba(){return{visibleWrites:Us.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Cm(n,e,t,r,i){return function FC(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=zd(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Yf(n,new Bu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ta(n,e,t=!1){const r=function VC(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function vA(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&wA(d,r.path)?i=!1:Fs(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function DN(n){n.visibleWrites=BC(n.allWrites,IA,_n()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=zv(n.visibleWrites,r.path):Jr(r.children,g=>{n.visibleWrites=zv(n.visibleWrites,Kn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Fn(null);return null!=r.snap?a=a.set(_n(),!0):Jr(r.children,l=>{a=a.set(new ln(l),!0)}),Yf(n,new Ff(r.path,a,t))}return[]}function Tm(n,e,t){return Yf(n,new Bu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function cu(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&("default"===e._queryIdentifier||Im(l,e))){const g=function ZC(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=$u(n);if("default"===i)for(const[g,v]of n.views.entries())l=l.concat(zC(v,t,r)),rw(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||a.push(v.query));else{const g=n.views.get(i);g&&(l=l.concat(zC(g,t,r)),rw(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return d&&!$u(n)&&a.push(new(function Zd(){return(0,L.hu)(qf,"Reference.ts has not been loaded"),qf}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function OA(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=g.removed;if(d=g.events,!i){const T=-1!==v.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,V)=>$u(V));if(T&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const V=function jA(n){return n.fold((e,t,r)=>{if(t&&$u(t))return[Kf(t)];{let i=[];return t&&(i=aw(t)),Jr(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let G=0;G<V.length;++G){const ce=V[G],ye=ce.query,ot=rb(n,ce);n.listenProvider_.startListening(Xf(ye),Yd(n,ye),ot.hashFn,ot.onComplete)}}}!S&&v.length>0&&!r&&(T?n.listenProvider_.stopListening(Xf(e),null):v.forEach(P=>{const V=n.queryToTagMap.get(Qf(P));n.listenProvider_.stopListening(Xf(P),V)}))}!function ib(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Qf(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return d}function JC(n,e,t,r){const i=dw(n,r);if(null!=i){const a=Dm(i),l=a.path,d=a.queryId,g=fi(l,e);return Sm(n,l,new Bu(Lf(d),g,t))}return[]}function Zf(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,V)=>{const G=fi(P,i);a=a||Vs(V,G),l=l||$u(V)});let g,d=n.syncPointTree_.get(i);d?(l=l||$u(d),a=a||Vs(d,_n())):(d=new sw,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?g=!0:(g=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,G)=>{const ce=Vs(G,_n());ce&&(a=a.updateImmediateChild(V,ce))}));const v=Im(d,e);if(!v&&!e._queryParams.loadsAllData()){const P=Qf(e);(0,L.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const V=function HA(){return uw++}();n.queryToTagMap.set(P,V),n.tagToQueryMap.set(V,P)}let S=function SN(n,e,t,r,i,a){const l=LA(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function GC(n,e){n.eventRegistrations_.push(e)}(l,t),function qC(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ln,(a,l)=>{r.push(Bd(a,l))}),t.isFullyInitialized()&&r.push(RC(t.getNode())),KC(n,r,t.getNode(),e)}(l,t)}(d,e,t,jf(n.pendingWriteTree_,i),a,g);if(!v&&!l&&!r){const P=YC(d,e);S=S.concat(function sb(n,e,t){const r=e._path,i=Yd(n,e),a=rb(n,t),l=n.listenProvider_.startListening(Xf(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!$u(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((v,T,S)=>{if(!Jt(v)&&T&&$u(T))return[Kf(T).query];{let P=[];return T&&(P=P.concat(aw(T).map(V=>V.query))),Jr(S,(V,G)=>{P=P.concat(G)}),P}});for(let v=0;v<g.length;++v){const T=g[v];n.listenProvider_.stopListening(Xf(T),Yd(n,T))}}return l}(n,e,P))}return S}function cw(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const v=Vs(d,fi(l,e));if(v)return v});return jC(i,e,a,t,!0)}function Yf(n,e){return tb(e,n.syncPointTree_,null,jf(n.pendingWriteTree_,_n()))}function tb(n,e,t,r){if(Jt(n.path))return nb(n,e,t,r);{const i=e.get(_n());null==t&&null!=i&&(t=Vs(i,_n()));let a=[];const l=Kt(n.path),d=n.operationForChild(l),g=e.children.get(l);if(g&&d){const v=t?t.getImmediateChild(l):null,T=Wf(r,l);a=a.concat(tb(d,g,v,T))}return i&&(a=a.concat(ow(i,n,r,t))),a}}function nb(n,e,t,r){const i=e.get(_n());null==t&&null!=i&&(t=Vs(i,_n()));let a=[];return e.children.inorderTraversal((l,d)=>{const g=t?t.getImmediateChild(l):null,v=Wf(r,l),T=n.operationForChild(l);T&&(a=a.concat(nb(T,d,g,v)))}),i&&(a=a.concat(ow(i,n,r,t))),a}function rb(n,e){const t=e.query,r=Yd(n,t);return{hashFn:()=>(function nw(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function XC(n,e,t){const r=dw(n,t);if(r){const i=Dm(r),a=i.path,l=i.queryId,d=fi(a,e);return Sm(n,a,new Wd(Lf(l),d))}return[]}(n,t._path,r):function VA(n,e){return Yf(n,new Wd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function NS(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return cu(n,t,null,a)}}}}function Yd(n,e){const t=Qf(e);return n.queryToTagMap.get(t)}function Qf(n){return n._path.toString()+"$"+n._queryIdentifier}function dw(n,e){return n.tagToQueryMap.get(e)}function Dm(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ln(n.substr(0,e))}}function Sm(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),ow(r,t,jf(n.pendingWriteTree_,e),null)}function Xf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function UA(){return(0,L.hu)(Em,"Reference.ts has not been loaded"),Em}())(n._repo,n._path):n}class Am{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Am(t)}node(){return this.node_}}class Rm{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kn(this.path_,e);return new Rm(this.syncTree_,t)}node(){return cw(this.syncTree_,this.path_)}}const ab=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?$A(n[".sv"],e,t):"object"==typeof n[".sv"]?AN(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},$A=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},AN=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},hw=function(n,e,t,r){return lb(e,new Rm(t,n),r)},ub=function(n,e,t){return lb(n,new Am(e),t)};function lb(n,e,t){const r=n.getPriority().val(),i=ab(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=ab(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new Ql(d,Zn(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Ql(i))),l.forEachChild(Ln,(d,g)=>{const v=lb(g,e.getImmediateChild(d),t);v!==g&&(a=a.updateImmediateChild(d,v))}),a}}class cb{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function fw(n,e){let t=e instanceof ln?e:new ln(e),r=n,i=Kt(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new cb(i,r,a),t=Ft(t),i=Kt(t)}return r}function Qd(n){return n.node.value}function db(n,e){n.node.value=e,xm(n)}function WA(n){return n.node.childCount>0}function tc(n,e){Jr(n.node.children,(t,r)=>{e(new cb(t,n,r))})}function GA(n,e,t,r){t&&!r&&e(n),tc(n,i=>{GA(i,e,!0,r)}),t&&r&&e(n)}function Wu(n){return new ln(null===n.parent?n.name:Wu(n.parent)+"/"+n.name)}function xm(n){null!==n.parent&&function fb(n,e,t){const r=function RN(n){return void 0===Qd(n)&&!WA(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,xm(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,xm(n))}(n.parent,n.name,n)}const xN=/[\[\].#$\/\u0000-\u001F\u007F]/,pw=/[\[\].#$\u0000-\u001F\u007F]/,Pm=10485760,Mm=function(n){return"string"==typeof n&&0!==n.length&&!xN.test(n)},gw=function(n){return"string"==typeof n&&0!==n.length&&!pw.test(n)},Nm=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!rm(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Da=function(n,e,t,r){r&&void 0===e||Jf((0,L.gK)(n,"value"),e,t)},Jf=function(n,e,t){const r=t instanceof ln?new QS(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Zl(r));if("function"==typeof e)throw new Error(n+"contains a function "+Zl(r)+" with contents = "+e.toString());if(rm(e))throw new Error(n+"contains "+e.toString()+" "+Zl(r));if("string"==typeof e&&e.length>Pm/3&&(0,L.ug)(e)>Pm)throw new Error(n+"contains a string greater than "+Pm+" utf8 bytes "+Zl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Jr(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Mm(l)))throw new Error(n+" contains an invalid key ("+l+") "+Zl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function bf(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),mC(n)})(r,l),Jf(n,d,r),function XS(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Zl(r)+" in addition to actual children.")}},pb=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Jr(e,(l,d)=>{const g=new ln(l);if(Jf(i,d,Kn(t,g)),".priority"===hC(g)&&!Nm(d))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Nd(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!Mm(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(gC);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Fs(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},gb=function(n,e,t){if(!t||void 0!==e){if(rm(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nm(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Om=function(n,e,t,r){if(!(r&&void 0===t||Mm(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lm=function(n,e,t,r){if(!(r&&void 0===t||gw(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Bs=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},mb=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Mm(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gw(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class MN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Fm(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Rv(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function mw(n,e,t){Fm(n,t),qA(n,r=>Rv(r,e))}function qi(n,e,t){Fm(n,t),qA(n,r=>Fs(r,e)||Fs(e,r))}function qA(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Eo(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Eo(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$l&&jr("event: "+t.toString()),Gl(r)}}}const _b="repo_interrupt";class KA{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hd(),this.transactionQueueTree_=new cb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yb(n){const t=n.infoData_.getNode(new ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function nc(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:yb(n)})}function vb(n,e,t,r,i){n.dataUpdateCount++;const a=new ln(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,L.UI)(t,v=>Zn(v));l=function eb(n,e,t,r){const i=dw(n,r);if(i){const a=Dm(i),l=a.path,d=a.queryId,g=fi(l,e),v=Fn.fromObject(t);return Sm(n,l,new Jl(Lf(d),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Zn(t);l=JC(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,L.UI)(t,v=>Zn(v));l=function QC(n,e,t){const r=Fn.fromObject(t);return Yf(n,new Jl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Zn(t);l=Tm(n.serverSyncTree_,a,g)}let d=a;l.length>0&&(d=rp(n,a)),qi(n.eventQueue_,d,l)}function wb(n,e){Um(n,"connected",e),!1===e&&function YA(n){np(n,"onDisconnectEvents");const e=nc(n),t=Hd();Vu(n.onDisconnect_,_n(),(i,a)=>{const l=hw(i,a,n.serverSyncTree_,e);$d(t,i,l)});let r=[];Vu(t,_n(),(i,a)=>{r=r.concat(Tm(n.serverSyncTree_,i,a));const l=jm(n,i);rp(n,l)}),n.onDisconnect_=Hd(),qi(n.eventQueue_,_n(),r)}(n)}function Um(n,e,t){const r=new ln("/.info/"+e),i=Zn(t);n.infoData_.updateSnapshot(r,i);const a=Tm(n.infoSyncTree_,r,i);qi(n.eventQueue_,r,a)}function ep(n){return n.nextWriteId_++}function Vm(n,e,t,r,i){np(n,"set",{path:e.toString(),value:t,priority:r});const a=nc(n),l=Zn(t,r),d=cw(n.serverSyncTree_,e),g=ub(l,d,a),v=ep(n),T=Cm(n.serverSyncTree_,e,g,v,!0);Fm(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(P,V)=>{const G="ok"===P;G||hi("set at "+e+" failed: "+P);const ce=Ta(n.serverSyncTree_,v,!G);qi(n.eventQueue_,e,ce),zu(0,i,P,V)});const S=jm(n,e);rp(n,S),qi(n.eventQueue_,S,[])}function Eb(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Bv(n.onDisconnect_,e),zu(0,t,r,i)})}function Cb(n,e,t,r){const i=Zn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&$d(n.onDisconnect_,e,i),zu(0,r,a,l)})}function tp(n,e,t){let r;r=".info"===Kt(e._path)?cu(n.infoSyncTree_,e,t):cu(n.serverSyncTree_,e,t),mw(n.eventQueue_,e._path,r)}function Sa(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_b)}function np(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),jr(t,...e)}function zu(n,e,t,r){e&&Gl(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function ww(n,e,t){return cw(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function Bm(n,e=n.transactionQueueTree_){if(e||Xd(n,e),Qd(e)){const t=Iw(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Tb(n,e,t){const r=t.map(v=>v.currentWriteId),i=ww(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const T=t[v];(0,L.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=fi(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const d=a.val(!0),g=e;n.server_.put(g.toString(),d,v=>{np(n,"transaction put response",{path:g.toString(),status:v});let T=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,T=T.concat(Ta(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Xd(n,fw(n.transactionQueueTree_,e)),Bm(n,n.transactionQueueTree_),qi(n.eventQueue_,e,T);for(let P=0;P<S.length;P++)Gl(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{hi("transaction at "+g.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}rp(n,e)}},l)}(n,Wu(e),t)}else WA(e)&&tc(e,t=>{Bm(n,t)})}function rp(n,e){const t=Sb(n,e),r=Wu(t);return function Db(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],v=fi(t,g.path);let S,T=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)T=!0,S=g.abortReason,i=i.concat(Ta(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)T=!0,S="maxretry",i=i.concat(Ta(n.serverSyncTree_,g.currentWriteId,!0));else{const P=ww(n,g.path,l);g.currentInputSnapshot=P;const V=e[d].update(P.val());if(void 0!==V){Jf("transaction failed: Data returned ",V,g.path);let G=Zn(V);"object"==typeof V&&null!=V&&(0,L.r3)(V,".priority")||(G=G.updatePriority(P.getPriority()));const ye=g.currentWriteId,ot=nc(n),dt=ub(G,P,ot);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=dt,g.currentWriteId=ep(n),l.splice(l.indexOf(ye),1),i=i.concat(Cm(n.serverSyncTree_,g.path,dt,g.currentWriteId,g.applyLocally)),i=i.concat(Ta(n.serverSyncTree_,ye,!0))}else T=!0,S="nodata",i=i.concat(Ta(n.serverSyncTree_,g.currentWriteId,!0))}qi(n.eventQueue_,t,i),i=[],T&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===S?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(S),!1,null)))}Xd(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Gl(r[d]);Bm(n,n.transactionQueueTree_)}(n,Iw(n,t),r),r}function Sb(n,e){let t,r=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===Qd(r);)r=fw(r,t),t=Kt(e=Ft(e));return r}function Iw(n,e){const t=[];return JA(n,e,t),t.sort((r,i)=>r.order-i.order),t}function JA(n,e,t){const r=Qd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);tc(e,i=>{JA(n,i,t)})}function Xd(n,e){const t=Qd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,db(e,t.length>0?t:void 0)}tc(e,r=>{Xd(n,r)})}function jm(n,e){const t=Wu(Sb(n,e)),r=fw(n.transactionQueueTree_,e);return function hb(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Hm(n,i)}),Hm(n,r),GA(r,i=>{Hm(n,i)}),t}function Hm(n,e){const t=Qd(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,L.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,L.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Ta(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?db(e,void 0):t.length=a+1,qi(n.eventQueue_,Wu(e),i);for(let l=0;l<r.length;l++)Gl(r[l])}}const $m=function(n,e){const t=Wm(n),r=t.namespace;return"firebase.com"===t.domain&&ya(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ya("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ef(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ln(t.pathString)}},Wm=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(d=n.substring(0,v-1),n=n.substring(v+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function Ab(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(T,S)));const P=function Rb(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===d||"wss"===d,g=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class ip{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class Ew{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cw{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bw{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return Eb(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Bs("OnDisconnect.remove",this._path);const e=new L.BH;return Cb(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Bs("OnDisconnect.set",this._path),Da("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return Cb(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Bs("OnDisconnect.setWithPriority",this._path),Da("OnDisconnect.setWithPriority",e,this._path,!1),gb("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function vw(n,e,t,r,i){const a=Zn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,d)=>{"ok"===l&&$d(n.onDisconnect_,e,a),zu(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Bs("OnDisconnect.update",this._path),pb("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function Gu(n,e,t,r){if((0,L.xb)(t))return jr("onDisconnect().update() called with empty data.  Don't do anything."),void zu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Jr(t,(l,d)=>{const g=Zn(d);$d(n.onDisconnect_,Kn(e,l),g)}),zu(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Si{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Jt(this._path)?null:hC(this._path)}get ref(){return new Co(this._repo,this._path)}get _queryIdentifier(){const e=fm(this._queryParams),t=fv(e);return"{}"===t?"default":t}get _queryObject(){return fm(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof Si))return!1;const t=this._repo===e._repo,r=Rv(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function fC(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Gm(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function qu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ia){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==va)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ti)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Ln){if(null!=e&&!Nm(e)||null!=t&&!Nm(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof Mv||n.getIndex()===dm,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Tw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Co extends Si{constructor(e,t){super(e,t,new Of,!1)}get parent(){const e=pC(this._path);return null===e?null:new Co(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ku{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ln(e),r=rc(this.ref,e);return new Ku(this._node.getChild(t),r,Ln)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ku(i,rc(this.ref,r),Ln)))}hasChild(e){const t=new ln(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xb(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?rc(n._root,e):n._root}function Pb(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=$m(e,n._repo.repoInfo_.nodeAdmin);mb("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ya("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),xb(n,t.path.toString())}function rc(n,e){return null===Kt((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Lm("child","path",t,!1)):Lm("child","path",e,!1),new Co(n._repo,Kn(n._path,e));var t}function Mb(n,e){n=(0,L.m9)(n),Bs("set",n._path),Da("set",e,n._path,!1);const t=new L.BH;return Vm(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function zm(n,e){pb("update",e,n._path,!1);const t=new L.BH;return function Ib(n,e,t,r){np(n,"update",{path:e.toString(),value:t});let i=!0;const a=nc(n),l={};if(Jr(t,(d,g)=>{i=!1,l[d]=hw(Kn(e,d),Zn(g),n.serverSyncTree_,a)}),i)jr("update() called with empty data.  Don't do anything."),zu(0,r,"ok",void 0);else{const d=ep(n),g=function bm(n,e,t,r){!function UC(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Gv(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Fn.fromObject(t);return Yf(n,new Jl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);Fm(n.eventQueue_,g),n.server_.merge(e.toString(),t,(v,T)=>{const S="ok"===v;S||hi("update at "+e+" failed: "+v);const P=Ta(n.serverSyncTree_,d,!S),V=P.length>0?rp(n,e):e;qi(n.eventQueue_,V,P),zu(0,r,v,T)}),Jr(t,v=>{const T=jm(n,Kn(e,v));rp(n,T)}),qi(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function tR(n){n=(0,L.m9)(n);const e=new Cw(()=>{}),t=new sp(e);return function ZA(n,e,t){const r=function BA(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,T)=>{const S=fi(v,t);r=r||Vs(T,S)});let i=n.syncPointTree_.get(t);i?r=r||Vs(i,_n()):(i=new sw,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new ju(r,!0,!1):null;return function WC(n){return $v(n.viewCache_)}(LA(i,e,jf(n.pendingWriteTree_,e._path),a?l.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Zn(i).withIndex(e._queryParams.getIndex());let l;if(Zf(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Tm(n.serverSyncTree_,e._path,a);else{const d=Yd(n.serverSyncTree_,e);l=JC(n.serverSyncTree_,e._path,a,d)}return qi(n.eventQueue_,e._path,l),cu(n.serverSyncTree_,e,t,null,!0),a},i=>(np(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ku(r,new Co(n._repo,n._path),n._queryParams.getIndex()))}class sp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new ip("value",this,new Ku(e.snapshotNode,new Co(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ew(this,e,t):null}matches(e){return e instanceof sp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class op{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ew(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=rc(new Co(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new ip(e.type,this,new Ku(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof op&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function bo(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,v=(T,S)=>{tp(n._repo,n,d),g(T,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new Cw(t,a||void 0),d="value"===e?new sp(l):new op(e,l);return function bb(n,e,t){let r;r=".info"===Kt(e._path)?Zf(n.infoSyncTree_,e,t):Zf(n.serverSyncTree_,e,t),mw(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>tp(n._repo,n,d)}function qm(n,e,t,r){return bo(n,"value",e,t,r)}function Km(n,e,t,r){return bo(n,"child_added",e,t,r)}function Zm(n,e,t,r){return bo(n,"child_changed",e,t,r)}function Nb(n,e,t,r){return bo(n,"child_moved",e,t,r)}function Ym(n,e,t,r){return bo(n,"child_removed",e,t,r)}function Qm(n,e,t){let r=null;const i=t?new Cw(t):null;"value"===e?r=new sp(i):e&&(r=new op(e,i)),tp(n._repo,n,r)}class Ki{}class nR extends Ki{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Da("endAt",this._value,e._path,!0);const t=Fv(e._queryParams,this._value,this._key);if(Tw(t),qu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class FN extends Ki{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Da("endBefore",this._value,e._path,!1);const t=function Uv(n,e,t){let r,i;return n.index_===Ia?("string"==typeof e&&(e=AC(e)),i=Fv(n,e,t)):(r=null==t?va:AC(t),i=Fv(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Tw(t),qu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class Dw extends Ki{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Da("startAt",this._value,e._path,!0);const t=Lv(e._queryParams,this._value,this._key);if(Tw(t),qu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class iR extends Ki{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Da("startAfter",this._value,e._path,!1);const t=function dA(n,e,t){let r;if(n.index_===Ia)"string"==typeof e&&(e=kv(e)),r=Lv(n,e,t);else{let i;i=null==t?Ti:kv(t),r=Lv(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Tw(t),qu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class oR extends Ki{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(e._repo,e._path,function cA(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Ob extends Ki{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(e._repo,e._path,function PC(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class aR extends Ki{constructor(e){super(),this._path=e}_apply(e){Gm(e,"orderByChild");const t=new ln(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Mv(t),i=jd(e._queryParams,r);return qu(i),new Si(e._repo,e._path,i,!0)}}class Fb extends Ki{_apply(e){Gm(e,"orderByKey");const t=jd(e._queryParams,Ia);return qu(t),new Si(e._repo,e._path,t,!0)}}class VN extends Ki{_apply(e){Gm(e,"orderByPriority");const t=jd(e._queryParams,Ln);return qu(t),new Si(e._repo,e._path,t,!0)}}class Aw extends Ki{_apply(e){Gm(e,"orderByValue");const t=jd(e._queryParams,dm);return qu(t),new Si(e._repo,e._path,t,!0)}}class cR extends Ki{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Da("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nR(this._value,this._key)._apply(new Dw(this._value,this._key)._apply(e))}}function Aa(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function Di(n){(0,L.hu)(!qf,"__referenceConstructor has already been defined"),qf=n})(Co),function FA(n){(0,L.hu)(!Em,"__referenceConstructor has already been defined"),Em=n}(Co);const Rw={};function hR(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ya("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,l=$m(a,i),d=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${d.namespace}`,l=$m(a,i),d=l.repoInfo):g=!l.repoInfo.secure;const T=i&&g?new wf(wf.OWNER):new OS(n.name,n.options,e);mb("Invalid Firebase Database URL",l),Jt(l.path)||ya("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function $N(n,e,t,r){let i=Rw[e.name];i||(i={},Rw[e.name]=i);let a=i[n.toURLString()];return a&&ya("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new KA(n,false,t,r),i[n.toURLString()]=a,a}(d,n,T,new kS(n.name,t));return new fR(S,n)}class fR{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function js(n,e,t){if(n.stats_=om(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new pm(n.repoInfo_,(r,i,a,l)=>{vb(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wb(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Yl(n.repoInfo_,e,(r,i,a,l)=>{vb(n,r,i,a,l)},r=>{wb(n,r)},r=>{!function yw(n,e){Jr(e,(t,r)=>{Um(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Z0(n,e){const t=n.toString();return sm[t]||(sm[t]=e()),sm[t]}(n.repoInfo_,()=>new gA(n.stats_,n.server_)),n.infoData_=new hA,n.infoSyncTree_=new lw({startListening:(r,i,a,l)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=Tm(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),Um(n,"connected",!1),n.serverSyncTree_=new lw({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,g)=>{const v=l(d,g);qi(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Co(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function HN(n,e){const t=Rw[e];(!t||t[n.key]!==n)&&ya(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Sa(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ya("Cannot call "+e+" on a deleted database.")}}function pR(){Dv.IS_TRANSPORT_INITIALIZED&&hi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function GN(){pR(),Uu.forceDisallow()}function zN(){pR(),zl.forceDisallow(),Uu.forceAllow()}function o(n,e){hv(n,e)}const c={".sv":"timestamp"};class y{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Yl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Yl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function u(n){Jg(bi.SDK_VERSION),(0,bi._registerComponent)(new ma.wA("database",(e,{instanceIdentifier:t})=>hR(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(av,uv,n),(0,bi.registerVersion)(av,uv,"esm2017")}();const Z=new _o.Yd("@firebase/database-compat"),re=function(n){Z.warn("FIREBASE WARNING: "+n)};class qe{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,re("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class ct{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vt{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Lm("DataSnapshot.child","path",e,!1),new vt(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Lm("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new vt(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new gt(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class be{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const l=be.getCancelAndContextArgs_("Query.on",r,i),d=(v,T)=>{t.call(l.context,new vt(this.database,v),T)};d.userCallback=t,d.context=l.context;const g=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return qm(this._delegate,d,g),t;case"child_added":return Km(this._delegate,d,g),t;case"child_removed":return Ym(this._delegate,d,g),t;case"child_changed":return Zm(this._delegate,d,g),t;case"child_moved":return Nb(this._delegate,d,g),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Qm(this._delegate,e,i)}else Qm(this._delegate,e)}get(){return tR(this._delegate).then(e=>new vt(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=be.getCancelAndContextArgs_("Query.once",r,i),l=new L.BH,d=(v,T)=>{const S=new vt(this.database,v);t&&t.call(a.context,S,T),l.resolve(S)};d.userCallback=t,d.context=a.context;const g=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":qm(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":Km(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":Ym(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":Zm(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":Nb(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new be(this.database,Aa(this._delegate,function kb(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oR(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new be(this.database,Aa(this._delegate,function Lb(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ob(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new be(this.database,Aa(this._delegate,function uR(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Lm("orderByChild","path",n,!1),new aR(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new be(this.database,Aa(this._delegate,function Sw(){return new Fb}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new be(this.database,Aa(this._delegate,function Ub(){return new VN}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new be(this.database,Aa(this._delegate,function lR(){return new Aw}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new be(this.database,Aa(this._delegate,function rR(n=null,e){return Om("startAt","key",e,!0),new Dw(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new be(this.database,Aa(this._delegate,function sR(n,e){return Om("startAfter","key",e,!0),new iR(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new be(this.database,Aa(this._delegate,function LN(n,e){return Om("endAt","key",e,!0),new nR(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new be(this.database,Aa(this._delegate,function UN(n,e){return Om("endBefore","key",e,!0),new FN(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new be(this.database,Aa(this._delegate,function BN(n,e){return Om("equalTo","key",e,!0),new cR(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof be))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new gt(this.database,new Co(this._delegate._repo,this._delegate._path))}}class gt extends be{constructor(e,t){super(e,new Si(t._repo,t._path,new Of,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new gt(this.database,rc(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new gt(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new gt(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=Mb(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,re("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Bs("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=zm(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function eR(n,e,t){if(Bs("setWithPriority",n._path),Da("setWithPriority",e,n._path,!1),gb("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return Vm(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function kN(n){return Bs("remove",n._path),Mb(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function I(n,e,t){var r;if(n=(0,L.m9)(n),Bs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,d=qm(n,()=>{});return function XA(n,e,t,r,i,a){np(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:cv(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=ww(n,e,void 0);l.currentInputSnapshot=d;const g=l.update(d.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Jf("transaction failed: Data returned ",g,l.path),l.status=0;const v=fw(n.transactionQueueTree_,e),T=Qd(v)||[];let S;T.push(l),db(v,T),"object"==typeof g&&null!==g&&(0,L.r3)(g,".priority")?(S=(0,L.DV)(g,".priority"),(0,L.hu)(Nm(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(cw(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const P=nc(n),V=Zn(g,S),G=ub(V,d,P);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=G,l.currentWriteId=ep(n);const ce=Cm(n.serverSyncTree_,e,G,l.currentWriteId,l.applyLocally);qi(n.eventQueue_,e,ce),Bm(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,v,T)=>{let S=null;g?a.reject(g):(S=new Ku(T,new Co(n._repo,n._path),Ln),a.resolve(new y(v,S)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new ct(a.committed,new vt(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function ON(n,e){n=(0,L.m9)(n),Bs("setPriority",n._path),gb("setPriority",e,!1);const t=new L.BH;return Vm(n._repo,Kn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function NN(n,e){n=(0,L.m9)(n),Bs("push",n._path),Da("push",e,n._path,!0);const t=yb(n._repo),r=aA(t),i=rc(n,r),a=rc(n,r);let l;return l=null!=e?Mb(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new gt(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new gt(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Bs("Reference.onDisconnect",this._delegate._path),new qe(new bw(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class cn{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:GN,forceLongPolling:zN}}useEmulator(e,t,r={}){!function gR(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ya("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ya('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new wf(wf.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new wf(l)}!function jN(n,e,t,r){n.repoInfo_=new Ef(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof gt){const t=Pb(this._delegate,e.toString());return new gt(this,t)}{const t=xb(this._delegate,e);return new gt(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=Pb(this._delegate,e);return new gt(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function qN(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),Sa(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function s(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function QA(n){n.persistentConnection_&&n.persistentConnection_.resume(_b)}(n._repo)}(this._delegate)}}cn.ServerValue={TIMESTAMP:function h(){return c}(),increment:n=>function f(n){return{".sv":{increment:n}}}(n)};var ic=Object.freeze({__proto__:null,initStandalone:function tr({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Jg(t);const l=new ma.zt("auth-internal",new ma.H0("database-standalone"));return l.setComponent(new ma.wA("auth-internal",()=>r,"PRIVATE")),{instance:new cn(hR(n,l,void 0,e,a),n),namespace:i}}});const xw=cn.ServerValue;function Xm(n){return null==n}function Jm(n){return"function"==typeof n.set}function e_(n,e){return Jm(e)?e:n.ref(e)}function t_(n,e){if(function Mw(n){return"string"==typeof n}(n))return e.stringCase();if(Jm(n))return e.firebaseCase();if(function Nw(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function sc(n,e,t="on",r=yf.z){return new Cr.y(i=>{let a=null;return a=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,st.U)(i=>{const{snapshot:a,prevKey:l}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:l,key:d}}),(0,xg.B)())}function KN(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function MU(n,e){const{payload:t,prevKey:r,key:i}=e,a=KN(n,i),l=function PU(n,e){if(Xm(e))return 0;{const t=KN(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function ZN(n){return(Xm(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function YN(n,e,t){return function xU(n,e,t){return sc(n,"value","once",t).pipe(Gn(r=>{const i=[at(r)];return e.forEach(a=>i.push(sc(n,a,"on",t))),(0,Rg.T)(...i).pipe(Mt(MU,[]))}),sv())}(n,e=ZN(e),t)}function QN(n,e,t){const r=(e=ZN(e)).map(i=>sc(n,i,"on",t));return(0,Rg.T)(...r)}function XN(n,e){return function(r,i){return t_(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function LU(n){return function(t){return t?t_(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function JN(n,e){return function(){return sc(n,"value","on",e)}}!function Pw(n){n.INTERNAL.registerComponent(new ma.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new cn(i,r)},"PUBLIC").setServiceProps({Reference:gt,Query:be,Database:cn,DataSnapshot:vt,enableLogging:o,INTERNAL:ic,ServerValue:xw}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(ov.Z);const VU=new m.OlP("angularfire2.realtimeDatabaseURL"),BU=new m.OlP("angularfire2.database.use-emulator");let jU=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S,P,V,G,ce,ye){this.schedulers=d;const ot=g,dt=(0,Br.on)(t,l,r);v&&mf(dt,l,T,P,V,G,S,ce),this.database=(0,Br.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const ut=l.runOutsideAngular(()=>dt.database(i||void 0));return ot&&ut.useEmulator(...ot),ut},[ot])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>e_(this.database,t));let a=i;return r&&(a=r(i)),function FU(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XN(r,"update"),set:XN(r,"set"),push:i=>r.push(i),remove:LU(r),snapshotChanges:i=>YN(n,i,t).pipe(In.iC),stateChanges:i=>QN(n,i,t).pipe(In.iC),auditTrail:i=>function NU(n,e,t){return function OU(n,e,t){return function kU(n,e){return sc(n,"value","on",e).pipe((0,st.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function L0(...n){const e=(0,us.jO)(n);return(0,er.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),d=!1;for(let g=0;g<i;g++)(0,ui.Xf)(n[g]).subscribe((0,Wn.x)(r,v=>{a[g]=v,!d&&!l[g]&&(l[g]=!0,(d=l.every(uo.y))&&(l=null))},O0.Z));t.subscribe((0,Wn.x)(r,g=>{if(d){const v=[g,...a];r.next(e?e(...v):v)}}))})}(e),(0,st.U)(([i,a])=>{const l=i.lastKeyToLoad,d=a.map(g=>g.key);return{actions:a,lastKeyToLoad:l,loadedKeys:d}}),function F0(n){return(0,er.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Wn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,st.U)(i=>i.actions))}(n,QN(n,e).pipe(Mt((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(In.iC),valueChanges:(i,a)=>YN(n,i,t).pipe((0,st.U)(d=>d.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),In.iC)}}(a,this)}object(t){return function UU(n,e){return{query:n,snapshotChanges:()=>JN(n,e.schedulers.outsideAngular)().pipe(In.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>JN(n,e.schedulers.outsideAngular)().pipe(In.iC,(0,st.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>e_(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Br.Dh),m.LFG(Br.xv,8),m.LFG(VU,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(In.HU),m.LFG(BU,8),m.LFG(zg,8),m.LFG(Zy,8),m.LFG(Yy,8),m.LFG(gd,8),m.LFG(gf,8),m.LFG(md,8),m.LFG(f0,8),m.LFG(pd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HU=(()=>{class n{constructor(){Gg.Z.registerVersion("angularfire",In.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[jU]}),n})();const ek="firebasestorage.googleapis.com",tk="storageBucket";class yr extends L.ZR{constructor(e,t,r=0){super(mR(e),`Firebase Storage: ${t} (${mR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function mR(n){return"storage/"+n}function _R(){return new yr("unknown","An unknown error occurred, please check the error payload for server response.")}function nk(){return new yr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function rk(){return new yr("canceled","User canceled the upload/download.")}function ik(){return new yr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function n_(n){return new yr("invalid-argument",n)}function sk(){return new yr("app-deleted","The Firebase app was deleted.")}function ok(n){return new yr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kw(n,e){return new yr("invalid-format","String does not match format '"+n+"': "+e)}function Ow(n){throw new yr("internal-error","Internal error: "+n)}class Zi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Zi.makeFromUrl(e,t)}catch{return new Zi(e,"")}if(""===r.path)return r;throw function JU(n){return new yr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ft){ft.path_=decodeURIComponent(ft.path)}const S=t.replace(/[.]/g,"\\."),ut=[{regex:d,indices:{bucket:1,path:3},postModify:function a(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===ek?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ft=0;ft<ut.length;ft++){const Rt=ut[ft],jt=Rt.regex.exec(e);if(jt){let fu=jt[Rt.indices.path];fu||(fu=""),r=new Zi(jt[Rt.indices.bucket],fu),Rt.postModify(r);break}}if(null==r)throw function XU(n){return new yr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class iV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Bb(n){return"string"==typeof n||n instanceof String}function ak(n){return yR()&&n instanceof Blob}function yR(){return typeof Blob<"u"&&!(0,L.UG)()}function vR(n,e,t,r){if(r<e)throw n_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw n_(`Invalid value for '${n}'. Expected ${t} or less.`)}function oc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function uk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jd=(()=>{return(n=Jd||(Jd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Jd;var n})();function lk(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class cV{constructor(e,t,r,i,a,l,d,g,v,T,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=T,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function aV(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==d){const g=_R();g.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,g):g)}else l(i.canceled?this.appDelete_?sk():rk():nk())};this.canceled_?t(0,new jb(!1,null,!0)):this.backoffId_=function sV(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function g(){return 2===d}let v=!1;function T(...ye){v||(v=!0,e.apply(null,ye))}function S(ye){i=setTimeout(()=>{i=null,n(V,g())},ye)}function P(){a&&clearTimeout(a)}function V(ye,...ot){if(v)return void P();if(ye)return P(),void T.call(null,ye,...ot);if(g()||l)return P(),void T.call(null,ye,...ot);let ut;r<64&&(r*=2),1===d?(d=2,ut=0):ut=1e3*(r+Math.random()),S(ut)}let G=!1;function ce(ye){G||(G=!0,P(),!v&&(null!==i?(ye||(d=2),clearTimeout(i),S(0)):ye||(d=1)))}return S(0),a=setTimeout(()=>{l=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new jb(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Jd.NO_ERROR,g=a.getStatus();if((!d||lk(g,this.additionalRetryCodes_))&&this.retry){const T=a.getErrorCode()===Jd.ABORT;return void r(!1,new jb(!1,null,T))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new jb(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function oV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class jb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _V(...n){const e=function mV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(yR())return new Blob(n);throw new yr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const To={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wR{constructor(e,t){this.data=e,this.contentType=t||null}}function IR(n,e){switch(n){case To.RAW:return new wR(ck(e));case To.BASE64:case To.BASE64URL:return new wR(dk(n,e));case To.DATA_URL:return new wR(function IV(n){const e=new hk(n);return e.base64?dk(To.BASE64,e.rest):function wV(n){let e;try{e=decodeURIComponent(n)}catch{throw kw(To.DATA_URL,"Malformed data URL.")}return ck(e)}(e.rest)}(e),function EV(n){return new hk(n).contentType}(e))}throw _R()}function ck(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function dk(n,e){switch(n){case To.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw kw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case To.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw kw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function vV(n){if(typeof atob>"u")throw function rV(n){return new yr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:kw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class hk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw kw(To.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function CV(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Zu{constructor(e,t){let r=0,i="";ak(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ak(this.data_)){const i=function yV(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Zu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Zu(r,!0)}}static getBlob(...e){if(yR()){const t=e.map(r=>r instanceof Zu?r.data_:r);return new Zu(_V.apply(null,t))}{const t=e.map(l=>Bb(l)?IR(To.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new Zu(i,!0)}}uploadData(){return this.data_}}function ER(n){let e;try{e=JSON.parse(n)}catch{return null}return function lV(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function fk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function DV(n,e){return e}class ms{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||DV}}let Hb=null;function Lw(){if(Hb)return Hb;const n=[];n.push(new ms("bucket")),n.push(new ms("generation")),n.push(new ms("metageneration")),n.push(new ms("name","fullPath",!0));const t=new ms("name");t.xform=function e(a,l){return function SV(n){return!Bb(n)||n.length<2?n:fk(n)}(l)},n.push(t);const i=new ms("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new ms("timeCreated")),n.push(new ms("updated")),n.push(new ms("md5Hash",null,!0)),n.push(new ms("cacheControl",null,!0)),n.push(new ms("contentDisposition",null,!0)),n.push(new ms("contentEncoding",null,!0)),n.push(new ms("contentLanguage",null,!0)),n.push(new ms("contentType",null,!0)),n.push(new ms("metadata","customMetadata",!0)),Hb=n,Hb}function pk(n,e,t){const r=ER(e);return null===r?null:function RV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function AV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Zi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function CR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const gk="prefixes";class Yu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Qu(n){if(!n)throw _R()}function $b(n,e){return function t(r,i){const a=pk(n,i,e);return Qu(null!==a),a}}function r_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function YU(){return new yr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function ZU(){return new yr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function KU(n){return new yr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function QU(n){return new yr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Fw(n){const e=r_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function qU(n){return new yr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function _k(n,e,t){const i=oc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Yu(i,"GET",$b(n,t),l);return d.errorHandler=Fw(e),d}function OV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=oc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,T=new Yu(d,"GET",function NV(n,e){return function t(r,i){const a=function MV(n,e,t){const r=ER(t);return null===r?null:function PV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[gk])for(const i of t[gk]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Zi(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Zi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Qu(null!==a),a}}(n,e.bucket),v);return T.urlParams=a,T.errorHandler=r_(e),T}function vk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function VV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Wb{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function bR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Qu(!1)}return Qu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const $V={STATE_CHANGED:"state_changed"},_s={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function TR(n){switch(n){case"running":case"pausing":case"canceling":return _s.RUNNING;case"paused":return _s.PAUSED;case"success":return _s.SUCCESS;case"canceled":return _s.CANCELED;default:return _s.ERROR}}class WV{constructor(e,t,r){if(function uV(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function i_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class zV extends class GV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ow("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ow("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ow("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ow("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ow("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function du(){return new zV}class Ck{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Lw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(lk(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=nk()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function BV(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=vk(e,r,i),d={name:l.fullPath},g=oc(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=CR(l,t),G=new Yu(g,"POST",function V(ce){let ye;bR(ce);try{ye=ce.getResponseHeader("X-Goog-Upload-URL")}catch{Qu(!1)}return Qu(Bb(ye)),ye},n.maxUploadRetryTime);return G.urlParams=d,G.headers=T,G.body=S,G.errorHandler=r_(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,du,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function jV(n,e,t,r){const g=new Yu(t,"POST",function a(v){const T=bR(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Qu(!1)}S||Qu(!1);const P=Number(S);return Qu(!isNaN(P)),new Wb(P,r.size(),"final"===T)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=r_(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,du,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Wb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function HV(n,e,t,r,i,a,l,d){const g=new Wb(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function tV(){return new yr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let T=v;i>0&&(T=Math.min(T,i));const S=g.current;let V="";V=0===T?"finalize":v===T?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${g.current}`},ce=r.slice(S,S+T);if(null===ce)throw ik();const ut=new Yu(t,"POST",function ye(ft,Rt){const jt=bR(ft,["active","final"]),vr=g.current+T,fu=r.size();let EM;return EM="final"===jt?$b(e,a)(ft,Rt):null,new Wb(vr,fu,"final"===jt,EM)},e.maxUploadRetryTime);return ut.headers=G,ut.body=ce.uploadData(),ut.progressCallback=d||null,ut.errorHandler=r_(n),ut}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const d=this._ref.storage._makeRequest(l,du,i,a,!1);this._request=d,d.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=_k(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,du,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function wk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function d(){let ut="";for(let ft=0;ft<2;ft++)ut+=Math.random().toString().slice(2);return ut}();l["Content-Type"]="multipart/related; boundary="+g;const v=vk(e,r,i),T=CR(v,t),V=Zu.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===V)throw ik();const G={name:v.fullPath},ce=oc(a,n.host,n._protocol),ot=n.maxUploadRetryTime,dt=new Yu(ce,"POST",$b(n,t),ot);return dt.urlParams=G,dt.headers=l,dt.body=V.uploadData(),dt.errorHandler=r_(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,du,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=rk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=TR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new WV(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(TR(this._state)){case _s.SUCCESS:i_(this._resolve.bind(null,this.snapshot))();break;case _s.CANCELED:case _s.ERROR:i_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(TR(this._state)){case _s.RUNNING:case _s.PAUSED:e.next&&i_(e.next.bind(e,this.snapshot))();break;case _s.SUCCESS:e.complete&&i_(e.complete.bind(e))();break;default:e.error&&i_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ap{constructor(e,t){this._service=e,this._location=t instanceof Zi?t:Zi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ap(e,t)}get root(){const e=new Zi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fk(this._location.path)}get storage(){return this._service}get parent(){const e=function bV(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Zi(this._location.bucket,e);return new ap(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw ok(e)}}function Tk(n,e,t){return DR.apply(this,arguments)}function DR(){return(DR=(0,Ie.Z)(function*(n,e,t){const i=yield Dk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Tk(n,e,i.nextPageToken))})).apply(this,arguments)}function Dk(n,e){null!=e&&"number"==typeof e.maxResults&&vR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=OV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,du)}function iB(n){n._throwIfRoot("getDownloadURL");const e=function LV(n,e,t){const i=oc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Yu(i,"GET",function kV(n,e){return function t(r,i){const a=pk(n,i,e);return Qu(null!==a),function xV(n,e,t,r){const i=ER(e);if(null===i||!Bb(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return oc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+uk({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=Fw(e),d}(n.storage,n._location,Lw());return n.storage.makeRequestWithTokens(e,du).then(t=>{if(null===t)throw function nV(){return new yr("no-download-url","The given file does not have any download URLs.")}();return t})}function Sk(n,e){const t=function TV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Zi(n._location.bucket,t);return new ap(n.storage,r)}function Ak(n,e){if(n instanceof SR){const t=n;if(null==t._bucket)throw function eV(){return new yr("no-default-bucket","No default bucket found. Did you set the '"+tk+"' property when initializing the app?")}();const r=new ap(t,t._bucket);return null!=e?Ak(r,e):r}return void 0!==e?Sk(n,e):n}function uB(n,e){if(e&&function oB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof SR)return function aB(n,e){return new ap(n,e)}(n,e);throw n_("To use ref(service, url), the first argument must be a Storage instance.")}return Ak(n,e)}function Rk(n,e){const t=e?.[tk];return null==t?null:Zi.makeFromBucketSpec(t,n)}class SR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ek,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Zi.makeFromBucketSpec(i,this._host):Rk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Zi.makeFromBucketSpec(this._url,e):Rk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ie.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ie.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ap(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new iV(sk());{const l=function gV(n,e,t,r,i,a,l=!0){const d=uk(n.urlParams),g=n.url+d,v=Object.assign({},n.headers);return function fV(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function dV(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function hV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function pV(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new cV(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ie.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const xk="@firebase/storage";function Nk(n,e){return uB(n=(0,L.m9)(n),e)}function yB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new SR(t,r,i,e,bi.SDK_VERSION)}!function vB(){(0,bi._registerComponent)(new ma.wA("storage",yB,"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(xk,"0.9.14",""),(0,bi.registerVersion)(xk,"0.9.14","esm2017")}();class Gb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ok{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Gb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Gb(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new Gb(l,this,this._ref)):{next:t.next?l=>t.next(new Gb(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Lk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ac(e,this._service))}get items(){return this._delegate.items.map(e=>new ac(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ac{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function _B(n,e){return Sk(n,e)}(this._delegate,e);return new ac(t,this.storage)}get root(){return new ac(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ac(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Ok(function cB(n,e,t){return function JV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ck(n,new Zu(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=To.RAW,r){this._throwIfRoot("putString");const i=IR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Ok(new Ck(this._delegate,new Zu(i.data,!0),a),this)}listAll(){return function pB(n){return function tB(n){const e={prefixes:[],items:[]};return Tk(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new Lk(e,this.storage))}list(e){return function fB(n,e){return Dk(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Lk(t,this.storage))}getMetadata(){return function dB(n){return function nB(n){n._throwIfRoot("getMetadata");const e=_k(n.storage,n._location,Lw());return n.storage.makeRequestWithTokens(e,du)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function hB(n,e){return function rB(n,e){n._throwIfRoot("updateMetadata");const t=function FV(n,e,t,r){const a=oc(e.fullServerUrl(),n.host,n._protocol),d=CR(t,r),v=n.maxOperationRetryTime,T=new Yu(a,"PATCH",$b(n,r),v);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=d,T.errorHandler=Fw(e),T}(n.storage,n._location,e,Lw());return n.storage.makeRequestWithTokens(t,du)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function gB(n){return iB(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function mB(n){return function sB(n){n._throwIfRoot("deleteObject");const e=function UV(n,e){const r=oc(e.fullServerUrl(),n.host,n._protocol),d=new Yu(r,"DELETE",function l(g,v){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Fw(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,du)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw ok(e)}}class Fk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Uk(e))throw n_("ref() expected a child path but got a URL, use refFromURL instead.");return new ac(Nk(this._delegate,e),this)}refFromURL(e){if(!Uk(e))throw n_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Zi.makeFromUrl(e,this._delegate.host)}catch{throw n_("refFromUrl() expected a valid full URL but got an invalid one.")}return new ac(Nk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function kk(n,e,t,r={}){!function lB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Uk(n){return/^[A-Za-z]+:\/\//.test(n)}function CB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Fk(t,r)}function Vk(n){const e=function TB(n){return new Cr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function $U(n,e=yf.z){return(0,er.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function g(){const v=l+n,T=e.now();if(T<v)return i=this.schedule(void 0,v-T),void r.add(i);d()}t.subscribe((0,Wn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,st.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function zb(n){return{getDownloadURL:()=>at(void 0).pipe(In.fc,Gn(()=>n.getDownloadURL()),In.iC),getMetadata:()=>at(void 0).pipe(In.fc,Gn(()=>n.getMetadata()),In.iC),delete:()=>(0,un.D)(n.delete()),child:e=>zb(n.child(e)),updateMetadata:e=>(0,un.D)(n.updateMetadata(e)),put:(e,t)=>Vk(n.put(e,t)),putString:(e,t,r)=>Vk(n.putString(e,t,r)),list:e=>(0,un.D)(n.list(e)),listAll:()=>(0,un.D)(n.listAll())}}!function bB(n){const e={TaskState:_s,TaskEvent:$V,StringFormat:To,Storage:Fk,Reference:ac};n.INTERNAL.registerComponent(new ma.wA("storage-compat",CB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(ov.Z);const DB=new m.OlP("angularfire2.storageBucket"),SB=new m.OlP("angularfire2.storage.maxUploadRetryTime"),AB=new m.OlP("angularfire2.storage.maxOperationRetryTime"),RB=new m.OlP("angularfire2.storage.use-emulator");let xB=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S){const P=(0,Br.on)(t,l,r);this.storage=(0,Br.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=l.runOutsideAngular(()=>P.storage(i||void 0)),G=T;return G&&V.useEmulator(...G),g&&V.setMaxUploadRetryTime(g),v&&V.setMaxOperationRetryTime(v),V},[g,v])}ref(t){return zb(this.storage.ref(t))}refFromURL(t){return zb(this.storage.refFromURL(t))}upload(t,r,i){return zb(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Br.Dh),m.LFG(Br.xv,8),m.LFG(DB,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(In.HU),m.LFG(SB,8),m.LFG(AB,8),m.LFG(RB,8),m.LFG(pd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),MB=(()=>{class n{constructor(){Gg.Z.registerVersion("angularfire",In.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[xB],imports:[PB]}),n})();function AR(){return(0,er.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Et,NB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uc={},RR=RR||{},Gt=NB||self;function qb(){}function Kb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Uw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var xR="closure_uid_"+(1e9*Math.random()>>>0),OB=0;function LB(n,e,t){return n.call.apply(n.bind,arguments)}function FB(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yi(n,e,t){return(Yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LB:FB).apply(null,arguments)}function Zb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ai(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function eh(){this.s=this.s,this.o=this.o}eh.prototype.s=!1,eh.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function kB(n){Object.prototype.hasOwnProperty.call(n,xR)&&n[xR]||(n[xR]=++OB)}(this)},eh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Bk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function PR(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function jk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Kb(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qi.prototype.h=function(){this.defaultPrevented=!0};var VB=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",qb,e),Gt.removeEventListener("test",qb,e)}catch{}return n}();function Yb(n){return/^[\s\xa0]*$/.test(n)}var Hk=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function MR(n,e){return n<e?-1:n>e?1:0}function Qb(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function Xu(n){return-1!=Qb().indexOf(n)}function NR(n){return NR[" "](n),n}NR[" "]=qb;var Xb,n,jB=Xu("Opera"),s_=Xu("Trident")||Xu("MSIE"),$k=Xu("Edge"),kR=$k||s_,Wk=Xu("Gecko")&&!(-1!=Qb().toLowerCase().indexOf("webkit")&&!Xu("Edge"))&&!(Xu("Trident")||Xu("MSIE"))&&!Xu("Edge"),HB=-1!=Qb().toLowerCase().indexOf("webkit")&&!Xu("Edge");function Gk(){var n=Gt.document;return n?n.documentMode:void 0}e:{var OR="",LR=(n=Qb(),Wk?/rv:([^\);]+)(\)|;)/.exec(n):$k?/Edge\/([\d\.]+)/.exec(n):s_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):HB?/WebKit\/(\S+)/.exec(n):jB?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(LR&&(OR=LR?LR[1]:""),s_){var FR=Gk();if(null!=FR&&FR>parseFloat(OR)){Xb=String(FR);break e}}Xb=OR}var $B={};var GB=Gt.document&&s_&&(Gk()||parseInt(Xb,10))||void 0;function Vw(n,e){if(Qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Wk){e:{try{NR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zB[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vw.X.h.call(this)}}Ai(Vw,Qi);var zB={2:"touch",3:"pen",4:"mouse"};Vw.prototype.h=function(){Vw.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bw="closure_listenable_"+(1e6*Math.random()|0),qB=0;function KB(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++qB,this.ba=this.ea=!1}function Jb(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function VR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function qk(n){const e={};for(const t in n)e[t]=n[t];return e}const Kk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zk(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Kk.length;a++)t=Kk[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function eT(n){this.src=n,this.g={},this.h=0}function BR(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Bk(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Jb(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jR(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}eT.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=jR(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new KB(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var HR="closure_lm_"+(1e6*Math.random()|0),$R={};function Yk(n,e,t,r,i){if(r&&r.once)return Xk(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Yk(n,e[a],t,r,i);return null}return t=qR(t),n&&n[Bw]?n.N(e,t,Uw(r)?!!r.capture:!!r,i):Qk(n,e,t,!1,r,i)}function Qk(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Uw(i)?!!i.capture:!!i,d=GR(n);if(d||(n[HR]=d=new eT(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function ZB(){const e=YB;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)VB||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(eO(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Xk(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Xk(n,e[a],t,r,i);return null}return t=qR(t),n&&n[Bw]?n.O(e,t,Uw(r)?!!r.capture:!!r,i):Qk(n,e,t,!0,r,i)}function Jk(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Jk(n,e[a],t,r,i);else r=Uw(r)?!!r.capture:!!r,t=qR(t),n&&n[Bw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jR(a=n.g[e],t,r,i))&&(Jb(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=GR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jR(e,t,r,i)),(t=-1<n?e[n]:null)&&WR(t))}function WR(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Bw])BR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(eO(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=GR(e))?(BR(t,n),0==t.h&&(t.src=null,e[HR]=null)):Jb(n)}}}function eO(n){return n in $R?$R[n]:$R[n]="on"+n}function YB(n,e){if(n.ba)n=!0;else{e=new Vw(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&WR(n),n=t.call(r,e)}return n}function GR(n){return(n=n[HR])instanceof eT?n:null}var zR="__closure_events_fn_"+(1e9*Math.random()>>>0);function qR(n){return"function"==typeof n?n:(n[zR]||(n[zR]=function(e){return n.handleEvent(e)}),n[zR])}function pi(){eh.call(this),this.i=new eT(this),this.P=this,this.I=null}function Ri(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Qi(e,n);else if(e instanceof Qi)e.target=e.target||n;else{var i=e;Zk(e=new Qi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=tT(l,r,!0,e)&&i}if(i=tT(l=e.g=n,r,!0,e)&&i,i=tT(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=tT(l=e.g=t[a],r,!1,e)&&i}function tT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var d=l.listener,g=l.ha||l.src;l.ea&&BR(n.i,l),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}Ai(pi,eh),pi.prototype[Bw]=!0,pi.prototype.removeEventListener=function(n,e,t,r){Jk(this,n,e,t,r)},pi.prototype.M=function(){if(pi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jb(t[r]);delete n.g[e],n.h--}}this.I=null},pi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},pi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var KR=Gt.JSON.stringify;function QB(){var n=rO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ZR,tO=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new JB,n=>n.reset());class JB{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function e2(n){Gt.setTimeout(()=>{throw n},0)}function nO(n,e){ZR||function t2(){var n=Gt.Promise.resolve(void 0);ZR=function(){n.then(n2)}}(),YR||(ZR(),YR=!0),rO.add(n,e)}var YR=!1,rO=new class XB{constructor(){this.h=this.g=null}add(e,t){const r=tO.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function n2(){for(var n;n=QB();){try{n.h.call(n.g)}catch(t){e2(t)}var e=tO;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}YR=!1}function nT(n,e){pi.call(this),this.h=n||1,this.g=e||Gt,this.j=Yi(this.lb,this),this.l=Date.now()}function QR(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function XR(n,e,t){if("function"==typeof n)t&&(n=Yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function iO(n){n.g=XR(()=>{n.g=null,n.i&&(n.i=!1,iO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ai(nT,pi),(Et=nT.prototype).ca=!1,Et.R=null,Et.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ri(this,"tick"),this.ca&&(QR(this),this.start()))}},Et.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Et.M=function(){nT.X.M.call(this),QR(this),delete this.g};class r2 extends eh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iO(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jw(n){eh.call(this),this.h=n,this.g={}}Ai(jw,eh);var sO=[];function oO(n,e,t,r){Array.isArray(t)||(t&&(sO[0]=t.toString()),t=sO);for(var i=0;i<t.length;i++){var a=Yk(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function aO(n){VR(n.g,function(e,t){this.g.hasOwnProperty(t)&&WR(e)},n),n.g={}}function rT(){this.g=!0}function o_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function a2(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return KR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}jw.prototype.M=function(){jw.X.M.call(this),aO(this)},jw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rT.prototype.Aa=function(){this.g=!1},rT.prototype.info=function(){};var up={},uO=null;function iT(){return uO=uO||new pi}function lO(n){Qi.call(this,up.Pa,n)}function Hw(n){const e=iT();Ri(e,new lO(e))}function cO(n,e){Qi.call(this,up.STAT_EVENT,n),this.stat=e}function ys(n){const e=iT();Ri(e,new cO(e,n))}function dO(n,e){Qi.call(this,up.Qa,n),this.size=e}function $w(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}up.Pa="serverreachability",Ai(lO,Qi),up.STAT_EVENT="statevent",Ai(cO,Qi),up.Qa="timingevent",Ai(dO,Qi);var sT={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},hO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function JR(){}function pO(){}JR.prototype.h=null;var nx,Ww={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ex(){Qi.call(this,"d")}function tx(){Qi.call(this,"c")}function oT(){}function Gw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new jw(this),this.O=u2,this.T=new nT(n=kR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new gO}function gO(){this.i=null,this.g="",this.h=!1}Ai(ex,Qi),Ai(tx,Qi),Ai(oT,JR),oT.prototype.g=function(){return new XMLHttpRequest},oT.prototype.i=function(){return{}},nx=new oT;var u2=45e3,rx={},aT={};function ix(n,e,t){n.K=1,n.v=dT(lc(e)),n.s=t,n.P=!0,mO(n,null)}function mO(n,e){n.F=Date.now(),zw(n),n.A=lc(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),DO(t.i,"t",r),n.C=0,t=n.l.H,n.h=new gO,n.g=YO(n.l,t?e:null,!n.s),0<n.N&&(n.L=new r2(Yi(n.La,n,n.g),n.N)),oO(n.S,n.g,"readystatechange",n.ib),e=n.H?qk(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Hw(),function i2(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),g=0;g<d.length;g++){var v=d[g].split("=");if(1<v.length){var T=v[0];v=v[1];var S=T.split("_");l=2<=S.length&&"type"==S[1]?l+(T+"=")+v+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function _O(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function yO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=l2(n,t),i==aT){4==e&&(n.o=4,ys(14),r=!1),o_(n.j,n.m,null,"[Incomplete Response]");break}if(i==rx){n.o=4,ys(15),o_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}o_(n.j,n.m,i,null),sx(n,i)}_O(n)&&i!=aT&&i!=rx&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ys(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),fx(e),e.K=!0,ys(11))):(o_(n.j,n.m,t,"[Invalid Chunked Response]"),lp(n),qw(n))}function l2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?aT:(t=Number(e.substring(t,r)),isNaN(t)?rx:(r+=1)+t>e.length?aT:(e=e.substr(r,t),n.C=r+t,e))}function zw(n){n.V=Date.now()+n.O,vO(n,n.O)}function vO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$w(Yi(n.gb,n),e)}function uT(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function qw(n){0==n.l.G||n.I||zO(n.l,n)}function lp(n){uT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,QR(n.T),aO(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sx(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ox(t.h,n)))if(!n.J&&ox(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;_T(t),gT(t)}hx(t),ys(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=$w(Yi(t.cb,t),6e3));if(1>=RO(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else dp(t,11)}else if((n.J||t.g==n)&&_T(t),!Yb(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const T=v[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const G=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(ax(a,a.h),a.h=null))}if(r.D){const ce=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,hr(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=ZO(r,r.H?r.ka:null,r.V),l.J){xO(r.h,l);var d=l,g=r.J;g&&d.setTimeout(g),d.B&&(uT(d),zw(d)),r.g=l}else WO(r);0<t.i.length&&mT(t)}else"stop"!=v[0]&&"close"!=v[0]||dp(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?dp(t,7):dx(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}Hw()}catch{}}function wO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Kb(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function d2(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Kb(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function c2(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Kb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Et=Gw.prototype).setTimeout=function(n){this.O=n},Et.ib=function(n){n=n.target;const e=this.L;e&&3==cc(n)?e.l():this.La(n)},Et.La=function(n){try{if(n==this.g)e:{const T=cc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||kR||this.g&&(this.h.h||this.g.fa()||UO(this.g)))){this.I||4!=T||7==e||Hw(),uT(this);var t=this.g.aa();this.Y=t;t:if(_O(this)){var r=UO(this.g);n="";var i=r.length,a=4==cc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){lp(this),qw(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function s2(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yb(d)){var v=d;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ys(12),lp(this),qw(this);break e}o_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sx(this,t)}this.P?(yO(this,T,l),kR&&this.i&&3==T&&(oO(this.S,this.T,"tick",this.hb),this.T.start())):(o_(this.j,this.m,l,null),sx(this,l)),4==T&&lp(this),this.i&&!this.I&&(4==T?zO(this.l,this):(this.i=!1,zw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ys(12)):(this.o=0,ys(13)),lp(this),qw(this)}}}catch{}},Et.hb=function(){if(this.g){var n=cc(this.g),e=this.g.fa();this.C<e.length&&(uT(this),yO(this,n,e),this.i&&4!=n&&zw(this))}},Et.cancel=function(){this.I=!0,lp(this)},Et.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function o2(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hw(),ys(17)),lp(this),this.o=2,qw(this)):vO(this,this.V-n)};var IO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof cp){this.h=void 0!==e?e:n.h,lT(this,n.j),this.s=n.s,this.g=n.g,cT(this,n.m),this.l=n.l,e=n.i;var t=new Yw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),EO(this,t),this.o=n.o}else n&&(t=String(n).match(IO))?(this.h=!!e,lT(this,t[1]||"",!0),this.s=Kw(t[2]||""),this.g=Kw(t[3]||"",!0),cT(this,t[4]),this.l=Kw(t[5]||"",!0),EO(this,t[6]||"",!0),this.o=Kw(t[7]||"")):(this.h=!!e,this.i=new Yw(null,this.h))}function lc(n){return new cp(n)}function lT(n,e,t){n.j=t?Kw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function cT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function EO(n,e,t){e instanceof Yw?(n.i=e,function y2(n,e){e&&!n.j&&(th(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(bO(this,r),DO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Zw(e,m2)),n.i=new Yw(e,n.h))}function hr(n,e,t){n.i.set(e,t)}function dT(n){return hr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Kw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,f2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function f2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zw(e,CO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zw(e,CO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zw(t,"/"==t.charAt(0)?g2:p2,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zw(t,_2)),n.join("")};var CO=/[#\/\?@]/g,p2=/[#\?:]/g,g2=/[#\?]/g,m2=/[#\?@]/g,_2=/#/g;function Yw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function th(n){n.g||(n.g=new Map,n.h=0,n.i&&function h2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bO(n,e){th(n),e=a_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function TO(n,e){return th(n),e=a_(n,e),n.g.has(e)}function DO(n,e,t){bO(n,e),0<t.length&&(n.i=null,n.g.set(a_(n,e),PR(t)),n.h+=t.length)}function a_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function SO(n){this.l=n||w2,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Et=Yw.prototype).add=function(n,e){th(this),this.i=null,n=a_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Et.forEach=function(n,e){th(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Et.oa=function(){th(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Et.W=function(n){th(this);let e=[];if("string"==typeof n)TO(this,n)&&(e=e.concat(this.g.get(a_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Et.set=function(n,e){return th(this),this.i=null,TO(this,n=a_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Et.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var w2=10;function AO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function RO(n){return n.h?1:n.g?n.g.size:0}function ox(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ax(n,e){n.g?n.g.add(e):n.h=e}function xO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function PO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return PR(n.i)}function ux(){}function I2(){this.g=new ux}function E2(n,e,t){const r=t||"";try{wO(n,function(i,a){let l=i;Uw(i)&&(l=KR(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Qw(n){this.l=n.ac||null,this.j=n.jb||!1}function fT(n,e){pi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=lx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SO.prototype.cancel=function(){if(this.i=PO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ux.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},ux.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Ai(Qw,JR),Qw.prototype.g=function(){return new fT(this.l,this.j)},Qw.prototype.i=function(n){return function(){return n}}({}),Ai(fT,pi);var lx=0;function MO(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Xw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jw(n)}function Jw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Et=fT.prototype).open=function(n,e){if(this.readyState!=lx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jw(this)},Et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xw(this)),this.readyState=lx},Et.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jw(this)),this.g&&(this.readyState=3,Jw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MO(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Et.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xw(this):Jw(this),3==this.readyState&&MO(this)}},Et.Va=function(n){this.g&&(this.response=this.responseText=n,Xw(this))},Et.Ua=function(n){this.g&&(this.response=n,Xw(this))},Et.ga=function(){this.g&&Xw(this)},Et.setRequestHeader=function(n,e){this.v.append(n,e)},Et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var b2=Gt.JSON.parse;function Tr(n){pi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=NO,this.K=this.L=!1}Ai(Tr,pi);var NO="",T2=/^https?$/i,D2=["POST","PUT"];function kO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,OO(n),pT(n)}function OO(n){n.D||(n.D=!0,Ri(n,"complete"),Ri(n,"error"))}function LO(n){if(n.h&&typeof RR<"u"&&(!n.C[1]||4!=cc(n)||2!=n.aa()))if(n.v&&4==cc(n))XR(n.Ha,0,n);else if(Ri(n,"readystatechange"),4==cc(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(IO)[1]||null;if(!i&&Gt.self&&Gt.self.location){var a=Gt.self.location.protocol;i=a.substr(0,a.length-1)}r=!T2.test(i?i.toLowerCase():"")}t=r}if(t)Ri(n,"complete"),Ri(n,"success");else{n.m=6;try{var l=2<cc(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",OO(n)}}finally{pT(n)}}}function pT(n,e){if(n.g){FO(n);const t=n.g,r=n.C[0]?qb:null;n.g=null,n.C=null,e||Ri(n,"ready");try{t.onreadystatechange=r}catch{}}}function FO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function cc(n){return n.g?n.g.readyState:0}function UO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case NO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function VO(n){let e="";return VR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function cx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=VO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):hr(n,e,t))}function eI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function BO(n){this.Ca=0,this.i=[],this.j=new rT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=eI("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=eI("baseRetryDelayMs",5e3,n),this.bb=eI("retryDelaySeedMs",1e4,n),this.$a=eI("forwardChannelMaxRetries",2,n),this.ta=eI("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new SO(n&&n.concurrentRequestLimit),this.Fa=new I2,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function dx(n){if(jO(n),3==n.G){var e=n.U++,t=lc(n.F);hr(t,"SID",n.I),hr(t,"RID",e),hr(t,"TYPE","terminate"),tI(n,t),(e=new Gw(n,n.j,e,void 0)).K=2,e.v=dT(lc(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=YO(e.l,null),e.g.da(e.v)),e.F=Date.now(),zw(e)}KO(n)}function gT(n){n.g&&(fx(n),n.g.cancel(),n.g=null)}function jO(n){gT(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),_T(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function mT(n){AO(n.h)||n.m||(n.m=!0,nO(n.Ja,n),n.C=0)}function HO(n,e){var t;t=e?e.m:n.U++;const r=lc(n.F);hr(r,"SID",n.I),hr(r,"RID",t),hr(r,"AID",n.T),tI(n,r),n.o&&n.s&&cx(r,n.o,n.s),t=new Gw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=$O(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ax(n.h,t),ix(t,r,e)}function tI(n,e){n.ia&&VR(n.ia,function(t,r){hr(e,r,t)}),n.l&&wO({},function(t,r){hr(e,r,t)})}function $O(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Yi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let g=0;g<t;g++){let v=i[g].h;const T=i[g].g;if(v-=a,0>v)a=Math.max(0,i[g].h-100),d=!1;else try{E2(T,l,"req"+v+"_")}catch{r&&r(T)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function WO(n){n.g||n.u||(n.Z=1,nO(n.Ia,n),n.A=0)}function hx(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=$w(Yi(n.Ia,n),qO(n,n.A)),n.A++,0))}function fx(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function GO(n){n.g=new Gw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=lc(n.sa);hr(e,"RID","rpc"),hr(e,"SID",n.I),hr(e,"CI",n.L?"0":"1"),hr(e,"AID",n.T),hr(e,"TYPE","xmlhttp"),tI(n,e),n.o&&n.s&&cx(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=dT(lc(e)),t.s=null,t.P=!0,mO(t,n)}function _T(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function zO(n,e){var t=null;if(n.g==e){_T(n),fx(n),n.g=null;var r=2}else{if(!ox(n.h,e))return;t=e.D,xO(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ri(r=iT(),new dO(r,t)),mT(n)}else WO(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function A2(n,e){return!(RO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=$w(Yi(n.Ja,n,e),qO(n,n.C)),n.C++,0)))}(n,e)||2==r&&hx(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:dp(n,5);break;case 4:dp(n,10);break;case 3:dp(n,6);break;default:dp(n,2)}}function qO(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function dp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Yi(n.kb,n);t||(t=new cp("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||lT(t,"https"),dT(t)),function C2(n,e){const t=new rT;if(Gt.Image){const r=new Image;r.onload=Zb(hT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Zb(hT,t,r,"TestLoadImage: error",!1,e),r.onabort=Zb(hT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zb(hT,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ys(2);n.G=0,n.l&&n.l.va(e),KO(n),jO(n)}function KO(n){if(n.G=0,n.la=[],n.l){const e=PO(n.h);(0!=e.length||0!=n.i.length)&&(jk(n.la,e),jk(n.la,n.i),n.h.i.length=0,PR(n.i),n.i.length=0),n.l.ua()}}function ZO(n,e,t){var r=t instanceof cp?lc(t):new cp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),cT(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new cp(null,void 0);r&&lT(a,r),e&&(a.g=e),i&&cT(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&hr(r,t,e),hr(r,"VER",n.ma),tI(n,r),r}function YO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&n.Da&&!n.ra?new Qw({jb:!0}):n.ra)).Ka(n.H),e}function QO(){}function yT(){if(s_&&!(10<=Number(GB)))throw Error("Environmental error: no available transport.")}function Do(n,e){pi.call(this),this.g=new BO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Yb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new u_(this)}function XO(n){ex.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function JO(){tx.call(this),this.status=1}function u_(n){this.g=n}(Et=Tr.prototype).Ka=function(n){this.L=n},Et.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nx.g(),this.C=function fO(n){return n.h||(n.h=n.i())}(this.u?this.u:nx),this.g.onreadystatechange=Yi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void kO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=Bk(D2,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{FO(this),0<this.B&&((this.K=function S2(n){return s_&&function WB(){return function BB(n){var e=$B;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Hk(String(Xb)).split("."),t=Hk("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=MR(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||MR(0==i[2].length,0==a[2].length)||MR(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yi(this.qa,this)):this.A=XR(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){kO(this,a)}},Et.qa=function(){typeof RR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ri(this,"timeout"),this.abort(8))},Et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ri(this,"complete"),Ri(this,"abort"),pT(this))},Et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pT(this,!0)),Tr.X.M.call(this)},Et.Ha=function(){this.s||(this.F||this.v||this.l?LO(this):this.fb())},Et.fb=function(){LO(this)},Et.aa=function(){try{return 2<cc(this)?this.g.status:-1}catch{return-1}},Et.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Et.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),b2(e)}},Et.Ea=function(){return this.m},Et.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Et=BO.prototype).ma=8,Et.G=1,Et.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Gw(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=qk(a),Zk(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$O(this,i,e),hr(t=lc(this.F),"RID",n),hr(t,"CVER",22),this.D&&hr(t,"X-HTTP-Session-Id",this.D),tI(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(VO(a)))+"&"+e:this.o&&cx(t,this.o,a)),ax(this.h,i),this.Ya&&hr(t,"TYPE","init"),this.O?(hr(t,"$req",e),hr(t,"SID","null"),i.Z=!0,ix(i,t,null)):ix(i,t,e),this.G=2}}else 3==this.G&&(n?HO(this,n):0==this.i.length||AO(this.h)||HO(this))},Et.Ia=function(){if(this.u=null,GO(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=$w(Yi(this.eb,this),n)}},Et.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ys(10),gT(this),GO(this))},Et.cb=function(){null!=this.v&&(this.v=null,gT(this),hx(this),ys(19))},Et.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ys(2)):(this.j.info("Failed to ping google.com"),ys(1))},(Et=QO.prototype).xa=function(){},Et.wa=function(){},Et.va=function(){},Et.ua=function(){},Et.Ra=function(){},yT.prototype.g=function(n,e){return new Do(n,e)},Ai(Do,pi),Do.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ys(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ZO(n,null,n.V),mT(n)},Do.prototype.close=function(){dx(this.g)},Do.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=KR(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&mT(e)},Do.prototype.M=function(){this.g.l=null,delete this.j,dx(this.g),delete this.g,Do.X.M.call(this)},Ai(XO,ex),Ai(JO,tx),Ai(u_,QO),u_.prototype.xa=function(){Ri(this.g,"a")},u_.prototype.wa=function(n){Ri(this.g,new XO(n))},u_.prototype.va=function(n){Ri(this.g,new JO)},u_.prototype.ua=function(){Ri(this.g,"b")},yT.prototype.createWebChannel=yT.prototype.g,Do.prototype.send=Do.prototype.u,Do.prototype.open=Do.prototype.m,Do.prototype.close=Do.prototype.close,sT.NO_ERROR=0,sT.TIMEOUT=8,sT.HTTP_ERROR=6,hO.COMPLETE="complete",pO.EventType=Ww,Ww.OPEN="a",Ww.CLOSE="b",Ww.ERROR="c",Ww.MESSAGE="d",pi.prototype.listen=pi.prototype.N,Tr.prototype.listenOnce=Tr.prototype.O,Tr.prototype.getLastError=Tr.prototype.Oa,Tr.prototype.getLastErrorCode=Tr.prototype.Ea,Tr.prototype.getStatus=Tr.prototype.aa,Tr.prototype.getResponseJson=Tr.prototype.Sa,Tr.prototype.getResponseText=Tr.prototype.fa,Tr.prototype.send=Tr.prototype.da,Tr.prototype.setWithCredentials=Tr.prototype.Ka;var R2=uc.createWebChannelTransport=function(){return new yT},x2=uc.getStatEventTarget=function(){return iT()},px=uc.ErrorCode=sT,P2=uc.EventType=hO,M2=uc.Event=up,e1=uc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},N2=uc.FetchXmlHttpFactory=Qw,vT=uc.WebChannel=pO,k2=uc.XhrIo=Tr;const t1="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let l_="9.14.0";const nh=new _o.Yd("@firebase/firestore");function gx(){return nh.logLevel}function $e(n,...e){if(nh.logLevel<=_o.in.DEBUG){const t=e.map(mx);nh.debug(`Firestore (${l_}): ${n}`,...t)}}function Mr(n,...e){if(nh.logLevel<=_o.in.ERROR){const t=e.map(mx);nh.error(`Firestore (${l_}): ${n}`,...t)}}function hp(n,...e){if(nh.logLevel<=_o.in.WARN){const t=e.map(mx);nh.warn(`Firestore (${l_}): ${n}`,...t)}}function mx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${l_}) INTERNAL ASSERTION FAILED: `+n;throw Mr(e),new Error(e)}function Ut(n,e){n||ht()}function Xe(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ei{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class n1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class U2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class V2{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ei,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const v=l;e.enqueueRetryable((0,Ie.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ei)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut("string"==typeof r.accessToken),new n1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new gi(e)}}class B2{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ut(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class j2{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new B2(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H2{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ut("string"==typeof t.token),this.A=t.token,new r1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class i1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$2(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function c_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function s1(n){return n+"\0"}class fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new fr(0,0))}static max(){return new Vt(new fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nI{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends nI{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const W2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends nI{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return W2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Fe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Fe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Fe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(yn.fromString(e))}static fromName(e){return new Ke(yn.fromString(e).popFirst(5))}static empty(){return new Ke(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new yn(e.slice()))}}class wT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function _x(n){return n.fields.find(e=>2===e.kind)}function fp(n){return n.fields.filter(e=>2!==e.kind)}wT.UNKNOWN_ID=-1;class IT{constructor(e,t){this.fieldPath=e,this.kind=t}}class rI{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rI(0,So.min())}}function o1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(1e9===r?new fr(t+1,0):new fr(t,r));return new So(i,Ke.empty(),e)}function a1(n){return new So(n.readTime,n.key,-1)}class So{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new So(Vt.min(),Ke.empty(),-1)}static max(){return new So(Vt.max(),Ke.empty(),-1)}}function yx(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const u1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rh(n){return vx.apply(this,arguments)}function vx(){return vx=(0,Ie.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==u1)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),vx.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(T=>{l[v]=T,++d,d===a&&r(l)},T=>i(T))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class ET{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ei,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new iI(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=wx(r.target.error);this.P.reject(new iI(e,i))}}static open(e,t,r,i){try{return new ET(t,e.transaction(i,r))}catch(a){throw new iI(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new K2(t)}}class hu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===hu.D((0,L.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),pp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(hu.N())return!0;const e=(0,L.z$)(),t=hu.D(e),r=0<t&&t<10,i=hu.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ie.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new iI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Fe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Fe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new iI(e,d))},a.onupgradeneeded=l=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ie.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.F(e);const g=ET.open(a.db,e,l?"readonly":"readwrite",r),v=i(g).next(T=>(g.V(),T)).catch(T=>(g.abort(T),de.reject(T))).toPromise();return v.catch(()=>{}),yield g.v,v}catch(g){const v=g,T="FirebaseError"!==v.name&&d<3;if($e("SimpleDb","Transaction failed with error:",v.message,"Retrying:",T),a.close(),!T)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class q2{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return pp(this.U.delete())}}class iI extends Fe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ih(n){return"IndexedDbTransactionError"===n.name}class K2{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pp(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),pp(this.store.add(e))}get(e){return pp(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),pp(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),pp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const l=wx(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const g=new q2(d),v=t(d.primaryKey,d.value,g);if(v instanceof de){const T=v.catch(S=>(g.done(),de.reject(S)));r.push(T)}g.isDone?i():null===g.G?d.continue():d.continue(g.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pp(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wx(r.target.error);t(i)}})}let c1=!1;function wx(n){const e=hu.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return c1||(c1=!0,setTimeout(()=>{throw r},0)),r}}return n}class Z2{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){ih(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield rh(r)}yield t.nt(6e4)}))}}class Y2{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return $e("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=a1(a);yx(l,r)>0&&(r=l)}),new So(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function d1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function h1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Hs.at=-1;class Sr{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new Sr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new Sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new CT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new CT(this.root,e,this.comparator,!1)}getReverseIterator(){return new CT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new CT(this.root,e,this.comparator,!0)}}class CT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??xi.RED,this.left=i??xi.EMPTY,this.right=a??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new xi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return xi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new xi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new Sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new f1(this.data.getIterator())}getIteratorFrom(e){return new f1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Un(this.comparator);return t.data=e,t}}class f1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function d_(n){return n.hasNext()?n.getNext():void 0}class Ao{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new Ao([])}unionWith(e){let t=new Un(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ao(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return c_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ti(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ti(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const X2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sh(n){if(Ut(!!n),"string"==typeof n){let e=0;const t=X2.exec(n);if(Ut(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ar(n.seconds),nanos:Ar(n.nanos)}}function Ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mp(n){return"string"==typeof n?ti.fromBase64String(n):ti.fromUint8Array(n)}function Ix(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function p1(n){const e=n.mapValue.fields.__previous_value__;return Ix(e)?p1(e):e}function sI(n){const e=sh(n.mapValue.fields.__local_write_time__.timestampValue);return new fr(e.seconds,e.nanos)}class J2{constructor(e,t,r,i,a,l,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class oh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new oh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof oh&&e.projectId===this.projectId&&e.database===this.database}}function oI(n){return null==n}function aI(n){return 0===n&&1/n==-1/0}function g1(n){return"number"==typeof n&&Number.isInteger(n)&&!aI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ah={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bT={nullValue:"NULL_VALUE"};function _p(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ix(n)?4:v1(n)?9007199254740991:10:ht()}function Ju(n,e){if(n===e)return!0;const t=_p(n);if(t!==_p(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sI(n).isEqual(sI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=sh(r.timestampValue),l=sh(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,mp(n.bytesValue).isEqual(mp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ar(r.geoPointValue.latitude)===Ar(i.geoPointValue.latitude)&&Ar(r.geoPointValue.longitude)===Ar(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ar(r.integerValue)===Ar(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Ar(r.doubleValue),l=Ar(i.doubleValue);return a===l?aI(a)===aI(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return c_(n.arrayValue.values||[],e.arrayValue.values||[],Ju);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(d1(a)!==d1(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!Ju(a[d],l[d])))return!1;return!0}(n,e);default:return ht()}var i}function uI(n,e){return void 0!==(n.values||[]).find(t=>Ju(t,e))}function uh(n,e){if(n===e)return 0;const t=_p(n),r=_p(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ar(i.integerValue||i.doubleValue),d=Ar(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return m1(n.timestampValue,e.timestampValue);case 4:return m1(sI(n),sI(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=mp(i),d=mp(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let g=0;g<l.length&&g<d.length;g++){const v=zt(l[g],d[g]);if(0!==v)return v}return zt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=zt(Ar(i.latitude),Ar(a.latitude));return 0!==l?l:zt(Ar(i.longitude),Ar(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let g=0;g<l.length&&g<d.length;++g){const v=uh(l[g],d[g]);if(v)return v}return zt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===ah.mapValue&&a===ah.mapValue)return 0;if(i===ah.mapValue)return 1;if(a===ah.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),g=a.fields||{},v=Object.keys(g);d.sort(),v.sort();for(let T=0;T<d.length&&T<v.length;++T){const S=zt(d[T],v[T]);if(0!==S)return S;const P=uh(l[d[T]],g[v[T]]);if(0!==P)return P}return zt(d.length,v.length)}(n.mapValue,e.mapValue);default:throw ht()}}function m1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=sh(n),r=sh(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function h_(n){return Ex(n)}function Ex(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=sh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mp(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Ex(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${Ex(r.fields[d])}`;return a+"}"}(n.mapValue):ht();var e}function yp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cx(n){return!!n&&"integerValue"in n}function lI(n){return!!n&&"arrayValue"in n}function _1(n){return!!n&&"nullValue"in n}function y1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function TT(n){return!!n&&"mapValue"in n}function cI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ej(n){return"nullValue"in n?bT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yp(oh.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function tj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yp(oh.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ah:ht()}function w1(n,e){const t=uh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function I1(n,e){const t=uh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!TT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cI(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=cI(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());TT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ju(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];TT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Pi(cI(this.value))}}function E1(n){const e=[];return gp(n.fields,(t,r)=>{const i=new Dr([t]);if(TT(r)){const a=E1(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ao(e)}class nr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new nr(e,0,Vt.min(),Vt.min(),Pi.empty(),0)}static newFoundDocument(e,t,r){return new nr(e,1,t,Vt.min(),r,0)}static newNoDocument(e,t){return new nr(e,2,t,Vt.min(),Pi.empty(),0)}static newUnknownDocument(e,t){return new nr(e,3,t,Vt.min(),Pi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nj{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ht=null}}function C1(n,e=null,t=[],r=[],i=null,a=null,l=null){return new nj(n,e,t,r,i,a,l)}function vp(n){const e=Xe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+h_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),oI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>h_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>h_(r)).join(",")),e.ht=t}return e.ht}function dI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!dj(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ju(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!A1(n.startAt,e.startAt)&&A1(n.endAt,e.endAt)}function DT(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ST(n,e){return n.filters.filter(t=>t instanceof Mi&&t.field.isEqual(e))}function b1(n,e,t){let r=bT,i=!0;for(const a of ST(n,e)){let l=bT,d=!0;switch(a.op){case"<":case"<=":l=ej(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=bT}w1({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];w1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function T1(n,e,t){let r=ah,i=!0;for(const a of ST(n,e)){let l=ah,d=!0;switch(a.op){case">=":case">":l=tj(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=ah}I1({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];I1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Mi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new ij(e,t,r):"array-contains"===t?new aj(e,r):"in"===t?new uj(e,r):"not-in"===t?new lj(e,r):"array-contains-any"===t?new cj(e,r):new Mi(e,t,r)}static lt(e,t,r){return"in"===t?new sj(e,r):new oj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(uh(t,this.value)):null!==t&&_p(this.value)===_p(t)&&this.ft(uh(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ij extends Mi{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class sj extends Mi{constructor(e,t){super(e,"in",t),this.keys=D1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oj extends Mi{constructor(e,t){super(e,"not-in",t),this.keys=D1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function D1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class aj extends Mi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lI(t)&&uI(t.arrayValue,this.value)}}class uj extends Mi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uI(this.value.arrayValue,t)}}class lj extends Mi{constructor(e,t){super(e,"not-in",t)}matches(e){if(uI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uI(this.value.arrayValue,t)}}class cj extends Mi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uI(this.value.arrayValue,r))}}class lh{constructor(e,t){this.position=e,this.inclusive=t}}class f_{constructor(e,t="asc"){this.field=e,this.dir=t}}function dj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function S1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):uh(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function A1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ju(n.position[t],e.position[t]))return!1;return!0}class dc{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=g,this._t=null,this.wt=null}}function R1(n,e,t,r,i,a,l,d){return new dc(n,e,t,r,i,a,l,d)}function p_(n){return new dc(n)}function x1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function bx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Tx(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Dx(n){return null!==n.collectionGroup}function g_(n){const e=Xe(n);if(null===e._t){e._t=[];const t=Tx(e),r=bx(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new f_(t)),e._t.push(new f_(Dr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new f_(Dr.keyField(),a))}}}return e._t}function vs(n){const e=Xe(n);if(!e.wt)if("F"===e.limitType)e.wt=C1(e.path,e.collectionGroup,g_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of g_(e))t.push(new f_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new lh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new lh(e.startAt.position,e.startAt.inclusive):null;e.wt=C1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function AT(n,e,t){return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hI(n,e){return dI(vs(n),vs(e))&&n.limitType===e.limitType}function P1(n){return`${vp(vs(n))}|lt:${n.limitType}`}function Sx(n){return`Query(target=${function rj(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${h_(r.value)}`;var r}).join(", ")}]`),oI(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>h_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>h_(t)).join(",")),`Target(${e})`}(vs(n))}; limitType=${n.limitType})`}function Ax(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=S1(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,g_(t),r)||t.endAt&&!function(i,a,l){const d=S1(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,g_(t),r)));var t,r}function M1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function N1(n){return(e,t)=>{let r=!1;for(const i of g_(n)){const a=hj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function hj(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),g=l.data.field(i);return null!==d&&null!==g?uh(d,g):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function k1(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aI(e)?"-0":e}}function O1(n){return{integerValue:""+n}}function L1(n,e){return g1(e)?O1(e):k1(n,e)}class RT{constructor(){this._=void 0}}function fj(n,e,t){return n instanceof m_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof wp?U1(n,e):n instanceof Ip?V1(n,e):function(r,i){const a=F1(r,i),l=B1(a)+B1(r.yt);return Cx(a)&&Cx(r.yt)?O1(l):k1(r.It,l)}(n,e)}function pj(n,e,t){return n instanceof wp?U1(n,e):n instanceof Ip?V1(n,e):t}function F1(n,e){return n instanceof __?Cx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class m_ extends RT{}class wp extends RT{constructor(e){super(),this.elements=e}}function U1(n,e){const t=j1(e);for(const r of n.elements)t.some(i=>Ju(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ip extends RT{constructor(e){super(),this.elements=e}}function V1(n,e){let t=j1(e);for(const r of n.elements)t=t.filter(i=>!Ju(i,r));return{arrayValue:{values:t}}}class __ extends RT{constructor(e,t){super(),this.It=e,this.yt=t}}function B1(n){return Ar(n.integerValue||n.doubleValue)}function j1(n){return lI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fI{constructor(e,t){this.field=e,this.transform=t}}class mj{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class PT{}function H1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new v_(n.key,pr.none()):new y_(n.key,n.data,pr.none());{const t=n.data,r=Pi.empty();let i=new Un(Dr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new hc(n.key,r,new Ao(i.toArray()),pr.none())}}function _j(n,e,t){n instanceof y_?function(r,i,a){const l=r.value.clone(),d=G1(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof hc?function(r,i,a){if(!xT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=G1(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(W1(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pI(n,e,t,r){return n instanceof y_?function(i,a,l,d){if(!xT(i.precondition,a))return l;const g=i.value.clone(),v=z1(i.fieldTransforms,d,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof hc?function(i,a,l,d){if(!xT(i.precondition,a))return l;const g=z1(i.fieldTransforms,d,a),v=a.data;return v.setAll(W1(i)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,xT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function yj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=F1(r.transform,i||null);null!=a&&(null===t&&(t=Pi.empty()),t.set(r.field,a))}return t||null}function $1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&c_(t,r,(i,a)=>function gj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof wp&&r instanceof wp||t instanceof Ip&&r instanceof Ip?c_(t.elements,r.elements,Ju):t instanceof __&&r instanceof __?Ju(t.yt,r.yt):t instanceof m_&&r instanceof m_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class y_ extends PT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hc extends PT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function W1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function G1(n,e,t){const r=new Map;Ut(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,pj(l,d,t[i]))}return r}function z1(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,fj(a,l,e))}return r}class v_ extends PT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rx extends PT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vj{constructor(e){this.count=e}}var Hr,vn;function q1(n){switch(n){default:return ht();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function K1(n){if(void 0===n)return Mr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Hr.OK:return _e.OK;case Hr.CANCELLED:return _e.CANCELLED;case Hr.UNKNOWN:return _e.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return _e.INTERNAL;case Hr.UNAVAILABLE:return _e.UNAVAILABLE;case Hr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Hr.NOT_FOUND:return _e.NOT_FOUND;case Hr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Hr.ABORTED:return _e.ABORTED;case Hr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Hr.DATA_LOSS:return _e.DATA_LOSS;default:return ht()}}(vn=Hr||(Hr={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class ch{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return h1(this.inner)}size(){return this.innerSize}}const wj=new Sr(Ke.comparator);function $s(){return wj}const Z1=new Sr(Ke.comparator);function gI(...n){let e=Z1;for(const t of n)e=e.insert(t.key,t);return e}function Y1(n){let e=Z1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function el(){return mI()}function Q1(){return mI()}function mI(){return new ch(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ij=new Sr(Ke.comparator),Ej=new Un(Ke.comparator);function en(...n){let e=Ej;for(const t of n)e=e.add(t);return e}const Cj=new Un(zt);function MT(){return Cj}class _I{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,yI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _I(Vt.min(),i,MT(),$s(),en())}}class yI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yI(r,t,en(),en(),en())}}class NT{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class X1{constructor(e,t){this.targetId=e,this.At=t}}class J1{constructor(e,t,r=ti.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eL{constructor(){this.Rt=0,this.bt=nL(),this.Pt=ti.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=en(),t=en(),r=en();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new yI(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=nL()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class bj{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=$s(),this.qt=tL(),this.Kt=new Un(zt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(DT(a))if(0===r){const l=new Ke(a.path);this.jt(t,l,nr.newNoDocument(l,Vt.min()))}else Ut(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&DT(d.target)){const g=new Ke(d.target.path);null!==this.Ut.get(g)||this.ee(l,g)||this.jt(l,g,nr.newNoDocument(g,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=en();this.qt.forEach((a,l)=>{let d=!0;l.forEachWhile(g=>{const v=this.Xt(g);return!v||2===v.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new _I(e,t,this.Kt,this.Ut,r);return this.Ut=$s(),this.qt=tL(),this.Kt=new Un(zt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new eL,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Un(zt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new eL),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function tL(){return new Sr(Ke.comparator)}function nL(){return new Sr(Ke.comparator)}const Tj={asc:"ASCENDING",desc:"DESCENDING"},Dj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Sj{constructor(e,t){this.databaseId=e,this.gt=t}}function vI(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rL(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Aj(n,e){return vI(n,e.toTimestamp())}function mi(n){return Ut(!!n),Vt.fromTimestamp(function(e){const t=sh(e);return new fr(t.seconds,t.nanos)}(n))}function xx(n,e){return(t=n,new yn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function iL(n){const e=yn.fromString(n);return Ut(hL(e)),e}function wI(n,e){return xx(n.databaseId,e.path)}function tl(n,e){const t=iL(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(oL(t))}function Px(n,e){return xx(n.databaseId,e)}function sL(n){const e=iL(n);return 4===e.length?yn.emptyPath():oL(e)}function II(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oL(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function aL(n,e,t){return{name:wI(n,e),fields:t.value.mapValue.fields}}function uL(n,e,t){const r=tl(n,e.name),i=mi(e.updateTime),a=new Pi({mapValue:{fields:e.fields}}),l=nr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function EI(n,e){let t;if(e instanceof y_)t={update:aL(n,e.key,e.value)};else if(e instanceof v_)t={delete:wI(n,e.key)};else if(e instanceof hc)t={update:aL(n,e.key,e.data),updateMask:Fj(e.fieldMask)};else{if(!(e instanceof Rx))return ht();t={verify:wI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof m_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ip)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof __)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Aj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function Mx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?pr.updateTime(mi(i.updateTime)):void 0!==i.exists?pr.exists(i.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(Ut("REQUEST_TIME"===l.setToServerValue),d=new m_):"appendMissingElements"in l?d=new wp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Ip(l.removeAllFromArray.values||[]):"increment"in l?d=new __(a,l.increment):ht();const g=Dr.fromServerFormat(l.fieldPath);return new fI(g,d)}(n,i)):[];var i;if(e.update){const i=tl(n,e.update.name),a=new Pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ao((e.updateMask.fieldPaths||[]).map(v=>Dr.fromServerFormat(v)));return new hc(i,a,l,t,r)}return new y_(i,a,t,r)}if(e.delete){const i=tl(n,e.delete);return new v_(i,t)}if(e.verify){const i=tl(n,e.verify);return new Rx(i,t)}return ht()}function lL(n,e){return{documents:[Px(n,e.path)]}}function Nx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Px(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Px(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(T=>function(S){if("=="===S.op){if(y1(S.value))return{unaryFilter:{field:w_(S.field),op:"IS_NAN"}};if(_1(S.value))return{unaryFilter:{field:w_(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(y1(S.value))return{unaryFilter:{field:w_(S.field),op:"IS_NOT_NAN"}};if(_1(S.value))return{unaryFilter:{field:w_(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:w_(S.field),op:kj(S.op),value:S.value}}}(T));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:w_((T=v).field),direction:Nj(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.gt||oI(v)?v:{value:v});var v,d,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function cL(n){let e=sL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ut(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=dL(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new f_(I_((S=T).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let d=null;t.limit&&(d=function(T){let S;return S="object"==typeof T?T.value:T,oI(S)?null:S}(t.limit));let g=null;var T;t.startAt&&(g=new lh((T=t.startAt).values||[],!!T.before));let v=null;return t.endAt&&(v=function(T){return new lh(T.values||[],!T.before)}(t.endAt)),R1(e,i,l,a,d,"F",g,v)}function dL(n){return n?void 0!==n.unaryFilter?[Lj(n)]:void 0!==n.fieldFilter?[Oj(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>dL(e)).reduce((e,t)=>e.concat(t)):ht():[]}function Nj(n){return Tj[n]}function kj(n){return Dj[n]}function w_(n){return{fieldPath:n.canonicalString()}}function I_(n){return Dr.fromServerFormat(n.fieldPath)}function Oj(n){return Mi.create(I_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function Lj(n){switch(n.unaryFilter.op){case"IS_NAN":const e=I_(n.unaryFilter.field);return Mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=I_(n.unaryFilter.field);return Mi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=I_(n.unaryFilter.field);return Mi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=I_(n.unaryFilter.field);return Mi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function Fj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ws(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fL(e)),e=Uj(n.get(t),e);return fL(e)}function Uj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function fL(n){return n+"\x01\x01"}function nl(n){const e=n.length;if(Ut(e>=2),2===e)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ht(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ht()}a=l+2}return new yn(r)}const pL=["userId","batchId"];function kT(n,e){return[n,ws(e)]}function gL(n,e,t){return[n,ws(e),t]}const Vj={},Bj=["prefixPath","collectionGroup","readTime","documentId"],jj=["prefixPath","collectionGroup","documentId"],Hj=["collectionGroup","readTime","prefixPath","documentId"],$j=["canonicalId","targetId"],Wj=["targetId","path"],Gj=["path","targetId"],zj=["collectionId","parent"],qj=["indexId","uid"],Kj=["uid","sequenceNumber"],Zj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yj=["indexId","uid","orderedDocumentKey"],Qj=["userId","collectionPath","documentId"],Xj=["userId","collectionPath","largestBatchId"],Jj=["userId","collectionGroup","largestBatchId"],mL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eH=[...mL,"documentOverlays"],_L=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yL=_L,tH=[...yL,"indexConfiguration","indexState","indexEntries"];class kx extends l1{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function _i(n,e){const t=Xe(n);return hu.M(t.ie,e)}class Ox{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&_j(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Q1();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const g=H1(l,d);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&c_(this.mutations,e.mutations,(t,r)=>$1(t,r))&&c_(this.baseMutations,e.baseMutations,(t,r)=>$1(t,r))}}class Lx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ut(e.mutations.length===r.length);let i=Ij;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Lx(e,t,r,i)}}class Fx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dh{constructor(e,t,r,i,a=Vt.min(),l=Vt.min(),d=ti.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new dh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new dh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vL{constructor(e){this.re=e}}function wL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:wI(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:vI(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ep(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Ep(e.version)}}var i,a;return r}function OT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ep(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cp(n){const e=new fr(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function bp(n,e){const t=(e.baseMutations||[]).map(a=>Mx(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Mx(n.re,a)),i=fr.fromMillis(e.localWriteTimeMs);return new Ox(e.batchId,i,t,r)}function CI(n){const e=Cp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cp(n.lastLimboFreeSnapshotVersion):Vt.min();let r;var i;return void 0!==n.query.documents?(Ut(1===(i=n.query).documents.length),r=vs(p_(sL(i.documents[0])))):r=vs(cL(n.query)),new dh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ti.fromBase64String(n.resumeToken))}function IL(n,e){const t=Ep(e.snapshotVersion),r=Ep(e.lastLimboFreeSnapshotVersion);let i;i=DT(e.target)?lL(n.re,e.target):Nx(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ux(n){const e=cL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?AT(e,e.limit,"L"):e}function Vx(n,e){return new Fx(e.largestBatchId,Mx(n.re,e.overlayMutation))}function EL(n,e){const t=e.path.lastSegment();return[n,ws(e.path.popLast()),t]}function CL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ep(r.readTime),documentKey:ws(r.documentKey.path),largestBatchId:r.largestBatchId}}class rH{getBundleMetadata(e,t){return bL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Cp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return bL(e).put({bundleId:(r=t).id,createTime:Ep(mi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return TL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ux(i.bundledQuery),readTime:Cp(i.readTime)};var i})}saveNamedQuery(e,t){return TL(e).put({name:(r=t).name,readTime:Ep(mi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function bL(n){return _i(n,"bundles")}function TL(n){return _i(n,"namedQueries")}class LT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new LT(e,t.uid||"")}getOverlay(e,t){return bI(e).get(EL(this.userId,t)).next(r=>r?Vx(this.It,r):null)}getOverlays(e,t){const r=el();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new Fx(t,l);i.push(this.ue(e,d))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ws(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(bI(e).Y("collectionPathOverlayIndex",d))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=el(),a=ws(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return bI(e).W("collectionPathOverlayIndex",l).next(d=>{for(const g of d){const v=Vx(this.It,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=el();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bI(e).Z({index:"collectionGroupOverlayIndex",range:d},(g,v,T)=>{const S=Vx(this.It,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):T.done()}).next(()=>a)}ue(e,t){return bI(e).put(function(r,i,a){const[l,d,g]=EL(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:EI(r.re,a.mutation)}}(this.It,this.userId,t))}}function bI(n){return _i(n,"documentOverlays")}class Tp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Ar(e.integerValue));else if("doubleValue"in e){const r=Ar(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),aI(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(mp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?v1(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ht()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function iH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function DL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=iH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Tp.Te=new Tp;class sH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=DL(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=DL(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class oH{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class aH{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class TI{constructor(){this.Be=new sH,this.Le=new oH(this.Be),this.Ue=new aH(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Dp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Dp(this.indexId,this.documentKey,this.arrayValue,r)}}function Sp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=SL(n.arrayValue,e.arrayValue),0!==t?t:(t=SL(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function SL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class uH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=_x(e);if(void 0!==t&&!this.ze(t))return!1;const r=fp(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lH{constructor(){this.Ye=new Bx}addToCollectionParentIndex(e,t){return this.Ye.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(So.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(So.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class Bx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Un(yn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(yn.comparator)).toArray()}}const FT=new Uint8Array(0);class cH{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Bx,this.Ze=new ch(r=>vp(r),(r,i)=>dI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:ws(i)};return AL(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[s1(t),""],!1,!0);return AL(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(nl(l.parent))}return r})}addFieldIndex(e,t){const r=UT(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=SI(e);return a.next(d=>{l.put(CL(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=UT(e),i=SI(e),a=DI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=DI(e);let i=!0;const a=new Map;return de.forEach(this.tn(t),l=>this.en(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=en();const d=[];return de.forEach(a,(g,v)=>{var T;$e("IndexedDbIndexManager",`Using index ${T=g,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${vp(t)}`);const S=function(ut,ft){const Rt=_x(ft);if(void 0===Rt)return null;for(const jt of ST(ut,Rt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(v,g),P=function(ut,ft){const Rt=new Map;for(const jt of fp(ft))for(const vr of ST(ut,jt.fieldPath))switch(vr.op){case"==":case"in":Rt.set(jt.fieldPath.canonicalString(),vr.value);break;case"not-in":case"!=":return Rt.set(jt.fieldPath.canonicalString(),vr.value),Array.from(Rt.values())}return null}(v,g),V=function(ut,ft){const Rt=[];let jt=!0;for(const vr of fp(ft)){const fu=0===vr.kind?b1(ut,vr.fieldPath,ut.startAt):T1(ut,vr.fieldPath,ut.startAt);Rt.push(fu.value),jt&&(jt=fu.inclusive)}return new lh(Rt,jt)}(v,g),G=function(ut,ft){const Rt=[];let jt=!0;for(const vr of fp(ft)){const fu=0===vr.kind?T1(ut,vr.fieldPath,ut.endAt):b1(ut,vr.fieldPath,ut.endAt);Rt.push(fu.value),jt&&(jt=fu.inclusive)}return new lh(Rt,jt)}(v,g),ce=this.nn(g,v,V),ye=this.nn(g,v,G),ot=this.sn(g,v,P),dt=this.rn(g.indexId,S,ce,V.inclusive,ye,G.inclusive,ot);return de.forEach(dt,ut=>r.J(ut,t.limit).next(ft=>{ft.forEach(Rt=>{const jt=Ke.fromSegments(Rt.documentKey);l.has(jt)||(l=l.add(jt),d.push(jt))})}))}).next(()=>d)}return de.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,d){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),v=g/(null!=t?t.length:1),T=[];for(let S=0;S<g;++S){const P=t?this.on(t[S/v]):FT,V=this.un(e,P,r[S%v],i),G=this.cn(e,P,a[S%v],l),ce=d.map(ye=>this.un(e,P,ye,!0));T.push(...this.createRange(V,G,ce))}return T}un(e,t,r,i){const a=new Dp(e,Ke.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Dp(e,Ke.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new uH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;return de.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let d=new Un(Dr.comparator),g=!1;for(const v of l.filters){const T=v;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?g=!0:d=d.add(T.field))}for(const v of l.orderBy)v.field.isKeyField()||(d=d.add(v.field));return d.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new TI;for(const i of fp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Tp.Te.ce(a,l)}return r.$e()}on(e){const t=new TI;return Tp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new TI;return Tp.Te.ce(yp(this.databaseId,t),r.qe(function(i){const a=fp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new TI);let a=0;for(const l of fp(e)){const d=r[a++];for(const g of i)if(this.ln(t,l.fieldPath)&&lI(d))i=this.fn(i,l,d);else{const v=g.qe(l.kind);Tp.Te.ce(d,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const g=new TI;g.seed(d.$e()),Tp.Te.ce(l,g.qe(t.kind)),a.push(g)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Mi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=UT(e),i=SI(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return de.forEach(a,d=>i.get([d.indexId,this.uid]).next(g=>{l.push(function(v,T){const S=T?new rI(T.sequenceNumber,new So(Cp(T.readTime),new Ke(nl(T.documentKey)),T.largestBatchId)):rI.empty(),P=v.fields.map(([V,G])=>new IT(Dr.fromServerFormat(V),G));return new wT(v.indexId,v.collectionGroup,P,S)}(d,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=UT(e),a=SI(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>de.forEach(d,g=>a.put(CL(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,g=>this.wn(e,i,g).next(v=>{const T=this.mn(a,g);return v.isEqual(T)?de.resolve():this.gn(e,a,g,v,T)}))))})}yn(e,t,r,i){return DI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return DI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=DI(e);let a=new Un(Sp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,d)=>{a=a.add(new Dp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}mn(e,t){let r=new Un(Sp);const i=this.an(t,e);if(null==i)return r;const a=_x(t);if(null!=a){const l=e.data.field(a.fieldPath);if(lI(l))for(const d of l.arrayValue.values||[])r=r.add(new Dp(t.indexId,e.key,this.on(d),i))}else r=r.add(new Dp(t.indexId,e.key,FT,i));return r}gn(e,t,r,i,a){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,g,v,T,S){const P=d.getIterator(),V=g.getIterator();let G=d_(P),ce=d_(V);for(;G||ce;){let ye=!1,ot=!1;if(G&&ce){const dt=v(G,ce);dt<0?ot=!0:dt>0&&(ye=!0)}else null!=G?ot=!0:ye=!0;ye?(T(ce),ce=d_(V)):ot?(S(G),G=d_(P)):(G=d_(P),ce=d_(V))}}(i,a,Sp,d=>{l.push(this.yn(e,t,r,d))},d=>{l.push(this.pn(e,t,r,d))}),de.waitFor(l)}_n(e){let t=1;return SI(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>Sp(l,d)).filter((l,d,g)=>!d||0!==Sp(l,g[d-1]));const i=[];i.push(e);for(const l of r){const d=Sp(l,e),g=Sp(l,t);if(0===d)i[0]=e.Ke();else if(d>0&&g<0)i.push(l),i.push(l.Ke());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,FT,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,FT,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RL)}getMinOffset(e,t){return de.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ht())).next(RL)}}function AL(n){return _i(n,"collectionParents")}function DI(n){return _i(n,"indexEntries")}function UT(n){return _i(n,"indexConfiguration")}function SI(n){return _i(n,"indexState")}function RL(n){Ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;yx(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new So(e.readTime,e.documentKey,t)}const xL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const g=r.Z({range:l},(T,S,P)=>(d++,P.delete()));a.push(g.next(()=>{Ut(1===d)}));const v=[];for(const T of t.mutations){const S=gL(e,T.key.path,t.batchId);a.push(i.delete(S)),v.push(T.key)}return de.waitFor(a).next(()=>v)}function VT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(41943040,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class BT{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ut(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new BT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hh(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=E_(e),l=hh(e);return l.add({}).next(d=>{Ut("number"==typeof d);const g=new Ox(d,t,r,i),v=function(P,V,G){const ce=G.baseMutations.map(ot=>EI(P.re,ot)),ye=G.mutations.map(ot=>EI(P.re,ot));return{userId:V,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ce,mutations:ye}}(this.It,this.userId,g),T=[];let S=new Un((P,V)=>zt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=gL(this.userId,P.key.path,d);S=S.add(P.key.path.popLast()),T.push(l.put(v)),T.push(a.put(V,Vj))}return S.forEach(P=>{T.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[d]=g.keys()}),de.waitFor(T).next(()=>g)})}lookupMutationBatch(e,t){return hh(e).get(t).next(r=>r?(Ut(r.userId===this.userId),bp(this.It,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return hh(e).Z({index:"userMutationsIndex",range:i},(l,d,g)=>{d.userId===this.userId&&(Ut(d.batchId>=r),a=bp(this.It,d)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hh(e).W("userMutationsIndex",t).next(r=>r.map(i=>bp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return E_(e).Z({range:i},(l,d,g)=>{const[v,T,S]=l,P=nl(T);if(v===this.userId&&t.path.isEqual(P))return hh(e).get(S).next(V=>{if(!V)throw ht();Ut(V.userId===this.userId),a.push(bp(this.It,V))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(zt);const i=[];return t.forEach(a=>{const l=kT(this.userId,a.path),d=IDBKeyRange.lowerBound(l),g=E_(e).Z({range:d},(v,T,S)=>{const[P,V,G]=v,ce=nl(V);P===this.userId&&a.path.isEqual(ce)?r=r.add(G):S.done()});i.push(g)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=kT(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Un(zt);return E_(e).Z({range:l},(g,v,T)=>{const[S,P,V]=g,G=nl(P);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(d=d.add(V)):T.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(hh(e).get(a).next(l=>{if(null===l)throw ht();Ut(l.userId===this.userId),r.push(bp(this.It,l))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return PL(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return E_(e).Z({range:r},(a,l,d)=>{if(a[0]===this.userId){const g=nl(a[1]);i.push(g)}else d.done()}).next(()=>{Ut(0===i.length)})})}containsKey(e,t){return ML(e,this.userId,t)}Rn(e){return NL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ML(n,e,t){const r=kT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return E_(n).Z({range:a,X:!0},(d,g,v)=>{const[T,S,P]=d;T===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function hh(n){return _i(n,"mutations")}function E_(n){return _i(n,"documentMutations")}function NL(n){return _i(n,"mutationQueues")}class Ap{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ap(0)}static vn(){return new Ap(-1)}}class dH{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ap(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Vt.fromTimestamp(new fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>C_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ut(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return C_(e).Z((l,d)=>{const g=CI(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return C_(e).Z((r,i)=>{const a=CI(i);t(a)})}Vn(e){return kL(e).get("targetGlobalKey").next(t=>(Ut(null!==t),t))}Sn(e,t){return kL(e).put("targetGlobalKey",t)}Dn(e,t){return C_(e).put(IL(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return C_(e).Z({range:i,index:"queryTargetsIndex"},(l,d,g)=>{const v=CI(d);dI(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=fh(e);return t.forEach(l=>{const d=ws(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=fh(e);return de.forEach(t,a=>{const l=ws(a.path);return de.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=fh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=fh(e);let a=en();return i.Z({range:r,X:!0},(l,d,g)=>{const v=nl(l[1]),T=new Ke(v);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=ws(t.path),i=IDBKeyRange.bound([r],[s1(r)],!1,!0);let a=0;return fh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],g,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}se(e,t){return C_(e).get(t).next(r=>r?CI(r):null)}}function C_(n){return _i(n,"targets")}function kL(n){return _i(n,"targetGlobal")}function fh(n){return _i(n,"targetDocuments")}function OL([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class hH{constructor(e){this.xn=e,this.buffer=new Un(OL),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();OL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ih(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield rh(r)}yield t.Fn(3e5)}))}}class pH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Hs.at);const r=new hH(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(xL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xL):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,d,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,d=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),gx()<=_o.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(g-d)+`ms\n\tRemoved ${S} documents in `+(v-g)+`ms\nTotal Duration: ${v-T}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class gH{constructor(e,t){this.db=e,this.garbageCollector=new pH(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return jT(e,r)}removeReference(e,t,r){return jT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jT(e,t)}Gn(e,t){return function(r,i){let a=!1;return NL(r).tt(l=>ML(r,l,i).next(d=>(d&&(a=!0),de.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,d)=>{if(d<=t){const g=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Vt.min()),fh(e).delete([0,ws(l.path)])))});i.push(g)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jT(e,t)}Kn(e,t){const r=fh(e);let i,a=Hs.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:g,sequenceNumber:v})=>{0===l?(a!==Hs.at&&t(new Ke(nl(i)),a),a=v,i=g):a=Hs.at}).next(()=>{a!==Hs.at&&t(new Ke(nl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jT(n,e){return fh(n).put((r=n.currentSequenceNumber,{targetId:0,path:ws(e.path),sequenceNumber:r}));var r}class LL{constructor(){this.changes=new ch(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mH{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rp(e).put(r)}removeEntry(e,t,r){return Rp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],OT(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=nr.newInvalidDocument(t);return Rp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(AI(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:nr.newInvalidDocument(t)};return Rp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(AI(t))},(i,a)=>{r={document:this.jn(t,a),size:VT(a)}}).next(()=>r)}getEntries(e,t){let r=$s();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=$s(),i=new Sr(Ke.comparator);return this.zn(e,t,(a,l)=>{const d=this.jn(a,l);r=r.insert(a,d),i=i.insert(a,VT(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Un(BL);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(AI(i.first()),AI(i.last())),l=i.getIterator();let d=l.getNext();return Rp(e).Z({index:"documentKeyIndex",range:a},(g,v,T)=>{const S=Ke.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&BL(d,S)<0;)r(d,null),d=l.getNext();d&&d.isEqual(S)&&(r(d,v),d=l.hasNext()?l.getNext():null),d?T.j(AI(d)):T.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),OT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rp(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=$s();for(const g of l){const v=this.jn(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(v.key,v)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=$s();const l=VL(t,r),d=VL(t,So.max());return Rp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(g,v,T)=>{const S=this.jn(Ke.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new _H(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return UL(e).get("remoteDocumentGlobalKey").next(t=>(Ut(!!t),t))}Qn(e,t){return UL(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function nH(n,e){let t;if(e.document)t=uL(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Cp(e.noDocument.readTime);t=nr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=Ke.fromSegments(e.unknownDocument.path),i=Cp(e.unknownDocument.version);t=nr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new fr(r[0],r[1]);return Vt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Vt.min()))return r}return nr.newInvalidDocument(e)}}function FL(n){return new mH(n)}class _H extends LL{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ch(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Un((a,l)=>zt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const g=wL(this.Yn.It,l);i=i.add(a.path.popLast()),r+=VT(g)-d.size,t.push(this.Yn.addEntry(e,a,g))}else if(r-=d.size,this.trackRemovals){const g=wL(this.Yn.It,l.convertToNoDocument(Vt.min()));t.push(this.Yn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function UL(n){return _i(n,"remoteDocumentGlobal")}function Rp(n){return _i(n,"remoteDocumentsV14")}function AI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VL(n,e){const t=e.documentKey.path.toArray();return[n,OT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=zt(t[a],r[a]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class yH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&pI(r.mutation,i,Ao.empty(),fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const i=el();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=gI();return a.forEach((d,g)=>{l=l.insert(d,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=el();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let a=$s();const l=mI(),d=mI();return t.forEach((g,v)=>{const T=r.get(v.key);i.has(v.key)&&(void 0===T||T.mutation instanceof hc)?a=a.insert(v.key,v):void 0!==T&&(l.set(v.key,T.mutation.getFieldMask()),pI(T.mutation,v,T.mutation.getFieldMask(),fr.now()))}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,T)=>l.set(v,T)),t.forEach((v,T)=>{var S;return d.set(v,new yH(T,null!==(S=l.get(v))&&void 0!==S?S:null))}),d))}recalculateAndSaveOverlays(e,t){const r=mI();let i=new Sr((l,d)=>l-d),a=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let T=r.get(g)||Ao.empty();T=d.applyToLocalView(v,T),r.set(g,T);const S=(i.get(d.batchId)||en()).add(g);i=i.insert(d.batchId,S)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),v=g.key,T=g.value,S=Q1();T.forEach(P=>{if(!a.has(P)){const V=H1(t.get(P),r.get(P));null!==V&&S.set(P,V),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return de.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Dx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(el());let d=-1,g=a;return l.next(v=>de.forEach(v,(T,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(T)?de.resolve():this.getBaseDocument(e,T,S).next(P=>{g=g.insert(T,P)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,en())).next(T=>({batchId:d,changes:Y1(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=gI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=gI();return this.indexManager.getCollectionParents(e,i).next(l=>de.forEach(l,d=>{const g=(v=t,T=d.child(i),new dc(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,T;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,g)=>{const v=g.getKey();null===i.get(v)&&(i=i.insert(v,nr.newInvalidDocument(v)))});let l=gI();return i.forEach((d,g)=>{const v=a.get(d);void 0!==v&&pI(v.mutation,g,Ao.empty(),fr.now()),Ax(t,g)&&(l=l.insert(d,g))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(nr.newInvalidDocument(t))}}class vH{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:mi(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Ux(r.bundledQuery),readTime:mi(r.readTime)}),de.resolve();var r}}class wH{constructor(){this.overlays=new Sr(Ke.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=el();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=el(),a=t.length+1,l=new Ke(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const g=d.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Sr((v,T)=>v-T);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=a.get(v.largestBatchId);null===T&&(T=el(),a=a.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const d=el(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,T)=>d.set(v,T)),!(d.size()>=i)););return de.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Fx(t,r));let a=this.es.get(t);void 0===a&&(a=en(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class jx{constructor(){this.ns=new Un(yi.ss),this.rs=new Un(yi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new yi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new yi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new yn([])),r=new yi(t,e),i=new yi(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new yn([])),r=new yi(t,e),i=new yi(t,e+1);let a=en();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new yi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||zt(e._s,t._s)}static os(e,t){return zt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class IH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Un(yi.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new Ox(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new yi(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yi(t,0),i=new yi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);a.push(d)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Un(zt);return t.forEach(i=>{const a=new yi(i,0),l=new yi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],d=>{r=r.add(d._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const l=new yi(new Ke(a),0);let d=new Un(zt);return this.gs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(d=d.add(g._s)),!0)},l),de.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ut(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const a=new yi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new yi(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class EH{constructor(e){this.Es=e,this.docs=new Sr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(t))}getEntries(e,t){let r=$s();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():nr.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=$s();const a=new Ke(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:g}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||yx(a1(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CH(this)}getSize(e){return de.resolve(this.size)}}class CH extends LL{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class bH{constructor(e){this.persistence=e,this.Rs=new ch(t=>vp(t),dI),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new jx,this.targetCount=0,this.vs=Ap.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ap(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class HL{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Hs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new bH(this),this.indexManager=new lH,this.remoteDocumentCache=new EH(r=>this.referenceDelegate.xs(r)),this.It=new vL(t),this.Ns=new vH(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new IH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new TH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class TH extends l1{constructor(e){super(),this.currentSequenceNumber=e}}class HT{constructor(e){this.persistence=e,this.Fs=new jx,this.$s=null}static Bs(e){return new HT(e)}get Ls(){if(this.$s)return this.$s;throw ht()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Ke.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class DH{constructor(e){this.It=e}$(e,t,r,i){const a=new ET("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pL,{unique:!0}),d.createObjectStore("documentMutations"),$L(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),$L(e)),l=l.next(()=>function(d){const g=d.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,g){return g.store("mutations").W().next(v=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pL,{unique:!0});const T=g.store("mutations"),S=v.map(P=>T.put(P));return de.waitFor(S)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:Qj});g.createIndex("collectionPathOverlayIndex",Xj,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",Jj,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:Bj});g.createIndex("documentKeyIndex",jj),g.createIndex("collectionGroupIndex",Hj)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:qj}).createIndex("sequenceNumberIndex",Kj,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Zj}).createIndex("documentKeyIndex",Yj,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=VT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>de.forEach(d,g=>{Ut(g.userId===a.userId);const v=bp(this.It,g);return PL(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,d)=>{const g=new yn(l),v=[0,ws(g)];a.push(t.get(v).next(T=>T?de.resolve():t.put({targetId:0,path:ws(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:zj});const r=t.store("collectionParents"),i=new Bx,a=l=>{if(i.add(l)){const d=l.lastSegment(),g=l.popLast();return r.put({collectionId:d,parent:ws(g)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const g=new yn(l);return a(g.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,g],v)=>{const T=nl(d);return a(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=CI(i),l=IL(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const d=t.store("remoteDocumentsV14"),g=(v=l,v.document?new Ke(yn.fromString(v.document.name).popFirst(5)):v.noDocument?Ke.fromSegments(v.noDocument.path):v.unknownDocument?Ke.fromSegments(v.unknownDocument.path):ht()).path.toArray();var v;const T={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(T))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=FL(this.It),a=new HL(HT.Bs,this.It.re);return r.W().next(l=>{const d=new Map;return l.forEach(g=>{var v;let T=null!==(v=d.get(g.userId))&&void 0!==v?v:en();bp(this.It,g).keys().forEach(S=>T=T.add(S)),d.set(g.userId,T)}),de.forEach(d,(g,v)=>{const T=new gi(v),S=LT.oe(this.It,T),P=a.getIndexManager(T),V=BT.oe(T,this.It,P,a.referenceDelegate);return new jL(i,V,S,P).recalculateAndSaveOverlaysForDocumentKeys(new kx(t,Hs.at),g).next()})})}}function $L(n){n.createObjectStore("targetDocuments",{keyPath:Wj}).createIndex("documentTargetsIndex",Gj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$j,{unique:!0}),n.createObjectStore("targetGlobal")}const Hx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $x{constructor(e,t,r,i,a,l,d,g,v,T,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=d,this.Js=v,this.Ys=T,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!$x.C())throw new Fe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gH(this,i),this.ii=t+"main",this.It=new vL(g),this.ri=new hu(this.ii,this.Xs,new DH(this.It)),this.Cs=new dH(this.referenceDelegate,this.It),this.remoteDocumentCache=FL(this.It),this.Ns=new rH,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,Hx);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Hs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$T(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ih(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return RI(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return $T(e).delete(this.clientId)}yi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=_i(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),d=a.filter(g=>-1===l.indexOf(g));return de.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):RI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,Hx);return!1}}return!(!this.networkEnabled||!this.inForeground)||$T(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kx(t,Hs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>$T(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return BT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cH(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return LT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?tH:14===l?yL:13===l?_L:12===l?eH:11===l?mL:void ht();var l;let d;return this.ri.runTransaction(e,i,a,g=>(d=new kx(g,this.Ss?this.Ss.next():Hs.at),"readwrite-primary"===t?this.fi(d).next(v=>!!v||this.di(d)).next(v=>{if(!v)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(_e.FAILED_PRECONDITION,u1);return r(d)}).next(v=>this.wi(d).next(()=>v)):this.Vi(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}Vi(e){return RI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(_e.FAILED_PRECONDITION,Hx)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return RI(e).put("owner",t)}static C(){return hu.C()}_i(e){const t=RI(e);return t.get("owner").next(r=>this.mi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function RI(n){return _i(n,"owner")}function $T(n){return _i(n,"clientMetadata")}function Wx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Gx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=en(),i=en();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Gx(e,t.fromCache,r,i)}}class WL{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(x1(t))return de.resolve(null);let r=vs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=AT(t,null,"F"),r=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=en(...a);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.Fi(t,d);return this.$i(t,v,l,g.readTime)?this.ki(e,AT(t,null,"F")):this.Bi(e,v,t,g)}))})))}Oi(e,t,r,i){return x1(t)||i.isEqual(Vt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(gx()<=_o.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sx(t)),this.Bi(e,l,t,o1(i,-1)))})}Fi(e,t){let r=new Un(N1(e));return t.forEach((i,a)=>{Ax(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return gx()<=_o.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Sx(t)),this.Ni.getDocumentsMatchingQuery(e,t,So.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class SH{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Sr(zt),this.qi=new ch(a=>vp(a),dI),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jL(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function GL(n,e,t,r){return new SH(n,e,t,r)}function zL(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,Ie.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let g=en();for(const v of i){l.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of a){d.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(r,g).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:d}))})})}),zx.apply(this,arguments)}function AH(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,g,v){const T=g.batch,S=T.keys();let P=de.resolve();return S.forEach(V=>{P=P.next(()=>v.getEntry(d,V)).next(G=>{const ce=g.docVersions.get(V);Ut(null!==ce),G.version.compareTo(ce)<0&&(T.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(d,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=en();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(d=d.add(l.batch.mutations[g].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qL(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function RH(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((T,S)=>{const P=i.get(S);if(!P)return;d.push(t.Cs.removeMatchingKeys(a,T.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,T.addedDocuments,S)));let V=P.withSequenceNumber(a.currentSequenceNumber);var G,ce,ye;e.targetMismatches.has(S)?V=V.withResumeToken(ti.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):T.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(T.resumeToken,r)),i=i.insert(S,V),ce=V,ye=T,(0===(G=P).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,V))});let g=$s(),v=en();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),d.push(KL(a,l,e.documentUpdates).next(T=>{g=T.Wi,v=T.zi})),!r.isEqual(Vt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(T)}return de.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ui=i,a))}function KL(n,e,t){let r=en(),i=en();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=$s();return t.forEach((d,g)=>{const v=a.get(d);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(d)),g.isNoDocument()&&g.version.isEqual(Vt.min())?(e.removeEntry(d,g.readTime),l=l.insert(d,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),l=l.insert(d,g)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",g.version)}),{Wi:l,zi:i}})}function xH(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function b_(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new dh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function T_(n,e,t){return qx.apply(this,arguments)}function qx(){return qx=(0,Ie.Z)(function*(n,e,t){const r=Xe(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ih(l))throw l;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),qx.apply(this,arguments)}function WT(n,e,t){const r=Xe(n);let i=Vt.min(),a=en();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,g,v){const T=Xe(d),S=T.qi.get(v);return void 0!==S?de.resolve(T.Ui.get(S)):T.Cs.getTargetData(g,v)}(r,l,vs(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(g=>{a=g})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Vt.min(),t?a:en())).next(d=>(QL(r,M1(e),d),{documents:d,Hi:a})))}function ZL(n,e){const t=Xe(n),r=Xe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function YL(n,e){const t=Xe(n),r=t.Ki.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,o1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(QL(t,e,i),i))}function QL(n,e,t){let r=n.Ki.get(e)||Vt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function Kx(){return Kx=(0,Ie.Z)(function*(n,e,t,r){const i=Xe(n);let a=en(),l=$s();for(const v of t){const T=e.Ji(v.metadata.name);v.document&&(a=a.add(T));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(T,S)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),g=yield b_(i,(v=r,vs(p_(yn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>KL(v,d,l).next(T=>(d.apply(v),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Cs.addMatchingKeys(v,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,T.Wi,T.zi)).next(()=>T.Wi)))}),Kx.apply(this,arguments)}function MH(n,e){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Ie.Z)(function*(n,e,t=en()){const r=yield b_(n,vs(Ux(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=mi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const d=r.withResumeToken(ti.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(a,d).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),Zx.apply(this,arguments)}function XL(n,e){return`firestore_clients_${n}_${e}`}function JL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Yx(n,e){return`firestore_targets_${n}_${e}`}class GT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new GT(e,t,i.state,a):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new xI(e,r.state,i):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=MT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=g1(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new zT(e,a):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Qx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Qx(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xx{constructor(){this.activeTargetIds=MT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jx{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Sr(zt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=XL(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Xx),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(XL(e.persistenceKey,i));if(a){const l=zT.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Yx(this.persistenceKey,e));if(r){const i=xI.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Hs.at;if(null!=a)try{const d=JSON.parse(a);Ut("number"==typeof d),l=d}catch(d){Mr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Hs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new GT(this.currentUser,e,t,r),a=JL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=JL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Yx(this.persistenceKey,e),a=new xI(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return zT.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return GT.Zi(new gi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return xI.Zi(i,t)}yr(e){return Qx.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],d=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||d.push(g)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=MT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class eF{constructor(){this.Lr=new Xx,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Xx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NH{qr(e){}shutdown(){}}class tF{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class LH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);$e("RestConnection","Sending: ",l,r);const d={};return this.lo(d,i,a),this.fo(e,l,d,r).then(g=>($e("RestConnection","Received: ",g),g),g=>{throw hp("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+l_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${kH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const d=new k2;d.setWithCredentials(!0),d.listenOnce(P2.COMPLETE,()=>{var v;try{switch(d.getLastErrorCode()){case px.NO_ERROR:const T=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(T)),a(T);break;case px.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),l(new Fe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case px.HTTP_ERROR:const S=d.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',S,"response text:",d.getResponseText()),S>0){let P=d.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=null===(v=P)||void 0===v?void 0:v.error;if(V&&V.status&&V.message){const G=function(ce){const ye=ce.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(ye)>=0?ye:_e.UNKNOWN}(V.status);l(new Fe(G,V.message))}else l(new Fe(_e.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Fe(_e.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);d.send(t,"POST",g,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=R2(),l=x2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new N2({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=i.join("");$e("Connection","Creating WebChannel: "+g,d);const v=a.createWebChannel(g,d);let T=!1,S=!1;const P=new OH({Hr:G=>{S?$e("Connection","Not sending because WebChannel is closed:",G):(T||($e("Connection","Opening WebChannel transport."),v.open(),T=!0),$e("Connection","WebChannel sending:",G),v.send(G))},Jr:()=>v.close()}),V=(G,ce,ye)=>{G.listen(ce,ot=>{try{ye(ot)}catch(dt){setTimeout(()=>{throw dt},0)}})};return V(v,vT.EventType.OPEN,()=>{S||$e("Connection","WebChannel transport opened.")}),V(v,vT.EventType.CLOSE,()=>{S||(S=!0,$e("Connection","WebChannel transport closed"),P.io())}),V(v,vT.EventType.ERROR,G=>{S||(S=!0,hp("Connection","WebChannel transport errored:",G),P.io(new Fe(_e.UNAVAILABLE,"The operation could not be completed")))}),V(v,vT.EventType.MESSAGE,G=>{var ce;if(!S){const ye=G.data[0];Ut(!!ye);const ot=ye,dt=ot.error||(null===(ce=ot[0])||void 0===ce?void 0:ce.error);if(dt){$e("Connection","WebChannel received error:",dt);const ut=dt.status;let ft=function(jt){const vr=Hr[jt];if(void 0!==vr)return K1(vr)}(ut),Rt=dt.message;void 0===ft&&(ft=_e.INTERNAL,Rt="Unknown error status: "+ut+" with message "+dt.message),S=!0,P.io(new Fe(ft,Rt)),v.close()}else $e("Connection","WebChannel received:",ye),P.ro(ye)}}),V(l,M2.STAT_EVENT,G=>{G.stat===e1.PROXY?$e("Connection","Detected buffering proxy"):G.stat===e1.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function nF(){return typeof window<"u"?window:null}function qT(){return typeof document<"u"?document:null}function PI(n){return new Sj(n,!0)}class eP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class rF{constructor(e,t,r,i,a,l,d,g){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new eP(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ie.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FH extends rF{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function xj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ht(),i=e.targetChange.targetIds||[],a=function(g,v){return g.gt?(Ut(void 0===v||"string"==typeof v),ti.fromBase64String(v||"")):(Ut(void 0===v||v instanceof Uint8Array),ti.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(g){const v=void 0===g.code?_e.UNKNOWN:K1(g.code);return new Fe(v,g.message||"")}(l);t=new J1(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=tl(n,r.document.name),a=mi(r.document.updateTime),l=new Pi({mapValue:{fields:r.document.fields}}),d=nr.newFoundDocument(i,a,l);t=new NT(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=tl(n,r.document),a=r.readTime?mi(r.readTime):Vt.min(),l=nr.newNoDocument(i,a);t=new NT([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=tl(n,r.document);t=new NT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,a=new vj(r.count||0);t=new X1(r.targetId,a)}}var g;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Vt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Vt.min():a.readTime?mi(a.readTime):Vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=II(this.It),t.addTarget=function(i,a){let l;const d=a.target;return l=DT(d)?{documents:lL(i,d)}:{query:Nx(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=rL(i,a.resumeToken):a.snapshotVersion.compareTo(Vt.min())>0&&(l.readTime=vI(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Mj(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=II(this.It),t.removeTarget=e,this.Bo(t)}}class UH extends rF{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Pj(n,e){return n&&n.length>0?(Ut(void 0!==e),n.map(t=>function(r,i){let a=mi(r.updateTime?r.updateTime:i);return a.isEqual(Vt.min())&&(a=mi(i)),new mj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=mi(e.commitTime);return this.listener.Zo(r,t)}return Ut(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=II(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>EI(this.It,r))};this.Bo(t)}}class VH extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(_e.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(_e.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class jH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Mr(t),this.ou=!1):$e("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class HH{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget((0,Ie.Z)(function*(){var g;fc(l)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ie.Z)(function*(v){const T=Xe(v);T._u.add(4),yield D_(T),T.gu.set("Unknown"),T._u.delete(4),yield MI(T)}),function(v){return g.apply(this,arguments)})(l))}))}),this.gu=new jH(r,i)}}function MI(n){return nP.apply(this,arguments)}function nP(){return nP=(0,Ie.Z)(function*(n){if(fc(n))for(const e of n.wu)yield e(!0)}),nP.apply(this,arguments)}function D_(n){return rP.apply(this,arguments)}function rP(){return rP=(0,Ie.Z)(function*(n){for(const e of n.wu)yield e(!1)}),rP.apply(this,arguments)}function KT(n,e){const t=Xe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),oP(t)?sP(t):A_(t).ko()&&iP(t,e))}function NI(n,e){const t=Xe(n),r=A_(t);t.du.delete(e),r.ko()&&iF(t,e),0===t.du.size&&(r.ko()?r.Fo():fc(t)&&t.gu.set("Unknown"))}function iP(n,e){n.yu.Mt(e.targetId),A_(n).zo(e)}function iF(n,e){n.yu.Mt(e),A_(n).Ho(e)}function sP(n){n.yu=new bj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),A_(n).start(),n.gu.uu()}function oP(n){return fc(n)&&!A_(n).No()&&n.du.size>0}function fc(n){return 0===Xe(n)._u.size}function sF(n){n.yu=void 0}function $H(n){return aP.apply(this,arguments)}function aP(){return aP=(0,Ie.Z)(function*(n){n.du.forEach((e,t)=>{iP(n,e)})}),aP.apply(this,arguments)}function WH(n,e){return uP.apply(this,arguments)}function uP(){return uP=(0,Ie.Z)(function*(n,e){sF(n),oP(n)?(n.gu.hu(e),sP(n)):n.gu.set("Unknown")}),uP.apply(this,arguments)}function GH(n,e,t){return lP.apply(this,arguments)}function lP(){return lP=(0,Ie.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof J1&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ZT(n,r)}else if(e instanceof NT?n.yu.Gt(e):e instanceof X1?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Vt.min()))try{const r=yield qL(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const v=i.du.get(g);v&&i.du.set(g,v.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const g=i.du.get(d);if(!g)return;i.du.set(d,g.withResumeToken(ti.EMPTY_BYTE_STRING,g.snapshotVersion)),iF(i,d);const v=new dh(g.target,d,1,g.sequenceNumber);iP(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield ZT(n,r)}var r}),lP.apply(this,arguments)}function ZT(n,e,t){return cP.apply(this,arguments)}function cP(){return cP=(0,Ie.Z)(function*(n,e,t){if(!ih(e))throw e;n._u.add(1),yield D_(n),n.gu.set("Offline"),t||(t=()=>qL(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield MI(n)}))}),cP.apply(this,arguments)}function oF(n,e){return e().catch(t=>ZT(n,t,e))}function S_(n){return dP.apply(this,arguments)}function dP(){return dP=(0,Ie.Z)(function*(n){const e=Xe(n),t=ph(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;zH(e);)try{const i=yield xH(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,qH(e,i)}catch(i){yield ZT(e,i)}aF(e)&&uF(e)}),dP.apply(this,arguments)}function zH(n){return fc(n)&&n.fu.length<10}function qH(n,e){n.fu.push(e);const t=ph(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function aF(n){return fc(n)&&!ph(n).No()&&n.fu.length>0}function uF(n){ph(n).start()}function KH(n){return hP.apply(this,arguments)}function hP(){return hP=(0,Ie.Z)(function*(n){ph(n).eu()}),hP.apply(this,arguments)}function ZH(n){return fP.apply(this,arguments)}function fP(){return fP=(0,Ie.Z)(function*(n){const e=ph(n);for(const t of n.fu)e.Xo(t.mutations)}),fP.apply(this,arguments)}function YH(n,e,t){return pP.apply(this,arguments)}function pP(){return pP=(0,Ie.Z)(function*(n,e,t){const r=n.fu.shift(),i=Lx.from(r,e,t);yield oF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield S_(n)}),pP.apply(this,arguments)}function QH(n,e){return gP.apply(this,arguments)}function gP(){return gP=(0,Ie.Z)(function*(n,e){var t;e&&ph(n).Yo&&(yield(t=(0,Ie.Z)(function*(r,i){if(q1(a=i.code)&&a!==_e.ABORTED){const l=r.fu.shift();ph(r).Mo(),yield oF(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield S_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),aF(n)&&uF(n)}),gP.apply(this,arguments)}function lF(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,Ie.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=fc(t);t._u.add(3),yield D_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield MI(t)}),mP.apply(this,arguments)}function _P(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,Ie.Z)(function*(n,e){const t=Xe(n);e?(t._u.delete(2),yield MI(t)):e||(t._u.add(2),yield D_(t),t.gu.set("Unknown"))}),yP.apply(this,arguments)}function A_(n){return n.pu||(n.pu=function(e,t,r){const i=Xe(e);return i.su(),new FH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:$H.bind(null,n),Zr:WH.bind(null,n),Wo:GH.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.pu.Mo(),oP(n)?sP(n):n.gu.set("Unknown")):(yield n.pu.stop(),sF(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function ph(n){return n.Iu||(n.Iu=function(e,t,r){const i=Xe(e);return i.su(),new UH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:KH.bind(null,n),Zr:QH.bind(null,n),tu:ZH.bind(null,n),Zo:YH.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Mo(),yield S_(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class vP{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new vP(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R_(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),ih(n))return new Fe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class x_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=gI(),this.sortedSet=new Sr(this.comparator)}static emptySet(e){return new x_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof x_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new x_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class cF{constructor(){this.Tu=new Sr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class P_{constructor(e,t,r,i,a,l,d,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new P_(e,t,x_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class XH{constructor(){this.Au=void 0,this.listeners=[]}}class JH{constructor(){this.queries=new ch(e=>P1(e),hI),this.onlineState="Unknown",this.Ru=new Set}}function wP(n,e){return IP.apply(this,arguments)}function IP(){return IP=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new XH),i)try{a.Au=yield t.onListen(r)}catch(l){const d=R_(l,`Initialization of query '${Sx(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&bP(t)}),IP.apply(this,arguments)}function EP(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),CP.apply(this,arguments)}function e$(n,e){const t=Xe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&bP(t)}function t$(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function bP(n){n.Ru.forEach(e=>{e.next()})}class TP{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new P_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=P_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class n${constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class dF{constructor(e){this.It=e}Ji(e){return tl(this.It,e)}Yi(e){return e.metadata.exists?uL(this.It,e.document,!1):nr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return mi(e)}}class r${constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hF(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=yn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new dF(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||en()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function PH(n,e,t,r){return Kx.apply(this,arguments)}(e.localStore,new dF(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield MH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function hF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fF{constructor(e){this.key=e}}class pF{constructor(e){this.key=e}}class gF{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=en(),this.mutatedKeys=en(),this.Gu=N1(e),this.Qu=new x_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new cF,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const P=i.get(T),V=Ax(this.query,S)?S:null,G=!!P&&this.mutatedKeys.has(P.key),ce=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ye=!1;P&&V?P.data.isEqual(V.data)?G!==ce&&(r.track({type:3,doc:V}),ye=!0):this.Hu(P,V)||(r.track({type:2,doc:V}),ye=!0,(g&&this.Gu(V,g)>0||v&&this.Gu(V,v)<0)&&(d=!0)):!P&&V?(r.track({type:0,doc:V}),ye=!0):P&&!V&&(r.track({type:1,doc:P}),ye=!0,(g||v)&&(d=!0)),ye&&(V?(l=l.add(V),a=ce?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Qu:l,zu:r,$i:d,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,T)=>function(S,P){const V=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return V(S)-V(P)}(v.type,T.type)||this.Gu(v.doc,T.doc)),this.Ju(r);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,g=d!==this.qu;return this.qu=d,0!==a.length||g?{snapshot:new P_(this.query,e.Qu,i,a,e.mutatedKeys,0===d,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new cF,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=en(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new pF(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new fF(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=en();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return P_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class i${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class s${constructor(e){this.key=e,this.nc=!1}}class o${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new ch(d=>P1(d),hI),this.rc=new Map,this.oc=new Set,this.uc=new Sr(Ke.comparator),this.cc=new Map,this.ac=new jx,this.hc={},this.lc=new Map,this.fc=Ap.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function a$(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,Ie.Z)(function*(n,e){const t=ZP(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield b_(t.localStore,vs(e));t.isPrimaryClient&&KT(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield SP(t,e,r,"current"===d,l.resumeToken)}return i}),DP.apply(this,arguments)}function SP(n,e,t,r,i){return AP.apply(this,arguments)}function AP(){return AP=(0,Ie.Z)(function*(n,e,t,r,i){n._c=(S,P,V)=>{return(G=(0,Ie.Z)(function*(ce,ye,ot,dt){let ut=ye.view.Wu(ot);ut.$i&&(ut=yield WT(ce.localStore,ye.query,!1).then(({documents:jt})=>ye.view.Wu(jt,ut)));const ft=dt&&dt.targetChanges.get(ye.targetId),Rt=ye.view.applyChanges(ut,ce.isPrimaryClient,ft);return UP(ce,ye.targetId,Rt.Xu),Rt.snapshot}),function(ce,ye,ot,dt){return G.apply(this,arguments)})(n,S,P,V);var G};const a=yield WT(n.localStore,e,!0),l=new gF(e,a.Hi),d=l.Wu(a.documents),g=yI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(d,n.isPrimaryClient,g);UP(n,t,v.Xu);const T=new i$(e,t,l);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),AP.apply(this,arguments)}function u$(n,e){return RP.apply(this,arguments)}function RP(){return RP=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!hI(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield T_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),NI(t.remoteStore,r.targetId),M_(t,r.targetId)}).catch(rh))):(M_(t,r.targetId),yield T_(t.localStore,r.targetId,!0))}),RP.apply(this,arguments)}function xP(){return xP=(0,Ie.Z)(function*(n,e,t){const r=YP(n);try{const i=yield function(a,l){const d=Xe(a),g=fr.now(),v=l.reduce((P,V)=>P.add(V.key),en());let T,S;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=$s(),G=en();return d.Gi.getEntries(P,v).next(ce=>{V=ce,V.forEach((ye,ot)=>{ot.isValidDocument()||(G=G.add(ye))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,V)).next(ce=>{T=ce;const ye=[];for(const ot of l){const dt=yj(ot,T.get(ot.key).overlayedDocument);null!=dt&&ye.push(new hc(ot.key,dt,E1(dt.value.mapValue),pr.exists(!0)))}return d.mutationQueue.addMutationBatch(P,g,ye,l)}).next(ce=>{S=ce;const ye=ce.applyToLocalDocumentSet(T,G);return d.documentOverlayCache.saveOverlays(P,ce.batchId,ye)})}).then(()=>({batchId:S.batchId,changes:Y1(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let g=a.hc[a.currentUser.toKey()];g||(g=new Sr(zt)),g=g.insert(l,d),a.hc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield pc(r,i.changes),yield S_(r.remoteStore)}catch(i){const a=R_(i,"Failed to persist write");t.reject(a)}}),xP.apply(this,arguments)}function mF(n,e){return PP.apply(this,arguments)}function PP(){return PP=(0,Ie.Z)(function*(n,e){const t=Xe(n);try{const r=yield RH(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Ut(l.nc):i.removedDocuments.size>0&&(Ut(l.nc),l.nc=!1))}),yield pc(t,r,e)}catch(r){yield rh(r)}}),PP.apply(this,arguments)}function _F(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=Xe(a);d.onlineState=l;let g=!1;d.queries.forEach((v,T)=>{for(const S of T.listeners)S.bu(l)&&(g=!0)}),g&&bP(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function c$(n,e,t){return MP.apply(this,arguments)}function MP(){return MP=(0,Ie.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Sr(Ke.comparator);l=l.insert(a,nr.newNoDocument(a,Vt.min()));const d=en().add(a),g=new _I(Vt.min(),new Map,new Un(zt),l,d);yield mF(r,g),r.uc=r.uc.remove(a),r.cc.delete(e),VP(r)}else yield T_(r.localStore,e,!1).then(()=>M_(r,e,t)).catch(rh)}),MP.apply(this,arguments)}function d$(n,e){return NP.apply(this,arguments)}function NP(){return NP=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield AH(t.localStore,e);FP(t,r,null),LP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield pc(t,i)}catch(i){yield rh(i)}}),NP.apply(this,arguments)}function h$(n,e,t){return kP.apply(this,arguments)}function kP(){return kP=(0,Ie.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(a,l){const d=Xe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return d.mutationQueue.lookupMutationBatch(g,l).next(T=>(Ut(null!==T),v=T.keys(),d.mutationQueue.removeMutationBatch(g,T))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,v,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>d.localDocuments.getDocuments(g,v))})}(r.localStore,e);FP(r,e,t),LP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield pc(r,i)}catch(i){yield rh(i)}}),kP.apply(this,arguments)}function OP(){return OP=(0,Ie.Z)(function*(n,e){const t=Xe(n);fc(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Xe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=R_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),OP.apply(this,arguments)}function LP(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function FP(n,e,t){const r=Xe(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function M_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||yF(n,r)})}function yF(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(NI(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),VP(n))}function UP(n,e,t){for(const r of t)r instanceof fF?(n.ac.addReference(r.key,e),p$(n,r)):r instanceof pF?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||yF(n,r.key)):ht()}function p$(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oc.add(r),VP(n))}function VP(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ke(yn.fromString(e)),r=n.fc.next();n.cc.set(r,new s$(t)),n.uc=n.uc.insert(t,r),KT(n.remoteStore,new dh(vs(p_(t.path)),r,2,Hs.at))}}function pc(n,e,t){return BP.apply(this,arguments)}function BP(){return BP=(0,Ie.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[],l=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,g)=>{l.push(r._c(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const T=Gx.Ci(g.targetId,v);a.push(T)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(d=(0,Ie.Z)(function*(g,v){const T=Xe(g);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(v,P=>de.forEach(P.Si,V=>T.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>de.forEach(P.Di,V=>T.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!ih(S))throw S;$e("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const V=T.Ui.get(P),ce=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);T.Ui=T.Ui.insert(P,ce)}}}),function(g,v){return d.apply(this,arguments)})(r.localStore,a))}),BP.apply(this,arguments)}function g$(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,Ie.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield zL(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new Fe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield pc(t,r.ji)}var i}),jP.apply(this,arguments)}function m$(n,e){const t=Xe(n),r=t.cc.get(e);if(r&&r.nc)return en().add(r.key);{let i=en();const a=t.rc.get(e);if(!a)return i;for(const l of a){const d=t.ic.get(l);i=i.unionWith(d.view.ju)}return i}}function _$(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,Ie.Z)(function*(n,e){const t=Xe(n),r=yield WT(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&UP(t,e.targetId,i.Xu),i}),HP.apply(this,arguments)}function y$(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,Ie.Z)(function*(n,e){const t=Xe(n);return YL(t.localStore,e).then(r=>pc(t,r))}),$P.apply(this,arguments)}function v$(n,e,t,r){return WP.apply(this,arguments)}function WP(){return WP=(0,Ie.Z)(function*(n,e,t,r){const i=Xe(n),a=yield function(l,d){const g=Xe(l),v=Xe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",T=>v.Tn(T,d).next(S=>S?g.localDocuments.getDocuments(T,S):de.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield S_(i.remoteStore):"acknowledged"===t||"rejected"===t?(FP(i,e,r||null),LP(i,e),d=e,Xe(Xe(i.localStore).mutationQueue).An(d)):ht(),yield pc(i,a)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),WP.apply(this,arguments)}function GP(){return GP=(0,Ie.Z)(function*(n,e){const t=Xe(n);if(ZP(t),YP(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield vF(t,r.toArray());t.dc=!0,yield _P(t.remoteStore,!0);for(const a of i)KT(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(M_(t,l),T_(t.localStore,l,!0))),NI(t.remoteStore,l)}),yield i,yield vF(t,r),function(a){const l=Xe(a);l.cc.forEach((d,g)=>{NI(l.remoteStore,g)}),l.ac.fs(),l.cc=new Map,l.uc=new Sr(Ke.comparator)}(t),t.dc=!1,yield _P(t.remoteStore,!1)}}),GP.apply(this,arguments)}function vF(n,e,t){return zP.apply(this,arguments)}function zP(){return zP=(0,Ie.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[];for(const l of e){let d;const g=r.rc.get(l);if(g&&0!==g.length){d=yield b_(r.localStore,vs(g[0]));for(const v of g){const T=r.ic.get(v),S=yield _$(r,T);S.snapshot&&a.push(S.snapshot)}}else{const v=yield ZL(r.localStore,l);d=yield b_(r.localStore,v),yield SP(r,wF(v),l,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(a),i}),zP.apply(this,arguments)}function wF(n){return R1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function I$(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).vi()}function E$(n,e,t,r){return qP.apply(this,arguments)}function qP(){return qP=(0,Ie.Z)(function*(n,e,t,r){const i=Xe(n);if(i.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield YL(i.localStore,M1(a[0])),d=_I.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ti.EMPTY_BYTE_STRING);yield pc(i,l,d);break}case"rejected":yield T_(i.localStore,e,!0),M_(i,e,r);break;default:ht()}}),qP.apply(this,arguments)}function C$(n,e,t){return KP.apply(this,arguments)}function KP(){return KP=(0,Ie.Z)(function*(n,e,t){const r=ZP(n);if(r.dc){for(const i of e){if(r.rc.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const a=yield ZL(r.localStore,i),l=yield b_(r.localStore,a);yield SP(r,wF(a),l.targetId,!1,l.resumeToken),KT(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield T_(r.localStore,i,!1).then(()=>{NI(r.remoteStore,i),M_(r,i)}).catch(rh))}}),KP.apply(this,arguments)}function ZP(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c$.bind(null,e),e.sc.Wo=e$.bind(null,e.eventManager),e.sc.wc=t$.bind(null,e.eventManager),e}function YP(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=h$.bind(null,e),e}class IF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.It=PI(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return GL(this.persistence,new WL,e.initialUser,this.It)}yc(e){return new HL(HT.Bs,this.It)}gc(e){return new eF}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class EF extends IF{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield YP(r.Ac.syncEngine),yield S_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return GL(this.persistence,new WL,e.initialUser,this.It)}Tc(e,t){return new fH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Y2(t,this.persistence);return new Z2(e.asyncQueue,r)}yc(e){const t=Wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new $x(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nF(),qT(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new eF}}class T$ extends EF{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Jx&&(r.sharedClientState.syncEngine={Fr:v$.bind(null,i),$r:E$.bind(null,i),Br:C$.bind(null,i),vi:I$.bind(null,i),Mr:y$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ie.Z)(function*(l){yield function w$(n,e){return GP.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=nF();if(!Jx.C(t))throw new Fe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class QP{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>_F(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=g$.bind(null,r.syncEngine),yield _P(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new JH}createDatastore(e){const t=PI(e.databaseInfo.databaseId),r=new LH(e.databaseInfo);return new VH(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>_F(this.syncEngine,d,0),l=tF.C()?new tF:new NH,new HH(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,g,v){const T=new o$(r,i,a,l,d,g);return v&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Xe(t);$e("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield D_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function XP(n,e,t){if(!t)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CF(n,e,t,r){if(!0===e&&!0===r)throw new Fe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bF(n){if(!Ke.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TF(n){if(Ke.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=YT(n);throw new Fe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DF(n,e){if(e<=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const SF=new Map;class AF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,CF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new F2;switch(t.type){case"gapi":return new j2(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=SF.get(e);t&&($e("ComponentProvider","Removing Datastore"),SF.delete(e),t.terminate())}(this),Promise.resolve()}}class lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class rl extends Xi{constructor(e,t,r){super(e,t,p_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new Ke(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function xF(n,e,...t){if(n=(0,L.m9)(n),XP("collection","path",e),n instanceof kI){const r=yn.fromString(e,...t);return TF(r),new rl(n,null,r)}{if(!(n instanceof lr||n instanceof rl))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return TF(r),new rl(n.firestore,null,r)}}function QT(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=i1.R()),XP("doc","path",e),n instanceof kI){const r=yn.fromString(e,...t);return bF(r),new lr(n,null,new Ke(r))}{if(!(n instanceof lr||n instanceof rl))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return bF(r),new lr(n.firestore,n instanceof rl?n.converter:null,new Ke(r))}}function PF(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof lr||n instanceof rl)&&(e instanceof lr||e instanceof rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JP(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&hI(n._query,e._query)&&n.converter===e.converter}function MF(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class XT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class S${constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ei,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new n$(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ie.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class x${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ie.Z)(function*(a,l){const d=Xe(a),g=II(d.It)+"/documents",v={documents:l.map(V=>wI(d.It,V))},T=yield d._o("BatchGetDocuments",g,v,l.length),S=new Map;T.forEach(V=>{const G=function Rj(n,e){return"found"in e?function(t,r){Ut(!!r.found);const i=tl(t,r.found.name),a=mi(r.found.updateTime),l=new Pi({mapValue:{fields:r.found.fields}});return nr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Ut(!!r.missing),Ut(!!r.readTime);const i=tl(t,r.missing),a=mi(r.readTime);return nr.newNoDocument(i,a)}(n,e):ht()}(d.It,V);S.set(G.key.toString(),G)});const P=[];return l.forEach(V=>{const G=S.get(V.toString());Ut(!!G),P.push(G)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new v_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new Rx(a,e.precondition(a)))}),yield(r=(0,Ie.Z)(function*(i,a){const l=Xe(i),d=II(l.It)+"/documents",g={writes:a.map(v=>EI(l.It,v))};yield l.ao("Commit",d,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vt.min())?pr.exists(!1):pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new Fe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class P${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new eP(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ie.Z)(function*(){const t=new x$(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!oI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!q1(t)}return!1}}class M${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=i1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ie.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>($e("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=R_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function NF(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ie.Z)(function*(a){r.isEqual(a)||(yield zL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),eM.apply(this,arguments)}function kF(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nM(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>lF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>lF(e.remoteStore,a)),n.onlineComponents=e}),tM.apply(this,arguments)}function nM(n){return rM.apply(this,arguments)}function rM(){return rM=(0,Ie.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield NF(n,new IF)),n.offlineComponents}),rM.apply(this,arguments)}function JT(n){return iM.apply(this,arguments)}function iM(){return iM=(0,Ie.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield kF(n,new QP)),n.onlineComponents}),iM.apply(this,arguments)}function OF(n){return nM(n).then(e=>e.persistence)}function eD(n){return nM(n).then(e=>e.localStore)}function sM(n){return JT(n).then(e=>e.remoteStore)}function oM(n){return JT(n).then(e=>e.syncEngine)}function N_(n){return aM.apply(this,arguments)}function aM(){return aM=(0,Ie.Z)(function*(n){const e=yield JT(n),t=e.eventManager;return t.onListen=a$.bind(null,e.syncEngine),t.onUnlisten=u$.bind(null,e.syncEngine),t}),aM.apply(this,arguments)}function FF(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,d,g){const v=new XT({next:S=>{a.enqueueAndForget(()=>EP(i,T));const P=S.docs.has(l);!P&&S.fromCache?g.reject(new Fe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&d&&"server"===d.source?g.reject(new Fe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new TP(p_(l.path),v,{includeMetadataChanges:!0,Nu:!0});return wP(i,T)}(yield N_(n),n.asyncQueue,e,t,r)})),r.promise}function UF(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,d,g){const v=new XT({next:S=>{a.enqueueAndForget(()=>EP(i,T)),S.fromCache&&"server"===d.source?g.reject(new Fe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new TP(l,v,{includeMetadataChanges:!0,Nu:!0});return wP(i,T)}(yield N_(n),n.asyncQueue,e,t,r)})),r.promise}class B${constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new eP(this,"async_queue_retry"),this.Wc=()=>{const t=qT();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=qT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=qT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new ei;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ih(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=vP.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function uM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class j${constructor(){this._progressObserver={},this._taskCompletionResolver=new ei,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cr extends kI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new B$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||VF(this),this._firestoreClient.terminate()}}function Nr(n){return n._firestoreClient||VF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VF(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new J2(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new M$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function BF(n,e,t){const r=new ei;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield NF(n,t),yield kF(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===_e.FAILED_PRECONDITION||l.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;hp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function jF(n){if(n._initialized||n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(ti.fromBase64String(e))}catch(t){throw new Fe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._methodName=e}}class tD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const Q$=/^__.*__$/;class X${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new hc(e,this.data,this.fieldMask,t,this.fieldTransforms):new y_(e,this.data,t,this.fieldTransforms)}}class HF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $F(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class nD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new nD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return sD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($F(this.sa)&&Q$.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class J${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||PI(e)}da(e,t,r,i=!1){return new nD({sa:e,methodName:t,fa:r,path:Dr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Pp(n){const e=n._freezeSettings(),t=PI(n._databaseId);return new J$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rD(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);hM("Data must be an object, but it was:",l,r);const d=zF(r,l);let g,v;if(a.merge)g=new Ao(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const P=fM(e,S,t);if(!l.contains(P))throw new Fe(_e.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);KF(T,P)||T.push(P)}g=new Ao(T),v=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,v=l.fieldTransforms;return new X$(new Pi(d),g,v)}class OI extends xp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof OI}}function WF(n,e,t){return new nD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class lM extends xp{_toFieldTransform(e){return new fI(e.path,new m_)}isEqual(e){return e instanceof lM}}class eW extends xp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=WF(this,e,!0),r=this._a.map(a=>Mp(a,t)),i=new wp(r);return new fI(e.path,i)}isEqual(e){return this===e}}class tW extends xp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=WF(this,e,!0),r=this._a.map(a=>Mp(a,t)),i=new Ip(r);return new fI(e.path,i)}isEqual(e){return this===e}}class nW extends xp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new __(e.It,L1(e.It,this.wa));return new fI(e.path,t)}isEqual(e){return this===e}}function cM(n,e,t,r){const i=n.da(1,e,t);hM("Data must be an object, but it was:",i,r);const a=[],l=Pi.empty();gp(r,(g,v)=>{const T=iD(e,g,t);v=(0,L.m9)(v);const S=i.ca(T);if(v instanceof OI)a.push(T);else{const P=Mp(v,S);null!=P&&(a.push(T),l.set(T,P))}});const d=new Ao(a);return new HF(l,d,i.fieldTransforms)}function dM(n,e,t,r,i,a){const l=n.da(1,e,t),d=[fM(e,r,t)],g=[i];if(a.length%2!=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)d.push(fM(e,a[P])),g.push(a[P+1]);const v=[],T=Pi.empty();for(let P=d.length-1;P>=0;--P)if(!KF(v,d[P])){const V=d[P];let G=g[P];G=(0,L.m9)(G);const ce=l.ca(V);if(G instanceof OI)v.push(V);else{const ye=Mp(G,ce);null!=ye&&(v.push(V),T.set(V,ye))}}const S=new Ao(v);return new HF(T,S,l.fieldTransforms)}function GF(n,e,t,r=!1){return Mp(t,n.da(r?4:3,e))}function Mp(n,e){if(qF(n=(0,L.m9)(n)))return hM("Unsupported field value:",e,n),zF(n,e);if(n instanceof xp)return function(t,r){if(!$F(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=Mp(l,r.aa(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return L1(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=fr.fromDate(t);return{timestampValue:vI(r.It,i)}}if(t instanceof fr){const i=new fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vI(r.It,i)}}if(t instanceof tD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof il)return{bytesValue:rL(r.It,t._byteString)};if(t instanceof lr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${YT(t)}`)}(n,e)}function zF(n,e){const t={};return h1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gp(n,(r,i)=>{const a=Mp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function qF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fr||n instanceof tD||n instanceof il||n instanceof lr||n instanceof xp)}function hM(n,e,t){if(!qF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=YT(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function fM(n,e,t){if((e=(0,L.m9)(e))instanceof gc)return e._internalPath;if("string"==typeof e)return iD(n,e);throw sD("Field path arguments must be of type string or ",n,!1,void 0,t)}const rW=new RegExp("[~\\*/\\[\\]]");function iD(n,e,t){if(e.search(rW)>=0)throw sD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gc(...e.split("."))._internalPath}catch{throw sD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Fe(_e.INVALID_ARGUMENT,d+n+g)}function KF(n,e){return n.some(t=>t.isEqual(e))}class LI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iW extends LI{data(){return super.data()}}function oD(n,e){return"string"==typeof e?iD(n,e):e instanceof gc?e._internalPath:e._delegate._internalPath}function ZF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FI{}function gh(n,...e){for(const t of e)n=t._apply(n);return n}class sW extends FI{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Pp(e.firestore),r=function(i,a,l,d,g,v,T){let S;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){tU(T,v);const V=[];for(const G of T)V.push(eU(d,i,G));S={arrayValue:{values:V}}}else S=eU(d,i,T)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||tU(T,v),S=GF(l,"where",T,"in"===v||"not-in"===v);const P=Mi.create(g,v,S);return function(V,G){if(G.dt()){const ye=Tx(V);if(null!==ye&&!ye.isEqual(G.field))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${G.field.toString()}'`);const ot=bx(V);null!==ot&&nU(0,G.field,ot)}const ce=function(ye,ot){for(const dt of ye.filters)if(ot.indexOf(dt.op)>=0)return dt.op;return null}(V,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ce)throw new Fe(_e.INVALID_ARGUMENT,ce===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Xi(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new dc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class aW extends FI{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new f_(i,a);return function(d,g){if(null===bx(d)){const v=Tx(d);null!==v&&nU(0,v,g.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Xi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new dc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YF extends FI{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Xi(e.firestore,e.converter,AT(e._query,this.Ia,this.Ta))}}class QF extends FI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=JF(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new dc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class XF extends FI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=JF(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new dc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function JF(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof LI)return function(i,a,l,d,g){if(!d)throw new Fe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const T of g_(i))if(T.field.isKeyField())v.push(yp(a,d.key));else{const S=d.data.field(T.field);if(Ix(S))throw new Fe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=T.field.canonicalString();throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new lh(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Pp(n.firestore);return function(a,l,d,g,v,T){const S=a.explicitOrderBy;if(v.length>S.length)throw new Fe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<v.length;V++){const G=v[V];if(S[V].field.isKeyField()){if("string"!=typeof G)throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!Dx(a)&&-1!==G.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const ce=a.path.child(yn.fromString(G));if(!Ke.isDocumentKey(ce))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const ye=new Ke(ce);P.push(yp(l,ye))}else{const ce=GF(d,g,G);P.push(ce)}}return new lh(P,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eU(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dx(e)&&-1!==t.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!Ke.isDocumentKey(r))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yp(n,new Ke(r))}if(t instanceof lr)return yp(n,t._key);throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YT(t)}.`)}function tU(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function nU(n,e,t){if(!t.isEqual(e))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pM{convertValue(e,t="none"){switch(_p(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return gp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new tD(Ar(e.latitude),Ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=p1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sI(e));default:return null}}convertTimestamp(e){const t=sh(e);return new fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);Ut(hL(r));const i=new oh(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||Mr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function aD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gW extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mc extends LI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new UI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class UI extends mc{data(e={}){return super.data(e)}}class mh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Np(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new UI(this._firestore,this._userDataWriter,r.key,r,new Np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new UI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new UI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:mW(l.type),doc:d,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function rU(n,e){return n instanceof mc&&e instanceof mc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mh&&e instanceof mh&&n._firestore===e._firestore&&JP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class _h extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}function iU(n,e,t){n=hn(n,lr);const r=hn(n.firestore,cr),i=aD(n.converter,e,t);return k_(r,[rD(Pp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,pr.none())])}function sU(n,e,t,...r){n=hn(n,lr);const i=hn(n.firestore,cr),a=Pp(i);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof gc?dM(a,"updateDoc",n._key,e,t,r):cM(a,"updateDoc",n._key,e),k_(i,[l.toMutation(n._key,pr.exists(!0))])}function oU(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||uM(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(uM(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,v,T;if(n instanceof lr)v=hn(n.firestore,cr),T=p_(n._key.path),g={next:S=>{e[l]&&e[l](gM(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=hn(n,Xi);v=hn(S.firestore,cr),T=S._query;const P=new _h(v);g={next:V=>{e[l]&&e[l](new mh(v,P,S,V))},error:e[l+1],complete:e[l+2]},ZF(n._query)}return function(S,P,V,G){const ce=new XT(G),ye=new TP(P,ce,V);return S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return wP(yield N_(S),ye)})),()=>{ce.bc(),S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return EP(yield N_(S),ye)}))}}(Nr(v),T,d,g)}function k_(n,e){return function(t,r){const i=new ei;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function l$(n,e,t){return xP.apply(this,arguments)}(yield oM(t),r,i)})),i.promise}(Nr(n),e)}function gM(n,e,t){const r=t.docs.get(e._key),i=new _h(n);return new mc(n,i,e._key,r,new Np(t.hasPendingWrites,t.fromCache),e.converter)}const DW={maxAttempts:5};class aU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pp(e)}set(e,t,r){this._verifyNotCommitted();const i=yh(e,this._firestore),a=aD(i.converter,t,r),l=rD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,pr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=yh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof gc?dM(this._dataReader,"WriteBatch.update",a._key,t,r,i):cM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yh(e,this._firestore);return this._mutations=this._mutations.concat(new v_(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Fe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class SW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pp(e)}get(e){const t=yh(e,this._firestore),r=new gW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new LI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new LI(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=yh(e,this._firestore),a=aD(i.converter,t,r),l=rD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=yh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof gc?dM(this._dataReader,"Transaction.update",a._key,t,r,i):cM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=yh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yh(e,this._firestore),r=new _h(this._firestore);return super.get(e).then(i=>new mc(this._firestore,r,t._key,i._document,new Np(!1,!1),t.converter))}}function mM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function lU(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function cU(){if(!function Q2(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){l_=bi.SDK_VERSION,(0,bi._registerComponent)(new ma.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new cr(new V2(t.getProvider("auth-internal")),new H2(t.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oh(d.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(t1,"3.7.3",n),(0,bi.registerVersion)(t1,"3.7.3","esm2017")}();class VI{constructor(e){this._delegate=e}static fromBase64String(e){return cU(),new VI(il.fromBase64String(e))}static fromUint8Array(e){return lU(),new VI(il.fromUint8Array(e))}toBase64(){return cU(),this._delegate.toBase64()}toUint8Array(){return lU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _M(n){return function LW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class FW{enableIndexedDbPersistence(e,t){return function $$(n,e){jF(n=hn(n,cr));const t=Nr(n),r=n._freezeSettings(),i=new QP;return BF(t,i,new EF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function W$(n){jF(n=hn(n,cr));const e=Nr(n),t=n._freezeSettings(),r=new QP;return BF(e,r,new T$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function G$(n){if(n._initialized&&!n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ei;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!hu.C())return Promise.resolve();const i=r+"main";yield hu.delete(i)}),function(r){return t.apply(this,arguments)})(Wx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class dU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof oh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function RF(n,e,t,r={}){var i;const a=(n=hn(n,kI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&hp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=gi.MOCK_USER;else{l=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Fe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new gi(g)}n._authCredentials=new U2(new n1(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function q$(n){return function N$(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield OF(n),t=yield sM(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i._u.delete(0),MI(i)}(t)}))}(Nr(n=hn(n,cr)))}(this._delegate)}disableNetwork(){return function K$(n){return function k$(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield OF(n),t=yield sM(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(i){const a=Xe(i);a._u.add(0),yield D_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Nr(n=hn(n,cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function z$(n){return function(e){const t=new ei;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function f$(n,e){return OP.apply(this,arguments)}(yield oM(e),t)})),t.promise}(Nr(n=hn(n,cr)))}(this._delegate)}onSnapshotsInSync(e){return function TW(n,e){return function F$(n,e){const t=new XT(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield N_(n),i=t,Xe(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield N_(n),i=t,void Xe(r).Ru.delete(i);var r,i}))}}(Nr(n=hn(n,cr)),uM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new O_(this,xF(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ra(this,QT(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Es(this,function D$(n,e){if(n=hn(n,kI),XP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(t=e,new dc(yn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function AW(n,e,t){n=hn(n,cr);const r=Object.assign(Object.assign({},DW),t);return function(i){if(i.maxAttempts<1)throw new Fe(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new ei;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const g=yield function LF(n){return JT(n).then(e=>e.datastore)}(i);new P$(i.asyncQueue,g,l,a,d).run()})),d.promise}(Nr(n),i=>e(new SW(n,i)),r)}(this._delegate,t=>e(new hU(this,t)))}batch(){return Nr(this._delegate),new fU(new aU(this._delegate,e=>k_(this._delegate,e)))}loadBundle(e){return function Z$(n,e){const t=Nr(n=hn(n,cr)),r=new j$;return function U$(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return MF(g,v);if(g instanceof ArrayBuffer)return MF(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new S$(g,l);var g}(t,PI(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function b$(n,e,t){const r=Xe(n);var i;(i=(0,Ie.Z)(function*(a,l,d){try{const g=yield l.getMetadata();if(yield function(P,V){const G=Xe(P),ce=mi(V.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",ye=>G.Ns.getBundleMetadata(ye,V.id)).then(ye=>!!ye&&ye.createTime.compareTo(ce)>=0)}(a.localStore,g))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=g).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress(hF(g));const v=new r$(g,a.localStore,l.It);let T=yield l.mc();for(;T;){const P=yield v.Fu(T);P&&d._updateProgress(P),T=yield l.mc()}const S=yield v.complete();return yield pc(a,S.Lu,void 0),yield function(P,V){const G=Xe(P);return G.persistence.runTransaction("Save bundle","readwrite",ce=>G.Ns.saveBundleMetadata(ce,V))}(a.localStore,g),d._completeWith(S.progress),Promise.resolve(S.Bu)}catch(g){return hp("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var P}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Y$(n,e){return function V$(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield eD(n),e)}))}(Nr(n=hn(n,cr)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Es(this,t):null)}}class uD extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new VI(new il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ra.forKey(t,this.firestore,null)}}class hU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}get(e){const t=Op(e);return this._delegate.get(t).then(r=>new BI(this._firestore,new mc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Op(e);return r?(mM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Op(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}}class fU{constructor(e){this._delegate=e}set(e,t,r){const i=Op(e);return r?(mM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Op(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new UI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=kp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new kp(e,new uD(e),t),i.set(t,a)),a}}kp.INSTANCES=new WeakMap;class Ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ra(t,new lr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Ra(t,new lr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new O_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new O_(this.firestore,xF(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof lr&&PF(this._delegate,e)}set(e,t){t=mM("DocumentReference.set",t);try{return t?iU(this._delegate,e,t):iU(this._delegate,e)}catch(r){throw Is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sU(this._delegate,e):sU(this._delegate,e,t,...r)}catch(i){throw Is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CW(n){return k_(hn(n.firestore,cr),[new v_(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=pU(e),r=gU(e,i=>new BI(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return oU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function yW(n){n=hn(n,lr);const e=hn(n.firestore,cr),t=Nr(e),r=new _h(e);return function O$(n,e){const t=new ei;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const d=yield function(g,v){const T=Xe(g);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,v))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Fe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=R_(d,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield eD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new mc(e,r,n._key,i,new Np(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vW(n){n=hn(n,lr);const e=hn(n.firestore,cr);return FF(Nr(e),n._key,{source:"server"}).then(t=>gM(e,n,t))}(this._delegate):function _W(n){n=hn(n,lr);const e=hn(n.firestore,cr);return FF(Nr(e),n._key).then(t=>gM(e,n,t))}(this._delegate),t.then(r=>new BI(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ra(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function pU(n){for(const e of n)if("object"==typeof e&&!_M(e))return e;return{}}function gU(n,e){var t,r;let i;return i=_M(n[0])?n[0]:_M(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class BI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return rU(this._delegate,e._delegate)}}class jI extends BI{data(e){const t=this._delegate.data(e);return function L2(n,e){n||ht()}(void 0!==t),t}}class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}where(e,t,r){try{return new Es(this.firestore,gh(this._delegate,function oW(n,e,t){const r=e,i=oD("where",n);return new sW(i,r,t)}(e,t,r)))}catch(i){throw Is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Es(this.firestore,gh(this._delegate,function uW(n,e="asc"){const t=e,r=oD("orderBy",n);return new aW(r,t)}(e,t)))}catch(r){throw Is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Es(this.firestore,gh(this._delegate,function lW(n){return DF("limit",n),new YF("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Es(this.firestore,gh(this._delegate,function cW(n){return DF("limitToLast",n),new YF("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Es(this.firestore,gh(this._delegate,function dW(...n){return new QF("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Es(this.firestore,gh(this._delegate,function hW(...n){return new QF("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Es(this.firestore,gh(this._delegate,function fW(...n){return new XF("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Es(this.firestore,gh(this._delegate,function pW(...n){return new XF("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return JP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function IW(n){n=hn(n,Xi);const e=hn(n.firestore,cr),t=Nr(e),r=new _h(e);return function L$(n,e){const t=new ei;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const d=yield WT(i,a,!0),g=new gF(a,d.Hi),v=g.Wu(d.documents),T=g.applyChanges(v,!1);l.resolve(T.snapshot)}catch(d){const g=R_(d,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield eD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mh(e,r,n,i))}(this._delegate):"server"===e?.source?function EW(n){n=hn(n,Xi);const e=hn(n.firestore,cr),t=Nr(e),r=new _h(e);return UF(t,n._query,{source:"server"}).then(i=>new mh(e,r,n,i))}(this._delegate):function wW(n){n=hn(n,Xi);const e=hn(n.firestore,cr),t=Nr(e),r=new _h(e);return ZF(n._query),UF(t,n._query).then(i=>new mh(e,r,n,i))}(this._delegate),t.then(r=>new yM(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=pU(e),r=gU(e,i=>new yM(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return oU(this._delegate,t,r)}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}class VW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jI(this._firestore,r))})}isEqual(e){return rU(this._delegate,e._delegate)}}class O_ extends Es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ra(this.firestore,e):null}doc(e){try{return new Ra(this.firestore,void 0===e?QT(this._delegate):QT(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function bW(n,e){const t=hn(n.firestore,cr),r=QT(n),i=aD(n.converter,e);return k_(t,[rD(Pp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ra(this.firestore,t))}isEqual(e){return PF(this._delegate,e._delegate)}withConverter(e){return new O_(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Op(n){return hn(n,lr)}class vM{constructor(...e){this._delegate=new gc(...e)}static documentId(){return new vM(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xW(){return new lM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lp(e)}static delete(){const e=function RW(){return new OI("deleteField")}();return e._methodName="FieldValue.delete",new Lp(e)}static arrayUnion(...e){const t=function PW(...n){return new eW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lp(t)}static arrayRemove(...e){const t=function MW(...n){return new tW("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lp(t)}static increment(e){const t=function NW(n){return new nW("increment",n)}(e);return t._methodName="FieldValue.increment",new Lp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BW={Firestore:dU,GeoPoint:tD,Timestamp:fr,Blob:VI,Transaction:hU,WriteBatch:fU,DocumentReference:Ra,DocumentSnapshot:BI,Query:Es,QueryDocumentSnapshot:jI,QuerySnapshot:yM,CollectionReference:O_,FieldPath:vM,FieldValue:Lp,setLogLevel:function UW(n){!function O2(n){nh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function mU(n,e){return function $W(n,e=yf.z){return new Cr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function wM(n,e){return mU(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function lD(n,e){return wM(n,e).pipe(aa(void 0),AR(),(0,st.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const g=i.find(T=>T.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function _U(n,e,t){return lD(n,t).pipe(Mt((r,i)=>function GW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function zW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return IM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return IM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return IM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),sv(),(0,st.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function IM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function yU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function HW(n){(function jW(n,e){n.INTERNAL.registerComponent(new ma.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},BW)))})(n,(e,t)=>new dU(e,t,new FW)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(ov.Z);class vU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(aa(void 0),AR(),b(([r,i])=>i.length>0||!r),(0,st.U)(([r,i])=>i),In.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=yU(e);return _U(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return wM(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),In.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(In.iC)}add(e){return this.ref.add(e)}doc(e){return new wU(this.ref.doc(e),this.afs)}}class wU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=CU(r,t);return new vU(i,a,this.afs)}snapshotChanges(){return function WW(n,e){return mU(n,e).pipe(aa(void 0),AR(),(0,st.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(In.iC)}}class qW{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lD(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),b(t=>t.length>0),In.iC):lD(this.query,this.afs.schedulers.outsideAngular).pipe(In.iC)}auditTrail(e){return this.stateChanges(e).pipe(Mt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=yU(e);return _U(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return wM(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),In.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(In.iC)}}const IU=new m.OlP("angularfire2.enableFirestorePersistence"),EU=new m.OlP("angularfire2.firestore.persistenceSettings"),KW=new m.OlP("angularfire2.firestore.settings"),ZW=new m.OlP("angularfire2.firestore.use-emulator");function CU(n,e=(t=>t)){return{query:e(n),ref:n}}let YW=(()=>{class n{constructor(t,r,i,a,l,d,g,v,T,S,P,V,G,ce,ye,ot,dt){this.schedulers=g;const ut=(0,Br.on)(t,d,r),ft=T;S&&mf(ut,d,P,G,ce,ye,V,ot),[this.firestore,this.persistenceEnabled$]=(0,Br.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const Rt=d.runOutsideAngular(()=>ut.firestore());if(a&&Rt.settings(a),ft&&Rt.useEmulator(...ft),i&&!Lo(l)){const jt=()=>{try{return(0,un.D)(Rt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(vr){return typeof console<"u"&&console.warn(vr),at(!1)}};return[Rt,d.runOutsideAngular(jt)]}return[Rt,at(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=CU(i,r),d=this.schedulers.ngZone.run(()=>a);return new vU(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new qW(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new wU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Br.Dh),m.LFG(Br.xv,8),m.LFG(IU,8),m.LFG(KW,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(In.HU),m.LFG(EU,8),m.LFG(ZW,8),m.LFG(zg,8),m.LFG(Zy,8),m.LFG(Yy,8),m.LFG(gd,8),m.LFG(gf,8),m.LFG(md,8),m.LFG(f0,8),m.LFG(pd,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QW=(()=>{class n{constructor(){Gg.Z.registerVersion("angularfire",In.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:IU,useValue:!0},{provide:EU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[YW]}),n})(),XW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[k0]}),n.\u0275inj=m.cJS({imports:[Zo,rv,Br.hO.initializeApp(iv_firebaseConfig),p0,QW,MB,HU,C0,AS]}),n})();(0,m.G48)(),Za().bootstrapModule(XW).catch(n=>console.error(n))},5867:(pt,Pe,F)=>{F.d(Pe,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=F(9681);(0,m.registerVersion)("firebase","9.14.0","app")},127:(pt,Pe,F)=>{F.d(Pe,{Z:()=>m.Z});var m=F(3942);m.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(pt,Pe,F)=>{F.r(Pe);var m=F(5861),$=F(3942),k=F(8247),se=F(2090),pe=(F(9681),F(1877),F(4859));function he(){return window}function z(){return(z=(0,m.Z)(function*(H,M,B){var ne;const{BuildInfo:Oe}=he();(0,k.ap)(M.sessionId,"AuthEvent did not contain a session ID");const rt=yield ge(M.sessionId),it={};return(0,k.aq)()?it.ibi=Oe.packageName:(0,k.ar)()?it.apn=Oe.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),Oe.displayName&&(it.appDisplayName=Oe.displayName),it.sessionId=rt,(0,k.at)(H,B,M.type,void 0,null!==(ne=M.eventId)&&void 0!==ne?ne:void 0,it)})).apply(this,arguments)}function He(){return(He=(0,m.Z)(function*(H){const{BuildInfo:M}=he(),B={};(0,k.aq)()?B.iosBundleId=M.packageName:(0,k.ar)()?B.androidPackageName=M.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),yield(0,k.au)(H,B)})).apply(this,arguments)}function tt(){return(tt=(0,m.Z)(function*(H,M,B){const{cordova:ne}=he();let Oe=()=>{};try{yield new Promise((rt,it)=>{let Ae=null;function Ue(){var Ot;rt();const gn=null===(Ot=ne.plugins.browsertab)||void 0===Ot?void 0:Ot.close;"function"==typeof gn&&gn(),"function"==typeof B?.close&&B.close()}function Pt(){Ae||(Ae=window.setTimeout(()=>{it((0,k.aw)(H,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===document?.visibilityState&&Pt()}M.addPassiveListener(Ue),document.addEventListener("resume",Pt,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",pn,!1),Oe=()=>{M.removePassiveListener(Ue),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",pn,!1),Ae&&window.clearTimeout(Ae)}})}finally{Oe()}})).apply(this,arguments)}function ge(H){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,m.Z)(function*(H){const M=Ze(H),B=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(B)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(H){if((0,k.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(H);const M=new ArrayBuffer(H.length),B=new Uint8Array(M);for(let ne=0;ne<H.length;ne++)B[ne]=H.charCodeAt(ne);return B}class Me extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(M)),super.onEvent(M)}initialized(){var M=this;return(0,m.Z)(function*(){yield M.initPromise})()}}function ie(H){return le.apply(this,arguments)}function le(){return(le=(0,m.Z)(function*(H){const M=yield ee()._get(fe(H));return M&&(yield ee()._remove(fe(H))),M})).apply(this,arguments)}function Q(){const H=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const ne=Math.floor(Math.random()*M.length);H.push(M.charAt(ne))}return H.join("")}function ee(){return(0,k.az)(k.b)}function fe(H){return(0,k.aA)("authEvent",H.config.apiKey,H.name)}function je(H){if(!H?.includes("?"))return{};const[M,...B]=H.split("?");return(0,se.zd)(B.join("?"))}function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function qt(){var H;return(null===(H=self?.location)||void 0===H?void 0:H.protocol)||null}function wr(H=(0,se.z$)()){return!("file:"!==qt()&&"ionic:"!==qt()&&"capacitor:"!==qt()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function Oi(){try{const H=self.localStorage,M=k.aI();if(H)return H.setItem(M,"1"),H.removeItem(M),!function ki(H=(0,se.z$)()){return function kr(){return(0,se.w1)()&&11===document?.documentMode}()||function Nn(H=(0,se.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,se.hl)()}catch{return Or()&&(0,se.hl)()}return!1}function Or(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function Bt(){return"http:"===qt()||"https:"===qt()}()||(0,se.ru)()||wr())&&!function Ni(){return(0,se.b$)()||(0,se.UG)()}()&&Oi()&&!Or()}function vi(){return wr()&&typeof document<"u"}function Ye(){return(Ye=(0,m.Z)(function*(){return!!vi()&&new Promise(H=>{const M=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),H(!0)})})})).apply(this,arguments)}const Yn={LOCAL:"local",NONE:"none",SESSION:"session"},En=k.ax,gr="persistence";function Cn(H){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,m.Z)(function*(H){yield H._initializationPromise;const M=_t(),B=k.aA(gr,H.config.apiKey,H.name);M&&M.setItem(B,H._getPersistence())})).apply(this,arguments)}function _t(){var H;try{return(null===(H=function rr(){return typeof window<"u"?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch{return null}}const yt=k.ax;class xt{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(class on{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,m.Z)(function*(){const ne=M._key();let Oe=B.eventManagers.get(ne);return Oe||(Oe=new Me(M),B.eventManagers.set(ne,Oe),B.attachCallbackListeners(M,Oe)),Oe})()}_openPopup(M){(0,k.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,B,ne,Oe){var rt=this;return(0,m.Z)(function*(){!function Ee(H){var M,B,ne,Oe,rt,it,Ae,Ue,Pt,pn;const Ot=he();(0,k.ax)("function"==typeof(null===(M=Ot?.universalLinks)||void 0===M?void 0:M.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(B=Ot?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(rt=null===(Oe=null===(ne=Ot?.cordova)||void 0===ne?void 0:ne.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===rt?void 0:rt.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Ue=null===(Ae=null===(it=Ot?.cordova)||void 0===it?void 0:it.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===Ue?void 0:Ue.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(pn=null===(Pt=Ot?.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===pn?void 0:pn.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const it=yield rt._initialize(M);yield it.initialized(),it.resetRedirect(),(0,k.aD)(),yield rt._originValidation(M);const Ae=function Ce(H,M,B=null){return{type:M,eventId:B,urlResponse:null,sessionId:Q(),postBody:null,tenantId:H.tenantId,error:(0,k.aw)(H,"no-auth-event")}}(M,ne,Oe);yield function Ge(H,M){return ee()._set(fe(H),M)}(M,Ae);const Ue=yield function K(H,M,B){return z.apply(this,arguments)}(M,Ae,B),Pt=yield function ke(H){const{cordova:M}=he();return new Promise(B=>{M.plugins.browsertab.isAvailable(ne=>{let Oe=null;ne?M.plugins.browsertab.openUrl(H):Oe=M.InAppBrowser.open(H,(0,k.av)()?"_blank":"_system","location=yes"),B(Oe)})})}(Ue);return function De(H,M,B){return tt.apply(this,arguments)}(M,it,Pt)})()}_isIframeWebStorageSupported(M,B){throw new Error("Method not implemented.")}_originValidation(M){const B=M._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function X(H){return He.apply(this,arguments)}(M)),this.originValidationPromises[B]}attachCallbackListeners(M,B){const{universalLinks:ne,handleOpenURL:Oe,BuildInfo:rt}=he(),it=setTimeout((0,m.Z)(function*(){yield ie(M),B.onEvent(ze())}),500),Ae=function(){var pn=(0,m.Z)(function*(Ot){clearTimeout(it);const gn=yield ie(M);let Ji=null;gn&&Ot?.url&&(Ji=function we(H,M){var B,ne;const Oe=function Be(H){const M=je(H),B=M.link?decodeURIComponent(M.link):void 0,ne=je(B).link,Oe=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return je(Oe).link||Oe||ne||B||H}(M);if(Oe.includes("/__/auth/callback")){const rt=je(Oe),it=rt.firebaseError?function ae(H){try{return JSON.parse(H)}catch{return null}}(decodeURIComponent(rt.firebaseError)):null,Ae=null===(ne=null===(B=it?.code)||void 0===B?void 0:B.split("auth/"))||void 0===ne?void 0:ne[1],Ue=Ae?(0,k.aw)(Ae):null;return Ue?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Oe,postBody:null}}return null}(gn,Ot.url)),B.onEvent(Ji||ze())});return function(gn){return pn.apply(this,arguments)}}();typeof ne<"u"&&"function"==typeof ne.subscribe&&ne.subscribe(null,Ae);const Ue=Oe,Pt=`${rt.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var pn=(0,m.Z)(function*(Ot){if(Ot.toLowerCase().startsWith(Pt)&&Ae({url:Ot}),"function"==typeof Ue)try{Ue(Ot)}catch(gn){console.error(gn)}});return function(Ot){return pn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,m.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,B,ne,Oe){var rt=this;return(0,m.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openPopup(M,B,ne,Oe)})()}_openRedirect(M,B,ne,Oe){var rt=this;return(0,m.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openRedirect(M,B,ne,Oe)})()}_isIframeWebStorageSupported(M,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,B)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return vi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,m.Z)(function*(){if(M.underlyingResolver)return;const B=yield function Li(){return Ye.apply(this,arguments)}();M.underlyingResolver=B?M.cordovaResolver:M.browserResolver})()}}function Lr(H){return H.unwrap()}function Rr(H){return xr(H)}function xr(H){const{_tokenResponse:M}=H instanceof se.ZR?H.customData:H;if(!M)return null;if(!(H instanceof se.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return k.P.credentialFromResult(H);const B=M.providerId;if(!B||B===k.o.PASSWORD)return null;let ne;switch(B){case k.o.GOOGLE:ne=k.Q;break;case k.o.FACEBOOK:ne=k.N;break;case k.o.GITHUB:ne=k.T;break;case k.o.TWITTER:ne=k.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:rt,oauthTokenSecret:it,pendingToken:Ae,nonce:Ue}=M;return rt||it||Oe||Ae?Ae?B.startsWith("saml.")?k.aL._create(B,Ae):k.J._fromParams({providerId:B,signInMethod:B,pendingToken:Ae,idToken:Oe,accessToken:rt}):new k.U(B).credential({idToken:Oe,accessToken:rt,rawNonce:Ue}):null}return H instanceof se.ZR?ne.credentialFromError(H):ne.credentialFromResult(H)}function kt(H,M){return M.catch(B=>{throw B instanceof se.ZR&&function Dt(H,M){var B,ne;const Oe=null===(B=M.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ne=M)||void 0===ne?void 0:ne.code))M.resolver=new dr(H,k.an(H,M));else if(Oe){const rt=xr(M),it=M;rt&&(it.credential=rt,it.tenantId=Oe.tenantId||void 0,it.email=Oe.email||void 0,it.phoneNumber=Oe.phoneNumber||void 0)}}(H,B),B}).then(B=>{const Oe=B.user;return{operationType:B.operationType,credential:Rr(B),additionalUserInfo:k.al(B),user:Rn.getOrCreate(Oe)}})}function $r(H,M){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(H,M){const B=yield M;return{verificationId:B.verificationId,confirm:ne=>kt(H,B.confirm(ne))}})).apply(this,arguments)}class dr{constructor(M,B){this.resolver=B,this.auth=function Qn(H){return H.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return kt(Lr(this.auth),this.resolver.resolveSignIn(M))}}class Rn{constructor(M){this._delegate=M,this.multiFactor=k.ao(M)}static getOrCreate(M){return Rn.USER_MAP.has(M)||Rn.USER_MAP.set(M,new Rn(M)),Rn.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var B=this;return(0,m.Z)(function*(){return kt(B.auth,k.Z(B._delegate,M))})()}linkWithPhoneNumber(M,B){var ne=this;return(0,m.Z)(function*(){return $r(ne.auth,k.l(ne._delegate,M,B))})()}linkWithPopup(M){var B=this;return(0,m.Z)(function*(){return kt(B.auth,k.d(B._delegate,M,xt))})()}linkWithRedirect(M){var B=this;return(0,m.Z)(function*(){return yield Cn(k.aE(B.auth)),k.g(B._delegate,M,xt)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var B=this;return(0,m.Z)(function*(){return kt(B.auth,k._(B._delegate,M))})()}reauthenticateWithPhoneNumber(M,B){return $r(this.auth,k.r(this._delegate,M,B))}reauthenticateWithPopup(M){return kt(this.auth,k.e(this._delegate,M,xt))}reauthenticateWithRedirect(M){var B=this;return(0,m.Z)(function*(){return yield Cn(k.aE(B.auth)),k.h(B._delegate,M,xt)})()}sendEmailVerification(M){return k.ab(this._delegate,M)}unlink(M){var B=this;return(0,m.Z)(function*(){return yield k.ak(B._delegate,M),B})()}updateEmail(M){return k.ag(this._delegate,M)}updatePassword(M){return k.ah(this._delegate,M)}updatePhoneNumber(M){return k.u(this._delegate,M)}updateProfile(M){return k.af(this._delegate,M)}verifyBeforeUpdateEmail(M,B){return k.ac(this._delegate,M,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Rn.USER_MAP=new WeakMap;const Je=k.ax;let Se=(()=>{class H{constructor(B,ne){if(this.app=B,ne.isInitialized())return this._delegate=ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=B.options;Je(Oe,"invalid-api-key",{appName:B.name}),Je(Oe,"invalid-api-key",{appName:B.name});const rt=typeof window<"u"?xt:void 0;this._delegate=ne.initialize({options:{persistence:Ct(Oe,B.name),popupRedirectResolver:rt}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Rn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,ne){k.G(this._delegate,B,ne)}applyActionCode(B){return k.a2(this._delegate,B)}checkActionCode(B){return k.a3(this._delegate,B)}confirmPasswordReset(B,ne){return k.a1(this._delegate,B,ne)}createUserWithEmailAndPassword(B,ne){var Oe=this;return(0,m.Z)(function*(){return kt(Oe._delegate,k.a5(Oe._delegate,B,ne))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return k.aa(this._delegate,B)}isSignInWithEmailLink(B){return k.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,m.Z)(function*(){Je(Vn(),B._delegate,"operation-not-supported-in-this-environment");const ne=yield k.j(B._delegate,xt);return ne?kt(B._delegate,Promise.resolve(ne)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function fn(H,M){(0,k.aE)(H)._logFramework(M)}(this._delegate,B)}onAuthStateChanged(B,ne,Oe){const{next:rt,error:it,complete:Ae}=et(B,ne,Oe);return this._delegate.onAuthStateChanged(rt,it,Ae)}onIdTokenChanged(B,ne,Oe){const{next:rt,error:it,complete:Ae}=et(B,ne,Oe);return this._delegate.onIdTokenChanged(rt,it,Ae)}sendSignInLinkToEmail(B,ne){return k.a7(this._delegate,B,ne)}sendPasswordResetEmail(B,ne){return k.a0(this._delegate,B,ne||void 0)}setPersistence(B){var ne=this;return(0,m.Z)(function*(){let Oe;switch(function Gs(H,M){En(Object.values(Yn).includes(M),H,"invalid-persistence-type"),(0,se.b$)()?En(M!==Yn.SESSION,H,"unsupported-persistence-type"):(0,se.UG)()?En(M===Yn.NONE,H,"unsupported-persistence-type"):Or()?En(M===Yn.NONE||M===Yn.LOCAL&&(0,se.hl)(),H,"unsupported-persistence-type"):En(M===Yn.NONE||Oi(),H,"unsupported-persistence-type")}(ne._delegate,B),B){case Yn.SESSION:Oe=k.a;break;case Yn.LOCAL:Oe=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case Yn.NONE:Oe=k.L;break;default:return k.as("argument-error",{appName:ne._delegate.name})}return ne._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return kt(this._delegate,k.X(this._delegate))}signInWithCredential(B){return kt(this._delegate,k.Y(this._delegate,B))}signInWithCustomToken(B){return kt(this._delegate,k.$(this._delegate,B))}signInWithEmailAndPassword(B,ne){return kt(this._delegate,k.a6(this._delegate,B,ne))}signInWithEmailLink(B,ne){return kt(this._delegate,k.a9(this._delegate,B,ne))}signInWithPhoneNumber(B,ne){return $r(this._delegate,k.s(this._delegate,B,ne))}signInWithPopup(B){var ne=this;return(0,m.Z)(function*(){return Je(Vn(),ne._delegate,"operation-not-supported-in-this-environment"),kt(ne._delegate,k.c(ne._delegate,B,xt))})()}signInWithRedirect(B){var ne=this;return(0,m.Z)(function*(){return Je(Vn(),ne._delegate,"operation-not-supported-in-this-environment"),yield Cn(ne._delegate),k.f(ne._delegate,B,xt)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return k.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=Yn,H})();function et(H,M,B){let ne=H;"function"!=typeof H&&({next:ne,error:M,complete:B}=H);const Oe=ne;return{next:it=>Oe(it&&Rn.getOrCreate(it)),error:M,complete:B}}function Ct(H,M){const B=function wn(H,M){const B=_t();if(!B)return[];const ne=k.aA(gr,H,M);switch(B.getItem(ne)){case Yn.NONE:return[k.L];case Yn.LOCAL:return[k.i,k.a];case Yn.SESSION:return[k.a];default:return[]}}(H,M);if(typeof self<"u"&&!B.includes(k.i)&&B.push(k.i),typeof window<"u")for(const ne of[k.b,k.a])B.includes(ne)||B.push(ne);return B.includes(k.L)||B.push(k.L),B}class Tt{constructor(){this.providerId="phone",this._delegate=new k.P(Lr($.Z.auth()))}static credential(M,B){return k.P.credential(M,B)}verifyPhoneNumber(M,B){return this._delegate.verifyPhoneNumber(M,B)}unwrap(){return this._delegate}}Tt.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Tt.PROVIDER_ID=k.P.PROVIDER_ID;const tn=k.ax;class q{constructor(M,B,ne=$.Z.app()){var Oe;tn(null===(Oe=ne.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:ne.name}),this._delegate=new k.R(M,B,ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(H){H.INTERNAL.registerComponent(new pe.wA("auth-compat",M=>{const B=M.getProvider("app-compat").getImmediate(),ne=M.getProvider("auth");return new Se(B,ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Tt,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:q,TwitterAuthProvider:k.W,Auth:Se,AuthCredential:k.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(pt,Pe,F)=>{F.d(Pe,{y:()=>he});var m=F(930),$=F(727),k=F(8822),se=F(9635),ue=F(2416),me=F(576),pe=F(2806);let he=(()=>{class X{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const De=new X;return De.source=this,De.operator=ke,De}subscribe(ke,De,tt){const Ee=function z(X){return X&&X instanceof m.Lv||function K(X){return X&&(0,me.m)(X.next)&&(0,me.m)(X.error)&&(0,me.m)(X.complete)}(X)&&(0,$.Nn)(X)}(ke)?ke:new m.Hp(ke,De,tt);return(0,pe.x)(()=>{const{operator:ge,source:Qe}=this;Ee.add(ge?ge.call(Ee,Qe):Qe?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(ke){try{return this._subscribe(ke)}catch(De){ke.error(De)}}forEach(ke,De){return new(De=ve(De))((tt,Ee)=>{const ge=new m.Hp({next:Qe=>{try{ke(Qe)}catch(Ze){Ee(Ze),ge.unsubscribe()}},error:Ee,complete:tt});this.subscribe(ge)})}_subscribe(ke){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(ke)}[k.L](){return this}pipe(...ke){return(0,se.U)(ke)(this)}toPromise(ke){return new(ke=ve(ke))((De,tt)=>{let Ee;this.subscribe(ge=>Ee=ge,ge=>tt(ge),()=>De(Ee))})}}return X.create=He=>new X(He),X})();function ve(X){var He;return null!==(He=X??ue.v.Promise)&&void 0!==He?He:Promise}},7579:(pt,Pe,F)=>{F.d(Pe,{x:()=>pe});var m=F(9751),$=F(727);const se=(0,F(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=F(8737),me=F(2806);let pe=(()=>{class ve extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const X=new he(this,this);return X.operator=z,X}_throwIfClosed(){if(this.closed)throw new se}next(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(z)}})}error(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:X}=this;for(;X.length;)X.shift().error(z)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:X,isStopped:He,observers:ke}=this;return X||He?$.Lc:(this.currentObservers=null,ke.push(z),new $.w0(()=>{this.currentObservers=null,(0,ue.P)(ke,z)}))}_checkFinalizedStatuses(z){const{hasError:X,thrownError:He,isStopped:ke}=this;X?z.error(He):ke&&z.complete()}asObservable(){const z=new m.y;return z.source=this,z}}return ve.create=(K,z)=>new he(K,z),ve})();class he extends pe{constructor(K,z){super(),this.destination=K,this.source=z}next(K){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===X||X.call(z,K)}error(K){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===X||X.call(z,K)}complete(){var K,z;null===(z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===z||z.call(K)}_subscribe(K){var z,X;return null!==(X=null===(z=this.source)||void 0===z?void 0:z.subscribe(K))&&void 0!==X?X:$.Lc}}},930:(pt,Pe,F)=>{F.d(Pe,{Hp:()=>tt,Lv:()=>X});var m=F(576),$=F(727),k=F(2416),se=F(7849),ue=F(5032);const me=ve("C",void 0,void 0);function ve(Le,Me,Ce){return{kind:Le,value:Me,error:Ce}}var K=F(3410),z=F(2806);class X extends $.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,$.Nn)(Me)&&Me.add(this)):this.destination=Ze}static create(Me,Ce,Ge){return new tt(Me,Ce,Ge)}next(Me){this.isStopped?Qe(function he(Le){return ve("N",Le,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?Qe(function pe(Le){return ve("E",void 0,Le)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?Qe(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function ke(Le,Me){return He.call(Le,Me)}class De{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Me)}catch(Ge){Ee(Ge)}}error(Me){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Me)}catch(Ge){Ee(Ge)}else Ee(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Ce){Ee(Ce)}}}class tt extends X{constructor(Me,Ce,Ge){let ie;if(super(),(0,m.m)(Me)||!Me)ie={next:Me??void 0,error:Ce??void 0,complete:Ge??void 0};else{let le;this&&k.v.useDeprecatedNextContext?(le=Object.create(Me),le.unsubscribe=()=>this.unsubscribe(),ie={next:Me.next&&ke(Me.next,le),error:Me.error&&ke(Me.error,le),complete:Me.complete&&ke(Me.complete,le)}):ie=Me}this.destination=new De(ie)}}function Ee(Le){k.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Le):(0,se.h)(Le)}function Qe(Le,Me){const{onStoppedNotification:Ce}=k.v;Ce&&K.z.setTimeout(()=>Ce(Le,Me))}const Ze={closed:!0,next:ue.Z,error:function ge(Le){throw Le},complete:ue.Z}},727:(pt,Pe,F)=>{F.d(Pe,{Lc:()=>me,w0:()=>ue,Nn:()=>pe});var m=F(576);const k=(0,F(3888).d)(ve=>function(z){ve(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((X,He)=>`${He+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var se=F(8737);class ue{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const ke of z)ke.remove(this);else z.remove(this);const{initialTeardown:X}=this;if((0,m.m)(X))try{X()}catch(ke){K=ke instanceof k?ke.errors:[ke]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const ke of He)try{he(ke)}catch(De){K=K??[],De instanceof k?K=[...K,...De.errors]:K.push(De)}}if(K)throw new k(K)}}add(K){var z;if(K&&K!==this)if(this.closed)he(K);else{if(K instanceof ue){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(K)}}_hasParent(K){const{_parentage:z}=this;return z===K||Array.isArray(z)&&z.includes(K)}_addParent(K){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(K),z):z?[z,K]:K}_removeParent(K){const{_parentage:z}=this;z===K?this._parentage=null:Array.isArray(z)&&(0,se.P)(z,K)}remove(K){const{_finalizers:z}=this;z&&(0,se.P)(z,K),K instanceof ue&&K._removeParent(this)}}ue.EMPTY=(()=>{const ve=new ue;return ve.closed=!0,ve})();const me=ue.EMPTY;function pe(ve){return ve instanceof ue||ve&&"closed"in ve&&(0,m.m)(ve.remove)&&(0,m.m)(ve.add)&&(0,m.m)(ve.unsubscribe)}function he(ve){(0,m.m)(ve)?ve():ve.unsubscribe()}},2416:(pt,Pe,F)=>{F.d(Pe,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Pe,F)=>{F.d(Pe,{E:()=>$});const $=new(F(9751).y)(ue=>ue.complete())},8996:(pt,Pe,F)=>{F.d(Pe,{D:()=>Me});var m=F(8421),$=F(5363),k=F(9468),me=F(9751),he=F(2202),ve=F(576),K=F(9672);function X(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new me.y(ie=>{(0,K.f)(ie,Ge,()=>{const le=Ce[Symbol.asyncIterator]();(0,K.f)(ie,Ge,()=>{le.next().then(we=>{we.done?ie.complete():ie.next(we.value)})},0,!0)})})}var He=F(3670),ke=F(8239),De=F(1144),tt=F(6495),Ee=F(2206),ge=F(4532),Qe=F(3260);function Me(Ce,Ge){return Ge?function Le(Ce,Ge){if(null!=Ce){if((0,He.c)(Ce))return function se(Ce,Ge){return(0,m.Xf)(Ce).pipe((0,k.R)(Ge),(0,$.Q)(Ge))}(Ce,Ge);if((0,De.z)(Ce))return function pe(Ce,Ge){return new me.y(ie=>{let le=0;return Ge.schedule(function(){le===Ce.length?ie.complete():(ie.next(Ce[le++]),ie.closed||this.schedule())})})}(Ce,Ge);if((0,ke.t)(Ce))return function ue(Ce,Ge){return(0,m.Xf)(Ce).pipe((0,k.R)(Ge),(0,$.Q)(Ge))}(Ce,Ge);if((0,Ee.D)(Ce))return X(Ce,Ge);if((0,tt.T)(Ce))return function z(Ce,Ge){return new me.y(ie=>{let le;return(0,K.f)(ie,Ge,()=>{le=Ce[he.h](),(0,K.f)(ie,Ge,()=>{let we,Q;try{({value:we,done:Q}=le.next())}catch(ee){return void ie.error(ee)}Q?ie.complete():ie.next(we)},0,!0)}),()=>(0,ve.m)(le?.return)&&le.return()})}(Ce,Ge);if((0,Qe.L)(Ce))return function Ze(Ce,Ge){return X((0,Qe.Q)(Ce),Ge)}(Ce,Ge)}throw(0,ge.z)(Ce)}(Ce,Ge):(0,m.Xf)(Ce)}},8421:(pt,Pe,F)=>{F.d(Pe,{Xf:()=>He});var m=F(655),$=F(1144),k=F(8239),se=F(9751),ue=F(3670),me=F(2206),pe=F(4532),he=F(6495),ve=F(3260),K=F(576),z=F(7849),X=F(8822);function He(Le){if(Le instanceof se.y)return Le;if(null!=Le){if((0,ue.c)(Le))return function ke(Le){return new se.y(Me=>{const Ce=Le[X.L]();if((0,K.m)(Ce.subscribe))return Ce.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,$.z)(Le))return function De(Le){return new se.y(Me=>{for(let Ce=0;Ce<Le.length&&!Me.closed;Ce++)Me.next(Le[Ce]);Me.complete()})}(Le);if((0,k.t)(Le))return function tt(Le){return new se.y(Me=>{Le.then(Ce=>{Me.closed||(Me.next(Ce),Me.complete())},Ce=>Me.error(Ce)).then(null,z.h)})}(Le);if((0,me.D)(Le))return ge(Le);if((0,he.T)(Le))return function Ee(Le){return new se.y(Me=>{for(const Ce of Le)if(Me.next(Ce),Me.closed)return;Me.complete()})}(Le);if((0,ve.L)(Le))return function Qe(Le){return ge((0,ve.Q)(Le))}(Le)}throw(0,pe.z)(Le)}function ge(Le){return new se.y(Me=>{(function Ze(Le,Me){var Ce,Ge,ie,le;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,m.KL)(Le);!(Ge=yield Ce.next()).done;)if(Me.next(Ge.value),Me.closed)return}catch(we){ie={error:we}}finally{try{Ge&&!Ge.done&&(le=Ce.return)&&(yield le.call(Ce))}finally{if(ie)throw ie.error}}Me.complete()})})(Le,Me).catch(Ce=>Me.error(Ce))})}},6451:(pt,Pe,F)=>{F.d(Pe,{T:()=>me});var m=F(8189),$=F(8421),k=F(515),se=F(7669),ue=F(8996);function me(...pe){const he=(0,se.yG)(pe),ve=(0,se._6)(pe,1/0),K=pe;return K.length?1===K.length?(0,$.Xf)(K[0]):(0,m.J)(ve)((0,ue.D)(K,he)):k.E}},5403:(pt,Pe,F)=>{F.d(Pe,{x:()=>$});var m=F(930);function $(se,ue,me,pe,he){return new k(se,ue,me,pe,he)}class k extends m.Lv{constructor(ue,me,pe,he,ve,K){super(ue),this.onFinalize=ve,this.shouldUnsubscribe=K,this._next=me?function(z){try{me(z)}catch(X){ue.error(X)}}:super._next,this._error=he?function(z){try{he(z)}catch(X){ue.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(z){ue.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(pt,Pe,F)=>{F.d(Pe,{U:()=>k});var m=F(4482),$=F(5403);function k(se,ue){return(0,m.e)((me,pe)=>{let he=0;me.subscribe((0,$.x)(pe,ve=>{pe.next(se.call(ue,ve,he++))}))})}},8189:(pt,Pe,F)=>{F.d(Pe,{J:()=>k});var m=F(5577),$=F(4671);function k(se=1/0){return(0,m.z)($.y,se)}},5577:(pt,Pe,F)=>{F.d(Pe,{z:()=>he});var m=F(4004),$=F(8421),k=F(4482),se=F(9672),ue=F(5403),pe=F(576);function he(ve,K,z=1/0){return(0,pe.m)(K)?he((X,He)=>(0,m.U)((ke,De)=>K(X,ke,He,De))((0,$.Xf)(ve(X,He))),z):("number"==typeof K&&(z=K),(0,k.e)((X,He)=>function me(ve,K,z,X,He,ke,De,tt){const Ee=[];let ge=0,Qe=0,Ze=!1;const Le=()=>{Ze&&!Ee.length&&!ge&&K.complete()},Me=Ge=>ge<X?Ce(Ge):Ee.push(Ge),Ce=Ge=>{ke&&K.next(Ge),ge++;let ie=!1;(0,$.Xf)(z(Ge,Qe++)).subscribe((0,ue.x)(K,le=>{He?.(le),ke?Me(le):K.next(le)},()=>{ie=!0},void 0,()=>{if(ie)try{for(ge--;Ee.length&&ge<X;){const le=Ee.shift();De?(0,se.f)(K,De,()=>Ce(le)):Ce(le)}Le()}catch(le){K.error(le)}}))};return ve.subscribe((0,ue.x)(K,Me,()=>{Ze=!0,Le()})),()=>{tt?.()}}(X,He,ve,z)))}},5363:(pt,Pe,F)=>{F.d(Pe,{Q:()=>se});var m=F(9672),$=F(4482),k=F(5403);function se(ue,me=0){return(0,$.e)((pe,he)=>{pe.subscribe((0,k.x)(he,ve=>(0,m.f)(he,ue,()=>he.next(ve),me),()=>(0,m.f)(he,ue,()=>he.complete(),me),ve=>(0,m.f)(he,ue,()=>he.error(ve),me)))})}},3099:(pt,Pe,F)=>{F.d(Pe,{B:()=>ue});var m=F(8421),$=F(7579),k=F(930),se=F(4482);function ue(pe={}){const{connector:he=(()=>new $.x),resetOnError:ve=!0,resetOnComplete:K=!0,resetOnRefCountZero:z=!0}=pe;return X=>{let He,ke,De,tt=0,Ee=!1,ge=!1;const Qe=()=>{ke?.unsubscribe(),ke=void 0},Ze=()=>{Qe(),He=De=void 0,Ee=ge=!1},Le=()=>{const Me=He;Ze(),Me?.unsubscribe()};return(0,se.e)((Me,Ce)=>{tt++,!ge&&!Ee&&Qe();const Ge=De=De??he();Ce.add(()=>{tt--,0===tt&&!ge&&!Ee&&(ke=me(Le,z))}),Ge.subscribe(Ce),!He&&tt>0&&(He=new k.Hp({next:ie=>Ge.next(ie),error:ie=>{ge=!0,Qe(),ke=me(Ze,ve,ie),Ge.error(ie)},complete:()=>{Ee=!0,Qe(),ke=me(Ze,K),Ge.complete()}}),(0,m.Xf)(Me).subscribe(He))})(X)}}function me(pe,he,...ve){if(!0===he)return void pe();if(!1===he)return;const K=new k.Hp({next:()=>{K.unsubscribe(),pe()}});return he(...ve).subscribe(K)}},9468:(pt,Pe,F)=>{F.d(Pe,{R:()=>$});var m=F(4482);function $(k,se=0){return(0,m.e)((ue,me)=>{me.add(k.schedule(()=>ue.subscribe(me),se))})}},8505:(pt,Pe,F)=>{F.d(Pe,{b:()=>ue});var m=F(576),$=F(4482),k=F(5403),se=F(4671);function ue(me,pe,he){const ve=(0,m.m)(me)||pe||he?{next:me,error:pe,complete:he}:me;return ve?(0,$.e)((K,z)=>{var X;null===(X=ve.subscribe)||void 0===X||X.call(ve);let He=!0;K.subscribe((0,k.x)(z,ke=>{var De;null===(De=ve.next)||void 0===De||De.call(ve,ke),z.next(ke)},()=>{var ke;He=!1,null===(ke=ve.complete)||void 0===ke||ke.call(ve),z.complete()},ke=>{var De;He=!1,null===(De=ve.error)||void 0===De||De.call(ve,ke),z.error(ke)},()=>{var ke,De;He&&(null===(ke=ve.unsubscribe)||void 0===ke||ke.call(ve)),null===(De=ve.finalize)||void 0===De||De.call(ve)}))}):se.y}},4408:(pt,Pe,F)=>{F.d(Pe,{o:()=>ue});var m=F(727);class $ extends m.w0{constructor(pe,he){super()}schedule(pe,he=0){return this}}const k={setInterval(me,pe,...he){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(me,pe,...he):setInterval(me,pe,...he)},clearInterval(me){const{delegate:pe}=k;return(pe?.clearInterval||clearInterval)(me)},delegate:void 0};var se=F(8737);class ue extends ${constructor(pe,he){super(pe,he),this.scheduler=pe,this.work=he,this.pending=!1}schedule(pe,he=0){var ve;if(this.closed)return this;this.state=pe;const K=this.id,z=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(z,K,he)),this.pending=!0,this.delay=he,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(z,this.id,he),this}requestAsyncId(pe,he,ve=0){return k.setInterval(pe.flush.bind(pe,this),ve)}recycleAsyncId(pe,he,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return he;null!=he&&k.clearInterval(he)}execute(pe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(pe,he);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,he){let K,ve=!1;try{this.work(pe)}catch(z){ve=!0,K=z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:pe,scheduler:he}=this,{actions:ve}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ve,this),null!=pe&&(this.id=this.recycleAsyncId(he,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Pe,F)=>{F.d(Pe,{v:()=>k});var m=F(6063);class ${constructor(ue,me=$.now){this.schedulerActionCtor=ue,this.now=me}schedule(ue,me=0,pe){return new this.schedulerActionCtor(this,ue).schedule(pe,me)}}$.now=m.l.now;class k extends ${constructor(ue,me=$.now){super(ue,me),this.actions=[],this._active=!1}flush(ue){const{actions:me}=this;if(this._active)return void me.push(ue);let pe;this._active=!0;do{if(pe=ue.execute(ue.state,ue.delay))break}while(ue=me.shift());if(this._active=!1,pe){for(;ue=me.shift();)ue.unsubscribe();throw pe}}}},4986:(pt,Pe,F)=>{F.d(Pe,{z:()=>k});var m=F(4408);const k=new(F(7565).v)(m.o)},6063:(pt,Pe,F)=>{F.d(Pe,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(pt,Pe,F)=>{F.d(Pe,{z:()=>m});const m={setTimeout($,k,...se){const{delegate:ue}=m;return ue?.setTimeout?ue.setTimeout($,k,...se):setTimeout($,k,...se)},clearTimeout($){const{delegate:k}=m;return(k?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(pt,Pe,F)=>{F.d(Pe,{h:()=>$});const $=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Pe,F)=>{F.d(Pe,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Pe,F)=>{F.d(Pe,{_6:()=>me,jO:()=>se,yG:()=>ue});var m=F(576);function k(pe){return pe[pe.length-1]}function se(pe){return(0,m.m)(k(pe))?pe.pop():void 0}function ue(pe){return function $(pe){return pe&&(0,m.m)(pe.schedule)}(k(pe))?pe.pop():void 0}function me(pe,he){return"number"==typeof k(pe)?pe.pop():he}},8737:(pt,Pe,F)=>{function m($,k){if($){const se=$.indexOf(k);0<=se&&$.splice(se,1)}}F.d(Pe,{P:()=>m})},3888:(pt,Pe,F)=>{function m($){const se=$(ue=>{Error.call(ue),ue.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Pe,{d:()=>m})},2806:(pt,Pe,F)=>{F.d(Pe,{O:()=>se,x:()=>k});var m=F(2416);let $=null;function k(ue){if(m.v.useDeprecatedSynchronousErrorHandling){const me=!$;if(me&&($={errorThrown:!1,error:null}),ue(),me){const{errorThrown:pe,error:he}=$;if($=null,pe)throw he}}else ue()}function se(ue){m.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ue)}},9672:(pt,Pe,F)=>{function m($,k,se,ue=0,me=!1){const pe=k.schedule(function(){se(),me?$.add(this.schedule(null,ue)):this.unsubscribe()},ue);if($.add(pe),!me)return pe}F.d(Pe,{f:()=>m})},4671:(pt,Pe,F)=>{function m($){return $}F.d(Pe,{y:()=>m})},1144:(pt,Pe,F)=>{F.d(Pe,{z:()=>m});const m=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(pt,Pe,F)=>{F.d(Pe,{D:()=>$});var m=F(576);function $(k){return Symbol.asyncIterator&&(0,m.m)(k?.[Symbol.asyncIterator])}},576:(pt,Pe,F)=>{function m($){return"function"==typeof $}F.d(Pe,{m:()=>m})},3670:(pt,Pe,F)=>{F.d(Pe,{c:()=>k});var m=F(8822),$=F(576);function k(se){return(0,$.m)(se[m.L])}},6495:(pt,Pe,F)=>{F.d(Pe,{T:()=>k});var m=F(2202),$=F(576);function k(se){return(0,$.m)(se?.[m.h])}},8239:(pt,Pe,F)=>{F.d(Pe,{t:()=>$});var m=F(576);function $(k){return(0,m.m)(k?.then)}},3260:(pt,Pe,F)=>{F.d(Pe,{L:()=>se,Q:()=>k});var m=F(655),$=F(576);function k(ue){return(0,m.FC)(this,arguments,function*(){const pe=ue.getReader();try{for(;;){const{value:he,done:ve}=yield(0,m.qq)(pe.read());if(ve)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(he)}}finally{pe.releaseLock()}})}function se(ue){return(0,$.m)(ue?.getReader)}},4482:(pt,Pe,F)=>{F.d(Pe,{A:()=>$,e:()=>k});var m=F(576);function $(se){return(0,m.m)(se?.lift)}function k(se){return ue=>{if($(ue))return ue.lift(function(me){try{return se(me,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Pe,F)=>{function m(){}F.d(Pe,{Z:()=>m})},9635:(pt,Pe,F)=>{F.d(Pe,{U:()=>k,z:()=>$});var m=F(4671);function $(...se){return k(se)}function k(se){return 0===se.length?m.y:1===se.length?se[0]:function(me){return se.reduce((pe,he)=>he(pe),me)}}},7849:(pt,Pe,F)=>{F.d(Pe,{h:()=>k});var m=F(2416),$=F(3410);function k(se){$.z.setTimeout(()=>{const{onUnhandledError:ue}=m.v;if(!ue)throw se;ue(se)})}},4532:(pt,Pe,F)=>{function m($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Pe,{z:()=>m})},655:(pt,Pe,F)=>{function se(Q,ee){var fe={};for(var ae in Q)Object.prototype.hasOwnProperty.call(Q,ae)&&ee.indexOf(ae)<0&&(fe[ae]=Q[ae]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(Q);Be<ae.length;Be++)ee.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(Q,ae[Be])&&(fe[ae[Be]]=Q[ae[Be]])}return fe}function he(Q,ee,fe,ae){return new(fe||(fe=Promise))(function(je,mt){function on(fn){try{ze(ae.next(fn))}catch(bn){mt(bn)}}function Ht(fn){try{ze(ae.throw(fn))}catch(bn){mt(bn)}}function ze(fn){fn.done?je(fn.value):function Be(je){return je instanceof fe?je:new fe(function(mt){mt(je)})}(fn.value).then(on,Ht)}ze((ae=ae.apply(Q,ee||[])).next())})}function Ee(Q){return this instanceof Ee?(this.v=Q,this):new Ee(Q)}function ge(Q,ee,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=fe.apply(Q,ee||[]),je=[];return Be={},mt("next"),mt("throw"),mt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function mt(rn){ae[rn]&&(Be[rn]=function(sn){return new Promise(function(qt,Bt){je.push([rn,sn,qt,Bt])>1||on(rn,sn)})})}function on(rn,sn){try{!function Ht(rn){rn.value instanceof Ee?Promise.resolve(rn.value.v).then(ze,fn):bn(je[0][2],rn)}(ae[rn](sn))}catch(qt){bn(je[0][3],qt)}}function ze(rn){on("next",rn)}function fn(rn){on("throw",rn)}function bn(rn,sn){rn(sn),je.shift(),je.length&&on(je[0][0],je[0][1])}}function Ze(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function X(Q){var ee="function"==typeof Symbol&&Symbol.iterator,fe=ee&&Q[ee],ae=0;if(fe)return fe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ae>=Q.length&&(Q=void 0),{value:Q&&Q[ae++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),fe={},ae("next"),ae("throw"),ae("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ae(je){fe[je]=Q[je]&&function(mt){return new Promise(function(on,Ht){!function Be(je,mt,on,Ht){Promise.resolve(Ht).then(function(ze){je({value:ze,done:on})},mt)}(on,Ht,(mt=Q[je](mt)).done,mt.value)})}}}F.d(Pe,{FC:()=>ge,KL:()=>Ze,_T:()=>se,mG:()=>he,qq:()=>Ee})},4650:(pt,Pe,F)=>{F.d(Pe,{$8M:()=>Au,$Z:()=>Mg,AFp:()=>xm,AaK:()=>he,BQk:()=>nv,CHM:()=>Eh,CRH:()=>GC,CZH:()=>Wu,CqO:()=>iv,D6c:()=>Vb,EJc:()=>pb,EpF:()=>N0,F$t:()=>av,F4k:()=>k0,FYo:()=>gD,FiY:()=>Ve,G48:()=>qu,GfV:()=>dE,GkF:()=>M0,Hsn:()=>uv,JOm:()=>pa,KtG:()=>Vo,LFG:()=>xn,LSH:()=>eg,Lbi:()=>Mm,Lck:()=>fA,MAs:()=>x0,MMx:()=>zi,NdJ:()=>yf,OlP:()=>Sn,Oqu:()=>Ef,PXZ:()=>XA,Q6J:()=>P0,QGY:()=>rv,QP$:()=>Oe,Qsj:()=>DM,R0b:()=>js,RDi:()=>Zp,Rgc:()=>qd,SBq:()=>Ll,Sil:()=>Bs,Suo:()=>rw,TTD:()=>bs,TgZ:()=>Lu,Tol:()=>W0,VKq:()=>Us,W1O:()=>sw,WLB:()=>zd,X6Q:()=>Gm,XFs:()=>Ye,Xpm:()=>Se,Xts:()=>z_,Y36:()=>iu,YKP:()=>MC,YNc:()=>Jy,Yjl:()=>H,Yz7:()=>sn,Z0I:()=>Ni,ZZ4:()=>Sw,_UZ:()=>jl,_Vd:()=>Ol,_c5:()=>dR,_uU:()=>Iv,aQg:()=>Aw,c2e:()=>Da,cJS:()=>Bt,cg1:()=>um,dDg:()=>YA,dqk:()=>xt,eFA:()=>Db,eoX:()=>Eb,f3M:()=>b,g9A:()=>Pm,h0i:()=>Vu,hGG:()=>Rw,iGM:()=>WC,ifc:()=>yt,ip1:()=>hb,jDz:()=>gm,kL8:()=>lC,l5B:()=>zv,lG2:()=>Y,lqb:()=>fa,lri:()=>Vm,oAB:()=>tn,oJD:()=>Jp,oxw:()=>PS,q4F:()=>hE,qLn:()=>tf,qZA:()=>Qg,qbA:()=>mm,rWj:()=>Ib,sBO:()=>xb,sIi:()=>vd,s_b:()=>Gf,soG:()=>km,tb:()=>gw,tp0:()=>At,uIk:()=>Xy,vHH:()=>De,vpe:()=>ba,wAp:()=>St,xp6:()=>HE,ynx:()=>tv,z2F:()=>Wm,zSh:()=>ig,zs3:()=>Vl});var m=F(7579),$=F(727),k=F(9751),se=F(6451),ue=F(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=me({__forward_ref__:me});function z(s){return s.__forward_ref__=z,s.toString=function(){return he(this())},s}function X(s){return function He(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===z}(s)?s():s}class De extends Error{constructor(o,u){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function Me(s,o){throw new De(-201,!1)}function Ht(s,o){null==s&&function ze(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function sn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Bt(s){return{providers:s.providers||[],imports:s.imports||[]}}function wr(s){return kr(s,Or)||kr(s,vi)}function Ni(s){return null!==wr(s)}function kr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Oi(s){return s&&(s.hasOwnProperty(Vn)||s.hasOwnProperty(Li))?s[Vn]:null}const Or=me({\u0275prov:me}),Vn=me({\u0275inj:me}),vi=me({ngInjectableDef:me}),Li=me({ngInjectorDef:me});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let rr;function En(s){const o=rr;return rr=s,o}function gr(s,o,u){const c=wr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ye.Optional?null:void 0!==o?o:void Me(he(s))}function Cn(s){return{toString:s}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),yt=(()=>{return(s=yt||(yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",yt;var s})();const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Rr={},Dt=[],xr=me({\u0275cmp:me}),kt=me({\u0275dir:me}),$r=me({\u0275pipe:me}),Qt=me({\u0275mod:me}),dr=me({\u0275fac:me}),Rn=me({__NG_ELEMENT_ID__:me});let Je=0;function Se(s){return Cn(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||yt.Emulated,id:"c"+Je++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,y=s.features;return h.inputs=W(s.inputs,c),h.outputs=W(s.outputs),y&&y.forEach(I=>I(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ct).filter(Tt):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(ne).filter(Tt):null,h})}function Ct(s){return M(s)||B(s)}function Tt(s){return null!==s}function tn(s){return Cn(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function W(s,o){if(null==s)return Rr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),u[h]=c,o&&(o[h]=f)}return u}const Y=Se;function H(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function M(s){return s[xr]||null}function B(s){return s[kt]||null}function ne(s){return s[$r]||null}function Oe(s){const o=M(s)||B(s)||ne(s);return null!==o&&o.standalone}function rt(s,o){const u=s[Qt]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function ir(s){return Array.isArray(s)&&"object"==typeof s[1]}function ri(s){return Array.isArray(s)&&!0===s[1]}function xo(s){return 0!=(8&s.flags)}function ol(s){return 2==(2&s.flags)}function Ma(s){return 1==(1&s.flags)}function Gr(s){return null!==s.template}function al(s){return 0!=(256&s[2])}function Ir(s,o){return s.hasOwnProperty(dr)?s[dr]:null}class ko{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function bs(){return Ec}function Ec(s){return s.type.prototype.ngOnChanges&&(s.setInput=ul),mu}function mu(){const s=Oo(this),o=s?.current;if(o){const u=s.previous;if(u===Rr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function ul(s,o,u,c){const h=Oo(s)||function ll(s,o){return s[Cc]=o}(s,{previous:Rr,current:null}),f=h.current||(h.current={}),y=h.previous,I=this.declaredInputs[u],C=y[I];f[I]=new ko(C&&C.currentValue,o,y===Rr),s[c]=o}bs.ngInherit=!0;const Cc="__ngSimpleChanges__";function Oo(s){return s[Cc]||null}function kn(s){for(;Array.isArray(s);)s=s[0];return s}function Ii(s,o){return kn(o[s])}function Er(s,o){return kn(o[s.index])}function Fo(s,o){return s.data[o]}function an(s,o){const u=o[s];return ir(u)?u:u[0]}function Ts(s){return 64==(64&s[2])}function oi(s,o){return null==o?null:s[o]}function Oa(s){s[18]=0}function jn(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Nt={lFrame:Ga(null),bindingsEnabled:!0};function to(){return Nt.bindingsEnabled}function Ne(){return Nt.lFrame.lView}function Zt(){return Nt.lFrame.tView}function Eh(s){return Nt.lFrame.contextLView=s,s[8]}function Vo(s){return Nt.lFrame.contextLView=null,s}function sr(){let s=Bo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Bo(){return Nt.lFrame.currentTNode}function Fr(s,o){const u=Nt.lFrame;u.currentTNode=s,u.isParent=o}function vu(){return Nt.lFrame.isParent}function jo(){Nt.lFrame.isParent=!1}function or(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ha(){return Nt.lFrame.bindingIndex++}function Sc(s,o){const u=Nt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ho(o)}function Ho(s){Nt.lFrame.currentDirectiveIndex=s}function $a(){return Nt.lFrame.currentQueryIndex}function gl(s){Nt.lFrame.currentQueryIndex=s}function Wa(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ac(s,o,u){if(u&Ye.SkipSelf){let h=o,f=s;for(;!(h=h.parent,null!==h||u&Ye.Host||(h=Wa(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,s=f}const c=Nt.lFrame=Th();return c.currentTNode=o,c.lView=s,!0}function $o(s){const o=Th(),u=s[1];Nt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Th(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?Ga(s):o}function Ga(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Dh(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Rc=Dh;function Ds(){const s=Dh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Pn(){return Nt.lFrame.selectedIndex}function ss(s){Nt.lFrame.selectedIndex=s}function Mn(){const s=Nt.lFrame;return Fo(s.tView,s.selectedIndex)}function wu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function Wo(s,o,u){zo(s,o,3,u)}function Go(s,o,u,c){(3&s[2])===u&&zo(s,o,u,c)}function Mc(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function zo(s,o,u,c){const f=c??-1,y=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<f||-1==f)&&(Nc(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Nc(s,o,u,c){const h=u[c]<0,f=u[c+1],I=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class ai{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function os(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const f=u[c++],y=u[c++],I=u[c++];s.setAttribute(o,y,I,f)}else{const f=h,y=u[++c];Il(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),c++}}return c}function za(s){return 3===s||4===s||6===s}function Il(s){return 64===s.charCodeAt(0)}function qa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Oc(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Oc(s,o,u,c,h){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const I=s[f++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=f-1;break}}}for(;f<s.length;){const I=s[f];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==h&&(s[f+1]=h));if(c===s[f+1])return void(s[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==h&&s.splice(f++,0,h)}function Rh(s){return-1!==s}function ar(s){return 32767&s}function As(s,o){let u=function xh(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let El=!0;function Ka(s){const o=El;return El=s,o}let Lc=0;const qr={};function as(s,o){const u=Tu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Cl(c.data,s),Cl(o,null),Cl(c.blueprint,null));const h=Za(s,o),f=s.injectorIndex;if(Rh(h)){const y=ar(h),I=As(h,o),C=I[1].data;for(let A=0;A<8;A++)o[f+A]=I[y+A]|C[y+A]}return o[f+8]=h,f}function Cl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Tu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Za(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=ea(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function ro(s,o,u){!function Fc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Rn)&&(c=u[Rn]),null==c&&(c=u[Rn]=Lc++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Ko(s,o,u){if(u&Ye.Optional||void 0!==s)return s;Me()}function Zo(s,o,u,c){if(u&Ye.Optional&&void 0===c&&(c=null),0==(u&(Ye.Self|Ye.Host))){const h=s[9],f=En(void 0);try{return h?h.get(o,c,u&Ye.Optional):gr(o,c,u&Ye.Optional)}finally{En(f)}}return Ko(c,0,u)}function Yo(s,o,u,c=Ye.Default,h){if(null!==s){if(1024&o[2]){const y=function Nh(s,o,u,c,h){let f=s,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Uc(f,y,u,c|Ye.Self,qr);if(I!==qr)return I;let C=f.parent;if(!C){const A=y[21];if(A){const N=A.get(u,qr,c);if(N!==qr)return N}C=ea(y),y=y[15]}f=C}return h}(s,o,u,c,qr);if(y!==qr)return y}const f=Uc(s,o,u,c,qr);if(f!==qr)return f}return Zo(o,u,c,h)}function Uc(s,o,u,c,h){const f=function Mh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Rn)?s[Rn]:void 0;return"number"==typeof o?o>=0?255&o:bl:o}(u);if("function"==typeof f){if(!Ac(o,s,c))return c&Ye.Host?Ko(h,0,c):Zo(o,u,c,h);try{const y=f(c);if(null!=y||c&Ye.Optional)return y;Me()}finally{Rc()}}else if("number"==typeof f){let y=null,I=Tu(s,o),C=-1,A=c&Ye.Host?o[16][6]:null;for((-1===I||c&Ye.SkipSelf)&&(C=-1===I?Za(s,o):o[I+8],-1!==C&&Su(c,!1)?(y=o[1],I=ar(C),o=As(C,o)):I=-1);-1!==I;){const N=o[1];if(Qo(f,I,N.data)){const U=Du(I,o,u,y,c,A);if(U!==qr)return U}C=o[I+8],-1!==C&&Su(c,o[1].data[I+8]===A)&&Qo(f,I,o)?(y=N,I=ar(C),o=As(C,o)):I=-1}}return h}function Du(s,o,u,c,h,f){const y=o[1],I=y.data[s+8],N=Qa(I,y,u,null==c?ol(I)&&El:c!=y&&0!=(3&I.type),h&Ye.Host&&f===I);return null!==N?Vi(o,y,N,I):qr}function Qa(s,o,u,c,h){const f=s.providerIndexes,y=o.data,I=1048575&f,C=s.directiveStart,N=f>>20,Z=h?I+N:s.directiveEnd;for(let re=c?I:I+N;re<Z;re++){const Te=y[re];if(re<C&&u===Te||re>=C&&Te.type===u)return re}if(h){const re=y[C];if(re&&Gr(re)&&re.type===u)return C}return null}function Vi(s,o,u,c){let h=s[u];const f=o.data;if(function wl(s){return s instanceof ai}(h)){const y=h;y.resolving&&function Qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(f[u]));const I=Ka(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?En(y.injectImpl):null;Ac(s,c,Ye.Default);try{h=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function vl(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=Ec(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==C&&En(C),Ka(I),y.resolving=!1,Rc()}}return h}function Qo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Su(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class Xo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Yo(this._tNode,this._lView,o,c,u)}}function bl(){return new Xo(sr(),Ne())}function ea(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Au(s){return function Ya(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const f=u[h];if(za(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(f===o)return u[h+1];h+=2}}}return null}(sr(),s)}const ta="__parameters__";function ra(s,o,u){return Cn(()=>{const c=function Tl(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return I.annotation=y,I;function I(C,A,N){const U=C.hasOwnProperty(ta)?C[ta]:Object.defineProperty(C,ta,{value:[]})[ta];for(;U.length<=N;)U.push(null);return(U[N]=U[N]||[]).push(y),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Sn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=sn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function An(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),An(c,o)):o!==s&&o.push(c)}return o}function ls(s,o){s.forEach(u=>Array.isArray(u)?ls(u,o):o(u))}function oo(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Cr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ao(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function st(s,o,u){let c=ji(s,o);return c>=0?s[1|c]=u:(c=~c,function Lh(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Xa(s,o){const u=ji(s,o);if(u>=0)return s[1|u]}function ji(s,o){return function xu(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const f=c+(h-c>>1),y=s[f<<u];if(o===y)return f<<u;y>o?h=f:c=f+1}return~(h<<u)}(s,o,1)}const lo={},Al="__NG_DI_FLAG__",Rs="ngTempTokenPath",cs=/\n/gm,er="__source";let co;function ds(s){const o=co;return co=s,o}function Gn(s,o=Ye.Default){if(void 0===co)throw new De(-203,!1);return null===co?gr(s,void 0,o):co.get(s,o&Ye.Optional?null:void 0,o)}function xn(s,o=Ye.Default){return(function Yn(){return rr}()||Gn)(X(s),o)}function b(s,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),xn(s,o)}function D(s){const o=[];for(let u=0;u<s.length;u++){const c=X(s[u]);if(Array.isArray(c)){if(0===c.length)throw new De(900,!1);let h,f=Ye.Default;for(let y=0;y<c.length;y++){const I=c[y],C=j(I);"number"==typeof C?-1===C?h=I.token:f|=C:h=I}o.push(xn(h,f))}else o.push(xn(c))}return o}function x(s,o){return s[Al]=o,s.prototype[Al]=o,s}function j(s){return s[Al]}const Ve=x(ra("Optional"),8),At=x(ra("SkipSelf"),4);let jh,Rl,Gc;function Zp(s){jh=s}function po(s){return function Wc(){if(void 0===Rl&&(Rl=null,xt.trustedTypes))try{Rl=xt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Rl}()?.createHTML(s)||s}function Yp(s){return function go(){if(void 0===Gc&&(Gc=null,xt.trustedTypes))try{Gc=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Gc}()?.createHTML(s)||s}class Qp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ms(s){return s instanceof Qp?s.changingThisBreaksApplicationSecurity:s}function mo(s,o){const u=function Gh(s){return s instanceof Qp&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}class $_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(po(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class YI{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=po(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=po(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const y=u.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function _(s){return(s=String(s)).match(p)?s:"unsafe:"+s}function E(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function R(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const O=E("area,br,col,hr,img,wbr"),te=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xe=E("rp,rt"),mn=R(O,R(te,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),R(xe,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),R(xe,te)),Ur=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kc=R(Ur,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zc=E("script,style,template");class nu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!mn.hasOwnProperty(u))return this.sanitizedSomething=!0,!Zc.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const f=c.item(h),y=f.name,I=y.toLowerCase();if(!Kc.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let C=f.value;Ur[I]&&(C=_(C)),this.buf.push(" ",y,'="',Yc(C),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();mn.hasOwnProperty(u)&&!O.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Yc(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const Xp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kh=/([^\#-~ |!])/g;function Yc(s){return s.replace(/&/g,"&amp;").replace(Xp,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Kh,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ml;function ca(s){return"content"in s&&function W_(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var On=(()=>((On=On||{})[On.NONE=0]="NONE",On[On.HTML=1]="HTML",On[On.STYLE=2]="STYLE",On[On.SCRIPT=3]="SCRIPT",On[On.URL=4]="URL",On[On.RESOURCE_URL=5]="RESOURCE_URL",On))();function Jp(s){const o=Zh();return o?Yp(o.sanitize(On.HTML,s)||""):mo(s,"HTML")?Yp(Ms(s)):function Nl(s,o){let u=null;try{Ml=Ml||function qh(s){const o=new YI(s);return function w(){try{return!!(new window.DOMParser).parseFromString(po(""),"text/html")}catch{return!1}}()?new $_(o):o}(s);let c=o?String(o):"";u=Ml.getInertBodyElement(c);let h=5,f=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=f,f=u.innerHTML,u=Ml.getInertBodyElement(c)}while(c!==f);return po((new nu).sanitizeChildren(ca(u)||u))}finally{if(u){const c=ca(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(function $c(){return void 0!==jh?jh:typeof document<"u"?document:void 0}(),Ee(s))}function eg(s){const o=Zh();return o?o.sanitize(On.URL,s)||"":mo(s,"URL")?Ms(s):_(Ee(s))}function Zh(){const s=Ne();return s&&s[12]}const z_=new Sn("ENVIRONMENT_INITIALIZER"),JI=new Sn("INJECTOR",-1),eE=new Sn("INJECTOR_DEF_TYPES");class tE{get(o,u=lo){if(u===lo){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}function dD(...s){return{\u0275providers:nE(0,s)}}function nE(s,...o){const u=[],c=new Set;let h;return ls(o,f=>{const y=f;ng(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&rE(h,u),u}function rE(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];ls(h,f=>{o.push(f)})}}function ng(s,o,u,c){if(!(s=X(s)))return!1;let h=null,f=Oi(s);const y=!f&&M(s);if(f||y){if(y&&!y.standalone)return!1;h=s}else{const C=s.ngModule;if(f=Oi(C),!f)return!1;h=C}const I=c.has(h);if(y){if(I)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)ng(A,o,u,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let A;c.add(h);try{ls(f.imports,N=>{ng(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&rE(A,o)}if(!I){const A=Ir(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:Dt},{provide:eE,useValue:h,multi:!0},{provide:z_,useValue:()=>xn(h),multi:!0})}const C=f.providers;null==C||I||ls(C,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const iE=me({provide:String,useValue:me});function Yh(s){return null!==s&&"object"==typeof s&&iE in s}function Ns(s){return"function"==typeof s}const ig=new Sn("Set Injector scope."),sg={},ku={};let og;function ag(){return void 0===og&&(og=new tE),og}class fa{}class q_ extends fa{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lg(o,y=>this.processProvider(y)),this.records.set(JI,Qc(void 0,this)),h.has("environment")&&this.records.set(fa,Qc(void 0,this));const f=this.records.get(ig);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(eE.multi,Dt,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=ds(this),c=En(void 0);try{return o()}finally{ds(u),En(c)}}get(o,u=lo,c=Ye.Default){this.assertNotDestroyed();const h=ds(this),f=En(void 0);try{if(!(c&Ye.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function fD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Sn}(o)&&wr(o);I=C&&this.injectableDefInScope(C)?Qc(Qh(o),sg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Ye.Self?ag():this.parent).get(o,u=c&Ye.Optional&&u===lo?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Rs]=y[Rs]||[]).unshift(he(o)),h)throw y;return function J(s,o,u,c){const h=s[Rs];throw o[er]&&h.unshift(o[er]),s.message=function oe(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];f.push(y+":"+("string"==typeof I?JSON.stringify(I):he(I)))}h=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(cs,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Rs]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{En(f),ds(h)}}resolveInjectorInitializers(){const o=ds(this),u=En(void 0);try{const c=this.get(z_.multi,Dt,Ye.Self);for(const h of c)h()}finally{ds(o),En(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let u=Ns(o=X(o))?o:X(o&&o.provide);const c=function K_(s){return Yh(s)?Qc(void 0,s.useValue):Qc(function ug(s,o,u){let c;if(Ns(s)){const h=X(s);return Ir(h)||Qh(h)}if(Yh(s))c=()=>X(s.useValue);else if(function ha(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...D(s.deps||[]));else if(function rg(s){return!(!s||!s.useExisting)}(s))c=()=>xn(X(s.useExisting));else{const h=X(s&&(s.useClass||s.provide));if(!function Xh(s){return!!s.deps}(s))return Ir(h)||Qh(h);c=()=>new h(...D(s.deps))}return c}(s),sg)}(o);if(Ns(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Qc(void 0,sg,!0),h.factory=()=>D(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===sg&&(u.value=ku,u.value=u.factory()),"object"==typeof u.value&&u.value&&function hD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Qh(s){const o=wr(s),u=null!==o?o.factory:Ir(s);if(null!==u)return u;if(s instanceof Sn)throw new De(204,!1);if(s instanceof Function)return function oE(s){const o=s.length;if(o>0)throw ao(o,"?"),new De(204,!1);const u=function Nn(s){const o=s&&(s[Or]||s[vi]);if(o){const u=function ki(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new De(204,!1)}function Qc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Z_(s){return!!s.\u0275providers}function lg(s,o){for(const u of s)Array.isArray(u)?lg(u,o):Z_(u)?lg(u.\u0275providers,o):o(u)}class Y_{}class dg{resolveComponentFactory(o){throw function uE(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ol=(()=>{class s{}return s.NULL=new dg,s})();function pD(){return Xc(sr(),Ne())}function Xc(s,o){return new Ll(Er(s,o))}let Ll=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=pD,s})();function cE(s){return s instanceof Ll?s.nativeElement:s}class gD{}let DM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function SM(){const s=Ne(),u=an(sr().index,s);return(ir(u)?u:s)[11]}(),s})(),Q_=(()=>{class s{}return s.\u0275prov=sn({token:s,providedIn:"root",factory:()=>null}),s})();class dE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const hE=new dE("14.2.10"),X_={};function iy(s){return s.ngOriginalError}class tf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&iy(o);for(;u&&iy(u);)u=iy(u);return u||null}}const sy=new Map;let ED=0;const _g="__ngContext__";function Vr(s,o){ir(o)?(s[_g]=o[20],function bD(s){sy.set(s[20],s)}(o)):s[_g]=o}function ru(s){return s instanceof Function?s():s}var pa=(()=>((pa=pa||{})[pa.Important=1]="Important",pa[pa.DashCase=2]="DashCase",pa))();function cy(s,o){return undefined(s,o)}function rd(s){const o=s[3];return ri(o)?o[3]:o}function wg(s){return bE(s[13])}function Ig(s){return bE(s[4])}function bE(s){for(;null!==s&&!ri(s);)s=s[4];return s}function id(s,o,u,c,h){if(null!=c){let f,y=!1;ri(c)?f=c:ir(c)&&(y=!0,c=c[0]);const I=kn(c);0===s&&null!==u?null==h?PE(o,u,I):ga(o,u,I,h||null,!0):1===s&&null!==u?ga(o,u,I,h||null,!0):2===s?function UD(s,o,u){const c=bg(s,o);c&&function FD(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,y):3===s&&o.destroyNode(I),null!=f&&function FM(s,o,u,c,h){const f=u[7];f!==kn(u)&&id(o,s,c,f,h);for(let I=10;I<u.length;I++){const C=u[I];Fl(C[1],C,s,o,c,f)}}(o,s,f,u,h)}}function Eg(s,o,u){return s.createElement(o,u)}function AE(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,jn(h,-1)),u.splice(c,1)}function py(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&AE(h,c),o>0&&(s[u-1][4]=c[4]);const f=Cr(s,10+o);!function fy(s,o){Fl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function sf(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Fl(s,o,u,3,null,null),function OM(s){let o=s[13];if(!o)return Cg(s[1],s);for(;o;){let u=null;if(ir(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)ir(o)&&Cg(o[1],o),o=o[3];null===o&&(o=s),ir(o)&&Cg(o[1],o),u=o&&o[4]}o=u}}(o)}}function Cg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function my(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof ai)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const I=h[f[y]],C=f[y+1];try{C.call(I)}finally{}}else try{f.call(h)}finally{}}}}(s,o),function gy(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],I="function"==typeof y?y(o):kn(o[y]),C=c[h=u[f+2]],A=u[f+3];"boolean"==typeof A?I.removeEventListener(u[f],C,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),f+=2}else{const y=c[h=u[f+1]];u[f].call(y)}if(null!==c){for(let f=h+1;f<c.length;f++)(0,c[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&ri(o[3])){u!==o[3]&&AE(u,o);const c=o[19];null!==c&&c.detachView(s)}!function TD(s){sy.delete(s[20])}(o)}}function RE(s,o,u){return function xE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===yt.None||h===yt.Emulated)return null}return Er(c,u)}(s,o.parent,u)}function ga(s,o,u,c,h){s.insertBefore(o,u,c,h)}function PE(s,o,u){s.appendChild(o,u)}function ME(s,o,u,c,h){null!==c?ga(s,o,u,c,h):PE(s,o,u)}function bg(s,o){return s.parentNode(o)}function br(s,o,u){return _y(s,o,u)}let _y=function kE(s,o,u){return 40&s.type?Er(s,u):null};function Dg(s,o,u,c){const h=RE(s,c,o),f=o[11],I=br(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)ME(f,h,u[C],I,!1);else ME(f,h,u,I,!1)}function Sg(s,o){if(null!==o){const u=o.type;if(3&u)return Er(o,s);if(4&u)return OE(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Sg(s,c);{const h=s[o.index];return ri(h)?OE(-1,h):kn(h)}}if(32&u)return cy(o,s)()||kn(s[o.index]);{const c=yy(s,o);return null!==c?Array.isArray(c)?c[0]:Sg(rd(s[16]),c):Sg(s,o.next)}}return null}function yy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function OE(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Sg(c,h)}return o[7]}function vy(s,o,u,c,h,f,y){for(;null!=u;){const I=c[u.index],C=u.type;if(y&&0===o&&(I&&Vr(kn(I),c),u.flags|=4),64!=(64&u.flags))if(8&C)vy(s,o,u.child,c,h,f,!1),id(o,s,h,I,f);else if(32&C){const A=cy(u,c);let N;for(;N=A();)id(o,s,h,N,f);id(o,s,h,I,f)}else 16&C?af(s,o,c,u,h,f):id(o,s,h,I,f);u=y?u.projectionNext:u.next}}function Fl(s,o,u,c,h,f){vy(u,c,s.firstChild,o,h,f,!1)}function af(s,o,u,c,h,f){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)id(o,s,h,C[A],f);else vy(s,o,C,y[3],h,f,!0)}function Ul(s,o,u){s.setAttribute(o,"style",u)}function uf(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function VD(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||s.charCodeAt(h+f)<=32)return h}u=h+1}}const wy="ng-template";function Iy(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==VD(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function UE(s){return 4===s.type&&s.value!==wy}function jD(s,o,u){return o===(4!==s.type||u?s.value:wy)}function HD(s,o,u){let c=4;const h=s.attrs||[],f=function UM(s){for(let o=0;o<s.length;o++)if(za(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!jD(s,C,u)||""===C&&1===o.length){if(Os(c))return!1;y=!0}}else{const A=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!Iy(s.attrs,A,u)){if(Os(c))return!1;y=!0}continue}const U=$D(8&c?"class":C,h,UE(s),u);if(-1===U){if(Os(c))return!1;y=!0;continue}if(""!==A){let Z;Z=U>f?"":h[U+1].toLowerCase();const re=8&c?Z:null;if(re&&-1!==VD(re,A,0)||2&c&&A!==Z){if(Os(c))return!1;y=!0}}}}else{if(!y&&!Os(c)&&!Os(C))return!1;if(y&&Os(C))continue;y=!1,c=C|1&c}}return Os(c)||y}function Os(s){return 0==(1&s)}function $D(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let f=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function VE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function WD(s,o,u=!1){for(let c=0;c<o.length;c++)if(HD(s,o[c],u))return!0;return!1}function GD(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function BE(s,o){return s?":not("+o.trim()+")":o}function jE(s){let o=s[0],u=1,c=2,h="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const I=s[++u];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Os(y)&&(o+=BE(f,h),h=""),c=y,f=f||!Os(c);u++}return""!==h&&(o+=BE(f,h)),o}const $t={};function HE(s){$E(Zt(),Ne(),Pn()+s,!1)}function $E(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Wo(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Go(o,f,0,u)}ss(u)}function Rg(s,o=null,u=null,c){const h=lf(s,o,u,c);return h.resolveInjectorInitializers(),h}function lf(s,o=null,u=null,c,h=new Set){const f=[u||Dt,dD(s)];return c=c||("object"==typeof s?void 0:he(s)),new q_(f,o||ag(),c||null,h)}let Vl=(()=>{class s{static create(u,c){if(Array.isArray(u))return Rg({name:""},c,u,"");{const h=u.name??"";return Rg({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=lo,s.NULL=new tE,s.\u0275prov=sn({token:s,providedIn:"any",factory:()=>xn(JI)}),s.__NG_ELEMENT_ID__=-1,s})();function iu(s,o=Ye.Default){const u=Ne();return null===u?xn(s,o):Yo(sr(),u,X(s),o)}function Mg(){throw new Error("invalid")}function Ng(s,o){return s<<17|o<<2}function yo(s){return s>>17&32767}function Sy(s){return 2|s}function su(s){return(131068&s)>>2}function Ay(s,o){return-131069&s|o<<2}function ad(s){return 1|s}function Uy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];gl(h),y.contentQueries(2,o[f],f)}}}function Vg(s,o,u,c,h,f,y,I,C,A,N){const U=o.blueprint.slice();return U[0]=h,U[2]=76|c,(null!==N||s&&1024&s[2])&&(U[2]|=1024),Oa(U),U[3]=U[15]=s,U[8]=u,U[10]=y||s&&s[10],U[11]=I||s&&s[11],U[12]=C||s&&s[12]||null,U[9]=A||s&&s[9]||null,U[6]=f,U[20]=function CD(){return ED++}(),U[21]=N,U[16]=2==o.type?s[16]:U,U}function hd(s,o,u,c,h){let f=s.data[o];if(null===f)f=function Vy(s,o,u,c,h){const f=Bo(),y=vu(),C=s.data[o]=function u0(s,o,u,c,h,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,u,c,h),function Dc(){return Nt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=h;const y=function yu(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Fr(f,!0),f}function fd(s,o,u,c){if(0===u)return-1;const h=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function By(s,o,u){$o(o);try{const c=s.viewQuery;null!==c&&mf(1,c,u);const h=s.template;null!==h&&o0(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Uy(s,o),s.staticViewQueries&&mf(2,s.viewQuery,u);const f=s.components;null!==f&&function dS(s,o){for(let u=0;u<o.length;u++)Zy(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ds()}}function Bg(s,o,u,c){const h=o[2];if(128!=(128&h)){$o(o);try{Oa(o),function ja(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&o0(s,o,u,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&Wo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Go(o,A,0,null),Mc(o,0)}if(function uN(s){for(let o=wg(s);null!==o;o=Ig(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],f=h[3];0==(512&h[2])&&jn(f,1),h[2]|=512}}}(o),function aN(s){for(let o=wg(s);null!==o;o=Ig(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Ts(c)&&Bg(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Uy(s,o),y){const A=s.contentCheckHooks;null!==A&&Wo(o,A)}else{const A=s.contentHooks;null!==A&&Go(o,A,1),Mc(o,1)}!function dd(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)ss(~h);else{const f=h,y=u[++c],I=u[++c];Sc(y,f),I(2,o[f])}}}finally{ss(-1)}}(s,o);const I=s.components;null!==I&&function cS(s,o){for(let u=0;u<o.length;u++)Gg(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&mf(2,C,c),y){const A=s.viewCheckHooks;null!==A&&Wo(o,A)}else{const A=s.viewHooks;null!==A&&Go(o,A,2),Mc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,jn(o[3],-1))}finally{Ds()}}}function o0(s,o,u,c,h){const f=Pn(),y=2&c;try{ss(-1),y&&o.length>22&&$E(s,o,22,!1),u(c,h)}finally{ss(f)}}function pf(s,o,u){if(xo(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}function jg(s,o,u){!to()||(function c0(s,o,u,c){const h=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||as(u,o),Vr(c,o);const y=u.initialInputs;for(let I=h;I<f;I++){const C=s.data[I],A=Gr(C);A&&_S(o,u,C);const N=Vi(o,s,I,u);Vr(N,o),null!==y&&yS(0,I-h,N,C,0,y),A&&(an(u.index,o)[8]=N)}}(s,o,u,Er(u,o)),128==(128&u.flags)&&function qy(s,o,u){const c=u.directiveStart,h=u.directiveEnd,f=u.index,y=function bh(){return Nt.lFrame.currentDirectiveIndex}();try{ss(f);for(let I=c;I<h;I++){const C=s.data[I],A=o[I];Ho(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&pd(C,A)}}finally{ss(-1),Ho(y)}}(s,o,u))}function Hg(s,o,u=Er){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],I=-1===y?u(o,s):s[y];s[h++]=I}}}function $g(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=jy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function jy(s,o,u,c,h,f,y,I,C,A){const N=22+c,U=N+h,Z=function hS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:$t);return u}(N,U),re="function"==typeof A?A():A;return Z[1]={type:s,blueprint:Z,template:u,queries:null,viewQuery:I,declTNode:o,data:Z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:re,incompleteFirstPass:!1}}function Hy(s,o,u,c){const h=p0(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&_d(s).push(c,h.length-1))}function $y(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Wy(s,o){const c=o.directiveEnd,h=s.data,f=o.attrs,y=[];let I=null,C=null;for(let A=o.directiveStart;A<c;A++){const N=h[A],U=N.inputs,Z=null===f||UE(o)?null:oN(U,f);y.push(Z),I=$y(U,A,I),C=$y(N.outputs,A,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=I,o.outputs=C}function fS(s,o){const u=an(o,s);16&u[2]||(u[2]|=32)}function Gy(s,o,u,c){let h=!1;if(to()){const f=function iN(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];WD(u,y.selectors,!1)&&(h||(h=[]),ro(as(u,o),s,y.type),Gr(y)?(Wg(s,u),h.unshift(y)):h.push(y))}return h}(s,o,u),y=null===c?null:{"":-1};if(null!==f){h=!0,mS(u,s.data.length,f.length);for(let N=0;N<f.length;N++){const U=f[N];U.providersResolver&&U.providersResolver(U)}let I=!1,C=!1,A=fd(s,o,f.length,null);for(let N=0;N<f.length;N++){const U=f[N];u.mergedAttrs=qa(u.mergedAttrs,U.hostAttrs),d0(s,u,o,A,U),gS(A,U,y),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const Z=U.type.prototype;!I&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!C&&(Z.ngOnChanges||Z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}Wy(s,u)}y&&function sN(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const f=u[o[h+1]];if(null==f)throw new De(-301,!1);c.push(o[h],f)}}}(u,c,y)}return u.mergedAttrs=qa(u.mergedAttrs,u.attrs),h}function zy(s,o,u,c,h,f){const y=f.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const C=~o.index;(function pS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=C&&I.push(C),I.push(c,h,y)}}function pd(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Wg(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function gS(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Gr(o)&&(u[""]=s)}}function mS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function d0(s,o,u,c,h){s.data[c]=h;const f=h.factory||(h.factory=Ir(h.type)),y=new ai(f,Gr(h),iu);s.blueprint[c]=y,u[c]=y,zy(s,o,0,c,fd(s,u,h.hostVars,$t),h)}function _S(s,o,u){const c=Er(o,s),h=$g(u),f=s[10],y=gd(s,Vg(s,h,null,u.onPush?32:16,c,o,f,f.createRenderer(c,u),null,null,null));s[o.index]=y}function au(s,o,u,c,h,f){const y=Er(s,o);!function h0(s,o,u,c,h,f,y){if(null==f)s.removeAttribute(o,h,u);else{const I=null==y?Ee(f):y(f,c||"",h);s.setAttribute(o,h,I,u)}}(o[11],y,f,s.value,u,c,h)}function yS(s,o,u,c,h,f){const y=f[o];if(null!==y){const I=c.setInput;for(let C=0;C<y.length;){const A=y[C++],N=y[C++],U=y[C++];null!==I?c.setInput(u,U,A,N):u[N]=U}}}function oN(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function vS(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Gg(s,o){const u=an(o,s);if(Ts(u)){const c=u[1];48&u[2]?Bg(c,u,c.template,u[8]):u[5]>0&&Ky(u)}}function Ky(s){for(let c=wg(s);null!==c;c=Ig(c))for(let h=10;h<c.length;h++){const f=c[h];if(Ts(f))if(512&f[2]){const y=f[1];Bg(y,f,y.template,f[8])}else f[5]>0&&Ky(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=an(u[c],s);Ts(h)&&h[5]>0&&Ky(h)}}function Zy(s,o){const u=an(o,s),c=u[1];(function Yy(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),By(c,u,u[8])}function gd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function gf(s){for(;s;){s[2]|=32;const o=rd(s);if(al(s)&&!o)return s;s=o}return null}function md(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{Bg(s,o,s.template,u)}catch(y){throw c&&IS(o,y),y}finally{h.end&&h.end()}}function mf(s,o,u){gl(0),o(s,u)}function p0(s){return s[7]||(s[7]=[])}function _d(s){return s.cleanup||(s.cleanup=[])}function IS(s,o){const u=s[9],c=u?u.get(tf,null):null;c&&c.handleError(o)}function g0(s,o,u,c,h){for(let f=0;f<u.length;){const y=u[f++],I=u[f++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,h,c,I):C[I]=h}}function _f(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?f=I:1==f?h=ve(h,I):2==f&&(c=ve(c,I+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Qy(s,o,u,c,h=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(kn(f)),ri(f))for(let I=10;I<f.length;I++){const C=f[I],A=C[1].firstChild;null!==A&&Qy(C[1],C,A,c)}const y=u.type;if(8&y)Qy(s,o,u.child,c);else if(32&y){const I=cy(u,o);let C;for(;C=I();)c.push(C)}else if(16&y){const I=yy(o,u);if(Array.isArray(I))c.push(...I);else{const C=rd(o[16]);Qy(C[1],C,I,c,!0)}}u=h?u.projectionNext:u.next}return c}class qg{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Qy(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ri(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(py(o,c),Cr(u,c))}this._attachedToViewContainer=!1}sf(this._lView[1],this._lView)}onDestroy(o){Hy(this._lView[1],this._lView,null,o)}markForCheck(){gf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){md(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function SE(s,o){Fl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class m0 extends qg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;md(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class _0 extends Ol{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=M(o);return new Kg(u,this.ngModule)}}function ES(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class lN{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,X_,c);return h!==X_||u===X_?h:this.parentInjector.get(o,u,c)}}class Kg extends Y_{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function zD(s){return s.map(jE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return ES(this.componentDef.inputs)}get outputs(){return ES(this.componentDef.outputs)}create(o,u,c,h){let f=(h=h||this.ngModule)instanceof fa?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new lN(o,f):o,I=y.get(gD,null);if(null===I)throw new De(407,!1);const C=y.get(Q_,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",U=c?function a0(s,o,u){return s.selectRootElement(o,u===yt.ShadowDom)}(A,c,this.componentDef.encapsulation):Eg(A,N,function y0(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),Z=this.componentDef.onPush?288:272,re=jy(0,null,null,1,0,null,null,null,null,null),Te=Vg(null,re,null,Z,null,null,I,A,C,y,null);let We,qe;$o(Te);try{const ct=function hN(s,o,u,c,h,f){const y=u[1];u[22]=s;const C=hd(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(_f(C,A,!0),null!==s&&(os(h,s,A),null!==C.classes&&uf(h,s,C.classes),null!==C.styles&&Ul(h,s,C.styles)));const N=c.createRenderer(s,o),U=Vg(u,$g(o),null,o.onPush?32:16,u[22],C,c,N,f||null,null,null);return y.firstCreatePass&&(ro(as(C,u),y,o.type),Wg(y,C),mS(C,u.length,1)),gd(u,U),u[22]=U}(U,this.componentDef,Te,I,A);if(U)if(c)os(A,U,["ng-version",hE.full]);else{const{attrs:vt,classes:be}=function qD(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===h?""!==f&&o.push(f,s[++c]):8===h&&u.push(f);else{if(!Os(h))break;h=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);vt&&os(A,U,vt),be&&be.length>0&&uf(A,U,be.join(" "))}if(qe=Fo(re,22),void 0!==u){const vt=qe.projection=[];for(let be=0;be<this.ngContentSelectors.length;be++){const gt=u[be];vt.push(null!=gt?Array.from(gt):null)}}We=function fN(s,o,u,c){const h=u[1],f=function rN(s,o,u){const c=sr();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),d0(s,c,o,fd(s,o,1,null),u),Wy(s,c));const h=Vi(o,s,c.directiveStart,c);Vr(h,o);const f=Er(c,o);return f&&Vr(f,o),h}(h,u,o);if(s[8]=u[8]=f,null!==c)for(const I of c)I(f,o);if(o.contentQueries){const I=sr();o.contentQueries(1,f,I.directiveStart)}const y=sr();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ss(y.index),zy(u[1],y,0,y.directiveStart,y.directiveEnd,o),pd(o,f)),f}(ct,this.componentDef,Te,[pN]),By(re,Te,null)}finally{Ds()}return new dN(this.componentType,We,Xc(qe,Te),Te,qe)}}class dN extends class aE{}{constructor(o,u,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new m0(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const f=this._rootLView;g0(f[1],f,h,o,u),fS(f,this._tNode.index)}}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function pN(){const s=sr();wu(Ne()[1],s)}let Zg=null;function yd(){if(!Zg){const s=xt.Symbol;if(s&&s.iterator)Zg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Zg=c)}}}return Zg}function vd(s){return!!w0(s)&&(Array.isArray(s)||!(s instanceof Map)&&yd()in s)}function w0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function lu(s,o,u){return s[o]=u}function Xr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Bl(s,o,u,c){const h=Xr(s,o,u);return Xr(s,o+1,c)||h}function Ls(s,o,u,c,h,f){const y=Bl(s,o,u,c);return Bl(s,o+2,h,f)||y}function Xy(s,o,u,c){const h=Ne();return Xr(h,Ha(),o)&&(Zt(),au(Mn(),h,s,o,u,c)),Xy}function Jy(s,o,u,c,h,f,y,I){const C=Ne(),A=Zt(),N=s+22,U=A.firstCreatePass?function EN(s,o,u,c,h,f,y,I,C){const A=o.consts,N=hd(o,s,4,y||null,oi(A,I));Gy(o,u,N,oi(A,C)),wu(o,N);const U=N.tViews=jy(2,N,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),U.queries=o.queries.embeddedTView(N)),N}(N,A,C,o,u,c,h,f,y):A.data[N];Fr(U,!1);const Z=C[11].createComment("");Dg(A,C,Z,U),Vr(Z,C),gd(C,C[N]=vS(Z,C,Z,U)),Ma(U)&&jg(A,C,U),null!=y&&Hg(C,U,I)}function x0(s){return function Fi(s,o){return s[o]}(function Ba(){return Nt.lFrame.contextLView}(),22+s)}function P0(s,o,u){const c=Ne();return Xr(c,Ha(),o)&&function fs(s,o,u,c,h,f,y,I){const C=Er(o,u);let N,A=o.inputs;!I&&null!=A&&(N=A[c])?(g0(s,u,N,c,h),ol(o)&&fS(u,o.index)):3&o.type&&(c=function tN(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}(Zt(),Mn(),c,s,o,c[11],u,!1),P0}function ev(s,o,u,c,h){const y=h?"class":"style";g0(s,u,o.inputs[y],y,c)}function Lu(s,o,u,c){const h=Ne(),f=Zt(),y=22+s,I=h[11],C=h[y]=Eg(I,o,function yl(){return Nt.lFrame.currentNamespace}()),A=f.firstCreatePass?function RS(s,o,u,c,h,f,y){const I=o.consts,A=hd(o,s,2,h,oi(I,f));return Gy(o,u,A,oi(I,y)),null!==A.attrs&&_f(A,A.attrs,!1),null!==A.mergedAttrs&&_f(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,h,0,o,u,c):f.data[y];Fr(A,!0);const N=A.mergedAttrs;null!==N&&os(I,C,N);const U=A.classes;null!==U&&uf(I,C,U);const Z=A.styles;return null!==Z&&Ul(I,C,Z),64!=(64&A.flags)&&Dg(f,h,C,A),0===function Fa(){return Nt.lFrame.elementDepthCount}()&&Vr(C,h),function Tc(){Nt.lFrame.elementDepthCount++}(),Ma(A)&&(jg(f,h,A),pf(f,A,h)),null!==c&&Hg(h,A),Lu}function Qg(){let s=sr();vu()?jo():(s=s.parent,Fr(s,!1));const o=s;!function Ua(){Nt.lFrame.elementDepthCount--}();const u=Zt();return u.firstCreatePass&&(wu(u,s),xo(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Eu(s){return 0!=(16&s.flags)}(o)&&ev(u,o,Ne(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Cu(s){return 0!=(32&s.flags)}(o)&&ev(u,o,Ne(),o.stylesWithoutHost,!1),Qg}function jl(s,o,u,c){return Lu(s,o,u,c),Qg(),jl}function tv(s,o,u){const c=Ne(),h=Zt(),f=s+22,y=h.firstCreatePass?function CN(s,o,u,c,h){const f=o.consts,y=oi(f,c),I=hd(o,s,8,"ng-container",y);return null!==y&&_f(I,y,!0),Gy(o,u,I,oi(f,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(f,h,c,o,u):h.data[f];Fr(y,!0);const I=c[f]=c[11].createComment("");return Dg(h,c,I,y),Vr(I,c),Ma(y)&&(jg(h,c,y),pf(h,y,c)),null!=u&&Hg(c,y),tv}function nv(){let s=sr();const o=Zt();return vu()?jo():(s=s.parent,Fr(s,!1)),o.firstCreatePass&&(wu(o,s),xo(s)&&o.queries.elementEnd(s)),nv}function M0(s,o,u){return tv(s,o,u),nv(),M0}function N0(){return Ne()}function rv(s){return!!s&&"function"==typeof s.then}function k0(s){return!!s&&"function"==typeof s.subscribe}const iv=k0;function yf(s,o,u,c){const h=Ne(),f=Zt(),y=sr();return function O0(s,o,u,c,h,f,y,I){const C=Ma(c),N=s.firstCreatePass&&_d(s),U=o[8],Z=p0(o);let re=!0;if(3&c.type||I){const qe=Er(c,o),ct=I?I(qe):qe,vt=Z.length,be=I?cn=>I(kn(cn[c.index])):c.index;let gt=null;if(!I&&C&&(gt=function xS(s,o,u,c){const h=s.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===u&&h[f+1]===c){const I=o[7],C=h[f+2];return I.length>C?I[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,h,c.index)),null!==gt)(gt.__ngLastListenerFn__||gt).__ngNextListenerFn__=f,gt.__ngLastListenerFn__=f,re=!1;else{f=F0(c,o,U,f,!1);const cn=u.listen(ct,h,f);Z.push(f,cn),N&&N.push(h,be,vt,vt+1)}}else f=F0(c,o,U,f,!1);const Te=c.outputs;let We;if(re&&null!==Te&&(We=Te[h])){const qe=We.length;if(qe)for(let ct=0;ct<qe;ct+=2){const tr=o[We[ct]][We[ct+1]].subscribe(f),ic=Z.length;Z.push(f,tr),N&&N.push(h,c.index,ic,-(ic+1))}}}(f,h,h[11],y,s,o,0,c),yf}function L0(s,o,u,c){try{return!1!==u(c)}catch(h){return IS(s,h),!1}}function F0(s,o,u,c,h){return function f(y){if(y===Function)return c;gf(2&s.flags?an(s.index,o):o);let C=L0(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)C=L0(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function PS(s=1){return function Ss(s){return(Nt.lFrame.contextLView=function xc(s,o){for(;s>0;)o=o[15],s--;return o}(s,Nt.lFrame.contextLView))[8]}(s)}function ov(s,o){let u=null;const c=function Ag(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const f=o[h];if("*"!==f){if(null===c?WD(s,f,!0):GD(c,f))return h}else u=h}return u}function av(s){const o=Ne()[16][6];if(!o.projection){const c=o.projection=ao(s?s.length:1,null),h=c.slice();let f=o.child;for(;null!==f;){const y=s?ov(f,s):0;null!==y&&(h[y]?h[y].projectionNext=f:c[y]=f,h[y]=f),f=f.next}}}function uv(s,o=0,u){const c=Ne(),h=Zt(),f=hd(h,22+s,16,null,u||null);null===f.projection&&(f.projection=o),jo(),64!=(64&f.flags)&&function LE(s,o,u){af(o[11],0,o,u,RE(s,u,o),br(u.parent||o[6],u,o))}(h,c,f)}function hv(s,o,u,c,h){const f=s[u+1],y=null===o;let I=c?yo(f):su(f),C=!1;for(;0!==I&&(!1===C||y);){const N=s[I+1];jr(s[I],o)&&(C=!0,s[I+1]=c?ad(N):Sy(N)),I=c?yo(N):su(N)}C&&(s[u+1]=c?Sy(f):ad(f))}function jr(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ji(s,o)>=0}const ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nm(s){return s.substring(ur.key,ur.keyEnd)}function j0(s,o){const u=ur.textEnd;return u===o?-1:(o=ur.keyEnd=function Wl(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,ur.key=o,u),Ti(s,o,u))}function Ti(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function W0(s){!function Gi(s,o,u,c){const h=Zt(),f=function is(s){const o=Nt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);h.firstUpdatePass&&function G0(s,o,u,c){const h=s.data;if(null===h[u+1]){const f=h[Pn()],y=Gl(s,u);wv(f,c)&&null===o&&!y&&(o=!1),o=function vf(s,o,u,c){const h=function pl(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Md(u=Pd(null,s,o,u,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Pd(h,s,o,u,c),null===f){let C=function kS(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==su(c))return s[yo(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Pd(null,s,o,C[1],c),C=Md(C,o.attrs,c),function OS(s,o,u,c){s[yo(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else f=function wf(s,o,u){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=Md(c,s[f].hostAttrs,u);return Md(c,o.attrs,u)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),u}(h,f,o,c),function $l(s,o,u,c,h,f){let y=f?o.classBindings:o.styleBindings,I=yo(y),C=su(y);s[c]=u;let N,A=!1;if(Array.isArray(u)){const U=u;N=U[1],(null===N||ji(U,N)>0)&&(A=!0)}else N=u;if(h)if(0!==C){const Z=yo(s[I+1]);s[c+1]=Ng(Z,I),0!==Z&&(s[Z+1]=Ay(s[Z+1],c)),s[I+1]=function nS(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Ng(I,0),0!==I&&(s[I+1]=Ay(s[I+1],c)),I=c;else s[c+1]=Ng(C,0),0===I?I=c:s[C+1]=Ay(s[C+1],c),C=c;A&&(s[c+1]=Sy(s[c+1])),hv(s,N,c,!0),hv(s,N,c,!1),function B0(s,o,u,c,h){const f=h?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&ji(f,o)>=0&&(u[c+1]=ad(u[c+1]))}(o,N,s,c,f),y=Ng(I,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,u,y,c)}}(h,null,f,c);const y=Ne();if(u!==$t&&Xr(y,f,u)){const I=h.data[Pn()];if(wv(I,c)&&!Gl(h,f)){let C=c?I.classesWithoutHost:I.stylesWithoutHost;null!==C&&(u=ve(C,u||"")),ev(h,I,y,u,c)}else!function q0(s,o,u,c,h,f,y,I){h===$t&&(h=Dt);let C=0,A=0,N=0<h.length?h[0]:null,U=0<f.length?f[0]:null;for(;null!==N||null!==U;){const Z=C<h.length?h[C+1]:void 0,re=A<f.length?f[A+1]:void 0;let We,Te=null;N===U?(C+=2,A+=2,Z!==re&&(Te=U,We=re)):null===U||null!==N&&N<U?(C+=2,Te=N):(A+=2,Te=U,We=re),null!==Te&&_v(s,o,u,c,Te,We,y,I),N=C<h.length?h[C]:null,U=A<f.length?f[A]:null}}(h,I,y,y[11],y[f+1],y[f+1]=function z0(s,o,u){if(null==u||""===u)return Dt;const c=[],h=Ms(u);if(Array.isArray(h))for(let f=0;f<h.length;f++)s(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&s(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,f)}}(st,vo,s,!0)}function vo(s,o){for(let u=function hi(s){return function va(s){ur.key=0,ur.keyEnd=0,ur.value=0,ur.valueEnd=0,ur.textEnd=s.length}(s),j0(s,Ti(s,0,ur.textEnd))}(o);u>=0;u=j0(o,u))st(s,nm(o),!0)}function Gl(s,o){return o>=s.expandoStartIndex}function Pd(s,o,u,c,h){let f=null;const y=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<y&&(f=o[I],c=Md(c,f.hostAttrs,h),f!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Md(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),st(s,y,!!u||o[++f]))}return void 0===s?null:s}function _v(s,o,u,c,h,f,y,I){if(!(3&o.type))return;const C=s.data,A=C[I+1];If(function ci(s){return 1==(1&s)}(A)?yv(C,o,u,h,su(A),y):void 0)||(If(f)||function Dy(s){return 2==(2&s)}(A)&&(f=yv(C,null,u,h,I,y)),function FE(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let f=-1===c.indexOf("-")?void 0:pa.DashCase;null==h?s.removeStyle(u,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=pa.Important),s.setStyle(u,c,h,f))}}(c,y,Ii(Pn(),u),h,f))}function yv(s,o,u,c,h,f){const y=null===o;let I;for(;h>0;){const C=s[h],A=Array.isArray(C),N=A?C[1]:C,U=null===N;let Z=u[h+1];Z===$t&&(Z=U?Dt:void 0);let re=U?Xa(Z,c):N===c?Z:void 0;if(A&&!If(re)&&(re=Xa(C,c)),If(re)&&(I=re,y))return I;const Te=s[h+1];h=y?yo(Te):su(Te)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(I=Xa(C,c))}return I}function If(s){return void 0!==s}function wv(s,o){return 0!=(s.flags&(o?16:32))}function Iv(s,o=""){const u=Ne(),c=Zt(),h=s+22,f=c.firstCreatePass?hd(c,h,1,o,null):c.data[h],y=u[h]=function hy(s,o){return s.createText(o)}(u[11],o);Dg(c,u,y,f),Fr(f,!1)}function Ef(s){return Ev("",s,""),Ef}function Ev(s,o,u){const c=Ne(),h=function Ed(s,o,u,c){return Xr(s,Ha(),u)?o+Ee(u)+c:$t}(c,s,o,u);return h!==$t&&function uu(s,o,u){const c=Ii(o,s);!function TE(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,Pn(),h),Ev}const ql=void 0;var qS=["en",[["a","p"],["AM","PM"],ql],[["AM","PM"],ql,ql],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ql,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ql,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ql,"{1} 'at' {0}",ql],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uC(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Kl={};function um(s){const o=function lm(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Av(o);if(u)return u;const c=o.split("-")[0];if(u=Av(c),u)return u;if("en"===c)return qS;throw new De(701,!1)}function lC(s){return um(s)[St.PluralCase]}function Av(s){return s in Kl||(Kl[s]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[s]),Kl[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const ln="en-US";let fC=ln;class Vu{}class MC{}function fA(s,o){return new NC(s,o??null)}class NC extends Vu{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _0(this);const c=rt(o);this._bootstrapComponents=ru(c.bootstrap),this._r3Injector=lf(o,u,[{provide:Vu,useValue:this},{provide:Ol,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jv extends MC{constructor(o){super(),this.moduleType=o}create(o){return new NC(this.moduleType,o)}}class gA extends Vu{constructor(o,u,c){super(),this.componentFactoryResolver=new _0(this),this.instance=null;const h=new q_([...o,{provide:Vu,useValue:this},{provide:Ol,useValue:this.componentFactoryResolver}],u||ag(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function zi(s,o,u=null){return new gA(s,o,u).injector}let Hv=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=nE(0,u.type),h=c.length>0?zi([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=sn({token:s,providedIn:"environment",factory:()=>new s(xn(fa))}),s})();function gm(s){s.getStandaloneInjector=o=>o.get(Hv).getOrCreateStandaloneInjector(s)}function Us(s,o,u,c){return function Kv(s,o,u,c,h,f){const y=o+u;return Xr(s,y,h)?lu(s,y+1,f?c.call(f,h):c(h)):Ca(s,y+1)}(Ne(),or(),s,o,u,c)}function zd(s,o,u,c,h){return function jf(s,o,u,c,h,f,y){const I=o+u;return Bl(s,I,h,f)?lu(s,I+2,y?c.call(y,h,f):c(h,f)):Ca(s,I+2)}(Ne(),or(),s,o,u,c,h)}function zv(s,o,u,c,h,f,y){return function UC(s,o,u,c,h,f,y,I,C){const A=o+u;return Ls(s,A,h,f,y,I)?lu(s,A+4,C?c.call(C,h,f,y,I):c(h,f,y,I)):Ca(s,A+4)}(Ne(),or(),s,o,u,c,h,f,y)}function mm(s,o,u,c,h,f,y,I){const C=or()+s,A=Ne(),N=Ls(A,C,u,c,h,f);return Xr(A,C+4,y)||N?lu(A,C+5,I?o.call(I,u,c,h,f,y):o(u,c,h,f,y)):function wd(s,o){return s[o]}(A,C+5)}function Ca(s,o){const u=s[o];return u===$t?void 0:u}function Zv(s){return o=>{setTimeout(s,void 0,o)}}const ba=class bA extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,f=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=Zv(f),h&&(h=Zv(h)),y&&(y=Zv(y)));const I=super.subscribe({next:h,error:f,complete:y});return o instanceof $.w0&&o.add(I),I}};function _m(){return this._results[yd()]()}class $f{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=yd(),c=$f.prototype;c[u]||(c[u]=_m)}get changes(){return this._changes||(this._changes=new ba)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=An(o);(this._changesDetected=!function Kr(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],f=o[c];if(u&&(h=u(h),f=u(f)),f!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let qd=(()=>{class s{}return s.__NG_ELEMENT_ID__=Yv,s})();const ym=qd,TA=class extends ym{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=Vg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),By(c,h,o),new qg(h)}};function Yv(){return Wf(sr(),Ne())}function Wf(s,o){return 4&s.type?new TA(o,s,Xc(s,o)):null}let Gf=(()=>{class s{}return s.__NG_ELEMENT_ID__=DA,s})();function DA(){return HC(sr(),Ne())}const SA=Gf,Qv=class extends SA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Za(this._hostTNode,this._hostLView);if(Rh(o)){const u=As(o,this._hostLView),c=ar(o);return new Xo(u[1].data[c+8],u)}return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=vm(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const y=o.createEmbeddedView(u||{},f);return this.insert(y,h),y}createComponent(o,u,c,h,f){const y=o&&!function us(s){return"function"==typeof s}(o);let I;if(y)I=u;else{const U=u||{};I=U.index,c=U.injector,h=U.projectableNodes,f=U.environmentInjector||U.ngModuleRef}const C=y?o:new Kg(M(o)),A=c||this.parentInjector;if(!f&&null==C.ngModule){const Z=(y?A:this.parentInjector).get(fa,null);Z&&(f=Z)}const N=C.create(A,h,void 0,f);return this.insert(N.hostView,I),N}insert(o,u){const c=o._lView,h=c[1];if(function hl(s){return ri(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const U=c[3],Z=new Qv(U,U[6],U[3]);Z.detach(Z.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function OD(s,o,u,c){const h=10+c,f=u.length;c>0&&(u[h-1][4]=o),c<f-10?(o[4]=u[h],oo(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function LD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(h,c,y,f);const I=OE(f,y),C=c[11],A=bg(C,y[7]);return null!==A&&function DE(s,o,u,c,h,f){c[0]=h,c[6]=o,Fl(s,c,u,1,h,f)}(h,y[6],C,c,A,I),o.attachToViewContainerRef(),oo(Xv(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=vm(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=py(this._lContainer,u);c&&(Cr(Xv(this._lContainer),u),sf(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=py(this._lContainer,u);return c&&null!=Cr(Xv(this._lContainer),u)?new qg(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function vm(s){return s[8]}function Xv(s){return s[8]||(s[8]=[])}function HC(s,o){let u;const c=o[s.index];if(ri(c))u=c;else{let h;if(8&s.type)h=kn(c);else{const f=o[11];h=f.createComment("");const y=Er(s,o);ga(f,bg(f,y),h,function NE(s,o){return s.nextSibling(o)}(f,y),!1)}o[s.index]=u=vS(c,o,h,s),gd(o,u)}return new Qv(u,s,o)}class Kd{constructor(o){this.queryList=o,this.matches=null}clone(){return new Kd(this.queryList)}setDirty(){this.queryList.setDirty()}}class zf{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new zf(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==qf(o,u).matches&&this.queries[u].setDirty()}}class Jv{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class ew{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new ew(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class wm{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new wm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,u,tw(u,f)),this.matchTNodeWithReadOption(o,u,Qa(u,o,f,!1,!1))}else c===qd?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Qa(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Ll||h===Gf||h===qd&&4&u.type)this.addMatch(u.index,-2);else{const f=Qa(u,o,h,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function tw(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function MA(s,o,u,c){return-1===u?function PA(s,o){return 11&s.type?Xc(s,o):4&s.type?Wf(s,o):null}(o,s):-2===u?function NA(s,o,u){return u===Ll?Xc(o,s):u===qd?Wf(o,s):u===Gf?HC(o,s):void 0}(s,o,c):Vi(s,s[1],u,o)}function $C(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const f=s.data,y=u.matches,I=[];for(let C=0;C<y.length;C+=2){const A=y[C];I.push(A<0?null:MA(o,f[A],y[C+1],u.metadata.read))}h.matches=I}return h.matches}function nw(s,o,u,c){const h=s.queries.getByIndex(u),f=h.matches;if(null!==f){const y=$C(s,o,h,u);for(let I=0;I<f.length;I+=2){const C=f[I];if(C>0)c.push(y[I/2]);else{const A=f[I+1],N=o[-C];for(let U=10;U<N.length;U++){const Z=N[U];Z[17]===Z[3]&&nw(Z[1],Z,A,c)}if(null!==N[9]){const U=N[9];for(let Z=0;Z<U.length;Z++){const re=U[Z];nw(re[1],re,A,c)}}}}}return c}function WC(s){const o=Ne(),u=Zt(),c=$a();gl(c+1);const h=qf(u,c);if(s.dirty&&function dl(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const f=h.crossesNgTemplate?nw(u,o,c,[]):$C(u,o,h,c);s.reset(f,cE),s.notifyOnChanges()}return!0}return!1}function rw(s,o,u,c){const h=Zt();if(h.firstCreatePass){const f=sr();(function qC(s,o,u){null===s.queries&&(s.queries=new ew),s.queries.track(new wm(o,u))})(h,new Jv(o,u,c),f.index),function KC(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function iw(s,o,u){const c=new $f(4==(4&u));Hy(s,o,c,c.destroy),null===o[19]&&(o[19]=new zf),o[19].queries.push(new Kd(c))}(h,Ne(),u)}function GC(){return function zC(s,o){return s[19].queries[o].queryList}(Ne(),$a())}function qf(s,o){return s.queries.getByIndex(o)}function sw(s,o){return Wf(s,o)}function tc(...s){}const hb=new Sn("Application Initializer");let Wu=(()=>{class s{constructor(u){this.appInits=u,this.resolve=tc,this.reject=tc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(rv(f))u.push(f);else if(iv(f)){const y=new Promise((I,C)=>{f.subscribe({complete:I,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(xn(hb,8))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const xm=new Sn("AppId",{providedIn:"root",factory:function fb(){return`${pw()}${pw()}${pw()}`}});function pw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pm=new Sn("Platform Initializer"),Mm=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gw=new Sn("appBootstrapListener");let Da=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const km=new Sn("LocaleId",{providedIn:"root",factory:()=>b(km,Ye.Optional|Ye.SkipSelf)||function Jf(){return typeof $localize<"u"&&$localize.locale||ln}()}),pb=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Bs=(()=>{class s{compileModuleSync(u){return new jv(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=ru(rt(u).declarations).reduce((y,I)=>{const C=M(I);return C&&y.push(new Kg(C)),y},[]);return new zA(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _b=(()=>Promise.resolve(0))();function _w(s){typeof Zone>"u"?_b.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class js{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ba(!1),this.onMicrotaskEmpty=new ba(!1),this.onStable=new ba(!1),this.onError=new ba(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function KA(){let s=xt.requestAnimationFrame,o=xt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function wb(s){const o=()=>{!function vb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,yw(s),s.isCheckStableRunning=!0,nc(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),yw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,f,y,I)=>{try{return Um(s),u.invokeTask(h,f,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),ep(s)}},onInvoke:(u,c,h,f,y,I,C)=>{try{return Um(s),u.invoke(h,f,y,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),ep(s)}},onHasTask:(u,c,h,f)=>{u.hasTask(h,f),c===h&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,yw(s),nc(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,h,f)=>(u.handleError(h,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!js.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(js.isInAngularZone())throw new De(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,yb,tc,tc);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const yb={};function nc(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function yw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Um(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ep(s){s._nesting--,nc(s)}class ZA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ba,this.onMicrotaskEmpty=new ba,this.onStable=new ba,this.onError=new ba}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const Vm=new Sn(""),Ib=new Sn("");let vw,YA=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vw||(function Cb(s){vw=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{js.assertNotInAngularZone(),_w(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_w(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(xn(js),xn(Eb),xn(Ib))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})(),Eb=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return vw?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Gu=null;const bb=new Sn("AllowMultipleToken"),tp=new Sn("PlatformDestroyListeners");class XA{constructor(o,u){this.name=o,this.token=u}}function Db(s,o,u=[]){const c=`Platform: ${o}`,h=new Sn(c);return(f=[])=>{let y=Xd();if(!y||y.injector.get(bb,!1)){const I=[...u,...f,{provide:h,useValue:!0}];s?s(I):function ww(s){if(Gu&&!Gu.get(bb,!1))throw new De(400,!1);Gu=s;const o=s.get(jm);(function Tb(s){const o=s.get(Pm,null);o&&o.forEach(u=>u())})(s)}(function Iw(s=[],o){return Vl.create({name:o,providers:[{provide:ig,useValue:"platform"},{provide:tp,useValue:new Set([()=>Gu=null])},...s]})}(I,c))}return function Sb(s){const o=Xd();if(!o)throw new De(401,!1);return o}()}}function Xd(){return Gu?.get(jm)??null}let jm=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function Ab(s,o){let u;return u="noop"===s?new ZA:("zone.js"===s?void 0:s)||new js(o),u}(c?.ngZone,function Hm(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:js,useValue:h}];return h.run(()=>{const y=Vl.create({providers:f,parent:this.injector,name:u.moduleType.name}),I=u.create(y),C=I.injector.get(tf,null);if(!C)throw new De(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:N=>{C.handleError(N)}});I.onDestroy(()=>{ip(this._modules,I),A.unsubscribe()})}),function Rb(s,o,u){try{const c=u();return rv(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,h,()=>{const A=I.injector.get(Wu);return A.runInitializers(),A.donePromise.then(()=>(function Nd(s){Ht(s,"Expected localeId to be defined"),"string"==typeof s&&(fC=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(km,ln)||ln),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const h=$m({},c);return function QA(s,o,u){const c=new jv(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(u){const c=u.injector.get(Wm);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new De(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(tp,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(xn(Vl))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function $m(s,o){return Array.isArray(o)?o.reduce($m,s):{...s,...o}}let Wm=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new k.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{js.assertNotInAngularZone(),_w(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{js.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(f,y.pipe((0,ue.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof Y_;if(!this._injector.get(Wu).done)throw!h&&Oe(u),new De(405,false);let y;y=h?u:this._injector.get(Ol).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const I=function zu(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Vu),A=y.create(Vl.NULL,[],c||y.selector,I),N=A.location.nativeElement,U=A.injector.get(Vm,null);return U?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),ip(this.components,A),U?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;ip(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(gw,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>ip(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new De(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(xn(js),xn(fa),xn(tf))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ip(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let bw=!0,Si=!1;function Gm(){return Si=!0,bw}function qu(){if(Si)throw new Error("Cannot enable prod mode after platform setup.");bw=!1}let xb=(()=>{class s{}return s.__NG_ELEMENT_ID__=Pb,s})();function Pb(s){return function rc(s,o,u){if(ol(s)&&!u){const c=an(s.index,o);return new qg(c,c)}return 47&s.type?new qg(o[16],o):null}(sr(),Ne(),16==(16&s))}class Dw{constructor(){}supports(o){return vd(o)}create(o){return new iR(o)}}const rR=(s,o)=>o;class iR{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||rR}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<Ob(c,h,f)?u:c,I=Ob(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{f||(f=[]);const A=I-h,N=C-h;if(A!=N){for(let Z=0;Z<A;Z++){const re=Z<f.length?f[Z]:f[Z]=0,Te=re+Z;N<=Te&&Te<A&&(f[Z]=re+1)}f[y.previousIndex]=N-A}}I!==C&&o(y,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!vd(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)f=o[I],y=this._trackByFn(I,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,I)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,I),c=!0),u=u._next}else h=0,function IN(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[yd()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(h,I),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,I,y,h)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,h)):o=this._addAfter(new sR(u,c),f,h),o}_verifyReinsertion(o,u,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new kb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class sR{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oR{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class kb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new oR,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ob(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class Lb{constructor(){}supports(o){return o instanceof Map||w0(o)}create(){return new aR}}class aR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||w0(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new uR(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class uR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fb(){return new Sw([new Dw])}let Sw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Fb()),deps:[[s,new At,new Ve]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new De(901,!1)}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Fb}),s})();function Ub(){return new Aw([new Lb])}let Aw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ub()),deps:[[s,new At,new Ve]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new De(901,!1)}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Ub}),s})();const dR=Db(null,"core",[]);let Rw=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(xn(Wm))},s.\u0275mod=tn({type:s}),s.\u0275inj=Bt({}),s})();function Vb(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Pe,F)=>{F.d(Pe,{Z:()=>De});var m=F(2090),$=F(4859),k=F(9681),se=F(1877);class ue{constructor(Ee,ge){this._delegate=Ee,this.firebase=ge,(0,k._addComponent)(Ee,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Ee,ge=k._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(Ee);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Qe=Ze.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:ge})}_removeServiceInstance(Ee,ge=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(ge)}_addComponent(Ee){(0,k._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,k._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ve(){const tt=function he(tt){const Ee={},ge={__esModule:!0,initializeApp:function Le(ie,le={}){const we=k.initializeApp(ie,le);if((0,m.r3)(Ee,we.name))return Ee[we.name];const Q=new tt(we,ge);return Ee[we.name]=Q,Q},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(ie){const le=ie.name,we=le.replace("-compat","");if(k._registerComponent(ie)&&"PUBLIC"===ie.type){const Q=(ee=Ze())=>{if("function"!=typeof ee[we])throw pe.create("invalid-app-argument",{appName:le});return ee[we]()};void 0!==ie.serviceProps&&(0,m.ZB)(Q,ie.serviceProps),ge[we]=Q,tt.prototype[we]=function(...ee){return this._getService.bind(this,le).apply(this,ie.multipleInstances?ee:[])}}return"PUBLIC"===ie.type?ge[we]:null},removeApp:function Qe(ie){delete Ee[ie]},useAsService:function Ge(ie,le){return"serverAuth"===le?null:le},modularAPIs:k}};function Ze(ie){if(!(0,m.r3)(Ee,ie=ie||k._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ie});return Ee[ie]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function Me(){return Object.keys(Ee).map(ie=>Ee[ie])}}),Ze.App=tt,ge}(ue);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ee(ge){(0,m.ZB)(tt,ge)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),tt}(),z=new se.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=K;!function ke(tt){(0,k.registerVersion)("@firebase/app-compat","0.1.39",tt)}()},9681:(pt,Pe,F)=>{F.r(Pe),F.d(Pe,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>Ht,_addComponent:()=>rn,_addOrOverwriteComponent:()=>sn,_apps:()=>fn,_clearComponents:()=>Ni,_components:()=>bn,_getProvider:()=>Bt,_registerComponent:()=>qt,_removeServiceInstance:()=>wr,deleteApp:()=>Li,getApp:()=>Vn,getApps:()=>vi,initializeApp:()=>Or,onLog:()=>Yn,registerVersion:()=>rr,setLogLevel:()=>En});var m=F(5861),$=F(4859),k=F(1877),se=F(2090),ue=F(8766);class me{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function pe(Je){return"VERSION"===Je.getComponent()?.type}(et)){const Ct=et.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(et=>et).join(" ")}}const he="@firebase/app",K=new k.Yd("@firebase/app"),Ht="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fn=new Map,bn=new Map;function rn(Je,Se){try{Je.container.addComponent(Se)}catch(et){K.debug(`Component ${Se.name} failed to register with FirebaseApp ${Je.name}`,et)}}function sn(Je,Se){Je.container.addOrOverwriteComponent(Se)}function qt(Je){const Se=Je.name;if(bn.has(Se))return K.debug(`There were multiple attempts to register component ${Se}.`),!1;bn.set(Se,Je);for(const et of fn.values())rn(et,Je);return!0}function Bt(Je,Se){const et=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Je.container.getProvider(Se)}function wr(Je,Se,et=Ht){Bt(Je,Se).clearInstance(et)}function Ni(){bn.clear()}const Nn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ki{constructor(Se,et,Ct){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const Oi="9.14.0";function Or(Je,Se={}){let et=Je;"object"!=typeof Se&&(Se={name:Se});const Ct=Object.assign({name:Ht,automaticDataCollectionEnabled:!1},Se),Tt=Ct.name;if("string"!=typeof Tt||!Tt)throw Nn.create("bad-app-name",{appName:String(Tt)});if(et||(et=(0,se.aH)()),!et)throw Nn.create("no-options");const tn=fn.get(Tt);if(tn){if((0,se.vZ)(et,tn.options)&&(0,se.vZ)(Ct,tn.config))return tn;throw Nn.create("duplicate-app",{appName:Tt})}const q=new $.H0(Tt);for(const Y of bn.values())q.addComponent(Y);const W=new ki(et,Ct,q);return fn.set(Tt,W),W}function Vn(Je=Ht){const Se=fn.get(Je);if(!Se&&Je===Ht)return Or();if(!Se)throw Nn.create("no-app",{appName:Je});return Se}function vi(){return Array.from(fn.values())}function Li(Je){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,m.Z)(function*(Je){const Se=Je.name;fn.has(Se)&&(fn.delete(Se),yield Promise.all(Je.container.getProviders().map(et=>et.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function rr(Je,Se,et){var Ct;let Tt=null!==(Ct=ze[Je])&&void 0!==Ct?Ct:Je;et&&(Tt+=`-${et}`);const tn=Tt.match(/\s|\//),q=Se.match(/\s|\//);if(tn||q){const W=[`Unable to register library "${Tt}" with version "${Se}":`];return tn&&W.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),tn&&q&&W.push("and"),q&&W.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void K.warn(W.join(" "))}qt(new $.wA(`${Tt}-version`,()=>({library:Tt,version:Se}),"VERSION"))}function Yn(Je,Se){if(null!==Je&&"function"!=typeof Je)throw Nn.create("invalid-log-argument");(0,k.Am)(Je,Se)}function En(Je){(0,k.Ub)(Je)}const Cn="firebase-heartbeat-store";let Tn=null;function wn(){return Tn||(Tn=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Se)=>{0===Se&&Je.createObjectStore(Cn)}}).catch(Je=>{throw Nn.create("idb-open",{originalErrorMessage:Je.message})})),Tn}function yt(){return(yt=(0,m.Z)(function*(Je){var Se;try{return(yield wn()).transaction(Cn).objectStore(Cn).get(Qn(Je))}catch(et){if(et instanceof se.ZR)K.warn(et.message);else{const Ct=Nn.create("idb-get",{originalErrorMessage:null===(Se=et)||void 0===Se?void 0:Se.message});K.warn(Ct.message)}}})).apply(this,arguments)}function xt(Je,Se){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,m.Z)(function*(Je,Se){var et;try{const Tt=(yield wn()).transaction(Cn,"readwrite");return yield Tt.objectStore(Cn).put(Se,Qn(Je)),Tt.done}catch(Ct){if(Ct instanceof se.ZR)K.warn(Ct.message);else{const Tt=Nn.create("idb-set",{originalErrorMessage:null===(et=Ct)||void 0===et?void 0:et.message});K.warn(Tt.message)}}})).apply(this,arguments)}function Qn(Je){return`${Je.name}!${Je.options.appId}`}class xr{constructor(Se){this.container=Se,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Qt(et),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Se=this;return(0,m.Z)(function*(){const Ct=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=kt();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!Se._heartbeatsCache.heartbeats.some(tn=>tn.date===Tt))return Se._heartbeatsCache.heartbeats.push({date:Tt,agent:Ct}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(tn=>{const q=new Date(tn.date).valueOf();return Date.now()-q<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,m.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const et=kt(),{heartbeatsToSend:Ct,unsentEntries:Tt}=function $r(Je,Se=1024){const et=[];let Ct=Je.slice();for(const Tt of Je){const tn=et.find(q=>q.agent===Tt.agent);if(tn){if(tn.dates.push(Tt.date),dr(et)>Se){tn.dates.pop();break}}else if(et.push({agent:Tt.agent,dates:[Tt.date]}),dr(et)>Se){et.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:et,unsentEntries:Ct}}(Se._heartbeatsCache.heartbeats),tn=(0,se.L)(JSON.stringify({version:2,heartbeats:Ct}));return Se._heartbeatsCache.lastSentHeartbeatDate=et,Tt.length>0?(Se._heartbeatsCache.heartbeats=Tt,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),tn})()}}function kt(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,m.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function _t(Je){return yt.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var et=this;return(0,m.Z)(function*(){var Ct;if(yield et._canUseIndexedDBPromise){const tn=yield et.read();return xt(et.app,{lastSentHeartbeatDate:null!==(Ct=Se.lastSentHeartbeatDate)&&void 0!==Ct?Ct:tn.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var et=this;return(0,m.Z)(function*(){var Ct;if(yield et._canUseIndexedDBPromise){const tn=yield et.read();return xt(et.app,{lastSentHeartbeatDate:null!==(Ct=Se.lastSentHeartbeatDate)&&void 0!==Ct?Ct:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...Se.heartbeats]})}})()}}function dr(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Rn(Je){qt(new $.wA("platform-logger",Se=>new me(Se),"PRIVATE")),qt(new $.wA("heartbeat",Se=>new xr(Se),"PRIVATE")),rr(he,"0.8.4",Je),rr(he,"0.8.4","esm2017"),rr("fire-js","")}("")},4859:(pt,Pe,F)=>{F.d(Pe,{H0:()=>he,wA:()=>k,zt:()=>ue});var m=F(5861),$=F(2090);class k{constructor(K,z,X){this.name=K,this.instanceFactory=z,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const se="[DEFAULT]";class ue{constructor(K,z){this.name=K,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(z)){const X=new $.BH;if(this.instancesDeferred.set(z,X),this.isInitialized(z)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:z});He&&X.resolve(He)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(K){var z;const X=this.normalizeInstanceIdentifier(K?.identifier),He=null!==(z=K?.optional)&&void 0!==z&&z;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(ke){if(He)return null;throw ke}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function pe(ve){return"EAGER"===ve.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[z,X]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(z);try{const ke=this.getOrInitializeService({instanceIdentifier:He});X.resolve(ke)}catch{}}}}clearInstance(K=se){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,m.Z)(function*(){const z=Array.from(K.instances.values());yield Promise.all([...z.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...z.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=se){return this.instances.has(K)}getOptions(K=se){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:z={}}=K,X=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:X,options:z});for(const[ke,De]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(ke)&&De.resolve(He);return He}onInit(K,z){var X;const He=this.normalizeInstanceIdentifier(z),ke=null!==(X=this.onInitCallbacks.get(He))&&void 0!==X?X:new Set;ke.add(K),this.onInitCallbacks.set(He,ke);const De=this.instances.get(He);return De&&K(De,He),()=>{ke.delete(K)}}invokeOnInitCallbacks(K,z){const X=this.onInitCallbacks.get(z);if(X)for(const He of X)try{He(K,z)}catch{}}getOrInitializeService({instanceIdentifier:K,options:z={}}){let X=this.instances.get(K);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=K,ve===se?void 0:ve),options:z}),this.instances.set(K,X),this.instancesOptions.set(K,z),this.invokeOnInitCallbacks(X,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,X)}catch{}var ve;return X||null}normalizeInstanceIdentifier(K=se){return this.component?this.component.multipleInstances?K:se:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const z=this.getProvider(K.name);if(z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const z=new ue(K,this);return this.providers.set(K,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Pe,F)=>{F.d(Pe,{Am:()=>ve,Ub:()=>he,Yd:()=>pe,in:()=>$});const m=[];var $=(()=>{return(K=$||($={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",$;var K})();const k={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,ue={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},me=(K,z,...X)=>{if(z<K.logLevel)return;const He=(new Date).toISOString(),ke=ue[z];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[ke](`[${He}]  ${K.name}:`,...X)};class pe{constructor(z){this.name=z,this._logLevel=se,this._logHandler=me,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function he(K){m.forEach(z=>{z.setLogLevel(K)})}function ve(K,z){for(const X of m){let He=null;z&&z.level&&(He=k[z.level]),X.userLogHandler=null===K?null:(ke,De,...tt)=>{const Ee=tt.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");De>=(He??ke.logLevel)&&K({level:$[De].toLowerCase(),message:Ee,args:tt,type:ke.name})}}}},8766:(pt,Pe,F)=>{F.d(Pe,{Lj:()=>Le,X3:()=>Ze});var m=F(5861);let k,se;const pe=new WeakMap,he=new WeakMap,ve=new WeakMap,K=new WeakMap,z=new WeakMap;let ke={get(le,we,Q){if(le instanceof IDBTransaction){if("done"===we)return he.get(le);if("objectStoreNames"===we)return le.objectStoreNames||ve.get(le);if("store"===we)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return ge(le[we])},set:(le,we,Q)=>(le[we]=Q,!0),has:(le,we)=>le instanceof IDBTransaction&&("done"===we||"store"===we)||we in le};function Ee(le){return"function"==typeof le?function tt(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...we){return le.apply(Qe(this),we),ge(pe.get(this))}:function(...we){return ge(le.apply(Qe(this),we))}:function(we,...Q){const ee=le.call(Qe(this),we,...Q);return ve.set(ee,we.sort?we.sort():[we]),ge(ee)}}(le):(le instanceof IDBTransaction&&function He(le){if(he.has(le))return;const we=new Promise((Q,ee)=>{const fe=()=>{le.removeEventListener("complete",ae),le.removeEventListener("error",Be),le.removeEventListener("abort",Be)},ae=()=>{Q(),fe()},Be=()=>{ee(le.error||new DOMException("AbortError","AbortError")),fe()};le.addEventListener("complete",ae),le.addEventListener("error",Be),le.addEventListener("abort",Be)});he.set(le,we)}(le),((le,we)=>we.some(Q=>le instanceof Q))(le,function ue(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,ke):le)}function ge(le){if(le instanceof IDBRequest)return function X(le){const we=new Promise((Q,ee)=>{const fe=()=>{le.removeEventListener("success",ae),le.removeEventListener("error",Be)},ae=()=>{Q(ge(le.result)),fe()},Be=()=>{ee(le.error),fe()};le.addEventListener("success",ae),le.addEventListener("error",Be)});return we.then(Q=>{Q instanceof IDBCursor&&pe.set(Q,le)}).catch(()=>{}),z.set(we,le),we}(le);if(K.has(le))return K.get(le);const we=Ee(le);return we!==le&&(K.set(le,we),z.set(we,le)),we}const Qe=le=>z.get(le);function Ze(le,we,{blocked:Q,upgrade:ee,blocking:fe,terminated:ae}={}){const Be=indexedDB.open(le,we),je=ge(Be);return ee&&Be.addEventListener("upgradeneeded",mt=>{ee(ge(Be.result),mt.oldVersion,mt.newVersion,ge(Be.transaction))}),Q&&Be.addEventListener("blocked",()=>Q()),je.then(mt=>{ae&&mt.addEventListener("close",()=>ae()),fe&&mt.addEventListener("versionchange",()=>fe())}).catch(()=>{}),je}function Le(le,{blocked:we}={}){const Q=indexedDB.deleteDatabase(le);return we&&Q.addEventListener("blocked",()=>we()),ge(Q).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ge=new Map;function ie(le,we){if(!(le instanceof IDBDatabase)||we in le||"string"!=typeof we)return;if(Ge.get(we))return Ge.get(we);const Q=we.replace(/FromIndex$/,""),ee=we!==Q,fe=Ce.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!fe&&!Me.includes(Q))return;const ae=function(){var Be=(0,m.Z)(function*(je,...mt){const on=this.transaction(je,fe?"readwrite":"readonly");let Ht=on.store;return ee&&(Ht=Ht.index(mt.shift())),(yield Promise.all([Ht[Q](...mt),fe&&on.done]))[0]});return function(mt){return Be.apply(this,arguments)}}();return Ge.set(we,ae),ae}!function De(le){ke=le(ke)}(le=>({...le,get:(we,Q,ee)=>ie(we,Q)||le.get(we,Q,ee),has:(we,Q)=>!!ie(we,Q)||le.has(we,Q)}))},5861:(pt,Pe,F)=>{function m(k,se,ue,me,pe,he,ve){try{var K=k[he](ve),z=K.value}catch(X){return void ue(X)}K.done?se(z):Promise.resolve(z).then(me,pe)}function $(k){return function(){var se=this,ue=arguments;return new Promise(function(me,pe){var he=k.apply(se,ue);function ve(z){m(he,me,pe,ve,K,"next",z)}function K(z){m(he,me,pe,ve,K,"throw",z)}ve(void 0)})}}F.d(Pe,{Z:()=>$})}},pt=>{pt(pt.s=1379)}]);