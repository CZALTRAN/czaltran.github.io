"use strict";(self.webpackChunkhacka_sicredi=self.webpackChunkhacka_sicredi||[]).push([[179],{2011:(pt,Re,F)=>{F.d(Re,{Dh:()=>he,GT:()=>me,cc:()=>Ne,hO:()=>He,on:()=>K,pX:()=>le,xv:()=>ve});var p=F(4650),$=F(127),k=F(5813);pt=F.hmd(pt);const se=["ngOnDestroy"],le=(ge,Qe,Ze,Le={})=>new Proxy(ge,{get:(Pe,Ce)=>Ze.runOutsideAngular(()=>{var Ge;if(ge[Ce])return!(null===(Ge=Le?.spy)||void 0===Ge)&&Ge.get&&Le.spy.get(Ce,ge[Ce]),ge[Ce];if(se.indexOf(Ce)>-1)return()=>{};const ie=Qe.toPromise().then(ue=>{const we=ue&&ue[Ce];return"function"==typeof we?we.bind(ue):we&&we.then?we.then(Q=>Ze.run(()=>Q)):Ze.run(()=>we)});return new Proxy(()=>{},{get:(ue,we)=>ie[we],apply:(ue,we,Q)=>ie.then(ee=>{var fe;const ae=ee&&ee(...Q);return!(null===(fe=Le?.spy)||void 0===fe)&&fe.apply&&Le.spy.apply(Ce,Q,ae),ae})})})}),me=(ge,Qe)=>{Qe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Le=>{Object.defineProperty(ge.prototype,Le,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Le))})})};class pe{constructor(Qe){return Qe}}const he=new p.OlP("angularfire2.app.options"),ve=new p.OlP("angularfire2.app.name");function K(ge,Qe,Ze){const Pe="object"==typeof Ze&&Ze||{};Pe.name=Pe.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ge=$.Z.apps.filter(ie=>ie&&ie.name===Pe.name)[0]||Qe.runOutsideAngular(()=>$.Z.initializeApp(ge,Pe));try{JSON.stringify(ge)!==JSON.stringify(Ge.options)&&z("error",`${Ge.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ge)}const z=(ge,...Qe)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ge](...Qe)},J={provide:pe,useFactory:K,deps:[he,p.R0b,[new p.FiY,ve]]};let He=(()=>{class ge{constructor(Ze){$.Z.registerVersion("angularfire",k.q4.full,"core"),$.Z.registerVersion("angularfire",k.q4.full,"app-compat"),$.Z.registerVersion("angular",p.q4F.full,Ze.toString())}static initializeApp(Ze,Le){return{ngModule:ge,providers:[{provide:he,useValue:Ze},{provide:ve,useValue:Le}]}}}return ge.\u0275fac=function(Ze){return new(Ze||ge)(p.LFG(p.Lbi))},ge.\u0275mod=p.oAB({type:ge}),ge.\u0275inj=p.cJS({providers:[J]}),ge})();function Ne(ge,Qe,Ze,Le,Pe){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===ge)||[];if(Ce)return function Te(ge,Qe){try{return ge.toString()===Qe.toString()}catch{return ge===Qe}}(Pe,Ge)||(Ee("error",`${Qe} was already initialized on the ${Ze} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Pe,was:Ge})),Ce;{const ie=Le();return globalThis.\u0275AngularfireInstanceCache.push([ge,ie,Pe]),ie}}const tt=!!pt.hot,Ee=(ge,...Qe)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ge](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(pt,Re,F)=>{F.d(Re,{q4:()=>st,iC:()=>ps,fc:()=>er,HU:()=>Os,vb:()=>ha,JM:()=>tl});var p=F(4650),$=F(5867),k=F(5861),se=F(9681),le=F(2090),me=F(4859),pe=F(1877),he=F(8766);const ve="@firebase/installations",K="0.5.16",J=`w:${K}`,He="FIS_v2",Qe=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(T){return T instanceof le.ZR&&T.code.includes("request-failed")}function Le({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Pe(T){return{token:T.token,requestStatus:2,expiresIn:ee(T.expiresIn),creationTime:Date.now()}}function Ce(T,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,k.Z)(function*(T,D){const j=(yield D.json()).error;return Qe.create("request-failed",{requestName:T,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function ie({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ue(T,{refreshToken:D}){const R=ie(T);return R.append("Authorization",function fe(T){return`${He} ${T}`}(D)),R}function we(T){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function ee(T){return Number(T.replace("s","000"))}function ae(T,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:R}){const j=Le(T),X=ie(T),oe=D.getImmediate({optional:!0});if(oe){const St=yield oe.getHeartbeatsHeader();St&&X.append("x-firebase-client",St)}const Ve={method:"POST",headers:X,body:JSON.stringify({fid:R,authVersion:He,appId:T.appId,sdkVersion:J})},ut=yield we(()=>fetch(j,Ve));if(ut.ok){const St=yield ut.json();return{fid:St.fid||R,registrationStatus:2,refreshToken:St.refreshToken,authToken:Pe(St.authToken)}}throw yield Ce("Create Installation",ut)})).apply(this,arguments)}function je(T){return new Promise(D=>{setTimeout(D,T)})}const sn=/^[cdef][\w-]{21}$/;function ze(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function cn(T){return function gt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return sn.test(R)?R:""}catch{return""}}function Cn(T){return`${T.appName}!${T.appId}`}const nn=new Map;function rn(T,D){const R=Cn(T);Ir(R,D),function ki(T,D){const R=function On(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=T=>{Ir(T.data.key,T.data.fid)}),Fr}();R&&R.postMessage({key:T,fid:D}),function Oi(){0===nn.size&&Fr&&(Fr.close(),Fr=null)}()}(R,D)}function Ir(T,D){const R=nn.get(T);if(R)for(const j of R)j(D)}let Fr=null;const jn="firebase-installations-store";let wi=null;function Fi(){return wi||(wi=(0,he.X3)("firebase-installations-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(jn)}})),wi}function Ye(T,D){return rr.apply(this,arguments)}function rr(){return(rr=(0,k.Z)(function*(T,D){const R=Cn(T),X=(yield Fi()).transaction(jn,"readwrite"),oe=X.objectStore(jn),Ae=yield oe.get(R);return yield oe.put(D,R),yield X.done,(!Ae||Ae.fid!==D.fid)&&rn(T,D.fid),D})).apply(this,arguments)}function Yn(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,k.Z)(function*(T){const D=Cn(T),j=(yield Fi()).transaction(jn,"readwrite");yield j.objectStore(jn).delete(D),yield j.done})).apply(this,arguments)}function mr(T,D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,k.Z)(function*(T,D){const R=Cn(T),X=(yield Fi()).transaction(jn,"readwrite"),oe=X.objectStore(jn),Ae=yield oe.get(R),Ve=D(Ae);return void 0===Ve?yield oe.delete(R):yield oe.put(Ve,R),yield X.done,Ve&&(!Ae||Ae.fid!==Ve.fid)&&rn(T,Ve.fid),Ve})).apply(this,arguments)}function In(T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(T){let D;const R=yield mr(T.appConfig,j=>{const X=_n(j),oe=mt(T,X);return D=oe.registrationPromise,oe.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function _n(T){return bt(T||{fid:ze(),registrationStatus:0})}function mt(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Qe.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},j=function _t(T,D){return xt.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:j}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Vr(T)}:{installationEntry:D}}function xt(){return(xt=(0,k.Z)(function*(T,D){try{const R=yield ae(T,D);return Ye(T.appConfig,R)}catch(R){throw Ze(R)&&409===R.customData.serverCode?yield Yn(T.appConfig):yield Ye(T.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Vr(T){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,k.Z)(function*(T){let D=yield Pr(T.appConfig);for(;1===D.registrationStatus;)yield je(100),D=yield Pr(T.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:j}=yield In(T);return j||R}return D})).apply(this,arguments)}function Pr(T){return mr(T,D=>{if(!D)throw Qe.create("installation-not-found");return bt(D)})}function bt(T){return function Mr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function kt(T,D){return zr.apply(this,arguments)}function zr(){return(zr=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:D},R){const j=Yt(T,R),X=ue(T,R),oe=D.getImmediate({optional:!0});if(oe){const St=yield oe.getHeartbeatsHeader();St&&X.append("x-firebase-client",St)}const Ve={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:T.appId}})},ut=yield we(()=>fetch(j,Ve));if(ut.ok)return Pe(yield ut.json());throw yield Ce("Generate Auth Token",ut)})).apply(this,arguments)}function Yt(T,{fid:D}){return`${Le(T)}/${D}/authTokens:generate`}function hr(T){return An.apply(this,arguments)}function An(){return(An=(0,k.Z)(function*(T,D=!1){let R;const j=yield mr(T.appConfig,oe=>{if(!Xt(oe))throw Qe.create("not-registered");const Ae=oe.authToken;if(!D&&q(Ae))return oe;if(1===Ae.requestStatus)return R=Xe(T,D),oe;{if(!navigator.onLine)throw Qe.create("app-offline");const Ve=Y(oe);return R=It(T,Ve),Ve}});return R?yield R:j.authToken})).apply(this,arguments)}function Xe(T,D){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*(T,D){let R=yield et(T.appConfig);for(;1===R.authToken.requestStatus;)yield je(100),R=yield et(T.appConfig);const j=R.authToken;return 0===j.requestStatus?hr(T,D):j})).apply(this,arguments)}function et(T){return mr(T,D=>{if(!Xt(D))throw Qe.create("not-registered");return function H(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function It(T,D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,k.Z)(function*(T,D){try{const R=yield kt(T,D),j=Object.assign(Object.assign({},D),{authToken:R});return yield Ye(T.appConfig,j),R}catch(R){if(!Ze(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ye(T.appConfig,j)}else yield Yn(T.appConfig);throw R}})).apply(this,arguments)}function Xt(T){return void 0!==T&&2===T.registrationStatus}function q(T){return 2===T.requestStatus&&!function W(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+36e5}(T)}function Y(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}function B(){return(B=(0,k.Z)(function*(T){const D=T,{installationEntry:R,registrationPromise:j}=yield In(D);return j?j.catch(console.error):hr(D).catch(console.error),R.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,k.Z)(function*(T,D=!1){const R=T;return yield rt(R),(yield hr(R,D)).token})).apply(this,arguments)}function rt(T){return it.apply(this,arguments)}function it(){return(it=(0,k.Z)(function*(T){const{registrationPromise:D}=yield In(T);D&&(yield D)})).apply(this,arguments)}function Ys(T){return Qe.create("missing-app-config-values",{valueName:T})}const No="installations",Qs=T=>{const D=T.getProvider("app").getImmediate(),R=function bn(T){if(!T||!T.options)throw Ys("App Configuration");if(!T.name)throw Ys("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!T.options[R])throw Ys(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Js=T=>{const D=T.getProvider("app").getImmediate(),R=(0,se._getProvider)(D,No).getImmediate();return{getId:()=>function M(T){return B.apply(this,arguments)}(R),getToken:X=>function ne(T){return Oe.apply(this,arguments)}(R,X)}};(function vl(){(0,se._registerComponent)(new me.wA(No,Qs,"PUBLIC")),(0,se._registerComponent)(new me.wA("installations-internal",Js,"PRIVATE"))})(),(0,se.registerVersion)(ve,K),(0,se.registerVersion)(ve,K,"esm2017");const rs="@firebase/remote-config",Xn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Oo{constructor(D,R,j,X){this.client=D,this.storage=R,this.storageCache=j,this.logger=X}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-R,X=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${X}.`),X}fetch(D){var R=this;return(0,k.Z)(function*(){const[j,X]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(X&&R.isCachedDataFresh(D.cacheMaxAgeMillis,j))return X;D.eTag=X&&X.eTag;const oe=yield R.client.fetch(D),Ae=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ae.push(R.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ae),oe})()}}function xs(T=navigator){return T.languages&&T.languages[0]||T.language}class no{constructor(D,R,j,X,oe,Ae){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=j,this.projectId=X,this.apiKey=oe,this.appId=Ae}fetch(D){var R=this;return(0,k.Z)(function*(){var j,X,oe;const[Ae,Ve]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),St=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},yt={sdk_version:R.sdkVersion,app_instance_id:Ae,app_instance_id_token:Ve,app_id:R.appId,language_code:xs()},qn={method:"POST",headers:Pt,body:JSON.stringify(yt)},yr=fetch(St,qn),pa=new Promise((ga,go)=>{D.signal.addEventListener(()=>{const Xr=new Error("The operation was aborted.");Xr.name="AbortError",go(Xr)})});let Fs;try{yield Promise.race([yr,pa]),Fs=yield yr}catch(ga){let go="fetch-client-network";throw"AbortError"===(null===(j=ga)||void 0===j?void 0:j.name)&&(go="fetch-timeout"),Xn.create(go,{originalErrorMessage:null===(X=ga)||void 0===X?void 0:X.message})}let Lt=Fs.status;const Ti=Fs.headers.get("ETag")||void 0;let gs,$i;if(200===Fs.status){let ga;try{ga=yield Fs.json()}catch(go){throw Xn.create("fetch-client-parse",{originalErrorMessage:null===(oe=go)||void 0===oe?void 0:oe.message})}gs=ga.entries,$i=ga.state}if("INSTANCE_STATE_UNSPECIFIED"===$i?Lt=500:"NO_CHANGE"===$i?Lt=304:("NO_TEMPLATE"===$i||"EMPTY_CONFIG"===$i)&&(gs={}),304!==Lt&&200!==Lt)throw Xn.create("fetch-status",{httpStatus:Lt});return{status:Lt,eTag:Ti,config:gs}})()}}class ss{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,k.Z)(function*(){const j=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:j}){var X=this;return(0,k.Z)(function*(){yield function oi(T,D){return new Promise((R,j)=>{const X=Math.max(D-Date.now(),0),oe=setTimeout(R,X);T.addEventListener(()=>{clearTimeout(oe),j(Xn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const oe=yield X.client.fetch(D);return yield X.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Bp(T){if(!(T instanceof le.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(oe))throw oe;const Ae={throttleEndTimeMillis:Date.now()+(0,le.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(Ae),X.attemptFetch(D,Ae)}})()}}class Hp{constructor(D,R,j,X,oe){this.app=D,this._client=R,this._storageCache=j,this._storage=X,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Oa(T,D){var R;const j=T.target.error||void 0;return Xn.create(D,{originalErrorMessage:j&&(null===(R=j)||void 0===R?void 0:R.message)})}const Lo="app_namespace_store";class pc{constructor(D,R,j,X=function Wp(){return new Promise((T,D)=>{var R;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{D(Oa(X,"storage-open"))},j.onsuccess=X=>{T(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Lo,{keyPath:"compositeKey"})}}catch(j){D(Xn.create("storage-open",{originalErrorMessage:null===(R=j)||void 0===R?void 0:R.message}))}})}()){this.appId=D,this.appName=R,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,k.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,oe)=>{var Ae;const ut=j.transaction([Lo],"readonly").objectStore(Lo),St=R.createCompositeKey(D);try{const Pt=ut.get(St);Pt.onerror=yt=>{oe(Oa(yt,"storage-get"))},Pt.onsuccess=yt=>{const qn=yt.target.result;X(qn?qn.value:void 0)}}catch(Pt){oe(Xn.create("storage-get",{originalErrorMessage:null===(Ae=Pt)||void 0===Ae?void 0:Ae.message}))}})})()}set(D,R){var j=this;return(0,k.Z)(function*(){const X=yield j.openDbPromise;return new Promise((oe,Ae)=>{var Ve;const St=X.transaction([Lo],"readwrite").objectStore(Lo),Pt=j.createCompositeKey(D);try{const yt=St.put({compositeKey:Pt,value:R});yt.onerror=qn=>{Ae(Oa(qn,"storage-set"))},yt.onsuccess=()=>{oe()}}catch(yt){Ae(Xn.create("storage-set",{originalErrorMessage:null===(Ve=yt)||void 0===Ve?void 0:Ve.message}))}})})()}delete(D){var R=this;return(0,k.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,oe)=>{var Ae;const ut=j.transaction([Lo],"readwrite").objectStore(Lo),St=R.createCompositeKey(D);try{const Pt=ut.delete(St);Pt.onerror=yt=>{oe(Oa(yt,"storage-delete"))},Pt.onsuccess=()=>{X()}}catch(Pt){oe(Xn.create("storage-delete",{originalErrorMessage:null===(Ae=Pt)||void 0===Ae?void 0:Ae.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Fo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const R=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),X=D.storage.getActiveConfig(),oe=yield R;oe&&(D.lastFetchStatus=oe);const Ae=yield j;Ae&&(D.lastSuccessfulFetchTimestampMillis=Ae);const Ve=yield X;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function P_(){return wl.apply(this,arguments)}function wl(){return(wl=(0,k.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function gc(){(0,se._registerComponent)(new me.wA("remote-config",function T(D,{instanceIdentifier:R}){const j=D.getProvider("app").getImmediate(),X=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xn.create("registration-window");if(!(0,le.hl)())throw Xn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ae,appId:Ve}=j.options;if(!oe)throw Xn.create("registration-project-id");if(!Ae)throw Xn.create("registration-api-key");if(!Ve)throw Xn.create("registration-app-id");const ut=new pc(Ve,j.name,R=R||"firebase"),St=new Fo(ut),Pt=new pe.Yd(rs);Pt.logLevel=pe.in.ERROR;const yt=new no(X,se.SDK_VERSION,R,oe,Ae,Ve),qn=new ss(yt,ut),yr=new Oo(qn,ut,St,Pt),pa=new Hp(j,yr,St,ut,Pt);return function Mn(T){const D=(0,le.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(pa),pa},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(rs,"0.3.15"),(0,se.registerVersion)(rs,"0.3.15","esm2017")}();const Er="/firebase-messaging-sw.js",Vo="/firebase-cloud-messaging-push-scope",Rs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Il="google.c.a.c_id",mu="google.c.a.c_l",yc="google.c.a.ts",Bo="google.c.a.e";var ai=(()=>{return(T=ai||(ai={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",ai;var T})();function os(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zr(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(R),X=new Uint8Array(j.length);for(let oe=0;oe<j.length;++oe)X[oe]=j.charCodeAt(oe);return X}const ro="fcm_token_details_db",Ho="fcm_token_object_Store";function Gp(T){return _u.apply(this,arguments)}function _u(){return _u=(0,k.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(ro))return null;let D=null;return(yield(0,he.X3)(ro,5,{upgrade:(j=(0,k.Z)(function*(X,oe,Ae,Ve){var ut;if(oe<2||!X.objectStoreNames.contains(Ho))return;const St=Ve.objectStore(Ho),Pt=yield St.index("fcmSenderId").get(T);if(yield St.clear(),Pt)if(2===oe){const yt=Pt;if(!yt.auth||!yt.p256dh||!yt.endpoint)return;D={token:yt.fcmToken,createTime:null!==(ut=yt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:yt.auth,p256dh:yt.p256dh,endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:"string"==typeof yt.vapidKey?yt.vapidKey:os(yt.vapidKey)}}}else if(3===oe){const yt=Pt;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:os(yt.auth),p256dh:os(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:os(yt.vapidKey)}}}else if(4===oe){const yt=Pt;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:os(yt.auth),p256dh:os(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:os(yt.vapidKey)}}}}),function(oe,Ae,Ve,ut){return j.apply(this,arguments)})})).close(),yield(0,he.Lj)(ro),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Ln(D)?D:null;var j}),_u.apply(this,arguments)}function Ln(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ei="firebase-messaging-store";let Cr=null;function El(){return Cr||(Cr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(T,D)=>{0===D&&T.createObjectStore(Ei)}})),Cr}function $o(T){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,k.Z)(function*(T){const D=li(T),j=yield(yield El()).transaction(Ei).objectStore(Ei).get(D);if(j)return j;{const X=yield Gp(T.appConfig.senderId);if(X)return yield on(T,X),X}})).apply(this,arguments)}function on(T,D){return yu.apply(this,arguments)}function yu(){return(yu=(0,k.Z)(function*(T,D){const R=li(T),X=(yield El()).transaction(Ei,"readwrite");return yield X.objectStore(Ei).put(D,R),yield X.done,D})).apply(this,arguments)}function Ps(T){return vu.apply(this,arguments)}function vu(){return(vu=(0,k.Z)(function*(T){const D=li(T),j=(yield El()).transaction(Ei,"readwrite");yield j.objectStore(Ei).delete(D),yield j.done})).apply(this,arguments)}function li({appConfig:T}){return T.appId}const Hn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nt(T,D){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,k.Z)(function*(T,D){var R;const j=yield Ba(T),X=Me(D),oe={method:"POST",headers:j,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(io(T.appConfig),oe)).json()}catch(Ve){throw Hn.create("token-subscribe-failed",{errorInfo:null===(R=Ve)||void 0===R?void 0:R.toString()})}if(Ae.error)throw Hn.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw Hn.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function zp(T,D){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,k.Z)(function*(T,D){var R;const j=yield Ba(T),X=Me(D.subscriptionOptions),oe={method:"PATCH",headers:j,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(`${io(T.appConfig)}/${D.token}`,oe)).json()}catch(Ve){throw Hn.create("token-update-failed",{errorInfo:null===(R=Ve)||void 0===R?void 0:R.toString()})}if(Ae.error)throw Hn.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw Hn.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function wc(T,D){return Va.apply(this,arguments)}function Va(){return(Va=(0,k.Z)(function*(T,D){var R;const X={method:"DELETE",headers:yield Ba(T)};try{const Ae=yield(yield fetch(`${io(T.appConfig)}/${D}`,X)).json();if(Ae.error)throw Hn.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(oe){throw Hn.create("token-unsubscribe-failed",{errorInfo:null===(R=oe)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function io({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Ba(T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,k.Z)(function*({appConfig:T,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Me({p256dh:T,auth:D,endpoint:R,vapidKey:j}){const X={web:{endpoint:R,auth:D,p256dh:T}};return j!==Rs&&(X.web.applicationPubKey=j),X}const Kt=6048e5;function wh(T){return Go.apply(this,arguments)}function Go(){return(Go=(0,k.Z)(function*(T){const D=yield Ih(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:os(D.getKey("auth")),p256dh:os(D.getKey("p256dh"))},j=yield $o(T.firebaseDependencies);if(j){if(qp(j.subscriptionOptions,R))return Date.now()>=j.createTime+Kt?Cl(T,{token:j.token,createTime:Date.now(),subscriptionOptions:R}):j.token;try{yield wc(T.firebaseDependencies,j.token)}catch(X){console.warn(X)}return Tl(T.firebaseDependencies,R)}return Tl(T.firebaseDependencies,R)})).apply(this,arguments)}function sr(T){return zo.apply(this,arguments)}function zo(){return(zo=(0,k.Z)(function*(T){const D=yield $o(T.firebaseDependencies);D&&(yield wc(T.firebaseDependencies,D.token),yield Ps(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Cl(T,D){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*(T,D){try{const R=yield zp(T.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield on(T.firebaseDependencies,j),R}catch(R){throw yield sr(T),R}})).apply(this,arguments)}function Tl(T,D){return qo.apply(this,arguments)}function qo(){return(qo=(0,k.Z)(function*(T,D){const j={token:yield Nt(T,D),createTime:Date.now(),subscriptionOptions:D};return yield on(T,j),j.token})).apply(this,arguments)}function Ih(T,D){return ja.apply(this,arguments)}function ja(){return(ja=(0,k.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zr(D)})})).apply(this,arguments)}function qp(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}function so(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function or(T,D){if(!D.notification)return;T.notification={};const R=D.notification.title;R&&(T.notification.title=R);const j=D.notification.body;j&&(T.notification.body=j);const X=D.notification.image;X&&(T.notification.image=X);const oe=D.notification.icon;oe&&(T.notification.icon=oe)}(D,T),function Vi(T,D){!D.data||(T.data=D.data)}(D,T),function Ha(T,D){var R,j,X,oe,Ae;if(!(D.fcmOptions||null!==(R=D.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const Ve=null!==(X=null===(j=D.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(oe=D.notification)||void 0===oe?void 0:oe.click_action;Ve&&(T.fcmOptions.link=Ve);const ut=null===(Ae=D.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;ut&&(T.fcmOptions.analyticsLabel=ut)}(D,T),D}function $a(T){return"object"==typeof T&&!!T&&Il in T}function as(T,D){const R=[];for(let j=0;j<T.length;j++)R.push(T.charAt(j)),j<D.length&&R.push(D.charAt(j));return R.join("")}function wu(T){return Hn.create("missing-app-config-values",{valueName:T})}as("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),as("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ec{constructor(D,R,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Ic(T){if(!T||!T.options)throw wu("App Configuration Object");if(!T.name)throw wu("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const j of D)if(!R[j])throw wu(j);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:X,installations:R,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Eh(T){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,k.Z)(function*(T){var D;try{T.swRegistration=yield navigator.serviceWorker.register(Er,{scope:Vo}),T.swRegistration.update().catch(()=>{})}catch(R){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=R)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Iu(T,D){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,k.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield Eh(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function Eu(T,D){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,k.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=Rs)})).apply(this,arguments)}function Zo(){return(Zo=(0,k.Z)(function*(T,D){if(!navigator)throw Hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hn.create("permission-blocked");return yield Eu(T,D?.vapidKey),yield Iu(T,D?.serviceWorkerRegistration),wh(T)})).apply(this,arguments)}function Ch(T,D,R){return za.apply(this,arguments)}function za(){return(za=(0,k.Z)(function*(T,D,R){const j=Th(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:R[Il],message_name:R[mu],message_time:R[yc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Th(T){switch(T){case ai.NOTIFICATION_CLICKED:return"notification_open";case ai.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ms(){return(Ms=(0,k.Z)(function*(T,D){const R=D.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===ai.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(so(R)):T.onMessageHandler.next(so(R)));const j=R.data;$a(j)&&"1"===j[Bo]&&(yield Ch(T,R.messageType,j))})).apply(this,arguments)}const Ns="@firebase/messaging",Nn=T=>{const D=new Ec(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Tc(T,D){return Ms.apply(this,arguments)}(D,R)),D},ls=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:j=>function Cc(T,D){return Zo.apply(this,arguments)}(D,j)}};function Dc(){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,k.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kn(){(0,se._registerComponent)(new me.wA("messaging",Nn,"PUBLIC")),(0,se._registerComponent)(new me.wA("messaging-internal",ls,"PRIVATE")),(0,se.registerVersion)(Ns,"0.11.0"),(0,se.registerVersion)(Ns,"0.11.0","esm2017")}();const Jo="analytics",Ac="firebase_id",Su="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xc="https://www.googletagmanager.com/gtag/js",$n=new pe.Yd("@firebase/analytics");function Dl(T){return Promise.all(T.map(D=>D.catch(R=>R)))}function Sl(T,D){const R=document.createElement("script");R.src=`${xc}?l=${T}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Dh(T,D,R,j,X,oe){return xl.apply(this,arguments)}function xl(){return(xl=(0,k.Z)(function*(T,D,R,j,X,oe){const Ae=j[X];try{if(Ae)yield D[Ae];else{const ut=(yield Dl(R)).find(St=>St.measurementId===X);ut&&(yield D[ut.appId])}}catch(Ve){$n.error(Ve)}T("config",X,oe)})).apply(this,arguments)}function us(T,D,R,j,X){return qa.apply(this,arguments)}function qa(){return(qa=(0,k.Z)(function*(T,D,R,j,X){try{let oe=[];if(X&&X.send_to){let Ae=X.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ve=yield Dl(R);for(const ut of Ae){const St=Ve.find(yt=>yt.measurementId===ut),Pt=St&&D[St.appId];if(!Pt){oe=[];break}oe.push(Pt)}}0===oe.length&&(oe=Object.values(D)),yield Promise.all(oe),T("event",j,X||{})}catch(oe){$n.error(oe)}})).apply(this,arguments)}function Rc(T){const D=window.document.getElementsByTagName("script");for(const R of Object.values(D))if(R.src&&R.src.includes(xc)&&R.src.includes(T))return R;return null}const ar=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Za=new class xu{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Xo(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function xh(T){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,k.Z)(function*(T){var D;const{appId:R,apiKey:j}=T,X={method:"GET",headers:Xo(j)},oe=Su.replace("{app-id}",R),Ae=yield fetch(oe,X);if(200!==Ae.status&&304!==Ae.status){let Ve="";try{const ut=yield Ae.json();null!==(D=ut.error)&&void 0!==D&&D.message&&(Ve=ut.error.message)}catch{}throw ar.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ve})}return Ae.json()})).apply(this,arguments)}function Pc(T){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,k.Z)(function*(T,D=Za,R){const{appId:j,apiKey:X,measurementId:oe}=T.options;if(!j)throw ar.create("no-app-id");if(!X){if(oe)return{measurementId:oe,appId:j};throw ar.create("no-api-key")}const Ae=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Ya;return setTimeout((0,k.Z)(function*(){Ve.abort()}),void 0!==R?R:6e4),Mc({appId:j,apiKey:X,measurementId:oe},Ae,Ve,D)})).apply(this,arguments)}function Mc(T,D,R){return cs.apply(this,arguments)}function cs(){return(cs=(0,k.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:R},j,X=Za){var oe,Ae;const{appId:Ve,measurementId:ut}=T;try{yield Ru(j,D)}catch(St){if(ut)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null===(oe=St)||void 0===oe?void 0:oe.message}]`),{appId:Ve,measurementId:ut};throw St}try{const St=yield xh(T);return X.deleteThrottleMetadata(Ve),St}catch(St){const Pt=St;if(!Rl(Pt)){if(X.deleteThrottleMetadata(Ve),ut)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:Ve,measurementId:ut};throw St}const yt=503===Number(null===(Ae=Pt?.customData)||void 0===Ae?void 0:Ae.httpStatus)?(0,le.$s)(R,X.intervalMillis,30):(0,le.$s)(R,X.intervalMillis),qn={throttleEndTimeMillis:Date.now()+yt,backoffCount:R+1};return X.setThrottleMetadata(Ve,qn),$n.debug(`Calling attemptFetch again in ${yt} millis`),Mc(T,qn,j,X)}})).apply(this,arguments)}function Ru(T,D){return new Promise((R,j)=>{const X=Math.max(D-Date.now(),0),oe=setTimeout(R,X);T.addEventListener(()=>{clearTimeout(oe),j(ar.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Rl(T){if(!(T instanceof le.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ya{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let oo,Ml;function ea(){return(ea=(0,k.Z)(function*(T,D,R,j,X){if(X&&X.global)T("event",R,j);else{const oe=yield D;T("event",R,Object.assign(Object.assign({},j),{send_to:oe}))}})).apply(this,arguments)}function ia(T){Ml=T}function Pu(T){oo=T}function ao(){return sa.apply(this,arguments)}function sa(){return(sa=(0,k.Z)(function*(){var T;if(!(0,le.hl)())return $n.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(D){return $n.warn(ar.create("indexeddb-unavailable",{errorInfo:null===(T=D)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function oa(){return(oa=(0,k.Z)(function*(T,D,R,j,X,oe,Ae){var Ve;const ut=Pc(T);ut.then(yr=>{R[yr.measurementId]=yr.appId,T.options.measurementId&&yr.measurementId!==T.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yr=>$n.error(yr)),D.push(ut);const St=ao().then(yr=>{if(yr)return j.getId()}),[Pt,yt]=yield Promise.all([ut,St]);Rc(oe)||Sl(oe,Pt.measurementId),Ml&&(X("consent","default",Ml),ia(void 0)),X("js",new Date);const qn=null!==(Ve=Ae?.config)&&void 0!==Ve?Ve:{};return qn.origin="firebase",qn.update=!0,null!=yt&&(qn[Ac]=yt),X("config",Pt.measurementId,qn),oo&&(X("set",oo),Pu(void 0)),Pt.measurementId})).apply(this,arguments)}class Nl{constructor(D){this.app=D}_delete(){return delete Nr[this.app.options.appId],Promise.resolve()}}let Nr={},aa=[];const lo={};let ua,ji,la="dataLayer",kc=!1;function Mh(T,D,R){!function Kp(){const T=[];if((0,le.ru)()&&T.push("This is a browser extension environment."),(0,le.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((j,X)=>`(${X+1}) ${j}`).join(" "),R=ar.create("invalid-analytics-context",{errorInfo:D});$n.warn(R.message)}}();const j=T.options.appId;if(!j)throw ar.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw ar.create("no-api-key");$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Nr[j])throw ar.create("already-exists",{id:j});if(!kc){!function Al(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(la);const{wrappedGtag:oe,gtagCore:Ae}=function Ka(T,D,R,j,X){let oe=function(...Ae){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(oe=window[X]),window[X]=function Au(T,D,R,j){function oe(){return(oe=(0,k.Z)(function*(Ae,Ve,ut){try{"event"===Ae?yield us(T,D,R,Ve,ut):"config"===Ae?yield Dh(T,D,R,j,Ve,ut):"consent"===Ae?T("consent","update",ut):T("set",Ve)}catch(St){$n.error(St)}})).apply(this,arguments)}return function X(Ae,Ve,ut){return oe.apply(this,arguments)}}(oe,T,D,R),{gtagCore:oe,wrappedGtag:window[X]}}(Nr,aa,lo,la,"gtag");ji=oe,ua=Ae,kc=!0}return Nr[j]=function Ph(T,D,R,j,X,oe,Ae){return oa.apply(this,arguments)}(T,aa,lo,D,ua,la,R),new Nl(T)}function N_(){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,k.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const at="@firebase/analytics";!function Sn(){(0,se._registerComponent)(new me.wA(Jo,(D,{options:R})=>Mh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,se._registerComponent)(new me.wA("analytics-internal",function T(D){try{const R=D.getProvider(Jo).getImmediate();return{logEvent:(j,X,oe)=>function an(T,D,R,j){T=(0,le.m9)(T),function Qa(T,D,R,j,X){return ea.apply(this,arguments)}(ji,Nr[T.app.options.appId],D,R,j).catch(X=>$n.error(X))}(R,j,X,oe)}}catch(R){throw ar.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,se.registerVersion)(at,"0.8.4"),(0,se.registerVersion)(at,"0.8.4","esm2017")}();var hs=F(4408),Tr=F(7565);const Oc=new class co extends Tr.v{}(class uo extends hs.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(D,R,j):(D.flush(this),0)}});var kh=F(4986),ca=F(8505),Nu=F(5363),ho=F(9468);const st=new p.GfV("7.4.1"),Xa="__angularfire_symbol__analyticsIsSupportedValue",Hi="__angularfire_symbol__analyticsIsSupported",ku="__angularfire_symbol__remoteConfigIsSupportedValue",Ol="__angularfire_symbol__remoteConfigIsSupported",Gn="__angularfire_symbol__messagingIsSupportedValue",el="__angularfire_symbol__messagingIsSupported";function tl(T,D,R){if(D){if(1===D.length)return D[0];const oe=D.filter(Ae=>Ae.app===R);if(1===oe.length)return oe[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[Hi]||(globalThis[Hi]=N_().then(T=>globalThis[Xa]=T).catch(()=>globalThis[Xa]=!1)),globalThis[el]||(globalThis[el]=Dc().then(T=>globalThis[Gn]=T).catch(()=>globalThis[Gn]=!1)),globalThis[Ol]||(globalThis[Ol]=P_().then(T=>globalThis[ku]=T).catch(()=>globalThis[ku]=!1));const ha=(T,D)=>{const R=D?[D]:(0,$.C6)(),j=[];return R.forEach(X=>{X.container.getProvider(T).instances.forEach(Ae=>{j.includes(Ae)||j.push(Ae)})}),j};function ci(){}class fo{constructor(D,R=Oc){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,j){const X=this.zone;return this.delegate.schedule(function(Ae){X.runGuarded(()=>{D.apply(this,[Ae])})},R,j)}}class Ou{constructor(D){this.zone=D,this.task=null}call(D,R){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ci,{},ci,ci)),R.pipe((0,ca.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Os=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new fo(Zone.current)),this.insideAngular=R.run(()=>new fo(Zone.current,kh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(p.LFG(p.R0b))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Jr(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function er(T){return T.pipe((0,Nu.Q)(Jr().outsideAngular))}function ps(T){return Jr(),function zn(T){return function(R){return(R=R.lift(new Ou(T.ngZone))).pipe((0,ho.R)(T.outsideAngular),(0,Nu.Q)(T.insideAngular))}}(Jr())(T)}},8247:(pt,Re,F)=>{F.d(Re,{$:()=>io,A:()=>z,B:()=>Ne,G:()=>Js,H:()=>qr,J:()=>ss,L:()=>q,M:()=>wl,N:()=>_c,P:()=>kh,Q:()=>Il,R:()=>k_,T:()=>mu,U:()=>Rs,V:()=>ai,W:()=>os,X:()=>Gp,Y:()=>La,Z:()=>Nt,_:()=>zp,a:()=>ks,a0:()=>wh,a1:()=>sr,a2:()=>Cl,a3:()=>Tl,a4:()=>Ih,a5:()=>qp,a6:()=>or,a7:()=>Vi,a8:()=>$a,a9:()=>as,aA:()=>W,aB:()=>ut,aC:()=>er,aD:()=>Ls,aE:()=>vt,aI:()=>Xo,aL:()=>Bo,aa:()=>Eh,ab:()=>Iu,ac:()=>Eu,af:()=>Ch,ag:()=>Th,ah:()=>Tc,ak:()=>Ei,al:()=>Tu,an:()=>xc,ao:()=>xl,ap:()=>we,aq:()=>Ue,ar:()=>rt,as:()=>Ze,at:()=>Fl,au:()=>Ti,av:()=>Rt,aw:()=>Le,ax:()=>ie,ay:()=>yr,az:()=>ee,b:()=>ar,c:()=>Gn,d:()=>Oh,e:()=>Ll,f:()=>zn,g:()=>j,h:()=>T,i:()=>sa,j:()=>Ae,k:()=>jh,l:()=>Qr,m:()=>Us,o:()=>he,r:()=>hs,s:()=>ds,u:()=>Oc});var p=F(5861),$=F(2090),k=F(9681),se=F(1877),le=F(655),me=F(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ge=new se.Yd("@firebase/auth");function Qe(w,...g){ge.logLevel<=se.in.ERROR&&ge.error(`Auth (${k.SDK_VERSION}): ${w}`,...g)}function Ze(w,...g){throw Ge(w,...g)}function Le(w,...g){return Ge(w,...g)}function Pe(w,g,_){const E=Object.assign(Object.assign({},Te()),{[g]:_});return new $.LL("auth","Firebase",E).create(g,{appName:w.name})}function Ce(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ze(w,"argument-error"),Pe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(w,...g){if("string"!=typeof w){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return tt.create(w,...g)}function ie(w,g,..._){if(!w)throw Ge(g,..._)}function ue(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Qe(g),new Error(g)}function we(w,g){w||ue(g)}const Q=new Map;function ee(w){we(w instanceof Function,"Expected a class definition");let g=Q.get(w);return g?(we(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Q.set(w,g),g)}function Be(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===gt()||"https:"===gt()}function gt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class ze{constructor(g,_){this.shortDelay=g,this.longDelay=_,we(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function sn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(w,g){we(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Cn{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new ze(3e4,6e4);function zt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Vt(w,g,_,E){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(w,g,_,E,x={}){return ki(w,x,(0,p.Z)(function*(){let O={},te={};E&&("GET"===g?te=E:O={body:JSON.stringify(E)});const xe=(0,$.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),Cn.fetch()(Li(w,w.config.apiHost,_,xe),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ki(w,g,_){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,p.Z)(function*(w,g,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},nn),g);try{const x=new Ur(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const te=yield O.json();if("needConfirmation"in te)throw jn(w,"account-exists-with-different-credential",te);if(O.ok&&!("errorMessage"in te))return te;{const xe=O.ok?te.errorMessage:te.error.message,[nt,Et]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw jn(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===nt)throw jn(w,"email-already-in-use",te);if("USER_DISABLED"===nt)throw jn(w,"user-disabled",te);const Zt=E[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw Pe(w,Zt,Et);Ze(w,Zt)}}catch(x){if(x instanceof $.ZR)throw x;Ze(w,"network-request-failed")}})).apply(this,arguments)}function On(w,g,_,E){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(w,g,_,E,x={}){const O=yield Vt(w,g,_,E,x);return"mfaPendingCredential"in O&&Ze(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Li(w,g,_,E){const x=`${g}${_}?${E}`;return w.config.emulator?cn(w.config,x):`${w.config.apiScheme}://${x}`}class Ur{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Le(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(w,g,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const x=Le(w,g,E);return x.customData._tokenResponse=_,x}function Fi(){return(Fi=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ye(w,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Yn(w,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function mr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Tn(){return(Tn=(0,p.Z)(function*(w,g=!1){const _=(0,$.m9)(w),E=yield _.getIdToken(g),x=mt(E);ie(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,te=O?.sign_in_provider;return{claims:x,token:E,authTime:mr(_n(x.auth_time)),issuedAtTime:mr(_n(x.iat)),expirationTime:mr(_n(x.exp)),signInProvider:te||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function _n(w){return 1e3*Number(w)}function mt(w){var g;const[_,E,x]=w.split(".");if(void 0===_||void 0===E||void 0===x)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,$.tV)(E);return O?JSON.parse(O):(Qe("Failed to decode base64 JWT payload"),null)}catch(O){return Qe("Caught error parsing JWT payload as JSON",null===(g=O)||void 0===g?void 0:g.toString()),null}}function xt(w,g){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof $.ZR&&Qn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Qn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Pr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,p.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,p.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class bt{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mr(w){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(w){var g;const _=w.auth,E=yield w.getIdToken(),x=yield xt(w,Yn(_,{idToken:E}));ie(x?.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const te=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?An(O.providerUserInfo):[],xe=hr(w.providerData,te),Zt=!!w.isAnonymous&&!(w.email&&O.passwordHash||xe?.length),fn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:xe,metadata:new bt(O.createdAt,O.lastLoginAt),isAnonymous:Zt};Object.assign(w,fn)})).apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(w){const g=(0,$.m9)(w);yield Mr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function hr(w,g){return[...w.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function An(w){return w.map(g=>{var{providerId:_}=g,E=(0,le._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function De(){return(De=(0,p.Z)(function*(w,g){const _=yield ki(w,{},(0,p.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,te=Li(w,x,"/v1/token",`key=${O}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",Cn.fetch()(te,{method:"POST",headers:xe,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ie(g.idToken,"internal-error"),ie(typeof g.idToken<"u","internal-error"),ie(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function _t(w){const g=mt(w);return ie(g,"internal-error"),ie(typeof g.exp<"u","internal-error"),ie(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,p.Z)(function*(){return ie(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,p.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:te}=yield function Xe(w,g){return De.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(x,O,Number(te))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:x,expirationTime:O}=_,te=new et;return E&&(ie("string"==typeof E,"internal-error",{appName:g}),te.refreshToken=E),x&&(ie("string"==typeof x,"internal-error",{appName:g}),te.accessToken=x),O&&(ie("number"==typeof O,"internal-error",{appName:g}),te.expirationTime=O),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return ue("not implemented")}}function It(w,g){ie("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Ct{constructor(g){var{uid:_,auth:E,stsTokenManager:x}=g,O=(0,le._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new bt(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,p.Z)(function*(){const E=yield xt(_,_.stsTokenManager.getToken(_.auth,g));return ie(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function In(w){return Tn.apply(this,arguments)}(this,g)}reload(){return function zr(w){return Yt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ct(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,p.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield Mr(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,p.Z)(function*(){const _=yield g.getIdToken();return yield xt(g,function wi(w,g){return Fi.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,x,O,te,xe,nt,Et,Zt;const fn=null!==(E=_.displayName)&&void 0!==E?E:void 0,jr=null!==(x=_.email)&&void 0!==x?x:void 0,Wi=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Hc=null!==(te=_.photoURL)&&void 0!==te?te:void 0,$c=null!==(xe=_.tenantId)&&void 0!==xe?xe:void 0,Wc=null!==(nt=_._redirectEventId)&&void 0!==nt?nt:void 0,rl=null!==(Et=_.createdAt)&&void 0!==Et?Et:void 0,eg=null!==(Zt=_.lastLoginAt)&&void 0!==Zt?Zt:void 0,{uid:zh,emailVerified:Gc,isAnonymous:Vu,providerData:Bu,stsTokenManager:ma}=_;ie(zh&&ma,g,"internal-error");const V_=et.fromJSON(this.name,ma);ie("string"==typeof zh,g,"internal-error"),It(fn,g.name),It(jr,g.name),ie("boolean"==typeof Gc,g,"internal-error"),ie("boolean"==typeof Vu,g,"internal-error"),It(Wi,g.name),It(Hc,g.name),It($c,g.name),It(Wc,g.name),It(rl,g.name),It(eg,g.name);const Fn=new Ct({uid:zh,auth:g,email:jr,emailVerified:Gc,displayName:fn,isAnonymous:Vu,photoURL:Hc,phoneNumber:Wi,tenantId:$c,stsTokenManager:V_,createdAt:rl,lastLoginAt:eg});return Bu&&Array.isArray(Bu)&&(Fn.providerData=Bu.map(tg=>Object.assign({},tg))),Wc&&(Fn._redirectEventId=Wc),Fn}static _fromIdTokenResponse(g,_,E=!1){return(0,p.Z)(function*(){const x=new et;x.updateFromServerResponse(_);const O=new Ct({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield Mr(O),O})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(_,E){var x=this;return(0,p.Z)(function*(){x.storage[_]=E})()}_get(_){var E=this;return(0,p.Z)(function*(){const x=E.storage[_];return void 0===x?null:x})()}_remove(_){var E=this;return(0,p.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function W(w,g,_){return`firebase:${w}:${g}:${_}`}class Y{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:x,name:O}=this.auth;this.fullUserKey=W(this.userKey,x.apiKey,O),this.fullPersistenceKey=W("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,p.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Ct._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,p.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,p.Z)(function*(){if(!_.length)return new Y(ee(q),g,E);const x=(yield Promise.all(_.map(function(){var Et=(0,p.Z)(function*(Zt){if(yield Zt._isAvailable())return Zt});return function(Zt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let O=x[0]||ee(q);const te=W(E,g.config.apiKey,g.name);let xe=null;for(const Et of _)try{const Zt=yield Et._get(te);if(Zt){const fn=Ct._fromJSON(g,Zt);Et!==O&&(xe=fn),O=Et;break}}catch{}const nt=x.filter(Et=>Et._shouldAllowMigration);return O._shouldAllowMigration&&nt.length?(O=nt[0],xe&&(yield O._set(te,xe.toJSON())),yield Promise.all(_.map(function(){var Et=(0,p.Z)(function*(Zt){if(Zt!==O)try{yield Zt._remove(te)}catch{}});return function(Zt){return Et.apply(this,arguments)}}())),new Y(O,g,E)):new Y(O,g,E)})()}}function H(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Oe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(M(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(it(g))return"Blackberry";if(Se(g))return"Webos";if(B(g))return"Safari";if((g.includes("chrome/")||ne(g))&&!g.includes("edge/"))return"Chrome";if(rt(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function M(w=(0,$.z$)()){return/firefox\//i.test(w)}function B(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ne(w=(0,$.z$)()){return/crios\//i.test(w)}function Oe(w=(0,$.z$)()){return/iemobile/i.test(w)}function rt(w=(0,$.z$)()){return/android/i.test(w)}function it(w=(0,$.z$)()){return/blackberry/i.test(w)}function Se(w=(0,$.z$)()){return/webos/i.test(w)}function Ue(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Rt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function hn(w=(0,$.z$)()){return Ue(w)||rt(w)||Se(w)||it(w)||/windows phone/i.test(w)||Oe(w)}function bn(w,g=[]){let _;switch(w){case"Browser":_=H((0,$.z$)());break;case"Worker":_=`${H((0,$.z$)())}-${w}`;break;default:_=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${E}`}class Ys{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const E=O=>new Promise((te,xe)=>{try{te(g(O))}catch(nt){xe(nt)}});E.onAbort=_,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,p.Z)(function*(){var E;if(_.auth.currentUser===g)return;const x=[];try{for(const O of _.queue)yield O(g),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const te of x)try{te()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class No{constructor(g,_,E){this.app=g,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new Ys(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=ee(_)),this._initializationPromise=this.queue((0,p.Z)(function*(){var x,O;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,g),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,p.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,p.Z)(function*(){var E;const x=yield _.assertedPersistence.getCurrentUser();let O=x,te=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const xe=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,nt=O?._redirectEventId,Et=yield _.tryRedirectSignIn(g);(!xe||xe===nt)&&Et?.user&&(O=Et.user,te=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(O)}catch(xe){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(xe))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,p.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,p.Z)(function*(){var E;try{yield Mr(g)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function jt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,p.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,p.Z)(function*(){const E=g?(0,$.m9)(g):null;return E&&ie(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g,_=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return g&&ie(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,p.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,p.Z)(function*(){yield _.assertedPersistence.setPersistence(ee(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,p.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,p.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&ee(g)||_._popupRedirectResolver;ie(E,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[ee(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,p.Z)(function*(){var E,x;return _._isInitialized&&(yield _.queue((0,p.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,p.Z)(function*(){if(g===_.currentUser)return _.queue((0,p.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(te,this,"internal-error"),te.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,E,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,p.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,p.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function vt(w){return(0,$.m9)(w)}class Qs{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Js(w,g,_){const E=vt(w);ie(E._canInitEmulator,E,"emulator-config-failed"),ie(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=vl(g),{host:te,port:xe}=function rs(w){const g=vl(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const O=x[1];return{host:O,port:Jn(E.substr(O.length+1))}}{const[O,te]=E.split(":");return{host:O,port:Jn(te)}}}(g);E.config.emulator={url:`${O}//${te}${null===xe?"":`:${xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:te,port:xe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Xs(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function vl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Jn(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class qr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ue("not implemented")}_getIdTokenResponse(g){return ue("not implemented")}_linkToIdToken(g,_){return ue("not implemented")}_getReauthenticationResolver(g){return ue("not implemented")}}function ii(w,g){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:resetPassword",zt(w,g))})).apply(this,arguments)}function fu(w,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function _h(w,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",zt(w,g))})).apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithPassword",zt(w,g))})).apply(this,arguments)}function As(w,g){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:sendOobCode",zt(w,g))})).apply(this,arguments)}function is(w,g){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,p.Z)(function*(w,g){return As(w,g)})).apply(this,arguments)}function yh(w,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,p.Z)(function*(w,g){return As(w,g)})).apply(this,arguments)}function si(w,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(w,g){return As(w,g)})).apply(this,arguments)}function pu(w,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,p.Z)(function*(w,g){return As(w,g)})).apply(this,arguments)}function gu(){return(gu=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithEmailLink",zt(w,g))})).apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithEmailLink",zt(w,g))})).apply(this,arguments)}class xs extends qr{constructor(g,_,E,x=null){super("password",E),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new xs(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new xs(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return function Na(w,g){return eo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Kr(w,g){return gu.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ze(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return fu(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Vp(w,g){return Oo.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:Ze(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function no(w,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithIdp",zt(w,g))})).apply(this,arguments)}class ss extends qr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new ss(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ze("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=_,O=(0,le._T)(_,["providerId","signInMethod"]);if(!E||!x)return null;const te=new ss(E,x);return te.idToken=O.idToken||void 0,te.accessToken=O.accessToken||void 0,te.secret=O.secret,te.nonce=O.nonce,te.pendingToken=O.pendingToken||null,te}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,no(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function jp(w,g){return hc.apply(this,arguments)}function hc(){return(hc=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:sendVerificationCode",zt(w,g))})).apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",zt(w,g))})).apply(this,arguments)}function fc(){return(fc=(0,p.Z)(function*(w,g){const _=yield On(w,"POST","/v1/accounts:signInWithPhoneNumber",zt(w,g));if(_.temporaryProof)throw jn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const $p={USER_NOT_FOUND:"user-not-found"};function pc(){return(pc=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithPhoneNumber",zt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),$p)})).apply(this,arguments)}class Fo extends qr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Fo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Fo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Hp(w,g){return Oa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Lo(w,g){return fc.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Wp(w,g){return pc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:O}=g;return E||_||x||O?new Fo({verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:O}):null}}class Uo{constructor(g){var _,E,x,O,te,xe;const nt=(0,$.zd)((0,$.pd)(g)),Et=null!==(_=nt.apiKey)&&void 0!==_?_:null,Zt=null!==(E=nt.oobCode)&&void 0!==E?E:null,fn=function gc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);ie(Et&&Zt&&fn,"argument-error"),this.apiKey=Et,this.operation=fn,this.code=Zt,this.continueUrl=null!==(O=nt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(te=nt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(xe=nt.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const _=function mc(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||g||w}(g);try{return new Uo(_)}catch{return null}}}let wl=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return xs._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const x=Uo.parseLink(E);return ie(x,"argument-error"),xs._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Er{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Vo extends Er{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Rs extends Vo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),ss._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ie(g.idToken||g.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Rs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Rs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:O,nonce:te,providerId:xe}=g;if(!E&&!x&&!_&&!O||!xe)return null;try{return new Rs(xe)._credential({idToken:_,accessToken:E,nonce:te,pendingToken:O})}catch{return null}}}let _c=(()=>{class w extends Vo{constructor(){super("facebook.com")}static credential(_){return ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Il=(()=>{class w extends Vo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:x}=_;if(!E&&!x)return null;try{return w.credential(E,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),mu=(()=>{class w extends Vo{constructor(){super("github.com")}static credential(_){return ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Bo extends qr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,no(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:O}=_;return E&&x&&O&&E===x?new Bo(E,O):null}static _create(g,_){return new Bo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ai extends Er{constructor(g){ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ai.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ai.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Bo.fromJSON(g);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return Bo._create(E,_)}catch{return null}}}let os=(()=>{class w extends Vo{constructor(){super("twitter.com")}static credential(_,E){return ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=_;if(!E||!x)return null;try{return w.credential(E,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Zr(w,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signUp",zt(w,g))})).apply(this,arguments)}class Ii{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,x=!1){return(0,p.Z)(function*(){const O=yield Ct._fromIdTokenResponse(g,E,x),te=Ho(E);return new Ii({user:O,providerId:te,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,p.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=Ho(E);return new Ii({user:g,providerId:x,_tokenResponse:E,operationType:_})})()}}function Ho(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Gp(w){return _u.apply(this,arguments)}function _u(){return(_u=(0,p.Z)(function*(w){var g;const _=vt(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Ii({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Zr(_,{returnSecureToken:!0}),x=yield Ii._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ln extends $.ZR{constructor(g,_,E,x){var O;super(_.code,_.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Ln.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,x){return new Ln(g,_,E,x)}}function vc(w,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ln._fromErrorAndOperation(w,O,g,E):O})}function vh(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Ei(w,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w);yield Ui(!0,_,g);const{providerUserInfo:E}=yield Ye(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=vh(E||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function El(w,g){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(w,g,_=!1){const E=yield xt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Ii._forOperation(w,"link",E)})).apply(this,arguments)}function Ui(w,g,_){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(w,g,_){yield Mr(g);const x=!1===w?"provider-already-linked":"no-such-provider";ie(vh(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function yu(w,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(w,g,_=!1){var E;const{auth:x}=w,O="reauthenticate";try{const te=yield xt(w,vc(x,O,g,w),_);ie(te.idToken,x,"internal-error");const xe=mt(te.idToken);ie(xe,x,"internal-error");const{sub:nt}=xe;return ie(w.uid===nt,x,"user-mismatch"),Ii._forOperation(w,O,te)}catch(te){throw"auth/user-not-found"===(null===(E=te)||void 0===E?void 0:E.code)&&Ze(x,"user-mismatch"),te}})).apply(this,arguments)}function vu(w,g){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(w,g,_=!1){const E="signIn",x=yield vc(w,E,g),O=yield Ii._fromIdTokenResponse(w,E,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function La(w,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(w,g){return vu(vt(w),g)})).apply(this,arguments)}function Nt(w,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w);return yield Ui(!1,_,g.providerId),El(_,g)})).apply(this,arguments)}function zp(w,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,p.Z)(function*(w,g){return yu((0,$.m9)(w),g)})).apply(this,arguments)}function wc(w,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(w,g){return On(w,"POST","/v1/accounts:signInWithCustomToken",zt(w,g))})).apply(this,arguments)}function io(w,g){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(w,g){const _=vt(w),E=yield wc(_,{token:g,returnSecureToken:!0}),x=yield Ii._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Wo{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Me._fromServerResponse(g,_):Ze(g,"internal-error")}}class Me extends Wo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Me(_)}}function Kt(w,g,_){var E;ie((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function wh(w,g,_){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&Kt(E,x,_),yield yh(E,x)})).apply(this,arguments)}function sr(w,g,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(w,g,_){yield ii((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Cl(w,g){return Br.apply(this,arguments)}function Br(){return(Br=(0,p.Z)(function*(w,g){yield _h((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function Tl(w,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w),E=yield ii(_,{oobCode:g}),x=E.requestType;switch(ie(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(E.mfaInfo,_,"internal-error");default:ie(E.email,_,"internal-error")}let O=null;return E.mfaInfo&&(O=Wo._fromServerResponse(vt(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Ih(w,g){return ja.apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(w,g){const{data:_}=yield Tl((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function qp(w,g,_){return so.apply(this,arguments)}function so(){return(so=(0,p.Z)(function*(w,g,_){const E=vt(w),x=yield Zr(E,{returnSecureToken:!0,email:g,password:_}),O=yield Ii._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function or(w,g,_){return La((0,$.m9)(w),wl.credential(g,_))}function Vi(w,g,_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};ie(_.handleCodeInApp,E,"argument-error"),_&&Kt(E,x,_),yield si(E,x)})).apply(this,arguments)}function $a(w,g){return"EMAIL_SIGNIN"===Uo.parseLink(g)?.operation}function as(w,g,_){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x=wl.credentialWithLink(g,_||Be());return ie(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),La(E,x)})).apply(this,arguments)}function wu(w,g){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:createAuthUri",zt(w,g))})).apply(this,arguments)}function Eh(w,g){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,p.Z)(function*(w,g){const E={identifier:g,continueUri:je()?Be():"http://localhost"},{signinMethods:x}=yield wu((0,$.m9)(w),E);return x||[]})).apply(this,arguments)}function Iu(w,g){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,p.Z)(function*(w,g){const _=(0,$.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Kt(_.auth,x,g);const{email:O}=yield is(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function Eu(w,g,_){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Kt(E.auth,O,_);const{email:te}=yield pu(E.auth,O);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function Cc(w,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(w,g){return Vt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ch(w,g){return za.apply(this,arguments)}function za(){return(za=(0,p.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,$.m9)(w),O={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield xt(E,Cc(E.auth,O));E.displayName=te.displayName||null,E.photoURL=te.photoUrl||null;const xe=E.providerData.find(({providerId:nt})=>"password"===nt);xe&&(xe.displayName=E.displayName,xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(te)})).apply(this,arguments)}function Th(w,g){return Ms((0,$.m9)(w),g,null)}function Tc(w,g){return Ms((0,$.m9)(w),null,g)}function Ms(w,g,_){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(w,g,_){const{auth:E}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const te=yield xt(w,fu(E,O));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Nn{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class ls extends Nn{constructor(g,_,E,x){super(g,_,E),this.username=x}}class kn extends Nn{constructor(g,_){super(g,"facebook.com",_)}}class Dc extends ls{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Cu extends Nn{constructor(g,_){super(g,"google.com",_)}}class bh extends ls{constructor(g,_,E){super(g,"twitter.com",_,E)}}function Tu(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function bc(w){var g,_;if(!w)return null;const{providerId:E}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const te=null===(_=null===(g=mt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new Nn(O,"anonymous"!==te&&"custom"!==te?te:null)}if(!E)return null;switch(E){case"facebook.com":return new kn(O,x);case"github.com":return new Dc(O,x);case"google.com":return new Cu(O,x);case"twitter.com":return new bh(O,x,w.screenName||null);case"custom":case"anonymous":return new Nn(O,null);default:return new Nn(O,E,x)}}(_)}class ui{constructor(g,_,E){this.type=g,this.credential=_,this.auth=E}static _fromIdtoken(g,_){return new ui("enroll",g,_)}static _fromMfaPendingCredential(g){return new ui("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ui._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return ui._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Su{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=vt(g),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(xe=>Wo._fromServerResponse(E,xe));ie(x.mfaPendingCredential,E,"internal-error");const te=ui._fromMfaPendingCredential(x.mfaPendingCredential);return new Su(te,O,function(){var xe=(0,p.Z)(function*(nt){const Et=yield nt._process(E,te);delete x.mfaInfo,delete x.mfaPendingCredential;const Zt=Object.assign(Object.assign({},x),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(_.operationType){case"signIn":const fn=yield Ii._fromIdTokenResponse(E,_.operationType,Zt);return yield E._updateCurrentUser(fn.user),fn;case"reauthenticate":return ie(_.user,E,"internal-error"),Ii._forOperation(_.user,_.operationType,Zt);default:Ze(E,"internal-error")}});return function(nt){return xe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,p.Z)(function*(){return _.signInResolver(g)})()}}function xc(w,g){var _;const E=(0,$.m9)(w),x=g;return ie(g.customData.operationType,E,"argument-error"),ie(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Su._fromError(E,x)}function $n(w,g){return Vt(w,"POST","/v2/accounts/mfaEnrollment:start",zt(w,g))}class Al{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Wo._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Al(g)}getSession(){var g=this;return(0,p.Z)(function*(){return ui._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var E=this;return(0,p.Z)(function*(){const x=g,O=yield E.getSession(),te=yield xt(E.user,x._process(E.user.auth,O,_));return yield E.user._updateTokensIfNecessary(te),E.user.reload()})()}unenroll(g){var _=this;return(0,p.Z)(function*(){var E;const x="string"==typeof g?g:g.uid,O=yield _.user.getIdToken(),te=yield xt(_.user,function Sl(w,g){return Vt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(w,g))}(_.user.auth,{idToken:O,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:xe})=>xe!==x),yield _.user._updateTokensIfNecessary(te);try{yield _.user.reload()}catch(xe){if("auth/user-token-expired"!==(null===(E=xe)||void 0===E?void 0:E.code))throw xe}})()}}const Dh=new WeakMap;function xl(w){const g=(0,$.m9)(w);return Dh.has(g)||Dh.set(g,Al._fromUser(g)),Dh.get(g)}const us="__sak";class qa{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(us,"1"),this.storage.removeItem(us),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ar=(()=>{class w extends qa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Au(){const w=(0,$.z$)();return B(w)||Ue(w)}()&&function ns(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),O=this.localCache[E];x!==O&&_(E,O,x)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((xe,nt,Et)=>{this.notifyListeners(xe,Et)});const x=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(_.newValue!==xe)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!E)return}const O=()=>{const xe=this.storage.getItem(x);!E&&this.localCache[x]===xe||this.notifyListeners(x,xe)},te=this.storage.getItem(x);!function Ot(){return(0,$.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var x=()=>super._set,O=this;return(0,p.Z)(function*(){yield x().call(O,_,E),O.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,x=this;return(0,p.Z)(function*(){const O=yield E().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var E=()=>super._remove,x=this;return(0,p.Z)(function*(){yield E().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),ks=(()=>{class w extends qa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let Za=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(O=>O.isListeningto(_));if(E)return E;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,p.Z)(function*(){const x=_,{eventId:O,eventType:te,data:xe}=x.data,nt=E.handlersMap[te];if(!nt?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:te});const Et=Array.from(nt).map(function(){var fn=(0,p.Z)(function*(jr){return jr(x.origin,xe)});return function(jr){return fn.apply(this,arguments)}}()),Zt=yield function xu(w){return Promise.all(w.map(function(){var g=(0,p.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(Et);x.ports[0].postMessage({status:"done",eventId:O,eventType:te,response:Zt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Xo(w="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return w+_}class xh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var x=this;return(0,p.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let te,xe;return new Promise((nt,Et)=>{const Zt=Xo("",20);O.port1.start();const fn=setTimeout(()=>{Et(new Error("unsupported_event"))},E);xe={messageChannel:O,onMessage(jr){const Wi=jr;if(Wi.data.eventId===Zt)switch(Wi.data.status){case"ack":clearTimeout(fn),te=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),nt(Wi.data.response);break;default:clearTimeout(fn),clearTimeout(te),Et(new Error("invalid_response"))}}},x.handlers.add(xe),O.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:g,eventId:Zt,data:_},[O.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function Wn(){return window}function Yr(){return typeof Wn().WorkerGlobalScope<"u"&&"function"==typeof Wn().importScripts}function cs(){return(cs=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ya="firebaseLocalStorageDb",Qa="firebaseLocalStorage",ea="fbase_key";class ta{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function na(w,g){return w.transaction([Qa],g?"readwrite":"readonly").objectStore(Qa)}function Pl(){const w=indexedDB.open(Ya,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Qa,{keyPath:ea})}catch(x){_(x)}}),w.addEventListener("success",(0,p.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Qa)?g(E):(E.close(),yield function Nc(){const w=indexedDB.deleteDatabase(Ya);return new ta(w).toPromise()}(),g(yield Pl()))}))})}function Ja(w,g,_){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,p.Z)(function*(w,g,_){const E=na(w,!0).put({[ea]:g,value:_});return new ta(E).toPromise()})).apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(w,g){const _=na(w,!1).get(g),E=yield new ta(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ml(w,g){const _=na(w,!0).delete(g);return new ta(_).toPromise()}const sa=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,p.Z)(function*(){return _.db||(_.db=yield Pl()),_.db})()}_withRetries(_){var E=this;return(0,p.Z)(function*(){let x=0;for(;;)try{const O=yield E._openDb();return yield _(O)}catch(O){if(x++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,p.Z)(function*(){return Yr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,p.Z)(function*(){_.receiver=Za._getInstance(function Rl(){return Yr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,p.Z)(function*(){var E,x;if(_.activeServiceWorker=yield function Mc(){return cs.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new xh(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ru(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Pl();return yield Ja(_,us,"1"),yield Ml(_,us),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var x=this;return(0,p.Z)(function*(){return x._withPendingWrite((0,p.Z)(function*(){return yield x._withRetries(O=>Ja(O,_,E)),x.localCache[_]=E,x.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,p.Z)(function*(){const x=yield E._withRetries(O=>function Rh(w,g){return ra.apply(this,arguments)}(O,_));return E.localCache[_]=x,x})()}_remove(_){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(x=>Ml(x,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,p.Z)(function*(){const E=yield _._withRetries(te=>{const xe=na(te,!1).getAll();return new ta(xe).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:te,value:xe}of E)O.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(xe)&&(_.notifyListeners(te,xe),x.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!O.has(te)&&(_.notifyListeners(te,null),x.push(te));return x})()}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ph(w,g){return Vt(w,"POST","/v2/accounts/mfaSignIn:start",zt(w,g))}function Nr(){return(Nr=(0,p.Z)(function*(w){return(yield Vt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lo(w){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=x=>{const O=Le("internal-error");O.customData=x,_(O)},E.type="text/javascript",E.charset="UTF-8",function aa(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function la(w){return`__${w}${Math.floor(1e6*Math.random())}`}const ji=1e12;class kc{constructor(g){this.auth=g,this.counter=ji,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new Dn(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||ji;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||ji))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,p.Z)(function*(){var E;return null===(E=_._widgets.get(g||ji))||void 0===E||E.execute(),""})()}}class Dn{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ie(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kp(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mh=la("rcb"),qI=new ze(3e4,6e4);class N_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Wn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return ie(function Nh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Wn().grecaptcha):new Promise((E,x)=>{const O=Wn().setTimeout(()=>{x(Le(g,"network-request-failed"))},qI.get());Wn()[Mh]=()=>{Wn().clearTimeout(O),delete Wn()[Mh];const xe=Wn().grecaptcha;if(!xe)return void x(Le(g,"internal-error"));const nt=xe.render;xe.render=(Et,Zt)=>{const fn=nt(Et,Zt);return this.counter++,fn},this.hostLanguage=_,E(xe)},lo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Mh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Wn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class KI{load(g){return(0,p.Z)(function*(){return new kc(g)})()}clearedOneInstance(){}}const kl="recaptcha",ZI={theme:"light",type:"image"};class k_{constructor(g,_=Object.assign({},ZI),E){this.parameters=_,this.type=kl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(E),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ie(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new KI:new N_,this.validateStartingState()}verify(){var g=this;return(0,p.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(O=>{const te=xe=>{!xe||(g.tokenChangeListeners.delete(te),O(xe))};g.tokenChangeListeners.add(te),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=Wn()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,p.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,p.Z)(function*(){ie(je()&&!Yr(),g.auth,"internal-error"),yield function _r(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Nl(w){return Nr.apply(this,arguments)}(g.auth);ie(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class an{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Fo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ds(w,g,_){return at.apply(this,arguments)}function at(){return(at=(0,p.Z)(function*(w,g,_){const E=vt(w),x=yield Tr(E,g,(0,$.m9)(_));return new an(x,O=>La(E,O))})).apply(this,arguments)}function Qr(w,g,_){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);yield Ui(!1,E,"phone");const x=yield Tr(E.auth,g,(0,$.m9)(_));return new an(x,O=>Nt(E,O))})).apply(this,arguments)}function hs(w,g,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w),x=yield Tr(E.auth,g,(0,$.m9)(_));return new an(x,O=>zp(E,O))})).apply(this,arguments)}function Tr(w,g,_){return co.apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(w,g,_){var E;const x=yield _.verify();try{let O;if(ie("string"==typeof x,w,"argument-error"),ie(_.type===kl,w,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const te=O.session;if("phoneNumber"in O)return ie("enroll"===te.type,w,"internal-error"),(yield $n(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ie("signin"===te.type,w,"internal-error");const xe=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return ie(xe,w,"missing-multi-factor-info"),(yield Ph(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield jp(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return te}}finally{_._reset()}})).apply(this,arguments)}function Oc(w,g){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,p.Z)(function*(w,g){yield El((0,$.m9)(w),g)})).apply(this,arguments)}let kh=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=vt(_)}verifyPhoneNumber(_,E){return Tr(this.auth,_,(0,$.m9)(E))}static credential(_,E){return Fo._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:x}=_;return E&&x?Fo._fromTokenResponse(E,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ca(w,g){return g?ee(g):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Nu extends qr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return no(g,this._buildIdpRequest())}_linkToIdToken(g,_){return no(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return no(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ho(w){return vu(w.auth,new Nu(w),w.bypassAuthState)}function st(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),yu(_,new Nu(w),w.bypassAuthState)}function Xa(w){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),El(_,new Nu(w),w.bypassAuthState)})).apply(this,arguments)}class ku{constructor(g,_,E,x,O=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,p.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(E,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:O,tenantId:te,error:xe,type:nt}=g;if(xe)return void _.reject(xe);const Et={auth:_.auth,requestUri:E,sessionId:x,tenantId:te||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(nt)(Et))}catch(Zt){_.reject(Zt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ho;case"linkViaPopup":case"linkViaRedirect":return Xa;case"reauthViaPopup":case"reauthViaRedirect":return st;default:Ze(this.auth,"internal-error")}}resolve(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ol=new ze(2e3,1e4);function Gn(w,g,_){return el.apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(w,g,_){const E=vt(w);Ce(w,g,Er);const x=ca(E,_);return new tl(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Ll(w,g,_){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ca(E.auth,_);return new tl(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function Oh(w,g,_){return da.apply(this,arguments)}function da(){return(da=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ca(E.auth,_);return new tl(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let tl=(()=>{class w extends ku{constructor(_,E,x,O,te){super(_,E,O,te),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,p.Z)(function*(){const E=yield _.execute();return ie(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,p.Z)(function*(){we(1===_.filter.length,"Popup operations only handle one event");const E=Xo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Ol.get())};_()}}return w.currentPopupAction=null,w})();const ci=new Map;class fo extends ku{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,p.Z)(function*(){let E=ci.get(_.auth._key());if(!E){try{const O=(yield function Ou(w,g){return Os.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(O)}catch(x){E=()=>Promise.reject(x)}ci.set(_.auth._key(),E)}return _.bypassAuthState||ci.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Os(){return(Os=(0,p.Z)(function*(w,g){const _=ps(g),E=po(w);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(_));return yield E._remove(_),x})).apply(this,arguments)}function Jr(w,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,p.Z)(function*(w,g){return po(w)._set(ps(g),"true")})).apply(this,arguments)}function Ls(){ci.clear()}function er(w,g){ci.set(w._key(),g)}function po(w){return ee(w._redirectPersistence)}function ps(w){return W("pendingRedirect",w.config.apiKey,w.name)}function zn(w,g,_){return function xn(w,g,_){return fa.apply(this,arguments)}(w,g,_)}function fa(){return(fa=(0,p.Z)(function*(w,g,_){const E=vt(w);Ce(w,g,Er);const x=ca(E,_);return yield Jr(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function T(w,g,_){return function D(w,g,_){return R.apply(this,arguments)}(w,g,_)}function R(){return(R=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ca(E.auth,_);yield Jr(x,E.auth);const O=yield Pt(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function j(w,g,_){return function X(w,g,_){return oe.apply(this,arguments)}(w,g,_)}function oe(){return(oe=(0,p.Z)(function*(w,g,_){const E=(0,$.m9)(w);Ce(E.auth,g,Er);const x=ca(E.auth,_);yield Ui(!1,E,g.providerId),yield Jr(x,E.auth);const O=yield Pt(E);return x._openRedirect(E.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Ae(w,g){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(w,g){return yield vt(w)._initializationPromise,ut(w,g,!1)})).apply(this,arguments)}function ut(w,g){return St.apply(this,arguments)}function St(){return(St=(0,p.Z)(function*(w,g,_=!1){const E=vt(w),x=ca(E,g),te=yield new fo(E,x,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield E._persistUserIfCurrent(te.user),yield E._setRedirectUser(null,g)),te})).apply(this,arguments)}function Pt(w){return yt.apply(this,arguments)}function yt(){return(yt=(0,p.Z)(function*(w){const g=Xo(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class yr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Lt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fs(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!Fs(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pa(g))}saveEventToCache(g){this.cachedEventUids.add(pa(g)),this.lastProcessedEventTime=Date.now()}}function pa(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Fs({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Ti(w){return gs.apply(this,arguments)}function gs(){return(gs=(0,p.Z)(function*(w,g={}){return Vt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const $i=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ga=/^https?/;function Xr(){return(Xr=(0,p.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Ti(w);for(const _ of g)try{if(O_(_))return}catch{}Ze(w,"unauthorized-domain")})).apply(this,arguments)}function O_(w){const g=Be(),{protocol:_,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===E}if(!ga.test(_))return!1;if($i.test(w))return E===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const Zp=new ze(3e4,6e4);function Lh(){const w=Wn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Kn=null;function mo(w){return Kn=Kn||function YI(w){return new Promise((g,_)=>{var E,x,O;function te(){Lh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Lh(),_(Le(w,"network-request-failed"))},timeout:Zp.get()})}if(null!==(x=null===(E=Wn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(O=Wn().gapi)||void 0===O||!O.load){const xe=la("iframefcb");return Wn()[xe]=()=>{gapi.load?te():_(Le(w,"network-request-failed"))},lo(`https://apis.google.com/js/api.js?onload=${xe}`).catch(nt=>_(nt))}te()}}).catch(g=>{throw Kn=null,g})}(w),Kn}const Fh=new ze(5e3,15e3),Uh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vh(w){const g=w.config;ie(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?cn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:k.SDK_VERSION},x=L_.get(w.config.apiHost);x&&(E.eid=x);const O=w._getFrameworks();return O.length&&(E.fw=O.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function Uc(){return Uc=(0,p.Z)(function*(w){const g=yield mo(w),_=Wn().gapi;return ie(_,w,"internal-error"),g.open({where:document.body,url:Vh(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uh,dontclear:!0},E=>new Promise(function(){var x=(0,p.Z)(function*(O,te){yield E.restyle({setHideOnLeave:!1});const xe=Le(w,"network-request-failed"),nt=Wn().setTimeout(()=>{te(xe)},Fh.get());function Et(){Wn().clearTimeout(nt),O(E)}E.ping(Et).then(Et,()=>{te(xe)})});return function(O,te){return x.apply(this,arguments)}}()))}),Uc.apply(this,arguments)}const Lu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fu{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fl(w,g,_,E,x,O){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:k.SDK_VERSION,eventId:x};if(g instanceof Er){g.setDefaultLanguage(w.languageCode),te.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,Et]of Object.entries(O||{}))te[nt]=Et}if(g instanceof Vo){const nt=g.getScopes().filter(Et=>""!==Et);nt.length>0&&(te.scopes=nt.join(","))}w.tenantId&&(te.tid=w.tenantId);const xe=te;for(const nt of Object.keys(xe))void 0===xe[nt]&&delete xe[nt];return`${function Xp({config:w}){return w.emulator?cn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(xe).slice(1)}`}const Ul="webStorageSupport",jh=class Uu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ks,this._completeRedirectFn=ut,this._overrideRedirectResult=er}_openPopup(g,_,E,x){var O=this;return(0,p.Z)(function*(){var te;we(null===(te=O.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const xe=Fl(g,_,E,Be(),x);return function Bc(w,g,_,E=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),te=Math.max((window.screen.availWidth-E)/2,0).toString();let xe="";const nt=Object.assign(Object.assign({},Lu),{width:E.toString(),height:x.toString(),top:O,left:te}),Et=(0,$.z$)().toLowerCase();_&&(xe=ne(Et)?"_blank":_),M(Et)&&(g=g||"http://localhost",nt.scrollbars="yes");const Zt=Object.entries(nt).reduce((jr,[Wi,Hc])=>`${jr}${Wi}=${Hc},`,"");if(function dn(w=(0,$.z$)()){var g;return Ue(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Et)&&"_self"!==xe)return function yo(w,g){const _=document.createElement("a");_.href=w,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",xe),new Fu(null);const fn=window.open(g||"",xe,Zt);ie(fn,w,"popup-blocked");try{fn.focus()}catch{}return new Fu(fn)}(g,xe,Xo())})()}_openRedirect(g,_,E,x){var O=this;return(0,p.Z)(function*(){return yield O._originValidation(g),function Pc(w){Wn().location.href=w}(Fl(g,_,E,Be(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(we(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,p.Z)(function*(){const E=yield function Qp(w){return Uc.apply(this,arguments)}(g),x=new yr(g);return E.register("authEvent",O=>(ie(O?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Ul,{type:Ul},x=>{var O;const te=null===(O=x?.[0])||void 0===O?void 0:O[Ul];void 0!==te&&_(!!te),Ze(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function go(w){return Xr.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return hn()||B()||Ue()}};class Hh extends class jc{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return ue("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Hh(g)}_finalizeEnroll(g,_,E){return function Dl(w,g){return Vt(w,"POST","/v2/accounts/mfaEnrollment:finalize",zt(w,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function oa(w,g){return Vt(w,"POST","/v2/accounts/mfaSignIn:finalize",zt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Us=(()=>{class w{constructor(){}static assertion(_){return Hh._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var vo="@firebase/auth",$h="0.20.11";class F_{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,p.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function XI(w){(0,k._registerComponent)(new me.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:O,authDomain:te}=E.options;return((xe,nt)=>{ie(O&&!O.includes(":"),"invalid-api-key",{appName:xe.name}),ie(!te?.includes(":"),"argument-error",{appName:xe.name});const Et={apiKey:O,authDomain:te,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(w)},Zt=new No(xe,nt,Et);return function ae(w,g){const _=g?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ee);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,g?.popupRedirectResolver)}(Zt,_),Zt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new me.wA("auth-internal",g=>{const _=vt(g.getProvider("auth").getImmediate());return new F_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(vo,$h,function JI(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(vo,$h,"esm2017")}("Browser")},2090:(pt,Re,F)=>{F.d(Re,{$s:()=>et,BH:()=>jt,DV:()=>jn,Dv:()=>Vr,G6:()=>Ce,GJ:()=>Li,L:()=>he,LL:()=>nn,Pz:()=>sn,Sg:()=>ze,UG:()=>Te,UI:()=>Fi,US:()=>me,Wj:()=>bt,Wl:()=>Ir,Yr:()=>Pe,ZB:()=>z,ZR:()=>Cn,aH:()=>gt,b$:()=>ge,cI:()=>Vt,dS:()=>kt,eu:()=>ie,g5:()=>k,gK:()=>Qn,gQ:()=>In,h$:()=>pe,hl:()=>Ge,hu:()=>$,jU:()=>tt,lb:()=>Mr,m9:()=>Xt,ne:()=>Tn,p$:()=>K,pd:()=>Zs,r3:()=>Ur,ru:()=>Ee,tV:()=>ve,uI:()=>Ne,ug:()=>zr,vZ:()=>Ye,w1:()=>Ze,w9:()=>Oi,xO:()=>wn,xb:()=>wi,z$:()=>He,zI:()=>ue,zd:()=>mr});const $=function(q,W){if(!q)throw k(W)},k=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},se=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):55296==(64512&M)&&H+1<q.length&&56320==(64512&q.charCodeAt(H+1))?(M=65536+((1023&M)<<10)+(1023&q.charCodeAt(++H)),W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let M=0;M<q.length;M+=3){const B=q[M],ne=M+1<q.length,Oe=ne?q[M+1]:0,rt=M+2<q.length,it=rt?q[M+2]:0;let Rt=(15&Oe)<<2|it>>6,dn=63&it;rt||(dn=64,ne||(Rt=64)),H.push(Y[B>>2],Y[(3&B)<<4|Oe>>4],Y[Rt],Y[dn])}return H.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(se(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let Y=0,H=0;for(;Y<q.length;){const M=q[Y++];if(M<128)W[H++]=String.fromCharCode(M);else if(M>191&&M<224){const B=q[Y++];W[H++]=String.fromCharCode((31&M)<<6|63&B)}else if(M>239&&M<365){const rt=((7&M)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;W[H++]=String.fromCharCode(55296+(rt>>10)),W[H++]=String.fromCharCode(56320+(1023&rt))}else{const B=q[Y++],ne=q[Y++];W[H++]=String.fromCharCode((15&M)<<12|(63&B)<<6|63&ne)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const Y=W?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let M=0;M<q.length;){const B=Y[q.charAt(M++)],Oe=M<q.length?Y[q.charAt(M)]:0;++M;const it=M<q.length?Y[q.charAt(M)]:64;++M;const Ue=M<q.length?Y[q.charAt(M)]:64;if(++M,null==B||null==Oe||null==it||null==Ue)throw Error();H.push(B<<2|Oe>>4),64!==it&&(H.push(Oe<<4&240|it>>2),64!==Ue&&H.push(it<<6&192|Ue))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},pe=function(q){const W=se(q);return me.encodeByteArray(W,!0)},he=function(q){return pe(q).replace(/\./g,"")},ve=function(q){try{return me.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function K(q){return z(void 0,q)}function z(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const Y in W)!W.hasOwnProperty(Y)||!J(Y)||(q[Y]=z(q[Y],W[Y]));return q}function J(q){return"__proto__"!==q}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function Ee(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const q=He();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Pe(){return!1}function Ce(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function ie(){return new Promise((q,W)=>{try{let Y=!0;const H="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(H);M.onsuccess=()=>{M.result.close(),Y||self.indexedDB.deleteDatabase(H),q(!0)},M.onupgradeneeded=()=>{Y=!1},M.onerror=()=>{var B;W((null===(B=M.error)||void 0===B?void 0:B.message)||"")}}catch(Y){W(Y)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ae=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&ve(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},gt=()=>{var q;return null===(q=ae())||void 0===q?void 0:q.config},sn=q=>{var W;return null===(W=ae())||void 0===W?void 0:W[`_${q}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Y)=>{this.resolve=W,this.reject=Y})}wrapCallback(W){return(Y,H)=>{Y?this.reject(Y):this.resolve(H),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Y):W(Y,H))}}}function ze(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=W||"demo-project",M=q.iat||0,B=q.sub||q.user_id;if(!B)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ne=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:M,exp:M+3600,auth_time:M,sub:B,user_id:B,firebase:{sign_in_provider:"custom",identities:{}}},q);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ne)),""].join(".")}class Cn extends Error{constructor(W,Y,H){super(Y),this.code=W,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nn.prototype.create)}}class nn{constructor(W,Y,H){this.service=W,this.serviceName=Y,this.errors=H}create(W,...Y){const H=Y[0]||{},M=`${this.service}/${W}`,B=this.errors[W],ne=B?function rn(q,W){return q.replace(zt,(Y,H)=>{const M=W[H];return null!=M?String(M):`<${H}?>`})}(B,H):"Error";return new Cn(M,`${this.serviceName}: ${ne} (${M}).`,H)}}const zt=/\{\$([^}]+)}/g;function Vt(q){return JSON.parse(q)}function Ir(q){return JSON.stringify(q)}const ki=function(q){let W={},Y={},H={},M="";try{const B=q.split(".");W=Vt(ve(B[0])||""),Y=Vt(ve(B[1])||""),M=B[2],H=Y.d||{},delete Y.d}catch{}return{header:W,claims:Y,data:H,signature:M}},Oi=function(q){const Y=ki(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Li=function(q){const W=ki(q).claims;return"object"==typeof W&&!0===W.admin};function Ur(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function jn(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function wi(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function Fi(q,W,Y){const H={};for(const M in q)Object.prototype.hasOwnProperty.call(q,M)&&(H[M]=W.call(Y,q[M],M,q));return H}function Ye(q,W){if(q===W)return!0;const Y=Object.keys(q),H=Object.keys(W);for(const M of Y){if(!H.includes(M))return!1;const B=q[M],ne=W[M];if(rr(B)&&rr(ne)){if(!Ye(B,ne))return!1}else if(B!==ne)return!1}for(const M of H)if(!Y.includes(M))return!1;return!0}function rr(q){return null!==q&&"object"==typeof q}function wn(q){const W=[];for(const[Y,H]of Object.entries(q))Array.isArray(H)?H.forEach(M=>{W.push(encodeURIComponent(Y)+"="+encodeURIComponent(M))}):W.push(encodeURIComponent(Y)+"="+encodeURIComponent(H));return W.length?"&"+W.join("&"):""}function mr(q){const W={};return q.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[M,B]=H.split("=");W[decodeURIComponent(M)]=decodeURIComponent(B)}}),W}function Zs(q){const W=q.indexOf("?");if(!W)return"";const Y=q.indexOf("#",W);return q.substring(W,Y>0?Y:void 0)}class In{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Y){Y||(Y=0);const H=this.W_;if("string"==typeof W)for(let Ue=0;Ue<16;Ue++)H[Ue]=W.charCodeAt(Y)<<24|W.charCodeAt(Y+1)<<16|W.charCodeAt(Y+2)<<8|W.charCodeAt(Y+3),Y+=4;else for(let Ue=0;Ue<16;Ue++)H[Ue]=W[Y]<<24|W[Y+1]<<16|W[Y+2]<<8|W[Y+3],Y+=4;for(let Ue=16;Ue<80;Ue++){const Rt=H[Ue-3]^H[Ue-8]^H[Ue-14]^H[Ue-16];H[Ue]=4294967295&(Rt<<1|Rt>>>31)}let it,Se,M=this.chain_[0],B=this.chain_[1],ne=this.chain_[2],Oe=this.chain_[3],rt=this.chain_[4];for(let Ue=0;Ue<80;Ue++){Ue<40?Ue<20?(it=Oe^B&(ne^Oe),Se=1518500249):(it=B^ne^Oe,Se=1859775393):Ue<60?(it=B&ne|Oe&(B|ne),Se=2400959708):(it=B^ne^Oe,Se=3395469782);const Rt=(M<<5|M>>>27)+it+rt+Se+H[Ue]&4294967295;rt=Oe,Oe=ne,ne=4294967295&(B<<30|B>>>2),B=M,M=Rt}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+B&4294967295,this.chain_[2]=this.chain_[2]+ne&4294967295,this.chain_[3]=this.chain_[3]+Oe&4294967295,this.chain_[4]=this.chain_[4]+rt&4294967295}update(W,Y){if(null==W)return;void 0===Y&&(Y=W.length);const H=Y-this.blockSize;let M=0;const B=this.buf_;let ne=this.inbuf_;for(;M<Y;){if(0===ne)for(;M<=H;)this.compress_(W,M),M+=this.blockSize;if("string"==typeof W){for(;M<Y;)if(B[ne]=W.charCodeAt(M),++ne,++M,ne===this.blockSize){this.compress_(B),ne=0;break}}else for(;M<Y;)if(B[ne]=W[M],++ne,++M,ne===this.blockSize){this.compress_(B),ne=0;break}}this.inbuf_=ne,this.total_+=Y}digest(){const W=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&Y,Y/=256;this.compress_(this.buf_);let H=0;for(let M=0;M<5;M++)for(let B=24;B>=0;B-=8)W[H]=this.chain_[M]>>B&255,++H;return W}}function Tn(q,W){const Y=new _n(q,W);return Y.subscribe.bind(Y)}class _n{constructor(W,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{W(this)}).catch(H=>{this.error(H)})}next(W){this.forEachObserver(Y=>{Y.next(W)})}error(W){this.forEachObserver(Y=>{Y.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Y,H){let M;if(void 0===W&&void 0===Y&&void 0===H)throw new Error("Missing Observer.");M=function _t(q,W){if("object"!=typeof q||null===q)return!1;for(const Y of W)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Y,complete:H},void 0===M.next&&(M.next=xt),void 0===M.error&&(M.error=xt),void 0===M.complete&&(M.complete=xt);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),B}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,W)}sendOne(W,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Y(this.observers[W])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xt(){}const Vr=function(q,W,Y,H){let M;if(H<W?M="at least "+W:H>Y&&(M=0===Y?"none":"no more than "+Y),M)throw new Error(q+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+M+".")};function Qn(q,W){return`${q} failed: ${W} argument `}function bt(q,W,Y,H){if((!H||Y)&&"function"!=typeof Y)throw new Error(Qn(q,W)+"must be a valid function.")}function Mr(q,W,Y,H){if((!H||Y)&&("object"!=typeof Y||null===Y))throw new Error(Qn(q,W)+"must be a valid context object.")}const kt=function(q){const W=[];let Y=0;for(let H=0;H<q.length;H++){let M=q.charCodeAt(H);if(M>=55296&&M<=56319){const B=M-55296;H++,$(H<q.length,"Surrogate pair missing trail surrogate."),M=65536+(B<<10)+(q.charCodeAt(H)-56320)}M<128?W[Y++]=M:M<2048?(W[Y++]=M>>6|192,W[Y++]=63&M|128):M<65536?(W[Y++]=M>>12|224,W[Y++]=M>>6&63|128,W[Y++]=63&M|128):(W[Y++]=M>>18|240,W[Y++]=M>>12&63|128,W[Y++]=M>>6&63|128,W[Y++]=63&M|128)}return W},zr=function(q){let W=0;for(let Y=0;Y<q.length;Y++){const H=q.charCodeAt(Y);H<128?W++:H<2048?W+=2:H>=55296&&H<=56319?(W+=4,Y++):W+=3}return W};function et(q,W=1e3,Y=2){const H=W*Math.pow(Y,q),M=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+M)}function Xt(q){return q&&q._delegate?q._delegate:q}},3453:(pt,Re,F)=>{var p=F(4650);let $=null;function k(){return $}const pe=new p.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ve(){return(0,p.LFG)(z)}()},providedIn:"platform"}),n})();const K=new p.OlP("Location Initialized");let z=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function He(){return new z((0,p.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Qe)},providedIn:"root"}),n})();const ge=new p.OlP("appBaseHref");let Qe=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+tt(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+tt(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(ge,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ze=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+tt(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+tt(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(ge,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Te(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Ne,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(p.LFG(Ee))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Pe(){return new Le((0,p.LFG)(Ee))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}let ln=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class eo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let As=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new eo(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,u),to(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{to(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function to(n,e){n.context.$implicit=e.item}let Mn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new yh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class yh{constructor(){this.$implicit=null,this.ngIf=null}}function ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Oo=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),u=-1===i.indexOf("-")?void 0:p.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,u):this._renderer.removeStyle(this._ngEl.nativeElement,i,u)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.aQg),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),xs=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:a,ngTemplateOutletInjector:u}=this;this._viewRef=r.createEmbeddedView(i,a,u?{injector:u}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[p.TTD]}),n})(),jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Ho(n){return"server"===n}let vc=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new vh((0,p.LFG)(pe),window)}),n})();class vh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Cr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ei(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ms extends class Tc extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){$||($=n)}(new Ms)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bc(){return Ns=Ns||document.querySelector("base"),Ns?Ns.getAttribute("href"):null}();return null==t?null:function ls(n){Nn=Nn||document.createElement("a"),Nn.setAttribute("href",n);const e=Nn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Nn,Ns=null;const kn=new p.OlP("TRANSITION_ID"),Cu=[{provide:p.ip1,useFactory:function Dc(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[kn,pe,p.zs3],multi:!0}];let Tu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const bu=new p.OlP("EventManagerPlugins");let Du=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(bu),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class bl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Qo=(()=>{class n extends Yo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Sc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Sc))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Sc(n){k().remove(n)}const Jo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ac=/%COMP%/g;function Sl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Sl(n,i,t):(i=i.replace(Ac,n),t.push(i))}return t}function Al(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new us(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Rc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new Sh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Sl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Du),p.LFG(Qo),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class us{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Jo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ka(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ka(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Jo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Jo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Al(r)):this.eventManager.addEventListener(e,t,Al(r))}}function Ka(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Rc extends us{constructor(e,t,r,i){super(e),this.component=r;const a=Sl(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function $n(n){return"_ngcontent-%COMP%".replace(Ac,n)}(i+"-"+r.id),this.hostAttr=function Dl(n){return"_nghost-%COMP%".replace(Ac,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Sh extends us{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Sl(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const d=document.createElement("style");d.textContent=a[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ar=(()=>{class n extends bl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ah=["alt","control","meta","shift"],ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Za=(()=>{class n extends bl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),u="code."),Ah.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),u+=v+".")}),u+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=u,m}static matchEventFullKeyCode(t,r){let i=ks[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ah.forEach(u=>{u!==i&&(0,xu[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ya=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Mc(){Ms.makeCurrent()},multi:!0},{provide:pe,useFactory:function Ru(){return(0,p.RDi)(document),document},deps:[]}]),oo=new p.OlP(""),Qa=[{provide:p.rWj,useClass:class bh{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const d=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(function(m){m.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],ea=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function cs(){return new p.qLn},deps:[]},{provide:bu,useClass:ar,multi:!0,deps:[pe,p.R0b,p.Lbi]},{provide:bu,useClass:Za,multi:!0,deps:[pe]},{provide:xl,useClass:xl,deps:[Du,Qo,p.AFp]},{provide:p.FYo,useExisting:xl},{provide:Yo,useExisting:Qo},{provide:Qo,useClass:Qo,deps:[pe]},{provide:Du,useClass:Du,deps:[bu,p.R0b]},{provide:class $o{},useClass:Tu,deps:[]},[]];let ta=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:kn,useExisting:p.AFp},Cu]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oo,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...ea,...Qa],imports:[jo,p.hGG]}),n})(),Bi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pe))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ja(){return new Bi((0,p.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var an=F(8996),ds=F(7669);function at(...n){const e=(0,ds.yG)(n);return(0,an.D)(n,e)}var Qr=F(7579);class Sn extends Qr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const uo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Tr=F(9751);const{isArray:co}=Array,{getPrototypeOf:Oc,prototype:Lc,keys:kh}=Object;var ho=F(4671),st=F(4004);const{isArray:Xa}=Array;var Gn=F(5403),el=F(9672);function Ll(...n){const e=(0,ds.yG)(n),t=(0,ds.jO)(n),{args:r,keys:i}=function ca(n){if(1===n.length){const e=n[0];if(co(e))return{args:e,keys:null};if(function Nu(n){return n&&"object"==typeof n&&Oc(n)===Lc}(e)){const t=kh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,an.D)([],e);const a=new Tr.y(function Fc(n,e,t=ho.y){return r=>{Oh(e,()=>{const{length:i}=n,a=new Array(i);let u=i,d=i;for(let m=0;m<i;m++)Oh(e,()=>{const v=(0,an.D)(n[m],e);let b=!1;v.subscribe((0,Gn.x)(r,S=>{a[m]=S,b||(b=!0,d--),d||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>function Ol(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,u):ho.y));return t?a.pipe(function ku(n){return(0,st.U)(e=>function Hi(n,e){return Xa(e)?n(...e):n(e)}(n,e))}(t)):a}function Oh(n,e,t){n?(0,el.f)(t,n,e):e()}var da=F(8189);function ha(...n){return function tl(){return(0,da.J)(1)}()((0,an.D)(n,(0,ds.yG)(n)))}var ci=F(8421);function fo(n){return new Tr.y(e=>{(0,ci.Xf)(n()).subscribe(e)})}var Ou=F(9635),Os=F(576);function Jr(n,e){const t=(0,Os.m)(n)?n:()=>n,r=i=>i.error(t());return new Tr.y(e?i=>e.schedule(r,0,i):r)}var fs=F(515),Ls=F(727),er=F(4482);function po(){return(0,er.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ps extends Tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,er.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ls.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ls.w0.EMPTY)}return e}refCount(){return po()(this)}}function zn(n,e){return(0,er.e)((t,r)=>{let i=null,a=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,Gn.x)(r,m=>{i?.unsubscribe();let v=0;const b=a++;(0,ci.Xf)(n(m,b)).subscribe(i=(0,Gn.x)(r,S=>r.next(e?e(m,S,b,v++):S),()=>{i=null,d()}))},()=>{u=!0,d()}))})}function xn(n){return n<=0?()=>fs.E:(0,er.e)((e,t)=>{let r=0;e.subscribe((0,Gn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fa(...n){const e=(0,ds.yG)(n);return(0,er.e)((t,r)=>{(e?ha(n,t,e):ha(n,t)).subscribe(r)})}function T(n,e){return(0,er.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var D=F(5577);function R(n){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function j(n=X){return(0,er.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function X(){return new uo}function oe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?T((i,a)=>n(i,a,r)):ho.y,xn(1),t?R(e):j(()=>new uo))}function Ae(n,e){return(0,Os.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Ve=F(8505);function ut(n){return(0,er.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,u=>{a=(0,ci.Xf)(n(u,ut(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function St(n,e,t,r,i){return(a,u)=>{let d=t,m=e,v=0;a.subscribe((0,Gn.x)(u,b=>{const S=v++;m=d?n(m,b,S):(d=!0,b),r&&u.next(m)},i&&(()=>{d&&u.next(m),u.complete()})))}}function Pt(n,e){return(0,er.e)(St(n,e,arguments.length>=2,!0))}function yt(n){return n<=0?()=>fs.E:(0,er.e)((e,t)=>{let r=[];e.subscribe((0,Gn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?T((i,a)=>n(i,a,r)):ho.y,yt(1),t?R(e):j(()=>new uo))}function Fs(n){return(0,er.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",Ti=Symbol("RouteTitle");class gs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $i(n){return new gs(n)}function ga(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],d=n[a];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!O_(n[i],e[i]))return!1;return!0}function O_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Zp(n){return Array.prototype.concat.apply([],n)}function Lh(n){return n.length>0?n[n.length-1]:null}function Kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function mo(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,an.D)(Promise.resolve(n)):at(n)}const QI={exact:function Qp(n,e,t){if(!yo(n.segments,e.segments)||!_o(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Qp(n.children[r],e.children[r],t))return!1;return!0},subset:Lu},Uh={exact:function Vh(n,e){return Xr(n,e)},subset:function Uc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>O_(n[t],e[t]))},ignored:()=>!0};function L_(n,e,t){return QI[t.paths](n.root,e.root,t.matrixParams)&&Uh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lu(n,e,t){return Vc(n,e,e.segments,t)}function Vc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!yo(i,t)||e.hasChildren()||!_o(i,t,r))}if(n.segments.length===t.length){if(!yo(n.segments,t)||!_o(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Lu(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(yo(n.segments,i)&&_o(n.segments,i,r)&&n.children[Lt])&&Vc(n.children[Lt],e,a,r)}}function _o(n,e,t){return e.every((r,i)=>Uh[t](n[i].parameters,r.parameters))}class nl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$i(this.queryParams)),this._queryParamMap}toString(){return Xp.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ul(this)}}class Fu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$i(this.parameters)),this._parameterMap}toString(){return F_(this)}}function yo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new Fl},providedIn:"root"}),n})();class Fl{parse(e){const t=new g(e);return new nl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Uu(e.root,!0)}`,r=function XI(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${jc(t)}=${jc(i)}`).join("&"):`${jc(t)}=${jc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Hh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Xp=new Fl;function Ul(n){return n.segments.map(e=>F_(e)).join("/")}function Uu(n,e){if(!n.hasChildren())return Ul(n);if(e){const t=n.children[Lt]?Uu(n.children[Lt],!1):"",r=[];return Kn(n.children,(i,a)=>{a!==Lt&&r.push(`${a}:${Uu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Jp(n,e){let t=[];return Kn(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),Kn(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[Uu(n.children[Lt],!1)]:[`${i}:${Uu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Ul(n)}/${t[0]}`:`${Ul(n)}/(${t.join("//")})`}}function jh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jc(n){return jh(n).replace(/%3B/gi,";")}function Us(n){return jh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vo(n){return decodeURIComponent(n)}function $h(n){return vo(n.replace(/\+/g,"%20"))}function F_(n){return`${Us(n.path)}${function JI(n){return Object.keys(n).map(e=>`;${Us(e)}=${Us(n[e])}`).join("")}(n.parameters)}`}const e0=/^[^\/()?;=#]+/;function Wh(n){const e=n.match(e0);return e?e[0]:""}const Gh=/^[^=?&#]+/,t0=/^[^&#]+/;class g{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Qt(e,t)),r}parseSegment(){const e=Wh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new Fu(vo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Wh(this.remaining);i&&(r=i,this.capture(r))}e[vo(t)]=vo(r)}parseQueryParam(e){const t=function U_(n){const e=n.match(Gh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function w(n){const e=n.match(t0);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=$h(t),a=$h(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Wh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Lt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Lt]:new Qt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function _(n){return n.segments.length>0?new Qt([],{[Lt]:n}):n}function E(n){const e={};for(const r of Object.keys(n.children)){const a=E(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function x(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function O(n){return n instanceof nl}function Zt(n,e,t,r,i){if(0===t.length)return Wi(e.root,e.root,e.root,r,i);const a=function Wc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new $c(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return Kn(a.outlets,(m,v)=>{d[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((d,m)=>{0==m&&"."===d||(0==m&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new $c(t,e,r)}(t);return a.toRoot()?Wi(e.root,e.root,new Qt([],{}),r,i):function u(m){const v=function zh(n,e,t,r){if(n.isAbsolute)return new rl(e.root,!0,0);if(-1===r)return new rl(t,t===e.root,0);return function Gc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new rl(r,!1,i-a)}(t,r+(fn(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),b=v.processChildren?ma(v.segmentGroup,v.index,a.commands):Bu(v.segmentGroup,v.index,a.commands);return Wi(e.root,v.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function fn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jr(n){return"object"==typeof n&&null!=n&&n.outlets}function Wi(n,e,t,r,i){let u,a={};r&&Kn(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),u=n===e?t:Hc(n,e,t);const d=_(E(u));return new nl(d,a,i)}function Hc(n,e,t){const r={};return Kn(n.children,(i,a)=>{r[a]=i===e?t:Hc(i,e,t)}),new Qt(n.segments,r)}class $c{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fn(r[0]))throw new p.vHH(4003,!1);const i=r.find(jr);if(i&&i!==Lh(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Bu(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return ma(n,e,t);const r=function V_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],d=t[r];if(jr(d))break;const m=`${d}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!ng(m,v,u))return a;r+=2}else{if(!ng(m,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Qt(n.segments.slice(0,r.pathIndex),{});return a.children[Lt]=new Qt(n.segments.slice(r.pathIndex),n.children),ma(a,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?Fn(n,e,t):r.match?ma(n,0,i):Fn(n,e,t)}function ma(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function Vu(n){return jr(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return Kn(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=Bu(n.children[u],e,a))}),Kn(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Qt(n.segments,i)}}function Fn(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(jr(a)){const m=tg(a.outlets);return new Qt(r,m)}if(0===i&&fn(t[0])){r.push(new Fu(n.segments[e].path,n0(t[0]))),i++;continue}const u=jr(a)?a.outlets[Lt]:`${a}`,d=i<t.length-1?t[i+1]:null;u&&d&&fn(d)?(r.push(new Fu(u,n0(d))),i+=2):(r.push(new Fu(u,{})),i++)}return new Qt(r,{})}function tg(n){const e={};return Kn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Fn(new Qt([],{}),0,t))}),e}function n0(n){const e={};return Kn(n,(t,r)=>e[r]=`${t}`),e}function ng(n,e,t){return n==t.path&&Xr(e,t.parameters)}class _a{constructor(e,t){this.id=e,this.url=t}}class B_ extends _a{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ju extends _a{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rg extends _a{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class r0 extends _a{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _D extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CM extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TM extends _a{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qh extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j_ extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class o0{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class a0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ig{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class c0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Kh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Kh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=sg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sg(e,this._root).map(t=>t.value)}}function Kh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Kh(n,t);if(r)return r}return null}function sg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=sg(n,t);if(r.length)return r.unshift(e),r}return[]}class ya{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class d0 extends c0{constructor(e,t){super(e),this.snapshot=t,Zh(this,e)}toString(){return this.snapshot.toString()}}function og(n,e){const t=function ag(n,e){const u=new va([],{},{},"",{},Lt,e,null,n.root,-1,{});return new H_("",new ya(u,[]))}(n,e),r=new Sn([new Fu("",{})]),i=new Sn({}),a=new Sn({}),u=new Sn({}),d=new Sn(""),m=new Vl(r,i,u,d,a,Lt,e,t.root);return m.snapshot=t.root,new d0(new ya(m,[]),t)}class Vl{constructor(e,t,r,i,a,u,d,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this.title=this.data?.pipe((0,st.U)(v=>v[Ti]))??at(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>$i(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>$i(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function ug(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class va{constructor(e,t,r,i,a,u,d,m,v,b,S,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this.title=this.data?.[Ti],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=b,this._correctedLastPathIndex=P??b,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$i(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$i(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class H_ extends c0{constructor(e,t){super(t),this.url=e,Zh(this,t)}toString(){return h0(this._root)}}function Zh(n,e){e.value._routerState=n,e.children.forEach(t=>Zh(n,t))}function h0(n){const e=n.children.length>0?` { ${n.children.map(h0).join(", ")} } `:"";return`${n.value}${e}`}function $_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Xr(e.params,t.params)||n.params.next(t.params),function go(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Xr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function cg(n,e){const t=Xr(n.params,e.params)&&function Bc(n,e){return yo(n,e)&&n.every((t,r)=>Xr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||cg(n.parent,e.parent))}function Yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function vD(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yh(n,r,i);return Yh(n,r)})}(n,e,t);return new ya(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>Yh(n,d)),u}}const r=function wD(n){return new Vl(new Sn(n.url),new Sn(n.params),new Sn(n.queryParams),new Sn(n.fragment),new Sn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Yh(n,a));return new ya(r,i)}}const W_="ngNavigationCancelingError";function dg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=O(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=f0(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function f0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[W_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function G_(n){return p0(n)&&O(n.url)}function p0(n){return n&&n[W_]}class g0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hg,this.attachRef=null}}let hg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new g0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fg=!1;let Hu=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=i||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,fg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,fg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,fg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,fg);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,m=new ID(t,d,i.injector);if(r&&function qc(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(u);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(hg),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class ID{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Vl?this.route:e===hg?this.childContexts:this.parent.get(e,t)}}let $u=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[Hu],encapsulation:2}),n})();function m0(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function K_(n){const e=n.children&&n.children.map(K_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=$u),t}function Bs(n){return n.outlet||Lt}function pg(n,e){const t=n.filter(r=>Bs(r)===e);return t.push(...n.filter(r=>Bs(r)!==e)),t}function gg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Z_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vs(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Kn(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Vs(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Vs(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vs(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new u0(a.value.snapshot))}),e.children.length&&this.forwardEvent(new yD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if($_(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),$_(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=gg(i.snapshot),m=d?.get(p._Vd)??null;u.attachRef=null,u.route=i,u.resolver=m,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class CD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Y_{constructor(e,t){this.component=e,this.route=t}}function xM(n,e,t){const r=n._root;return Jh(r,e?e._root:null,t,[r.value])}function Qh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function Jh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Vs(e);return n.children.forEach(u=>{(function v0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function Q_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yo(n.url,e.url)||!Xr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cg(n,e)||!Xr(n.queryParams,e.queryParams);default:return!cg(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new CD(r)):(a.data=u.data,a._resolvedData=u._resolvedData),Jh(n,e,a.component?d?d.children:null:t,r,i),m&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Y_(d.outlet.component,u))}else u&&Kc(e,d,i),i.canActivateChecks.push(new CD(r)),Jh(n,null,a.component?d?d.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Kn(a,(u,d)=>Kc(u,t.getContext(d),i)),i}function Kc(n,e,t){const r=Vs(n),i=n.value;Kn(r,(a,u)=>{Kc(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Y_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Zc(n){return"function"==typeof n}function mg(n){return n instanceof uo||"EmptyError"===n?.name}const _g=Symbol("INITIAL_VALUE");function Yc(){return zn(n=>Ll(n.map(e=>e.pipe(xn(1),fa(_g)))).pipe((0,st.U)(e=>{for(const t of e)if(!0!==t){if(t===_g)return _g;if(!1===t||t instanceof nl)return t}return!0}),T(e=>e!==_g),xn(1)))}function di(n){return(0,Ou.z)((0,Ve.b)(e=>{if(O(e))throw dg(0,e)}),(0,st.U)(e=>!0===e))}const yg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vg(n,e,t,r,i){const a=Hr(n,e,t);return a.matched?function ty(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?at(i.map(u=>{const d=Qh(u,n);return mo(function bD(n){return n&&Zc(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(Yc(),di()):at(!0)}(r=m0(e,r),e,t).pipe((0,st.U)(u=>!0===u?a:{...yg})):at(a)}function Hr(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...yg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ga)(t,n,e);if(!i)return{...yg};const a={};Kn(i.posParams,(d,m)=>{a[m]=d.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Bl(n,e,t,r,i="corrected"){if(t.length>0&&function OD(n,e,t){return t.some(r=>wg(n,e,r)&&Bs(r)!==Lt)}(n,t,r)){const u=new Qt(e,function kD(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Bs(a)!==Lt){const u=new Qt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Bs(a)]=u}return i}(n,e,r,new Qt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function C0(n,e,t){return t.some(r=>wg(n,e,r))}(n,t,r)){const u=new Qt(n.segments,function E0(n,e,t,r,i,a){const u={};for(const d of r)if(wg(n,t,d)&&!i[Bs(d)]){const m=new Qt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[Bs(d)]=m}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Qt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function wg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ny(n,e,t,r){return!!(Bs(n)===r||r!==Lt&&wg(e,t,n))&&("**"===n.path||Hr(e,n,t).matched)}function T0(n,e,t){return 0===e.length&&!n.children[t]}const ef=!1;class Ig{constructor(e){this.segmentGroup=e||null}}class b0{constructor(e){this.urlTree=e}}function tf(n){return Jr(new Ig(n))}function D0(n){return Jr(new b0(n))}class FD{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Bl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,st.U)(a=>this.createUrlTree(E(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ut(a=>{if(a instanceof b0)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Ig?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,st.U)(i=>this.createUrlTree(E(i),e.queryParams,e.fragment))).pipe(ut(i=>{throw i instanceof Ig?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,ef)}createUrlTree(e,t,r){const i=_(e);return new nl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(a=>new Qt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,an.D)(i).pipe(Ae(a=>{const u=r.children[a],d=pg(t,a);return this.expandSegmentGroup(e,d,u,a).pipe((0,st.U)(m=>({segment:m,outlet:a})))}),Pt((a,u)=>(a[u.outlet]=u.segment,a),{}),qn())}expandSegment(e,t,r,i,a,u){return(0,an.D)(r).pipe(Ae(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,u).pipe(ut(v=>{if(v instanceof Ig)return at(null);throw v}))),oe(d=>!!d),ut((d,m)=>{if(mg(d))return T0(t,i,a)?at(new Qt([],{})):tf(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,u,d){return ny(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):tf(t):tf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?D0(a):this.lineralizeSegments(r,a).pipe((0,D.z)(u=>{const d=new Qt(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:d,consumedSegments:m,remainingSegments:v,positionalParamSegments:b}=Hr(t,i,a);if(!d)return tf(t);const S=this.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?D0(S):this.lineralizeSegments(i,S).pipe((0,D.z)(P=>this.expandSegment(e,t,r,P.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=m0(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,st.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Qt(i,{})))):at(new Qt(i,{}))):vg(t,r,i,e).pipe(zn(({matched:u,consumedSegments:d,remainingSegments:m})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,D.z)(b=>{const S=b.injector??e,P=b.routes,{segmentGroup:V,slicedSegments:G}=Bl(t,d,m,P),ce=new Qt(V.segments,V.children);if(0===G.length&&ce.hasChildren())return this.expandChildren(S,P,ce).pipe((0,st.U)(lt=>new Qt(d,lt)));if(0===P.length&&0===G.length)return at(new Qt(d,{}));const ye=Bs(r)===a;return this.expandSegment(S,ce,P,G,ye?Lt:a,!0).pipe((0,st.U)(dt=>new Qt(d.concat(dt.segments),dt.children)))})):tf(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function ND(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?at(!0):at(i.map(u=>{const d=Qh(u,n);return mo(function J_(n){return n&&Zc(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(Yc(),di())}(e,t,r).pipe((0,D.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ve.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Qc(n){return Jr(f0(ef,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Lt])return Jr(new p.vHH(4e3,ef));i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new nl(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Kn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Kn(t.children,(d,m)=>{u[m]=this.createSegmentGroup(e,d,r,i)}),new Qt(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,ef);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class MM{}class wa{constructor(e,t,r,i,a,u,d,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d,this.urlSerializer=m}recognize(){const e=Bl(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,st.U)(t=>{if(null===t)return null;const r=new va([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ya(r,t),a=new H_(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=lg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,an.D)(Object.keys(r.children)).pipe(Ae(i=>{const a=r.children[i],u=pg(t,i);return this.processSegmentGroup(e,u,a,i)}),Pt((i,a)=>i&&a?(i.push(...a),i):null),function yr(n,e=!1){return(0,er.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,a=>{const u=n(a,i++);(u||e)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),R(null),qn(),(0,st.U)(i=>{if(null===i)return null;const a=oy(i);return function iy(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,an.D)(t).pipe(Ae(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,a)),oe(u=>!!u),ut(u=>{if(mg(u))return T0(r,i,a)?at([]):at(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!ny(t,r,i,a))return at(null);let u;if("**"===t.path){const d=i.length>0?Lh(i).parameters:{},m=A0(r)+i.length;u=at({snapshot:new va(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Eg(t),Bs(t),t.component??t._loadedComponent??null,t,Jc(r),m,Cg(t),m),consumedSegments:[],remainingSegments:[]})}else u=vg(r,t,i,e).pipe((0,st.U)(({matched:d,consumedSegments:m,remainingSegments:v,parameters:b})=>{if(!d)return null;const S=A0(r)+m.length;return{snapshot:new va(m,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Eg(t),Bs(t),t.component??t._loadedComponent??null,t,Jc(r),S,Cg(t),S),consumedSegments:m,remainingSegments:v}}));return u.pipe(zn(d=>{if(null===d)return at(null);const{snapshot:m,consumedSegments:v,remainingSegments:b}=d;e=t._injector??e;const S=t._loadedInjector??e,P=function sy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:G}=Bl(r,v,b,P.filter(ye=>void 0===ye.redirectTo),this.relativeLinkResolution);if(0===G.length&&V.hasChildren())return this.processChildren(S,P,V).pipe((0,st.U)(ye=>null===ye?null:[new ya(m,ye)]));if(0===P.length&&0===G.length)return at([new ya(m,[])]);const ce=Bs(t)===a;return this.processSegment(S,P,V,G,ce?Lt:a).pipe((0,st.U)(ye=>null===ye?null:[new ya(m,ye)]))}))}}function VD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function oy(n){const e=[],t=new Set;for(const r of n){if(!VD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=oy(r.children);e.push(new ya(r.value,i))}return e.filter(r=>!t.has(r))}function Jc(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function A0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Eg(n){return n.data||{}}function Cg(n){return n.resolve||{}}function Tg(n){return"string"==typeof n.title||null===n.title}function ly(n){return zn(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,st.U)(()=>e)):at(e)})}let M0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[Ti]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(N0)},providedIn:"root"}),n})(),N0=(()=>{class n extends M0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Bi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class HD{}class k0 extends class $D{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const nf=new p.OlP("",{providedIn:"root",factory:()=>({})}),cy=new p.OlP("ROUTES");let dy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=mo(t.loadComponent()).pipe((0,Ve.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Fs(()=>{this.componentLoaders.delete(t)})),i=new ps(r,()=>new Qr.x).pipe(po());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,st.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,b=!1;Array.isArray(d)?v=d:(m=d.create(t).injector,v=Zp(m.get(cy,[],p.XFs.Self|p.XFs.Optional)));return{routes:v.map(K_),injector:m}}),Fs(()=>{this.childrenLoaders.delete(r)})),u=new ps(a,()=>new Qr.x).pipe(po());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return mo(t()).pipe((0,D.z)(r=>r instanceof p.YKP||Array.isArray(r)?at(r):(0,an.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class O0{}class L0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function F0(n){throw n}function U0(n,e,t){return e.parse("/")}const WD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function V0(){const n=(0,p.f3M)(Bh),e=(0,p.f3M)(hg),t=(0,p.f3M)(Le),r=(0,p.f3M)(p.zs3),i=(0,p.f3M)(p.Sil),a=(0,p.f3M)(cy,{optional:!0})??[],u=(0,p.f3M)(nf,{optional:!0})??{},d=(0,p.f3M)(N0),m=(0,p.f3M)(M0,{optional:!0}),v=(0,p.f3M)(O0,{optional:!0}),b=(0,p.f3M)(HD,{optional:!0}),S=new br(null,n,e,t,r,i,Zp(a));return v&&(S.urlHandlingStrategy=v),b&&(S.routeReuseStrategy=b),S.titleStrategy=m??d,function Dg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,S),S}let br=(()=>{class n{constructor(t,r,i,a,u,d,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qr.x,this.errorHandler=F0,this.malformedUriErrorHandler=U0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new L0,this.routeReuseStrategy=new k0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(dy),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new o0(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new s0(P)),this.ngModule=u.get(p.h0i),this.console=u.get(p.c2e);const S=u.get(p.R0b);this.isNgZoneEnabled=S instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function Yp(){return new nl(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=og(this.currentUrlTree,this.rootComponentType),this.transitions=new Sn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(T(i=>0!==i.id),(0,st.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),zn(i=>{let a=!1,u=!1;return at(i).pipe((0,Ve.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zn(d=>{const m=this.browserUrlTree.toString(),v=!this.navigated||d.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return hy(d.source)&&(this.browserUrlTree=d.extractedUrl),at(d).pipe(zn(S=>{const P=this.transitions.getValue();return r.next(new B_(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?fs.E:Promise.resolve(S)}),function UD(n,e,t,r){return zn(i=>function il(n,e,t,r,i){return new FD(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,st.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ve.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function R0(n,e,t,r,i,a){return(0,D.z)(u=>function NM(n,e,t,r,i,a,u="emptyOnly",d="legacy"){return new wa(n,e,t,r,i,u,d,a).recognize().pipe(zn(m=>null===m?function S0(n){return new Tr.y(e=>e.error(n))}(new MM):at(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,a).pipe((0,st.U)(d=>({...u,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ve.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new _D(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:V,source:G,restoredState:ce,extras:ye}=d,ot=new B_(P,this.serializeUrl(V),G,ce);r.next(ot);const dt=og(V,this.rootComponentType).snapshot;return at(i={...d,targetSnapshot:dt,urlAfterRedirects:V,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),fs.E}),(0,Ve.b)(d=>{const m=new CM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(m)}),(0,st.U)(d=>i={...d,guards:xM(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function SD(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?at({...t,guardsResult:!0}):function AD(n,e,t,r){return(0,an.D)(n).pipe((0,D.z)(i=>function MD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(d=>{const m=gg(e)??i,v=Qh(d,m);return mo(function Xh(n){return n&&Zc(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(oe())})).pipe(Yc()):at(!0)}(i.component,i.route,t,e,r)),oe(i=>!0!==i,!0))}(u,r,i,n).pipe((0,D.z)(d=>d&&function w0(n){return"boolean"==typeof n}(d)?function ey(n,e,t,r){return(0,an.D)(e).pipe(Ae(i=>ha(function RD(n,e){return null!==n&&e&&e(new a0(n)),at(!0)}(i.route.parent,r),function xD(n,e){return null!==n&&e&&e(new l0(n)),at(!0)}(i.route,r),function I0(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function RM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>fo(()=>at(u.guards.map(m=>{const v=gg(u.node)??t,b=Qh(m,v);return mo(function X_(n){return n&&Zc(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(oe())})).pipe(Yc())));return at(a).pipe(Yc())}(n,i.path,t),function PD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>fo(()=>{const u=gg(e)??t,d=Qh(a,u);return mo(function TD(n){return n&&Zc(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(oe())}));return at(i).pipe(Yc())}(n,i.route,t))),oe(i=>!0!==i,!0))}(r,a,n,e):at(d)),(0,st.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ve.b)(d=>{if(i.guardsResult=d.guardsResult,O(d.guardsResult))throw dg(0,d.guardsResult);const m=new TM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(m)}),T(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),ly(d=>{if(d.guards.canActivateChecks.length)return at(d).pipe((0,Ve.b)(m=>{const v=new qh(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),zn(m=>{let v=!1;return at(m).pipe(function kM(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,an.D)(i).pipe(Ae(u=>function Xc(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Tg(i)&&(a[Ti]=i.title),function ay(n,e,t,r){const i=function P0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return at({});const a={};return(0,an.D)(i).pipe((0,D.z)(u=>function jD(n,e,t,r){const i=gg(e)??r,a=Qh(n,i);return mo(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(oe(),(0,Ve.b)(d=>{a[u]=d}))),yt(1),function pa(n){return(0,st.U)(()=>n)}(a),ut(u=>mg(u)?fs.E:Jr(u)))}(a,n,e,r).pipe((0,st.U)(u=>(n._resolvedData=u,n.data=lg(n,t).resolve,i&&Tg(i)&&(n.data[Ti]=i.title),null)))}(u.route,r,n,e)),(0,Ve.b)(()=>a++),yt(1),(0,D.z)(u=>a===i.length?at(t):fs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ve.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Ve.b)(m=>{const v=new j_(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),ly(d=>{const m=v=>{const b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Ve.b)(S=>{v.component=S}),(0,st.U)(()=>{})));for(const S of v.children)b.push(...m(S));return b};return Ll(m(d.targetSnapshot.root)).pipe(R(),xn(1))}),ly(()=>this.afterPreactivation()),(0,st.U)(d=>{const m=function zc(n,e,t){const r=Yh(n,e._root,t?t._root:void 0);return new d0(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:m}}),(0,Ve.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new Z_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ve.b)({next(){a=!0},complete(){a=!0}}),Fs(()=>{a||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ut(d=>{if(u=!0,p0(d)){G_(d)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new rg(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(m),G_(d)){const v=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hy(i.source)};this.scheduleNavigation(v,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new r0(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(d))}catch(v){i.reject(v)}}return fs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(K_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:d,preserveFragment:m}=r,v=i||this.routerState.root,b=m?this.currentUrlTree.fragment:u;let S=null;switch(d){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Zt(v,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=O(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function B0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...WD}:!1===r?{...LM}:r,O(t))return L_(this.currentUrlTree,t,i);const a=this.parseUrl(t);return L_(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ju(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let d,m,v;u?(d=u.resolve,m=u.reject,v=u.promise):v=new Promise((P,V)=>{d=P,m=V});const b=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:b,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new rg(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return V0()},providedIn:"root"}),n})();function hy(n){return"imperative"!==n}let ed=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Qr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(br),p.Y36(Vl),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})();class fy{}let py=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(T(t=>t instanceof ju),Ae(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,d=a._loadedInjector??u;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(u,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,an.D)(i).pipe((0,da.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const a=i.pipe((0,D.z)(u=>null===u?at(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,an.D)([a,u]).pipe((0,da.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(br),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(fy),p.LFG(dy))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wu=new p.OlP("");let H0=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof B_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ju&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ig&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ig(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Gu(n,e){return{\u0275kind:n,\u0275providers:e}}function sf(n){return[{provide:cy,multi:!0,useValue:n}]}function qD(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(br),i=n.get(gy);1===n.get(my)&&r.initialNavigation(),n.get(js,null,p.XFs.Optional)?.setUpPreloading(),n.get(Wu,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const gy=new p.OlP("",{factory:()=>new Qr.x}),my=new p.OlP("",{providedIn:"root",factory:()=>1});const js=new p.OlP("");function YD(n){return Gu(0,[{provide:js,useExisting:py},{provide:fy,useExisting:n}])}const G0=new p.OlP("ROUTER_FORROOT_GUARD"),JD=[Le,{provide:Bh,useClass:Fl},{provide:br,useFactory:V0},hg,{provide:Vl,useFactory:function $0(n){return n.routerState.root},deps:[br]},dy];function z0(){return new p.PXZ("Router",br)}let q0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JD,[],sf(t),{provide:G0,useFactory:K0,deps:[[br,new p.FiY,new p.tp0]]},{provide:nf,useValue:r||{}},r?.useHash?{provide:Ee,useClass:Ze}:{provide:Ee,useClass:Qe},{provide:Wu,useFactory:()=>{const n=(0,p.f3M)(br),e=(0,p.f3M)(vc),t=(0,p.f3M)(nf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new H0(n,e,t)}},r?.preloadingStrategy?YD(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:z0},r?.initialNavigation?Z0(r):[],[{provide:_y,useFactory:qD},{provide:p.tb,multi:!0,useExisting:_y}]]}}static forChild(t){return{ngModule:n,providers:[sf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(G0,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[$u]}),n})();function K0(n){return"guarded"}function Z0(n){return["disabled"===n.initialNavigation?Gu(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(br);return()=>{e.setUpLocationChangeListener()}}},{provide:my,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Gu(2,[{provide:my,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const u=e.get(br),d=e.get(gy);(function i(a){e.get(br).events.pipe(T(d=>d instanceof ju||d instanceof rg||d instanceof r0),(0,st.U)(d=>d instanceof ju||d instanceof rg&&(0===d.code||1===d.code)&&null),T(d=>null!==d),xn(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),u.afterPreactivation=()=>(a(!0),r||d.closed?at(void 0):d),u.initialNavigation()}))}}]).\u0275providers:[]]}const _y=new p.OlP("");let Y0={warnLogin:{severity:"warn",summary:"Warn",detail:"Efetue o Login"}};var nS=F(8247),L=F(2090),bi=F(9681),wo=F(1877),Ea=F(4859),Pg=F(6451),af=F(5363),zu=F(6063);class rS extends Qr.x{constructor(e=1/0,t=1/0,r=zu.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let d=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)d=m;d&&r.splice(0,d+1)}}}var Mg=F(3099);function Ng(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Mg.B)({connector:()=>new rS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Q0(n,e){return(0,Os.m)(e)?zn(()=>n,e):zn(()=>n)}var J0=F(9468),yn=F(5813),$r=F(2011);F(5867);var Ie=F(5861);const uf=new Map,lS={activated:!1,tokenObservers:[]},wy={initialized:!1,enabled:!1};function ei(n){return uf.get(n)||Object.assign({},lS)}function sl(){return wy}class Ey{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function ol(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const hi=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function cS(n){if(!ei(n).activated)throw hi.create("use-before-activation",{appName:n.name})}function rd(n,e){return id.apply(this,arguments)}function id(){return(id=(0,Ie.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const V=yield u.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const d={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,d)}catch(V){throw hi.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==m.status)throw hi.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(V){throw hi.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const b=v.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(b[1]),P=Date.now();return{token:v.token,expireTimeMillis:P+S,issuedAtTimeMillis:P}})).apply(this,arguments)}function Sy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const cf="firebase-app-check-store";let Fg=null;function Ay(){return Fg||(Fg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(hi.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(cf,{keyPath:"compositeKey"})}}catch(r){e(hi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Fg)}function Ry(){return(Ry=(0,Ie.Z)(function*(n,e){const r=(yield Ay()).transaction(cf,"readwrite"),a=r.objectStore(cf).put({compositeKey:n,value:e});return new Promise((u,d)=>{a.onsuccess=m=>{u()},r.onerror=m=>{var v;d(hi.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Vg=new wo.Yd("@firebase/app-check");function oE(n,e){return(0,L.hl)()?function hS(n,e){return function xy(n,e){return Ry.apply(this,arguments)}(function fS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pS(){return sl().enabled}function gS(){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,Ie.Z)(function*(){const n=sl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mS={error:"UNKNOWN_ERROR"};function lE(n){return L.US.encodeString(JSON.stringify(n),!1)}function sd(n){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,Ie.Z)(function*(n,e=!1){const t=n.app;cS(t);const r=ei(t);let a,i=r.token;if(i&&!od(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(od(m)?i=m:yield oE(t,void 0))}if(!e&&i&&od(i))return{token:i.token};let d,u=!1;if(pS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rd(Sy(t,yield gS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const m=yield r.exchangeTokenPromise;return yield oE(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield ei(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Vg.warn(m.message):Vg.error(m),a=m}return i?a?d=od(i)?{token:i.token,internalError:a}:Ny(a):(d={token:i.token},r.token=i,yield oE(t,i)):d=Ny(a),u&&cE(t,d),d})).apply(this,arguments)}function My(n,e){const t=ei(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function al(n){const{app:e}=n,t=ei(e);let r=t.tokenRefresher;r||(r=function uE(n){const{app:e}=n;return new Ey((0,Ie.Z)(function*(){let r;if(r=ei(e).token?yield sd(n,!0):yield sd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function cE(n,e){const t=ei(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function od(n){return n.expireTimeMillis-Date.now()>0}function Ny(n){return{token:lE(mS),error:n}}class _S{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ei(this.app);for(const t of e)My(this.app,t.next);return Promise.resolve()}}const jy="app-check-internal";!function IS(){(0,bi._registerComponent)(new Ea.wA("app-check",n=>function yS(n,e){return new _S(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jy).initialize()})),(0,bi._registerComponent)(new Ea.wA(jy,n=>function jg(n){return{getToken:e=>sd(n,e),addTokenListener:e=>function df(n,e,t,r){const{app:i}=n,a=ei(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&od(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),al(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>al(n))}(n,"INTERNAL",e),removeTokenListener:e=>My(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,bi.registerVersion)("@firebase/app-check","0.5.17")}();class ud{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var qg=F(127);const Wy=new p.OlP("angularfire2.auth.use-emulator"),Gy=new p.OlP("angularfire2.auth.settings"),cd=new p.OlP("angularfire2.auth.tenant-id"),ff=new p.OlP("angularfire2.auth.langugage-code"),dd=new p.OlP("angularfire2.auth.use-device-language"),yE=new p.OlP("angularfire.auth.persistence"),pf=(n,e,t,r,i,a,u,d)=>(0,$r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),u)for(const[v,b]of Object.entries(u))m.settings[v]=b;return d&&m.setPersistence(d),m},[t,r,i,a,u,d]);let Kg=(()=>{class n{constructor(t,r,i,a,u,d,m,v,b,S,P,V){const G=new Qr.x,ce=at(void 0).pipe((0,af.Q)(u.outsideAngular),zn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,st.U)(()=>(0,$r.on)(t,a,r)),(0,st.U)(ye=>pf(ye,a,d,v,b,S,m,P)),Ng({bufferSize:1,refCount:!1}));if(Ho(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ce.pipe(oe()).subscribe();const ot=ce.pipe(zn(ft=>ft.getRedirectResult().then(At=>At,()=>null)),yn.iC,Ng({bufferSize:1,refCount:!1})),dt=ce.pipe(zn(ft=>new Tr.y(At=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(Bt=>At.next(Bt),Bt=>At.error(Bt),()=>At.complete()))})))),lt=ce.pipe(zn(ft=>new Tr.y(At=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(Bt=>At.next(Bt),Bt=>At.error(Bt),()=>At.complete()))}))));this.authState=ot.pipe(Q0(dt),(0,J0.R)(u.outsideAngular),(0,af.Q)(u.insideAngular)),this.user=ot.pipe(Q0(lt),(0,J0.R)(u.outsideAngular),(0,af.Q)(u.insideAngular)),this.idToken=this.user.pipe(zn(ft=>ft?(0,an.D)(ft.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(zn(ft=>ft?(0,an.D)(ft.getIdTokenResult()):at(null))),this.credential=(0,Pg.T)(ot,G,this.authState.pipe(T(ft=>!ft))).pipe((0,st.U)(ft=>ft?.user?ft:null),(0,J0.R)(u.outsideAngular),(0,af.Q)(u.insideAngular))}return(0,$r.pX)(this,ce,a,{spy:{apply:(ye,ot,dt)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&dt.then(lt=>G.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG($r.Dh),p.LFG($r.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(Wy,8),p.LFG(Gy,8),p.LFG(cd,8),p.LFG(ff,8),p.LFG(dd,8),p.LFG(yE,8),p.LFG(ud,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vE=(()=>{class n{constructor(){qg.Z.registerVersion("angularfire",yn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Kg]}),n})(),hd=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r}googleLogin(){return this.afAuth.signInWithPopup(new nS.Q).then(t=>{localStorage[n.tokenKey]=t.credential.accessToken,localStorage[n.userUidKey]=t?.user?.uid,this.router.navigate([""])}).catch(t=>{this.router.navigate(["/login"])})}logout(){return localStorage.removeItem(n.tokenKey),localStorage.removeItem(n.userUidKey),this.afAuth.signOut()}}return n.tokenKey="userToken",n.userUidKey="userUid",n.\u0275fac=function(t){return new(t||n)(p.LFG(Kg),p.LFG(br))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ul(n,e){return{type:7,name:n,definitions:e,options:{}}}function gf(n,e=null){return{type:4,styles:e,timings:n}}function IE(n){return{type:6,styles:n,offset:null}}function CE(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}const qy=["*"];let fi=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),MS=(()=>{class n{constructor(){this.messageSource=new Qr.x,this.clearSource=new Qr.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(t){t&&this.messageSource.next(t)}addAll(t){t&&t.length&&this.messageSource.next(t)}clear(t){this.clearSource.next(t||null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Qg=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[fi.STARTS_WITH,fi.CONTAINS,fi.NOT_CONTAINS,fi.ENDS_WITH,fi.EQUALS,fi.NOT_EQUALS],numeric:[fi.EQUALS,fi.NOT_EQUALS,fi.LESS_THAN,fi.LESS_THAN_OR_EQUAL_TO,fi.GREATER_THAN,fi.GREATER_THAN_OR_EQUAL_TO],date:[fi.DATE_IS,fi.DATE_IS_NOT,fi.DATE_BEFORE,fi.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Qr.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:qy,decls:1,vars:0,template:function(t,r){1&t&&(p.F$t(),p.Hsn(0))},encapsulation:2}),n})(),wN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:qy,decls:1,vars:0,template:function(t,r){1&t&&(p.F$t(),p.Hsn(0))},encapsulation:2}),n})(),jl=(()=>{class n{constructor(t){this.template=t}getType(){return this.name}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),NS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jo]}),n})(),Gi=(()=>{class n{static addClass(t,r){t&&r&&(t.classList?t.classList.add(r):t.className+=" "+r)}static addMultipleClasses(t,r){if(t&&r)if(t.classList){let i=r.trim().split(" ");for(let a=0;a<i.length;a++)t.classList.add(i[a])}else{let i=r.split(" ");for(let a=0;a<i.length;a++)t.className+=" "+i[a]}}static removeClass(t,r){t&&r&&(t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,r){return!(!t||!r)&&(t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return t?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,i=0;for(var a=0;a<r.length;a++){if(r[a]==t)return i;1==r[a].nodeType&&i++}return-1}static indexWithinGroup(t,r){let i=t.parentNode?t.parentNode.childNodes:[],a=0;for(var u=0;u<i.length;u++){if(i[u]==t)return a;i[u].attributes&&i[u].attributes[r]&&1==i[u].nodeType&&a++}return-1}static appendOverlay(t,r,i="self"){"self"!==i&&t&&r&&this.appendChild(t,r)}static alignOverlay(t,r,i="self",a=!0){t&&r&&(a&&(t.style.minWidth||(t.style.minWidth=n.getOuterWidth(r)+"px")),"self"===i?this.relativePosition(t,r):this.absolutePosition(t,r))}static relativePosition(t,r){const i=ce=>{if(ce)return"relative"===getComputedStyle(ce).getPropertyValue("position")?ce:i(ce.parentElement)},a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),u=r.offsetHeight,d=r.getBoundingClientRect(),m=this.getWindowScrollTop(),v=this.getWindowScrollLeft(),b=this.getViewport(),P=i(t)?.getBoundingClientRect()||{top:-1*m,left:-1*v};let V,G;d.top+u+a.height>b.height?(V=d.top-P.top-a.height,t.style.transformOrigin="bottom",d.top+V<0&&(V=-1*d.top)):(V=u+d.top-P.top,t.style.transformOrigin="top"),G=a.width>b.width?-1*(d.left-P.left):d.left-P.left+a.width>b.width?-1*(d.left-P.left+a.width-b.width):d.left-P.left,t.style.top=V+"px",t.style.left=G+"px"}static absolutePosition(t,r){const i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),a=i.height,u=i.width,d=r.offsetHeight,m=r.offsetWidth,v=r.getBoundingClientRect(),b=this.getWindowScrollTop(),S=this.getWindowScrollLeft(),P=this.getViewport();let V,G;v.top+d+a>P.height?(V=v.top+b-a,t.style.transformOrigin="bottom",V<0&&(V=b)):(V=d+v.top+b,t.style.transformOrigin="top"),G=v.left+u>P.width?Math.max(0,v.left+S+m-u):v.left+S,t.style.top=V+"px",t.style.left=G+"px"}static getParents(t,r=[]){return null===t.parentNode?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let i=this.getParents(t);const a=/(auto|scroll)/,u=d=>{let m=window.getComputedStyle(d,null);return a.test(m.getPropertyValue("overflow"))||a.test(m.getPropertyValue("overflowX"))||a.test(m.getPropertyValue("overflowY"))};for(let d of i){let m=1===d.nodeType&&d.dataset.scrollselectors;if(m){let v=m.split(",");for(let b of v){let S=this.findSingle(d,b);S&&u(S)&&r.push(S)}}9!==d.nodeType&&u(d)&&r.push(d)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let i=getComputedStyle(t).getPropertyValue("borderTopWidth"),a=i?parseFloat(i):0,u=getComputedStyle(t).getPropertyValue("paddingTop"),d=u?parseFloat(u):0,m=t.getBoundingClientRect(),b=r.getBoundingClientRect().top+document.body.scrollTop-(m.top+document.body.scrollTop)-a-d,S=t.scrollTop,P=t.clientHeight,V=this.getOuterHeight(r);b<0?t.scrollTop=S+b:b+V>P&&(t.scrollTop=S+b-P+V)}static fadeIn(t,r){t.style.opacity=0;let i=+new Date,a=0,u=function(){a=+t.style.opacity.replace(",",".")+((new Date).getTime()-i)/r,t.style.opacity=a,i=+new Date,+a<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}static fadeOut(t,r){var i=1,d=50/r;let m=setInterval(()=>{(i-=d)<=0&&(i=0,clearInterval(m)),t.style.opacity=i},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(u){return-1!==[].indexOf.call(document.querySelectorAll(u),this)}).call(t,r)}static getOuterWidth(t,r){let i=t.offsetWidth;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginLeft)+parseFloat(a.marginRight)}return i}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(t,r){let i=t.offsetHeight;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginTop)+parseFloat(a.marginBottom)}return i}static getHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let t=window,r=document,i=r.documentElement,a=r.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||a.clientWidth,height:t.innerHeight||i.clientHeight||a.clientHeight}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let i=t.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot append "+r+" to "+t;r.el.nativeElement.appendChild(t)}}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot remove "+t+" from "+r;r.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,i){t[r].apply(t,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,r){t&&document.activeElement!==t&&t.focus(r)}static getFocusableElements(t){let r=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),i=[];for(let a of r)"none"!=getComputedStyle(a).display&&"hidden"!=getComputedStyle(a).visibility&&i.push(a);return i}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,r){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:const i=typeof t;if("string"===i)return document.querySelector(t);if("object"===i&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const u=(d=t)&&d.constructor&&d.call&&d.apply?t():t;return u&&9===u.nodeType||this.isExist(u)?u:null}var d}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})(),fd=(()=>{class n{constructor(t,r,i){this.el=t,this.zone=r,this.config=i}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let r=this.getInk();if(!r||"none"===getComputedStyle(r,null).display)return;if(Gi.removeClass(r,"p-ink-active"),!Gi.getHeight(r)&&!Gi.getWidth(r)){let d=Math.max(Gi.getOuterWidth(this.el.nativeElement),Gi.getOuterHeight(this.el.nativeElement));r.style.height=d+"px",r.style.width=d+"px"}let i=Gi.getOffset(this.el.nativeElement),a=t.pageX-i.left+document.body.scrollTop-Gi.getWidth(r)/2,u=t.pageY-i.top+document.body.scrollLeft-Gi.getHeight(r)/2;r.style.top=u+"px",r.style.left=a+"px",Gi.addClass(r,"p-ink-active"),this.timeout=setTimeout(()=>{let d=this.getInk();d&&Gi.removeClass(d,"p-ink-active")},401)}getInk(){for(let t=0;t<this.el.nativeElement.children.length;t++)if(-1!==this.el.nativeElement.children[t].className.indexOf("p-ink"))return this.el.nativeElement.children[t];return null}resetInk(){let t=this.getInk();t&&Gi.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),Gi.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),Gi.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(Qg,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),ti=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jo]}),n})();function Ku(n,e){if(1&n&&p._UZ(0,"span",11),2&n){const t=p.oxw(2).$implicit;p.Q6J("innerHTML",t.summary,p.oJD)}}function Jg(n,e){if(1&n&&p._UZ(0,"span",12),2&n){const t=p.oxw(2).$implicit;p.Q6J("innerHTML",t.detail,p.oJD)}}function Hs(n,e){if(1&n&&(p.ynx(0),p.YNc(1,Ku,1,1,"span",9),p.YNc(2,Jg,1,1,"span",10),p.BQk()),2&n){const t=p.oxw().$implicit;p.xp6(1),p.Q6J("ngIf",t.summary),p.xp6(1),p.Q6J("ngIf",t.detail)}}function Ky(n,e){if(1&n&&(p.TgZ(0,"span",15),p._uU(1),p.qZA()),2&n){const t=p.oxw(2).$implicit;p.xp6(1),p.Oqu(t.summary)}}function pd(n,e){if(1&n&&(p.TgZ(0,"span",16),p._uU(1),p.qZA()),2&n){const t=p.oxw(2).$implicit;p.xp6(1),p.Oqu(t.detail)}}function gd(n,e){if(1&n&&(p.YNc(0,Ky,2,1,"span",13),p.YNc(1,pd,2,1,"span",14)),2&n){const t=p.oxw().$implicit;p.Q6J("ngIf",t.summary),p.xp6(1),p.Q6J("ngIf",t.detail)}}function md(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",17),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().index,a=p.oxw(2);return p.KtG(a.removeMessage(i))}),p._UZ(1,"i",18),p.qZA()}}const _d=function(n,e){return{showTransitionParams:n,hideTransitionParams:e}},yd=function(n){return{value:"visible",params:n}},vd=function(n,e,t,r){return{"pi-info-circle":n,"pi-check":e,"pi-exclamation-triangle":t,"pi-times-circle":r}};function wd(n,e){if(1&n&&(p.TgZ(0,"div",4)(1,"div",5),p._UZ(2,"span",6),p.YNc(3,Hs,3,2,"ng-container",1),p.YNc(4,gd,2,2,"ng-template",null,7,p.W1O),p.YNc(6,md,2,0,"button",8),p.qZA()()),2&n){const t=e.$implicit,r=p.MAs(5),i=p.oxw(2);p.Tol("p-message p-message-"+t.severity),p.Q6J("@messageAnimation",p.VKq(12,yd,p.WLB(9,_d,i.showTransitionOptions,i.hideTransitionOptions))),p.xp6(2),p.Tol("p-message-icon pi"+(t.icon?" "+t.icon:"")),p.Q6J("ngClass",p.l5B(14,vd,"info"===t.severity,"success"===t.severity,"warn"===t.severity,"error"===t.severity)),p.xp6(1),p.Q6J("ngIf",!i.escape)("ngIfElse",r),p.xp6(3),p.Q6J("ngIf",i.closable)}}function Id(n,e){if(1&n&&(p.ynx(0),p.YNc(1,wd,7,19,"div",3),p.BQk()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngForOf",t.value)}}function Ed(n,e){1&n&&p.GkF(0)}function DE(n,e){if(1&n&&(p.TgZ(0,"div",19)(1,"div",5),p.YNc(2,Ed,1,0,"ng-container",20),p.qZA()()),2&n){const t=p.oxw();p.Q6J("ngClass","p-message p-message-"+t.severity),p.xp6(2),p.Q6J("ngTemplateOutlet",t.contentTemplate)}}let SE=(()=>{class n{constructor(t,r,i){this.messageService=t,this.el=r,this.cd=i,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new p.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(t=>{if(t){if(t instanceof Array){let r=t.filter(i=>this.key===i.key);this.value=this.value?[...this.value,...r]:[...r]}else this.key===t.key&&(this.value=this.value?[...this.value,t]:[t]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(t=>{t?this.key===t&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let t=this.el.nativeElement.parentElement;return!(!t||!t.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(t){this.value=this.value.filter((r,i)=>i!==t),this.valueChange.emit(this.value)}get icon(){const t=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(t){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(MS,8),p.Y36(p.SBq),p.Y36(p.sBO))},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-messages"]],contentQueries:function(t,r,i){if(1&t&&p.Suo(i,jl,4),2&t){let a;p.iGM(a=p.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(t,r){if(1&t&&(p.TgZ(0,"div",0),p.YNc(1,Id,2,1,"ng-container",1),p.YNc(2,DE,3,2,"ng-template",null,2,p.W1O),p.qZA()),2&t){const i=p.MAs(3);p.Tol(r.styleClass),p.Q6J("ngStyle",r.style),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate)("ngIfElse",i)}},dependencies:[ln,As,Mn,xs,Oo,fd],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[ul("messageAnimation",[CE(":enter",[IE({opacity:0,transform:"translateY(-25%)"}),gf("{{showTransitionParams}}")]),CE(":leave",[gf("{{hideTransitionParams}}",IE({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),n})(),AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jo,ti]}),n})();function xE(n,e){1&n&&p.GkF(0)}const RE=function(n,e,t,r){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":e,"p-button-icon-top":t,"p-button-icon-bottom":r}};function PE(n,e){if(1&n&&p._UZ(0,"span",4),2&n){const t=p.oxw();p.Tol(t.loading?"p-button-loading-icon "+t.loadingIcon:t.icon),p.Q6J("ngClass",p.l5B(4,RE,"left"===t.iconPos&&t.label,"right"===t.iconPos&&t.label,"top"===t.iconPos&&t.label,"bottom"===t.iconPos&&t.label)),p.uIk("aria-hidden",!0)}}function ME(n,e){if(1&n&&(p.TgZ(0,"span",5),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.uIk("aria-hidden",t.icon&&!t.label),p.xp6(1),p.Oqu(t.label)}}function NE(n,e){if(1&n&&(p.TgZ(0,"span",4),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.Tol(t.badgeClass),p.Q6J("ngClass",t.badgeStyleClass()),p.xp6(1),p.Oqu(t.badge)}}const kE=function(n,e,t,r,i){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":e,"p-disabled":t,"p-button-loading":r,"p-button-loading-label-only":i}},kS=["*"];let Zy=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new p.vpe,this.onFocus=new p.vpe,this.onBlur=new p.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(t,r,i){if(1&t&&p.Suo(i,jl,4),2&t){let a;p.iGM(a=p.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:kS,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(t,r){1&t&&(p.F$t(),p.TgZ(0,"button",0),p.NdJ("click",function(a){return r.onClick.emit(a)})("focus",function(a){return r.onFocus.emit(a)})("blur",function(a){return r.onBlur.emit(a)}),p.Hsn(1),p.YNc(2,xE,1,0,"ng-container",1),p.YNc(3,PE,1,9,"span",2),p.YNc(4,ME,2,2,"span",3),p.YNc(5,NE,2,4,"span",2),p.qZA()),2&t&&(p.Tol(r.styleClass),p.Q6J("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",p.qbA(11,kE,r.icon&&!r.label,("top"===r.iconPos||"bottom"===r.iconPos)&&r.label,r.disabled||r.loading,r.loading,r.loading&&!r.icon&&r.label)),p.uIk("type",r.type)("aria-label",r.ariaLabel),p.xp6(2),p.Q6J("ngTemplateOutlet",r.contentTemplate),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate&&(r.icon||r.loading)),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate&&r.label),p.xp6(1),p.Q6J("ngIf",!r.contentTemplate&&r.badge))},dependencies:[ln,Mn,xs,Oo,fd],encapsulation:2,changeDetection:0}),n})(),OS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jo,ti]}),n})();function OE(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"span")(1,"p-messages",8),p.NdJ("valueChange",function(i){p.CHM(t);const a=p.oxw();return p.KtG(a.msgsWarn=i)}),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(1),p.Q6J("value",t.msgsWarn)}}let Yy=(()=>{class n{constructor(t,r){this.route=t,this.loginSerice=r,this.error=!1,this.msgs=[],this.msgsWarn=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{1==t.error?(this.error=!0,this.msgsWarn=[Y0.warnLogin]):this.error=!1})}loginGoogle(){this.loginSerice.googleLogin().then()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Vl),p.Y36(hd))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12","align-items-center"],[1,"padding-login","grid","justify-content-center"],[1,"login-box","login","col-6","justify-content-center"],["src","assets/OrelhaSeca.png",1,"login-logo"],[1,"text-center"],[4,"ngIf"],[3,"value","valueChange"],[1,"login-button"],["type","button","label","Google",1,"",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),p._UZ(5,"img",5),p.TgZ(6,"div",6),p.YNc(7,OE,2,1,"span",7),p.TgZ(8,"p-messages",8),p.NdJ("valueChange",function(a){return r.msgs=a}),p.qZA()(),p.TgZ(9,"div",9)(10,"p-button",10),p.NdJ("click",function(){return r.loginGoogle()}),p.qZA()()()()()()()),2&t&&(p.xp6(7),p.Q6J("ngIf",r.error),p.xp6(1),p.Q6J("value",r.msgs))},dependencies:[Mn,SE,Zy],styles:[".login-box[_ngcontent-%COMP%]{width:100%;height:100%;max-width:500px;text-align:center}.login[_ngcontent-%COMP%]{background:rgb(255,255,255);justify-content:center;align-items:center;border-left-color:#010c29;border-right-color:#010c29;border-bottom-color:#010c29;border-top-color:#010c29;border-style:solid;border-radius:5px;border-width:2px}.login-logo[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:20px;width:90%;max-width:400px}.padding-login[_ngcontent-%COMP%]{padding-top:100px;align-items:center;align-content:center;align-self:center}.text-center[_ngcontent-%COMP%]{text-align:center}.login-button[_ngcontent-%COMP%]{text-align:center;padding-top:1em;padding-bottom:2em}.login-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em}.menu-container[_ngcontent-%COMP%]{background-color:#fff;max-width:1900px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]{background-color:#fff;max-width:1810px;padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;min-height:100%}"]}),n})();const LS=["*"];let Hl=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-template"]],ngContentSelectors:LS,decls:8,vars:0,consts:[[1,"navbar"],["icon","pi pi-home","routerLink","/home",1,"menu-item"],["icon","pi pi-search","routerLink","/search",1,"menu-item"],["icon","pi pi-plus","routerLink","/novo",1,"menu-item"],["icon","pi pi-bell","routerLink","/notific",1,"menu-item"],["icon","pi pi-user","routerLink","/config",1,"menu-item"],[1,"content"]],template:function(t,r){1&t&&(p.F$t(),p.TgZ(0,"div",0),p._UZ(1,"p-button",1)(2,"p-button",2)(3,"p-button",3)(4,"p-button",4)(5,"p-button",5),p.qZA(),p.TgZ(6,"div",6),p.Hsn(7),p.qZA())},dependencies:[ed,Zy],styles:[".navbar[_ngcontent-%COMP%]{overflow:hidden;background-color:#333;position:fixed;bottom:0;width:100%;text-align:center;padding-top:.5em;padding-bottom:.5em;justify-content:space-evenly;display:flex;z-index:999}.content[_ngcontent-%COMP%]{margin-bottom:30px}.menu-item[_ngcontent-%COMP%]{padding-left:.2em;padding-right:.2em}"]}),n})();function Xg(n,e){1&n&&p.GkF(0)}function Qy(n,e){if(1&n&&(p.TgZ(0,"div",8),p.Hsn(1,1),p.YNc(2,Xg,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(2),p.Q6J("ngTemplateOutlet",t.headerTemplate)}}function FS(n,e){1&n&&p.GkF(0)}function em(n,e){if(1&n&&(p.TgZ(0,"div",9),p._uU(1),p.YNc(2,FS,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.hij(" ",t.header," "),p.xp6(1),p.Q6J("ngTemplateOutlet",t.titleTemplate)}}function tm(n,e){1&n&&p.GkF(0)}function Jy(n,e){if(1&n&&(p.TgZ(0,"div",10),p._uU(1),p.YNc(2,tm,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.hij(" ",t.subheader," "),p.xp6(1),p.Q6J("ngTemplateOutlet",t.subtitleTemplate)}}function FE(n,e){1&n&&p.GkF(0)}function Xy(n,e){1&n&&p.GkF(0)}function UE(n,e){if(1&n&&(p.TgZ(0,"div",11),p.Hsn(1,2),p.YNc(2,Xy,1,0,"ng-container",6),p.qZA()),2&n){const t=p.oxw();p.xp6(2),p.Q6J("ngTemplateOutlet",t.footerTemplate)}}const VE=["*",[["p-header"]],[["p-footer"]]],ev=["*","p-header","p-footer"];let BE=(()=>{class n{constructor(t){this.el=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"title":this.titleTemplate=t.template;break;case"subtitle":this.subtitleTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq))},n.\u0275cmp=p.Xpm({type:n,selectors:[["p-card"]],contentQueries:function(t,r,i){if(1&t&&(p.Suo(i,qu,5),p.Suo(i,wN,5),p.Suo(i,jl,4)),2&t){let a;p.iGM(a=p.CRH())&&(r.headerFacet=a.first),p.iGM(a=p.CRH())&&(r.footerFacet=a.first),p.iGM(a=p.CRH())&&(r.templates=a)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:ev,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(t,r){1&t&&(p.F$t(VE),p.TgZ(0,"div",0),p.YNc(1,Qy,3,1,"div",1),p.TgZ(2,"div",2),p.YNc(3,em,3,2,"div",3),p.YNc(4,Jy,3,2,"div",4),p.TgZ(5,"div",5),p.Hsn(6),p.YNc(7,FE,1,0,"ng-container",6),p.qZA(),p.YNc(8,UE,3,1,"div",7),p.qZA()()),2&t&&(p.Tol(r.styleClass),p.Q6J("ngClass","p-card p-component")("ngStyle",r.style),p.xp6(1),p.Q6J("ngIf",r.headerFacet||r.headerTemplate),p.xp6(2),p.Q6J("ngIf",r.header||r.titleTemplate),p.xp6(1),p.Q6J("ngIf",r.subheader||r.subtitleTemplate),p.xp6(3),p.Q6J("ngTemplateOutlet",r.contentTemplate),p.xp6(1),p.Q6J("ngIf",r.footerFacet||r.footerTemplate))},dependencies:[ln,Mn,xs,Oo],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),US=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jo,NS]}),n})();function jE(n,e){if(1&n&&(p.TgZ(0,"div",8)(1,"div"),p._UZ(2,"img",9),p.qZA(),p.TgZ(3,"div",10),p._uU(4),p.qZA()()),2&n){const t=p.oxw();p.xp6(2),p.s9C("src",t.profiePic,p.LSH),p.xp6(2),p.hij(" ",t.userName," ")}}function HE(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"i",11),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.liked=!i.liked)}),p.qZA()}}function $E(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"i",12),p.NdJ("click",function(){p.CHM(t);const i=p.oxw();return p.KtG(i.liked=!i.liked)}),p.qZA()}}let WE=(()=>{class n{constructor(){this.liked=!1,this.videoSrc="assets/video01.mp4",this.userName="Caesar Zama Altran",this.profiePic="assets/cza-profile.png",this.legenda="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-feed-card"]],inputs:{videoSrc:"videoSrc",userName:"userName",profiePic:"profiePic",legenda:"legenda"},decls:11,vars:5,consts:[["pTemplate","header"],["controls","",2,"max-width","100%",3,"src"],["class","pi pi-heart post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],["class","pi pi-heart-fill post-actions","style","font-size: 1.5rem; padding-left: .8em;",3,"click",4,"ngIf"],[1,"pi","pi-share-alt","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[1,"pi","pi-comments","post-actions",2,"font-size","1.5rem","padding-left",".2em"],[2,"margin-bottom","1em"],[2,"font-weight","bold"],[1,"flex","content-card-header","align-content-center"],[1,"profile-img",3,"src"],[1,"align-content-center",2,"padding-top",".28em","font-weight","bold"],[1,"pi","pi-heart","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"],[1,"pi","pi-heart-fill","post-actions",2,"font-size","1.5rem","padding-left",".8em",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"p-card"),p.YNc(1,jE,5,2,"ng-template",0),p._UZ(2,"video",1),p.YNc(3,HE,1,0,"i",2),p.YNc(4,$E,1,0,"i",3),p._UZ(5,"i",4)(6,"i",5),p.TgZ(7,"div",6)(8,"span",7),p._uU(9),p.qZA(),p._uU(10),p.qZA()()),2&t&&(p.xp6(2),p.s9C("src",r.videoSrc,p.LSH),p.xp6(1),p.Q6J("ngIf",!r.liked),p.xp6(1),p.Q6J("ngIf",r.liked),p.xp6(5),p.hij("",r.userName," "),p.xp6(1),p.hij("",r.legenda," "))},dependencies:[Mn,BE,jl],styles:[".content-card-header[_ngcontent-%COMP%]{padding-top:.5em;padding-left:.5em;padding-bottom:.2em}.post-actions[_ngcontent-%COMP%]{padding:.2em}"]}),n})(),VS=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:0,consts:[["profiePic","assets/cza-profile.png","userName","Caesar Zama Altran","videoSrc","assets/video01.mp4","legenda","Ol\xe1 mundo! Primeiro v\xeddeo de teste da plataforma!"],["profiePic","assets/profile-lincoln.jpg","userName","Lincoln Ricardo","videoSrc","assets/video02.mp4","legenda","GO GO GO! Hackathon com @CaesarAltran @GuilhermeNascimento @NathanAlmici e @BrunoRicardo"],["profiePic","assets/profile-gui.jpg","userName","Guilherme Nascimento","videoSrc","assets/video02.mp4"],["profiePic","assets/profile-nathan.jpg","userName","Nathan Almici","videoSrc","assets/video02.mp4"],["profiePic","assets/profile-bruno.jpg","userName","Bruno Ricardo","videoSrc","assets/video02.mp4"]],template:function(t,r){1&t&&(p.TgZ(0,"app-template"),p._UZ(1,"app-feed-card",0)(2,"app-feed-card",1)(3,"app-feed-card",2)(4,"app-feed-card",3)(5,"app-feed-card",4),p.qZA())},dependencies:[Hl,WE]}),n})(),Cd=(()=>{class n{constructor(t){this.router=t}canActivate(t,r){return localStorage,console.log(localStorage[hd.tokenKey]),null==localStorage[hd.tokenKey]?(this.router.navigate(["/login"]),!1):"null"!=localStorage[hd.tokenKey]||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(br))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qE=[{path:"login",component:Yy},{path:"home",component:VS,canActivate:[Cd]},{path:"search",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-search-view"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"search-view works!"),p.qZA()())},dependencies:[Hl]}),n})(),canActivate:[Cd]},{path:"novo",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-new-content-view"]],decls:4,vars:0,consts:[["type","file","accept","video/*","capture",""]],template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"new-content-view works!"),p.qZA(),p._UZ(3,"input",0),p.qZA())},dependencies:[Hl]}),n})(),canActivate:[Cd]},{path:"notific",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-notification-view"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"notification-view works!"),p.qZA()())},dependencies:[Hl]}),n})(),canActivate:[Cd]},{path:"config",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-config-view"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"app-template")(1,"p"),p._uU(2,"config-view works!"),p.qZA()())},dependencies:[Hl]}),n})(),canActivate:[Cd]},{path:"",redirectTo:"/home",pathMatch:"full"}];let KE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[q0.forRoot(qE,{useHash:!0}),q0]}),n})(),ZE=(()=>{class n{constructor(){this.title="hacka-sicredi"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[Hu]}),n})();const tv_firebaseConfig={apiKey:"AIzaSyBNnuRVZ0vTs6I6iR_0gMMYWRoeD4HDl4k",authDomain:"hackasic.firebaseapp.com",projectId:"hackasic",storageBucket:"hackasic.appspot.com",messagingSenderId:"807324039482",appId:"1:807324039482:web:cf01e5d1b2a95f48e73803",measurementId:"G-DY0F90L8QH"};var nm=F(4986);function nv(n,e=ho.y){return n=n??YE,(0,er.e)((t,r)=>{let i,a=!0;t.subscribe((0,Gn.x)(r,u=>{const d=e(u);(a||!n(i,d))&&(a=!1,i=d,r.next(u))}))})}function YE(n,e){return n===e}var CN=F(5032);F(5881);var rv=F(3942);const Dr="@firebase/database",iv="0.13.10";let sv="";function QE(n){sv=n}class JE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class GS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ov=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new JE(e)}}catch{}return new GS},$l=ov("localStorage"),Wl=ov("sessionStorage"),Td=new wo.Yd("@firebase/database"),XE=function(){let n=1;return function(){return n++}}(),av=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},mf=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=mf.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let Gl=null,zS=!0;const lv=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Td.logLevel=wo.in.VERBOSE,Gl=Td.log.bind(Td),e&&Wl.set("logging_enabled",!0)):"function"==typeof n?Gl=n:(Gl=null,Wl.remove("logging_enabled"))},kr=function(...n){if(!0===zS&&(zS=!1,null===Gl&&!0===Wl.get("logging_enabled")&&lv(!0)),Gl){const e=mf.apply(null,n);Gl(e)}},zi=function(n){return function(...e){kr(n,...e)}},uv=function(...n){const e="FIREBASE INTERNAL ERROR: "+mf(...n);Td.error(e)},Eo=function(...n){const e=`FIREBASE FATAL ERROR: ${mf(...n)}`;throw Td.error(e),new Error(e)},Zn=function(...n){const e="FIREBASE WARNING: "+mf(...n);Td.warn(e)},qi=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ta="[MIN_NAME]",ba="[MAX_NAME]",Zu=function(n,e){if(n===e)return 0;if(n===Ta||e===ba)return-1;if(e===Ta||n===ba)return 1;{const t=vf(n),r=vf(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},qS=function(n,e){return n===e?0:n<e?-1:1},_f=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},yf=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=yf(n[e[r]]);return t+="}",t},bd=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cv=function(n){(0,L.hu)(!qi(n),"Invalid JSON number");const r=1023;let i,a,u,d,m;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let S="";for(m=0;m<64;m+=8){let P=parseInt(b.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},rm=new RegExp("^-?(0*)\\d{1,10}$"),rC=-2147483648,im=2147483647,vf=function(n){if(rm.test(n)){const e=Number(n);if(e>=rC&&e<=im)return e}return null},zl=function(n){try{n()}catch(e){setTimeout(()=>{throw Zn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Dd=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class iC{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class sC{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(kr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zn(e)}}let Sd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const aC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cC="websocket",dC="long_polling";class gv{constructor(e,t,r,i,a=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$l.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$l.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function hC(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===cC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==dC)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function ZS(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Wr(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class YS{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const mv={},_v={};function yv(n){const e=n.toString();return mv[e]||(mv[e]=new YS),mv[e]}class JS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&zl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Yu{constructor(e,t,r,i,a,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zi(e),this.stats_=yv(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),hC(t,dC,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new JS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new If((...a)=>{const[u,d,m,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&aC.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yu.forceAllow_=!0}static forceDisallow(){Yu.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Yu.forceAllow_&&(Yu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=bd(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class If{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=XE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=If.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){kr("frame writing exception"),d.stack&&kr(d.stack),kr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||kr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{kr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Ef=null;typeof MozWebSocket<"u"?Ef=MozWebSocket:typeof WebSocket<"u"&&(Ef=WebSocket);let Cf=(()=>{class n{constructor(t,r,i,a,u,d,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zi(this.connId),this.stats_=yv(r),this.connURL=n.connectionURL_(r,d,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&aC.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),u&&(d.p=u),hC(t,cC,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$l.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${sv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new Ef(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Ef&&!n.forceDisallow_}static previouslyFailed(){return $l.isInMemoryStorage||!0===$l.get("previous_websocket_failure")}markConnectionHealthy(){$l.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=bd(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Dt=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Yu,Cf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Cf&&Cf.isAvailable();let i=r&&!Cf.previouslyFailed();if(t.webSocketOnly&&(r||Zn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cf];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Sv{constructor(e,t,r,i,a,u,d,m,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zi("c:"+this.id+":"),this.transportManager_=new Dt(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Dd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_f("t",e),r=_f("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_f("t",e),r=_f("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_f("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?uv("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Zn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Dd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Dd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Av{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class TC{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class am extends TC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new am}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class En{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function pn(){return new En("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function To(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new En(n.pieces_,e)}function lm(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function bf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Pd(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new En(e,0)}function Pn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof En)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new En(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function Di(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return Di(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function sA(n,e){const t=bf(n,0),r=bf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Zu(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function um(n,e){if(To(n)!==To(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _s(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(To(n)>To(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class SC{constructor(e,t){this.errorPrefix_=t,this.parts_=bf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);xC(this)}}function xC(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qu(n))}function Qu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class RC extends TC{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new RC}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const cm=1e3;let fm,Kl=(()=>{class n extends Av{constructor(t,r,i,a,u,d,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=zi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cm,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RC.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&am.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,L.Wl)(u)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const m=d.d;"ok"===d.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const v=m.d,b=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Zn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,d=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):uv("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cm,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=cm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=cm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let m=!1,v=null;const b=function(){v?v.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(V){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,G]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?kr("getToken() completed but was canceled"):(kr("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=G&&G.token,v=new Sv(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ce=>{Zn(ce+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&Zn(V),b())}}})()}interrupt(t){kr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){kr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=cm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>yf(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new En(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){kr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){kr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sv.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=am.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class qt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qt(e,t)}}class hm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new qt(Ta,e),i=new qt(Ta,t);return 0!==this.compare(r,i)}minPost(){return qt.MIN}}class NC extends hm{static get __EMPTY_NODE(){return fm}static set __EMPTY_NODE(e){fm=e}compare(e,t){return Zu(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qt.MIN}maxPost(){return new qt(ba,fm)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new qt(e,fm)}toString(){return".key"}}const Da=new NC;class pm{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let gm,$s=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ki.EMPTY_NODE,this.right=u??Ki.EMPTY_NODE}copy(t,r,i,a,u){return new n(t??this.key,r??this.value,i??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ki.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ki.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ki{constructor(e,t=Ki.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ki(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$s.BLACK,null,null))}remove(e){return new Ki(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$s.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pm(this.root_,null,this.comparator_,!0,e)}}function Df(n,e){return Zu(n.name,e.name)}function xv(n,e){return Zu(n,e)}Ki.EMPTY_NODE=new class uA{copy(e,t,r,i,a){return this}insert(e,t,r){return new $s(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Rv=function(n){return"number"==typeof n?"number:"+cv(n):"string:"+n},kC=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===gm||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===gm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Pv,mm,OC,Md=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),kC(this.priorityNode_)}static set __childrenNodeConstructor(t){Pv=t}static get __childrenNodeConstructor(){return Pv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===To(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Rv(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?cv(this.value_):this.value_,this.lazyHash_=av(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Un=new class dA extends hm{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Zu(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qt.MIN}maxPost(){return new qt(ba,new Md("[PRIORITY-POST]",OC))}makePost(e,t){const r=mm(e);return new qt(t,new Md("[PRIORITY-POST]",r))}toString(){return".priority"}},hA=Math.log(2);class Mv{constructor(e){this.count=parseInt(Math.log(e+1)/hA,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _m=function(n,e,t,r){n.sort(e);const i=function(m,v){const b=v-m;let S,P;if(0===b)return null;if(1===b)return S=n[m],P=t?t(S):S,new $s(P,S.node,$s.BLACK,null,null);{const V=parseInt(b/2,10)+m,G=i(m,V),ce=i(V+1,v);return S=n[V],P=t?t(S):S,new $s(P,S.node,$s.BLACK,G,ce)}},d=function(m){let v=null,b=null,S=n.length;const P=function(G,ce){const ye=S-G,ot=S;S-=G;const dt=i(ye+1,ot),lt=n[ye],ft=t?t(lt):lt;V(new $s(ft,lt.node,ce,null,dt))},V=function(G){v?(v.left=G,v=G):(b=G,v=G)};for(let G=0;G<m.count;++G){const ce=m.nextBitIsOne(),ye=Math.pow(2,m.count-(G+1));ce?P(ye,$s.BLACK):(P(ye,$s.BLACK),P(ye,$s.RED))}return b}(new Mv(n.length));return new Ki(r||e,d)};let ym;const Nd={};class dl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(Nd&&Un,"ChildrenNode.ts has not been loaded"),ym=ym||new dl({".priority":Nd},{".priority":Un}),ym}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ki?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Da,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(qt.Wrap);let d,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();d=i?_m(r,e.getCompare()):Nd;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const b=Object.assign({},this.indexes_);return b[m]=d,new dl(b,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const u=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(u,"Missing index implementation for "+a),i===Nd){if(u.isDefinedOn(e.node)){const d=[],m=t.getIterator(qt.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&d.push(v),v=m.getNext();return d.push(e),_m(d,u.getCompare())}return Nd}{const d=t.get(e.name);let m=i;return d&&(m=m.remove(new qt(e.name,d))),m.insert(e,e.node)}});return new dl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===Nd)return i;{const a=t.get(e.name);return a?i.remove(new qt(e.name,a)):i}});return new dl(r,this.indexSet_)}}let Sf,$t=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&kC(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Sf||(Sf=new n(new Ki(xv),null,dl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Sf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Sf:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new qt(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?Sf:this.priorityNode_;return new n(a,d,u)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,L.hu)(".priority"!==en(t)||1===To(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(Un,(d,m)=>{r[d]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):u=!1}),!t&&u&&a<2*i){const d=[];for(const m in r)d[m]=r[m];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Rv(this.getPriority().val())+":"),this.forEachChild(Un,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":av(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new qt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new qt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new qt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,qt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,qt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Af?-1:0}withIndex(t){if(t===Da||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Da||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Un),a=r.getIterator(Un);let u=i.getNext(),d=a.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=a.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Da?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Af=new class fA extends $t{constructor(){super(new Ki(xv),$t.EMPTY_NODE,dl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $t.EMPTY_NODE}isEmpty(){return!1}};function ur(n,e=null){if(null===n)return $t.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Md(n,ur(e));if(n instanceof Array){let t=$t.EMPTY_NODE;return Wr(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=ur(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(ur(e))}{const t=[];let r=!1;if(Wr(n,(u,d)=>{if("."!==u.substring(0,1)){const m=ur(d);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new qt(u,m)))}}),0===t.length)return $t.EMPTY_NODE;const a=_m(t,Df,u=>u.name,xv);if(r){const u=_m(t,Un.getCompare());return new $t(a,ur(e),new dl({".priority":u},{".priority":Un}))}return new $t(a,ur(e),dl.Default)}}Object.defineProperties(qt,{MIN:{value:new qt(Ta,$t.EMPTY_NODE)},MAX:{value:new qt(ba,Af)}}),NC.__EMPTY_NODE=$t.EMPTY_NODE,Md.__childrenNodeConstructor=$t,function cA(n){gm=n}(Af),function FC(n){OC=n}(Af),function LC(n){mm=n}(ur);class vm extends hm{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Zu(e.name,t.name):a}makePost(e,t){const r=ur(e),i=$t.EMPTY_NODE.updateChild(this.indexPath_,r);return new qt(t,i)}maxPost(){const e=$t.EMPTY_NODE.updateChild(this.indexPath_,Af);return new qt(ba,e)}toString(){return bf(this.indexPath_,0).join("/")}}const Nv=new class UC extends hm{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qt.MIN}maxPost(){return qt.MAX}makePost(e,t){const r=ur(e);return new qt(t,r)}toString(){return".value"}},kd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gA=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=kd.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=kd.charAt(e[i]);return(0,L.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Im=function(n){if(n===""+im)return"-";const e=vf(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ba;const a=kd.charAt(kd.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Em=function(n){if(n===""+rC)return Ta;const e=vf(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+im:(delete t[t.length-1],t.join("")):(t[t.length-1]=kd.charAt(kd.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function kv(n){return{type:"value",snapshotNode:n}}function Zl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function xf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Rf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Lv{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(xf(t,d)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Zl(t,r)):u.trackChildChange(Rf(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Un,(i,a)=>{t.hasChild(i)||r.trackChildChange(xf(i,a))}),t.isLeafNode()||t.forEachChild(Un,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(Rf(i,a,u))}else r.trackChildChange(Zl(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$t.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Pf{constructor(e){this.indexedFilter_=new Lv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Pf.getStartPost_(e),this.endPost_=Pf.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new qt(t,r))||(r=$t.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=$t.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority($t.EMPTY_NODE);const a=this;return t.forEachChild(Un,(u,d)=>{a.matches(new qt(u,d))||(i=i.updateImmediateChild(u,$t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Od{constructor(e){this.rangedFilter_=new Pf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new qt(t,r))||(r=$t.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=$t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=$t.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const d=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let a,u,d,m;if(i=t.withIndex(this.index_),i=i.updatePriority($t.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();d=(P,V)=>S(V,P)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let v=0,b=!1;for(;m.hasNext();){const S=m.getNext();!b&&d(a,S)<=0&&(b=!0),b&&v<this.limit_&&d(S,u)<=0?v++:i=i.updateImmediateChild(S.name,$t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const S=this.index_.getCompare();u=(P,V)=>S(V,P)}else u=this.index_.getCompare();const d=e;(0,L.hu)(d.numChildren()===this.limit_,"");const m=new qt(t,r),v=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(d.hasChild(t)){const S=d.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||d.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const V=null==P?1:u(P,m);if(b&&!r.isEmpty()&&V>=0)return a?.trackChildChange(Rf(t,r,S)),d.updateImmediateChild(t,r);{a?.trackChildChange(xf(t,S));const ce=d.updateImmediateChild(t,$t.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(Zl(P.name,P.node)),ce.updateImmediateChild(P.name,P.node)):ce}}return r.isEmpty()?e:b&&u(v,m)>=0?(null!=a&&(a.trackChildChange(xf(v.name,v.node)),a.trackChildChange(Zl(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(v.name,$t.EMPTY_NODE)):e}}class Mf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Un}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ta}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ba}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Un}copy(){const e=new Mf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Nf(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function kf(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Of(n,e){const t=n.copy();return t.index_=e,t}function Cm(n){const e={};if(n.isDefault())return e;let t;return n.index_===Un?t="$priority":n.index_===Nv?t="$value":n.index_===Da?t="$key":((0,L.hu)(n.index_ instanceof vm,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Fv(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Un&&(e.i=n.index_.toString()),e}class Lf extends Av{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=Lf.getListenId_(e,r),d={};this.listens_[u]=d;const m=Cm(e._queryParams);this.restRequest_(a+".json",m,(v,b)=>{let S=b;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,u)===d){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=Lf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Cm(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,u)=>{let d=u;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let m=null;if(d.status>=200&&d.status<300){try{m=(0,L.cI)(d.responseText)}catch{Zn("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,m)}else 401!==d.status&&404!==d.status&&Zn("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class HC{constructor(){this.rootNode_=$t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ff(){return{value:null,children:new Map}}function Ld(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,Ff()),Ld(n.children.get(r),e=Rn(e),t)}}function Uv(n,e){if(tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Un,(r,i)=>{Ld(n,new En(r),i)}),Uv(n,e)}}if(n.children.size>0){const t=en(e);return e=Rn(e),n.children.has(t)&&Uv(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Vv(n,e,t){null!==n.value?t(e,n.value):function vA(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Vv(i,new En(e.toString()+"/"+r),t)})}class $C{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Wr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class EA{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $C(e);const r=1e4+2e4*Math.random();Dd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Wr(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Dd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bo=(()=>{return(n=bo||(bo={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",bo;var n})();function jv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Tm{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=bo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new En(e));return new Tm(pn(),t,this.revert)}}return(0,L.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new Tm(Rn(this.path),this.affectedTree,this.revert)}}class Fd{constructor(e,t){this.source=e,this.path=t,this.type=bo.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new Fd(this.source,pn()):new Fd(this.source,Rn(this.path))}}class Yl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=bo.OVERWRITE}operationForChild(e){return tn(this.path)?new Yl(this.source,pn(),this.snap.getImmediateChild(e)):new Yl(this.source,Rn(this.path),this.snap)}}class Ud{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=bo.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new En(e));return t.isEmpty()?null:t.value?new Yl(this.source,pn(),t.value):new Ud(this.source,pn(),t)}return(0,L.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ud(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class zC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Uf(n,e,t,r,i,a){const u=r.filter(d=>d.type===t);u.sort((d,m)=>function bA(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new qt(e.childName,e.snapshotNode),i=new qt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,m)),u.forEach(d=>{const m=function TA(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(v=>{v.respondsTo(d.type)&&e.push(v.createEvent(m,n.query_))})})}function Ql(n,e){return{eventCache:n,serverCache:e}}function Vd(n,e,t,r){return Ql(new hl(e,t,r),n.serverCache)}function Hv(n,e,t,r){return Ql(n.eventCache,new hl(e,t,r))}function Vf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let bm;class Vn{constructor(e,t=(()=>(bm||(bm=new Ki(qS)),bm))()){this.value=e,this.children=t}static fromObject(e){let t=new Vn(null);return Wr(e,(r,i)=>{t=t.set(new En(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:pn(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=a?{path:Pn(new En(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new Vn(null)}}set(e,t){if(tn(e))return new Vn(t,this.children);{const r=en(e),a=(this.children.get(r)||new Vn(null)).set(Rn(e),t),u=this.children.insert(r,a);return new Vn(this.value,u)}}remove(e){if(tn(e))return this.children.isEmpty()?new Vn(null):new Vn(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Vn(null):new Vn(this.value,a)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),a=(this.children.get(r)||new Vn(null)).setTree(Rn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Vn(this.value,u)}}fold(e){return this.fold_(pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Pn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const a=en(e),u=this.children.get(a);return u?u.findOnPath_(Rn(e),Pn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pn(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_(Rn(e),Pn(t,i),r):new Vn(null)}}foreach(e){this.foreach_(pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Pn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Sa{constructor(e){this.writeTree_=e}static empty(){return new Sa(new Vn(null))}}function Bf(n,e,t){if(tn(e))return new Sa(new Vn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=Di(i,e);return a=a.updateChild(u,t),new Sa(n.writeTree_.set(i,a))}{const i=new Vn(t),a=n.writeTree_.setTree(e,i);return new Sa(a)}}}function $v(n,e,t){let r=n;return Wr(t,(i,a)=>{r=Bf(r,Pn(e,i),a)}),r}function qC(n,e){if(tn(e))return Sa.empty();{const t=n.writeTree_.setTree(e,new Vn(null));return new Sa(t)}}function Wv(n,e){return null!=Ju(n,e)}function Ju(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Di(t.path,e)):null}function Bd(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Un,(r,i)=>{e.push(new qt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new qt(r,i.value))}),e}function Xl(n,e){if(tn(e))return n;{const t=Ju(n,e);return new Sa(null!=t?new Vn(t):n.writeTree_.subtree(e))}}function jf(n){return n.writeTree_.isEmpty()}function Si(n,e){return KC(pn(),n.writeTree_,e)}function KC(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=KC(Pn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Pn(n,".priority"),r)),t}}function jd(n,e){return XC(e,n)}function Dm(n,e){if(n.snap)return _s(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_s(Pn(n.path,t),e))return!0;return!1}function RA(n){return n.visible}function ZC(n,e,t){let r=Sa.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let d;if(a.snap)_s(t,u)?(d=Di(t,u),r=Bf(r,d,a.snap)):_s(u,t)&&(d=Di(u,t),r=Bf(r,pn(),a.snap.getChild(d)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(_s(t,u))d=Di(t,u),r=$v(r,d,a.children);else if(_s(u,t))if(d=Di(u,t),tn(d))r=$v(r,pn(),a.children);else{const m=(0,L.DV)(a.children,en(d));if(m){const v=m.getChild(Rn(d));r=Bf(r,pn(),v)}}}}}return r}function Gv(n,e,t,r,i){if(r||i){const a=Xl(n.visibleWrites,e);return!i&&jf(a)?t:i||null!=t||Wv(a,pn())?Si(ZC(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(_s(v.path,e)||_s(e,v.path))},e),t||$t.EMPTY_NODE):null}{const a=Ju(n.visibleWrites,e);if(null!=a)return a;{const u=Xl(n.visibleWrites,e);return jf(u)?t:null!=t||Wv(u,pn())?Si(u,t||$t.EMPTY_NODE):null}}}function Hd(n,e,t,r){return Gv(n.writeTree,n.treePath,e,t,r)}function $f(n,e){return function YC(n,e,t){let r=$t.EMPTY_NODE;const i=Ju(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Un,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=Xl(n.visibleWrites,e);return t.forEachChild(Un,(u,d)=>{const m=Si(Xl(a,new En(u)),d);r=r.updateImmediateChild(u,m)}),Bd(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return Bd(Xl(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function qv(n,e,t,r){return function zv(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Pn(e,t);if(Wv(n.visibleWrites,a))return null;{const u=Xl(n.visibleWrites,a);return jf(u)?i.getChild(t):Si(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function $d(n,e){return function PA(n,e){return Ju(n.visibleWrites,e)}(n.writeTree,Pn(n.treePath,e))}function Zv(n,e,t){return function QC(n,e,t,r){const i=Pn(e,t),a=Ju(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Si(Xl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function JC(n,e){return XC(Pn(n.treePath,e),n.writeTree)}function XC(n,e){return{treePath:n,writeTree:e}}class NA{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Rf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,xf(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Zl(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Rf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Am=new class eT{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class xm{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jl(this.viewCache_),a=function Kv(n,e,t,r,i,a){return function MA(n,e,t,r,i,a,u){let d;const m=Xl(n.visibleWrites,e),v=Ju(m,pn());if(null!=v)d=v;else{if(null==t)return[];d=Si(m,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const b=[],S=u.getCompare(),P=a?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let V=P.getNext();for(;V&&b.length<i;)0!==S(V,r)&&b.push(V),V=P.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Yv(n,e,t,r,i,a){const u=e.eventCache;if(null!=$d(r,t))return e;{let d,m;if(tn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Jl(e),S=$f(r,v instanceof $t?v:$t.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=Hd(r,Jl(e));d=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=en(t);if(".priority"===v){(0,L.hu)(1===To(t),"Can't have a priority with additional path components");const b=u.getNode();m=e.serverCache.getNode();const S=qv(r,t,b,m);d=null!=S?n.filter.updatePriority(b,S):u.getNode()}else{const b=Rn(t);let S;if(u.isCompleteForChild(v)){m=e.serverCache.getNode();const P=qv(r,t,u.getNode(),m);S=null!=P?u.getNode().getImmediateChild(v).updateChild(b,P):u.getNode().getImmediateChild(v)}else S=Zv(r,v,e.serverCache);d=null!=S?n.filter.updateChild(u.getNode(),v,S,b,i,a):u.getNode()}}return Vd(e,d,u.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function Wf(n,e,t,r,i,a,u,d){const m=e.serverCache;let v;const b=u?n.filter:n.filter.getIndexedFilter();if(tn(t))v=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);v=b.updateFullNode(m.getNode(),V,null)}else{const V=en(t);if(!m.isCompleteForPath(t)&&To(t)>1)return e;const G=Rn(t),ye=m.getNode().getImmediateChild(V).updateChild(G,r);v=".priority"===V?b.updatePriority(m.getNode(),ye):b.updateChild(m.getNode(),V,ye,G,Am,null)}const S=Hv(e,v,m.isFullyInitialized()||tn(t),b.filtersNodes());return Yv(n,S,t,i,new xm(i,S,a),d)}function Qv(n,e,t,r,i,a,u){const d=e.eventCache;let m,v;const b=new xm(i,e,a);if(tn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=Vd(e,v,!0,n.filter.filtersNodes());else{const S=en(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Vd(e,v,d.isFullyInitialized(),d.isFiltered());else{const P=Rn(t),V=d.getNode().getImmediateChild(S);let G;if(tn(P))G=r;else{const ce=b.getCompleteChild(S);G=null!=ce?".priority"===lm(P)&&ce.getChild(Pd(P)).isEmpty()?ce:ce.updateChild(P,r):$t.EMPTY_NODE}m=V.equals(G)?e:Vd(e,n.filter.updateChild(d.getNode(),S,G,P,b,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Jv(n,e){return n.eventCache.isCompleteForChild(e)}function pi(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function eu(n,e,t,r,i,a,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=tn(t)?r:new Vn(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(b.hasChild(S)){const G=pi(0,e.serverCache.getNode().getImmediateChild(S),P);m=Wf(n,m,new En(S),G,i,a,u,d)}}),v.children.inorderTraversal((S,P)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!b.hasChild(S)&&!V){const ce=pi(0,e.serverCache.getNode().getImmediateChild(S),P);m=Wf(n,m,new En(S),ce,i,a,u,d)}}),m}class RN{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Lv(r.getIndex()),a=function mA(n){return n.loadsAllData()?new Lv(n.getIndex()):n.hasLimit()?new Od(n):new Pf(n)}(r);this.processor_=function kA(n){return{filter:n}}(a);const u=t.serverCache,d=t.eventCache,m=i.updateFullNode($t.EMPTY_NODE,u.getNode(),null),v=a.updateFullNode($t.EMPTY_NODE,d.getNode(),null),b=new hl(m,u.isFullyInitialized(),i.filtersNodes()),S=new hl(v,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=Ql(S,b),this.eventGenerator_=new zC(this.query_)}get query(){return this.query_}}function Gf(n,e){const t=Jl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function oT(n){return 0===n.eventRegistrations_.length}function aT(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ew(n,e,t,r){e.type===bo.MERGE&&null!==e.source.queryId&&((0,L.hu)(Jl(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(Vf(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function nT(n,e,t,r,i){const a=new NA;let u,d;if(t.type===bo.OVERWRITE){const v=t;v.source.fromUser?u=Qv(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered()&&!tn(v.path),u=Wf(n,e,v.path,v.snap,r,i,d,a))}else if(t.type===bo.MERGE){const v=t;v.source.fromUser?u=function rT(n,e,t,r,i,a,u){let d=e;return r.foreach((m,v)=>{const b=Pn(t,m);Jv(e,en(b))&&(d=Qv(n,d,b,v,i,a,u))}),r.foreach((m,v)=>{const b=Pn(t,m);Jv(e,en(b))||(d=Qv(n,d,b,v,i,a,u))}),d}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||e.serverCache.isFiltered(),u=eu(n,e,v.path,v.children,r,i,d,a))}else if(t.type===bo.ACK_USER_WRITE){const v=t;u=v.revert?function xN(n,e,t,r,i,a){let u;if(null!=$d(r,t))return e;{const d=new xm(r,e,i),m=e.eventCache.getNode();let v;if(tn(t)||".priority"===en(t)){let b;if(e.serverCache.isFullyInitialized())b=Hd(r,Jl(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof $t,"serverChildren would be complete if leaf node"),b=$f(r,S)}v=n.filter.updateFullNode(m,b,a)}else{const b=en(t);let S=Zv(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=m.getImmediateChild(b)),v=null!=S?n.filter.updateChild(m,b,S,Rn(t),d,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,$t.EMPTY_NODE,Rn(t),d,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Hd(r,Jl(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=$d(r,pn()),Vd(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function LA(n,e,t,r,i,a,u){if(null!=$d(i,t))return e;const d=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(tn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Wf(n,e,t,m.getNode().getChild(t),i,a,d,u);if(tn(t)){let v=new Vn(null);return m.getNode().forEachChild(Da,(b,S)=>{v=v.set(new En(b),S)}),eu(n,e,t,v,i,a,d,u)}return e}{let v=new Vn(null);return r.foreach((b,S)=>{const P=Pn(t,b);m.isCompleteForPath(P)&&(v=v.set(b,m.getNode().getChild(P)))}),eu(n,e,t,v,i,a,d,u)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==bo.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);u=function FA(n,e,t,r,i){const a=e.serverCache;return Yv(n,Hv(e,a.getNode(),a.isFullyInitialized()||tn(t),a.isFiltered()),t,r,Am,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function OA(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Vf(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(kv(Vf(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function tT(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,lT(n,a.changes,a.viewCache.eventCache.getNode(),null)}function lT(n,e,t,r){return function CA(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function Ov(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Uf(n,i,"child_removed",e,r,t),Uf(n,i,"child_added",e,r,t),Uf(n,i,"child_moved",a,r,t),Uf(n,i,"child_changed",e,r,t),Uf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Rm,Nm;class Pm{constructor(){this.views=new Map}}function zf(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),ew(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(ew(u,e,t,r));return a}}function VA(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=Hd(t,i?r:null),m=!1;d?m=!0:r instanceof $t?(d=$f(t,r),m=!1):(d=$t.EMPTY_NODE,m=!1);const v=Ql(new hl(d,m,!1),new hl(r,i,!1));return new RN(e,v)}return u}function tw(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ys(n,e){let t=null;for(const r of n.views.values())t=t||Gf(r,e);return t}function hT(n,e){return e._queryParams.loadsAllData()?rw(n):n.views.get(e._queryIdentifier)}function nw(n,e){return null!=hT(n,e)}function Aa(n){return null!=rw(n)}function rw(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let HA=1;class fT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vn(null),this.pendingWriteTree_=function AN(){return{visibleWrites:Sa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function km(n,e,t,r,i){return function Hf(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Bf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Gd(n,new Yl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function tu(n,e,t=!1){const r=function AA(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function xA(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&Dm(d,r.path)?i=!1:_s(r.path,d.path)&&(a=!0)),u--}return!!i&&(a?(function Sm(n){n.visibleWrites=ZC(n.allWrites,RA,pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=qC(n.visibleWrites,r.path):Wr(r.children,m=>{n.visibleWrites=qC(n.visibleWrites,Pn(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Vn(null);return null!=r.snap?a=a.set(pn(),!0):Wr(r.children,u=>{a=a.set(new En(u),!0)}),Gd(n,new Tm(r.path,a,t))}return[]}function Wd(n,e,t){return Gd(n,new Yl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function qf(n,e,t,r,i=!1){const a=e._path,u=n.syncPointTree_.get(a);let d=[];if(u&&("default"===e._queryIdentifier||nw(u,e))){const m=function BA(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const d=Aa(n);if("default"===i)for(const[m,v]of n.views.entries())u=u.concat(aT(v,t,r)),oT(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(u=u.concat(aT(m,t,r)),oT(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return d&&!Aa(n)&&a.push(new(function cT(){return(0,L.hu)(Rm,"Reference.ts has not been loaded"),Rm}())(e._repo,e._path)),{removed:a,events:u}}(u,e,t,r);(function Mm(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(d=m.events,!i){const b=-1!==v.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,V)=>Aa(V));if(b&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const V=function MN(n){return n.fold((e,t,r)=>{if(t&&Aa(t))return[rw(t)];{let i=[];return t&&(i=tw(t)),Wr(r,(a,u)=>{i=i.concat(u)}),i}})}(P);for(let G=0;G<V.length;++G){const ce=V[G],ye=ce.query,ot=iw(n,ce);n.listenProvider_.startListening(Fm(ye),Lm(n,ye),ot.hashFn,ot.onComplete)}}}!S&&v.length>0&&!r&&(b?n.listenProvider_.stopListening(Fm(e),null):v.forEach(P=>{const V=n.queryToTagMap.get(sw(P));n.listenProvider_.stopListening(Fm(P),V)}))}!function NN(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=sw(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return d}function mT(n,e,t,r){const i=wT(n,r);if(null!=i){const a=IT(i),u=a.path,d=a.queryId,m=Di(u,e);return ET(n,u,new Yl(jv(d),m,t))}return[]}function Om(n,e,t,r=!1){const i=e._path;let a=null,u=!1;n.syncPointTree_.foreachOnPath(i,(P,V)=>{const G=Di(P,i);a=a||ys(V,G),u=u||Aa(V)});let m,d=n.syncPointTree_.get(i);d?(u=u||Aa(d),a=a||ys(d,pn())):(d=new Pm,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?m=!0:(m=!1,a=$t.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,G)=>{const ce=ys(G,pn());ce&&(a=a.updateImmediateChild(V,ce))}));const v=nw(d,e);if(!v&&!e._queryParams.loadsAllData()){const P=sw(e);(0,L.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const V=function Um(){return HA++}();n.queryToTagMap.set(P,V),n.tagToQueryMap.set(V,P)}let S=function dT(n,e,t,r,i,a){const u=VA(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function Xv(n,e){n.eventRegistrations_.push(e)}(u,t),function UA(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Un,(a,u)=>{r.push(Zl(a,u))}),t.isFullyInitialized()&&r.push(kv(t.getNode())),lT(n,r,t.getNode(),e)}(u,t)}(d,e,t,jd(n.pendingWriteTree_,i),a,m);if(!v&&!u&&!r){const P=hT(d,e);S=S.concat(function kN(n,e,t){const r=e._path,i=Lm(n,e),a=iw(n,t),u=n.listenProvider_.startListening(Fm(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Aa(d.value),"If we're adding a query, it shouldn't be shadowed");else{const m=d.fold((v,b,S)=>{if(!tn(v)&&b&&Aa(b))return[rw(b).query];{let P=[];return b&&(P=P.concat(tw(b).map(V=>V.query))),Wr(S,(V,G)=>{P=P.concat(G)}),P}});for(let v=0;v<m.length;++v){const b=m[v];n.listenProvider_.stopListening(Fm(b),Lm(n,b))}}return u}(n,e,P))}return S}function Kf(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,d)=>{const v=ys(d,Di(u,e));if(v)return v});return Gv(i,e,a,t,!0)}function Gd(n,e){return vT(e,n.syncPointTree_,null,jd(n.pendingWriteTree_,pn()))}function vT(n,e,t,r){if(tn(n.path))return GA(n,e,t,r);{const i=e.get(pn());null==t&&null!=i&&(t=ys(i,pn()));let a=[];const u=en(n.path),d=n.operationForChild(u),m=e.children.get(u);if(m&&d){const v=t?t.getImmediateChild(u):null,b=JC(r,u);a=a.concat(vT(d,m,v,b))}return i&&(a=a.concat(zf(i,n,r,t))),a}}function GA(n,e,t,r){const i=e.get(pn());null==t&&null!=i&&(t=ys(i,pn()));let a=[];return e.children.inorderTraversal((u,d)=>{const m=t?t.getImmediateChild(u):null,v=JC(r,u),b=n.operationForChild(u);b&&(a=a.concat(GA(b,d,m,v)))}),i&&(a=a.concat(zf(i,n,r,t))),a}function iw(n,e){const t=e.query,r=Lm(n,t);return{hashFn:()=>(function iT(n){return n.viewCache_.serverCache.getNode()}(e)||$t.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function WA(n,e,t){const r=wT(n,t);if(r){const i=IT(r),a=i.path,u=i.queryId,d=Di(a,e);return ET(n,a,new Fd(jv(u),d))}return[]}(n,t._path,r):function $A(n,e){return Gd(n,new Fd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function nC(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return qf(n,t,null,a)}}}}function Lm(n,e){const t=sw(e);return n.queryToTagMap.get(t)}function sw(n){return n._path.toString()+"$"+n._queryIdentifier}function wT(n,e){return n.tagToQueryMap.get(e)}function IT(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new En(n.substr(0,e))}}function ET(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),zf(r,t,jd(n.pendingWriteTree_,e),null)}function Fm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function jA(){return(0,L.hu)(Nm,"Reference.ts has not been loaded"),Nm}())(n._repo,n._path):n}class Vm{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Vm(t)}node(){return this.node_}}class zd{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Pn(this.path_,e);return new zd(this.syncTree_,t)}node(){return Kf(this.syncTree_,this.path_)}}const ow=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?ON(n[".sv"],e,t):"object"==typeof n[".sv"]?aw(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},ON=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},aw=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},lw=function(n,e,t,r){return Bm(e,new zd(t,n),r)},uw=function(n,e,t){return Bm(n,new Vm(e),t)};function Bm(n,e,t){const r=n.getPriority().val(),i=ow(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,d=ow(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new Md(d,ur(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new Md(i))),u.forEachChild(Un,(d,m)=>{const v=Bm(m,e.getImmediateChild(d),t);v!==m&&(a=a.updateImmediateChild(d,v))}),a}}class TT{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function cw(n,e){let t=e instanceof En?e:new En(e),r=n,i=en(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new TT(i,r,a),t=Rn(t),i=en(t)}return r}function Xu(n){return n.node.value}function dw(n,e){n.node.value=e,fw(n)}function Zf(n){return n.node.childCount>0}function hw(n,e){Wr(n.node.children,(t,r)=>{e(new TT(t,n,r))})}function qA(n,e,t,r){t&&!r&&e(n),hw(n,i=>{qA(i,e,!0,r)}),t&&r&&e(n)}function Yf(n){return new En(null===n.parent?n.name:Yf(n.parent)+"/"+n.name)}function fw(n){null!==n.parent&&function KA(n,e,t){const r=function zA(n){return void 0===Xu(n)&&!Zf(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,fw(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,fw(n))}(n.parent,n.name,n)}const FN=/[\[\].#$\/\u0000-\u001F\u007F]/,ZA=/[\[\].#$\u0000-\u001F\u007F]/,jm=10485760,Qf=function(n){return"string"==typeof n&&0!==n.length&&!FN.test(n)},YA=function(n){return"string"==typeof n&&0!==n.length&&!ZA.test(n)},Jf=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!qi(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Ws=function(n,e,t,r){r&&void 0===e||Xf((0,L.gK)(n,"value"),e,t)},Xf=function(n,e,t){const r=t instanceof En?new SC(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Qu(r));if("function"==typeof e)throw new Error(n+"contains a function "+Qu(r)+" with contents = "+e.toString());if(qi(e))throw new Error(n+"contains "+e.toString()+" "+Qu(r));if("string"==typeof e&&e.length>jm/3&&(0,L.ug)(e)>jm)throw new Error(n+"contains a string greater than "+jm+" utf8 bytes "+Qu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Wr(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!Qf(u)))throw new Error(n+" contains an invalid key ("+u+") "+Qu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function oA(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),xC(n)})(r,u),Xf(n,d,r),function AC(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Qu(r)+" in addition to actual children.")}},bT=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Wr(e,(u,d)=>{const m=new En(u);if(Xf(i,d,Pn(t,m)),".priority"===lm(m)&&!Jf(d))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=bf(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!Qf(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(sA);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&_s(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},ep=function(n,e,t){if(!t||void 0!==e){if(qi(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Jf(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},tp=function(n,e,t,r){if(!(r&&void 0===t||Qf(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},np=function(n,e,t,r){if(!(r&&void 0===t||YA(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vs=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},gw=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Qf(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YA(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class QA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rp(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!um(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function mw(n,e,t){rp(n,t),_w(n,r=>um(r,e))}function ws(n,e,t){rp(n,t),_w(n,r=>_s(r,e)||_s(e,r))}function _w(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(JA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function JA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Gl&&kr("event: "+t.toString()),zl(r)}}}const Hm="repo_interrupt";class DT{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ff(),this.transactionQueueTree_=new TT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xa(n){const t=n.infoData_.getNode(new En(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ip(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:xa(n)})}function XA(n,e,t,r,i){n.dataUpdateCount++;const a=new En(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,L.UI)(t,v=>ur(v));u=function _T(n,e,t,r){const i=wT(n,r);if(i){const a=IT(i),u=a.path,d=a.queryId,m=Di(u,e),v=Vn.fromObject(t);return ET(n,u,new Ud(jv(d),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=ur(t);u=mT(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,L.UI)(t,v=>ur(v));u=function gT(n,e,t){const r=Vn.fromObject(t);return Gd(n,new Ud({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=ur(t);u=Wd(n.serverSyncTree_,a,m)}let d=a;u.length>0&&(d=qd(n,a)),ws(n.eventQueue_,d,u)}function ST(n,e){vw(n,"connected",e),!1===e&&function tx(n){fl(n,"onDisconnectEvents");const e=ip(n),t=Ff();Vv(n.onDisconnect_,pn(),(i,a)=>{const u=lw(i,a,n.serverSyncTree_,e);Ld(t,i,u)});let r=[];Vv(t,pn(),(i,a)=>{r=r.concat(Wd(n.serverSyncTree_,i,a));const u=Tw(n,i);qd(n,u)}),n.onDisconnect_=Ff(),ws(n.eventQueue_,pn(),r)}(n)}function vw(n,e,t){const r=new En("/.info/"+e),i=ur(t);n.infoData_.updateSnapshot(r,i);const a=Wd(n.infoSyncTree_,r,i);ws(n.eventQueue_,r,a)}function $m(n){return n.nextWriteId_++}function xT(n,e,t,r,i){fl(n,"set",{path:e.toString(),value:t,priority:r});const a=ip(n),u=ur(t,r),d=Kf(n.serverSyncTree_,e),m=uw(u,d,a),v=$m(n),b=km(n.serverSyncTree_,e,m,v,!0);rp(n.eventQueue_,b),n.server_.put(e.toString(),u.val(!0),(P,V)=>{const G="ok"===P;G||Zn("set at "+e+" failed: "+P);const ce=tu(n.serverSyncTree_,v,!G);ws(n.eventQueue_,e,ce),So(0,i,P,V)});const S=Tw(n,e);qd(n,S),ws(n.eventQueue_,S,[])}function PT(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Uv(n.onDisconnect_,e),So(0,t,r,i)})}function nx(n,e,t,r){const i=ur(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&Ld(n.onDisconnect_,e,i),So(0,r,a,u)})}function Wm(n,e,t){let r;r=".info"===en(e._path)?qf(n.infoSyncTree_,e,t):qf(n.serverSyncTree_,e,t),mw(n.eventQueue_,e._path,r)}function Iw(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Hm)}function fl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),kr(t,...e)}function So(n,e,t,r){e&&zl(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function Ew(n,e,t){return Kf(n.serverSyncTree_,e,t)||$t.EMPTY_NODE}function sp(n,e=n.transactionQueueTree_){if(e||Gm(n,e),Xu(e)){const t=sx(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function LT(n,e,t){const r=t.map(v=>v.currentWriteId),i=Ew(n,e,r);let a=i;const u=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,L.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=Di(e,b.path);a=a.updateChild(S,b.currentOutputSnapshotRaw)}const d=a.val(!0),m=e;n.server_.put(m.toString(),d,v=>{fl(n,"transaction put response",{path:m.toString(),status:v});let b=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,b=b.concat(tu(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Gm(n,cw(n.transactionQueueTree_,e)),sp(n,n.transactionQueueTree_),ws(n.eventQueue_,e,b);for(let P=0;P<S.length;P++)zl(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Zn("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}qd(n,e)}},u)}(n,Yf(e),t)}else Zf(e)&&hw(e,t=>{sp(n,t)})}function qd(n,e){const t=ix(n,e),r=Yf(t);return function rx(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const m=e[d],v=Di(t,m.path);let S,b=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,S=m.abortReason,i=i.concat(tu(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)b=!0,S="maxretry",i=i.concat(tu(n.serverSyncTree_,m.currentWriteId,!0));else{const P=Ew(n,m.path,u);m.currentInputSnapshot=P;const V=e[d].update(P.val());if(void 0!==V){Xf("transaction failed: Data returned ",V,m.path);let G=ur(V);"object"==typeof V&&null!=V&&(0,L.r3)(V,".priority")||(G=G.updatePriority(P.getPriority()));const ye=m.currentWriteId,ot=ip(n),dt=uw(G,P,ot);m.currentOutputSnapshotRaw=G,m.currentOutputSnapshotResolved=dt,m.currentWriteId=$m(n),u.splice(u.indexOf(ye),1),i=i.concat(km(n.serverSyncTree_,m.path,dt,m.currentWriteId,m.applyLocally)),i=i.concat(tu(n.serverSyncTree_,ye,!0))}else b=!0,S="nodata",i=i.concat(tu(n.serverSyncTree_,m.currentWriteId,!0))}ws(n.eventQueue_,t,i),i=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===S?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(S),!1,null)))}Gm(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)zl(r[d]);sp(n,n.transactionQueueTree_)}(n,sx(n,t),r),r}function ix(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===Xu(r);)r=cw(r,t),t=en(e=Rn(e));return r}function sx(n,e){const t=[];return Cw(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Cw(n,e,t){const r=Xu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);hw(e,i=>{Cw(n,i,t)})}function Gm(n,e){const t=Xu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,dw(e,t.length>0?t:void 0)}hw(e,r=>{Gm(n,r)})}function Tw(n,e){const t=Yf(ix(n,e)),r=cw(n.transactionQueueTree_,e);return function LN(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{bw(n,i)}),bw(n,r),qA(r,i=>{bw(n,i)}),t}function bw(n,e){const t=Xu(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,L.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,L.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(tu(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?dw(e,void 0):t.length=a+1,ws(n.eventQueue_,Yf(e),i);for(let u=0;u<r.length;u++)zl(r[u])}}const FT=function(n,e){const t=BN(n),r=t.namespace;return"firebase.com"===t.domain&&Eo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Eo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gv(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new En(t.pathString)}},BN=function(n){let e="",t="",r="",i="",a="",u=!0,d="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(d=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function UN(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const P=function VN(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zn(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(u="https"===d||"wss"===d,m=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:a}};class ox{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class UT{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Kd{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class VT{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return PT(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){vs("OnDisconnect.remove",this._path);const e=new L.BH;return nx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){vs("OnDisconnect.set",this._path),Ws("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return nx(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){vs("OnDisconnect.setWithPriority",this._path),Ws("OnDisconnect.setWithPriority",e,this._path,!1),ep("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function ww(n,e,t,r,i){const a=ur(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,d)=>{"ok"===u&&Ld(n.onDisconnect_,e,a),So(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){vs("OnDisconnect.update",this._path),bT("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function MT(n,e,t,r){if((0,L.xb)(t))return kr("onDisconnect().update() called with empty data.  Don't do anything."),void So(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Wr(t,(u,d)=>{const m=ur(d);Ld(n.onDisconnect_,Pn(e,u),m)}),So(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Zi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:lm(this._path)}get ref(){return new Qi(this._repo,this._path)}get _queryIdentifier(){const e=Fv(this._queryParams),t=yf(e);return"{}"===t?"default":t}get _queryObject(){return Fv(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof Zi))return!1;const t=this._repo===e._repo,r=um(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function DC(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function op(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Yi(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Da){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ta)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ba)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Un){if(null!=e&&!Jf(e)||null!=t&&!Jf(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof vm||n.getIndex()===Nv,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ap(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Qi extends Zi{constructor(e,t){super(e,t,new Mf,!1)}get parent(){const e=Pd(this._path);return null===e?null:new Qi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class pl{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new En(e),r=gl(this.ref,e);return new pl(this._node.getChild(t),r,Un)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new pl(i,gl(this.ref,r),Un)))}hasChild(e){const t=new En(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function BT(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?gl(n._root,e):n._root}function zm(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=FT(e,n._repo.repoInfo_.nodeAdmin);gw("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Eo("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),BT(n,t.path.toString())}function gl(n,e){return null===en((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),np("child","path",t,!1)):np("child","path",e,!1),new Qi(n._repo,Pn(n._path,e));var t}function jT(n,e){n=(0,L.m9)(n),vs("set",n._path),Ws("set",e,n._path,!1);const t=new L.BH;return xT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ax(n,e){bT("update",e,n._path,!1);const t=new L.BH;return function RT(n,e,t,r){fl(n,"update",{path:e.toString(),value:t});let i=!0;const a=ip(n),u={};if(Wr(t,(d,m)=>{i=!1,u[d]=lw(Pn(e,d),ur(m),n.serverSyncTree_,a)}),i)kr("update() called with empty data.  Don't do anything."),So(0,r,"ok",void 0);else{const d=$m(n),m=function pT(n,e,t,r){!function SA(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=$v(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Vn.fromObject(t);return Gd(n,new Ud({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);rp(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,b)=>{const S="ok"===v;S||Zn("update at "+e+" failed: "+v);const P=tu(n.serverSyncTree_,d,!S),V=P.length>0?qd(n,e):e;ws(n.eventQueue_,V,P),So(0,r,v,b)}),Wr(t,v=>{const b=Tw(n,Pn(e,v));qd(n,b)}),ws(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function lx(n){n=(0,L.m9)(n);const e=new Kd(()=>{}),t=new lp(e);return function AT(n,e,t){const r=function yT(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,b)=>{const S=Di(v,t);r=r||ys(b,S)});let i=n.syncPointTree_.get(t);i?r=r||ys(i,pn()):(i=new Pm,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new hl(r,!0,!1):null;return function sT(n){return Vf(n.viewCache_)}(VA(i,e,jd(n.pendingWriteTree_,e._path),a?u.getNode():$t.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=ur(i).withIndex(e._queryParams.getIndex());let u;if(Om(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=Wd(n.serverSyncTree_,e._path,a);else{const d=Lm(n.serverSyncTree_,e);u=mT(n.serverSyncTree_,e._path,a,d)}return ws(n.eventQueue_,e._path,u),qf(n.serverSyncTree_,e,t,null,!0),a},i=>(fl(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new pl(r,new Qi(n._repo,n._path),n._queryParams.getIndex()))}class lp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new ox("value",this,new pl(e.snapshotNode,new Qi(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UT(this,e,t):null}matches(e){return e instanceof lp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class qm{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UT(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=gl(new Qi(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new ox(e.type,this,new pl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof qm&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Zd(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(b,S)=>{Wm(n._repo,n,d),m(b,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const u=new Kd(t,a||void 0),d="value"===e?new lp(u):new qm(e,u);return function NT(n,e,t){let r;r=".info"===en(e._path)?Om(n.infoSyncTree_,e,t):Om(n.serverSyncTree_,e,t),mw(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>Wm(n._repo,n,d)}function Km(n,e,t,r){return Zd(n,"value",e,t,r)}function Sw(n,e,t,r){return Zd(n,"child_added",e,t,r)}function $T(n,e,t,r){return Zd(n,"child_changed",e,t,r)}function WT(n,e,t,r){return Zd(n,"child_moved",e,t,r)}function Aw(n,e,t,r){return Zd(n,"child_removed",e,t,r)}function Zm(n,e,t){let r=null;const i=t?new Kd(t):null;"value"===e?r=new lp(i):e&&(r=new qm(e,i)),Wm(n._repo,n,r)}class Ra{}class xw extends Ra{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ws("endAt",this._value,e._path,!0);const t=kf(e._queryParams,this._value,this._key);if(ap(t),Yi(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)}}class ux extends Ra{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ws("endBefore",this._value,e._path,!1);const t=function yA(n,e,t){let r,i;return n.index_===Da?("string"==typeof e&&(e=Em(e)),i=kf(n,e,t)):(r=null==t?Ta:Em(t),i=kf(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ap(t),Yi(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)}}class dx extends Ra{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ws("startAt",this._value,e._path,!0);const t=Nf(e._queryParams,this._value,this._key);if(ap(t),Yi(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)}}class hx extends Ra{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ws("startAfter",this._value,e._path,!1);const t=function _A(n,e,t){let r;if(n.index_===Da)"string"==typeof e&&(e=Im(e)),r=Nf(n,e,t);else{let i;i=null==t?ba:Im(t),r=Nf(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ap(t),Yi(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)}}class px extends Ra{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zi(e._repo,e._path,function SN(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class zN extends Ra{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zi(e._repo,e._path,function jC(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class KN extends Ra{constructor(e){super(),this._path=e}_apply(e){op(e,"orderByChild");const t=new En(this._path);if(tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new vm(t),i=Of(e._queryParams,r);return Yi(i),new Zi(e._repo,e._path,i,!0)}}class gx extends Ra{_apply(e){op(e,"orderByKey");const t=Of(e._queryParams,Da);return Yi(t),new Zi(e._repo,e._path,t,!0)}}class QN extends Ra{_apply(e){op(e,"orderByPriority");const t=Of(e._queryParams,Un);return Yi(t),new Zi(e._repo,e._path,t,!0)}}class XN extends Ra{_apply(e){op(e,"orderByValue");const t=Of(e._queryParams,Nv);return Yi(t),new Zi(e._repo,e._path,t,!0)}}class tk extends Ra{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ws("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xw(this._value,this._key)._apply(new dx(this._value,this._key)._apply(e))}}function o(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function uT(n){(0,L.hu)(!Rm,"__referenceConstructor has already been defined"),Rm=n})(Qi),function PN(n){(0,L.hu)(!Nm,"__referenceConstructor has already been defined"),Nm=n}(Qi);const c={};function y(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Eo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,u=FT(a,i),d=u.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${d.namespace}`,u=FT(a,i),d=u.repoInfo):m=!u.repoInfo.secure;const b=i&&m?new Sd(Sd.OWNER):new sC(n.name,n.options,e);gw("Invalid Firebase Database URL",u),tn(u.path)||Eo("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function C(n,e,t,r){let i=c[e.name];i||(i={},c[e.name]=i);let a=i[n.toURLString()];return a&&Eo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new DT(n,false,t,r),i[n.toURLString()]=a,a}(d,n,b,new iC(n.name,t));return new N(S,n)}class N{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function yw(n,e,t){if(n.stats_=yv(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Lf(n.repoInfo_,(r,i,a,u)=>{XA(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ST(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Kl(n.repoInfo_,e,(r,i,a,u)=>{XA(n,r,i,a,u)},r=>{ST(n,r)},r=>{!function ex(n,e){Wr(e,(t,r)=>{vw(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function QS(n,e){const t=n.toString();return _v[t]||(_v[t]=e()),_v[t]}(n.repoInfo_,()=>new EA(n.stats_,n.server_)),n.infoData_=new HC,n.infoSyncTree_=new fT({startListening:(r,i,a,u)=>{let d=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(d=Wd(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),vw(n,"connected",!1),n.serverSyncTree_=new fT({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(d,m)=>{const v=u(d,m);ws(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qi(this._repo,pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function I(n,e){const t=c[e];(!t||t[n.key]!==n)&&Eo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Iw(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Eo("Cannot call "+e+" on a deleted database.")}}function U(){Dt.IS_TRANSPORT_INITIALIZED&&Zn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Z(){U(),Yu.forceDisallow()}function re(){U(),Cf.forceDisallow(),Yu.forceAllow()}function Tt(n,e){lv(n,e)}const Mt={".sv":"timestamp"};class ec{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Kl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Kl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ke(n){QE(bi.SDK_VERSION),(0,bi._registerComponent)(new Ea.wA("database",(e,{instanceIdentifier:t})=>y(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(Dr,iv,n),(0,bi.registerVersion)(Dr,iv,"esm2017")}();const kw=new wo.Yd("@firebase/database-compat"),Ym=function(n){kw.warn("FIREBASE WARNING: "+n)};class BU{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Ym("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class jU{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Yd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),np("DataSnapshot.child","path",e,!1),new Yd(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),np("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Yd(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ao(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ai{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const u=Ai.getCancelAndContextArgs_("Query.on",r,i),d=(v,b)=>{t.call(u.context,new Yd(this.database,v),b)};d.userCallback=t,d.context=u.context;const m=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return Km(this._delegate,d,m),t;case"child_added":return Sw(this._delegate,d,m),t;case"child_removed":return Aw(this._delegate,d,m),t;case"child_changed":return $T(this._delegate,d,m),t;case"child_moved":return WT(this._delegate,d,m),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Zm(this._delegate,e,i)}else Zm(this._delegate,e)}get(){return lx(this._delegate).then(e=>new Yd(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=Ai.getCancelAndContextArgs_("Query.once",r,i),u=new L.BH,d=(v,b)=>{const S=new Yd(this.database,v);t&&t.call(a.context,S,b),u.resolve(S)};d.userCallback=t,d.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),u.reject(v)};switch(e){case"value":Km(this._delegate,d,m,{onlyOnce:!0});break;case"child_added":Sw(this._delegate,d,m,{onlyOnce:!0});break;case"child_removed":Aw(this._delegate,d,m,{onlyOnce:!0});break;case"child_changed":$T(this._delegate,d,m,{onlyOnce:!0});break;case"child_moved":WT(this._delegate,d,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Ai(this.database,o(this._delegate,function GN(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new px(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Ai(this.database,o(this._delegate,function qN(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new zN(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Ai(this.database,o(this._delegate,function ZN(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return np("orderByChild","path",n,!1),new KN(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Ai(this.database,o(this._delegate,function YN(){return new gx}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Ai(this.database,o(this._delegate,function JN(){return new QN}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Ai(this.database,o(this._delegate,function ek(){return new XN}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Ai(this.database,o(this._delegate,function WN(n=null,e){return tp("startAt","key",e,!0),new dx(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Ai(this.database,o(this._delegate,function fx(n,e){return tp("startAfter","key",e,!0),new hx(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Ai(this.database,o(this._delegate,function Rw(n,e){return tp("endAt","key",e,!0),new xw(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Ai(this.database,o(this._delegate,function cx(n,e){return tp("endBefore","key",e,!0),new ux(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Ai(this.database,o(this._delegate,function s(n,e){return tp("equalTo","key",e,!0),new tk(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ai))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ao(this.database,new Qi(this._delegate._repo,this._delegate._path))}}class Ao extends Ai{constructor(e,t){super(e,new Zi(t._repo,t._path,new Mf,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ao(this.database,gl(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ao(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Ao(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=jT(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Ym("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vs("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=ax(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function HT(n,e,t){if(vs("setWithPriority",n._path),Ws("setWithPriority",e,n._path,!1),ep("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return xT(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function HN(n){return vs("remove",n._path),jT(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Pw(n,e,t){var r;if(n=(0,L.m9)(n),vs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,d=Km(n,()=>{});return function OT(n,e,t,r,i,a){fl(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:XE(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Ew(n,e,void 0);u.currentInputSnapshot=d;const m=u.update(d.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Xf("transaction failed: Data returned ",m,u.path),u.status=0;const v=cw(n.transactionQueueTree_,e),b=Xu(v)||[];let S;b.push(u),dw(v,b),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(S=(0,L.DV)(m,".priority"),(0,L.hu)(Jf(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Kf(n.serverSyncTree_,e)||$t.EMPTY_NODE).getPriority().val();const P=ip(n),V=ur(m,S),G=uw(V,d,P);u.currentOutputSnapshotRaw=V,u.currentOutputSnapshotResolved=G,u.currentWriteId=$m(n);const ce=km(n.serverSyncTree_,e,G,u.currentWriteId,u.applyLocally);ws(n.eventQueue_,e,ce),sp(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,b)=>{let S=null;m?a.reject(m):(S=new pl(b,new Qi(n._repo,n._path),Un),a.resolve(new ec(v,S)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new jU(a.committed,new Yd(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function $N(n,e){n=(0,L.m9)(n),vs("setPriority",n._path),ep("setPriority",e,!1);const t=new L.BH;return xT(n._repo,Pn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function jN(n,e){n=(0,L.m9)(n),vs("push",n._path),Ws("push",e,n._path,!0);const t=xa(n._repo),r=gA(t),i=gl(n,r),a=gl(n,r);let u;return u=null!=e?jT(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Ao(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new Ao(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return vs("Reference.onDisconnect",this._delegate._path),new BU(new VT(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Z,forceLongPolling:re}}useEmulator(e,t,r={}){!function We(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Eo("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Eo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Sd(Sd.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new Sd(u)}!function f(n,e,t,r){n.repoInfo_=new gv(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Ao){const t=zm(this._delegate,e.toString());return new Ao(this,t)}{const t=BT(this._delegate,e);return new Ao(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=zm(this._delegate,e);return new Ao(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function qe(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),Iw(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function ct(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function kT(n){n.persistentConnection_&&n.persistentConnection_.resume(Hm)}(n._repo)}(this._delegate)}}Fw.ServerValue={TIMESTAMP:function vn(){return Mt}(),increment:n=>function tr(n){return{".sv":{increment:n}}}(n)};var $U=Object.freeze({__proto__:null,initStandalone:function HU({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){QE(t);const u=new Ea.zt("auth-internal",new Ea.H0("database-standalone"));return u.setComponent(new Ea.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Fw(y(n,u,void 0,e,a),n),namespace:i}}});const WU=Fw.ServerValue;function nk(n){return null==n}function rk(n){return"function"==typeof n.set}function ik(n,e){return rk(e)?e:n.ref(e)}function sk(n,e){if(function zU(n){return"string"==typeof n}(n))return e.stringCase();if(rk(n))return e.firebaseCase();if(function qU(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Uw(n,e,t="on",r=nm.z){return new Tr.y(i=>{let a=null;return a=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,st.U)(i=>{const{snapshot:a,prevKey:u}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:u,key:d}}),(0,Mg.B)())}function ok(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function YU(n,e){const{payload:t,prevKey:r,key:i}=e,a=ok(n,i),u=function ZU(n,e){if(nk(e))return 0;{const t=ok(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:d,key:m.key};return d=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function ak(n){return(nk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function lk(n,e,t){return function KU(n,e,t){return Uw(n,"value","once",t).pipe(zn(r=>{const i=[at(r)];return e.forEach(a=>i.push(Uw(n,a,"on",t))),(0,Pg.T)(...i).pipe(Pt(YU,[]))}),nv())}(n,e=ak(e),t)}function uk(n,e,t){const r=(e=ak(e)).map(i=>Uw(n,i,"on",t));return(0,Pg.T)(...r)}function ck(n,e){return function(r,i){return sk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function eV(n){return function(t){return t?sk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function dk(n,e){return function(){return Uw(n,"value","on",e)}}!function GU(n){n.INTERNAL.registerComponent(new Ea.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Fw(i,r)},"PUBLIC").setServiceProps({Reference:Ao,Query:Ai,Database:Fw,DataSnapshot:Yd,enableLogging:Tt,INTERNAL:$U,ServerValue:WU}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(rv.Z);const rV=new p.OlP("angularfire2.realtimeDatabaseURL"),iV=new p.OlP("angularfire2.database.use-emulator");let sV=(()=>{class n{constructor(t,r,i,a,u,d,m,v,b,S,P,V,G,ce,ye){this.schedulers=d;const ot=m,dt=(0,$r.on)(t,u,r);v&&pf(dt,u,b,P,V,G,S,ce),this.database=(0,$r.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const lt=u.runOutsideAngular(()=>dt.database(i||void 0));return ot&&lt.useEmulator(...ot),lt},[ot])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ik(this.database,t));let a=i;return r&&(a=r(i)),function tV(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:ck(r,"update"),set:ck(r,"set"),push:i=>r.push(i),remove:eV(r),snapshotChanges:i=>lk(n,i,t).pipe(yn.iC),stateChanges:i=>uk(n,i,t).pipe(yn.iC),auditTrail:i=>function QU(n,e,t){return function XU(n,e,t){return function JU(n,e){return Uw(n,"value","on",e).pipe((0,st.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function HS(...n){const e=(0,ds.jO)(n);return(0,er.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),d=!1;for(let m=0;m<i;m++)(0,ci.Xf)(n[m]).subscribe((0,Gn.x)(r,v=>{a[m]=v,!d&&!u[m]&&(u[m]=!0,(d=u.every(ho.y))&&(u=null))},CN.Z));t.subscribe((0,Gn.x)(r,m=>{if(d){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,st.U)(([i,a])=>{const u=i.lastKeyToLoad,d=a.map(m=>m.key);return{actions:a,lastKeyToLoad:u,loadedKeys:d}}),function $S(n){return(0,er.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Gn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,st.U)(i=>i.actions))}(n,uk(n,e).pipe(Pt((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(yn.iC),valueChanges:(i,a)=>lk(n,i,t).pipe((0,st.U)(d=>d.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),yn.iC)}}(a,this)}object(t){return function nV(n,e){return{query:n,snapshotChanges:()=>dk(n,e.schedulers.outsideAngular)().pipe(yn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>dk(n,e.schedulers.outsideAngular)().pipe(yn.iC,(0,st.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ik(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG($r.Dh),p.LFG($r.xv,8),p.LFG(rV,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(iV,8),p.LFG(Kg,8),p.LFG(Wy,8),p.LFG(Gy,8),p.LFG(cd,8),p.LFG(ff,8),p.LFG(dd,8),p.LFG(yE,8),p.LFG(ud,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oV=(()=>{class n{constructor(){qg.Z.registerVersion("angularfire",yn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[sV]}),n})();const hk="firebasestorage.googleapis.com",fk="storageBucket";class vr extends L.ZR{constructor(e,t,r=0){super(mx(e),`Firebase Storage: ${t} (${mx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function mx(n){return"storage/"+n}function _x(){return new vr("unknown","An unknown error occurred, please check the error payload for server response.")}function pk(){return new vr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function gk(){return new vr("canceled","User canceled the upload/download.")}function mk(){return new vr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qm(n){return new vr("invalid-argument",n)}function _k(){return new vr("app-deleted","The Firebase app was deleted.")}function yk(n){return new vr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vw(n,e){return new vr("invalid-format","String does not match format '"+n+"': "+e)}function Bw(n){throw new vr("internal-error","Internal error: "+n)}class Ji{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ji.makeFromUrl(e,t)}catch{return new Ji(e,"")}if(""===r.path)return r;throw function _V(n){return new vr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ft){ft.path_=decodeURIComponent(ft.path)}const S=t.replace(/[.]/g,"\\."),lt=[{regex:d,indices:{bucket:1,path:3},postModify:function a(ft){"/"===ft.path.charAt(ft.path.length-1)&&(ft.path_=ft.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===hk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ft=0;ft<lt.length;ft++){const At=lt[ft],Bt=At.regex.exec(e);if(Bt){let yl=Bt[At.indices.path];yl||(yl=""),r=new Ji(Bt[At.indices.bucket],yl),At.postModify(r);break}}if(null==r)throw function mV(n){return new vr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class EV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qT(n){return"string"==typeof n||n instanceof String}function vk(n){return yx()&&n instanceof Blob}function yx(){return typeof Blob<"u"&&!(0,L.UG)()}function vx(n,e,t,r){if(r<e)throw Qm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Qm(`Invalid value for '${n}'. Expected ${t} or less.`)}function tc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function wk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Qd=(()=>{return(n=Qd||(Qd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Qd;var n})();function Ik(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class AV{constructor(e,t,r,i,a,u,d,m,v,b,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());!function bV(n){return void 0!==n}(m)?a():a(m)}catch(m){u(m)}else if(null!==d){const m=_x();m.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,m):m)}else u(i.canceled?this.appDelete_?_k():gk():pk())};this.canceled_?t(0,new KT(!1,null,!0)):this.backoffId_=function CV(n,e,t){let r=1,i=null,a=null,u=!1,d=0;function m(){return 2===d}let v=!1;function b(...ye){v||(v=!0,e.apply(null,ye))}function S(ye){i=setTimeout(()=>{i=null,n(V,m())},ye)}function P(){a&&clearTimeout(a)}function V(ye,...ot){if(v)return void P();if(ye)return P(),void b.call(null,ye,...ot);if(m()||u)return P(),void b.call(null,ye,...ot);let lt;r<64&&(r*=2),1===d?(d=2,lt=0):lt=1e3*(r+Math.random()),S(lt)}let G=!1;function ce(ye){G||(G=!0,P(),!v&&(null!==i?(ye||(d=2),clearTimeout(i),S(0)):ye||(d=1)))}return S(0),a=setTimeout(()=>{u=!0,ce(!0)},t),ce}((r,i)=>{if(i)return void r(!1,new KT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Qd.NO_ERROR,m=a.getStatus();if((!d||Ik(m,this.additionalRetryCodes_))&&this.retry){const b=a.getErrorCode()===Qd.ABORT;return void r(!1,new KT(!1,null,b))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new KT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function TV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class KT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function OV(...n){const e=function kV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(yx())return new Blob(n);throw new vr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wx{constructor(e,t){this.data=e,this.contentType=t||null}}function Ix(n,e){switch(n){case xo.RAW:return new wx(Ek(e));case xo.BASE64:case xo.BASE64URL:return new wx(Ck(n,e));case xo.DATA_URL:return new wx(function VV(n){const e=new Tk(n);return e.base64?Ck(xo.BASE64,e.rest):function UV(n){let e;try{e=decodeURIComponent(n)}catch{throw Vw(xo.DATA_URL,"Malformed data URL.")}return Ek(e)}(e.rest)}(e),function BV(n){return new Tk(n).contentType}(e))}throw _x()}function Ek(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ck(n,e){switch(n){case xo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Vw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Vw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function FV(n){if(typeof atob>"u")throw function IV(n){return new vr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Vw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Tk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Vw(xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function jV(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ru{constructor(e,t){let r=0,i="";vk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(vk(this.data_)){const i=function LV(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ru(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ru(r,!0)}}static getBlob(...e){if(yx()){const t=e.map(r=>r instanceof ru?r.data_:r);return new ru(OV.apply(null,t))}{const t=e.map(u=>qT(u)?Ix(xo.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[a++]=u[d]}),new ru(i,!0)}}uploadData(){return this.data_}}function Ex(n){let e;try{e=JSON.parse(n)}catch{return null}return function SV(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function bk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function WV(n,e){return e}class Is{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||WV}}let ZT=null;function jw(){if(ZT)return ZT;const n=[];n.push(new Is("bucket")),n.push(new Is("generation")),n.push(new Is("metageneration")),n.push(new Is("name","fullPath",!0));const t=new Is("name");t.xform=function e(a,u){return function GV(n){return!qT(n)||n.length<2?n:bk(n)}(u)},n.push(t);const i=new Is("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Is("timeCreated")),n.push(new Is("updated")),n.push(new Is("md5Hash",null,!0)),n.push(new Is("cacheControl",null,!0)),n.push(new Is("contentDisposition",null,!0)),n.push(new Is("contentEncoding",null,!0)),n.push(new Is("contentLanguage",null,!0)),n.push(new Is("contentType",null,!0)),n.push(new Is("metadata","customMetadata",!0)),ZT=n,ZT}function Dk(n,e,t){const r=Ex(e);return null===r?null:function qV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function zV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ji(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Cx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Sk="prefixes";class iu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function su(n){if(!n)throw _x()}function YT(n,e){return function t(r,i){const a=Dk(n,i,e);return su(null!==a),a}}function Jm(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function pV(){return new vr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function fV(){return new vr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function hV(n){return new vr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function gV(n){return new vr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Hw(n){const e=Jm(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function dV(n){return new vr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function xk(n,e,t){const i=tc(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new iu(i,"GET",YT(n,t),u);return d.errorHandler=Hw(e),d}function XV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=tc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,b=new iu(d,"GET",function QV(n,e){return function t(r,i){const a=function YV(n,e,t){const r=Ex(t);return null===r?null:function ZV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Sk])for(const i of t[Sk]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new Ji(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Ji(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return su(null!==a),a}}(n,e.bucket),v);return b.urlParams=a,b.errorHandler=Jm(e),b}function Pk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function rB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class QT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Tx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{su(!1)}return su(!!t&&-1!==(e||["active"]).indexOf(t)),t}const aB={STATE_CHANGED:"state_changed"},Es={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bx(n){switch(n){case"running":case"pausing":case"canceling":return Es.RUNNING;case"paused":return Es.PAUSED;case"success":return Es.SUCCESS;case"canceled":return Es.CANCELED;default:return Es.ERROR}}class lB{constructor(e,t,r){if(function DV(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Xm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class cB extends class uB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Bw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ml(){return new cB}class Ok{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=jw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(Ik(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=pk()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function iB(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=Pk(e,r,i),d={name:u.fullPath},m=tc(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},S=Cx(u,t),G=new iu(m,"POST",function V(ce){let ye;Tx(ce);try{ye=ce.getResponseHeader("X-Goog-Upload-URL")}catch{su(!1)}return su(qT(ye)),ye},n.maxUploadRetryTime);return G.urlParams=d,G.headers=b,G.body=S,G.errorHandler=Jm(e),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ml,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function sB(n,e,t,r){const m=new iu(t,"POST",function a(v){const b=Tx(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{su(!1)}S||su(!1);const P=Number(S);return su(!isNaN(P)),new QT(P,r.size(),"final"===b)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Jm(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ml,t,r);this._request=a,a.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new QT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function oB(n,e,t,r,i,a,u,d){const m=new QT(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function vV(){return new vr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let b=v;i>0&&(b=Math.min(b,i));const S=m.current;let V="";V=0===b?"finalize":v===b?"upload, finalize":"upload";const G={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${m.current}`},ce=r.slice(S,S+b);if(null===ce)throw mk();const lt=new iu(t,"POST",function ye(ft,At){const Bt=Tx(ft,["active","final"]),wr=m.current+b,yl=r.size();let EM;return EM="final"===Bt?YT(e,a)(ft,At):null,new QT(wr,yl,"final"===Bt,EM)},e.maxUploadRetryTime);return lt.headers=G,lt.body=ce.uploadData(),lt.progressCallback=d||null,lt.errorHandler=Jm(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const d=this._ref.storage._makeRequest(u,ml,i,a,!1);this._request=d,d.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=xk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ml,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Mk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function d(){let lt="";for(let ft=0;ft<2;ft++)lt+=Math.random().toString().slice(2);return lt}();u["Content-Type"]="multipart/related; boundary="+m;const v=Pk(e,r,i),b=Cx(v,t),V=ru.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===V)throw mk();const G={name:v.fullPath},ce=tc(a,n.host,n._protocol),ot=n.maxUploadRetryTime,dt=new iu(ce,"POST",YT(n,t),ot);return dt.urlParams=G,dt.headers=u,dt.body=V.uploadData(),dt.errorHandler=Jm(e),dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ml,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=bx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new lB(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(bx(this._state)){case Es.SUCCESS:Xm(this._resolve.bind(null,this.snapshot))();break;case Es.CANCELED:case Es.ERROR:Xm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bx(this._state)){case Es.RUNNING:case Es.PAUSED:e.next&&Xm(e.next.bind(e,this.snapshot))();break;case Es.SUCCESS:e.complete&&Xm(e.complete.bind(e))();break;default:e.error&&Xm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class up{constructor(e,t){this._service=e,this._location=t instanceof Ji?t:Ji.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new up(e,t)}get root(){const e=new Ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bk(this._location.path)}get storage(){return this._service}get parent(){const e=function HV(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ji(this._location.bucket,e);return new up(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw yk(e)}}function Fk(n,e,t){return Dx.apply(this,arguments)}function Dx(){return(Dx=(0,Ie.Z)(function*(n,e,t){const i=yield Uk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Fk(n,e,i.nextPageToken))})).apply(this,arguments)}function Uk(n,e){null!=e&&"number"==typeof e.maxResults&&vx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=XV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ml)}function EB(n){n._throwIfRoot("getDownloadURL");const e=function eB(n,e,t){const i=tc(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new iu(i,"GET",function JV(n,e){return function t(r,i){const a=Dk(n,i,e);return su(null!==a),function KV(n,e,t,r){const i=Ex(e);if(null===i||!qT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return tc("/b/"+u(n.bucket)+"/o/"+u(S),t,r)+wk({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=Hw(e),d}(n.storage,n._location,jw());return n.storage.makeRequestWithTokens(e,ml).then(t=>{if(null===t)throw function wV(){return new vr("no-download-url","The given file does not have any download URLs.")}();return t})}function Vk(n,e){const t=function $V(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ji(n._location.bucket,t);return new up(n.storage,r)}function Bk(n,e){if(n instanceof Sx){const t=n;if(null==t._bucket)throw function yV(){return new vr("no-default-bucket","No default bucket found. Did you set the '"+fk+"' property when initializing the app?")}();const r=new up(t,t._bucket);return null!=e?Bk(r,e):r}return void 0!==e?Vk(n,e):n}function DB(n,e){if(e&&function TB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Sx)return function bB(n,e){return new up(n,e)}(n,e);throw Qm("To use ref(service, url), the first argument must be a Storage instance.")}return Bk(n,e)}function jk(n,e){const t=e?.[fk];return null==t?null:Ji.makeFromBucketSpec(t,n)}class Sx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=hk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ji.makeFromBucketSpec(i,this._host):jk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ji.makeFromBucketSpec(this._url,e):jk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ie.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ie.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new up(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new EV(_k());{const u=function NV(n,e,t,r,i,a,u=!0){const d=wk(n.urlParams),m=n.url+d,v=Object.assign({},n.headers);return function PV(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function xV(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function RV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function MV(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new AV(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ie.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Hk="@firebase/storage";function Gk(n,e){return DB(n=(0,L.m9)(n),e)}function LB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Sx(t,r,i,e,bi.SDK_VERSION)}!function FB(){(0,bi._registerComponent)(new Ea.wA("storage",LB,"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(Hk,"0.9.14",""),(0,bi.registerVersion)(Hk,"0.9.14","esm2017")}();class JT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class qk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new JT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new JT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new JT(u,this,this._ref)):{next:t.next?u=>t.next(new JT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Kk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nc(e,this._service))}get items(){return this._delegate.items.map(e=>new nc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function OB(n,e){return Vk(n,e)}(this._delegate,e);return new nc(t,this.storage)}get root(){return new nc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new qk(function AB(n,e,t){return function _B(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ok(n,new ru(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=xo.RAW,r){this._throwIfRoot("putString");const i=Ix(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new qk(new Ok(this._delegate,new ru(i.data,!0),a),this)}listAll(){return function MB(n){return function vB(n){const e={prefixes:[],items:[]};return Fk(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new Kk(e,this.storage))}list(e){return function PB(n,e){return Uk(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Kk(t,this.storage))}getMetadata(){return function xB(n){return function wB(n){n._throwIfRoot("getMetadata");const e=xk(n.storage,n._location,jw());return n.storage.makeRequestWithTokens(e,ml)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function RB(n,e){return function IB(n,e){n._throwIfRoot("updateMetadata");const t=function tB(n,e,t,r){const a=tc(e.fullServerUrl(),n.host,n._protocol),d=Cx(t,r),v=n.maxOperationRetryTime,b=new iu(a,"PATCH",YT(n,r),v);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=Hw(e),b}(n.storage,n._location,e,jw());return n.storage.makeRequestWithTokens(t,ml)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function NB(n){return EB(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function kB(n){return function CB(n){n._throwIfRoot("deleteObject");const e=function nB(n,e){const r=tc(e.fullServerUrl(),n.host,n._protocol),d=new iu(r,"DELETE",function u(m,v){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Hw(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ml)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw yk(e)}}class Zk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Yk(e))throw Qm("ref() expected a child path but got a URL, use refFromURL instead.");return new nc(Gk(this._delegate,e),this)}refFromURL(e){if(!Yk(e))throw Qm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ji.makeFromUrl(e,this._delegate.host)}catch{throw Qm("refFromUrl() expected a valid full URL but got an invalid one.")}return new nc(Gk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function zk(n,e,t,r={}){!function SB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Yk(n){return/^[A-Za-z]+:\/\//.test(n)}function jB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Zk(t,r)}function Qk(n){const e=function $B(n){return new Tr.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function aV(n,e=nm.z){return(0,er.e)((t,r)=>{let i=null,a=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=u+n,b=e.now();if(b<v)return i=this.schedule(void 0,v-b),void r.add(i);d()}t.subscribe((0,Gn.x)(r,v=>{a=v,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,st.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function XT(n){return{getDownloadURL:()=>at(void 0).pipe(yn.fc,zn(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>at(void 0).pipe(yn.fc,zn(()=>n.getMetadata()),yn.iC),delete:()=>(0,an.D)(n.delete()),child:e=>XT(n.child(e)),updateMetadata:e=>(0,an.D)(n.updateMetadata(e)),put:(e,t)=>Qk(n.put(e,t)),putString:(e,t,r)=>Qk(n.putString(e,t,r)),list:e=>(0,an.D)(n.list(e)),listAll:()=>(0,an.D)(n.listAll())}}!function HB(n){const e={TaskState:Es,TaskEvent:aB,StringFormat:xo,Storage:Zk,Reference:nc};n.INTERNAL.registerComponent(new Ea.wA("storage-compat",jB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(rv.Z);const WB=new p.OlP("angularfire2.storageBucket"),GB=new p.OlP("angularfire2.storage.maxUploadRetryTime"),zB=new p.OlP("angularfire2.storage.maxOperationRetryTime"),qB=new p.OlP("angularfire2.storage.use-emulator");let KB=(()=>{class n{constructor(t,r,i,a,u,d,m,v,b,S){const P=(0,$r.on)(t,u,r);this.storage=(0,$r.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const V=u.runOutsideAngular(()=>P.storage(i||void 0)),G=b;return G&&V.useEmulator(...G),m&&V.setMaxUploadRetryTime(m),v&&V.setMaxOperationRetryTime(v),V},[m,v])}ref(t){return XT(this.storage.ref(t))}refFromURL(t){return XT(this.storage.refFromURL(t))}upload(t,r,i){return XT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG($r.Dh),p.LFG($r.xv,8),p.LFG(WB,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(GB,8),p.LFG(zB,8),p.LFG(qB,8),p.LFG(ud,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),YB=(()=>{class n{constructor(){qg.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[KB],imports:[ZB]}),n})();function Ax(){return(0,er.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var wt,QB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rc={},xx=xx||{},Wt=QB||self;function eb(){}function tb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $w(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Rx="closure_uid_"+(1e9*Math.random()>>>0),XB=0;function e2(n,e,t){return n.call.apply(n.bind,arguments)}function t2(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Xi(n,e,t){return(Xi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e2:t2).apply(null,arguments)}function nb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function Jd(){this.s=this.s,this.o=this.o}Jd.prototype.s=!1,Jd.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function JB(n){Object.prototype.hasOwnProperty.call(n,Rx)&&n[Rx]||(n[Rx]=++XB)}(this)},Jd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Px(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Xk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tb(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function es(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}es.prototype.h=function(){this.defaultPrevented=!0};var r2=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wt.addEventListener("test",eb,e),Wt.removeEventListener("test",eb,e)}catch{}return n}();function rb(n){return/^[\s\xa0]*$/.test(n)}var eO=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Mx(n,e){return n<e?-1:n>e?1:0}function ib(){var n=Wt.navigator;return n&&(n=n.userAgent)?n:""}function ou(n){return-1!=ib().indexOf(n)}function Nx(n){return Nx[" "](n),n}Nx[" "]=eb;var sb,n,s2=ou("Opera"),e_=ou("Trident")||ou("MSIE"),tO=ou("Edge"),kx=tO||e_,nO=ou("Gecko")&&!(-1!=ib().toLowerCase().indexOf("webkit")&&!ou("Edge"))&&!(ou("Trident")||ou("MSIE"))&&!ou("Edge"),o2=-1!=ib().toLowerCase().indexOf("webkit")&&!ou("Edge");function rO(){var n=Wt.document;return n?n.documentMode:void 0}e:{var Ox="",Lx=(n=ib(),nO?/rv:([^\);]+)(\)|;)/.exec(n):tO?/Edge\/([\d\.]+)/.exec(n):e_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):o2?/WebKit\/(\S+)/.exec(n):s2?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Lx&&(Ox=Lx?Lx[1]:""),e_){var Fx=rO();if(null!=Fx&&Fx>parseFloat(Ox)){sb=String(Fx);break e}}sb=Ox}var a2={};var u2=Wt.document&&e_&&(rO()||parseInt(sb,10))||void 0;function Ww(n,e){if(es.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(nO){e:{try{Nx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:c2[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ww.X.h.call(this)}}xi(Ww,es);var c2={2:"touch",3:"pen",4:"mouse"};Ww.prototype.h=function(){Ww.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gw="closure_listenable_"+(1e6*Math.random()|0),d2=0;function h2(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++d2,this.ba=this.ea=!1}function ob(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Vx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sO(n){const e={};for(const t in n)e[t]=n[t];return e}const oO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aO(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<oO.length;a++)t=oO[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ab(n){this.src=n,this.g={},this.h=0}function Bx(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Jk(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(ob(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jx(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}ab.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=jx(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new h2(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Hx="closure_lm_"+(1e6*Math.random()|0),$x={};function lO(n,e,t,r,i){if(r&&r.once)return cO(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)lO(n,e[a],t,r,i);return null}return t=qx(t),n&&n[Gw]?n.N(e,t,$w(r)?!!r.capture:!!r,i):uO(n,e,t,!1,r,i)}function uO(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=$w(i)?!!i.capture:!!i,d=Gx(n);if(d||(n[Hx]=d=new ab(n)),(t=d.add(e,t,r,u,a)).proxy)return t;if(r=function f2(){const e=p2;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)r2||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(hO(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cO(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)cO(n,e[a],t,r,i);return null}return t=qx(t),n&&n[Gw]?n.O(e,t,$w(r)?!!r.capture:!!r,i):uO(n,e,t,!0,r,i)}function dO(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)dO(n,e[a],t,r,i);else r=$w(r)?!!r.capture:!!r,t=qx(t),n&&n[Gw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jx(a=n.g[e],t,r,i))&&(ob(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Gx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jx(e,t,r,i)),(t=-1<n?e[n]:null)&&Wx(t))}function Wx(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Gw])Bx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hO(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gx(e))?(Bx(t,n),0==t.h&&(t.src=null,e[Hx]=null)):ob(n)}}}function hO(n){return n in $x?$x[n]:$x[n]="on"+n}function p2(n,e){if(n.ba)n=!0;else{e=new Ww(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Wx(n),n=t.call(r,e)}return n}function Gx(n){return(n=n[Hx])instanceof ab?n:null}var zx="__closure_events_fn_"+(1e9*Math.random()>>>0);function qx(n){return"function"==typeof n?n:(n[zx]||(n[zx]=function(e){return n.handleEvent(e)}),n[zx])}function gi(){Jd.call(this),this.i=new ab(this),this.P=this,this.I=null}function Ri(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new es(e,n);else if(e instanceof es)e.target=e.target||n;else{var i=e;aO(e=new es(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=lb(u,r,!0,e)&&i}if(i=lb(u=e.g=n,r,!0,e)&&i,i=lb(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=lb(u=e.g=t[a],r,!1,e)&&i}function lb(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ba&&u.capture==t){var d=u.listener,m=u.ha||u.src;u.ea&&Bx(n.i,u),i=!1!==d.call(m,r)&&i}}return i&&!r.defaultPrevented}xi(gi,Jd),gi.prototype[Gw]=!0,gi.prototype.removeEventListener=function(n,e,t,r){dO(this,n,e,t,r)},gi.prototype.M=function(){if(gi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ob(t[r]);delete n.g[e],n.h--}}this.I=null},gi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},gi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Kx=Wt.JSON.stringify;function g2(){var n=gO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zx,fO=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new _2,n=>n.reset());class _2{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function y2(n){Wt.setTimeout(()=>{throw n},0)}function pO(n,e){Zx||function v2(){var n=Wt.Promise.resolve(void 0);Zx=function(){n.then(w2)}}(),Yx||(Zx(),Yx=!0),gO.add(n,e)}var Yx=!1,gO=new class m2{constructor(){this.h=this.g=null}add(e,t){const r=fO.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function w2(){for(var n;n=g2();){try{n.h.call(n.g)}catch(t){y2(t)}var e=fO;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yx=!1}function ub(n,e){gi.call(this),this.h=n||1,this.g=e||Wt,this.j=Xi(this.lb,this),this.l=Date.now()}function Qx(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Jx(n,e,t){if("function"==typeof n)t&&(n=Xi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Wt.setTimeout(n,e||0)}function mO(n){n.g=Jx(()=>{n.g=null,n.i&&(n.i=!1,mO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xi(ub,gi),(wt=ub.prototype).ca=!1,wt.R=null,wt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ri(this,"tick"),this.ca&&(Qx(this),this.start()))}},wt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){ub.X.M.call(this),Qx(this),delete this.g};class I2 extends Jd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mO(this)}M(){super.M(),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zw(n){Jd.call(this),this.h=n,this.g={}}xi(zw,Jd);var _O=[];function yO(n,e,t,r){Array.isArray(t)||(t&&(_O[0]=t.toString()),t=_O);for(var i=0;i<t.length;i++){var a=lO(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function vO(n){Vx(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wx(e)},n),n.g={}}function cb(){this.g=!0}function t_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function b2(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return Kx(t)}catch{return e}}(n,t)+(r?" "+r:"")})}zw.prototype.M=function(){zw.X.M.call(this),vO(this)},zw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cb.prototype.Aa=function(){this.g=!1},cb.prototype.info=function(){};var cp={},wO=null;function db(){return wO=wO||new gi}function IO(n){es.call(this,cp.Pa,n)}function qw(n){const e=db();Ri(e,new IO(e))}function EO(n,e){es.call(this,cp.STAT_EVENT,n),this.stat=e}function Cs(n){const e=db();Ri(e,new EO(e,n))}function CO(n,e){es.call(this,cp.Qa,n),this.size=e}function Kw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){n()},e)}cp.Pa="serverreachability",xi(IO,es),cp.STAT_EVENT="statevent",xi(EO,es),cp.Qa="timingevent",xi(CO,es);var hb={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},TO={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Xx(){}function DO(){}Xx.prototype.h=null;var nR,Zw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function eR(){es.call(this,"d")}function tR(){es.call(this,"c")}function fb(){}function Yw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new zw(this),this.O=D2,this.T=new ub(n=kx?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new SO}function SO(){this.i=null,this.g="",this.h=!1}xi(eR,es),xi(tR,es),xi(fb,Xx),fb.prototype.g=function(){return new XMLHttpRequest},fb.prototype.i=function(){return{}},nR=new fb;var D2=45e3,rR={},pb={};function iR(n,e,t){n.K=1,n.v=yb(ic(e)),n.s=t,n.P=!0,AO(n,null)}function AO(n,e){n.F=Date.now(),Qw(n),n.A=ic(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),UO(t.i,"t",r),n.C=0,t=n.l.H,n.h=new SO,n.g=u1(n.l,t?e:null,!n.s),0<n.N&&(n.L=new I2(Xi(n.La,n,n.g),n.N)),yO(n.S,n.g,"readystatechange",n.ib),e=n.H?sO(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),qw(),function E2(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",d=a.split("&"),m=0;m<d.length;m++){var v=d[m].split("=");if(1<v.length){var b=v[0];v=v[1];var S=b.split("_");u=2<=S.length&&"type"==S[1]?u+(b+"=")+v+"&":u+(b+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function xO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function RO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=S2(n,t),i==pb){4==e&&(n.o=4,Cs(14),r=!1),t_(n.j,n.m,null,"[Incomplete Response]");break}if(i==rR){n.o=4,Cs(15),t_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}t_(n.j,n.m,i,null),sR(n,i)}xO(n)&&i!=pb&&i!=rR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),fR(e),e.K=!0,Cs(11))):(t_(n.j,n.m,t,"[Invalid Chunked Response]"),dp(n),Jw(n))}function S2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?pb:(t=Number(e.substring(t,r)),isNaN(t)?rR:(r+=1)+t>e.length?pb:(e=e.substr(r,t),n.C=r+t,e))}function Qw(n){n.V=Date.now()+n.O,PO(n,n.O)}function PO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kw(Xi(n.gb,n),e)}function gb(n){n.B&&(Wt.clearTimeout(n.B),n.B=null)}function Jw(n){0==n.l.G||n.I||s1(n.l,n)}function dp(n){gb(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Qx(n.T),vO(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||oR(t.h,n)))if(!n.J&&oR(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Tb(t),Eb(t)}hR(t),Cs(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Kw(Xi(t.cb,t),6e3));if(1>=jO(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else fp(t,11)}else if((n.J||t.g==n)&&Tb(t),!rb(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const b=v[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const S=v[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const G=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(aR(a,a.h),a.h=null))}if(r.D){const ce=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ce&&(r.za=ce,fr(r.F,r.D,ce))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=l1(r,r.H?r.ka:null,r.V),u.J){HO(r.h,u);var d=u,m=r.J;m&&d.setTimeout(m),d.B&&(gb(d),Qw(d)),r.g=u}else n1(r);0<t.i.length&&Cb(t)}else"stop"!=v[0]&&"close"!=v[0]||fp(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?fp(t,7):dR(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}qw()}catch{}}function MO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tb(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function x2(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(tb(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function A2(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(tb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(wt=Yw.prototype).setTimeout=function(n){this.O=n},wt.ib=function(n){n=n.target;const e=this.L;e&&3==sc(n)?e.l():this.La(n)},wt.La=function(n){try{if(n==this.g)e:{const b=sc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||kx||this.g&&(this.h.h||this.g.fa()||YO(this.g)))){this.I||4!=b||7==e||qw(),gb(this);var t=this.g.aa();this.Y=t;t:if(xO(this)){var r=YO(this.g);n="";var i=r.length,a=4==sc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){dp(this),Jw(this);var u="";break t}this.h.i=new Wt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function C2(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,m=this.g;if((d=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rb(d)){var v=d;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Cs(12),dp(this),Jw(this);break e}t_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sR(this,t)}this.P?(RO(this,b,u),kx&&this.i&&3==b&&(yO(this.S,this.T,"tick",this.hb),this.T.start())):(t_(this.j,this.m,u,null),sR(this,u)),4==b&&dp(this),this.i&&!this.I&&(4==b?s1(this.l,this):(this.i=!1,Qw(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Cs(12)):(this.o=0,Cs(13)),dp(this),Jw(this)}}}catch{}},wt.hb=function(){if(this.g){var n=sc(this.g),e=this.g.fa();this.C<e.length&&(gb(this),RO(this,n,e),this.i&&4!=n&&Qw(this))}},wt.cancel=function(){this.I=!0,dp(this)},wt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function T2(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qw(),Cs(17)),dp(this),this.o=2,Jw(this)):PO(this,this.V-n)};var NO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof hp){this.h=void 0!==e?e:n.h,mb(this,n.j),this.s=n.s,this.g=n.g,_b(this,n.m),this.l=n.l,e=n.i;var t=new tI;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),kO(this,t),this.o=n.o}else n&&(t=String(n).match(NO))?(this.h=!!e,mb(this,t[1]||"",!0),this.s=Xw(t[2]||""),this.g=Xw(t[3]||"",!0),_b(this,t[4]),this.l=Xw(t[5]||"",!0),kO(this,t[6]||"",!0),this.o=Xw(t[7]||"")):(this.h=!!e,this.i=new tI(null,this.h))}function ic(n){return new hp(n)}function mb(n,e,t){n.j=t?Xw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function _b(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function kO(n,e,t){e instanceof tI?(n.i=e,function L2(n,e){e&&!n.j&&(Xd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(LO(this,r),UO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=eI(e,k2)),n.i=new tI(e,n.h))}function fr(n,e,t){n.i.set(e,t)}function yb(n){return fr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function eI(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,P2),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function P2(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(eI(e,OO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(eI(e,OO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(eI(t,"/"==t.charAt(0)?N2:M2,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",eI(t,O2)),n.join("")};var OO=/[#\/\?@]/g,M2=/[#\?:]/g,N2=/[#\?]/g,k2=/[#\?@]/g,O2=/#/g;function tI(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xd(n){n.g||(n.g=new Map,n.h=0,n.i&&function R2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function LO(n,e){Xd(n),e=n_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function FO(n,e){return Xd(n),e=n_(n,e),n.g.has(e)}function UO(n,e,t){LO(n,e),0<t.length&&(n.i=null,n.g.set(n_(n,e),Px(t)),n.h+=t.length)}function n_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function VO(n){this.l=n||U2,n=Wt.PerformanceNavigationTiming?0<(n=Wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ga&&Wt.g.Ga()&&Wt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=tI.prototype).add=function(n,e){Xd(this),this.i=null,n=n_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},wt.forEach=function(n,e){Xd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},wt.oa=function(){Xd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},wt.W=function(n){Xd(this);let e=[];if("string"==typeof n)FO(this,n)&&(e=e.concat(this.g.get(n_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},wt.set=function(n,e){return Xd(this),this.i=null,FO(this,n=n_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},wt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var U2=10;function BO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jO(n){return n.h?1:n.g?n.g.size:0}function oR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function aR(n,e){n.g?n.g.add(e):n.h=e}function HO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $O(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Px(n.i)}function lR(){}function V2(){this.g=new lR}function B2(n,e,t){const r=t||"";try{MO(n,function(i,a){let u=i;$w(i)&&(u=Kx(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vb(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function nI(n){this.l=n.ac||null,this.j=n.jb||!1}function wb(n,e){gi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=uR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}VO.prototype.cancel=function(){if(this.i=$O(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},lR.prototype.stringify=function(n){return Wt.JSON.stringify(n,void 0)},lR.prototype.parse=function(n){return Wt.JSON.parse(n,void 0)},xi(nI,Xx),nI.prototype.g=function(){return new wb(this.l,this.j)},nI.prototype.i=function(n){return function(){return n}}({}),xi(wb,gi);var uR=0;function WO(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function rI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,iI(n)}function iI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=wb.prototype).open=function(n,e){if(this.readyState!=uR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,iI(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Wt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rI(this)),this.readyState=uR},wt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,iI(this)),this.g&&(this.readyState=3,iI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WO(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},wt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rI(this):iI(this),3==this.readyState&&WO(this)}},wt.Va=function(n){this.g&&(this.response=this.responseText=n,rI(this))},wt.Ua=function(n){this.g&&(this.response=n,rI(this))},wt.ga=function(){this.g&&rI(this)},wt.setRequestHeader=function(n,e){this.v.append(n,e)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(wb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var H2=Wt.JSON.parse;function Sr(n){gi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GO,this.K=this.L=!1}xi(Sr,gi);var GO="",$2=/^https?$/i,W2=["POST","PUT"];function zO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qO(n),Ib(n)}function qO(n){n.D||(n.D=!0,Ri(n,"complete"),Ri(n,"error"))}function KO(n){if(n.h&&typeof xx<"u"&&(!n.C[1]||4!=sc(n)||2!=n.aa()))if(n.v&&4==sc(n))Jx(n.Ha,0,n);else if(Ri(n,"readystatechange"),4==sc(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(NO)[1]||null;if(!i&&Wt.self&&Wt.self.location){var a=Wt.self.location.protocol;i=a.substr(0,a.length-1)}r=!$2.test(i?i.toLowerCase():"")}t=r}if(t)Ri(n,"complete"),Ri(n,"success");else{n.m=6;try{var u=2<sc(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",qO(n)}}finally{Ib(n)}}}function Ib(n,e){if(n.g){ZO(n);const t=n.g,r=n.C[0]?eb:null;n.g=null,n.C=null,e||Ri(n,"ready");try{t.onreadystatechange=r}catch{}}}function ZO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Wt.clearTimeout(n.A),n.A=null)}function sc(n){return n.g?n.g.readyState:0}function YO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case GO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function QO(n){let e="";return Vx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function cR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=QO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fr(n,e,t))}function sI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function JO(n){this.Ca=0,this.i=[],this.j=new cb,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=sI("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=sI("baseRetryDelayMs",5e3,n),this.bb=sI("retryDelaySeedMs",1e4,n),this.$a=sI("forwardChannelMaxRetries",2,n),this.ta=sI("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new VO(n&&n.concurrentRequestLimit),this.Fa=new V2,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function dR(n){if(XO(n),3==n.G){var e=n.U++,t=ic(n.F);fr(t,"SID",n.I),fr(t,"RID",e),fr(t,"TYPE","terminate"),oI(n,t),(e=new Yw(n,n.j,e,void 0)).K=2,e.v=yb(ic(t)),t=!1,Wt.navigator&&Wt.navigator.sendBeacon&&(t=Wt.navigator.sendBeacon(e.v.toString(),"")),!t&&Wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=u1(e.l,null),e.g.da(e.v)),e.F=Date.now(),Qw(e)}a1(n)}function Eb(n){n.g&&(fR(n),n.g.cancel(),n.g=null)}function XO(n){Eb(n),n.u&&(Wt.clearTimeout(n.u),n.u=null),Tb(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Wt.clearTimeout(n.m),n.m=null)}function Cb(n){BO(n.h)||n.m||(n.m=!0,pO(n.Ja,n),n.C=0)}function e1(n,e){var t;t=e?e.m:n.U++;const r=ic(n.F);fr(r,"SID",n.I),fr(r,"RID",t),fr(r,"AID",n.T),oI(n,r),n.o&&n.s&&cR(r,n.o,n.s),t=new Yw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=t1(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),aR(n.h,t),iR(t,r,e)}function oI(n,e){n.ia&&Vx(n.ia,function(t,r){fr(e,r,t)}),n.l&&MO({},function(t,r){fr(e,r,t)})}function t1(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Xi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let d=!0;for(let m=0;m<t;m++){let v=i[m].h;const b=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),d=!1;else try{B2(b,u,"req"+v+"_")}catch{r&&r(b)}}if(d){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function n1(n){n.g||n.u||(n.Z=1,pO(n.Ia,n),n.A=0)}function hR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Kw(Xi(n.Ia,n),o1(n,n.A)),n.A++,0))}function fR(n){null!=n.B&&(Wt.clearTimeout(n.B),n.B=null)}function r1(n){n.g=new Yw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ic(n.sa);fr(e,"RID","rpc"),fr(e,"SID",n.I),fr(e,"CI",n.L?"0":"1"),fr(e,"AID",n.T),fr(e,"TYPE","xmlhttp"),oI(n,e),n.o&&n.s&&cR(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=yb(ic(e)),t.s=null,t.P=!0,AO(t,n)}function Tb(n){null!=n.v&&(Wt.clearTimeout(n.v),n.v=null)}function s1(n,e){var t=null;if(n.g==e){Tb(n),fR(n),n.g=null;var r=2}else{if(!oR(n.h,e))return;t=e.D,HO(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ri(r=db(),new CO(r,t)),Cb(n)}else n1(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function z2(n,e){return!(jO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Kw(Xi(n.Ja,n,e),o1(n,n.C)),n.C++,0)))}(n,e)||2==r&&hR(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:fp(n,5);break;case 4:fp(n,10);break;case 3:fp(n,6);break;default:fp(n,2)}}function o1(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function fp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Xi(n.kb,n);t||(t=new hp("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||mb(t,"https"),yb(t)),function j2(n,e){const t=new cb;if(Wt.Image){const r=new Image;r.onload=nb(vb,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nb(vb,t,r,"TestLoadImage: error",!1,e),r.onabort=nb(vb,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nb(vb,t,r,"TestLoadImage: timeout",!1,e),Wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Cs(2);n.G=0,n.l&&n.l.va(e),a1(n),XO(n)}function a1(n){if(n.G=0,n.la=[],n.l){const e=$O(n.h);(0!=e.length||0!=n.i.length)&&(Xk(n.la,e),Xk(n.la,n.i),n.h.i.length=0,Px(n.i),n.i.length=0),n.l.ua()}}function l1(n,e,t){var r=t instanceof hp?ic(t):new hp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),_b(r,r.m);else{var i=Wt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new hp(null,void 0);r&&mb(a,r),e&&(a.g=e),i&&_b(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&fr(r,t,e),fr(r,"VER",n.ma),oI(n,r),r}function u1(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&n.Da&&!n.ra?new nI({jb:!0}):n.ra)).Ka(n.H),e}function c1(){}function bb(){if(e_&&!(10<=Number(u2)))throw Error("Environmental error: no available transport.")}function Ro(n,e){gi.call(this),this.g=new JO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!rb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new r_(this)}function d1(n){eR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function h1(){tR.call(this),this.status=1}function r_(n){this.g=n}(wt=Sr.prototype).Ka=function(n){this.L=n},wt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nR.g(),this.C=function bO(n){return n.h||(n.h=n.i())}(this.u?this.u:nR),this.g.onreadystatechange=Xi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void zO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Wt.FormData&&n instanceof Wt.FormData,!(0<=Jk(W2,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZO(this),0<this.B&&((this.K=function G2(n){return e_&&function l2(){return function i2(n){var e=a2;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=eO(String(sb)).split("."),t=eO("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Mx(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Mx(0==i[2].length,0==a[2].length)||Mx(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xi(this.qa,this)):this.A=Jx(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){zO(this,a)}},wt.qa=function(){typeof xx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ri(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ri(this,"complete"),Ri(this,"abort"),Ib(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ib(this,!0)),Sr.X.M.call(this)},wt.Ha=function(){this.s||(this.F||this.v||this.l?KO(this):this.fb())},wt.fb=function(){KO(this)},wt.aa=function(){try{return 2<sc(this)?this.g.status:-1}catch{return-1}},wt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},wt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),H2(e)}},wt.Ea=function(){return this.m},wt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=JO.prototype).ma=8,wt.G=1,wt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Yw(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=sO(a),aO(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=t1(this,i,e),fr(t=ic(this.F),"RID",n),fr(t,"CVER",22),this.D&&fr(t,"X-HTTP-Session-Id",this.D),oI(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(QO(a)))+"&"+e:this.o&&cR(t,this.o,a)),aR(this.h,i),this.Ya&&fr(t,"TYPE","init"),this.O?(fr(t,"$req",e),fr(t,"SID","null"),i.Z=!0,iR(i,t,null)):iR(i,t,e),this.G=2}}else 3==this.G&&(n?e1(this,n):0==this.i.length||BO(this.h)||e1(this))},wt.Ia=function(){if(this.u=null,r1(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Kw(Xi(this.eb,this),n)}},wt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Cs(10),Eb(this),r1(this))},wt.cb=function(){null!=this.v&&(this.v=null,Eb(this),hR(this),Cs(19))},wt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Cs(2)):(this.j.info("Failed to ping google.com"),Cs(1))},(wt=c1.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Ra=function(){},bb.prototype.g=function(n,e){return new Ro(n,e)},xi(Ro,gi),Ro.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Cs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=l1(n,null,n.V),Cb(n)},Ro.prototype.close=function(){dR(this.g)},Ro.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Kx(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Cb(e)},Ro.prototype.M=function(){this.g.l=null,delete this.j,dR(this.g),delete this.g,Ro.X.M.call(this)},xi(d1,eR),xi(h1,tR),xi(r_,c1),r_.prototype.xa=function(){Ri(this.g,"a")},r_.prototype.wa=function(n){Ri(this.g,new d1(n))},r_.prototype.va=function(n){Ri(this.g,new h1)},r_.prototype.ua=function(){Ri(this.g,"b")},bb.prototype.createWebChannel=bb.prototype.g,Ro.prototype.send=Ro.prototype.u,Ro.prototype.open=Ro.prototype.m,Ro.prototype.close=Ro.prototype.close,hb.NO_ERROR=0,hb.TIMEOUT=8,hb.HTTP_ERROR=6,TO.COMPLETE="complete",DO.EventType=Zw,Zw.OPEN="a",Zw.CLOSE="b",Zw.ERROR="c",Zw.MESSAGE="d",gi.prototype.listen=gi.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.Oa,Sr.prototype.getLastErrorCode=Sr.prototype.Ea,Sr.prototype.getStatus=Sr.prototype.aa,Sr.prototype.getResponseJson=Sr.prototype.Sa,Sr.prototype.getResponseText=Sr.prototype.fa,Sr.prototype.send=Sr.prototype.da,Sr.prototype.setWithCredentials=Sr.prototype.Ka;var q2=rc.createWebChannelTransport=function(){return new bb},K2=rc.getStatEventTarget=function(){return db()},pR=rc.ErrorCode=hb,Z2=rc.EventType=TO,Y2=rc.Event=cp,f1=rc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Q2=rc.FetchXmlHttpFactory=nI,Db=rc.WebChannel=DO,J2=rc.XhrIo=Sr;const p1="@firebase/firestore";class mi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mi.UNAUTHENTICATED=new mi(null),mi.GOOGLE_CREDENTIALS=new mi("google-credentials-uid"),mi.FIRST_PARTY=new mi("first-party-uid"),mi.MOCK_USER=new mi("mock-user");let i_="9.14.0";const eh=new wo.Yd("@firebase/firestore");function gR(){return eh.logLevel}function $e(n,...e){if(eh.logLevel<=wo.in.DEBUG){const t=e.map(mR);eh.debug(`Firestore (${i_}): ${n}`,...t)}}function Or(n,...e){if(eh.logLevel<=wo.in.ERROR){const t=e.map(mR);eh.error(`Firestore (${i_}): ${n}`,...t)}}function pp(n,...e){if(eh.logLevel<=wo.in.WARN){const t=e.map(mR);eh.warn(`Firestore (${i_}): ${n}`,...t)}}function mR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${i_}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function Ft(n,e){n||ht()}function Je(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class g1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mi.UNAUTHENTICATED))}shutdown(){}}class nj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rj{constructor(e){this.t=e,this.currentUser=mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ni,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const v=u;e.enqueueRetryable((0,Ie.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ni)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new g1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new mi(e)}}class ij{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=mi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ft(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class sj{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new ij(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oj{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.A;return this.A=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.A=t.token,new m1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function aj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class _1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function s_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function y1(n){return n+"\0"}class pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new pr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new pr(0,0))}static max(){return new Ut(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class aI{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===aI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof aI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gn extends aI{construct(e,t,r){return new gn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new gn(t)}static emptyPath(){return new gn([])}}const lj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends aI{construct(e,t,r){return new Ar(e,t,r)}static isValidIdentifier(e){return lj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Fe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Fe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(a(),i++)}if(a(),u)throw new Fe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(t)}static emptyPath(){return new Ar([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(gn.fromString(e))}static fromName(e){return new Ke(gn.fromString(e).popFirst(5))}static empty(){return new Ke(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new gn(e.slice()))}}class Sb{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function _R(n){return n.fields.find(e=>2===e.kind)}function gp(n){return n.fields.filter(e=>2!==e.kind)}Sb.UNKNOWN_ID=-1;class Ab{constructor(e,t){this.fieldPath=e,this.kind=t}}class lI{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lI(0,Po.min())}}function v1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ut.fromTimestamp(1e9===r?new pr(t+1,0):new pr(t,r));return new Po(i,Ke.empty(),e)}function w1(n){return new Po(n.readTime,n.key,-1)}class Po{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Po(Ut.min(),Ke.empty(),-1)}static max(){return new Po(Ut.max(),Ke.empty(),-1)}}function yR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const I1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function th(n){return vR.apply(this,arguments)}function vR(){return vR=(0,Ie.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==I1)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),vR.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++a,u&&a===i&&t()},m=>r(m))}),u=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,u=new Array(a);let d=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(b=>{u[v]=b,++d,d===a&&r(u)},b=>i(b))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class xb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ni,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new uI(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=wR(r.target.error);this.P.reject(new uI(e,i))}}static open(e,t,r,i){try{return new xb(t,e.transaction(i,r))}catch(a){throw new uI(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hj(t)}}class _l{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===_l.D((0,L.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),mp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(_l.N())return!0;const e=(0,L.z$)(),t=_l.D(e),r=0<t&&t<10,i=_l.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ie.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new uI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Fe(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Fe(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new uI(e,d))},a.onupgradeneeded=u=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ie.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.F(e);const m=xb.open(a.db,e,u?"readonly":"readwrite",r),v=i(m).next(b=>(m.V(),b)).catch(b=>(m.abort(b),de.reject(b))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,b="FirebaseError"!==v.name&&d<3;if($e("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class dj{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return mp(this.U.delete())}}class uI extends Fe{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nh(n){return"IndexedDbTransactionError"===n.name}class hj{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mp(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),mp(this.store.add(e))}get(e){return mp(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),mp(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),mp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(u,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,u,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const u=wR(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const m=new dj(d),v=t(d.primaryKey,d.value,m);if(v instanceof de){const b=v.catch(S=>(m.done(),de.reject(S)));r.push(b)}m.isDone?i():null===m.G?d.continue():d.continue(m.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mp(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wR(r.target.error);t(i)}})}let C1=!1;function wR(n){const e=_l.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C1||(C1=!0,setTimeout(()=>{throw r},0)),r}}return n}class fj{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){nh(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield th(r)}yield t.nt(6e4)}))}}class pj{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return $e("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(d=>{i-=d,r.add(u)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,a)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=w1(a);yR(u,r)>0&&(r=u)}),new Po(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function T1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _p(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function b1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}zs.at=-1;class xr{constructor(e,t){this.comparator=e,this.root=t||Pi.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rb(this.root,e,this.comparator,!0)}}class Rb{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Pi.RED,this.left=i??Pi.EMPTY,this.right=a??Pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Pi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Pi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1,Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new D1(this.data.getIterator())}getIteratorFrom(e){return new D1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class D1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function o_(n){return n.hasNext()?n.getNext():void 0}class Mo{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new Mo([])}unionWith(e){let t=new Bn(Ar.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return s_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ri{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ri(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ri(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ri.EMPTY_BYTE_STRING=new ri("");const mj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rh(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=mj.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rr(n.seconds),nanos:Rr(n.nanos)}}function Rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yp(n){return"string"==typeof n?ri.fromBase64String(n):ri.fromUint8Array(n)}function IR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function S1(n){const e=n.mapValue.fields.__previous_value__;return IR(e)?S1(e):e}function cI(n){const e=rh(n.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}class _j{constructor(e,t,r,i,a,u,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=m}}class ih{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ih("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ih&&e.projectId===this.projectId&&e.database===this.database}}function dI(n){return null==n}function hI(n){return 0===n&&1/n==-1/0}function A1(n){return"number"==typeof n&&Number.isInteger(n)&&!hI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const sh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pb={nullValue:"NULL_VALUE"};function vp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?IR(n)?4:M1(n)?9007199254740991:10:ht()}function au(n,e){if(n===e)return!0;const t=vp(n);if(t!==vp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cI(n).isEqual(cI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=rh(r.timestampValue),u=rh(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,yp(n.bytesValue).isEqual(yp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Rr(r.geoPointValue.latitude)===Rr(i.geoPointValue.latitude)&&Rr(r.geoPointValue.longitude)===Rr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Rr(r.integerValue)===Rr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Rr(r.doubleValue),u=Rr(i.doubleValue);return a===u?hI(a)===hI(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return s_(n.arrayValue.values||[],e.arrayValue.values||[],au);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(T1(a)!==T1(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===u[d]||!au(a[d],u[d])))return!1;return!0}(n,e);default:return ht()}var i}function fI(n,e){return void 0!==(n.values||[]).find(t=>au(t,e))}function oh(n,e){if(n===e)return 0;const t=vp(n),r=vp(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Rr(i.integerValue||i.doubleValue),d=Rr(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return x1(n.timestampValue,e.timestampValue);case 4:return x1(cI(n),cI(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=yp(i),d=yp(a);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),d=a.split("/");for(let m=0;m<u.length&&m<d.length;m++){const v=Gt(u[m],d[m]);if(0!==v)return v}return Gt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Gt(Rr(i.latitude),Rr(a.latitude));return 0!==u?u:Gt(Rr(i.longitude),Rr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],d=a.values||[];for(let m=0;m<u.length&&m<d.length;++m){const v=oh(u[m],d[m]);if(v)return v}return Gt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===sh.mapValue&&a===sh.mapValue)return 0;if(i===sh.mapValue)return 1;if(a===sh.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),m=a.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let b=0;b<d.length&&b<v.length;++b){const S=Gt(d[b],v[b]);if(0!==S)return S;const P=oh(u[d[b]],m[v[b]]);if(0!==P)return P}return Gt(d.length,v.length)}(n.mapValue,e.mapValue);default:throw ht()}}function x1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=rh(n),r=rh(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function a_(n){return ER(n)}function ER(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=rh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yp(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=ER(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const d of i)u?u=!1:a+=",",a+=`${d}:${ER(r.fields[d])}`;return a+"}"}(n.mapValue):ht();var e}function wp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function CR(n){return!!n&&"integerValue"in n}function pI(n){return!!n&&"arrayValue"in n}function R1(n){return!!n&&"nullValue"in n}function P1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mb(n){return!!n&&"mapValue"in n}function gI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _p(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function M1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yj(n){return"nullValue"in n?Pb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wp(ih.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function vj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wp(ih.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sh:ht()}function N1(n,e){const t=oh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function k1(n,e){const t=oh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gI(t)}setAll(e){let t=Ar.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=gI(u):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Mb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return au(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_p(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Mi(gI(this.value))}}function O1(n){const e=[];return _p(n.fields,(t,r)=>{const i=new Ar([t]);if(Mb(r)){const a=O1(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Mo(e)}class nr{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new nr(e,0,Ut.min(),Ut.min(),Mi.empty(),0)}static newFoundDocument(e,t,r){return new nr(e,1,t,Ut.min(),r,0)}static newNoDocument(e,t){return new nr(e,2,t,Ut.min(),Mi.empty(),0)}static newUnknownDocument(e,t){return new nr(e,3,t,Ut.min(),Mi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wj{constructor(e,t=null,r=[],i=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=d,this.ht=null}}function L1(n,e=null,t=[],r=[],i=null,a=null,u=null){return new wj(n,e,t,r,i,a,u)}function Ip(n){const e=Je(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+a_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),dI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>a_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>a_(r)).join(",")),e.ht=t}return e.ht}function mI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xj(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!au(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!j1(n.startAt,e.startAt)&&j1(n.endAt,e.endAt)}function Nb(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function kb(n,e){return n.filters.filter(t=>t instanceof Ni&&t.field.isEqual(e))}function F1(n,e,t){let r=Pb,i=!0;for(const a of kb(n,e)){let u=Pb,d=!0;switch(a.op){case"<":case"<=":u=yj(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=Pb}N1({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];N1({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function U1(n,e,t){let r=sh,i=!0;for(const a of kb(n,e)){let u=sh,d=!0;switch(a.op){case">=":case">":u=vj(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=sh}k1({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];k1({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Ni extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Ej(e,t,r):"array-contains"===t?new bj(e,r):"in"===t?new Dj(e,r):"not-in"===t?new Sj(e,r):"array-contains-any"===t?new Aj(e,r):new Ni(e,t,r)}static lt(e,t,r){return"in"===t?new Cj(e,r):new Tj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(oh(t,this.value)):null!==t&&vp(this.value)===vp(t)&&this.ft(oh(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ej extends Ni{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class Cj extends Ni{constructor(e,t){super(e,"in",t),this.keys=V1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Tj extends Ni{constructor(e,t){super(e,"not-in",t),this.keys=V1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function V1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class bj extends Ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pI(t)&&fI(t.arrayValue,this.value)}}class Dj extends Ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fI(this.value.arrayValue,t)}}class Sj extends Ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(fI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fI(this.value.arrayValue,t)}}class Aj extends Ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fI(this.value.arrayValue,r))}}class ah{constructor(e,t){this.position=e,this.inclusive=t}}class l_{constructor(e,t="asc"){this.field=e,this.dir=t}}function xj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function B1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(u.referenceValue),t.key):oh(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function j1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!au(n.position[t],e.position[t]))return!1;return!0}class oc{constructor(e,t=null,r=[],i=[],a=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=m,this._t=null,this.wt=null}}function H1(n,e,t,r,i,a,u,d){return new oc(n,e,t,r,i,a,u,d)}function u_(n){return new oc(n)}function $1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function TR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bR(n){for(const e of n.filters)if(e.dt())return e.field;return null}function DR(n){return null!==n.collectionGroup}function c_(n){const e=Je(n);if(null===e._t){e._t=[];const t=bR(e),r=TR(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new l_(t)),e._t.push(new l_(Ar.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new l_(Ar.keyField(),a))}}}return e._t}function Ts(n){const e=Je(n);if(!e.wt)if("F"===e.limitType)e.wt=L1(e.path,e.collectionGroup,c_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of c_(e))t.push(new l_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ah(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ah(e.startAt.position,e.startAt.inclusive):null;e.wt=L1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ob(n,e,t){return new oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _I(n,e){return mI(Ts(n),Ts(e))&&n.limitType===e.limitType}function W1(n){return`${Ip(Ts(n))}|lt:${n.limitType}`}function SR(n){return`Query(target=${function Ij(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${a_(r.value)}`;var r}).join(", ")}]`),dI(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>a_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>a_(t)).join(",")),`Target(${e})`}(Ts(n))}; limitType=${n.limitType})`}function AR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const d=B1(i,a,u);return i.inclusive?d<=0:d<0}(t.startAt,c_(t),r)||t.endAt&&!function(i,a,u){const d=B1(i,a,u);return i.inclusive?d>=0:d>0}(t.endAt,c_(t),r)));var t,r}function G1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function z1(n){return(e,t)=>{let r=!1;for(const i of c_(n)){const a=Rj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Rj(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,u){const d=a.data.field(i),m=u.data.field(i);return null!==d&&null!==m?oh(d,m):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function q1(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hI(e)?"-0":e}}function K1(n){return{integerValue:""+n}}function Z1(n,e){return A1(e)?K1(e):q1(n,e)}class Lb{constructor(){this._=void 0}}function Pj(n,e,t){return n instanceof d_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Ep?Q1(n,e):n instanceof Cp?J1(n,e):function(r,i){const a=Y1(r,i),u=X1(a)+X1(r.yt);return CR(a)&&CR(r.yt)?K1(u):q1(r.It,u)}(n,e)}function Mj(n,e,t){return n instanceof Ep?Q1(n,e):n instanceof Cp?J1(n,e):t}function Y1(n,e){return n instanceof h_?CR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class d_ extends Lb{}class Ep extends Lb{constructor(e){super(),this.elements=e}}function Q1(n,e){const t=eL(e);for(const r of n.elements)t.some(i=>au(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cp extends Lb{constructor(e){super(),this.elements=e}}function J1(n,e){let t=eL(e);for(const r of n.elements)t=t.filter(i=>!au(i,r));return{arrayValue:{values:t}}}class h_ extends Lb{constructor(e,t){super(),this.It=e,this.yt=t}}function X1(n){return Rr(n.integerValue||n.doubleValue)}function eL(n){return pI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yI{constructor(e,t){this.field=e,this.transform=t}}class kj{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ub{}function tL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new p_(n.key,gr.none()):new f_(n.key,n.data,gr.none());{const t=n.data,r=Mi.empty();let i=new Bn(Ar.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new ac(n.key,r,new Mo(i.toArray()),gr.none())}}function Oj(n,e,t){n instanceof f_?function(r,i,a){const u=r.value.clone(),d=iL(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof ac?function(r,i,a){if(!Fb(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=iL(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(rL(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vI(n,e,t,r){return n instanceof f_?function(i,a,u,d){if(!Fb(i.precondition,a))return u;const m=i.value.clone(),v=sL(i.fieldTransforms,d,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ac?function(i,a,u,d){if(!Fb(i.precondition,a))return u;const m=sL(i.fieldTransforms,d,a),v=a.data;return v.setAll(rL(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,Fb(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function Lj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Y1(r.transform,i||null);null!=a&&(null===t&&(t=Mi.empty()),t.set(r.field,a))}return t||null}function nL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&s_(t,r,(i,a)=>function Nj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ep&&r instanceof Ep||t instanceof Cp&&r instanceof Cp?s_(t.elements,r.elements,au):t instanceof h_&&r instanceof h_?au(t.yt,r.yt):t instanceof d_&&r instanceof d_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class f_ extends Ub{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ac extends Ub{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function rL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function iL(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,d=e.data.field(a.field);r.set(a.field,Mj(u,d,t[i]))}return r}function sL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,Pj(a,u,e))}return r}class p_ extends Ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xR extends Ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fj{constructor(e){this.count=e}}var Gr,mn;function oL(n){switch(n){default:return ht();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function aL(n){if(void 0===n)return Or("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Gr.OK:return _e.OK;case Gr.CANCELLED:return _e.CANCELLED;case Gr.UNKNOWN:return _e.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return _e.INTERNAL;case Gr.UNAVAILABLE:return _e.UNAVAILABLE;case Gr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Gr.NOT_FOUND:return _e.NOT_FOUND;case Gr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Gr.ABORTED:return _e.ABORTED;case Gr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Gr.DATA_LOSS:return _e.DATA_LOSS;default:return ht()}}(mn=Gr||(Gr={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class lh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_p(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return b1(this.inner)}size(){return this.innerSize}}const Uj=new xr(Ke.comparator);function qs(){return Uj}const lL=new xr(Ke.comparator);function wI(...n){let e=lL;for(const t of n)e=e.insert(t.key,t);return e}function uL(n){let e=lL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lu(){return II()}function cL(){return II()}function II(){return new lh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Vj=new xr(Ke.comparator),Bj=new Bn(Ke.comparator);function Jt(...n){let e=Bj;for(const t of n)e=e.add(t);return e}const jj=new Bn(Gt);function Vb(){return jj}class EI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,CI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new EI(Ut.min(),i,Vb(),qs(),Jt())}}class CI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new CI(r,t,Jt(),Jt(),Jt())}}class Bb{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class dL{constructor(e,t){this.targetId=e,this.At=t}}class hL{constructor(e,t,r=ri.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class fL{constructor(){this.Rt=0,this.bt=gL(),this.Pt=ri.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Jt(),t=Jt(),r=Jt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new CI(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=gL()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Hj{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=qs(),this.qt=pL(),this.Kt=new Bn(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(Nb(a))if(0===r){const u=new Ke(a.path);this.jt(t,u,nr.newNoDocument(u,Ut.min()))}else Ft(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,u)=>{const d=this.Xt(u);if(d){if(a.current&&Nb(d.target)){const m=new Ke(d.target.path);null!==this.Ut.get(m)||this.ee(u,m)||this.jt(u,m,nr.newNoDocument(m,e))}a.Dt&&(t.set(u,a.xt()),a.Nt())}});let r=Jt();this.qt.forEach((a,u)=>{let d=!0;u.forEachWhile(m=>{const v=this.Xt(m);return!v||2===v.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,u)=>u.setReadTime(e));const i=new EI(e,t,this.Kt,this.Ut,r);return this.Ut=qs(),this.qt=pL(),this.Kt=new Bn(Gt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new fL,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Bn(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new fL),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function pL(){return new xr(Ke.comparator)}function gL(){return new xr(Ke.comparator)}const $j={asc:"ASCENDING",desc:"DESCENDING"},Wj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Gj{constructor(e,t){this.databaseId=e,this.gt=t}}function TI(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mL(n,e){return n.gt?e.toBase64():e.toUint8Array()}function zj(n,e){return TI(n,e.toTimestamp())}function _i(n){return Ft(!!n),Ut.fromTimestamp(function(e){const t=rh(e);return new pr(t.seconds,t.nanos)}(n))}function RR(n,e){return(t=n,new gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function _L(n){const e=gn.fromString(n);return Ft(bL(e)),e}function bI(n,e){return RR(n.databaseId,e.path)}function uu(n,e){const t=_L(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(vL(t))}function PR(n,e){return RR(n.databaseId,e)}function yL(n){const e=_L(n);return 4===e.length?gn.emptyPath():vL(e)}function DI(n){return new gn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vL(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function wL(n,e,t){return{name:bI(n,e),fields:t.value.mapValue.fields}}function IL(n,e,t){const r=uu(n,e.name),i=_i(e.updateTime),a=new Mi({mapValue:{fields:e.fields}}),u=nr.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function SI(n,e){let t;if(e instanceof f_)t={update:wL(n,e.key,e.value)};else if(e instanceof p_)t={delete:bI(n,e.key)};else if(e instanceof ac)t={update:wL(n,e.key,e.data),updateMask:tH(e.fieldMask)};else{if(!(e instanceof xR))return ht();t={verify:bI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof d_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ep)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Cp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof h_)return{fieldPath:a.field.canonicalString(),increment:u.yt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:zj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function MR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?gr.updateTime(_i(i.updateTime)):void 0!==i.exists?gr.exists(i.exists):gr.none():gr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let d=null;"setToServerValue"in u?(Ft("REQUEST_TIME"===u.setToServerValue),d=new d_):"appendMissingElements"in u?d=new Ep(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new Cp(u.removeAllFromArray.values||[]):"increment"in u?d=new h_(a,u.increment):ht();const m=Ar.fromServerFormat(u.fieldPath);return new yI(m,d)}(n,i)):[];var i;if(e.update){const i=uu(n,e.update.name),a=new Mi({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Mo((e.updateMask.fieldPaths||[]).map(v=>Ar.fromServerFormat(v)));return new ac(i,a,u,t,r)}return new f_(i,a,t,r)}if(e.delete){const i=uu(n,e.delete);return new p_(i,t)}if(e.verify){const i=uu(n,e.verify);return new xR(i,t)}return ht()}function EL(n,e){return{documents:[PR(n,e.path)]}}function NR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=PR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=PR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(b=>function(S){if("=="===S.op){if(P1(S.value))return{unaryFilter:{field:g_(S.field),op:"IS_NAN"}};if(R1(S.value))return{unaryFilter:{field:g_(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(P1(S.value))return{unaryFilter:{field:g_(S.field),op:"IS_NOT_NAN"}};if(R1(S.value))return{unaryFilter:{field:g_(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:g_(S.field),op:Jj(S.op),value:S.value}}}(b));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:g_((b=v).field),direction:Qj(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(v=e.limit,n.gt||dI(v)?v:{value:v});var v,d,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function CL(n){let e=yL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=TL(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new l_(m_((S=b).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let d=null;t.limit&&(d=function(b){let S;return S="object"==typeof b?b.value:b,dI(S)?null:S}(t.limit));let m=null;var b;t.startAt&&(m=new ah((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new ah(b.values||[],!b.before)}(t.endAt)),H1(e,i,u,a,d,"F",m,v)}function TL(n){return n?void 0!==n.unaryFilter?[eH(n)]:void 0!==n.fieldFilter?[Xj(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>TL(e)).reduce((e,t)=>e.concat(t)):ht():[]}function Qj(n){return $j[n]}function Jj(n){return Wj[n]}function g_(n){return{fieldPath:n.canonicalString()}}function m_(n){return Ar.fromServerFormat(n.fieldPath)}function Xj(n){return Ni.create(m_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function eH(n){switch(n.unaryFilter.op){case"IS_NAN":const e=m_(n.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=m_(n.unaryFilter.field);return Ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=m_(n.unaryFilter.field);return Ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=m_(n.unaryFilter.field);return Ni.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function tH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function bs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DL(e)),e=nH(n.get(t),e);return DL(e)}function nH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function DL(n){return n+"\x01\x01"}function cu(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),gn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&ht(),n.charAt(u+1)){case"\x01":const d=n.substring(a,u);let m;0===i.length?m=d:(i+=d,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:ht()}a=u+2}return new gn(r)}const SL=["userId","batchId"];function jb(n,e){return[n,bs(e)]}function AL(n,e,t){return[n,bs(e),t]}const rH={},iH=["prefixPath","collectionGroup","readTime","documentId"],sH=["prefixPath","collectionGroup","documentId"],oH=["collectionGroup","readTime","prefixPath","documentId"],aH=["canonicalId","targetId"],lH=["targetId","path"],uH=["path","targetId"],cH=["collectionId","parent"],dH=["indexId","uid"],hH=["uid","sequenceNumber"],fH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pH=["indexId","uid","orderedDocumentKey"],gH=["userId","collectionPath","documentId"],mH=["userId","collectionPath","largestBatchId"],_H=["userId","collectionGroup","largestBatchId"],xL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yH=[...xL,"documentOverlays"],RL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PL=RL,vH=[...PL,"indexConfiguration","indexState","indexEntries"];class kR extends E1{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function yi(n,e){const t=Je(n);return _l.M(t.ie,e)}class OR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Oj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cL();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(i.key)?null:d;const m=tL(u,d);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(Ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&s_(this.mutations,e.mutations,(t,r)=>nL(t,r))&&s_(this.baseMutations,e.baseMutations,(t,r)=>nL(t,r))}}class LR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=Vj;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new LR(e,t,r,i)}}class FR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uh{constructor(e,t,r,i,a=Ut.min(),u=Ut.min(),d=ri.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new uh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ML{constructor(e){this.re=e}}function NL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:bI(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:TI(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tp(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Tp(e.version)}}var i,a;return r}function Hb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bp(n){const e=new pr(n.seconds,n.nanoseconds);return Ut.fromTimestamp(e)}function Dp(n,e){const t=(e.baseMutations||[]).map(a=>MR(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>MR(n.re,a)),i=pr.fromMillis(e.localWriteTimeMs);return new OR(e.batchId,i,t,r)}function AI(n){const e=bp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bp(n.lastLimboFreeSnapshotVersion):Ut.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=Ts(u_(yL(i.documents[0])))):r=Ts(CL(n.query)),new uh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ri.fromBase64String(n.resumeToken))}function kL(n,e){const t=Tp(e.snapshotVersion),r=Tp(e.lastLimboFreeSnapshotVersion);let i;i=Nb(e.target)?EL(n.re,e.target):NR(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ip(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function UR(n){const e=CL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ob(e,e.limit,"L"):e}function VR(n,e){return new FR(e.largestBatchId,MR(n.re,e.overlayMutation))}function OL(n,e){const t=e.path.lastSegment();return[n,bs(e.path.popLast()),t]}function LL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Tp(r.readTime),documentKey:bs(r.documentKey.path),largestBatchId:r.largestBatchId}}class IH{getBundleMetadata(e,t){return FL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:bp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return FL(e).put({bundleId:(r=t).id,createTime:Tp(_i(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return UL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:UR(i.bundledQuery),readTime:bp(i.readTime)};var i})}saveNamedQuery(e,t){return UL(e).put({name:(r=t).name,readTime:Tp(_i(r.readTime)),bundledQuery:r.bundledQuery});var r}}function FL(n){return yi(n,"bundles")}function UL(n){return yi(n,"namedQueries")}class $b{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new $b(e,t.uid||"")}getOverlay(e,t){return xI(e).get(OL(this.userId,t)).next(r=>r?VR(this.It,r):null)}getOverlays(e,t){const r=lu();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const d=new FR(t,u);i.push(this.ue(e,d))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(bs(u.getCollectionPath())));const a=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(xI(e).Y("collectionPathOverlayIndex",d))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=lu(),a=bs(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xI(e).W("collectionPathOverlayIndex",u).next(d=>{for(const m of d){const v=VR(this.It,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=lu();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xI(e).Z({index:"collectionGroupOverlayIndex",range:d},(m,v,b)=>{const S=VR(this.It,v);a.size()<i||S.largestBatchId===u?(a.set(S.getKey(),S),u=S.largestBatchId):b.done()}).next(()=>a)}ue(e,t){return xI(e).put(function(r,i,a){const[u,d,m]=OL(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:SI(r.re,a.mutation)}}(this.It,this.userId,t))}}function xI(n){return yi(n,"documentOverlays")}class Sp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Rr(e.integerValue));else if("doubleValue"in e){const r=Rr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),hI(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(yp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?M1(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):ht()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function EH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function VL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=EH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Sp.Te=new Sp;class CH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=VL(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=VL(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class TH{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class bH{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class RI{constructor(){this.Be=new CH,this.Le=new TH(this.Be),this.Ue=new bH(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Ap{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ap(this.indexId,this.documentKey,this.arrayValue,r)}}function xp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=BL(n.arrayValue,e.arrayValue),0!==t?t:(t=BL(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function BL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class DH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=_R(e);if(void 0!==t&&!this.ze(t))return!1;const r=gp(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class SH{constructor(){this.Ye=new BR}addToCollectionParentIndex(e,t){return this.Ye.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Po.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class BR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bn(gn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(gn.comparator)).toArray()}}const Wb=new Uint8Array(0);class AH{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new BR,this.Ze=new lh(r=>Ip(r),(r,i)=>mI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:bs(i)};return jL(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[y1(t),""],!1,!0);return jL(e).W(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(cu(u.parent))}return r})}addFieldIndex(e,t){const r=Gb(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=MI(e);return a.next(d=>{u.put(LL(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Gb(e),i=MI(e),a=PI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=PI(e);let i=!0;const a=new Map;return de.forEach(this.tn(t),u=>this.en(e,u).next(d=>{i&&(i=!!d),a.set(u,d)})).next(()=>{if(i){let u=Jt();const d=[];return de.forEach(a,(m,v)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${Ip(t)}`);const S=function(lt,ft){const At=_R(ft);if(void 0===At)return null;for(const Bt of kb(lt,At.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(v,m),P=function(lt,ft){const At=new Map;for(const Bt of gp(ft))for(const wr of kb(lt,Bt.fieldPath))switch(wr.op){case"==":case"in":At.set(Bt.fieldPath.canonicalString(),wr.value);break;case"not-in":case"!=":return At.set(Bt.fieldPath.canonicalString(),wr.value),Array.from(At.values())}return null}(v,m),V=function(lt,ft){const At=[];let Bt=!0;for(const wr of gp(ft)){const yl=0===wr.kind?F1(lt,wr.fieldPath,lt.startAt):U1(lt,wr.fieldPath,lt.startAt);At.push(yl.value),Bt&&(Bt=yl.inclusive)}return new ah(At,Bt)}(v,m),G=function(lt,ft){const At=[];let Bt=!0;for(const wr of gp(ft)){const yl=0===wr.kind?U1(lt,wr.fieldPath,lt.endAt):F1(lt,wr.fieldPath,lt.endAt);At.push(yl.value),Bt&&(Bt=yl.inclusive)}return new ah(At,Bt)}(v,m),ce=this.nn(m,v,V),ye=this.nn(m,v,G),ot=this.sn(m,v,P),dt=this.rn(m.indexId,S,ce,V.inclusive,ye,G.inclusive,ot);return de.forEach(dt,lt=>r.J(lt,t.limit).next(ft=>{ft.forEach(At=>{const Bt=Ke.fromSegments(At.documentKey);u.has(Bt)||(u=u.add(Bt),d.push(Bt))})}))}).next(()=>d)}return de.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,u,d){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),b=[];for(let S=0;S<m;++S){const P=t?this.on(t[S/v]):Wb,V=this.un(e,P,r[S%v],i),G=this.cn(e,P,a[S%v],u),ce=d.map(ye=>this.un(e,P,ye,!0));b.push(...this.createRange(V,G,ce))}return b}un(e,t,r,i){const a=new Ap(e,Ke.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Ap(e,Ke.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new DH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const d of a)r.We(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return de.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(u){let d=new Bn(Ar.comparator),m=!1;for(const v of u.filters){const b=v;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?m=!0:d=d.add(b.field))}for(const v of u.orderBy)v.field.isKeyField()||(d=d.add(v.field));return d.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new RI;for(const i of gp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.qe(i.kind);Sp.Te.ce(a,u)}return r.$e()}on(e){const t=new RI;return Sp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new RI;return Sp.Te.ce(wp(this.databaseId,t),r.qe(function(i){const a=gp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new RI);let a=0;for(const u of gp(e)){const d=r[a++];for(const m of i)if(this.ln(t,u.fieldPath)&&pI(d))i=this.fn(i,u,d);else{const v=m.qe(u.kind);Sp.Te.ce(d,v)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const d of i){const m=new RI;m.seed(d.$e()),Sp.Te.ce(u,m.qe(t.kind)),a.push(m)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Ni&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Gb(e),i=MI(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const u=[];return de.forEach(a,d=>i.get([d.indexId,this.uid]).next(m=>{u.push(function(v,b){const S=b?new lI(b.sequenceNumber,new Po(bp(b.readTime),new Ke(cu(b.documentKey)),b.largestBatchId)):lI.empty(),P=v.fields.map(([V,G])=>new Ab(Ar.fromServerFormat(V),G));return new Sb(v.indexId,v.collectionGroup,P,S)}(d,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Gb(e),a=MI(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>de.forEach(d,m=>a.put(LL(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?de.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,m=>this.wn(e,i,m).next(v=>{const b=this.mn(a,m);return v.isEqual(b)?de.resolve():this.gn(e,a,m,v,b)}))))})}yn(e,t,r,i){return PI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return PI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=PI(e);let a=new Bn(xp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,d)=>{a=a.add(new Ap(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}mn(e,t){let r=new Bn(xp);const i=this.an(t,e);if(null==i)return r;const a=_R(t);if(null!=a){const u=e.data.field(a.fieldPath);if(pI(u))for(const d of u.arrayValue.values||[])r=r.add(new Ap(t.indexId,e.key,this.on(d),i))}else r=r.add(new Ap(t.indexId,e.key,Wb,i));return r}gn(e,t,r,i,a){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,m,v,b,S){const P=d.getIterator(),V=m.getIterator();let G=o_(P),ce=o_(V);for(;G||ce;){let ye=!1,ot=!1;if(G&&ce){const dt=v(G,ce);dt<0?ot=!0:dt>0&&(ye=!0)}else null!=G?ot=!0:ye=!0;ye?(b(ce),ce=o_(V)):ot?(S(G),G=o_(P)):(G=o_(P),ce=o_(V))}}(i,a,xp,d=>{u.push(this.yn(e,t,r,d))},d=>{u.push(this.pn(e,t,r,d))}),de.waitFor(u)}_n(e){let t=1;return MI(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>xp(u,d)).filter((u,d,m)=>!d||0!==xp(u,m[d-1]));const i=[];i.push(e);for(const u of r){const d=xp(u,e),m=xp(u,t);if(0===d)i[0]=e.Ke();else if(d>0&&m<0)i.push(u),i.push(u.Ke());else if(m>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,Wb,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,Wb,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HL)}getMinOffset(e,t){return de.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||ht())).next(HL)}}function jL(n){return yi(n,"collectionParents")}function PI(n){return yi(n,"indexEntries")}function Gb(n){return yi(n,"indexConfiguration")}function MI(n){return yi(n,"indexState")}function HL(n){Ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;yR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Po(e.readTime,e.documentKey,t)}const $L={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ks{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ks(e,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function WL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:u},(b,S,P)=>(d++,P.delete()));a.push(m.next(()=>{Ft(1===d)}));const v=[];for(const b of t.mutations){const S=AL(e,b.key.path,t.batchId);a.push(i.delete(S)),v.push(b.key)}return de.waitFor(a).next(()=>v)}function zb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Ks.DEFAULT_COLLECTION_PERCENTILE=10,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ks.DEFAULT=new Ks(41943040,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ks.DISABLED=new Ks(-1,0,0);class qb{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new qb(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).Z({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=__(e),u=ch(e);return u.add({}).next(d=>{Ft("number"==typeof d);const m=new OR(d,t,r,i),v=function(P,V,G){const ce=G.baseMutations.map(ot=>SI(P.re,ot)),ye=G.mutations.map(ot=>SI(P.re,ot));return{userId:V,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ce,mutations:ye}}(this.It,this.userId,m),b=[];let S=new Bn((P,V)=>Gt(P.canonicalString(),V.canonicalString()));for(const P of i){const V=AL(this.userId,P.key.path,d);S=S.add(P.key.path.popLast()),b.push(u.put(v)),b.push(a.put(V,rH))}return S.forEach(P=>{b.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[d]=m.keys()}),de.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return ch(e).get(t).next(r=>r?(Ft(r.userId===this.userId),Dp(this.It,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ch(e).Z({index:"userMutationsIndex",range:i},(u,d,m)=>{d.userId===this.userId&&(Ft(d.batchId>=r),a=Dp(this.It,d)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ch(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).W("userMutationsIndex",t).next(r=>r.map(i=>Dp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return __(e).Z({range:i},(u,d,m)=>{const[v,b,S]=u,P=cu(b);if(v===this.userId&&t.path.isEqual(P))return ch(e).get(S).next(V=>{if(!V)throw ht();Ft(V.userId===this.userId),a.push(Dp(this.It,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Gt);const i=[];return t.forEach(a=>{const u=jb(this.userId,a.path),d=IDBKeyRange.lowerBound(u),m=__(e).Z({range:d},(v,b,S)=>{const[P,V,G]=v,ce=cu(V);P===this.userId&&a.path.isEqual(ce)?r=r.add(G):S.done()});i.push(m)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=jb(this.userId,r),u=IDBKeyRange.lowerBound(a);let d=new Bn(Gt);return __(e).Z({range:u},(m,v,b)=>{const[S,P,V]=m,G=cu(P);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(d=d.add(V)):b.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ch(e).get(a).next(u=>{if(null===u)throw ht();Ft(u.userId===this.userId),r.push(Dp(this.It,u))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return WL(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return __(e).Z({range:r},(a,u,d)=>{if(a[0]===this.userId){const m=cu(a[1]);i.push(m)}else d.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return GL(e,this.userId,t)}Rn(e){return zL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GL(n,e,t){const r=jb(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return __(n).Z({range:a,X:!0},(d,m,v)=>{const[b,S,P]=d;b===e&&S===i&&(u=!0),v.done()}).next(()=>u)}function ch(n){return yi(n,"mutations")}function __(n){return yi(n,"documentMutations")}function zL(n){return yi(n,"mutationQueues")}class Rp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rp(0)}static vn(){return new Rp(-1)}}class xH{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Rp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ut.fromTimestamp(new pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>y_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return y_(e).Z((u,d)=>{const m=AI(d);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return y_(e).Z((r,i)=>{const a=AI(i);t(a)})}Vn(e){return qL(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}Sn(e,t){return qL(e).put("targetGlobalKey",t)}Dn(e,t){return y_(e).put(kL(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ip(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return y_(e).Z({range:i,index:"queryTargetsIndex"},(u,d,m)=>{const v=AI(d);mI(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=dh(e);return t.forEach(u=>{const d=bs(u.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=dh(e);return de.forEach(t,a=>{const u=bs(a.path);return de.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=dh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=dh(e);let a=Jt();return i.Z({range:r,X:!0},(u,d,m)=>{const v=cu(u[1]),b=new Ke(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=bs(t.path),i=IDBKeyRange.bound([r],[y1(r)],!1,!0);let a=0;return dh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,d],m,v)=>{0!==u&&(a++,v.done())}).next(()=>a>0)}se(e,t){return y_(e).get(t).next(r=>r?AI(r):null)}}function y_(n){return yi(n,"targets")}function qL(n){return yi(n,"targetGlobal")}function dh(n){return yi(n,"targetDocuments")}function KL([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class RH{constructor(e){this.xn=e,this.buffer=new Bn(KL),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nh(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield th(r)}yield t.Fn(3e5)}))}}class MH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(zs.at);const r=new RH(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve($L)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$L):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,u,d,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,u=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,d=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),gR()<=wo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${a} targets in `+(m-d)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class NH{constructor(e,t){this.db=e,this.garbageCollector=new MH(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Kb(e,r)}removeReference(e,t,r){return Kb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Kb(e,t)}Gn(e,t){return function(r,i){let a=!1;return zL(r).tt(u=>GL(r,u,i).next(d=>(d&&(a=!0),de.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(u,d)=>{if(d<=t){const m=this.Gn(e,u).next(v=>{if(!v)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ut.min()),dh(e).delete([0,bs(u.path)])))});i.push(m)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Kb(e,t)}Kn(e,t){const r=dh(e);let i,a=zs.at;return r.Z({index:"documentTargetsIndex"},([u,d],{path:m,sequenceNumber:v})=>{0===u?(a!==zs.at&&t(new Ke(cu(i)),a),a=v,i=m):a=zs.at}).next(()=>{a!==zs.at&&t(new Ke(cu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kb(n,e){return dh(n).put((r=n.currentSequenceNumber,{targetId:0,path:bs(e.path),sequenceNumber:r}));var r}class ZL{constructor(){this.changes=new lh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kH{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Pp(e).put(r)}removeEntry(e,t,r){return Pp(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Hb(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=nr.newInvalidDocument(t);return Pp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(NI(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:nr.newInvalidDocument(t)};return Pp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(NI(t))},(i,a)=>{r={document:this.jn(t,a),size:zb(a)}}).next(()=>r)}getEntries(e,t){let r=qs();return this.zn(e,t,(i,a)=>{const u=this.jn(i,a);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=qs(),i=new xr(Ke.comparator);return this.zn(e,t,(a,u)=>{const d=this.jn(a,u);r=r.insert(a,d),i=i.insert(a,zb(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Bn(XL);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(NI(i.first()),NI(i.last())),u=i.getIterator();let d=u.getNext();return Pp(e).Z({index:"documentKeyIndex",range:a},(m,v,b)=>{const S=Ke.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&XL(d,S)<0;)r(d,null),d=u.getNext();d&&d.isEqual(S)&&(r(d,v),d=u.hasNext()?u.getNext():null),d?b.j(NI(d)):b.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Hb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pp(e).W(IDBKeyRange.bound(i,a,!0)).next(u=>{let d=qs();for(const m of u){const v=this.jn(Ke.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);d=d.insert(v.key,v)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=qs();const u=JL(t,r),d=JL(t,Po.max());return Pp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(m,v,b)=>{const S=this.jn(Ke.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new OH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QL(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Qn(e,t){return QL(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function wH(n,e){let t;if(e.document)t=IL(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=bp(e.noDocument.readTime);t=nr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=Ke.fromSegments(e.unknownDocument.path),i=bp(e.unknownDocument.version);t=nr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new pr(r[0],r[1]);return Ut.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ut.min()))return r}return nr.newInvalidDocument(e)}}function YL(n){return new kH(n)}class OH extends ZL{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new lh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Bn((a,u)=>Gt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const d=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,d.readTime)),u.isValidDocument()){const m=NL(this.Yn.It,u);i=i.add(a.path.popLast()),r+=zb(m)-d.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=d.size,this.trackRemovals){const m=NL(this.Yn.It,u.convertToNoDocument(Ut.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,u)=>{this.Xn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function QL(n){return yi(n,"remoteDocumentGlobal")}function Pp(n){return yi(n,"remoteDocumentsV14")}function NI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JL(n,e){const t=e.documentKey.path.toArray();return[n,Hb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Gt(t[a],r[a]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class LH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&vI(r.mutation,i,Mo.empty(),pr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=lu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=wI();return a.forEach((d,m)=>{u=u.insert(d,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=lu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let a=qs();const u=II(),d=II();return t.forEach((m,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof ac)?a=a.insert(v.key,v):void 0!==b&&(u.set(v.key,b.mutation.getFieldMask()),vI(b.mutation,v,b.mutation.getFieldMask(),pr.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,b)=>u.set(v,b)),t.forEach((v,b)=>{var S;return d.set(v,new LH(b,null!==(S=u.get(v))&&void 0!==S?S:null))}),d))}recalculateAndSaveOverlays(e,t){const r=II();let i=new xr((u,d)=>u-d),a=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let b=r.get(m)||Mo.empty();b=d.applyToLocalView(v,b),r.set(m,b);const S=(i.get(d.batchId)||Jt()).add(m);i=i.insert(d.batchId,S)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),v=m.key,b=m.value,S=cL();b.forEach(P=>{if(!a.has(P)){const V=tL(t.get(P),r.get(P));null!==V&&S.set(P,V),a=a.add(P)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,S))}return de.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):DR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(lu());let d=-1,m=a;return u.next(v=>de.forEach(v,(b,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(b)?de.resolve():this.getBaseDocument(e,b,S).next(P=>{m=m.insert(b,P)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Jt())).next(b=>({batchId:d,changes:uL(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=wI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=wI();return this.indexManager.getCollectionParents(e,i).next(u=>de.forEach(u,d=>{const m=(v=t,b=d.child(i),new oc(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((b,S)=>{a=a.insert(b,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,nr.newInvalidDocument(v)))});let u=wI();return i.forEach((d,m)=>{const v=a.get(d);void 0!==v&&vI(v.mutation,m,Mo.empty(),pr.now()),AR(t,m)&&(u=u.insert(d,m))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(nr.newInvalidDocument(t))}}class FH{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:_i(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:UR(r.bundledQuery),readTime:_i(r.readTime)}),de.resolve();var r}}class UH{constructor(){this.overlays=new xr(Ke.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lu();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=lu(),a=t.length+1,u=new Ke(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new xr((v,b)=>v-b);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=lu(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const d=lu(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,b)=>d.set(v,b)),!(d.size()>=i)););return de.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new FR(t,r));let a=this.es.get(t);void 0===a&&(a=Jt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class jR{constructor(){this.ns=new Bn(vi.ss),this.rs=new Bn(vi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new vi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new vi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new gn([])),r=new vi(t,e),i=new vi(t,e+1),a=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),a.push(u.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new gn([])),r=new vi(t,e),i=new vi(t,e+1);let a=Jt();return this.rs.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new vi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class VH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Bn(vi.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const u=new OR(a,t,r,i);this.mutationQueue.push(u);for(const d of i)this.gs=this.gs.add(new vi(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),i=new vi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],u=>{const d=this.ys(u._s);a.push(d)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Gt);return t.forEach(i=>{const a=new vi(i,0),u=new vi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,u],d=>{r=r.add(d._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const u=new vi(new Ke(a),0);let d=new Bn(Gt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(d=d.add(m._s)),!0)},u),de.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const a=new vi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new vi(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class BH{constructor(e){this.Es=e,this.docs=new xr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(t))}getEntries(e,t){let r=qs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():nr.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=qs();const a=new Ke(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||yR(w1(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jH(this)}getSize(e){return de.resolve(this.size)}}class jH extends ZL{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class HH{constructor(e){this.persistence=e,this.Rs=new lh(t=>Ip(t),mI),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.bs=0,this.Ps=new jR,this.targetCount=0,this.vs=Rp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class tF{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new zs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new HH(this),this.indexManager=new SH,this.remoteDocumentCache=new BH(r=>this.referenceDelegate.xs(r)),this.It=new ML(t),this.Ns=new FH(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new VH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new $H(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class $H extends E1{constructor(e){super(),this.currentSequenceNumber=e}}class Zb{constructor(e){this.persistence=e,this.Fs=new jR,this.$s=null}static Bs(e){return new Zb(e)}get Ls(){if(this.$s)return this.$s;throw ht()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Ke.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Ut.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class WH{constructor(e){this.It=e}$(e,t,r,i){const a=new xb("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SL,{unique:!0}),d.createObjectStore("documentMutations"),nF(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),nF(e)),u=u.next(()=>function(d){const m=d.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ut.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,m){return m.store("mutations").W().next(v=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SL,{unique:!0});const b=m.store("mutations"),S=v.map(P=>b.put(P));return de.waitFor(S)})}(e,a))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(a))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(a))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(a))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const m=d.createObjectStore("documentOverlays",{keyPath:gH});m.createIndex("collectionPathOverlayIndex",mH,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",_H,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const m=d.createObjectStore("remoteDocumentsV14",{keyPath:iH});m.createIndex("documentKeyIndex",sH),m.createIndex("collectionGroupIndex",oH)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,a))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:dH}).createIndex("sequenceNumberIndex",hH,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:fH}).createIndex("documentKeyIndex",pH,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=zb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(d=>de.forEach(d,m=>{Ft(m.userId===a.userId);const v=Dp(this.It,m);return WL(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((u,d)=>{const m=new gn(u),v=[0,bs(m)];a.push(t.get(v).next(b=>b?de.resolve():t.put({targetId:0,path:bs(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:cH});const r=t.store("collectionParents"),i=new BR,a=u=>{if(i.add(u)){const d=u.lastSegment(),m=u.popLast();return r.put({collectionId:d,parent:bs(m)})}};return t.store("remoteDocuments").Z({X:!0},(u,d)=>{const m=new gn(u);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,d,m],v)=>{const b=cu(d);return a(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=AI(i),u=kL(this.It,a);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,u)=>{const d=t.store("remoteDocumentsV14"),m=(v=u,v.document?new Ke(gn.fromString(v.document.name).popFirst(5)):v.noDocument?Ke.fromSegments(v.noDocument.path):v.unknownDocument?Ke.fromSegments(v.unknownDocument.path):ht()).path.toArray();var v;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(b))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=YL(this.It),a=new tF(Zb.Bs,this.It.re);return r.W().next(u=>{const d=new Map;return u.forEach(m=>{var v;let b=null!==(v=d.get(m.userId))&&void 0!==v?v:Jt();Dp(this.It,m).keys().forEach(S=>b=b.add(S)),d.set(m.userId,b)}),de.forEach(d,(m,v)=>{const b=new mi(v),S=$b.oe(this.It,b),P=a.getIndexManager(b),V=qb.oe(b,this.It,P,a.referenceDelegate);return new eF(i,V,S,P).recalculateAndSaveOverlaysForDocumentKeys(new kR(t,zs.at),m).next()})})}}function nF(n){n.createObjectStore("targetDocuments",{keyPath:lH}).createIndex("documentTargetsIndex",uH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aH,{unique:!0}),n.createObjectStore("targetGlobal")}const HR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $R{constructor(e,t,r,i,a,u,d,m,v,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=u,this.document=d,this.Js=v,this.Ys=b,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!$R.C())throw new Fe(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NH(this,i),this.ii=t+"main",this.It=new ML(m),this.ri=new _l(this.ii,this.Xs,new WH(this.It)),this.Cs=new xH(this.referenceDelegate,this.It),this.remoteDocumentCache=YL(this.It),this.Ns=new IH,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,HR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new zs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(nh(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return kI(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return Yb(e).delete(this.clientId)}yi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=yi(r,"clientMetadata");return i.W().next(a=>{const u=e.Ii(a,18e5),d=a.filter(m=>-1===u.indexOf(m));return de.forEach(d,m=>i.delete(m.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):kI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(_e.FAILED_PRECONDITION,HR);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yb(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kR(t,zs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Yb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return qb.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AH(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return $b.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Xs)?vH:14===u?PL:13===u?RL:12===u?yH:11===u?xL:void ht();var u;let d;return this.ri.runTransaction(e,i,a,m=>(d=new kR(m,this.Ss?this.Ss.next():zs.at),"readwrite-primary"===t?this.fi(d).next(v=>!!v||this.di(d)).next(v=>{if(!v)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(_e.FAILED_PRECONDITION,I1);return r(d)}).next(v=>this.wi(d).next(()=>v)):this.Vi(d).next(()=>r(d)))).then(m=>(d.raiseOnCommittedEvent(),m))}Vi(e){return kI(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(_e.FAILED_PRECONDITION,HR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kI(e).put("owner",t)}static C(){return _l.C()}_i(e){const t=kI(e);return t.get("owner").next(r=>this.mi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Or(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kI(n){return yi(n,"owner")}function Yb(n){return yi(n,"clientMetadata")}function WR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class GR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Jt(),i=Jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new GR(e,t.fromCache,r,i)}}class rF{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if($1(t))return de.resolve(null);let r=Ts(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ob(t,null,"F"),r=Ts(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Jt(...a);return this.Ni.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,d);return this.$i(t,v,u,m.readTime)?this.ki(e,Ob(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return $1(t)||i.isEqual(Ut.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const u=this.Fi(t,a);return this.$i(t,u,r,i)?this.Mi(e,t):(gR()<=wo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),SR(t)),this.Bi(e,u,t,v1(i,-1)))})}Fi(e,t){let r=new Bn(z1(e));return t.forEach((i,a)=>{AR(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return gR()<=wo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",SR(t)),this.Ni.getDocumentsMatchingQuery(e,t,Po.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class GH{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new xr(Gt),this.qi=new lh(a=>Ip(a),mI),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eF(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function iF(n,e,t,r){return new GH(n,e,t,r)}function sF(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,Ie.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let m=Jt();for(const v of i){u.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of a){d.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:u,addedBatchIds:d}))})})}),zR.apply(this,arguments)}function zH(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,d,m,v){const b=m.batch,S=b.keys();let P=de.resolve();return S.forEach(V=>{P=P.next(()=>v.getEntry(d,V)).next(G=>{const ce=m.docVersions.get(V);Ft(null!==ce),G.version.compareTo(ce)<0&&(b.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))})}),P.next(()=>u.mutationQueue.removeMutationBatch(d,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Jt();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(d=d.add(u.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oF(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function qH(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((b,S)=>{const P=i.get(S);if(!P)return;d.push(t.Cs.removeMatchingKeys(a,b.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,b.addedDocuments,S)));let V=P.withSequenceNumber(a.currentSequenceNumber);var G,ce,ye;e.targetMismatches.has(S)?V=V.withResumeToken(ri.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(S,V),ce=V,ye=b,(0===(G=P).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,V))});let m=qs(),v=Jt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),d.push(aF(a,u,e.documentUpdates).next(b=>{m=b.Wi,v=b.zi})),!r.isEqual(Ut.min())){const b=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(b)}return de.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Ui=i,a))}function aF(n,e,t){let r=Jt(),i=Jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=qs();return t.forEach((d,m)=>{const v=a.get(d);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(d)),m.isNoDocument()&&m.version.isEqual(Ut.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",m.version)}),{Wi:u,zi:i}})}function KH(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function v_(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new uh(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function w_(n,e,t){return qR.apply(this,arguments)}function qR(){return qR=(0,Ie.Z)(function*(n,e,t){const r=Je(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!nh(u))throw u;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),qR.apply(this,arguments)}function Qb(n,e,t){const r=Je(n);let i=Ut.min(),a=Jt();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,m,v){const b=Je(d),S=b.qi.get(v);return void 0!==S?de.resolve(b.Ui.get(S)):b.Cs.getTargetData(m,v)}(r,u,Ts(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,d.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Ut.min(),t?a:Jt())).next(d=>(cF(r,G1(e),d),{documents:d,Hi:a})))}function lF(n,e){const t=Je(n),r=Je(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(u=>u?u.target:null))}function uF(n,e){const t=Je(n),r=t.Ki.get(e)||Ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,v1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(cF(t,e,i),i))}function cF(n,e,t){let r=n.Ki.get(e)||Ut.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function KR(){return KR=(0,Ie.Z)(function*(n,e,t,r){const i=Je(n);let a=Jt(),u=qs();for(const v of t){const b=e.Ji(v.metadata.name);v.document&&(a=a.add(b));const S=e.Yi(v);S.setReadTime(e.Xi(v.metadata.readTime)),u=u.insert(b,S)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield v_(i,(v=r,Ts(u_(gn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>aF(v,d,u).next(b=>(d.apply(v),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.Wi,b.zi)).next(()=>b.Wi)))}),KR.apply(this,arguments)}function YH(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Ie.Z)(function*(n,e,t=Jt()){const r=yield v_(n,Ts(UR(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=_i(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(a,e);const d=r.withResumeToken(ri.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(a,d).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),ZR.apply(this,arguments)}function dF(n,e){return`firestore_clients_${n}_${e}`}function hF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function YR(n,e){return`firestore_targets_${n}_${e}`}class Jb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Fe(i.error.code,i.error.message))),u?new Jb(e,t,i.state,a):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class OI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new OI(e,r.state,i):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Vb();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=A1(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new Xb(e,a):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class QR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new QR(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class JR{constructor(){this.activeTargetIds=Vb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XR{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new xr(Gt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=dF(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new JR),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(dF(e.persistenceKey,i));if(a){const u=Xb.Zi(i,a);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(YR(this.persistenceKey,e));if(r){const i=OI.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(YR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let u=zs.at;if(null!=a)try{const d=JSON.parse(a);Ft("number"==typeof d),u=d}catch(d){Or("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==zs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Jb(this.currentUser,e,t,r),a=hF(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=hF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=YR(this.persistenceKey,e),a=new OI(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Xb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Jb.Zi(new mi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return OI.Zi(i,t)}yr(e){return QR.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),u=[],d=[];return a.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{a.has(m)||d.push(m)}),this.syncEngine.Br(u,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Vb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class fF{constructor(){this.Lr=new JR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new JR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QH{qr(e){}shutdown(){}}class pF{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const JH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class e$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const u=this.ho(e,t);$e("RestConnection","Sending: ",u,r);const d={};return this.lo(d,i,a),this.fo(e,u,d,r).then(m=>($e("RestConnection","Received: ",m),m),m=>{throw pp("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}_o(e,t,r,i,a,u){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+i_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${JH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,u)=>{const d=new J2;d.setWithCredentials(!0),d.listenOnce(Z2.COMPLETE,()=>{var v;try{switch(d.getLastErrorCode()){case pR.NO_ERROR:const b=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),a(b);break;case pR.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),u(new Fe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case pR.HTTP_ERROR:const S=d.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',S,"response text:",d.getResponseText()),S>0){let P=d.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=null===(v=P)||void 0===v?void 0:v.error;if(V&&V.status&&V.message){const G=function(ce){const ye=ce.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(ye)>=0?ye:_e.UNKNOWN}(V.status);u(new Fe(G,V.message))}else u(new Fe(_e.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Fe(_e.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);d.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=q2(),u=K2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new Q2({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=i.join("");$e("Connection","Creating WebChannel: "+m,d);const v=a.createWebChannel(m,d);let b=!1,S=!1;const P=new XH({Hr:G=>{S?$e("Connection","Not sending because WebChannel is closed:",G):(b||($e("Connection","Opening WebChannel transport."),v.open(),b=!0),$e("Connection","WebChannel sending:",G),v.send(G))},Jr:()=>v.close()}),V=(G,ce,ye)=>{G.listen(ce,ot=>{try{ye(ot)}catch(dt){setTimeout(()=>{throw dt},0)}})};return V(v,Db.EventType.OPEN,()=>{S||$e("Connection","WebChannel transport opened.")}),V(v,Db.EventType.CLOSE,()=>{S||(S=!0,$e("Connection","WebChannel transport closed"),P.io())}),V(v,Db.EventType.ERROR,G=>{S||(S=!0,pp("Connection","WebChannel transport errored:",G),P.io(new Fe(_e.UNAVAILABLE,"The operation could not be completed")))}),V(v,Db.EventType.MESSAGE,G=>{var ce;if(!S){const ye=G.data[0];Ft(!!ye);const ot=ye,dt=ot.error||(null===(ce=ot[0])||void 0===ce?void 0:ce.error);if(dt){$e("Connection","WebChannel received error:",dt);const lt=dt.status;let ft=function(Bt){const wr=Gr[Bt];if(void 0!==wr)return aL(wr)}(lt),At=dt.message;void 0===ft&&(ft=_e.INTERNAL,At="Unknown error status: "+lt+" with message "+dt.message),S=!0,P.io(new Fe(ft,At)),v.close()}else $e("Connection","WebChannel received:",ye),P.ro(ye)}}),V(u,Y2.STAT_EVENT,G=>{G.stat===f1.PROXY?$e("Connection","Detected buffering proxy"):G.stat===f1.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function gF(){return typeof window<"u"?window:null}function eD(){return typeof document<"u"?document:null}function LI(n){return new Gj(n,!0)}class eP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class mF{constructor(e,t,r,i,a,u,d,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new eP(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ie.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t$ extends mF{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Kj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ht(),i=e.targetChange.targetIds||[],a=function(m,v){return m.gt?(Ft(void 0===v||"string"==typeof v),ri.fromBase64String(v||"")):(Ft(void 0===v||v instanceof Uint8Array),ri.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(m){const v=void 0===m.code?_e.UNKNOWN:aL(m.code);return new Fe(v,m.message||"")}(u);t=new hL(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=uu(n,r.document.name),a=_i(r.document.updateTime),u=new Mi({mapValue:{fields:r.document.fields}}),d=nr.newFoundDocument(i,a,u);t=new Bb(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=uu(n,r.document),a=r.readTime?_i(r.readTime):Ut.min(),u=nr.newNoDocument(i,a);t=new Bb([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=uu(n,r.document);t=new Bb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,a=new Fj(r.count||0);t=new dL(r.targetId,a)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ut.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ut.min():a.readTime?_i(a.readTime):Ut.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=DI(this.It),t.addTarget=function(i,a){let u;const d=a.target;return u=Nb(d)?{documents:EL(i,d)}:{query:NR(i,d)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=mL(i,a.resumeToken):a.snapshotVersion.compareTo(Ut.min())>0&&(u.readTime=TI(i,a.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function Yj(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=DI(this.It),t.removeTarget=e,this.Bo(t)}}class n$ extends mF{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Zj(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let a=_i(r.updateTime?r.updateTime:i);return a.isEqual(Ut.min())&&(a=_i(i)),new kj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.Zo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=DI(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>SI(this.It,r))};this.Bo(t)}}class r$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(_e.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection._o(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(_e.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class s${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Or(t),this.ou=!1):$e("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class o${constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget((0,Ie.Z)(function*(){var m;lc(u)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ie.Z)(function*(v){const b=Je(v);b._u.add(4),yield I_(b),b.gu.set("Unknown"),b._u.delete(4),yield FI(b)}),function(v){return m.apply(this,arguments)})(u))}))}),this.gu=new s$(r,i)}}function FI(n){return nP.apply(this,arguments)}function nP(){return nP=(0,Ie.Z)(function*(n){if(lc(n))for(const e of n.wu)yield e(!0)}),nP.apply(this,arguments)}function I_(n){return rP.apply(this,arguments)}function rP(){return rP=(0,Ie.Z)(function*(n){for(const e of n.wu)yield e(!1)}),rP.apply(this,arguments)}function tD(n,e){const t=Je(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),oP(t)?sP(t):C_(t).ko()&&iP(t,e))}function UI(n,e){const t=Je(n),r=C_(t);t.du.delete(e),r.ko()&&_F(t,e),0===t.du.size&&(r.ko()?r.Fo():lc(t)&&t.gu.set("Unknown"))}function iP(n,e){n.yu.Mt(e.targetId),C_(n).zo(e)}function _F(n,e){n.yu.Mt(e),C_(n).Ho(e)}function sP(n){n.yu=new Hj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),C_(n).start(),n.gu.uu()}function oP(n){return lc(n)&&!C_(n).No()&&n.du.size>0}function lc(n){return 0===Je(n)._u.size}function yF(n){n.yu=void 0}function a$(n){return aP.apply(this,arguments)}function aP(){return aP=(0,Ie.Z)(function*(n){n.du.forEach((e,t)=>{iP(n,e)})}),aP.apply(this,arguments)}function l$(n,e){return lP.apply(this,arguments)}function lP(){return lP=(0,Ie.Z)(function*(n,e){yF(n),oP(n)?(n.gu.hu(e),sP(n)):n.gu.set("Unknown")}),lP.apply(this,arguments)}function u$(n,e,t){return uP.apply(this,arguments)}function uP(){return uP=(0,Ie.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof hL&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(i,a){const u=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nD(n,r)}else if(e instanceof Bb?n.yu.Gt(e):e instanceof dL?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ut.min()))try{const r=yield oF(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.yu.te(a);return u.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach(d=>{const m=i.du.get(d);if(!m)return;i.du.set(d,m.withResumeToken(ri.EMPTY_BYTE_STRING,m.snapshotVersion)),_F(i,d);const v=new uh(m.target,d,1,m.sequenceNumber);iP(i,v)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield nD(n,r)}var r}),uP.apply(this,arguments)}function nD(n,e,t){return cP.apply(this,arguments)}function cP(){return cP=(0,Ie.Z)(function*(n,e,t){if(!nh(e))throw e;n._u.add(1),yield I_(n),n.gu.set("Offline"),t||(t=()=>oF(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield FI(n)}))}),cP.apply(this,arguments)}function vF(n,e){return e().catch(t=>nD(n,t,e))}function E_(n){return dP.apply(this,arguments)}function dP(){return dP=(0,Ie.Z)(function*(n){const e=Je(n),t=hh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;c$(e);)try{const i=yield KH(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,d$(e,i)}catch(i){yield nD(e,i)}wF(e)&&IF(e)}),dP.apply(this,arguments)}function c$(n){return lc(n)&&n.fu.length<10}function d$(n,e){n.fu.push(e);const t=hh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function wF(n){return lc(n)&&!hh(n).No()&&n.fu.length>0}function IF(n){hh(n).start()}function h$(n){return hP.apply(this,arguments)}function hP(){return hP=(0,Ie.Z)(function*(n){hh(n).eu()}),hP.apply(this,arguments)}function f$(n){return fP.apply(this,arguments)}function fP(){return fP=(0,Ie.Z)(function*(n){const e=hh(n);for(const t of n.fu)e.Xo(t.mutations)}),fP.apply(this,arguments)}function p$(n,e,t){return pP.apply(this,arguments)}function pP(){return pP=(0,Ie.Z)(function*(n,e,t){const r=n.fu.shift(),i=LR.from(r,e,t);yield vF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield E_(n)}),pP.apply(this,arguments)}function g$(n,e){return gP.apply(this,arguments)}function gP(){return gP=(0,Ie.Z)(function*(n,e){var t;e&&hh(n).Yo&&(yield(t=(0,Ie.Z)(function*(r,i){if(oL(a=i.code)&&a!==_e.ABORTED){const u=r.fu.shift();hh(r).Mo(),yield vF(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield E_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),wF(n)&&IF(n)}),gP.apply(this,arguments)}function EF(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,Ie.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=lc(t);t._u.add(3),yield I_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield FI(t)}),mP.apply(this,arguments)}function _P(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,Ie.Z)(function*(n,e){const t=Je(n);e?(t._u.delete(2),yield FI(t)):e||(t._u.add(2),yield I_(t),t.gu.set("Unknown"))}),yP.apply(this,arguments)}function C_(n){return n.pu||(n.pu=function(e,t,r){const i=Je(e);return i.su(),new t$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:a$.bind(null,n),Zr:l$.bind(null,n),Wo:u$.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.pu.Mo(),oP(n)?sP(n):n.gu.set("Unknown")):(yield n.pu.stop(),yF(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function hh(n){return n.Iu||(n.Iu=function(e,t,r){const i=Je(e);return i.su(),new n$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:h$.bind(null,n),Zr:g$.bind(null,n),tu:f$.bind(null,n),Zo:p$.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Mo(),yield E_(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class vP{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,d=new vP(e,t,u,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(n,e){if(Or("AsyncQueue",`${e}: ${n}`),nh(n))return new Fe(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class b_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=wI(),this.sortedSet=new xr(this.comparator)}static emptySet(e){return new b_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof b_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new b_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CF{constructor(){this.Tu=new xr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class D_{constructor(e,t,r,i,a,u,d,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new D_(e,t,b_.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_I(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class m${constructor(){this.Au=void 0,this.listeners=[]}}class _${constructor(){this.queries=new lh(e=>W1(e),_I),this.onlineState="Unknown",this.Ru=new Set}}function wP(n,e){return IP.apply(this,arguments)}function IP(){return IP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new m$),i)try{a.Au=yield t.onListen(r)}catch(u){const d=T_(u,`Initialization of query '${SR(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&TP(t)}),IP.apply(this,arguments)}function EP(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),CP.apply(this,arguments)}function y$(n,e){const t=Je(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Pu(i)&&(r=!0);u.Au=i}}r&&TP(t)}function v$(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function TP(n){n.Ru.forEach(e=>{e.next()})}class bP{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new D_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=D_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class w${constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class TF{constructor(e){this.It=e}Ji(e){return uu(this.It,e)}Yi(e){return e.metadata.exists?IL(this.It,e.document,!1):nr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return _i(e)}}class I${constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bF(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=gn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new TF(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||Jt()).add(a);t.set(u,d)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function ZH(n,e,t,r){return KR.apply(this,arguments)}(e.localStore,new TF(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield YH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function bF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class DF{constructor(e){this.key=e}}class SF{constructor(e){this.key=e}}class AF{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jt(),this.mutatedKeys=Jt(),this.Gu=z1(e),this.Qu=new b_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new CF,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const P=i.get(b),V=AR(this.query,S)?S:null,G=!!P&&this.mutatedKeys.has(P.key),ce=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ye=!1;P&&V?P.data.isEqual(V.data)?G!==ce&&(r.track({type:3,doc:V}),ye=!0):this.Hu(P,V)||(r.track({type:2,doc:V}),ye=!0,(m&&this.Gu(V,m)>0||v&&this.Gu(V,v)<0)&&(d=!0)):!P&&V?(r.track({type:0,doc:V}),ye=!0):P&&!V&&(r.track({type:1,doc:P}),ye=!0,(m||v)&&(d=!0)),ye&&(V?(u=u.add(V),a=ce?a.add(b):a.delete(b)):(u=u.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Qu:u,zu:r,$i:d,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,b)=>function(S,P){const V=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return V(S)-V(P)}(v.type,b.type)||this.Gu(v.doc,b.doc)),this.Ju(r);const u=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,m=d!==this.qu;return this.qu=d,0!==a.length||m?{snapshot:new D_(this.query,e.Qu,i,a,e.mutatedKeys,0===d,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new CF,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new SF(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new DF(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return D_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class E${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class C${constructor(e){this.key=e,this.nc=!1}}class T${constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new lh(d=>W1(d),_I),this.rc=new Map,this.oc=new Set,this.uc=new xr(Ke.comparator),this.cc=new Map,this.ac=new jR,this.hc={},this.lc=new Map,this.fc=Rp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function b$(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,Ie.Z)(function*(n,e){const t=ZP(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const u=yield v_(t.localStore,Ts(e));t.isPrimaryClient&&tD(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield SP(t,e,r,"current"===d,u.resumeToken)}return i}),DP.apply(this,arguments)}function SP(n,e,t,r,i){return AP.apply(this,arguments)}function AP(){return AP=(0,Ie.Z)(function*(n,e,t,r,i){n._c=(S,P,V)=>{return(G=(0,Ie.Z)(function*(ce,ye,ot,dt){let lt=ye.view.Wu(ot);lt.$i&&(lt=yield Qb(ce.localStore,ye.query,!1).then(({documents:Bt})=>ye.view.Wu(Bt,lt)));const ft=dt&&dt.targetChanges.get(ye.targetId),At=ye.view.applyChanges(lt,ce.isPrimaryClient,ft);return UP(ce,ye.targetId,At.Xu),At.snapshot}),function(ce,ye,ot,dt){return G.apply(this,arguments)})(n,S,P,V);var G};const a=yield Qb(n.localStore,e,!0),u=new AF(e,a.Hi),d=u.Wu(a.documents),m=CI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=u.applyChanges(d,n.isPrimaryClient,m);UP(n,t,v.Xu);const b=new E$(e,t,u);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),AP.apply(this,arguments)}function D$(n,e){return xP.apply(this,arguments)}function xP(){return xP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!_I(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield w_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),UI(t.remoteStore,r.targetId),S_(t,r.targetId)}).catch(th))):(S_(t,r.targetId),yield w_(t.localStore,r.targetId,!0))}),xP.apply(this,arguments)}function RP(){return RP=(0,Ie.Z)(function*(n,e,t){const r=YP(n);try{const i=yield function(a,u){const d=Je(a),m=pr.now(),v=u.reduce((P,V)=>P.add(V.key),Jt());let b,S;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=qs(),G=Jt();return d.Gi.getEntries(P,v).next(ce=>{V=ce,V.forEach((ye,ot)=>{ot.isValidDocument()||(G=G.add(ye))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,V)).next(ce=>{b=ce;const ye=[];for(const ot of u){const dt=Lj(ot,b.get(ot.key).overlayedDocument);null!=dt&&ye.push(new ac(ot.key,dt,O1(dt.value.mapValue),gr.exists(!0)))}return d.mutationQueue.addMutationBatch(P,m,ye,u)}).next(ce=>{S=ce;const ye=ce.applyToLocalDocumentSet(b,G);return d.documentOverlayCache.saveOverlays(P,ce.batchId,ye)})}).then(()=>({batchId:S.batchId,changes:uL(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,d){let m=a.hc[a.currentUser.toKey()];m||(m=new xr(Gt)),m=m.insert(u,d),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield uc(r,i.changes),yield E_(r.remoteStore)}catch(i){const a=T_(i,"Failed to persist write");t.reject(a)}}),RP.apply(this,arguments)}function xF(n,e){return PP.apply(this,arguments)}function PP(){return PP=(0,Ie.Z)(function*(n,e){const t=Je(n);try{const r=yield qH(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.cc.get(a);u&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Ft(u.nc):i.removedDocuments.size>0&&(Ft(u.nc),u.nc=!1))}),yield uc(t,r,e)}catch(r){yield th(r)}}),PP.apply(this,arguments)}function RF(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,u)=>{const d=u.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,u){const d=Je(a);d.onlineState=u;let m=!1;d.queries.forEach((v,b)=>{for(const S of b.listeners)S.bu(u)&&(m=!0)}),m&&TP(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function A$(n,e,t){return MP.apply(this,arguments)}function MP(){return MP=(0,Ie.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let u=new xr(Ke.comparator);u=u.insert(a,nr.newNoDocument(a,Ut.min()));const d=Jt().add(a),m=new EI(Ut.min(),new Map,new Bn(Gt),u,d);yield xF(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),VP(r)}else yield w_(r.localStore,e,!1).then(()=>S_(r,e,t)).catch(th)}),MP.apply(this,arguments)}function x$(n,e){return NP.apply(this,arguments)}function NP(){return NP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield zH(t.localStore,e);FP(t,r,null),LP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield uc(t,i)}catch(i){yield th(i)}}),NP.apply(this,arguments)}function R$(n,e,t){return kP.apply(this,arguments)}function kP(){return kP=(0,Ie.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(a,u){const d=Je(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,u).next(b=>(Ft(null!==b),v=b.keys(),d.mutationQueue.removeMutationBatch(m,b))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(r.localStore,e);FP(r,e,t),LP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield uc(r,i)}catch(i){yield th(i)}}),kP.apply(this,arguments)}function OP(){return OP=(0,Ie.Z)(function*(n,e){const t=Je(n);lc(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Je(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=T_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),OP.apply(this,arguments)}function LP(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function FP(n,e,t){const r=Je(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function S_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||PF(n,r)})}function PF(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(UI(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),VP(n))}function UP(n,e,t){for(const r of t)r instanceof DF?(n.ac.addReference(r.key,e),M$(n,r)):r instanceof SF?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||PF(n,r.key)):ht()}function M$(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oc.add(r),VP(n))}function VP(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ke(gn.fromString(e)),r=n.fc.next();n.cc.set(r,new C$(t)),n.uc=n.uc.insert(t,r),tD(n.remoteStore,new uh(Ts(u_(t.path)),r,2,zs.at))}}function uc(n,e,t){return BP.apply(this,arguments)}function BP(){return BP=(0,Ie.Z)(function*(n,e,t){const r=Je(n),i=[],a=[],u=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,m)=>{u.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=GR.Ci(m.targetId,v);a.push(b)}}))}),yield Promise.all(u),r.sc.Wo(i),yield(d=(0,Ie.Z)(function*(m,v){const b=Je(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(v,P=>de.forEach(P.Si,V=>b.persistence.referenceDelegate.addReference(S,P.targetId,V)).next(()=>de.forEach(P.Di,V=>b.persistence.referenceDelegate.removeReference(S,P.targetId,V)))))}catch(S){if(!nh(S))throw S;$e("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const V=b.Ui.get(P),ce=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);b.Ui=b.Ui.insert(P,ce)}}}),function(m,v){return d.apply(this,arguments)})(r.localStore,a))}),BP.apply(this,arguments)}function N$(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,Ie.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield sF(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(d=>{d.reject(new Fe(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uc(t,r.ji)}var i}),jP.apply(this,arguments)}function k$(n,e){const t=Je(n),r=t.cc.get(e);if(r&&r.nc)return Jt().add(r.key);{let i=Jt();const a=t.rc.get(e);if(!a)return i;for(const u of a){const d=t.ic.get(u);i=i.unionWith(d.view.ju)}return i}}function O$(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,Ie.Z)(function*(n,e){const t=Je(n),r=yield Qb(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&UP(t,e.targetId,i.Xu),i}),HP.apply(this,arguments)}function L$(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,Ie.Z)(function*(n,e){const t=Je(n);return uF(t.localStore,e).then(r=>uc(t,r))}),$P.apply(this,arguments)}function F$(n,e,t,r){return WP.apply(this,arguments)}function WP(){return WP=(0,Ie.Z)(function*(n,e,t,r){const i=Je(n),a=yield function(u,d){const m=Je(u),v=Je(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Tn(b,d).next(S=>S?m.localDocuments.getDocuments(b,S):de.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield E_(i.remoteStore):"acknowledged"===t||"rejected"===t?(FP(i,e,r||null),LP(i,e),d=e,Je(Je(i.localStore).mutationQueue).An(d)):ht(),yield uc(i,a)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),WP.apply(this,arguments)}function GP(){return GP=(0,Ie.Z)(function*(n,e){const t=Je(n);if(ZP(t),YP(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield MF(t,r.toArray());t.dc=!0,yield _P(t.remoteStore,!0);for(const a of i)tD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(S_(t,u),w_(t.localStore,u,!0))),UI(t.remoteStore,u)}),yield i,yield MF(t,r),function(a){const u=Je(a);u.cc.forEach((d,m)=>{UI(u.remoteStore,m)}),u.ac.fs(),u.cc=new Map,u.uc=new xr(Ke.comparator)}(t),t.dc=!1,yield _P(t.remoteStore,!1)}}),GP.apply(this,arguments)}function MF(n,e,t){return zP.apply(this,arguments)}function zP(){return zP=(0,Ie.Z)(function*(n,e,t){const r=Je(n),i=[],a=[];for(const u of e){let d;const m=r.rc.get(u);if(m&&0!==m.length){d=yield v_(r.localStore,Ts(m[0]));for(const v of m){const b=r.ic.get(v),S=yield O$(r,b);S.snapshot&&a.push(S.snapshot)}}else{const v=yield lF(r.localStore,u);d=yield v_(r.localStore,v),yield SP(r,NF(v),u,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(a),i}),zP.apply(this,arguments)}function NF(n){return H1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function V$(n){const e=Je(n);return Je(Je(e.localStore).persistence).vi()}function B$(n,e,t,r){return qP.apply(this,arguments)}function qP(){return qP=(0,Ie.Z)(function*(n,e,t,r){const i=Je(n);if(i.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield uF(i.localStore,G1(a[0])),d=EI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ri.EMPTY_BYTE_STRING);yield uc(i,u,d);break}case"rejected":yield w_(i.localStore,e,!0),S_(i,e,r);break;default:ht()}}),qP.apply(this,arguments)}function j$(n,e,t){return KP.apply(this,arguments)}function KP(){return KP=(0,Ie.Z)(function*(n,e,t){const r=ZP(n);if(r.dc){for(const i of e){if(r.rc.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const a=yield lF(r.localStore,i),u=yield v_(r.localStore,a);yield SP(r,NF(a),u.targetId,!1,u.resumeToken),tD(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield w_(r.localStore,i,!1).then(()=>{UI(r.remoteStore,i),S_(r,i)}).catch(th))}}),KP.apply(this,arguments)}function ZP(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A$.bind(null,e),e.sc.Wo=y$.bind(null,e.eventManager),e.sc.wc=v$.bind(null,e.eventManager),e}function YP(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R$.bind(null,e),e}class kF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.It=LI(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return iF(this.persistence,new rF,e.initialUser,this.It)}yc(e){return new tF(Zb.Bs,this.It)}gc(e){return new fF}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OF extends kF{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield YP(r.Ac.syncEngine),yield E_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return iF(this.persistence,new rF,e.initialUser,this.It)}Tc(e,t){return new PH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new pj(t,this.persistence);return new fj(e.asyncQueue,r)}yc(e){const t=WR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ks.withCacheSize(this.cacheSizeBytes):Ks.DEFAULT;return new $R(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gF(),eD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new fF}}class $$ extends OF{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof XR&&(r.sharedClientState.syncEngine={Fr:F$.bind(null,i),$r:B$.bind(null,i),Br:j$.bind(null,i),vi:V$.bind(null,i),Mr:L$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ie.Z)(function*(u){yield function U$(n,e){return GP.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}gc(e){const t=gF();if(!XR.C(t))throw new Fe(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=WR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new XR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class QP{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>RF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=N$.bind(null,r.syncEngine),yield _P(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _$}createDatastore(e){const t=LI(e.databaseInfo.databaseId),r=new e$(e.databaseInfo);return new r$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>RF(this.syncEngine,d,0),u=pF.C()?new pF:new QH,new o$(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,d,m,v){const b=new T$(r,i,a,u,d,m);return v&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Je(t);$e("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield I_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function JP(n,e,t){if(!t)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LF(n,e,t,r){if(!0===e&&!0===r)throw new Fe(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FF(n){if(!Ke.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UF(n){if(Ke.isDocumentKey(n))throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rD(n);throw new Fe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VF(n,e){if(e<=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const BF=new Map;class jF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new tj;switch(t.type){case"gapi":return new sj(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=BF.get(e);t&&($e("ComponentProvider","Removing Datastore"),BF.delete(e),t.terminate())}(this),Promise.resolve()}}class cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new du(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class du extends ts{constructor(e,t,r){super(e,t,u_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new Ke(e))}withConverter(e){return new du(this.firestore,e,this._path)}}function $F(n,e,...t){if(n=(0,L.m9)(n),JP("collection","path",e),n instanceof VI){const r=gn.fromString(e,...t);return UF(r),new du(n,null,r)}{if(!(n instanceof cr||n instanceof du))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return UF(r),new du(n.firestore,null,r)}}function iD(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=_1.R()),JP("doc","path",e),n instanceof VI){const r=gn.fromString(e,...t);return FF(r),new cr(n,null,new Ke(r))}{if(!(n instanceof cr||n instanceof du))throw new Fe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return FF(r),new cr(n.firestore,n instanceof du?n.converter:null,new Ke(r))}}function WF(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof cr||n instanceof du)&&(e instanceof cr||e instanceof du)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function XP(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&_I(n._query,e._query)&&n.converter===e.converter}function GF(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class sD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class G${constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ni,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new w$(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ie.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class K${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ie.Z)(function*(a,u){const d=Je(a),m=DI(d.It)+"/documents",v={documents:u.map(V=>bI(d.It,V))},b=yield d._o("BatchGetDocuments",m,v,u.length),S=new Map;b.forEach(V=>{const G=function qj(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=uu(t,r.found.name),a=_i(r.found.updateTime),u=new Mi({mapValue:{fields:r.found.fields}});return nr.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=uu(t,r.missing),a=_i(r.readTime);return nr.newNoDocument(i,a)}(n,e):ht()}(d.It,V);S.set(G.key.toString(),G)});const P=[];return u.forEach(V=>{const G=S.get(V.toString());Ft(!!G),P.push(G)}),P}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new p_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new xR(a,e.precondition(a)))}),yield(r=(0,Ie.Z)(function*(i,a){const u=Je(i),d=DI(u.It)+"/documents",m={writes:a.map(v=>SI(u.It,v))};yield u.ao("Commit",d,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ut.min())?gr.exists(!1):gr.updateTime(t):gr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ut.min()))throw new Fe(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(t)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Z${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new eP(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ie.Z)(function*(){const t=new K$(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!dI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!oL(t)}return!1}}class Y${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mi.UNAUTHENTICATED,this.clientId=_1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ie.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>($e("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=T_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function zF(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ie.Z)(function*(a){r.isEqual(a)||(yield sF(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),eM.apply(this,arguments)}function qF(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nM(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>EF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>EF(e.remoteStore,a)),n.onlineComponents=e}),tM.apply(this,arguments)}function nM(n){return rM.apply(this,arguments)}function rM(){return rM=(0,Ie.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield zF(n,new kF)),n.offlineComponents}),rM.apply(this,arguments)}function oD(n){return iM.apply(this,arguments)}function iM(){return iM=(0,Ie.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield qF(n,new QP)),n.onlineComponents}),iM.apply(this,arguments)}function KF(n){return nM(n).then(e=>e.persistence)}function aD(n){return nM(n).then(e=>e.localStore)}function sM(n){return oD(n).then(e=>e.remoteStore)}function oM(n){return oD(n).then(e=>e.syncEngine)}function A_(n){return aM.apply(this,arguments)}function aM(){return aM=(0,Ie.Z)(function*(n){const e=yield oD(n),t=e.eventManager;return t.onListen=b$.bind(null,e.syncEngine),t.onUnlisten=D$.bind(null,e.syncEngine),t}),aM.apply(this,arguments)}function YF(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,u,d,m){const v=new sD({next:S=>{a.enqueueAndForget(()=>EP(i,b));const P=S.docs.has(u);!P&&S.fromCache?m.reject(new Fe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&d&&"server"===d.source?m.reject(new Fe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new bP(u_(u.path),v,{includeMetadataChanges:!0,Nu:!0});return wP(i,b)}(yield A_(n),n.asyncQueue,e,t,r)})),r.promise}function QF(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,u,d,m){const v=new sD({next:S=>{a.enqueueAndForget(()=>EP(i,b)),S.fromCache&&"server"===d.source?m.reject(new Fe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new bP(u,v,{includeMetadataChanges:!0,Nu:!0});return wP(i,b)}(yield A_(n),n.asyncQueue,e,t,r)})),r.promise}class iW{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new eP(this,"async_queue_retry"),this.Wc=()=>{const t=eD();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=eD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=eD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new ni;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!nh(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Or("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=vP.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function lM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class sW{constructor(){this._progressObserver={},this._taskCompletionResolver=new ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends VI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new iW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JF(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||JF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function JF(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _j(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new Y$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XF(n,e,t){const r=new ni;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield zF(n,t),yield qF(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(u=a).name?u.code===_e.FAILED_PRECONDITION||u.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw a;pp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var u})).then(()=>r.promise)}function eU(n){if(n._initialized||n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hu(ri.fromBase64String(e))}catch(t){throw new Fe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hu(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mp{constructor(e){this._methodName=e}}class lD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const gW=/^__.*__$/;class mW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ac(e,this.data,this.fieldMask,t,this.fieldTransforms):new f_(e,this.data,t,this.fieldTransforms)}}class tU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ac(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class uD{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new uD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return hD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(nU(this.sa)&&gW.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class _W{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||LI(e)}da(e,t,r,i=!1){return new uD({sa:e,methodName:t,fa:r,path:Ar.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Np(n){const e=n._freezeSettings(),t=LI(n._databaseId);return new _W(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cD(n,e,t,r,i,a={}){const u=n.da(a.merge||a.mergeFields?2:0,e,t,i);hM("Data must be an object, but it was:",u,r);const d=sU(r,u);let m,v;if(a.merge)m=new Mo(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){const b=[];for(const S of a.mergeFields){const P=fM(e,S,t);if(!u.contains(P))throw new Fe(_e.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);aU(b,P)||b.push(P)}m=new Mo(b),v=u.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=u.fieldTransforms;return new mW(new Mi(d),m,v)}class BI extends Mp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof BI}}function rU(n,e,t){return new uD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class uM extends Mp{_toFieldTransform(e){return new yI(e.path,new d_)}isEqual(e){return e instanceof uM}}class yW extends Mp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rU(this,e,!0),r=this._a.map(a=>kp(a,t)),i=new Ep(r);return new yI(e.path,i)}isEqual(e){return this===e}}class vW extends Mp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rU(this,e,!0),r=this._a.map(a=>kp(a,t)),i=new Cp(r);return new yI(e.path,i)}isEqual(e){return this===e}}class wW extends Mp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new h_(e.It,Z1(e.It,this.wa));return new yI(e.path,t)}isEqual(e){return this===e}}function cM(n,e,t,r){const i=n.da(1,e,t);hM("Data must be an object, but it was:",i,r);const a=[],u=Mi.empty();_p(r,(m,v)=>{const b=dD(e,m,t);v=(0,L.m9)(v);const S=i.ca(b);if(v instanceof BI)a.push(b);else{const P=kp(v,S);null!=P&&(a.push(b),u.set(b,P))}});const d=new Mo(a);return new tU(u,d,i.fieldTransforms)}function dM(n,e,t,r,i,a){const u=n.da(1,e,t),d=[fM(e,r,t)],m=[i];if(a.length%2!=0)throw new Fe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)d.push(fM(e,a[P])),m.push(a[P+1]);const v=[],b=Mi.empty();for(let P=d.length-1;P>=0;--P)if(!aU(v,d[P])){const V=d[P];let G=m[P];G=(0,L.m9)(G);const ce=u.ca(V);if(G instanceof BI)v.push(V);else{const ye=kp(G,ce);null!=ye&&(v.push(V),b.set(V,ye))}}const S=new Mo(v);return new tU(b,S,u.fieldTransforms)}function iU(n,e,t,r=!1){return kp(t,n.da(r?4:3,e))}function kp(n,e){if(oU(n=(0,L.m9)(n)))return hM("Unsupported field value:",e,n),sU(n,e);if(n instanceof Mp)return function(t,r){if(!nU(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let d=kp(u,r.aa(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Z1(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=pr.fromDate(t);return{timestampValue:TI(r.It,i)}}if(t instanceof pr){const i=new pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:TI(r.It,i)}}if(t instanceof lD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hu)return{bytesValue:mL(r.It,t._byteString)};if(t instanceof cr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:RR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${rD(t)}`)}(n,e)}function sU(n,e){const t={};return b1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_p(n,(r,i)=>{const a=kp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function oU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pr||n instanceof lD||n instanceof hu||n instanceof cr||n instanceof Mp)}function hM(n,e,t){if(!oU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function fM(n,e,t){if((e=(0,L.m9)(e))instanceof cc)return e._internalPath;if("string"==typeof e)return dD(n,e);throw hD("Field path arguments must be of type string or ",n,!1,void 0,t)}const IW=new RegExp("[~\\*/\\[\\]]");function dD(n,e,t){if(e.search(IW)>=0)throw hD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cc(...e.split("."))._internalPath}catch{throw hD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hD(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Fe(_e.INVALID_ARGUMENT,d+n+m)}function aU(n,e){return n.some(t=>t.isEqual(e))}class jI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new EW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class EW extends jI{data(){return super.data()}}function fD(n,e){return"string"==typeof e?dD(n,e):e instanceof cc?e._internalPath:e._delegate._internalPath}function lU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HI{}function fh(n,...e){for(const t of e)n=t._apply(n);return n}class CW extends HI{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Np(e.firestore),r=function(i,a,u,d,m,v,b){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){pU(b,v);const V=[];for(const G of b)V.push(fU(d,i,G));S={arrayValue:{values:V}}}else S=fU(d,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||pU(b,v),S=iU(u,"where",b,"in"===v||"not-in"===v);const P=Ni.create(m,v,S);return function(V,G){if(G.dt()){const ye=bR(V);if(null!==ye&&!ye.isEqual(G.field))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${G.field.toString()}'`);const ot=TR(V);null!==ot&&gU(0,G.field,ot)}const ce=function(ye,ot){for(const dt of ye.filters)if(ot.indexOf(dt.op)>=0)return dt.op;return null}(V,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ce)throw new Fe(_e.INVALID_ARGUMENT,ce===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ce.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ts(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new oc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class bW extends HI{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new l_(i,a);return function(d,m){if(null===TR(d)){const v=bR(d);null!==v&&gU(0,v,m.field)}}(r,u),u}(e._query,this.ma,this.pa);return new ts(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new oc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class uU extends HI{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ts(e.firestore,e.converter,Ob(e._query,this.Ia,this.Ta))}}class cU extends HI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=hU(e,this.type,this.Ea,this.Aa);return new ts(e.firestore,e.converter,(i=t,new oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class dU extends HI{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=hU(e,this.type,this.Ea,this.Aa);return new ts(e.firestore,e.converter,(i=t,new oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function hU(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof jI)return function(i,a,u,d,m){if(!d)throw new Fe(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const b of c_(i))if(b.field.isKeyField())v.push(wp(a,d.key));else{const S=d.data.field(b.field);if(IR(S))throw new Fe(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=b.field.canonicalString();throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new ah(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Np(n.firestore);return function(a,u,d,m,v,b){const S=a.explicitOrderBy;if(v.length>S.length)throw new Fe(_e.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let V=0;V<v.length;V++){const G=v[V];if(S[V].field.isKeyField()){if("string"!=typeof G)throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof G}`);if(!DR(a)&&-1!==G.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${G}' contains a slash.`);const ce=a.path.child(gn.fromString(G));if(!Ke.isDocumentKey(ce))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ce}' is not because it contains an odd number of segments.`);const ye=new Ke(ce);P.push(wp(u,ye))}else{const ce=iU(d,m,G);P.push(ce)}}return new ah(P,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function fU(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Fe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DR(e)&&-1!==t.indexOf("/"))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gn.fromString(t));if(!Ke.isDocumentKey(r))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wp(n,new Ke(r))}if(t instanceof cr)return wp(n,t._key);throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rD(t)}.`)}function pU(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gU(n,e,t){if(!t.isEqual(e))throw new Fe(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pM{convertValue(e,t="none"){switch(vp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return _p(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new lD(Rr(e.latitude),Rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=S1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cI(e));default:return null}}convertTimestamp(e){const t=rh(e);return new pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gn.fromString(e);Ft(bL(r));const i=new ih(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||Or(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function pD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class NW extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}class Op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dc extends jI{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $I(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $I extends dc{data(e={}){return super.data(e)}}class ph{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Op(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $I(this._firestore,this._userDataWriter,r.key,r,new Op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new $I(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Op(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new $I(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Op(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),v=a.indexOf(u.doc.key)),{type:kW(u.type),doc:d,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function mU(n,e){return n instanceof dc&&e instanceof dc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ph&&e instanceof ph&&n._firestore===e._firestore&&XP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class gh extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}function _U(n,e,t){n=un(n,cr);const r=un(n.firestore,dr),i=pD(n.converter,e,t);return x_(r,[cD(Np(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,gr.none())])}function yU(n,e,t,...r){n=un(n,cr);const i=un(n.firestore,dr),a=Np(i);let u;return u="string"==typeof(e=(0,L.m9)(e))||e instanceof cc?dM(a,"updateDoc",n._key,e,t,r):cM(a,"updateDoc",n._key,e),x_(i,[u.toMutation(n._key,gr.exists(!0))])}function vU(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||lM(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges};if(lM(e[u])){const S=e[u];e[u]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[u+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[u+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,b;if(n instanceof cr)v=un(n.firestore,dr),b=u_(n._key.path),m={next:S=>{e[u]&&e[u](gM(v,n,S))},error:e[u+1],complete:e[u+2]};else{const S=un(n,ts);v=un(S.firestore,dr),b=S._query;const P=new gh(v);m={next:V=>{e[u]&&e[u](new ph(v,P,S,V))},error:e[u+1],complete:e[u+2]},lU(n._query)}return function(S,P,V,G){const ce=new sD(G),ye=new bP(P,ce,V);return S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return wP(yield A_(S),ye)})),()=>{ce.bc(),S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return EP(yield A_(S),ye)}))}}(Lr(v),b,d,m)}function x_(n,e){return function(t,r){const i=new ni;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function S$(n,e,t){return RP.apply(this,arguments)}(yield oM(t),r,i)})),i.promise}(Lr(n),e)}function gM(n,e,t){const r=t.docs.get(e._key),i=new gh(n);return new dc(n,i,e._key,r,new Op(t.hasPendingWrites,t.fromCache),e.converter)}const WW={maxAttempts:5};class wU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Np(e)}set(e,t,r){this._verifyNotCommitted();const i=mh(e,this._firestore),a=pD(i.converter,t,r),u=cD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,gr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=mh(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof cc?dM(this._dataReader,"WriteBatch.update",a._key,t,r,i):cM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mh(e,this._firestore);return this._mutations=this._mutations.concat(new p_(t._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Fe(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class GW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Np(e)}get(e){const t=mh(e,this._firestore),r=new NW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new jI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new jI(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=mh(e,this._firestore),a=pD(i.converter,t,r),u=cD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=mh(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof cc?dM(this._dataReader,"Transaction.update",a._key,t,r,i):cM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=mh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mh(e,this._firestore),r=new gh(this._firestore);return super.get(e).then(i=>new dc(this._firestore,r,t._key,i._document,new Op(!1,!1),t.converter))}}function mM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EU(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function CU(){if(!function gj(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){i_=bi.SDK_VERSION,(0,bi._registerComponent)(new Ea.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new dr(new rj(t.getProvider("auth-internal")),new oj(t.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Fe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ih(d.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(p1,"3.7.3",n),(0,bi.registerVersion)(p1,"3.7.3","esm2017")}();class WI{constructor(e){this._delegate=e}static fromBase64String(e){return CU(),new WI(hu.fromBase64String(e))}static fromUint8Array(e){return EU(),new WI(hu.fromUint8Array(e))}toBase64(){return CU(),this._delegate.toBase64()}toUint8Array(){return EU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _M(n){return function eG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class tG{enableIndexedDbPersistence(e,t){return function aW(n,e){eU(n=un(n,dr));const t=Lr(n),r=n._freezeSettings(),i=new QP;return XF(t,i,new OF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lW(n){eU(n=un(n,dr));const e=Lr(n),t=n._freezeSettings(),r=new QP;return XF(e,r,new $$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uW(n){if(n._initialized&&!n._terminated)throw new Fe(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ni;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!_l.C())return Promise.resolve();const i=r+"main";yield _l.delete(i)}),function(r){return t.apply(this,arguments)})(WR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ih||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HF(n,e,t,r={}){var i;const a=(n=un(n,VI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&pp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=mi.MOCK_USER;else{u=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Fe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new mi(m)}n._authCredentials=new nj(new g1(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function dW(n){return function Q$(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield KF(n),t=yield sM(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i._u.delete(0),FI(i)}(t)}))}(Lr(n=un(n,dr)))}(this._delegate)}disableNetwork(){return function hW(n){return function J$(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield KF(n),t=yield sM(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(i){const a=Je(i);a._u.add(0),yield I_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Lr(n=un(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function cW(n){return function(e){const t=new ni;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function P$(n,e){return OP.apply(this,arguments)}(yield oM(e),t)})),t.promise}(Lr(n=un(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function $W(n,e){return function tW(n,e){const t=new sD(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield A_(n),i=t,Je(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield A_(n),i=t,void Je(r).Ru.delete(i);var r,i}))}}(Lr(n=un(n,dr)),lM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new R_(this,$F(this._delegate,e))}catch(t){throw Ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,iD(this._delegate,e))}catch(t){throw Ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function W$(n,e){if(n=un(n,VI),JP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new oc(gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function zW(n,e,t){n=un(n,dr);const r=Object.assign(Object.assign({},WW),t);return function(i){if(i.maxAttempts<1)throw new Fe(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,u){const d=new ni;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const m=yield function ZF(n){return oD(n).then(e=>e.datastore)}(i);new Z$(i.asyncQueue,m,u,a,d).run()})),d.promise}(Lr(n),i=>e(new GW(n,i)),r)}(this._delegate,t=>e(new bU(this,t)))}batch(){return Lr(this._delegate),new DU(new wU(this._delegate,e=>x_(this._delegate,e)))}loadBundle(e){return function fW(n,e){const t=Lr(n=un(n,dr)),r=new sW;return function nW(n,e,t,r){const i=function(a,u){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return GF(m,v);if(m instanceof ArrayBuffer)return GF(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new G$(m,u);var m}(t,LI(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function H$(n,e,t){const r=Je(n);var i;(i=(0,Ie.Z)(function*(a,u,d){try{const m=yield u.getMetadata();if(yield function(P,V){const G=Je(P),ce=_i(V.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",ye=>G.Ns.getBundleMetadata(ye,V.id)).then(ye=>!!ye&&ye.createTime.compareTo(ce)>=0)}(a.localStore,m))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=m).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress(bF(m));const v=new I$(m,a.localStore,u.It);let b=yield u.mc();for(;b;){const P=yield v.Fu(b);P&&d._updateProgress(P),b=yield u.mc()}const S=yield v.complete();return yield uc(a,S.Lu,void 0),yield function(P,V){const G=Je(P);return G.persistence.runTransaction("Save bundle","readwrite",ce=>G.Ns.saveBundleMetadata(ce,V))}(a.localStore,m),d._completeWith(S.progress),Promise.resolve(S.Bu)}catch(m){return pp("SyncEngine",`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}var P}),function(a,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield oM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function pW(n,e){return function rW(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield aD(n),e)}))}(Lr(n=un(n,dr)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class gD extends pM{constructor(e){super(),this.firestore=e}convertBytes(e){return new WI(new hu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class bU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}get(e){const t=Fp(e);return this._delegate.get(t).then(r=>new GI(this._firestore,new dc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fp(e);return r?(mM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}}class DU{constructor(e){this._delegate=e}set(e,t,r){const i=Fp(e);return r?(mM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $I(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Lp(e,new gD(e),t),i.set(t,a)),a}}Lp.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new cr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Pa(t,new cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new R_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new R_(this.firestore,$F(this._delegate,e))}catch(t){throw Ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof cr&&WF(this._delegate,e)}set(e,t){t=mM("DocumentReference.set",t);try{return t?_U(this._delegate,e,t):_U(this._delegate,e)}catch(r){throw Ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?yU(this._delegate,e):yU(this._delegate,e,t,...r)}catch(i){throw Ds(i,"updateDoc()","DocumentReference.update()")}}delete(){return function jW(n){return x_(un(n.firestore,dr),[new p_(n._key,gr.none())])}(this._delegate)}onSnapshot(...e){const t=SU(e),r=AU(e,i=>new GI(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function LW(n){n=un(n,cr);const e=un(n.firestore,dr),t=Lr(e),r=new gh(e);return function X$(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,u){try{const d=yield function(m,v){const b=Je(m);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,v))}(i,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Fe(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=T_(d,`Failed to get document '${a} from cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new dc(e,r,n._key,i,new Op(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function FW(n){n=un(n,cr);const e=un(n.firestore,dr);return YF(Lr(e),n._key,{source:"server"}).then(t=>gM(e,n,t))}(this._delegate):function OW(n){n=un(n,cr);const e=un(n.firestore,dr);return YF(Lr(e),n._key).then(t=>gM(e,n,t))}(this._delegate),t.then(r=>new GI(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Ds(n,e,t){return n.message=n.message.replace(e,t),n}function SU(n){for(const e of n)if("object"==typeof e&&!_M(e))return e;return{}}function AU(n,e){var t,r;let i;return i=_M(n[0])?n[0]:_M(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class GI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mU(this._delegate,e._delegate)}}class zI extends GI{data(e){const t=this._delegate.data(e);return function ej(n,e){n||ht()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}where(e,t,r){try{return new Ss(this.firestore,fh(this._delegate,function TW(n,e,t){const r=e,i=fD("where",n);return new CW(i,r,t)}(e,t,r)))}catch(i){throw Ds(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,fh(this._delegate,function DW(n,e="asc"){const t=e,r=fD("orderBy",n);return new bW(r,t)}(e,t)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,fh(this._delegate,function SW(n){return VF("limit",n),new uU("limit",n,"F")}(e)))}catch(t){throw Ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,fh(this._delegate,function AW(n){return VF("limitToLast",n),new uU("limitToLast",n,"L")}(e)))}catch(t){throw Ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,fh(this._delegate,function xW(...n){return new cU("startAt",n,!0)}(...e)))}catch(t){throw Ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,fh(this._delegate,function RW(...n){return new cU("startAfter",n,!1)}(...e)))}catch(t){throw Ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,fh(this._delegate,function PW(...n){return new dU("endBefore",n,!1)}(...e)))}catch(t){throw Ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,fh(this._delegate,function MW(...n){return new dU("endAt",n,!0)}(...e)))}catch(t){throw Ds(t,"endAt()","Query.endAt()")}}isEqual(e){return XP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function VW(n){n=un(n,ts);const e=un(n.firestore,dr),t=Lr(e),r=new gh(e);return function eW(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,u){try{const d=yield Qb(i,a,!0),m=new AF(a,d.Hi),v=m.Wu(d.documents),b=m.applyChanges(v,!1);u.resolve(b.snapshot)}catch(d){const m=T_(d,`Failed to execute query '${a} against cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ph(e,r,n,i))}(this._delegate):"server"===e?.source?function BW(n){n=un(n,ts);const e=un(n.firestore,dr),t=Lr(e),r=new gh(e);return QF(t,n._query,{source:"server"}).then(i=>new ph(e,r,n,i))}(this._delegate):function UW(n){n=un(n,ts);const e=un(n.firestore,dr),t=Lr(e),r=new gh(e);return lU(n._query),QF(t,n._query).then(i=>new ph(e,r,n,i))}(this._delegate),t.then(r=>new yM(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SU(e),r=AU(e,i=>new yM(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vU(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}class rG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new rG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new zI(this._firestore,r))})}isEqual(e){return mU(this._delegate,e._delegate)}}class R_ extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?iD(this._delegate):iD(this._delegate,e))}catch(t){throw Ds(t,"doc()","CollectionReference.doc()")}}add(e){return function HW(n,e){const t=un(n.firestore,dr),r=iD(n),i=pD(n.converter,e);return x_(t,[cD(Np(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return WF(this._delegate,e._delegate)}withConverter(e){return new R_(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Fp(n){return un(n,cr)}class vM{constructor(...e){this._delegate=new cc(...e)}static documentId(){return new vM(Ar.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof cc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function KW(){return new uM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=function qW(){return new BI("deleteField")}();return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function ZW(...n){return new yW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function YW(...n){return new vW("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function QW(n){return new wW("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iG={Firestore:TU,GeoPoint:lD,Timestamp:pr,Blob:WI,Transaction:bU,WriteBatch:DU,DocumentReference:Pa,DocumentSnapshot:GI,Query:Ss,QueryDocumentSnapshot:zI,QuerySnapshot:yM,CollectionReference:R_,FieldPath:vM,FieldValue:Up,setLogLevel:function nG(n){!function X2(n){eh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xU(n,e){return function aG(n,e=nm.z){return new Tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function wM(n,e){return xU(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function mD(n,e){return wM(n,e).pipe(fa(void 0),Ax(),(0,st.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const m=i.find(b=>b.doc.ref.isEqual(u.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),a}))}function RU(n,e,t){return mD(n,t).pipe(Pt((r,i)=>function uG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return IM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return IM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return IM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),nv(),(0,st.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function IM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function PU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function oG(n){(function sG(n,e){n.INTERNAL.registerComponent(new Ea.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},iG)))})(n,(e,t)=>new TU(e,t,new tG)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(rv.Z);class MU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=mD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fa(void 0),Ax(),T(([r,i])=>i.length>0||!r),(0,st.U)(([r,i])=>i),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PU(e);return RU(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return wM(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new NU(this.ref.doc(e),this.afs)}}class NU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=LU(r,t);return new MU(i,a,this.afs)}snapshotChanges(){return function lG(n,e){return xU(n,e).pipe(fa(void 0),Ax(),(0,st.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(yn.iC)}}class dG{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?mD(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),T(t=>t.length>0),yn.iC):mD(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PU(e);return RU(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return wM(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),yn.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(yn.iC)}}const kU=new p.OlP("angularfire2.enableFirestorePersistence"),OU=new p.OlP("angularfire2.firestore.persistenceSettings"),hG=new p.OlP("angularfire2.firestore.settings"),fG=new p.OlP("angularfire2.firestore.use-emulator");function LU(n,e=(t=>t)){return{query:e(n),ref:n}}let pG=(()=>{class n{constructor(t,r,i,a,u,d,m,v,b,S,P,V,G,ce,ye,ot,dt){this.schedulers=m;const lt=(0,$r.on)(t,d,r),ft=b;S&&pf(lt,d,P,G,ce,ye,V,ot),[this.firestore,this.persistenceEnabled$]=(0,$r.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const At=d.runOutsideAngular(()=>lt.firestore());if(a&&At.settings(a),ft&&At.useEmulator(...ft),i&&!Ho(u)){const Bt=()=>{try{return(0,an.D)(At.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(wr){return typeof console<"u"&&console.warn(wr),at(!1)}};return[At,d.runOutsideAngular(Bt)]}return[At,at(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=LU(i,r),d=this.schedulers.ngZone.run(()=>a);return new MU(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new dG(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG($r.Dh),p.LFG($r.xv,8),p.LFG(kU,8),p.LFG(hG,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(OU,8),p.LFG(fG,8),p.LFG(Kg,8),p.LFG(Wy,8),p.LFG(Gy,8),p.LFG(cd,8),p.LFG(ff,8),p.LFG(dd,8),p.LFG(yE,8),p.LFG(ud,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gG=(()=>{class n{constructor(){qg.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:kU,useValue:!0},{provide:OU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[pG]}),n})(),mG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jo]}),n})(),_G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[ZE]}),n.\u0275inj=p.cJS({imports:[ta,KE,$r.hO.initializeApp(tv_firebaseConfig),vE,gG,YB,oV,AE,OS,US,mG]}),n})();(0,p.G48)(),Ya().bootstrapModule(_G).catch(n=>console.error(n))},5867:(pt,Re,F)=>{F.d(Re,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=F(9681);(0,p.registerVersion)("firebase","9.14.0","app")},127:(pt,Re,F)=>{F.d(Re,{Z:()=>p.Z});var p=F(3942);p.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(pt,Re,F)=>{F.r(Re);var p=F(5861),$=F(3942),k=F(8247),se=F(2090),pe=(F(9681),F(1877),F(4859));function he(){return window}function z(){return(z=(0,p.Z)(function*(H,M,B){var ne;const{BuildInfo:Oe}=he();(0,k.ap)(M.sessionId,"AuthEvent did not contain a session ID");const rt=yield ge(M.sessionId),it={};return(0,k.aq)()?it.ibi=Oe.packageName:(0,k.ar)()?it.apn=Oe.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),Oe.displayName&&(it.appDisplayName=Oe.displayName),it.sessionId=rt,(0,k.at)(H,B,M.type,void 0,null!==(ne=M.eventId)&&void 0!==ne?ne:void 0,it)})).apply(this,arguments)}function He(){return(He=(0,p.Z)(function*(H){const{BuildInfo:M}=he(),B={};(0,k.aq)()?B.iosBundleId=M.packageName:(0,k.ar)()?B.androidPackageName=M.packageName:(0,k.as)(H,"operation-not-supported-in-this-environment"),yield(0,k.au)(H,B)})).apply(this,arguments)}function tt(){return(tt=(0,p.Z)(function*(H,M,B){const{cordova:ne}=he();let Oe=()=>{};try{yield new Promise((rt,it)=>{let Se=null;function Ue(){var Ot;rt();const hn=null===(Ot=ne.plugins.browsertab)||void 0===Ot?void 0:Ot.close;"function"==typeof hn&&hn(),"function"==typeof B?.close&&B.close()}function Rt(){Se||(Se=window.setTimeout(()=>{it((0,k.aw)(H,"redirect-cancelled-by-user"))},2e3))}function dn(){"visible"===document?.visibilityState&&Rt()}M.addPassiveListener(Ue),document.addEventListener("resume",Rt,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",dn,!1),Oe=()=>{M.removePassiveListener(Ue),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",dn,!1),Se&&window.clearTimeout(Se)}})}finally{Oe()}})).apply(this,arguments)}function ge(H){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(H){const M=Ze(H),B=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(B)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(H){if((0,k.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(H);const M=new ArrayBuffer(H.length),B=new Uint8Array(M);for(let ne=0;ne<H.length;ne++)B[ne]=H.charCodeAt(ne);return B}class Pe extends k.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(M)),super.onEvent(M)}initialized(){var M=this;return(0,p.Z)(function*(){yield M.initPromise})()}}function ie(H){return ue.apply(this,arguments)}function ue(){return(ue=(0,p.Z)(function*(H){const M=yield ee()._get(fe(H));return M&&(yield ee()._remove(fe(H))),M})).apply(this,arguments)}function Q(){const H=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const ne=Math.floor(Math.random()*M.length);H.push(M.charAt(ne))}return H.join("")}function ee(){return(0,k.az)(k.b)}function fe(H){return(0,k.aA)("authEvent",H.config.apiKey,H.name)}function je(H){if(!H?.includes("?"))return{};const[M,...B]=H.split("?");return(0,se.zd)(B.join("?"))}function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function zt(){var H;return(null===(H=self?.location)||void 0===H?void 0:H.protocol)||null}function Ir(H=(0,se.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()&&"capacitor:"!==zt()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function Li(){try{const H=self.localStorage,M=k.aI();if(H)return H.setItem(M,"1"),H.removeItem(M),!function Oi(H=(0,se.z$)()){return function Fr(){return(0,se.w1)()&&11===document?.documentMode}()||function On(H=(0,se.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,se.hl)()}catch{return Ur()&&(0,se.hl)()}return!1}function Ur(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function Vt(){return"http:"===zt()||"https:"===zt()}()||(0,se.ru)()||Ir())&&!function ki(){return(0,se.b$)()||(0,se.UG)()}()&&Li()&&!Ur()}function wi(){return Ir()&&typeof document<"u"}function Ye(){return(Ye=(0,p.Z)(function*(){return!!wi()&&new Promise(H=>{const M=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),H(!0)})})})).apply(this,arguments)}const Yn={LOCAL:"local",NONE:"none",SESSION:"session"},wn=k.ax,mr="persistence";function In(H){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*(H){yield H._initializationPromise;const M=mt(),B=k.aA(mr,H.config.apiKey,H.name);M&&M.setItem(B,H._getPersistence())})).apply(this,arguments)}function mt(){var H;try{return(null===(H=function rr(){return typeof window<"u"?window:null}())||void 0===H?void 0:H.sessionStorage)||null}catch{return null}}const _t=k.ax;class xt{constructor(){this.browserResolver=k.az(k.k),this.cordovaResolver=k.az(class sn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,p.Z)(function*(){const ne=M._key();let Oe=B.eventManagers.get(ne);return Oe||(Oe=new Pe(M),B.eventManagers.set(ne,Oe),B.attachCallbackListeners(M,Oe)),Oe})()}_openPopup(M){(0,k.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,B,ne,Oe){var rt=this;return(0,p.Z)(function*(){!function Ee(H){var M,B,ne,Oe,rt,it,Se,Ue,Rt,dn;const Ot=he();(0,k.ax)("function"==typeof(null===(M=Ot?.universalLinks)||void 0===M?void 0:M.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(B=Ot?.BuildInfo)||void 0===B?void 0:B.packageName)<"u",H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(rt=null===(Oe=null===(ne=Ot?.cordova)||void 0===ne?void 0:ne.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===rt?void 0:rt.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Ue=null===(Se=null===(it=Ot?.cordova)||void 0===it?void 0:it.plugins)||void 0===Se?void 0:Se.browsertab)||void 0===Ue?void 0:Ue.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(dn=null===(Rt=Ot?.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===dn?void 0:dn.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const it=yield rt._initialize(M);yield it.initialized(),it.resetRedirect(),(0,k.aD)(),yield rt._originValidation(M);const Se=function Ce(H,M,B=null){return{type:M,eventId:B,urlResponse:null,sessionId:Q(),postBody:null,tenantId:H.tenantId,error:(0,k.aw)(H,"no-auth-event")}}(M,ne,Oe);yield function Ge(H,M){return ee()._set(fe(H),M)}(M,Se);const Ue=yield function K(H,M,B){return z.apply(this,arguments)}(M,Se,B),Rt=yield function Ne(H){const{cordova:M}=he();return new Promise(B=>{M.plugins.browsertab.isAvailable(ne=>{let Oe=null;ne?M.plugins.browsertab.openUrl(H):Oe=M.InAppBrowser.open(H,(0,k.av)()?"_blank":"_system","location=yes"),B(Oe)})})}(Ue);return function Te(H,M,B){return tt.apply(this,arguments)}(M,it,Rt)})()}_isIframeWebStorageSupported(M,B){throw new Error("Method not implemented.")}_originValidation(M){const B=M._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function J(H){return He.apply(this,arguments)}(M)),this.originValidationPromises[B]}attachCallbackListeners(M,B){const{universalLinks:ne,handleOpenURL:Oe,BuildInfo:rt}=he(),it=setTimeout((0,p.Z)(function*(){yield ie(M),B.onEvent(ze())}),500),Se=function(){var dn=(0,p.Z)(function*(Ot){clearTimeout(it);const hn=yield ie(M);let ns=null;hn&&Ot?.url&&(ns=function we(H,M){var B,ne;const Oe=function Be(H){const M=je(H),B=M.link?decodeURIComponent(M.link):void 0,ne=je(B).link,Oe=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return je(Oe).link||Oe||ne||B||H}(M);if(Oe.includes("/__/auth/callback")){const rt=je(Oe),it=rt.firebaseError?function ae(H){try{return JSON.parse(H)}catch{return null}}(decodeURIComponent(rt.firebaseError)):null,Se=null===(ne=null===(B=it?.code)||void 0===B?void 0:B.split("auth/"))||void 0===ne?void 0:ne[1],Ue=Se?(0,k.aw)(Se):null;return Ue?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:Oe,postBody:null}}return null}(hn,Ot.url)),B.onEvent(ns||ze())});return function(hn){return dn.apply(this,arguments)}}();typeof ne<"u"&&"function"==typeof ne.subscribe&&ne.subscribe(null,Se);const Ue=Oe,Rt=`${rt.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var dn=(0,p.Z)(function*(Ot){if(Ot.toLowerCase().startsWith(Rt)&&Se({url:Ot}),"function"==typeof Ue)try{Ue(Ot)}catch(hn){console.error(hn)}});return function(Ot){return dn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(M){var B=this;return(0,p.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,B,ne,Oe){var rt=this;return(0,p.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openPopup(M,B,ne,Oe)})()}_openRedirect(M,B,ne,Oe){var rt=this;return(0,p.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openRedirect(M,B,ne,Oe)})()}_isIframeWebStorageSupported(M,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,B)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return wi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _t(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,p.Z)(function*(){if(M.underlyingResolver)return;const B=yield function Fi(){return Ye.apply(this,arguments)}();M.underlyingResolver=B?M.cordovaResolver:M.browserResolver})()}}function Vr(H){return H.unwrap()}function Pr(H){return Mr(H)}function Mr(H){const{_tokenResponse:M}=H instanceof se.ZR?H.customData:H;if(!M)return null;if(!(H instanceof se.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return k.P.credentialFromResult(H);const B=M.providerId;if(!B||B===k.o.PASSWORD)return null;let ne;switch(B){case k.o.GOOGLE:ne=k.Q;break;case k.o.FACEBOOK:ne=k.N;break;case k.o.GITHUB:ne=k.T;break;case k.o.TWITTER:ne=k.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:rt,oauthTokenSecret:it,pendingToken:Se,nonce:Ue}=M;return rt||it||Oe||Se?Se?B.startsWith("saml.")?k.aL._create(B,Se):k.J._fromParams({providerId:B,signInMethod:B,pendingToken:Se,idToken:Oe,accessToken:rt}):new k.U(B).credential({idToken:Oe,accessToken:rt,rawNonce:Ue}):null}return H instanceof se.ZR?ne.credentialFromError(H):ne.credentialFromResult(H)}function kt(H,M){return M.catch(B=>{throw B instanceof se.ZR&&function bt(H,M){var B,ne;const Oe=null===(B=M.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ne=M)||void 0===ne?void 0:ne.code))M.resolver=new hr(H,k.an(H,M));else if(Oe){const rt=Mr(M),it=M;rt&&(it.credential=rt,it.tenantId=Oe.tenantId||void 0,it.email=Oe.email||void 0,it.phoneNumber=Oe.phoneNumber||void 0)}}(H,B),B}).then(B=>{const Oe=B.user;return{operationType:B.operationType,credential:Pr(B),additionalUserInfo:k.al(B),user:An.getOrCreate(Oe)}})}function zr(H,M){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(H,M){const B=yield M;return{verificationId:B.verificationId,confirm:ne=>kt(H,B.confirm(ne))}})).apply(this,arguments)}class hr{constructor(M,B){this.resolver=B,this.auth=function Qn(H){return H.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return kt(Vr(this.auth),this.resolver.resolveSignIn(M))}}class An{constructor(M){this._delegate=M,this.multiFactor=k.ao(M)}static getOrCreate(M){return An.USER_MAP.has(M)||An.USER_MAP.set(M,new An(M)),An.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var B=this;return(0,p.Z)(function*(){return kt(B.auth,k.Z(B._delegate,M))})()}linkWithPhoneNumber(M,B){var ne=this;return(0,p.Z)(function*(){return zr(ne.auth,k.l(ne._delegate,M,B))})()}linkWithPopup(M){var B=this;return(0,p.Z)(function*(){return kt(B.auth,k.d(B._delegate,M,xt))})()}linkWithRedirect(M){var B=this;return(0,p.Z)(function*(){return yield In(k.aE(B.auth)),k.g(B._delegate,M,xt)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var B=this;return(0,p.Z)(function*(){return kt(B.auth,k._(B._delegate,M))})()}reauthenticateWithPhoneNumber(M,B){return zr(this.auth,k.r(this._delegate,M,B))}reauthenticateWithPopup(M){return kt(this.auth,k.e(this._delegate,M,xt))}reauthenticateWithRedirect(M){var B=this;return(0,p.Z)(function*(){return yield In(k.aE(B.auth)),k.h(B._delegate,M,xt)})()}sendEmailVerification(M){return k.ab(this._delegate,M)}unlink(M){var B=this;return(0,p.Z)(function*(){return yield k.ak(B._delegate,M),B})()}updateEmail(M){return k.ag(this._delegate,M)}updatePassword(M){return k.ah(this._delegate,M)}updatePhoneNumber(M){return k.u(this._delegate,M)}updateProfile(M){return k.af(this._delegate,M)}verifyBeforeUpdateEmail(M,B){return k.ac(this._delegate,M,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}An.USER_MAP=new WeakMap;const Xe=k.ax;let De=(()=>{class H{constructor(B,ne){if(this.app=B,ne.isInitialized())return this._delegate=ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=B.options;Xe(Oe,"invalid-api-key",{appName:B.name}),Xe(Oe,"invalid-api-key",{appName:B.name});const rt=typeof window<"u"?xt:void 0;this._delegate=ne.initialize({options:{persistence:It(Oe,B.name),popupRedirectResolver:rt}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?An.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,ne){k.G(this._delegate,B,ne)}applyActionCode(B){return k.a2(this._delegate,B)}checkActionCode(B){return k.a3(this._delegate,B)}confirmPasswordReset(B,ne){return k.a1(this._delegate,B,ne)}createUserWithEmailAndPassword(B,ne){var Oe=this;return(0,p.Z)(function*(){return kt(Oe._delegate,k.a5(Oe._delegate,B,ne))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return k.aa(this._delegate,B)}isSignInWithEmailLink(B){return k.a8(this._delegate,B)}getRedirectResult(){var B=this;return(0,p.Z)(function*(){Xe(jn(),B._delegate,"operation-not-supported-in-this-environment");const ne=yield k.j(B._delegate,xt);return ne?kt(B._delegate,Promise.resolve(ne)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function cn(H,M){(0,k.aE)(H)._logFramework(M)}(this._delegate,B)}onAuthStateChanged(B,ne,Oe){const{next:rt,error:it,complete:Se}=et(B,ne,Oe);return this._delegate.onAuthStateChanged(rt,it,Se)}onIdTokenChanged(B,ne,Oe){const{next:rt,error:it,complete:Se}=et(B,ne,Oe);return this._delegate.onIdTokenChanged(rt,it,Se)}sendSignInLinkToEmail(B,ne){return k.a7(this._delegate,B,ne)}sendPasswordResetEmail(B,ne){return k.a0(this._delegate,B,ne||void 0)}setPersistence(B){var ne=this;return(0,p.Z)(function*(){let Oe;switch(function Zs(H,M){wn(Object.values(Yn).includes(M),H,"invalid-persistence-type"),(0,se.b$)()?wn(M!==Yn.SESSION,H,"unsupported-persistence-type"):(0,se.UG)()?wn(M===Yn.NONE,H,"unsupported-persistence-type"):Ur()?wn(M===Yn.NONE||M===Yn.LOCAL&&(0,se.hl)(),H,"unsupported-persistence-type"):wn(M===Yn.NONE||Li(),H,"unsupported-persistence-type")}(ne._delegate,B),B){case Yn.SESSION:Oe=k.a;break;case Yn.LOCAL:Oe=(yield k.az(k.i)._isAvailable())?k.i:k.b;break;case Yn.NONE:Oe=k.L;break;default:return k.as("argument-error",{appName:ne._delegate.name})}return ne._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return kt(this._delegate,k.X(this._delegate))}signInWithCredential(B){return kt(this._delegate,k.Y(this._delegate,B))}signInWithCustomToken(B){return kt(this._delegate,k.$(this._delegate,B))}signInWithEmailAndPassword(B,ne){return kt(this._delegate,k.a6(this._delegate,B,ne))}signInWithEmailLink(B,ne){return kt(this._delegate,k.a9(this._delegate,B,ne))}signInWithPhoneNumber(B,ne){return zr(this._delegate,k.s(this._delegate,B,ne))}signInWithPopup(B){var ne=this;return(0,p.Z)(function*(){return Xe(jn(),ne._delegate,"operation-not-supported-in-this-environment"),kt(ne._delegate,k.c(ne._delegate,B,xt))})()}signInWithRedirect(B){var ne=this;return(0,p.Z)(function*(){return Xe(jn(),ne._delegate,"operation-not-supported-in-this-environment"),yield In(ne._delegate),k.f(ne._delegate,B,xt)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return k.a4(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=Yn,H})();function et(H,M,B){let ne=H;"function"!=typeof H&&({next:ne,error:M,complete:B}=H);const Oe=ne;return{next:it=>Oe(it&&An.getOrCreate(it)),error:M,complete:B}}function It(H,M){const B=function _n(H,M){const B=mt();if(!B)return[];const ne=k.aA(mr,H,M);switch(B.getItem(ne)){case Yn.NONE:return[k.L];case Yn.LOCAL:return[k.i,k.a];case Yn.SESSION:return[k.a];default:return[]}}(H,M);if(typeof self<"u"&&!B.includes(k.i)&&B.push(k.i),typeof window<"u")for(const ne of[k.b,k.a])B.includes(ne)||B.push(ne);return B.includes(k.L)||B.push(k.L),B}class Ct{constructor(){this.providerId="phone",this._delegate=new k.P(Vr($.Z.auth()))}static credential(M,B){return k.P.credential(M,B)}verifyPhoneNumber(M,B){return this._delegate.verifyPhoneNumber(M,B)}unwrap(){return this._delegate}}Ct.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Ct.PROVIDER_ID=k.P.PROVIDER_ID;const Xt=k.ax;class q{constructor(M,B,ne=$.Z.app()){var Oe;Xt(null===(Oe=ne.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:ne.name}),this._delegate=new k.R(M,B,ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(H){H.INTERNAL.registerComponent(new pe.wA("auth-compat",M=>{const B=M.getProvider("app-compat").getImmediate(),ne=M.getProvider("auth");return new De(B,ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:Ct,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:q,TwitterAuthProvider:k.W,Auth:De,AuthCredential:k.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.24")}($.Z)},9751:(pt,Re,F)=>{F.d(Re,{y:()=>he});var p=F(930),$=F(727),k=F(8822),se=F(9635),le=F(2416),me=F(576),pe=F(2806);let he=(()=>{class J{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Te=new J;return Te.source=this,Te.operator=Ne,Te}subscribe(Ne,Te,tt){const Ee=function z(J){return J&&J instanceof p.Lv||function K(J){return J&&(0,me.m)(J.next)&&(0,me.m)(J.error)&&(0,me.m)(J.complete)}(J)&&(0,$.Nn)(J)}(Ne)?Ne:new p.Hp(Ne,Te,tt);return(0,pe.x)(()=>{const{operator:ge,source:Qe}=this;Ee.add(ge?ge.call(Ee,Qe):Qe?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Te){Ne.error(Te)}}forEach(Ne,Te){return new(Te=ve(Te))((tt,Ee)=>{const ge=new p.Hp({next:Qe=>{try{Ne(Qe)}catch(Ze){Ee(Ze),ge.unsubscribe()}},error:Ee,complete:tt});this.subscribe(ge)})}_subscribe(Ne){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Ne)}[k.L](){return this}pipe(...Ne){return(0,se.U)(Ne)(this)}toPromise(Ne){return new(Ne=ve(Ne))((Te,tt)=>{let Ee;this.subscribe(ge=>Ee=ge,ge=>tt(ge),()=>Te(Ee))})}}return J.create=He=>new J(He),J})();function ve(J){var He;return null!==(He=J??le.v.Promise)&&void 0!==He?He:Promise}},7579:(pt,Re,F)=>{F.d(Re,{x:()=>pe});var p=F(9751),$=F(727);const se=(0,F(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=F(8737),me=F(2806);let pe=(()=>{class ve extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new he(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new se}next(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:He,observers:Ne}=this;return J||He?$.Lc:(this.currentObservers=null,Ne.push(z),new $.w0(()=>{this.currentObservers=null,(0,le.P)(Ne,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:He,isStopped:Ne}=this;J?z.error(He):Ne&&z.complete()}asObservable(){const z=new p.y;return z.source=this,z}}return ve.create=(K,z)=>new he(K,z),ve})();class he extends pe{constructor(K,z){super(),this.destination=K,this.source=z}next(K){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,K)}error(K){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,K)}complete(){var K,z;null===(z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===z||z.call(K)}_subscribe(K){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(K))&&void 0!==J?J:$.Lc}}},930:(pt,Re,F)=>{F.d(Re,{Hp:()=>tt,Lv:()=>J});var p=F(576),$=F(727),k=F(2416),se=F(7849),le=F(5032);const me=ve("C",void 0,void 0);function ve(Le,Pe,Ce){return{kind:Le,value:Pe,error:Ce}}var K=F(3410),z=F(2806);class J extends $.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,$.Nn)(Pe)&&Pe.add(this)):this.destination=Ze}static create(Pe,Ce,Ge){return new tt(Pe,Ce,Ge)}next(Pe){this.isStopped?Qe(function he(Le){return ve("N",Le,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Qe(function pe(Le){return ve("E",void 0,Le)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Qe(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ne(Le,Pe){return He.call(Le,Pe)}class Te{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Pe)}catch(Ge){Ee(Ge)}}error(Pe){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Pe)}catch(Ge){Ee(Ge)}else Ee(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Ce){Ee(Ce)}}}class tt extends J{constructor(Pe,Ce,Ge){let ie;if(super(),(0,p.m)(Pe)||!Pe)ie={next:Pe??void 0,error:Ce??void 0,complete:Ge??void 0};else{let ue;this&&k.v.useDeprecatedNextContext?(ue=Object.create(Pe),ue.unsubscribe=()=>this.unsubscribe(),ie={next:Pe.next&&Ne(Pe.next,ue),error:Pe.error&&Ne(Pe.error,ue),complete:Pe.complete&&Ne(Pe.complete,ue)}):ie=Pe}this.destination=new Te(ie)}}function Ee(Le){k.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Le):(0,se.h)(Le)}function Qe(Le,Pe){const{onStoppedNotification:Ce}=k.v;Ce&&K.z.setTimeout(()=>Ce(Le,Pe))}const Ze={closed:!0,next:le.Z,error:function ge(Le){throw Le},complete:le.Z}},727:(pt,Re,F)=>{F.d(Re,{Lc:()=>me,w0:()=>le,Nn:()=>pe});var p=F(576);const k=(0,F(3888).d)(ve=>function(z){ve(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,He)=>`${He+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var se=F(8737);class le{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ne of z)Ne.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Ne){K=Ne instanceof k?Ne.errors:[Ne]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ne of He)try{he(Ne)}catch(Te){K=K??[],Te instanceof k?K=[...K,...Te.errors]:K.push(Te)}}if(K)throw new k(K)}}add(K){var z;if(K&&K!==this)if(this.closed)he(K);else{if(K instanceof le){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(K)}}_hasParent(K){const{_parentage:z}=this;return z===K||Array.isArray(z)&&z.includes(K)}_addParent(K){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(K),z):z?[z,K]:K}_removeParent(K){const{_parentage:z}=this;z===K?this._parentage=null:Array.isArray(z)&&(0,se.P)(z,K)}remove(K){const{_finalizers:z}=this;z&&(0,se.P)(z,K),K instanceof le&&K._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const me=le.EMPTY;function pe(ve){return ve instanceof le||ve&&"closed"in ve&&(0,p.m)(ve.remove)&&(0,p.m)(ve.add)&&(0,p.m)(ve.unsubscribe)}function he(ve){(0,p.m)(ve)?ve():ve.unsubscribe()}},2416:(pt,Re,F)=>{F.d(Re,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Re,F)=>{F.d(Re,{E:()=>$});const $=new(F(9751).y)(le=>le.complete())},8996:(pt,Re,F)=>{F.d(Re,{D:()=>Pe});var p=F(8421),$=F(5363),k=F(9468),me=F(9751),he=F(2202),ve=F(576),K=F(9672);function J(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new me.y(ie=>{(0,K.f)(ie,Ge,()=>{const ue=Ce[Symbol.asyncIterator]();(0,K.f)(ie,Ge,()=>{ue.next().then(we=>{we.done?ie.complete():ie.next(we.value)})},0,!0)})})}var He=F(3670),Ne=F(8239),Te=F(1144),tt=F(6495),Ee=F(2206),ge=F(4532),Qe=F(3260);function Pe(Ce,Ge){return Ge?function Le(Ce,Ge){if(null!=Ce){if((0,He.c)(Ce))return function se(Ce,Ge){return(0,p.Xf)(Ce).pipe((0,k.R)(Ge),(0,$.Q)(Ge))}(Ce,Ge);if((0,Te.z)(Ce))return function pe(Ce,Ge){return new me.y(ie=>{let ue=0;return Ge.schedule(function(){ue===Ce.length?ie.complete():(ie.next(Ce[ue++]),ie.closed||this.schedule())})})}(Ce,Ge);if((0,Ne.t)(Ce))return function le(Ce,Ge){return(0,p.Xf)(Ce).pipe((0,k.R)(Ge),(0,$.Q)(Ge))}(Ce,Ge);if((0,Ee.D)(Ce))return J(Ce,Ge);if((0,tt.T)(Ce))return function z(Ce,Ge){return new me.y(ie=>{let ue;return(0,K.f)(ie,Ge,()=>{ue=Ce[he.h](),(0,K.f)(ie,Ge,()=>{let we,Q;try{({value:we,done:Q}=ue.next())}catch(ee){return void ie.error(ee)}Q?ie.complete():ie.next(we)},0,!0)}),()=>(0,ve.m)(ue?.return)&&ue.return()})}(Ce,Ge);if((0,Qe.L)(Ce))return function Ze(Ce,Ge){return J((0,Qe.Q)(Ce),Ge)}(Ce,Ge)}throw(0,ge.z)(Ce)}(Ce,Ge):(0,p.Xf)(Ce)}},8421:(pt,Re,F)=>{F.d(Re,{Xf:()=>He});var p=F(655),$=F(1144),k=F(8239),se=F(9751),le=F(3670),me=F(2206),pe=F(4532),he=F(6495),ve=F(3260),K=F(576),z=F(7849),J=F(8822);function He(Le){if(Le instanceof se.y)return Le;if(null!=Le){if((0,le.c)(Le))return function Ne(Le){return new se.y(Pe=>{const Ce=Le[J.L]();if((0,K.m)(Ce.subscribe))return Ce.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,$.z)(Le))return function Te(Le){return new se.y(Pe=>{for(let Ce=0;Ce<Le.length&&!Pe.closed;Ce++)Pe.next(Le[Ce]);Pe.complete()})}(Le);if((0,k.t)(Le))return function tt(Le){return new se.y(Pe=>{Le.then(Ce=>{Pe.closed||(Pe.next(Ce),Pe.complete())},Ce=>Pe.error(Ce)).then(null,z.h)})}(Le);if((0,me.D)(Le))return ge(Le);if((0,he.T)(Le))return function Ee(Le){return new se.y(Pe=>{for(const Ce of Le)if(Pe.next(Ce),Pe.closed)return;Pe.complete()})}(Le);if((0,ve.L)(Le))return function Qe(Le){return ge((0,ve.Q)(Le))}(Le)}throw(0,pe.z)(Le)}function ge(Le){return new se.y(Pe=>{(function Ze(Le,Pe){var Ce,Ge,ie,ue;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,p.KL)(Le);!(Ge=yield Ce.next()).done;)if(Pe.next(Ge.value),Pe.closed)return}catch(we){ie={error:we}}finally{try{Ge&&!Ge.done&&(ue=Ce.return)&&(yield ue.call(Ce))}finally{if(ie)throw ie.error}}Pe.complete()})})(Le,Pe).catch(Ce=>Pe.error(Ce))})}},6451:(pt,Re,F)=>{F.d(Re,{T:()=>me});var p=F(8189),$=F(8421),k=F(515),se=F(7669),le=F(8996);function me(...pe){const he=(0,se.yG)(pe),ve=(0,se._6)(pe,1/0),K=pe;return K.length?1===K.length?(0,$.Xf)(K[0]):(0,p.J)(ve)((0,le.D)(K,he)):k.E}},5403:(pt,Re,F)=>{F.d(Re,{x:()=>$});var p=F(930);function $(se,le,me,pe,he){return new k(se,le,me,pe,he)}class k extends p.Lv{constructor(le,me,pe,he,ve,K){super(le),this.onFinalize=ve,this.shouldUnsubscribe=K,this._next=me?function(z){try{me(z)}catch(J){le.error(J)}}:super._next,this._error=he?function(z){try{he(z)}catch(J){le.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(z){le.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(pt,Re,F)=>{F.d(Re,{U:()=>k});var p=F(4482),$=F(5403);function k(se,le){return(0,p.e)((me,pe)=>{let he=0;me.subscribe((0,$.x)(pe,ve=>{pe.next(se.call(le,ve,he++))}))})}},8189:(pt,Re,F)=>{F.d(Re,{J:()=>k});var p=F(5577),$=F(4671);function k(se=1/0){return(0,p.z)($.y,se)}},5577:(pt,Re,F)=>{F.d(Re,{z:()=>he});var p=F(4004),$=F(8421),k=F(4482),se=F(9672),le=F(5403),pe=F(576);function he(ve,K,z=1/0){return(0,pe.m)(K)?he((J,He)=>(0,p.U)((Ne,Te)=>K(J,Ne,He,Te))((0,$.Xf)(ve(J,He))),z):("number"==typeof K&&(z=K),(0,k.e)((J,He)=>function me(ve,K,z,J,He,Ne,Te,tt){const Ee=[];let ge=0,Qe=0,Ze=!1;const Le=()=>{Ze&&!Ee.length&&!ge&&K.complete()},Pe=Ge=>ge<J?Ce(Ge):Ee.push(Ge),Ce=Ge=>{Ne&&K.next(Ge),ge++;let ie=!1;(0,$.Xf)(z(Ge,Qe++)).subscribe((0,le.x)(K,ue=>{He?.(ue),Ne?Pe(ue):K.next(ue)},()=>{ie=!0},void 0,()=>{if(ie)try{for(ge--;Ee.length&&ge<J;){const ue=Ee.shift();Te?(0,se.f)(K,Te,()=>Ce(ue)):Ce(ue)}Le()}catch(ue){K.error(ue)}}))};return ve.subscribe((0,le.x)(K,Pe,()=>{Ze=!0,Le()})),()=>{tt?.()}}(J,He,ve,z)))}},5363:(pt,Re,F)=>{F.d(Re,{Q:()=>se});var p=F(9672),$=F(4482),k=F(5403);function se(le,me=0){return(0,$.e)((pe,he)=>{pe.subscribe((0,k.x)(he,ve=>(0,p.f)(he,le,()=>he.next(ve),me),()=>(0,p.f)(he,le,()=>he.complete(),me),ve=>(0,p.f)(he,le,()=>he.error(ve),me)))})}},3099:(pt,Re,F)=>{F.d(Re,{B:()=>le});var p=F(8421),$=F(7579),k=F(930),se=F(4482);function le(pe={}){const{connector:he=(()=>new $.x),resetOnError:ve=!0,resetOnComplete:K=!0,resetOnRefCountZero:z=!0}=pe;return J=>{let He,Ne,Te,tt=0,Ee=!1,ge=!1;const Qe=()=>{Ne?.unsubscribe(),Ne=void 0},Ze=()=>{Qe(),He=Te=void 0,Ee=ge=!1},Le=()=>{const Pe=He;Ze(),Pe?.unsubscribe()};return(0,se.e)((Pe,Ce)=>{tt++,!ge&&!Ee&&Qe();const Ge=Te=Te??he();Ce.add(()=>{tt--,0===tt&&!ge&&!Ee&&(Ne=me(Le,z))}),Ge.subscribe(Ce),!He&&tt>0&&(He=new k.Hp({next:ie=>Ge.next(ie),error:ie=>{ge=!0,Qe(),Ne=me(Ze,ve,ie),Ge.error(ie)},complete:()=>{Ee=!0,Qe(),Ne=me(Ze,K),Ge.complete()}}),(0,p.Xf)(Pe).subscribe(He))})(J)}}function me(pe,he,...ve){if(!0===he)return void pe();if(!1===he)return;const K=new k.Hp({next:()=>{K.unsubscribe(),pe()}});return he(...ve).subscribe(K)}},9468:(pt,Re,F)=>{F.d(Re,{R:()=>$});var p=F(4482);function $(k,se=0){return(0,p.e)((le,me)=>{me.add(k.schedule(()=>le.subscribe(me),se))})}},8505:(pt,Re,F)=>{F.d(Re,{b:()=>le});var p=F(576),$=F(4482),k=F(5403),se=F(4671);function le(me,pe,he){const ve=(0,p.m)(me)||pe||he?{next:me,error:pe,complete:he}:me;return ve?(0,$.e)((K,z)=>{var J;null===(J=ve.subscribe)||void 0===J||J.call(ve);let He=!0;K.subscribe((0,k.x)(z,Ne=>{var Te;null===(Te=ve.next)||void 0===Te||Te.call(ve,Ne),z.next(Ne)},()=>{var Ne;He=!1,null===(Ne=ve.complete)||void 0===Ne||Ne.call(ve),z.complete()},Ne=>{var Te;He=!1,null===(Te=ve.error)||void 0===Te||Te.call(ve,Ne),z.error(Ne)},()=>{var Ne,Te;He&&(null===(Ne=ve.unsubscribe)||void 0===Ne||Ne.call(ve)),null===(Te=ve.finalize)||void 0===Te||Te.call(ve)}))}):se.y}},4408:(pt,Re,F)=>{F.d(Re,{o:()=>le});var p=F(727);class $ extends p.w0{constructor(pe,he){super()}schedule(pe,he=0){return this}}const k={setInterval(me,pe,...he){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(me,pe,...he):setInterval(me,pe,...he)},clearInterval(me){const{delegate:pe}=k;return(pe?.clearInterval||clearInterval)(me)},delegate:void 0};var se=F(8737);class le extends ${constructor(pe,he){super(pe,he),this.scheduler=pe,this.work=he,this.pending=!1}schedule(pe,he=0){var ve;if(this.closed)return this;this.state=pe;const K=this.id,z=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(z,K,he)),this.pending=!0,this.delay=he,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(z,this.id,he),this}requestAsyncId(pe,he,ve=0){return k.setInterval(pe.flush.bind(pe,this),ve)}recycleAsyncId(pe,he,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return he;null!=he&&k.clearInterval(he)}execute(pe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(pe,he);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,he){let K,ve=!1;try{this.work(pe)}catch(z){ve=!0,K=z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:pe,scheduler:he}=this,{actions:ve}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ve,this),null!=pe&&(this.id=this.recycleAsyncId(he,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Re,F)=>{F.d(Re,{v:()=>k});var p=F(6063);class ${constructor(le,me=$.now){this.schedulerActionCtor=le,this.now=me}schedule(le,me=0,pe){return new this.schedulerActionCtor(this,le).schedule(pe,me)}}$.now=p.l.now;class k extends ${constructor(le,me=$.now){super(le,me),this.actions=[],this._active=!1}flush(le){const{actions:me}=this;if(this._active)return void me.push(le);let pe;this._active=!0;do{if(pe=le.execute(le.state,le.delay))break}while(le=me.shift());if(this._active=!1,pe){for(;le=me.shift();)le.unsubscribe();throw pe}}}},4986:(pt,Re,F)=>{F.d(Re,{z:()=>k});var p=F(4408);const k=new(F(7565).v)(p.o)},6063:(pt,Re,F)=>{F.d(Re,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(pt,Re,F)=>{F.d(Re,{z:()=>p});const p={setTimeout($,k,...se){const{delegate:le}=p;return le?.setTimeout?le.setTimeout($,k,...se):setTimeout($,k,...se)},clearTimeout($){const{delegate:k}=p;return(k?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(pt,Re,F)=>{F.d(Re,{h:()=>$});const $=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Re,F)=>{F.d(Re,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Re,F)=>{F.d(Re,{_6:()=>me,jO:()=>se,yG:()=>le});var p=F(576);function k(pe){return pe[pe.length-1]}function se(pe){return(0,p.m)(k(pe))?pe.pop():void 0}function le(pe){return function $(pe){return pe&&(0,p.m)(pe.schedule)}(k(pe))?pe.pop():void 0}function me(pe,he){return"number"==typeof k(pe)?pe.pop():he}},8737:(pt,Re,F)=>{function p($,k){if($){const se=$.indexOf(k);0<=se&&$.splice(se,1)}}F.d(Re,{P:()=>p})},3888:(pt,Re,F)=>{function p($){const se=$(le=>{Error.call(le),le.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Re,{d:()=>p})},2806:(pt,Re,F)=>{F.d(Re,{O:()=>se,x:()=>k});var p=F(2416);let $=null;function k(le){if(p.v.useDeprecatedSynchronousErrorHandling){const me=!$;if(me&&($={errorThrown:!1,error:null}),le(),me){const{errorThrown:pe,error:he}=$;if($=null,pe)throw he}}else le()}function se(le){p.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=le)}},9672:(pt,Re,F)=>{function p($,k,se,le=0,me=!1){const pe=k.schedule(function(){se(),me?$.add(this.schedule(null,le)):this.unsubscribe()},le);if($.add(pe),!me)return pe}F.d(Re,{f:()=>p})},4671:(pt,Re,F)=>{function p($){return $}F.d(Re,{y:()=>p})},1144:(pt,Re,F)=>{F.d(Re,{z:()=>p});const p=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(pt,Re,F)=>{F.d(Re,{D:()=>$});var p=F(576);function $(k){return Symbol.asyncIterator&&(0,p.m)(k?.[Symbol.asyncIterator])}},576:(pt,Re,F)=>{function p($){return"function"==typeof $}F.d(Re,{m:()=>p})},3670:(pt,Re,F)=>{F.d(Re,{c:()=>k});var p=F(8822),$=F(576);function k(se){return(0,$.m)(se[p.L])}},6495:(pt,Re,F)=>{F.d(Re,{T:()=>k});var p=F(2202),$=F(576);function k(se){return(0,$.m)(se?.[p.h])}},8239:(pt,Re,F)=>{F.d(Re,{t:()=>$});var p=F(576);function $(k){return(0,p.m)(k?.then)}},3260:(pt,Re,F)=>{F.d(Re,{L:()=>se,Q:()=>k});var p=F(655),$=F(576);function k(le){return(0,p.FC)(this,arguments,function*(){const pe=le.getReader();try{for(;;){const{value:he,done:ve}=yield(0,p.qq)(pe.read());if(ve)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(he)}}finally{pe.releaseLock()}})}function se(le){return(0,$.m)(le?.getReader)}},4482:(pt,Re,F)=>{F.d(Re,{A:()=>$,e:()=>k});var p=F(576);function $(se){return(0,p.m)(se?.lift)}function k(se){return le=>{if($(le))return le.lift(function(me){try{return se(me,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Re,F)=>{function p(){}F.d(Re,{Z:()=>p})},9635:(pt,Re,F)=>{F.d(Re,{U:()=>k,z:()=>$});var p=F(4671);function $(...se){return k(se)}function k(se){return 0===se.length?p.y:1===se.length?se[0]:function(me){return se.reduce((pe,he)=>he(pe),me)}}},7849:(pt,Re,F)=>{F.d(Re,{h:()=>k});var p=F(2416),$=F(3410);function k(se){$.z.setTimeout(()=>{const{onUnhandledError:le}=p.v;if(!le)throw se;le(se)})}},4532:(pt,Re,F)=>{function p($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Re,{z:()=>p})},655:(pt,Re,F)=>{function se(Q,ee){var fe={};for(var ae in Q)Object.prototype.hasOwnProperty.call(Q,ae)&&ee.indexOf(ae)<0&&(fe[ae]=Q[ae]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(Q);Be<ae.length;Be++)ee.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(Q,ae[Be])&&(fe[ae[Be]]=Q[ae[Be]])}return fe}function he(Q,ee,fe,ae){return new(fe||(fe=Promise))(function(je,gt){function sn(cn){try{ze(ae.next(cn))}catch(Cn){gt(Cn)}}function jt(cn){try{ze(ae.throw(cn))}catch(Cn){gt(Cn)}}function ze(cn){cn.done?je(cn.value):function Be(je){return je instanceof fe?je:new fe(function(gt){gt(je)})}(cn.value).then(sn,jt)}ze((ae=ae.apply(Q,ee||[])).next())})}function Ee(Q){return this instanceof Ee?(this.v=Q,this):new Ee(Q)}function ge(Q,ee,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=fe.apply(Q,ee||[]),je=[];return Be={},gt("next"),gt("throw"),gt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function gt(nn){ae[nn]&&(Be[nn]=function(rn){return new Promise(function(zt,Vt){je.push([nn,rn,zt,Vt])>1||sn(nn,rn)})})}function sn(nn,rn){try{!function jt(nn){nn.value instanceof Ee?Promise.resolve(nn.value.v).then(ze,cn):Cn(je[0][2],nn)}(ae[nn](rn))}catch(zt){Cn(je[0][3],zt)}}function ze(nn){sn("next",nn)}function cn(nn){sn("throw",nn)}function Cn(nn,rn){nn(rn),je.shift(),je.length&&sn(je[0][0],je[0][1])}}function Ze(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function J(Q){var ee="function"==typeof Symbol&&Symbol.iterator,fe=ee&&Q[ee],ae=0;if(fe)return fe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ae>=Q.length&&(Q=void 0),{value:Q&&Q[ae++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),fe={},ae("next"),ae("throw"),ae("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ae(je){fe[je]=Q[je]&&function(gt){return new Promise(function(sn,jt){!function Be(je,gt,sn,jt){Promise.resolve(jt).then(function(ze){je({value:ze,done:sn})},gt)}(sn,jt,(gt=Q[je](gt)).done,gt.value)})}}}F.d(Re,{FC:()=>ge,KL:()=>Ze,_T:()=>se,mG:()=>he,qq:()=>Ee})},4650:(pt,Re,F)=>{F.d(Re,{$8M:()=>Nl,$Z:()=>kg,AFp:()=>CT,AaK:()=>he,BQk:()=>tm,CHM:()=>wh,CRH:()=>nT,CZH:()=>zd,CqO:()=>VE,D6c:()=>px,EJc:()=>zA,EpF:()=>FE,F$t:()=>Cd,F4k:()=>UE,FYo:()=>ED,FiY:()=>Ve,G48:()=>rx,GfV:()=>_0,GkF:()=>Jy,Hsn:()=>BS,JOm:()=>wa,KtG:()=>Go,LFG:()=>xn,LSH:()=>ng,Lbi:()=>uw,Lck:()=>mA,MAs:()=>OE,MMx:()=>kf,NdJ:()=>ev,OlP:()=>Dn,Oqu:()=>zl,PXZ:()=>ex,Q6J:()=>LE,QGY:()=>Xy,QP$:()=>Oe,Qsj:()=>DM,R0b:()=>Gs,RDi:()=>Qp,Rgc:()=>Hf,SBq:()=>$u,Sil:()=>fw,Suo:()=>tT,TTD:()=>Rs,TgZ:()=>Hl,Tol:()=>Eo,VKq:()=>Fd,W1O:()=>rT,WLB:()=>Yl,X6Q:()=>qd,XFs:()=>Ye,Xpm:()=>De,Xts:()=>j_,Y36:()=>sl,YKP:()=>Mf,YNc:()=>Zy,Yjl:()=>H,Yz7:()=>rn,Z0I:()=>ki,ZZ4:()=>Zm,_UZ:()=>Qy,_Vd:()=>Hu,_c5:()=>hx,_uU:()=>vf,aQg:()=>Rw,c2e:()=>Xu,cJS:()=>Vt,cg1:()=>If,dDg:()=>ws,dqk:()=>xt,eFA:()=>RT,eoX:()=>_w,f3M:()=>T,g9A:()=>lw,h0i:()=>Od,hGG:()=>fx,hij:()=>sm,iGM:()=>xm,ifc:()=>_t,ip1:()=>Vm,jDz:()=>Of,kL8:()=>IC,l5B:()=>hl,lG2:()=>Y,lqb:()=>va,lri:()=>rp,oAB:()=>Xt,oJD:()=>tg,oxw:()=>WE,q4F:()=>y0,qLn:()=>Xh,qZA:()=>Xg,qbA:()=>zC,rWj:()=>mw,s9C:()=>GE,sBO:()=>Gm,sIi:()=>jl,s_b:()=>Sm,soG:()=>Zf,tb:()=>Bm,tp0:()=>St,uIk:()=>Ky,vHH:()=>Te,vpe:()=>Si,wAp:()=>Dt,xp6:()=>K0,ynx:()=>em,z2F:()=>fl,zSh:()=>og,zs3:()=>zu});var p=F(7579),$=F(727),k=F(9751),se=F(6451),le=F(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const K=me({__forward_ref__:me});function z(s){return s.__forward_ref__=z,s.toString=function(){return he(this())},s}function J(s){return function He(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===z}(s)?s():s}class Te extends Error{constructor(o,l){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function Pe(s,o){throw new Te(-201,!1)}function jt(s,o){null==s&&function ze(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Vt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ir(s){return Fr(s,Ur)||Fr(s,wi)}function ki(s){return null!==Ir(s)}function Fr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Li(s){return s&&(s.hasOwnProperty(jn)||s.hasOwnProperty(Fi))?s[jn]:null}const Ur=me({\u0275prov:me}),jn=me({\u0275inj:me}),wi=me({ngInjectableDef:me}),Fi=me({ngInjectorDef:me});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let rr;function wn(s){const o=rr;return rr=s,o}function mr(s,o,l){const c=Ir(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&Ye.Optional?null:void 0!==o?o:void Pe(he(s))}function In(s){return{toString:s}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),_t=(()=>{return(s=_t||(_t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",_t;var s})();const xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Pr={},bt=[],Mr=me({\u0275cmp:me}),kt=me({\u0275dir:me}),zr=me({\u0275pipe:me}),Yt=me({\u0275mod:me}),hr=me({\u0275fac:me}),An=me({__NG_ELEMENT_ID__:me});let Xe=0;function De(s){return In(()=>{const l=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||_t.Emulated,id:"c"+Xe++,styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,y=s.features;return h.inputs=W(s.inputs,c),h.outputs=W(s.outputs),y&&y.forEach(I=>I(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(It).filter(Ct):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(ne).filter(Ct):null,h})}function It(s){return M(s)||B(s)}function Ct(s){return null!==s}function Xt(s){return In(()=>({type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function W(s,o){if(null==s)return Pr;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),l[h]=c,o&&(o[h]=f)}return l}const Y=De;function H(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function M(s){return s[Mr]||null}function B(s){return s[kt]||null}function ne(s){return s[zr]||null}function Oe(s){const o=M(s)||B(s)||ne(s);return null!==o&&o.standalone}function rt(s,o){const l=s[Yt]||null;if(!l&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return l}function ir(s){return Array.isArray(s)&&"object"==typeof s[1]}function si(s){return Array.isArray(s)&&!0===s[1]}function ko(s){return 0!=(8&s.flags)}function pu(s){return 2==(2&s.flags)}function ka(s){return 1==(1&s.flags)}function Kr(s){return null!==s.template}function gu(s){return 0!=(256&s[2])}function Er(s,o){return s.hasOwnProperty(hr)?s[hr]:null}class Vo{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Rs(){return _c}function _c(s){return s.type.prototype.ngOnChanges&&(s.setInput=mu),Il}function Il(){const s=Bo(this),o=s?.current;if(o){const l=s.previous;if(l===Pr)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function mu(s,o,l,c){const h=Bo(s)||function jo(s,o){return s[yc]=o}(s,{previous:Pr,current:null}),f=h.current||(h.current={}),y=h.previous,I=this.declaredInputs[l],C=y[I];f[I]=new Vo(C&&C.currentValue,o,y===Pr),s[c]=o}Rs.ngInherit=!0;const yc="__ngSimpleChanges__";function Bo(s){return s[yc]||null}function Ln(s){for(;Array.isArray(s);)s=s[0];return s}function Ei(s,o){return Ln(o[s])}function Cr(s,o){return Ln(o[s.index])}function $o(s,o){return s.data[o]}function on(s,o){const l=o[s];return ir(l)?l:l[0]}function Ps(s){return 64==(64&s[2])}function li(s,o){return null==o?null:s[o]}function La(s){s[18]=0}function Hn(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Nt={lFrame:za(null),bindingsEnabled:!0};function io(){return Nt.bindingsEnabled}function Me(){return Nt.lFrame.lView}function Kt(){return Nt.lFrame.tView}function wh(s){return Nt.lFrame.contextLView=s,s[8]}function Go(s){return Nt.lFrame.contextLView=null,s}function sr(){let s=zo();for(;null!==s&&64===s.type;)s=s.parent;return s}function zo(){return Nt.lFrame.currentTNode}function Br(s,o){const l=Nt.lFrame;l.currentTNode=s,l.isParent=o}function Tl(){return Nt.lFrame.isParent}function qo(){Nt.lFrame.isParent=!1}function or(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function $a(){return Nt.lFrame.bindingIndex++}function Ec(s,o){const l=Nt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Ko(o)}function Ko(s){Nt.lFrame.currentDirectiveIndex=s}function Wa(){return Nt.lFrame.currentQueryIndex}function Eu(s){Nt.lFrame.currentQueryIndex=s}function Ga(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Cc(s,o,l){if(l&Ye.SkipSelf){let h=o,f=s;for(;!(h=h.parent,null!==h||l&Ye.Host||(h=Ga(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,s=f}const c=Nt.lFrame=Ch();return c.currentTNode=o,c.lView=s,!0}function Zo(s){const o=Ch(),l=s[1];Nt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Ch(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?za(s):o}function za(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Th(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Tc=Th;function Ms(){const s=Th();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Nn(){return Nt.lFrame.selectedIndex}function ls(s){Nt.lFrame.selectedIndex=s}function kn(){const s=Nt.lFrame;return $o(s.tView,s.selectedIndex)}function bl(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const f=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),I&&((s.contentHooks||(s.contentHooks=[])).push(l,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function Yo(s,o,l){Jo(s,o,3,l)}function Qo(s,o,l,c){(3&s[2])===l&&Jo(s,o,l,c)}function Sc(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Jo(s,o,l,c){const f=c??-1,y=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<f||-1==f)&&(Ac(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Ac(s,o,l,c){const h=l[c]<0,f=l[c+1],I=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class ui{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function us(s,o,l){let c=0;for(;c<l.length;){const h=l[c];if("number"==typeof h){if(0!==h)break;c++;const f=l[c++],y=l[c++],I=l[c++];s.setAttribute(o,y,I,f)}else{const f=h,y=l[++c];Au(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),c++}}return c}function qa(s){return 3===s||4===s||6===s}function Au(s){return 64===s.charCodeAt(0)}function Ka(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||Rc(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function Rc(s,o,l,c,h){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const I=s[f++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=f-1;break}}}for(;f<s.length;){const I=s[f];if("number"==typeof I)break;if(I===l){if(null===c)return void(null!==h&&(s[f+1]=h));if(c===s[f+1])return void(s[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,l),null!==c&&s.splice(f++,0,c),null!==h&&s.splice(f++,0,h)}function Sh(s){return-1!==s}function ar(s){return 32767&s}function ks(s,o){let l=function Ah(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let xu=!0;function Za(s){const o=xu;return xu=s,o}let Pc=0;const Yr={};function cs(s,o){const l=Rl(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Ru(c.data,s),Ru(o,null),Ru(c.blueprint,null));const h=Ya(s,o),f=s.injectorIndex;if(Sh(h)){const y=ar(h),I=ks(h,o),C=I[1].data;for(let A=0;A<8;A++)o[f+A]=I[y+A]|C[y+A]}return o[f+8]=h,f}function Ru(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Rl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ya(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){if(c=oa(h),null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function oo(s,o,l){!function Mc(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(An)&&(c=l[An]),null==c&&(c=l[An]=Pc++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function ea(s,o,l){if(l&Ye.Optional||void 0!==s)return s;Pe()}function ta(s,o,l,c){if(l&Ye.Optional&&void 0===c&&(c=null),0==(l&(Ye.Self|Ye.Host))){const h=s[9],f=wn(void 0);try{return h?h.get(o,c,l&Ye.Optional):mr(o,c,l&Ye.Optional)}finally{wn(f)}}return ea(c,0,l)}function na(s,o,l,c=Ye.Default,h){if(null!==s){if(1024&o[2]){const y=function Ph(s,o,l,c,h){let f=s,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Nc(f,y,l,c|Ye.Self,Yr);if(I!==Yr)return I;let C=f.parent;if(!C){const A=y[21];if(A){const N=A.get(l,Yr,c);if(N!==Yr)return N}C=oa(y),y=y[15]}f=C}return h}(s,o,l,c,Yr);if(y!==Yr)return y}const f=Nc(s,o,l,c,Yr);if(f!==Yr)return f}return ta(o,l,c,h)}function Nc(s,o,l,c,h){const f=function Rh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(An)?s[An]:void 0;return"number"==typeof o?o>=0?255&o:Pu:o}(l);if("function"==typeof f){if(!Cc(o,s,c))return c&Ye.Host?ea(h,0,c):ta(o,l,c,h);try{const y=f(c);if(null!=y||c&Ye.Optional)return y;Pe()}finally{Tc()}}else if("number"==typeof f){let y=null,I=Rl(s,o),C=-1,A=c&Ye.Host?o[16][6]:null;for((-1===I||c&Ye.SkipSelf)&&(C=-1===I?Ya(s,o):o[I+8],-1!==C&&Ml(c,!1)?(y=o[1],I=ar(C),o=ks(C,o)):I=-1);-1!==I;){const N=o[1];if(ra(f,I,N.data)){const U=Pl(I,o,l,y,c,A);if(U!==Yr)return U}C=o[I+8],-1!==C&&Ml(c,o[1].data[I+8]===A)&&ra(f,I,o)?(y=N,I=ar(C),o=ks(C,o)):I=-1}}return h}function Pl(s,o,l,c,h,f){const y=o[1],I=y.data[s+8],N=Ja(I,y,l,null==c?pu(I)&&xu:c!=y&&0!=(3&I.type),h&Ye.Host&&f===I);return null!==N?Bi(o,y,N,I):Yr}function Ja(s,o,l,c,h){const f=s.providerIndexes,y=o.data,I=1048575&f,C=s.directiveStart,N=f>>20,Z=h?I+N:s.directiveEnd;for(let re=c?I:I+N;re<Z;re++){const be=y[re];if(re<C&&l===be||re>=C&&be.type===l)return re}if(h){const re=y[C];if(re&&Kr(re)&&re.type===l)return C}return null}function Bi(s,o,l,c){let h=s[l];const f=o.data;if(function Su(s){return s instanceof ui}(h)){const y=h;y.resolving&&function Qe(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Te(-200,`Circular dependency in DI detected for ${s}${l}`)}(function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(f[l]));const I=Za(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?wn(y.injectImpl):null;Cc(s,c,Ye.Default);try{h=s[l]=y.factory(void 0,f,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Du(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=_c(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),f&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,f),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,f))}(l,f[l],o)}finally{null!==C&&wn(C),Za(I),y.resolving=!1,Tc()}}return h}function ra(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Ml(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class ia{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return na(this._tNode,this._lView,o,c,l)}}function Pu(){return new ia(sr(),Me())}function oa(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Nl(s){return function Qa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const f=l[h];if(qa(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(f===o)return l[h+1];h+=2}}}return null}(sr(),s)}const aa="__parameters__";function ua(s,o,l){return In(()=>{const c=function Mu(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return I.annotation=y,I;function I(C,A,N){const U=C.hasOwnProperty(aa)?C[aa]:Object.defineProperty(C,aa,{value:[]})[aa];for(;U.length<=N;)U.push(null);return(U[N]=U[N]||[]).push(y),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Dn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=rn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sn(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Sn(c,o)):o!==s&&o.push(c)}return o}function hs(s,o){s.forEach(l=>Array.isArray(l)?hs(l,o):o(l))}function uo(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Tr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function co(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function st(s,o,l){let c=Hi(s,o);return c>=0?s[1|c]=l:(c=~c,function kh(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Xa(s,o){const l=Hi(s,o);if(l>=0)return s[1|l]}function Hi(s,o){return function Ol(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const f=c+(h-c>>1),y=s[f<<l];if(o===y)return f<<l;y>o?h=f:c=f+1}return~(h<<l)}(s,o,1)}const fo={},Ou="__NG_DI_FLAG__",Os="ngTempTokenPath",fs=/\n/gm,er="__source";let po;function ps(s){const o=po;return po=s,o}function zn(s,o=Ye.Default){if(void 0===po)throw new Te(-203,!1);return null===po?mr(s,void 0,o):po.get(s,o&Ye.Optional?null:void 0,o)}function xn(s,o=Ye.Default){return(function Yn(){return rr}()||zn)(J(s),o)}function T(s,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),xn(s,o)}function D(s){const o=[];for(let l=0;l<s.length;l++){const c=J(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Te(900,!1);let h,f=Ye.Default;for(let y=0;y<c.length;y++){const I=c[y],C=j(I);"number"==typeof C?-1===C?h=I.token:f|=C:h=I}o.push(xn(h,f))}else o.push(xn(c))}return o}function R(s,o){return s[Ou]=o,s.prototype[Ou]=o,s}function j(s){return s[Ou]}const Ve=R(ua("Optional"),8),St=R(ua("SkipSelf"),4);let Vh,Lu,Bc;function Qp(s){Vh=s}function _o(s){return function Vc(){if(void 0===Lu&&(Lu=null,xt.trustedTypes))try{Lu=xt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Lu}()?.createHTML(s)||s}function Jp(s){return function yo(){if(void 0===Bc&&(Bc=null,xt.trustedTypes))try{Bc=xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Bc}()?.createHTML(s)||s}class Xp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Us(s){return s instanceof Xp?s.changingThisBreaksApplicationSecurity:s}function vo(s,o){const l=function $h(s){return s instanceof Xp&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}class U_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(_o(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class t0{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=_o(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=_o(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const y=l.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function _(s){return(s=String(s)).match(g)?s:"unsafe:"+s}function E(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function x(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const O=E("area,br,col,hr,img,wbr"),te=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xe=E("rp,rt"),fn=x(O,x(te,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),x(xe,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),x(xe,te)),jr=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$c=x(jr,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wc=E("script,style,template");class rl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!fn.hasOwnProperty(l))return this.sanitizedSomething=!0,!Wc.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let h=0;h<c.length;h++){const f=c.item(h),y=f.name,I=y.toLowerCase();if(!$c.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let C=f.value;jr[I]&&(C=_(C)),this.buf.push(" ",y,'="',Gc(C),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();fn.hasOwnProperty(l)&&!O.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(Gc(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const eg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zh=/([^\#-~ |!])/g;function Gc(s){return s.replace(/&/g,"&amp;").replace(eg,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(zh,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Vu;function ma(s){return"content"in s&&function V_(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Fn=(()=>((Fn=Fn||{})[Fn.NONE=0]="NONE",Fn[Fn.HTML=1]="HTML",Fn[Fn.STYLE=2]="STYLE",Fn[Fn.SCRIPT=3]="SCRIPT",Fn[Fn.URL=4]="URL",Fn[Fn.RESOURCE_URL=5]="RESOURCE_URL",Fn))();function tg(s){const o=qh();return o?Jp(o.sanitize(Fn.HTML,s)||""):vo(s,"HTML")?Jp(Us(s)):function Bu(s,o){let l=null;try{Vu=Vu||function Gh(s){const o=new t0(s);return function w(){try{return!!(new window.DOMParser).parseFromString(_o(""),"text/html")}catch{return!1}}()?new U_(o):o}(s);let c=o?String(o):"";l=Vu.getInertBodyElement(c);let h=5,f=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=f,f=l.innerHTML,l=Vu.getInertBodyElement(c)}while(c!==f);return _o((new rl).sanitizeChildren(ma(l)||l))}finally{if(l){const c=ma(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(function Uc(){return void 0!==Vh?Vh:typeof document<"u"?document:void 0}(),Ee(s))}function ng(s){const o=qh();return o?o.sanitize(Fn.URL,s)||"":vo(s,"URL")?Us(s):_(Ee(s))}function qh(){const s=Me();return s&&s[12]}const j_=new Dn("ENVIRONMENT_INITIALIZER"),s0=new Dn("INJECTOR",-1),o0=new Dn("INJECTOR_DEF_TYPES");class a0{get(o,l=fo){if(l===fo){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return l}}function yD(...s){return{\u0275providers:l0(0,s)}}function l0(s,...o){const l=[],c=new Set;let h;return hs(o,f=>{const y=f;ig(y,l,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&u0(h,l),l}function u0(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];hs(h,f=>{o.push(f)})}}function ig(s,o,l,c){if(!(s=J(s)))return!1;let h=null,f=Li(s);const y=!f&&M(s);if(f||y){if(y&&!y.standalone)return!1;h=s}else{const C=s.ngModule;if(f=Li(C),!f)return!1;h=C}const I=c.has(h);if(y){if(I)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)ig(A,o,l,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let A;c.add(h);try{hs(f.imports,N=>{ig(N,o,l,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&u0(A,o)}if(!I){const A=Er(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:bt},{provide:o0,useValue:h,multi:!0},{provide:j_,useValue:()=>xn(h),multi:!0})}const C=f.providers;null==C||I||hs(C,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const c0=me({provide:String,useValue:me});function Kh(s){return null!==s&&"object"==typeof s&&c0 in s}function Vs(s){return"function"==typeof s}const og=new Dn("Set Injector scope."),ag={},Vl={};let lg;function ug(){return void 0===lg&&(lg=new a0),lg}class va{}class H_ extends va{constructor(o,l,c,h){super(),this.parent=l,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dg(o,y=>this.processProvider(y)),this.records.set(s0,zc(void 0,this)),h.has("environment")&&this.records.set(va,zc(void 0,this));const f=this.records.get(og);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(o0.multi,bt,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=ps(this),c=wn(void 0);try{return o()}finally{ps(l),wn(c)}}get(o,l=fo,c=Ye.Default){this.assertNotDestroyed();const h=ps(this),f=wn(void 0);try{if(!(c&Ye.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function wD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Dn}(o)&&Ir(o);I=C&&this.injectableDefInScope(C)?zc(Zh(o),ag):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Ye.Self?ug():this.parent).get(o,l=c&Ye.Optional&&l===fo?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[Os]=y[Os]||[]).unshift(he(o)),h)throw y;return function X(s,o,l,c){const h=s[Os];throw o[er]&&h.unshift(o[er]),s.message=function oe(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];f.push(y+":"+("string"==typeof I?JSON.stringify(I):he(I)))}h=`{${f.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(fs,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Os]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{wn(f),ps(h)}}resolveInjectorInitializers(){const o=ps(this),l=wn(void 0);try{const c=this.get(j_.multi,bt,Ye.Self);for(const h of c)h()}finally{ps(o),wn(l)}}toString(){const o=[],l=this.records;for(const c of l.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(o){let l=Vs(o=J(o))?o:J(o&&o.provide);const c=function $_(s){return Kh(s)?zc(void 0,s.useValue):zc(function cg(s,o,l){let c;if(Vs(s)){const h=J(s);return Er(h)||Zh(h)}if(Kh(s))c=()=>J(s.useValue);else if(function ya(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...D(s.deps||[]));else if(function sg(s){return!(!s||!s.useExisting)}(s))c=()=>xn(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function Yh(s){return!!s.deps}(s))return Er(h)||Zh(h);c=()=>new h(...D(s.deps))}return c}(s),ag)}(o);if(Vs(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=zc(void 0,ag,!0),h.factory=()=>D(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,c)}hydrate(o,l){return l.value===ag&&(l.value=Vl,l.value=l.factory()),"object"==typeof l.value&&l.value&&function vD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=J(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Zh(s){const o=Ir(s),l=null!==o?o.factory:Er(s);if(null!==l)return l;if(s instanceof Dn)throw new Te(204,!1);if(s instanceof Function)return function h0(s){const o=s.length;if(o>0)throw co(o,"?"),new Te(204,!1);const l=function On(s){const o=s&&(s[Ur]||s[wi]);if(o){const l=function Oi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Te(204,!1)}function zc(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function W_(s){return!!s.\u0275providers}function dg(s,o){for(const l of s)Array.isArray(l)?dg(l,o):W_(l)?dg(l.\u0275providers,o):o(l)}class G_{}class fg{resolveComponentFactory(o){throw function p0(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Hu=(()=>{class s{}return s.NULL=new fg,s})();function ID(){return qc(sr(),Me())}function qc(s,o){return new $u(Cr(s,o))}let $u=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=ID,s})();function m0(s){return s instanceof $u?s.nativeElement:s}class ED{}let DM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function SM(){const s=Me(),l=on(sr().index,s);return(ir(l)?l:s)[11]}(),s})(),z_=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class _0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const y0=new _0("14.2.10"),q_={};function X_(s){return s.ngOriginalError}class Xh{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&X_(o);for(;l&&X_(l);)l=X_(l);return l||null}}const ey=new Map;let xD=0;const vg="__ngContext__";function Hr(s,o){ir(o)?(s[vg]=o[20],function PD(s){ey.set(s[20],s)}(o)):s[vg]=o}function il(s){return s instanceof Function?s():s}var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();function sy(s,o){return undefined(s,o)}function Jc(s){const o=s[3];return si(o)?o[3]:o}function Eg(s){return R0(s[13])}function Cg(s){return R0(s[4])}function R0(s){for(;null!==s&&!si(s);)s=s[4];return s}function Xc(s,o,l,c,h){if(null!=c){let f,y=!1;si(c)?f=c:ir(c)&&(y=!0,c=c[0]);const I=Ln(c);0===s&&null!==l?null==h?F0(o,l,I):Ia(o,l,I,h||null,!0):1===s&&null!==l?Ia(o,l,I,h||null,!0):2===s?function GD(s,o,l){const c=Dg(s,o);c&&function WD(s,o,l,c){s.removeChild(o,l,c)}(s,c,o,l)}(o,I,y):3===s&&o.destroyNode(I),null!=f&&function FM(s,o,l,c,h){const f=l[7];f!==Ln(l)&&Xc(o,s,c,f,h);for(let I=10;I<l.length;I++){const C=l[I];Wu(C[1],C,s,o,c,f)}}(o,s,f,l,h)}}function Tg(s,o,l){return s.createElement(o,l)}function k0(s,o){const l=s[9],c=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Hn(h,-1)),l.splice(c,1)}function uy(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&k0(h,c),o>0&&(s[l-1][4]=c[4]);const f=Tr(s,10+o);!function ly(s,o){Wu(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function nf(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&Wu(s,o,l,3,null,null),function OM(s){let o=s[13];if(!o)return bg(s[1],s);for(;o;){let l=null;if(ir(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)ir(o)&&bg(o[1],o),o=o[3];null===o&&(o=s),ir(o)&&bg(o[1],o),l=o&&o[4]}o=l}}(o)}}function bg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function dy(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof ui)){const f=l[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const I=h[f[y]],C=f[y+1];try{C.call(I)}finally{}}else try{f.call(h)}finally{}}}}(s,o),function cy(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let f=0;f<l.length-1;f+=2)if("string"==typeof l[f]){const y=l[f+1],I="function"==typeof y?y(o):Ln(o[y]),C=c[h=l[f+2]],A=l[f+3];"boolean"==typeof A?I.removeEventListener(l[f],C,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),f+=2}else{const y=c[h=l[f+1]];l[f].call(y)}if(null!==c){for(let f=h+1;f<c.length;f++)(0,c[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&si(o[3])){l!==o[3]&&k0(l,o);const c=o[19];null!==c&&c.detachView(s)}!function MD(s){ey.delete(s[20])}(o)}}function O0(s,o,l){return function L0(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===_t.None||h===_t.Emulated)return null}return Cr(c,l)}(s,o.parent,l)}function Ia(s,o,l,c,h){s.insertBefore(o,l,c,h)}function F0(s,o,l){s.appendChild(o,l)}function U0(s,o,l,c,h){null!==c?Ia(s,o,l,c,h):F0(s,o,l)}function Dg(s,o){return s.parentNode(o)}function br(s,o,l){return hy(s,o,l)}let hy=function B0(s,o,l){return 40&s.type?Cr(s,l):null};function Ag(s,o,l,c){const h=O0(s,c,o),f=o[11],I=br(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)U0(f,h,l[C],I,!1);else U0(f,h,l,I,!1)}function xg(s,o){if(null!==o){const l=o.type;if(3&l)return Cr(o,s);if(4&l)return j0(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return xg(s,c);{const h=s[o.index];return si(h)?j0(-1,h):Ln(h)}}if(32&l)return sy(o,s)()||Ln(s[o.index]);{const c=fy(s,o);return null!==c?Array.isArray(c)?c[0]:xg(Jc(s[16]),c):xg(s,o.next)}}return null}function fy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function j0(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return xg(c,h)}return o[7]}function py(s,o,l,c,h,f,y){for(;null!=l;){const I=c[l.index],C=l.type;if(y&&0===o&&(I&&Hr(Ln(I),c),l.flags|=4),64!=(64&l.flags))if(8&C)py(s,o,l.child,c,h,f,!1),Xc(o,s,h,I,f);else if(32&C){const A=sy(l,c);let N;for(;N=A();)Xc(o,s,h,N,f);Xc(o,s,h,I,f)}else 16&C?rf(s,o,c,l,h,f):Xc(o,s,h,I,f);l=y?l.projectionNext:l.next}}function Wu(s,o,l,c,h,f){py(l,c,s.firstChild,o,h,f,!1)}function rf(s,o,l,c,h,f){const y=l[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Xc(o,s,h,C[A],f);else py(s,o,C,y[3],h,f,!0)}function Gu(s,o,l){s.setAttribute(o,"style",l)}function sf(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function zD(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||s.charCodeAt(h+f)<=32)return h}l=h+1}}const gy="ng-template";function my(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==zD(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function W0(s){return 4===s.type&&s.value!==gy}function KD(s,o,l){return o===(4!==s.type||l?s.value:gy)}function ZD(s,o,l){let c=4;const h=s.attrs||[],f=function UM(s){for(let o=0;o<s.length;o++)if(qa(s[o]))return o;return s.length}(h);let y=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!KD(s,C,l)||""===C&&1===o.length){if(js(c))return!1;y=!0}}else{const A=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!my(s.attrs,A,l)){if(js(c))return!1;y=!0}continue}const U=YD(8&c?"class":C,h,W0(s),l);if(-1===U){if(js(c))return!1;y=!0;continue}if(""!==A){let Z;Z=U>f?"":h[U+1].toLowerCase();const re=8&c?Z:null;if(re&&-1!==zD(re,A,0)||2&c&&A!==Z){if(js(c))return!1;y=!0}}}}else{if(!y&&!js(c)&&!js(C))return!1;if(y&&js(C))continue;y=!1,c=C|1&c}}return js(c)||y}function js(s){return 0==(1&s)}function YD(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let f=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let I=o[++h];for(;"string"==typeof I;)I=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function G0(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function QD(s,o,l=!1){for(let c=0;c<o.length;c++)if(ZD(s,o[c],l))return!0;return!1}function JD(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function z0(s,o){return s?":not("+o.trim()+")":o}function q0(s){let o=s[0],l=1,c=2,h="",f=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&c){const I=s[++l];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!js(y)&&(o+=z0(f,h),h=""),c=y,f=f||!js(c);l++}return""!==h&&(o+=z0(f,h)),o}const Ht={};function K0(s){Z0(Kt(),Me(),Nn()+s,!1)}function Z0(s,o,l,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Yo(o,f,l)}else{const f=s.preOrderHooks;null!==f&&Qo(o,f,0,l)}ls(l)}function Pg(s,o=null,l=null,c){const h=af(s,o,l,c);return h.resolveInjectorInitializers(),h}function af(s,o=null,l=null,c,h=new Set){const f=[l||bt,yD(s)];return c=c||("object"==typeof s?void 0:he(s)),new H_(f,o||ug(),c||null,h)}let zu=(()=>{class s{static create(l,c){if(Array.isArray(l))return Pg({name:""},c,l,"");{const h=l.name??"";return Pg({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=fo,s.NULL=new a0,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>xn(s0)}),s.__NG_ELEMENT_ID__=-1,s})();function sl(s,o=Ye.Default){const l=Me();return null===l?xn(s,o):na(sr(),l,J(s),o)}function kg(){throw new Error("invalid")}function Og(s,o){return s<<17|o<<2}function Io(s){return s>>17&32767}function Ey(s){return 2|s}function ol(s){return(131068&s)>>2}function Cy(s,o){return-131069&s|o<<2}function nd(s){return 1|s}function Ny(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],f=l[c+1];if(-1!==f){const y=s.data[f];Eu(h),y.contentQueries(2,o[f],f)}}}function jg(s,o,l,c,h,f,y,I,C,A,N){const U=o.blueprint.slice();return U[0]=h,U[2]=76|c,(null!==N||s&&1024&s[2])&&(U[2]|=1024),La(U),U[3]=U[15]=s,U[8]=l,U[10]=y||s&&s[10],U[11]=I||s&&s[11],U[12]=C||s&&s[12]||null,U[9]=A||s&&s[9]||null,U[6]=f,U[20]=function RD(){return xD++}(),U[21]=N,U[16]=2==o.type?s[16]:U,U}function ad(s,o,l,c,h){let f=s.data[o];if(null===f)f=function ky(s,o,l,c,h){const f=zo(),y=Tl(),C=s.data[o]=function fE(s,o,l,c,h,f){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,l,c,h),function Ic(){return Nt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=l,f.value=c,f.attrs=h;const y=function Cl(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Br(f,!0),f}function ld(s,o,l,c){if(0===l)return-1;const h=o.length;for(let f=0;f<l;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Oy(s,o,l){Zo(o);try{const c=s.viewQuery;null!==c&&pf(1,c,l);const h=s.template;null!==h&&dE(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ny(s,o),s.staticViewQueries&&pf(2,s.viewQuery,l);const f=s.components;null!==f&&function yS(s,o){for(let l=0;l<o.length;l++)Wy(s,o[l])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ms()}}function Hg(s,o,l,c){const h=o[2];if(128!=(128&h)){Zo(o);try{La(o),function Ha(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&dE(s,o,l,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&Yo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Qo(o,A,0,null),Sc(o,0)}if(function lN(s){for(let o=Eg(s);null!==o;o=Cg(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],f=h[3];0==(512&h[2])&&Hn(f,1),h[2]|=512}}}(o),function aN(s){for(let o=Eg(s);null!==o;o=Cg(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];Ps(c)&&Hg(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Ny(s,o),y){const A=s.contentCheckHooks;null!==A&&Yo(o,A)}else{const A=s.contentHooks;null!==A&&Qo(o,A,1),Sc(o,1)}!function od(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)ls(~h);else{const f=h,y=l[++c],I=l[++c];Ec(y,f),I(2,o[f])}}}finally{ls(-1)}}(s,o);const I=s.components;null!==I&&function _S(s,o){for(let l=0;l<o.length;l++)qg(s,o[l])}(o,I);const C=s.viewQuery;if(null!==C&&pf(2,C,c),y){const A=s.viewCheckHooks;null!==A&&Yo(o,A)}else{const A=s.viewHooks;null!==A&&Qo(o,A,2),Sc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Hn(o[3],-1))}finally{Ms()}}}function dE(s,o,l,c,h){const f=Nn(),y=2&c;try{ls(-1),y&&o.length>22&&Z0(s,o,22,!1),l(c,h)}finally{ls(f)}}function hf(s,o,l){if(ko(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,l[f],f)}}}function $g(s,o,l){!io()||(function gE(s,o,l,c){const h=l.directiveStart,f=l.directiveEnd;s.firstCreatePass||cs(l,o),Hr(c,o);const y=l.initialInputs;for(let I=h;I<f;I++){const C=s.data[I],A=Kr(C);A&&TS(o,l,C);const N=Bi(o,s,I,l);Hr(N,o),null!==y&&bS(0,I-h,N,C,0,y),A&&(on(l.index,o)[8]=N)}}(s,o,l,Cr(l,o)),128==(128&l.flags)&&function Hy(s,o,l){const c=l.directiveStart,h=l.directiveEnd,f=l.index,y=function Eh(){return Nt.lFrame.currentDirectiveIndex}();try{ls(f);for(let I=c;I<h;I++){const C=s.data[I],A=o[I];Ko(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&ud(C,A)}}finally{ls(-1),Ko(y)}}(s,o,l))}function Wg(s,o,l=Cr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],I=-1===y?l(o,s):s[y];s[h++]=I}}}function Gg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ly(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ly(s,o,l,c,h,f,y,I,C,A){const N=22+c,U=N+h,Z=function vS(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Ht);return l}(N,U),re="function"==typeof A?A():A;return Z[1]={type:s,blueprint:Z,template:l,queries:null,viewQuery:I,declTNode:o,data:Z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:re,incompleteFirstPass:!1}}function Fy(s,o,l,c){const h=vE(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&hd(s).push(c,h.length-1))}function Uy(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function Vy(s,o){const c=o.directiveEnd,h=s.data,f=o.attrs,y=[];let I=null,C=null;for(let A=o.directiveStart;A<c;A++){const N=h[A],U=N.inputs,Z=null===f||W0(o)?null:oN(U,f);y.push(Z),I=Uy(U,A,I),C=Uy(N.outputs,A,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=I,o.outputs=C}function ms(s,o,l,c,h,f,y,I){const C=Cr(o,l);let N,A=o.inputs;!I&&null!=A&&(N=A[c])?(wE(s,l,N,c,h),pu(o)&&wS(l,o.index)):3&o.type&&(c=function tN(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}function wS(s,o){const l=on(o,s);16&l[2]||(l[2]|=32)}function By(s,o,l,c){let h=!1;if(io()){const f=function iN(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];QD(l,y.selectors,!1)&&(h||(h=[]),oo(cs(l,o),s,y.type),Kr(y)?(zg(s,l),h.unshift(y)):h.push(y))}return h}(s,o,l),y=null===c?null:{"":-1};if(null!==f){h=!0,CS(l,s.data.length,f.length);for(let N=0;N<f.length;N++){const U=f[N];U.providersResolver&&U.providersResolver(U)}let I=!1,C=!1,A=ld(s,o,f.length,null);for(let N=0;N<f.length;N++){const U=f[N];l.mergedAttrs=Ka(l.mergedAttrs,U.hostAttrs),mE(s,l,o,A,U),ES(A,U,y),null!==U.contentQueries&&(l.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(l.flags|=128);const Z=U.type.prototype;!I&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),I=!0),!C&&(Z.ngOnChanges||Z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),A++}Vy(s,l)}y&&function sN(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const f=l[o[h+1]];if(null==f)throw new Te(-301,!1);c.push(o[h],f)}}}(l,c,y)}return l.mergedAttrs=Ka(l.mergedAttrs,l.attrs),h}function jy(s,o,l,c,h,f){const y=f.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const C=~o.index;(function IS(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(I)!=C&&I.push(C),I.push(c,h,y)}}function ud(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function zg(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ES(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Kr(o)&&(l[""]=s)}}function CS(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function mE(s,o,l,c,h){s.data[c]=h;const f=h.factory||(h.factory=Er(h.type)),y=new ui(f,Kr(h),sl);s.blueprint[c]=y,l[c]=y,jy(s,o,0,c,ld(s,l,h.hostVars,Ht),h)}function TS(s,o,l){const c=Cr(o,s),h=Gg(l),f=s[10],y=cd(s,jg(s,h,null,l.onPush?32:16,c,o,f,f.createRenderer(c,l),null,null,null));s[o.index]=y}function ll(s,o,l,c,h,f){const y=Cr(s,o);!function _E(s,o,l,c,h,f,y){if(null==f)s.removeAttribute(o,h,l);else{const I=null==y?Ee(f):y(f,c||"",h);s.setAttribute(o,h,I,l)}}(o[11],y,f,s.value,l,c,h)}function bS(s,o,l,c,h,f){const y=f[o];if(null!==y){const I=c.setInput;for(let C=0;C<y.length;){const A=y[C++],N=y[C++],U=y[C++];null!==I?c.setInput(l,U,A,N):l[N]=U}}}function oN(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function DS(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function qg(s,o){const l=on(o,s);if(Ps(l)){const c=l[1];48&l[2]?Hg(c,l,c.template,l[8]):l[5]>0&&$y(l)}}function $y(s){for(let c=Eg(s);null!==c;c=Cg(c))for(let h=10;h<c.length;h++){const f=c[h];if(Ps(f))if(512&f[2]){const y=f[1];Hg(y,f,y.template,f[8])}else f[5]>0&&$y(f)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=on(l[c],s);Ps(h)&&h[5]>0&&$y(h)}}function Wy(s,o){const l=on(o,s),c=l[1];(function Gy(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Oy(c,l,l[8])}function cd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ff(s){for(;s;){s[2]|=32;const o=Jc(s);if(gu(s)&&!o)return s;s=o}return null}function dd(s,o,l,c=!0){const h=o[10];h.begin&&h.begin();try{Hg(s,o,s.template,l)}catch(y){throw c&&AS(o,y),y}finally{h.end&&h.end()}}function pf(s,o,l){Eu(0),o(s,l)}function vE(s){return s[7]||(s[7]=[])}function hd(s){return s.cleanup||(s.cleanup=[])}function AS(s,o){const l=s[9],c=l?l.get(Xh,null):null;c&&c.handleError(o)}function wE(s,o,l,c,h){for(let f=0;f<l.length;){const y=l[f++],I=l[f++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,h,c,I):C[I]=h}}function gf(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?f=I:1==f?h=ve(h,I):2==f&&(c=ve(c,I+": "+o[++y]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}function zy(s,o,l,c,h=!1){for(;null!==l;){const f=o[l.index];if(null!==f&&c.push(Ln(f)),si(f))for(let I=10;I<f.length;I++){const C=f[I],A=C[1].firstChild;null!==A&&zy(C[1],C,A,c)}const y=l.type;if(8&y)zy(s,o,l.child,c);else if(32&y){const I=sy(l,o);let C;for(;C=I();)c.push(C)}else if(16&y){const I=fy(o,l);if(Array.isArray(I))c.push(...I);else{const C=Jc(o[16]);zy(C[1],C,I,c,!0)}}l=h?l.projectionNext:l.next}return c}class Zg{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return zy(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(si(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(uy(o,c),Tr(l,c))}this._attachedToViewContainer=!1}nf(this._lView[1],this._lView)}onDestroy(o){Fy(this._lView[1],this._lView,null,o)}markForCheck(){ff(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function N0(s,o){Wu(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=o}}class IE extends Zg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;dd(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class EE extends Hu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=M(o);return new Yg(l,this.ngModule)}}function xS(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class uN{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,c){const h=this.injector.get(o,q_,c);return h!==q_||l===q_?h:this.parentInjector.get(o,l,c)}}class Yg extends G_{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function XD(s){return s.map(q0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return xS(this.componentDef.inputs)}get outputs(){return xS(this.componentDef.outputs)}create(o,l,c,h){let f=(h=h||this.ngModule)instanceof va?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new uN(o,f):o,I=y.get(ED,null);if(null===I)throw new Te(407,!1);const C=y.get(z_,null),A=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",U=c?function hE(s,o,l){return s.selectRootElement(o,l===_t.ShadowDom)}(A,c,this.componentDef.encapsulation):Tg(A,N,function CE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),Z=this.componentDef.onPush?288:272,re=Ly(0,null,null,1,0,null,null,null,null,null),be=jg(null,re,null,Z,null,null,I,A,C,y,null);let We,qe;Zo(be);try{const ct=function hN(s,o,l,c,h,f){const y=l[1];l[22]=s;const C=ad(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(gf(C,A,!0),null!==s&&(us(h,s,A),null!==C.classes&&sf(h,s,C.classes),null!==C.styles&&Gu(h,s,C.styles)));const N=c.createRenderer(s,o),U=jg(l,Gg(o),null,o.onPush?32:16,l[22],C,c,N,f||null,null,null);return y.firstCreatePass&&(oo(cs(C,l),y,o.type),zg(y,C),CS(C,l.length,1)),cd(l,U),l[22]=U}(U,this.componentDef,be,I,A);if(U)if(c)us(A,U,["ng-version",y0.full]);else{const{attrs:Tt,classes:ke}=function eS(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===h?""!==f&&o.push(f,s[++c]):8===h&&l.push(f);else{if(!js(h))break;h=f}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Tt&&us(A,U,Tt),ke&&ke.length>0&&sf(A,U,ke.join(" "))}if(qe=$o(re,22),void 0!==l){const Tt=qe.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const Mt=l[ke];Tt.push(null!=Mt?Array.from(Mt):null)}}We=function fN(s,o,l,c){const h=l[1],f=function rN(s,o,l){const c=sr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),mE(s,c,o,ld(s,o,1,null),l),Vy(s,c));const h=Bi(o,s,c.directiveStart,c);Hr(h,o);const f=Cr(c,o);return f&&Hr(f,o),h}(h,l,o);if(s[8]=l[8]=f,null!==c)for(const I of c)I(f,o);if(o.contentQueries){const I=sr();o.contentQueries(1,f,I.directiveStart)}const y=sr();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ls(y.index),jy(l[1],y,0,y.directiveStart,y.directiveEnd,o),ud(o,f)),f}(ct,this.componentDef,be,[pN]),Oy(re,be,null)}finally{Ms()}return new dN(this.componentType,We,qc(qe,be),be,qe)}}class dN extends class f0{}{constructor(o,l,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=l,this.hostView=this.changeDetectorRef=new IE(h),this.componentType=o}setInput(o,l){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const f=this._rootLView;wE(f[1],f,h,o,l),wS(f,this._tNode.index)}}get injector(){return new ia(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function pN(){const s=sr();bl(Me()[1],s)}let Qg=null;function qu(){if(!Qg){const s=xt.Symbol;if(s&&s.iterator)Qg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Qg=c)}}}return Qg}function jl(s){return!!bE(s)&&(Array.isArray(s)||!(s instanceof Map)&&qu()in s)}function bE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function cl(s,o,l){return s[o]=l}function ti(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Ku(s,o,l,c){const h=ti(s,o,l);return ti(s,o+1,c)||h}function Hs(s,o,l,c,h,f){const y=Ku(s,o,l,c);return Ku(s,o+2,h,f)||y}function Ky(s,o,l,c){const h=Me();return ti(h,$a(),o)&&(Kt(),ll(kn(),h,s,o,l,c)),Ky}function gd(s,o,l,c){return ti(s,$a(),l)?o+Ee(l)+c:Ht}function Zy(s,o,l,c,h,f,y,I){const C=Me(),A=Kt(),N=s+22,U=A.firstCreatePass?function EN(s,o,l,c,h,f,y,I,C){const A=o.consts,N=ad(o,s,4,y||null,li(A,I));By(o,l,N,li(A,C)),bl(o,N);const U=N.tViews=Ly(2,N,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),U.queries=o.queries.embeddedTView(N)),N}(N,A,C,o,l,c,h,f,y):A.data[N];Br(U,!1);const Z=C[11].createComment("");Ag(A,C,Z,U),Hr(Z,C),cd(C,C[N]=DS(Z,C,Z,U)),ka(U)&&$g(A,C,U),null!=y&&Wg(C,U,I)}function OE(s){return function Ui(s,o){return s[o]}(function ja(){return Nt.lFrame.contextLView}(),22+s)}function LE(s,o,l){const c=Me();return ti(c,$a(),o)&&ms(Kt(),kn(),c,s,o,c[11],l,!1),LE}function Yy(s,o,l,c,h){const y=h?"class":"style";wE(s,l,o.inputs[y],y,c)}function Hl(s,o,l,c){const h=Me(),f=Kt(),y=22+s,I=h[11],C=h[y]=Tg(I,o,function bu(){return Nt.lFrame.currentNamespace}()),A=f.firstCreatePass?function LS(s,o,l,c,h,f,y){const I=o.consts,A=ad(o,s,2,h,li(I,f));return By(o,l,A,li(I,y)),null!==A.attrs&&gf(A,A.attrs,!1),null!==A.mergedAttrs&&gf(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,h,0,o,l,c):f.data[y];Br(A,!0);const N=A.mergedAttrs;null!==N&&us(I,C,N);const U=A.classes;null!==U&&sf(I,C,U);const Z=A.styles;return null!==Z&&Gu(I,C,Z),64!=(64&A.flags)&&Ag(f,h,C,A),0===function Ua(){return Nt.lFrame.elementDepthCount}()&&Hr(C,h),function wc(){Nt.lFrame.elementDepthCount++}(),ka(A)&&($g(f,h,A),hf(f,A,h)),null!==c&&Wg(h,A),Hl}function Xg(){let s=sr();Tl()?qo():(s=s.parent,Br(s,!1));const o=s;!function Va(){Nt.lFrame.elementDepthCount--}();const l=Kt();return l.firstCreatePass&&(bl(l,s),ko(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Sl(s){return 0!=(16&s.flags)}(o)&&Yy(l,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Al(s){return 0!=(32&s.flags)}(o)&&Yy(l,o,Me(),o.stylesWithoutHost,!1),Xg}function Qy(s,o,l,c){return Hl(s,o,l,c),Xg(),Qy}function em(s,o,l){const c=Me(),h=Kt(),f=s+22,y=h.firstCreatePass?function FS(s,o,l,c,h){const f=o.consts,y=li(f,c),I=ad(o,s,8,"ng-container",y);return null!==y&&gf(I,y,!0),By(o,l,I,li(f,h)),null!==o.queries&&o.queries.elementStart(o,I),I}(f,h,c,o,l):h.data[f];Br(y,!0);const I=c[f]=c[11].createComment("");return Ag(h,c,I,y),Hr(I,c),ka(y)&&($g(h,c,y),hf(h,y,c)),null!=l&&Wg(c,y),em}function tm(){let s=sr();const o=Kt();return Tl()?qo():(s=s.parent,Br(s,!1)),o.firstCreatePass&&(bl(o,s),ko(s)&&o.queries.elementEnd(s)),tm}function Jy(s,o,l){return em(s,o,l),tm(),Jy}function FE(){return Me()}function Xy(s){return!!s&&"function"==typeof s.then}function UE(s){return!!s&&"function"==typeof s.subscribe}const VE=UE;function ev(s,o,l,c){const h=Me(),f=Kt(),y=sr();return function jE(s,o,l,c,h,f,y,I){const C=ka(c),N=s.firstCreatePass&&hd(s),U=o[8],Z=vE(o);let re=!0;if(3&c.type||I){const qe=Cr(c,o),ct=I?I(qe):qe,Tt=Z.length,ke=I?vn=>I(Ln(vn[c.index])):c.index;let Mt=null;if(!I&&C&&(Mt=function US(s,o,l,c){const h=s.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===l&&h[f+1]===c){const I=o[7],C=h[f+2];return I.length>C?I[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,h,c.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=f,Mt.__ngLastListenerFn__=f,re=!1;else{f=$E(c,o,U,f,!1);const vn=l.listen(ct,h,f);Z.push(f,vn),N&&N.push(h,ke,Tt,Tt+1)}}else f=$E(c,o,U,f,!1);const be=c.outputs;let We;if(re&&null!==be&&(We=be[h])){const qe=We.length;if(qe)for(let ct=0;ct<qe;ct+=2){const tr=o[We[ct]][We[ct+1]].subscribe(f),ec=Z.length;Z.push(f,tr),N&&N.push(h,c.index,ec,-(ec+1))}}}(f,h,h[11],y,s,o,0,c),ev}function HE(s,o,l,c){try{return!1!==l(c)}catch(h){return AS(s,h),!1}}function $E(s,o,l,c,h){return function f(y){if(y===Function)return c;ff(2&s.flags?on(s.index,o):o);let C=HE(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)C=HE(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function WE(s=1){return function Ns(s){return(Nt.lFrame.contextLView=function bc(s,o){for(;s>0;)o=o[15],s--;return o}(s,Nt.lFrame.contextLView))[8]}(s)}function VS(s,o){let l=null;const c=function Rg(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const f=o[h];if("*"!==f){if(null===c?QD(s,f,!0):JD(c,f))return h}else l=h}return l}function Cd(s){const o=Me()[16][6];if(!o.projection){const c=o.projection=co(s?s.length:1,null),h=c.slice();let f=o.child;for(;null!==f;){const y=s?VS(f,s):0;null!==y&&(h[y]?h[y].projectionNext=f:c[y]=f,h[y]=f),f=f.next}}}function BS(s,o=0,l){const c=Me(),h=Kt(),f=ad(h,22+s,16,null,l||null);null===f.projection&&(f.projection=o),qo(),64!=(64&f.flags)&&function H0(s,o,l){rf(o[11],0,o,l,O0(s,l,o),br(l.parent||o[6],l,o))}(h,c,f)}function GE(s,o,l){return zE(s,"",o,"",l),GE}function zE(s,o,l,c,h){const f=Me(),y=gd(f,o,l,c);return y!==Ht&&ms(Kt(),kn(),f,s,y,f[11],h,!1),zE}function WS(s,o,l,c,h){const f=s[l+1],y=null===o;let I=c?Io(f):ol(f),C=!1;for(;0!==I&&(!1===C||y);){const N=s[I+1];rv(s[I],o)&&(C=!0,s[I+1]=c?nd(N):Ey(N)),I=c?Io(N):ol(N)}C&&(s[l+1]=c?Ey(f):nd(f))}function rv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Hi(s,o)>=0}const Dr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iv(s){return s.substring(Dr.key,Dr.keyEnd)}function JE(s,o){const l=Dr.textEnd;return l===o?-1:(o=Dr.keyEnd=function Td(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Dr.key=o,l),Wl(s,o,l))}function Wl(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function Eo(s){!function qi(s,o,l,c){const h=Kt(),f=function as(s){const o=Nt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);h.firstUpdatePass&&function Ta(s,o,l,c){const h=s.data;if(null===h[l+1]){const f=h[Nn()],y=eC(s,l);im(f,c)&&null===o&&!y&&(o=!1),o=function ba(s,o,l,c){const h=function Iu(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=bd(l=yf(null,s,o,l,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(l=yf(h,s,o,l,c),null===f){let C=function Zu(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==ol(c))return s[Io(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=yf(null,s,o,C[1],c),C=bd(C,o.attrs,c),function qS(s,o,l,c){s[Io(l?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else f=function _f(s,o,l){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=bd(c,s[f].hostAttrs,l);return bd(c,o.attrs,l)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),l}(h,f,o,c),function HS(s,o,l,c,h,f){let y=f?o.classBindings:o.styleBindings,I=Io(y),C=ol(y);s[c]=l;let N,A=!1;if(Array.isArray(l)){const U=l;N=U[1],(null===N||Hi(U,N)>0)&&(A=!0)}else N=l;if(h)if(0!==C){const Z=Io(s[I+1]);s[c+1]=Og(Z,I),0!==Z&&(s[Z+1]=Cy(s[Z+1],c)),s[I+1]=function uS(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Og(I,0),0!==I&&(s[I+1]=Cy(s[I+1],c)),I=c;else s[c+1]=Og(C,0),0===I?I=c:s[C+1]=Cy(s[C+1],c),C=c;A&&(s[c+1]=Ey(s[c+1])),WS(s,N,c,!0),WS(s,N,c,!1),function $S(s,o,l,c,h){const f=h?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&Hi(f,o)>=0&&(l[c+1]=nd(l[c+1]))}(o,N,s,c,f),y=Og(I,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,l,y,c)}}(h,null,f,c);const y=Me();if(l!==Ht&&ti(y,f,l)){const I=h.data[Nn()];if(im(I,c)&&!eC(h,f)){let C=c?I.classesWithoutHost:I.stylesWithoutHost;null!==C&&(l=ve(C,l||"")),Yy(h,I,y,l,c)}else!function KS(s,o,l,c,h,f,y,I){h===Ht&&(h=bt);let C=0,A=0,N=0<h.length?h[0]:null,U=0<f.length?f[0]:null;for(;null!==N||null!==U;){const Z=C<h.length?h[C+1]:void 0,re=A<f.length?f[A+1]:void 0;let We,be=null;N===U?(C+=2,A+=2,Z!==re&&(be=U,We=re)):null===U||null!==N&&N<U?(C+=2,be=N):(A+=2,be=U,We=re),null!==be&&tC(s,o,l,c,be,We,y,I),N=C<h.length?h[C]:null,U=A<f.length?f[A]:null}}(h,I,y,y[11],y[f+1],y[f+1]=function Wr(s,o,l){if(null==l||""===l)return bt;const c=[],h=Us(l);if(Array.isArray(h))for(let f=0;f<h.length;f++)s(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&s(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,f)}}(st,Zn,s,!0)}function Zn(s,o){for(let l=function QE(s){return function $l(s){Dr.key=0,Dr.keyEnd=0,Dr.value=0,Dr.valueEnd=0,Dr.textEnd=s.length}(s),JE(s,Wl(s,0,Dr.textEnd))}(o);l>=0;l=JE(o,l))st(s,iv(o),!0)}function eC(s,o){return o>=s.expandoStartIndex}function yf(s,o,l,c,h){let f=null;const y=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<y&&(f=o[I],c=bd(c,f.hostAttrs,h),f!==s);)I++;return null!==s&&(l.directiveStylingLast=I),c}function bd(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),st(s,y,!!l||o[++f]))}return void 0===s?null:s}function tC(s,o,l,c,h,f,y,I){if(!(3&o.type))return;const C=s.data,A=C[I+1];rm(function hi(s){return 1==(1&s)}(A)?nC(C,o,l,h,ol(A),y):void 0)||(rm(f)||function Iy(s){return 2==(2&s)}(A)&&(f=nC(C,null,l,h,I,y)),function $0(s,o,l,c,h){if(o)h?s.addClass(l,c):s.removeClass(l,c);else{let f=-1===c.indexOf("-")?void 0:wa.DashCase;null==h?s.removeStyle(l,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=wa.Important),s.setStyle(l,c,h,f))}}(c,y,Ei(Nn(),l),h,f))}function nC(s,o,l,c,h,f){const y=null===o;let I;for(;h>0;){const C=s[h],A=Array.isArray(C),N=A?C[1]:C,U=null===N;let Z=l[h+1];Z===Ht&&(Z=U?bt:void 0);let re=U?Xa(Z,c):N===c?Z:void 0;if(A&&!rm(re)&&(re=Xa(C,c)),rm(re)&&(I=re,y))return I;const be=s[h+1];h=y?Io(be):ol(be)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(I=Xa(C,c))}return I}function rm(s){return void 0!==s}function im(s,o){return 0!=(s.flags&(o?16:32))}function vf(s,o=""){const l=Me(),c=Kt(),h=s+22,f=c.firstCreatePass?ad(c,h,1,o,null):c.data[h],y=l[h]=function ay(s,o){return s.createText(o)}(l[11],o);Ag(c,l,y,f),Br(f,!1)}function zl(s){return sm("",s,""),zl}function sm(s,o,l){const c=Me(),h=gd(c,s,o,l);return h!==Ht&&function ul(s,o,l){const c=Ei(o,s);!function P0(s,o,l){s.setValue(o,l)}(s[11],c,l)}(c,Nn(),h),sm}const ql=void 0;var tA=["en",[["a","p"],["AM","PM"],ql],[["AM","PM"],ql,ql],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ql,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ql,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ql,"{1} 'at' {0}",ql],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eA(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Ad={};function If(s){const o=function nA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Ef(o);if(l)return l;const c=o.split("-")[0];if(l=Ef(c),l)return l;if("en"===c)return tA;throw new Te(701,!1)}function IC(s){return If(s)[Dt.PluralCase]}function Ef(s){return s in Ad||(Ad[s]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[s]),Ad[s]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const xd="en-US";let Tv=xd;class Od{}class Mf{}function mA(s,o){return new jC(s,o??null)}class jC extends Od{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new EE(this);const c=rt(o);this._bootstrapComponents=il(c.bootstrap),this._r3Injector=af(o,l,[{provide:Od,useValue:this},{provide:Hu,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Nf extends Mf{constructor(o){super(),this.moduleType=o}create(o){return new jC(this.moduleType,o)}}class _A extends Od{constructor(o,l,c){super(),this.componentFactoryResolver=new EE(this),this.instance=null;const h=new H_([...o,{provide:Od,useValue:this},{provide:Hu,useValue:this.componentFactoryResolver}],l||ug(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function kf(s,o,l=null){return new _A(s,o,l).injector}let yA=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=l0(0,l.type),h=c.length>0?kf([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=rn({token:s,providedIn:"environment",factory:()=>new s(xn(va))}),s})();function Of(s){s.getStandaloneInjector=o=>o.get(yA).getOrCreateStandaloneInjector(s)}function Fd(s,o,l,c){return function Vd(s,o,l,c,h,f){const y=o+l;return ti(s,y,h)?cl(s,y+1,f?c.call(f,h):c(h)):Ql(s,y+1)}(Me(),or(),s,o,l,c)}function Yl(s,o,l,c,h){return function Hv(s,o,l,c,h,f,y){const I=o+l;return Ku(s,I,h,f)?cl(s,I+2,y?c.call(y,h,f):c(h,f)):Ql(s,I+2)}(Me(),or(),s,o,l,c,h)}function hl(s,o,l,c,h,f,y){return function Jl(s,o,l,c,h,f,y,I,C){const A=o+l;return Hs(s,A,h,f,y,I)?cl(s,A+4,C?c.call(C,h,f,y,I):c(h,f,y,I)):Ql(s,A+4)}(Me(),or(),s,o,l,c,h,f,y)}function zC(s,o,l,c,h,f,y,I){const C=or()+s,A=Me(),N=Hs(A,C,l,c,h,f);return ti(A,C+4,y)||N?cl(A,C+5,I?o.call(I,l,c,h,f,y):o(l,c,h,f,y)):function fd(s,o){return s[o]}(A,C+5)}function Ql(s,o){const l=s[o];return l===Ht?void 0:l}function jf(s){return o=>{setTimeout(s,void 0,o)}}const Si=class Xl extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){let h=o,f=l||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=jf(f),h&&(h=jf(h)),y&&(y=jf(y)));const I=super.subscribe({next:h,error:f,complete:y});return o instanceof $.w0&&o.add(I),I}};function KC(){return this._results[qu()]()}class jd{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=qu(),c=jd.prototype;c[l]||(c[l]=KC)}get changes(){return this._changes||(this._changes=new Si)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=Sn(o);(this._changesDetected=!function Qr(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],f=o[c];if(l&&(h=l(h),f=l(f)),f!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Hf=(()=>{class s{}return s.__NG_ELEMENT_ID__=xA,s})();const SA=Hf,AA=class extends SA{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o,l){const c=this._declarationTContainer.tViews,h=jg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),Oy(c,h,o),new Zg(h)}};function xA(){return Dm(sr(),Me())}function Dm(s,o){return 4&s.type?new AA(o,s,qc(s,o)):null}let Sm=(()=>{class s{}return s.__NG_ELEMENT_ID__=RA,s})();function RA(){return QC(sr(),Me())}const ZC=Sm,Gv=class extends ZC{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return qc(this._hostTNode,this._hostLView)}get injector(){return new ia(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ya(this._hostTNode,this._hostLView);if(Sh(o)){const l=ks(o,this._hostLView),c=ar(o);return new ia(l[1].data[c+8],l)}return new ia(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=YC(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const y=o.createEmbeddedView(l||{},f);return this.insert(y,h),y}createComponent(o,l,c,h,f){const y=o&&!function ds(s){return"function"==typeof s}(o);let I;if(y)I=l;else{const U=l||{};I=U.index,c=U.injector,h=U.projectableNodes,f=U.environmentInjector||U.ngModuleRef}const C=y?o:new Yg(M(o)),A=c||this.parentInjector;if(!f&&null==C.ngModule){const Z=(y?A:this.parentInjector).get(va,null);Z&&(f=Z)}const N=C.create(A,h,void 0,f);return this.insert(N.hostView,I),N}insert(o,l){const c=o._lView,h=c[1];if(function vu(s){return si(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const U=c[3],Z=new Gv(U,U[6],U[3]);Z.detach(Z.indexOf(o))}}const f=this._adjustIndex(l),y=this._lContainer;!function HD(s,o,l,c){const h=10+c,f=l.length;c>0&&(l[h-1][4]=o),c<f-10?(o[4]=l[h],uo(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const y=o[17];null!==y&&l!==y&&function $D(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(h,c,y,f);const I=j0(f,y),C=c[11],A=Dg(C,y[7]);return null!==A&&function M0(s,o,l,c,h,f){c[0]=h,c[6]=o,Wu(s,c,l,1,h,f)}(h,y[6],C,c,A,I),o.attachToViewContainerRef(),uo(zv(y),f,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=YC(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=uy(this._lContainer,l);c&&(Tr(zv(this._lContainer),l),nf(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=uy(this._lContainer,l);return c&&null!=Tr(zv(this._lContainer),l)?new Zg(c):null}_adjustIndex(o,l=0){return o??this.length+l}};function YC(s){return s[8]}function zv(s){return s[8]||(s[8]=[])}function QC(s,o){let l;const c=o[s.index];if(si(c))l=c;else{let h;if(8&s.type)h=Ln(c);else{const f=o[11];h=f.createComment("");const y=Cr(s,o);Ia(f,Dg(f,y),h,function V0(s,o){return s.nextSibling(o)}(f,y),!1)}o[s.index]=l=DS(c,o,h,s),cd(o,l)}return new Gv(l,s,o)}class Hd{constructor(o){this.queryList=o,this.matches=null}clone(){return new Hd(this.queryList)}setDirty(){this.queryList.setDirty()}}class $f{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let f=0;f<c;f++){const y=l.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new $f(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Jv(o,l).matches&&this.queries[l].setDirty()}}class qv{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class $d{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==l?l.push(f):l=[f])}return null!==l?new $d(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Kv{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Kv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,l,Zv(l,f)),this.matchTNodeWithReadOption(o,l,Ja(l,o,f,!1,!1))}else c===Hf?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Ja(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===$u||h===Sm||h===Hf&&4&l.type)this.addMatch(l.index,-2);else{const f=Ja(l,o,h,!1,!1);null!==f&&this.addMatch(l.index,f)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function Zv(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function XC(s,o,l,c){return-1===l?function JC(s,o){return 11&s.type?qc(s,o):4&s.type?Dm(s,o):null}(o,s):-2===l?function NA(s,o,l){return l===$u?qc(o,s):l===Hf?Dm(o,s):l===Sm?QC(o,s):void 0}(s,o,c):Bi(s,s[1],l,o)}function eT(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const f=s.data,y=l.matches,I=[];for(let C=0;C<y.length;C+=2){const A=y[C];I.push(A<0?null:XC(o,f[A],y[C+1],l.metadata.read))}h.matches=I}return h.matches}function Am(s,o,l,c){const h=s.queries.getByIndex(l),f=h.matches;if(null!==f){const y=eT(s,o,h,l);for(let I=0;I<f.length;I+=2){const C=f[I];if(C>0)c.push(y[I/2]);else{const A=f[I+1],N=o[-C];for(let U=10;U<N.length;U++){const Z=N[U];Z[17]===Z[3]&&Am(Z[1],Z,A,c)}if(null!==N[9]){const U=N[9];for(let Z=0;Z<U.length;Z++){const re=U[Z];Am(re[1],re,A,c)}}}}}return c}function xm(s){const o=Me(),l=Kt(),c=Wa();Eu(c+1);const h=Jv(l,c);if(s.dirty&&function yu(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const f=h.crossesNgTemplate?Am(l,o,c,[]):eT(l,o,h,c);s.reset(f,m0),s.notifyOnChanges()}return!0}return!1}function tT(s,o,l,c){const h=Kt();if(h.firstCreatePass){const f=sr();(function Wf(s,o,l){null===s.queries&&(s.queries=new $d),s.queries.track(new Kv(o,l))})(h,new qv(o,l,c),f.index),function Qv(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function Yv(s,o,l){const c=new jd(4==(4&l));Fy(s,o,c,c.destroy),null===o[19]&&(o[19]=new $f),o[19].queries.push(new Hd(c))}(h,Me(),l)}function nT(){return function OA(s,o){return s[19].queries[o].queryList}(Me(),Wa())}function Jv(s,o){return s.queries.getByIndex(o)}function rT(s,o){return Dm(s,o)}function Um(...s){}const Vm=new Dn("Application Initializer");let zd=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Um,this.reject=Um,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(Xy(f))l.push(f);else if(VE(f)){const y=new Promise((I,C)=>{f.subscribe({complete:I,error:C})});l.push(y)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(xn(Vm,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const CT=new Dn("AppId",{providedIn:"root",factory:function ow(){return`${aw()}${aw()}${aw()}`}});function aw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lw=new Dn("Platform Initializer"),uw=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bm=new Dn("appBootstrapListener");let Xu=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Zf=new Dn("LocaleId",{providedIn:"root",factory:()=>T(Zf,Ye.Optional|Ye.SkipSelf)||function dw(){return typeof $localize<"u"&&$localize.locale||xd}()}),zA=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Yf{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let fw=(()=>{class s{compileModuleSync(l){return new Nf(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),f=il(rt(l).declarations).reduce((y,I)=>{const C=M(I);return C&&y.push(new Yg(C)),y},[]);return new Yf(c,f)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Jf=(()=>Promise.resolve(0))();function Ws(s){typeof Zone>"u"?Jf.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Gs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Si(!1),this.onMicrotaskEmpty=new Si(!1),this.onStable=new Si(!1),this.onError=new Si(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Xf(){let s=xt.requestAnimationFrame,o=xt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function np(s){const o=()=>{!function tp(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,pw(s),s.isCheckStableRunning=!0,ep(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),pw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,f,y,I)=>{try{return vs(s),l.invokeTask(h,f,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),gw(s)}},onInvoke:(l,c,h,f,y,I,C)=>{try{return vs(s),l.invoke(h,f,y,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),gw(s)}},onHasTask:(l,c,h,f)=>{l.hasTask(h,f),c===h&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,pw(s),ep(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(l,c,h,f)=>(l.handleError(h,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gs.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(Gs.isInAngularZone())throw new Te(909,!1)}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,bT,Um,Um);try{return f.runTask(y,l,c)}finally{f.cancelTask(y)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const bT={};function ep(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function pw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function vs(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function gw(s){s._nesting--,ep(s)}class QA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Si,this.onMicrotaskEmpty=new Si,this.onStable=new Si,this.onError=new Si}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}const rp=new Dn(""),mw=new Dn("");let Hm,ws=(()=>{class s{constructor(l,c,h){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Hm||(function JA(s){Hm=s}(h),h.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gs.assertNotInAngularZone(),Ws(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ws(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:f,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(xn(Gs),xn(_w),xn(mw))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),_w=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return Hm?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),nu=null;const DT=new Dn("AllowMultipleToken"),yw=new Dn("PlatformDestroyListeners");class ex{constructor(o,l){this.name=o,this.token=l}}function RT(s,o,l=[]){const c=`Platform: ${o}`,h=new Dn(c);return(f=[])=>{let y=ww();if(!y||y.injector.get(DT,!1)){const I=[...l,...f,{provide:h,useValue:!0}];s?s(I):function vw(s){if(nu&&!nu.get(DT,!1))throw new Te(400,!1);nu=s;const o=s.get(MT);(function AT(s){const o=s.get(lw,null);o&&o.forEach(l=>l())})(s)}(function PT(s=[],o){return zu.create({name:o,providers:[{provide:og,useValue:"platform"},{provide:yw,useValue:new Set([()=>nu=null])},...s]})}(I,c))}return function tx(s){const o=ww();if(!o)throw new Te(401,!1);return o}()}}function ww(){return nu?.get(MT)??null}let MT=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const h=function Wm(s,o){let l;return l="noop"===s?new QA:("zone.js"===s?void 0:s)||new Gs(o),l}(c?.ngZone,function NT(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Gs,useValue:h}];return h.run(()=>{const y=zu.create({providers:f,parent:this.injector,name:l.moduleType.name}),I=l.create(y),C=I.injector.get(Xh,null);if(!C)throw new Te(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:N=>{C.handleError(N)}});I.onDestroy(()=>{So(this._modules,I),A.unsubscribe()})}),function Iw(s,o,l){try{const c=l();return Xy(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,h,()=>{const A=I.injector.get(zd);return A.runInitializers(),A.donePromise.then(()=>(function bv(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(Tv=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Zf,xd)||xd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,c=[]){const h=kT({},c);return function ip(s,o,l){const c=new Nf(l);return Promise.resolve(c)}(0,0,l).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(l){const c=l.injector.get(fl);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Te(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(yw,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(xn(zu))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function kT(s,o){return Array.isArray(o)?o.reduce(kT,s):{...s,...o}}let fl=(()=>{class s{constructor(l,c,h){this._zone=l,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new k.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Gs.assertNotInAngularZone(),Ws(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Gs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(f,y.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const h=l instanceof G_;if(!this._injector.get(zd).done)throw!h&&Oe(l),new Te(405,false);let y;y=h?l:this._injector.get(Hu).resolveComponentFactory(l),this.componentTypes.push(y.componentType);const I=function ST(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Od),A=y.create(zu.NULL,[],c||y.selector,I),N=A.location.nativeElement,U=A.injector.get(rp,null);return U?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),So(this.components,A),U?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;So(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Bm,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>So(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Te(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(xn(Gs),xn(va),xn(Xh))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function So(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let sp=!0,LT=!1;function qd(){return LT=!0,sp}function rx(){if(LT)throw new Error("Cannot enable prod mode after platform setup.");sp=!1}let Gm=(()=>{class s{}return s.__NG_ELEMENT_ID__=Tw,s})();function Tw(s){return function bw(s,o,l){if(pu(s)&&!l){const c=on(s.index,o);return new Zg(c,c)}return 47&s.type?new Zg(o[16],o):null}(sr(),Me(),16==(16&s))}class HT{constructor(){}supports(o){return jl(o)}create(o){return new lx(o)}}const ax=(s,o)=>o;class lx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ax}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,f=null;for(;l||c;){const y=!c||l&&l.currentIndex<Km(c,h,f)?l:c,I=Km(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{f||(f=[]);const A=I-h,N=C-h;if(A!=N){for(let Z=0;Z<A;Z++){const re=Z<f.length?f[Z]:f[Z]=0,be=re+Z;N<=be&&be<A&&(f[Z]=re+1)}f[y.previousIndex]=N-A}}I!==C&&o(y,I,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!jl(o))throw new Te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)f=o[I],y=this._trackByFn(I,f),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,f,y,I)),Object.is(l.item,f)||this._addIdentityChange(l,f)):(l=this._mismatch(l,f,y,I),c=!0),l=l._next}else h=0,function IN(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[qu()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(h,I),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,I,y,h)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,y,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,f,h)):o=this._addAfter(new lp(l,c),f,h),o}_verifyReinsertion(o,l,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Zd),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zd),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class lp{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qm{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class Zd{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new qm,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Km(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class Sw{constructor(){}supports(o){return o instanceof Map||bE(o)}create(){return new $T}}class $T{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||bE(o)))throw new Te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const f=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,f)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new WT(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class WT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Aw(){return new Zm([new HT])}let Zm=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Aw()),deps:[[s,new St,new Ve]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Te(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Aw}),s})();function xw(){return new Rw([new Sw])}let Rw=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||xw()),deps:[[s,new St,new Ve]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new Te(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:xw}),s})();const hx=RT(null,"core",[]);let fx=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(xn(fl))},s.\u0275mod=Xt({type:s}),s.\u0275inj=Vt({}),s})();function px(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Re,F)=>{F.d(Re,{Z:()=>Te});var p=F(2090),$=F(4859),k=F(9681),se=F(1877);class le{constructor(Ee,ge){this._delegate=Ee,this.firebase=ge,(0,k._addComponent)(Ee,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Ee,ge=k._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(Ee);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Qe=Ze.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:ge})}_removeServiceInstance(Ee,ge=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(ge)}_addComponent(Ee){(0,k._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,k._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ve(){const tt=function he(tt){const Ee={},ge={__esModule:!0,initializeApp:function Le(ie,ue={}){const we=k.initializeApp(ie,ue);if((0,p.r3)(Ee,we.name))return Ee[we.name];const Q=new tt(we,ge);return Ee[we.name]=Q,Q},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(ie){const ue=ie.name,we=ue.replace("-compat","");if(k._registerComponent(ie)&&"PUBLIC"===ie.type){const Q=(ee=Ze())=>{if("function"!=typeof ee[we])throw pe.create("invalid-app-argument",{appName:ue});return ee[we]()};void 0!==ie.serviceProps&&(0,p.ZB)(Q,ie.serviceProps),ge[we]=Q,tt.prototype[we]=function(...ee){return this._getService.bind(this,ue).apply(this,ie.multipleInstances?ee:[])}}return"PUBLIC"===ie.type?ge[we]:null},removeApp:function Qe(ie){delete Ee[ie]},useAsService:function Ge(ie,ue){return"serverAuth"===ue?null:ue},modularAPIs:k}};function Ze(ie){if(!(0,p.r3)(Ee,ie=ie||k._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ie});return Ee[ie]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function Pe(){return Object.keys(Ee).map(ie=>Ee[ie])}}),Ze.App=tt,ge}(le);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ee(ge){(0,p.ZB)(tt,ge)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),tt}(),z=new se.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=K;!function Ne(tt){(0,k.registerVersion)("@firebase/app-compat","0.1.39",tt)}()},9681:(pt,Re,F)=>{F.r(Re),F.d(Re,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Li,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>nn,_addOrOverwriteComponent:()=>rn,_apps:()=>cn,_clearComponents:()=>ki,_components:()=>Cn,_getProvider:()=>Vt,_registerComponent:()=>zt,_removeServiceInstance:()=>Ir,deleteApp:()=>Fi,getApp:()=>jn,getApps:()=>wi,initializeApp:()=>Ur,onLog:()=>Yn,registerVersion:()=>rr,setLogLevel:()=>wn});var p=F(5861),$=F(4859),k=F(1877),se=F(2090),le=F(8766);class me{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function pe(Xe){return"VERSION"===Xe.getComponent()?.type}(et)){const It=et.getImmediate();return`${It.library}/${It.version}`}return null}).filter(et=>et).join(" ")}}const he="@firebase/app",K=new k.Yd("@firebase/app"),jt="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Cn=new Map;function nn(Xe,De){try{Xe.container.addComponent(De)}catch(et){K.debug(`Component ${De.name} failed to register with FirebaseApp ${Xe.name}`,et)}}function rn(Xe,De){Xe.container.addOrOverwriteComponent(De)}function zt(Xe){const De=Xe.name;if(Cn.has(De))return K.debug(`There were multiple attempts to register component ${De}.`),!1;Cn.set(De,Xe);for(const et of cn.values())nn(et,Xe);return!0}function Vt(Xe,De){const et=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Xe.container.getProvider(De)}function Ir(Xe,De,et=jt){Vt(Xe,De).clearInstance(et)}function ki(){Cn.clear()}const On=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Oi{constructor(De,et,It){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}const Li="9.14.0";function Ur(Xe,De={}){let et=Xe;"object"!=typeof De&&(De={name:De});const It=Object.assign({name:jt,automaticDataCollectionEnabled:!1},De),Ct=It.name;if("string"!=typeof Ct||!Ct)throw On.create("bad-app-name",{appName:String(Ct)});if(et||(et=(0,se.aH)()),!et)throw On.create("no-options");const Xt=cn.get(Ct);if(Xt){if((0,se.vZ)(et,Xt.options)&&(0,se.vZ)(It,Xt.config))return Xt;throw On.create("duplicate-app",{appName:Ct})}const q=new $.H0(Ct);for(const Y of Cn.values())q.addComponent(Y);const W=new Oi(et,It,q);return cn.set(Ct,W),W}function jn(Xe=jt){const De=cn.get(Xe);if(!De&&Xe===jt)return Ur();if(!De)throw On.create("no-app",{appName:Xe});return De}function wi(){return Array.from(cn.values())}function Fi(Xe){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(Xe){const De=Xe.name;cn.has(De)&&(cn.delete(De),yield Promise.all(Xe.container.getProviders().map(et=>et.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function rr(Xe,De,et){var It;let Ct=null!==(It=ze[Xe])&&void 0!==It?It:Xe;et&&(Ct+=`-${et}`);const Xt=Ct.match(/\s|\//),q=De.match(/\s|\//);if(Xt||q){const W=[`Unable to register library "${Ct}" with version "${De}":`];return Xt&&W.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Xt&&q&&W.push("and"),q&&W.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void K.warn(W.join(" "))}zt(new $.wA(`${Ct}-version`,()=>({library:Ct,version:De}),"VERSION"))}function Yn(Xe,De){if(null!==Xe&&"function"!=typeof Xe)throw On.create("invalid-log-argument");(0,k.Am)(Xe,De)}function wn(Xe){(0,k.Ub)(Xe)}const In="firebase-heartbeat-store";let Tn=null;function _n(){return Tn||(Tn=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,De)=>{0===De&&Xe.createObjectStore(In)}}).catch(Xe=>{throw On.create("idb-open",{originalErrorMessage:Xe.message})})),Tn}function _t(){return(_t=(0,p.Z)(function*(Xe){var De;try{return(yield _n()).transaction(In).objectStore(In).get(Qn(Xe))}catch(et){if(et instanceof se.ZR)K.warn(et.message);else{const It=On.create("idb-get",{originalErrorMessage:null===(De=et)||void 0===De?void 0:De.message});K.warn(It.message)}}})).apply(this,arguments)}function xt(Xe,De){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(Xe,De){var et;try{const Ct=(yield _n()).transaction(In,"readwrite");return yield Ct.objectStore(In).put(De,Qn(Xe)),Ct.done}catch(It){if(It instanceof se.ZR)K.warn(It.message);else{const Ct=On.create("idb-set",{originalErrorMessage:null===(et=It)||void 0===et?void 0:et.message});K.warn(Ct.message)}}})).apply(this,arguments)}function Qn(Xe){return`${Xe.name}!${Xe.options.appId}`}class Mr{constructor(De){this.container=De,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Yt(et),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var De=this;return(0,p.Z)(function*(){const It=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=kt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!De._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Ct))return De._heartbeatsCache.heartbeats.push({date:Ct,agent:It}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Xt=>{const q=new Date(Xt.date).valueOf();return Date.now()-q<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,p.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const et=kt(),{heartbeatsToSend:It,unsentEntries:Ct}=function zr(Xe,De=1024){const et=[];let It=Xe.slice();for(const Ct of Xe){const Xt=et.find(q=>q.agent===Ct.agent);if(Xt){if(Xt.dates.push(Ct.date),hr(et)>De){Xt.dates.pop();break}}else if(et.push({agent:Ct.agent,dates:[Ct.date]}),hr(et)>De){et.pop();break}It=It.slice(1)}return{heartbeatsToSend:et,unsentEntries:It}}(De._heartbeatsCache.heartbeats),Xt=(0,se.L)(JSON.stringify({version:2,heartbeats:It}));return De._heartbeatsCache.lastSentHeartbeatDate=et,Ct.length>0?(De._heartbeatsCache.heartbeats=Ct,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Xt})()}}function kt(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,p.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function mt(Xe){return _t.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var et=this;return(0,p.Z)(function*(){var It;if(yield et._canUseIndexedDBPromise){const Xt=yield et.read();return xt(et.app,{lastSentHeartbeatDate:null!==(It=De.lastSentHeartbeatDate)&&void 0!==It?It:Xt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var et=this;return(0,p.Z)(function*(){var It;if(yield et._canUseIndexedDBPromise){const Xt=yield et.read();return xt(et.app,{lastSentHeartbeatDate:null!==(It=De.lastSentHeartbeatDate)&&void 0!==It?It:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...De.heartbeats]})}})()}}function hr(Xe){return(0,se.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function An(Xe){zt(new $.wA("platform-logger",De=>new me(De),"PRIVATE")),zt(new $.wA("heartbeat",De=>new Mr(De),"PRIVATE")),rr(he,"0.8.4",Xe),rr(he,"0.8.4","esm2017"),rr("fire-js","")}("")},4859:(pt,Re,F)=>{F.d(Re,{H0:()=>he,wA:()=>k,zt:()=>le});var p=F(5861),$=F(2090);class k{constructor(K,z,J){this.name=K,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const se="[DEFAULT]";class le{constructor(K,z){this.name=K,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(z)){const J=new $.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:z});He&&J.resolve(He)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(K){var z;const J=this.normalizeInstanceIdentifier(K?.identifier),He=null!==(z=K?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ne){if(He)return null;throw Ne}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function pe(ve){return"EAGER"===ve.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(z);try{const Ne=this.getOrInitializeService({instanceIdentifier:He});J.resolve(Ne)}catch{}}}}clearInstance(K=se){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,p.Z)(function*(){const z=Array.from(K.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=se){return this.instances.has(K)}getOptions(K=se){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:z={}}=K,J=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[Ne,Te]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ne)&&Te.resolve(He);return He}onInit(K,z){var J;const He=this.normalizeInstanceIdentifier(z),Ne=null!==(J=this.onInitCallbacks.get(He))&&void 0!==J?J:new Set;Ne.add(K),this.onInitCallbacks.set(He,Ne);const Te=this.instances.get(He);return Te&&K(Te,He),()=>{Ne.delete(K)}}invokeOnInitCallbacks(K,z){const J=this.onInitCallbacks.get(z);if(J)for(const He of J)try{He(K,z)}catch{}}getOrInitializeService({instanceIdentifier:K,options:z={}}){let J=this.instances.get(K);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=K,ve===se?void 0:ve),options:z}),this.instances.set(K,J),this.instancesOptions.set(K,z),this.invokeOnInitCallbacks(J,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,J)}catch{}var ve;return J||null}normalizeInstanceIdentifier(K=se){return this.component?this.component.multipleInstances?K:se:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const z=this.getProvider(K.name);if(z.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);z.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const z=new le(K,this);return this.providers.set(K,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Re,F)=>{F.d(Re,{Am:()=>ve,Ub:()=>he,Yd:()=>pe,in:()=>$});const p=[];var $=(()=>{return(K=$||($={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",$;var K})();const k={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,le={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},me=(K,z,...J)=>{if(z<K.logLevel)return;const He=(new Date).toISOString(),Ne=le[z];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ne](`[${He}]  ${K.name}:`,...J)};class pe{constructor(z){this.name=z,this._logLevel=se,this._logHandler=me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function he(K){p.forEach(z=>{z.setLogLevel(K)})}function ve(K,z){for(const J of p){let He=null;z&&z.level&&(He=k[z.level]),J.userLogHandler=null===K?null:(Ne,Te,...tt)=>{const Ee=tt.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");Te>=(He??Ne.logLevel)&&K({level:$[Te].toLowerCase(),message:Ee,args:tt,type:Ne.name})}}}},8766:(pt,Re,F)=>{F.d(Re,{Lj:()=>Le,X3:()=>Ze});var p=F(5861);let k,se;const pe=new WeakMap,he=new WeakMap,ve=new WeakMap,K=new WeakMap,z=new WeakMap;let Ne={get(ue,we,Q){if(ue instanceof IDBTransaction){if("done"===we)return he.get(ue);if("objectStoreNames"===we)return ue.objectStoreNames||ve.get(ue);if("store"===we)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return ge(ue[we])},set:(ue,we,Q)=>(ue[we]=Q,!0),has:(ue,we)=>ue instanceof IDBTransaction&&("done"===we||"store"===we)||we in ue};function Ee(ue){return"function"==typeof ue?function tt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...we){return ue.apply(Qe(this),we),ge(pe.get(this))}:function(...we){return ge(ue.apply(Qe(this),we))}:function(we,...Q){const ee=ue.call(Qe(this),we,...Q);return ve.set(ee,we.sort?we.sort():[we]),ge(ee)}}(ue):(ue instanceof IDBTransaction&&function He(ue){if(he.has(ue))return;const we=new Promise((Q,ee)=>{const fe=()=>{ue.removeEventListener("complete",ae),ue.removeEventListener("error",Be),ue.removeEventListener("abort",Be)},ae=()=>{Q(),fe()},Be=()=>{ee(ue.error||new DOMException("AbortError","AbortError")),fe()};ue.addEventListener("complete",ae),ue.addEventListener("error",Be),ue.addEventListener("abort",Be)});he.set(ue,we)}(ue),((ue,we)=>we.some(Q=>ue instanceof Q))(ue,function le(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Ne):ue)}function ge(ue){if(ue instanceof IDBRequest)return function J(ue){const we=new Promise((Q,ee)=>{const fe=()=>{ue.removeEventListener("success",ae),ue.removeEventListener("error",Be)},ae=()=>{Q(ge(ue.result)),fe()},Be=()=>{ee(ue.error),fe()};ue.addEventListener("success",ae),ue.addEventListener("error",Be)});return we.then(Q=>{Q instanceof IDBCursor&&pe.set(Q,ue)}).catch(()=>{}),z.set(we,ue),we}(ue);if(K.has(ue))return K.get(ue);const we=Ee(ue);return we!==ue&&(K.set(ue,we),z.set(we,ue)),we}const Qe=ue=>z.get(ue);function Ze(ue,we,{blocked:Q,upgrade:ee,blocking:fe,terminated:ae}={}){const Be=indexedDB.open(ue,we),je=ge(Be);return ee&&Be.addEventListener("upgradeneeded",gt=>{ee(ge(Be.result),gt.oldVersion,gt.newVersion,ge(Be.transaction))}),Q&&Be.addEventListener("blocked",()=>Q()),je.then(gt=>{ae&&gt.addEventListener("close",()=>ae()),fe&&gt.addEventListener("versionchange",()=>fe())}).catch(()=>{}),je}function Le(ue,{blocked:we}={}){const Q=indexedDB.deleteDatabase(ue);return we&&Q.addEventListener("blocked",()=>we()),ge(Q).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ge=new Map;function ie(ue,we){if(!(ue instanceof IDBDatabase)||we in ue||"string"!=typeof we)return;if(Ge.get(we))return Ge.get(we);const Q=we.replace(/FromIndex$/,""),ee=we!==Q,fe=Ce.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!fe&&!Pe.includes(Q))return;const ae=function(){var Be=(0,p.Z)(function*(je,...gt){const sn=this.transaction(je,fe?"readwrite":"readonly");let jt=sn.store;return ee&&(jt=jt.index(gt.shift())),(yield Promise.all([jt[Q](...gt),fe&&sn.done]))[0]});return function(gt){return Be.apply(this,arguments)}}();return Ge.set(we,ae),ae}!function Te(ue){Ne=ue(Ne)}(ue=>({...ue,get:(we,Q,ee)=>ie(we,Q)||ue.get(we,Q,ee),has:(we,Q)=>!!ie(we,Q)||ue.has(we,Q)}))},5861:(pt,Re,F)=>{function p(k,se,le,me,pe,he,ve){try{var K=k[he](ve),z=K.value}catch(J){return void le(J)}K.done?se(z):Promise.resolve(z).then(me,pe)}function $(k){return function(){var se=this,le=arguments;return new Promise(function(me,pe){var he=k.apply(se,le);function ve(z){p(he,me,pe,ve,K,"next",z)}function K(z){p(he,me,pe,ve,K,"throw",z)}ve(void 0)})}}F.d(Re,{Z:()=>$})}},pt=>{pt(pt.s=3453)}]);